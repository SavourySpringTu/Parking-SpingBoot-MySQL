(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+AVE":function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,n){function r(){var e=a;i(e)&&e.a.parentNode&&n(e.g)}var a=e;t(e.b,r),t(e.c,r),i(e)}function o(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var s=null,c=null,l=null,u=null;function d(){return null===u&&(u=!!document.fonts),u}function p(){if(null===l){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}l=""!==e.style.font}return l}function h(e,t){return[e.style,e.weight,p()?e.stretch:"","100px",t].join(" ")}o.prototype.load=function(e,t){var i=this,o=e||"BESbswy",l=0,u=t||3e3,p=(new Date).getTime();return new Promise((function(e,t){if(d()&&!function(){if(null===c)if(d()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);c=!!e&&603>parseInt(e[1],10)}else c=!1;return c}()){var f=new Promise((function(e,t){!function n(){(new Date).getTime()-p>=u?t(Error(u+"ms timeout exceeded")):document.fonts.load(h(i,'"'+i.family+'"'),o).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),m=new Promise((function(e,t){l=setTimeout((function(){t(Error(u+"ms timeout exceeded"))}),u)}));Promise.race([m,f]).then((function(){clearTimeout(l),e(i)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function c(){var t;(t=-1!=g&&-1!=b||-1!=g&&-1!=v||-1!=b&&-1!=v)&&((t=g!=b&&g!=v&&b!=v)||(null===s&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(g==_&&b==_&&v==_||g==y&&b==y&&v==y||g==O&&b==O&&v==O)),t=!t),t&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(l),e(i))}var d=new n(o),f=new n(o),m=new n(o),g=-1,b=-1,v=-1,_=-1,y=-1,O=-1,x=document.createElement("div");x.dir="ltr",r(d,h(i,"sans-serif")),r(f,h(i,"serif")),r(m,h(i,"monospace")),x.appendChild(d.a),x.appendChild(f.a),x.appendChild(m.a),document.body.appendChild(x),_=d.a.offsetWidth,y=f.a.offsetWidth,O=m.a.offsetWidth,function e(){if((new Date).getTime()-p>=u)x.parentNode&&x.parentNode.removeChild(x),t(Error(u+"ms timeout exceeded"));else{var n=document.hidden;!0!==n&&void 0!==n||(g=d.a.offsetWidth,b=f.a.offsetWidth,v=m.a.offsetWidth,c()),l=setTimeout(e,50)}}(),a(d,(function(e){g=e,c()})),r(d,h(i,'"'+i.family+'",sans-serif')),a(f,(function(e){b=e,c()})),r(f,h(i,'"'+i.family+'",serif')),a(m,(function(e){v=e,c()})),r(m,h(i,'"'+i.family+'",monospace'))}))}))},e.exports=o}()},"+ETr":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("QoSw"),i=n("nsO7"),a=n("Xpu5"),o=n("K5wl"),s=n("TLy2"),c=n("xVbo"),l=n("8j5Y"),u=n("x77O"),d=n("5xGT"),p=n("6Oco"),h=n("EM62"),f=function(){function e(e,t,n,r){this.ll=e,this.commandService=t,this.changeBuilder=n,this.syncEdata=r}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeEDataChangeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=this,r=e.__sakota__.getChanges();return Object(i.isEmpty)(e.eData)||Object(i.isEmpty)(r)||"Execute"!==t?p.a:this.ll.forDiagram(e.id,!1).getDiagramOnce().pipe(Object(s.a)((function(t){return n.changeBuilder.buildChanges(e,t).pipe(Object(c.a)((function(e){return e.length>0})),Object(l.a)((function(t){n.syncEdata.syncEdataChanges(t,[e]),t.forEach((function(t){var r=t.__sakota__.getChanges();Object(i.isEmpty)(r)||n.commandService.dispatch(a.a.applyModifierEData,t.id,{modifier:r,diagramId:e.id})}))})))})))},e.\u0275fac=function(t){return new(t||e)(h.qc(r.a),h.qc(d.B),h.qc(u.a),h.qc(o.a))},e.\u0275prov=h.cc({token:e,factory:e.\u0275fac}),e}()},"+ITg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n("o5Kk")),a=s(n("8wi9")),o=s(n("fX4D"));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));"string"==typeof e&&(e=JSON.parse(e)),e&&e.conditions&&n.setConditions(e.conditions),e&&e.onSuccess&&n.on("success",e.onSuccess),e&&e.onFailure&&n.on("failure",e.onFailure),e&&(e.name||0===e.name)&&n.setName(e.name);var r=e&&e.priority||1;n.setPriority(r);var i=e&&e.event||{type:"unknown"};return n.setEvent(i),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"setPriority",value:function(e){if((e=parseInt(e,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=e,this}},{key:"setName",value:function(e){if(!e&&0!==e)throw new Error('Rule "name" must be defined');return this.name=e,this}},{key:"setConditions",value:function(e){if(!Object.prototype.hasOwnProperty.call(e,"all")&&!Object.prototype.hasOwnProperty.call(e,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new i.default(e),this}},{key:"setEvent",value:function(e){if(!e)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(e,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.ruleEvent={type:e.type},e.params&&(this.ruleEvent.params=e.params),this}},{key:"getEvent",value:function(){return this.ruleEvent}},{key:"getPriority",value:function(){return this.priority}},{key:"getConditions",value:function(){return this.conditions}},{key:"getEngine",value:function(){return this.engine}},{key:"setEngine",value:function(e){return this.engine=e,this}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.ruleEvent,name:this.name};return e?JSON.stringify(t):t}},{key:"prioritizeConditions",value:function(e){var t=this,n=e.reduce((function(e,n){var r=n.priority;if(!r){var i=t.engine.getFact(n.fact);r=i&&i.priority||1}return e[r]||(e[r]=[]),e[r].push(n),e}),{});return Object.keys(n).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(e){return n[e]}))}},{key:"evaluate",value:function(e){var t=this,n=new a.default(this.conditions,this.ruleEvent,this.priority,this.name),r=function(n,r){return Array.isArray(n)||(n=[n]),Promise.all(n.map((function(n){return function(n){if(n.isBooleanOperator()){var r=n[n.operator];return("all"===n.operator?c(r):s(r)).then((function(e){var t=!0===e;return n.result=t,t}))}return n.evaluate(e,t.engine.operators).then((function(e){var t=e.result;return n.factResult=e.leftHandSideValue,n.result=t,t}))}(n)}))).then((function(e){return(0,o.default)("rule::evaluateConditions results",e),r.call(e,(function(e){return!0===e}))}))},i=function(e,n){if(0===e.length)return Promise.resolve(!0);var i=Array.prototype.some;"all"===n&&(i=Array.prototype.every);for(var a=t.prioritizeConditions(e),s=Promise.resolve(),c=function(e){var t=a[e],c=!1;s=s.then((function(e){return"any"===n&&!0===e||c?((0,o.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),c=!0,!0):"all"===n&&!1===e||c?((0,o.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),c=!0,!1):r(t,i)}))},l=0;l<a.length;l++)c(l);return s},s=function(e){return i(e,"any")},c=function(e){return i(e,"all")},l=function(r){n.setResult(r);var i=r?"success":"failure";return t.emitAsync(i,n.event,e,n).then((function(){return n}))};return n.conditions.any?s(n.conditions.any).then((function(e){return l(e)})):c(n.conditions.all).then((function(e){return l(e)}))}}]),t}(s(n("+gXh")).default);t.default=c},"+gXh":function(e,t,n){var r;!function(i){var a=Object.hasOwnProperty,o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s="object"==typeof process&&"function"==typeof process.nextTick,c="function"==typeof Symbol,l="object"==typeof Reflect,u="function"==typeof setImmediate?setImmediate:setTimeout,d=c?l&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function p(){this._events={},this._conf&&h.call(this,this._conf)}function h(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==i&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function f(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var m=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function g(e,t){for(var n={},r=e.length,a=t?value.length:0,o=0;o<r;o++)n[e[o]]=o<a?t[o]:i;return n}function b(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var a=e._observers;a?a.push(this):e._observers=[this]}function v(e,t,n,r){var o=Object.assign({},t);if(!e)return o;if("object"!=typeof e)throw TypeError("options must be an object");var s,c,l,u=Object.keys(e),d=u.length;function p(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<d;h++){if(s=u[h],!r&&!a.call(t,s))throw Error('Unknown "'+s+'" option');(c=e[s])!==i&&(l=n[s],o[s]=l?l(c,p):c)}return o}function _(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function y(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var a=typeof e;if(a===r||a===i)return e;n(t)}:function(r,i){for(var a=typeof r,o=n;o-- >0;)if(a===e[o])return r;i(t)}}Object.assign(b.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,a=this._emitter,o=this._listeners,s=function(){var r=m.apply(null,arguments),o={data:r,name:t,original:e};if(n){var s=n.call(i,o);!1!==s&&a.emit.apply(a,[o.name].concat(r))}else a.emit.apply(a,[t].concat(r))};if(o[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,a._newListener&&a._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===o[e]&&(o[e]=s,r._on.call(i,e,s))},a.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!a.hasListeners(n)&&o[e]&&(o[e]=null,r._off.call(i,e,s))},o[e]=null,a.on("removeListener",this._onRemoveListener)):(o[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,a=this._listeners,o=this._emitter,s=this._off,c=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function l(){i._onNewListener&&(o.off("newListener",i._onNewListener),o.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=k.call(o,i);o._observers.splice(e,1)}if(e){if(!(t=a[e]))return;s.call(c,e,t),delete a[e],--this._listenersCount||l()}else{for(r=(n=d(a)).length;r-- >0;)e=n[r],s.call(c,e,a[e]);this._listeners={},this._listenersCount=0,l()}}});var O=y(["function"]),x=y(["object","function"]);function E(e,t,n){var r,i,a,o=0,s=new e((function(c,l,u){function d(){i&&(i=null),o&&(clearTimeout(o),o=0)}n=v(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var p=function(e){d(),c(e)},h=function(e){d(),l(e)};r?t(p,h,u):(i=[function(e){h(e||Error("canceled"))}],t(p,h,(function(e){if(a)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),a=!0),n.timeout>0&&(o=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",o=0,s.cancel(e),l(e)}),n.timeout))}));return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function k(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function C(e,t,n,r,i){if(!n)return null;if(0===r){var a=typeof t;if("string"===a){var o,s,c=0,l=0,u=this.delimiter,p=u.length;if(-1!==(s=t.indexOf(u))){o=new Array(5);do{o[c++]=t.slice(l,s),l=s+p}while(-1!==(s=t.indexOf(u,l)));o[c++]=t.slice(l),t=o,i=c}else t=[t],i=1}else"object"===a?i=t.length:(t=[t],i=1)}var h,f,m,g,b,v,_,y=null,O=t[r],x=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),y=[n]):(e&&e.push.apply(e,n._listeners),y=[n]));else{if("*"===O){for(s=(v=d(n)).length;s-- >0;)"_listeners"!==(h=v[s])&&(_=C(e,t,n[h],r+1,i))&&(y?y.push.apply(y,_):y=_);return y}if("**"===O){for((b=r+1===i||r+2===i&&"*"===x)&&n._listeners&&(y=C(e,t,n,i,i)),s=(v=d(n)).length;s-- >0;)"_listeners"!==(h=v[s])&&("*"===h||"**"===h?(n[h]._listeners&&!b&&(_=C(e,t,n[h],i,i))&&(y?y.push.apply(y,_):y=_),_=C(e,t,n[h],r,i)):_=C(e,t,n[h],h===x?r+2:r,i),_&&(y?y.push.apply(y,_):y=_));return y}n[O]&&(y=C(e,t,n[O],r+1,i))}if((f=n["*"])&&C(e,t,f,r+1,i),m=n["**"])if(r<i)for(m._listeners&&C(e,t,m,i,i),s=(v=d(m)).length;s-- >0;)"_listeners"!==(h=v[s])&&(h===x?C(e,t,m[h],r+2,i):h===O?C(e,t,m[h],r+1,i):((g={})[h]=m[h],C(e,t,{"**":g},r+1,i)));else m._listeners?C(e,t,m,i,i):m["*"]&&m["*"]._listeners&&C(e,t,m["*"],i,i);return y}function w(e,t,n){var r,i,a=0,o=0,s=this.delimiter,c=s.length;if("string"==typeof e)if(-1!==(r=e.indexOf(s))){i=new Array(5);do{i[a++]=e.slice(o,r),o=r+c}while(-1!==(r=e.indexOf(s,o)));i[a++]=e.slice(o)}else i=[e],a=1;else i=e,a=e.length;if(a>1)for(r=0;r+1<a;r++)if("**"===i[r]&&"**"===i[r+1])return;var l,u=this.listenerTree;for(r=0;r<a;r++)if(u=u[l=i[r]]||(u[l]={}),r===a-1)return u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),n?u._listeners.unshift(t):u._listeners.push(t),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,f.call(this,u._listeners.length,l))):u._listeners=t,!0;return!0}function S(e,t,n,r){for(var i,a,o,s,c=d(e),l=c.length,u=e._listeners;l-- >0;)i=e[a=c[l]],o="_listeners"===a?n:n?n.concat(a):[a],s=r||"symbol"==typeof a,u&&t.push(s?o:o.join(this.delimiter)),"object"==typeof i&&S.call(this,i,t,o,s);return t}function I(e){for(var t,n,r,i=d(e),a=i.length;a-- >0;)(t=e[n=i[a]])&&(r=!0,"_listeners"===n||I(t)||delete e[n]);return r}function T(e,t,n){this.emitter=e,this.event=t,this.listener=n}function A(e,t,n){if(!0===n)a=!0;else if(!1===n)r=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var r=n.async,a=n.promisify,o=n.nextTick,c=n.objectify}if(r||o||a){var l=t,d=t._origin||t;if(o&&!s)throw Error("process.nextTick is not supported");a===i&&(a="AsyncFunction"===t.constructor.name),(t=function(){var e=arguments,t=this,n=this.event;return a?o?Promise.resolve():new Promise((function(e){u(e)})).then((function(){return t.event=n,l.apply(t,e)})):(o?process.nextTick:u)((function(){t.event=n,l.apply(t,e)}))})._async=!0,t._origin=d}return[t,c?new T(this,e,t):this]}function P(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,e)}T.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},P.EventEmitter2=P,P.prototype.listenTo=function(e,t,n){if("object"!=typeof e)throw TypeError("target musts be an object");var r=this;function a(t){if("object"!=typeof t)throw TypeError("events must be an object");var i,a=n.reducers,o=k.call(r,e);i=-1===o?new b(r,e,n):r._observers[o];for(var s,c=d(t),l=c.length,u="function"==typeof a,p=0;p<l;p++)s=c[p],i.subscribe(s,t[s]||s,u?a:a&&a[s])}return n=v(n,{on:i,off:i,reducers:i},{on:O,off:O,reducers:x}),o(t)?a(g(t)):a("string"==typeof t?g(t.split(/\s+/)):t),this},P.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,a=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),a=!0);return a},P.prototype.delimiter=".",P.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},P.prototype.getMaxListeners=function(){return this._maxListeners},P.prototype.event="",P.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},P.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},P.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},P.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},P.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},P.prototype._many=function(e,t,n,r,i){var a=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&a.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r,i)},P.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var e,t,n,r,i,a,o=arguments[0],s=this.wildcard;if("newListener"===o&&!this._newListener&&!this._events.newListener)return!1;if(s&&(e=o,"newListener"!==o&&"removeListener"!==o&&"object"==typeof o)){if(n=o.length,c)for(r=0;r<n;r++)if("symbol"==typeof o[r]){a=!0;break}a||(o=o.join(this.delimiter))}var l,u=arguments.length;if(this._all&&this._all.length)for(r=0,n=(l=this._all.slice()).length;r<n;r++)switch(this.event=o,u){case 1:l[r].call(this,o);break;case 2:l[r].call(this,o,arguments[1]);break;case 3:l[r].call(this,o,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(s)l=[],C.call(this,l,e,this.listenerTree,0,n);else{if("function"==typeof(l=this._events[o])){switch(this.event=o,u){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(u-1),i=1;i<u;i++)t[i-1]=arguments[i];l.apply(this,t)}return!0}l&&(l=l.slice())}if(l&&l.length){if(u>3)for(t=new Array(u-1),i=1;i<u;i++)t[i-1]=arguments[i];for(r=0,n=l.length;r<n;r++)switch(this.event=o,u){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===o)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},P.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var e,t,n,r,i,a,o=arguments[0],s=this.wildcard;if("newListener"===o&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(s&&(e=o,"newListener"!==o&&"removeListener"!==o&&"object"==typeof o)){if(r=o.length,c)for(i=0;i<r;i++)if("symbol"==typeof o[i]){t=!0;break}t||(o=o.join(this.delimiter))}var l,u=[],d=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=o,d){case 1:u.push(this._all[i].call(this,o));break;case 2:u.push(this._all[i].call(this,o,arguments[1]));break;case 3:u.push(this._all[i].call(this,o,arguments[1],arguments[2]));break;default:u.push(this._all[i].apply(this,arguments))}if(s?(l=[],C.call(this,l,e,this.listenerTree,0)):l=this._events[o],"function"==typeof l)switch(this.event=o,d){case 1:u.push(l.call(this));break;case 2:u.push(l.call(this,arguments[1]));break;case 3:u.push(l.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(d-1),a=1;a<d;a++)n[a-1]=arguments[a];u.push(l.apply(this,n))}else if(l&&l.length){if(l=l.slice(),d>3)for(n=new Array(d-1),a=1;a<d;a++)n[a-1]=arguments[a];for(i=0,r=l.length;i<r;i++)switch(this.event=o,d){case 1:u.push(l[i].call(this));break;case 2:u.push(l[i].call(this,arguments[1]));break;case 3:u.push(l[i].call(this,arguments[1],arguments[2]));break;default:u.push(l[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===o)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},P.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},P.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},P.prototype.onAny=function(e){return this._onAny(e,!1)},P.prototype.prependAny=function(e){return this._onAny(e,!0)},P.prototype.addListener=P.prototype.on,P.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},P.prototype._on=function(e,t,n,r){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");this._events||p.call(this);var a,o=this;return r!==i&&(t=(a=A.call(this,e,t,r))[0],o=a[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(w.call(this,e,t,n),o):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,f.call(this,this._events[e].length,e))):this._events[e]=t,o)},P.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();if(!(r=C.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var s=r[a];if(n=s._listeners,o(n)){for(var c=-1,l=0,u=n.length;l<u;l++)if(n[l]===t||n[l].listener&&n[l].listener===t||n[l]._origin&&n[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&I(this.listenerTree),this},P.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},P.prototype.removeListener=P.prototype.off,P.prototype.removeAllListeners=function(e){if(e===i)return!this._events||p.call(this),this;if(this.wildcard){var t,n=C.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&I(this.listenerTree)}else this._events&&(this._events[e]=null);return this},P.prototype.listeners=function(e){var t,n,r,a,o,s=this._events;if(e===i){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(a=(t=d(s)).length,r=[];a-- >0;)"function"==typeof(n=s[t[a]])?r.push(n):r.push.apply(r,n);return r}if(this.wildcard){if(!(o=this.listenerTree))return[];var c=[],l="string"==typeof e?e.split(this.delimiter):e.slice();return C.call(this,c,l,o,0),c}return s&&(n=s[e])?"function"==typeof n?[n]:n:[]},P.prototype.eventNames=function(e){var t=this._events;return this.wildcard?S.call(this,this.listenerTree,[],null,e):t?d(t):[]},P.prototype.listenerCount=function(e){return this.listeners(e).length},P.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return C.call(this,t,n,this.listenerTree,0),t.length>0}var r=this._events,a=this._all;return!!(a&&a.length||r&&(e===i?d(r).length:r[e]))},P.prototype.listenersAny=function(){return this._all?this._all:[]},P.prototype.waitFor=function(e,t){var n=this,r=typeof t;return"number"===r?t={timeout:t}:"function"===r&&(t={filter:t}),E((t=v(t,{timeout:0,filter:i,handleError:!1,Promise:Promise,overload:!1},{filter:O,Promise:_})).Promise,(function(r,i,a){function o(){var a=t.filter;if(!a||a.apply(n,arguments))if(n.off(e,o),t.handleError){var s=arguments[0];s?i(s):r(m.apply(null,arguments).slice(1))}else r(m.apply(null,arguments))}a((function(){n.off(e,o)})),n._on(e,o,!1)}),{timeout:t.timeout,overload:t.overload})};var M=P.prototype;Object.defineProperties(P,{defaultMaxListeners:{get:function(){return M._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");M._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return E((n=v(n,{Promise:Promise,timeout:0,overload:!1},{Promise:_})).Promise,(function(n,r,i){var a;if("function"==typeof e.addEventListener)return a=function(){n(m.apply(null,arguments))},i((function(){e.removeEventListener(t,a)})),void e.addEventListener(t,a,{once:!0});var o,s=function(){o&&e.removeListener("error",o),n(m.apply(null,arguments))};"error"!==t&&(o=function(n){e.removeListener(t,s),r(n)},e.once("error",o)),i((function(){o&&e.removeListener("error",o),e.removeListener(t,s)})),e.once(t,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(M,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(r=(function(){return P}).call(t,n,t,e))===i||(e.exports=r)}()},"/6pf":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("xVbo"),i=n("J+dc"),a=n("YtkY"),o=n("5xGT"),s=n("ROBh"),c=n("EM62"),l=function(){function e(e){this.state=e}return e.prototype.getFeatureData=function(e,t){return Object(s.a)(t)},e.prototype.getApplyData=function(e,t){return this.state.get("EditingText").open?this.state.changes("EditingText").pipe(Object(r.a)((function(e){return!e.open})),Object(i.a)(1),Object(a.a)((function(){return t}))):Object(s.a)(t)},e.\u0275fac=function(t){return new(t||e)(c.qc(o.Hb))},e.\u0275prov=c.cc({token:e,factory:e.\u0275fac}),e}()},"/AMt":function(e,t,n){"use strict";n.d(t,"a",(function(){return jt}));var r,i,a=n("zjfJ"),o=n("K/z8"),s=n("0Jwk"),c=n("qDiq"),l=n("zygG"),u=(n("pWxA"),n("2h71")),d=n("PRnZ"),p=n("sRHE"),h=n("8K1b"),f=n("AqVP"),m=n("fGyu"),g=n("9fIP"),b=n("MMYH");function v(e){if(":"!=e[0])return[null,e];var t=e.indexOf(":",1);if(-1==t)throw new Error('Unsupported format "'.concat(e,'" expecting ":namespace:name"'));return[e.slice(1,t),e.slice(t+1)]}function _(e){return"ng-container"===v(e)[1]}function y(e){return"ng-content"===v(e)[1]}function O(e){return"ng-template"===v(e)[1]}function x(e){return null===e?null:v(e)[0]}function E(e,t){return e?":".concat(e,":").concat(t):t}!function(e){e[e.RAW_TEXT=0]="RAW_TEXT",e[e.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",e[e.PARSABLE_DATA=2]="PARSABLE_DATA"}(i||(i={}));var k={Aacute:"\xc1",aacute:"\xe1",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",AElig:"\xc6",aelig:"\xe6",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",Alpha:"\u0391",alpha:"\u03b1",amp:"&",and:"\u2227",ang:"\u2220",apos:"'",Aring:"\xc5",aring:"\xe5",asymp:"\u2248",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",bdquo:"\u201e",Beta:"\u0392",beta:"\u03b2",brvbar:"\xa6",bull:"\u2022",cap:"\u2229",Ccedil:"\xc7",ccedil:"\xe7",cedil:"\xb8",cent:"\xa2",Chi:"\u03a7",chi:"\u03c7",circ:"\u02c6",clubs:"\u2663",cong:"\u2245",copy:"\xa9",crarr:"\u21b5",cup:"\u222a",curren:"\xa4",dagger:"\u2020",Dagger:"\u2021",darr:"\u2193",dArr:"\u21d3",deg:"\xb0",Delta:"\u0394",delta:"\u03b4",diams:"\u2666",divide:"\xf7",Eacute:"\xc9",eacute:"\xe9",Ecirc:"\xca",ecirc:"\xea",Egrave:"\xc8",egrave:"\xe8",empty:"\u2205",emsp:"\u2003",ensp:"\u2002",Epsilon:"\u0395",epsilon:"\u03b5",equiv:"\u2261",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",exist:"\u2203",fnof:"\u0192",forall:"\u2200",frac12:"\xbd",frac14:"\xbc",frac34:"\xbe",frasl:"\u2044",Gamma:"\u0393",gamma:"\u03b3",ge:"\u2265",gt:">",harr:"\u2194",hArr:"\u21d4",hearts:"\u2665",hellip:"\u2026",Iacute:"\xcd",iacute:"\xed",Icirc:"\xce",icirc:"\xee",iexcl:"\xa1",Igrave:"\xcc",igrave:"\xec",image:"\u2111",infin:"\u221e",int:"\u222b",Iota:"\u0399",iota:"\u03b9",iquest:"\xbf",isin:"\u2208",Iuml:"\xcf",iuml:"\xef",Kappa:"\u039a",kappa:"\u03ba",Lambda:"\u039b",lambda:"\u03bb",lang:"\u27e8",laquo:"\xab",larr:"\u2190",lArr:"\u21d0",lceil:"\u2308",ldquo:"\u201c",le:"\u2264",lfloor:"\u230a",lowast:"\u2217",loz:"\u25ca",lrm:"\u200e",lsaquo:"\u2039",lsquo:"\u2018",lt:"<",macr:"\xaf",mdash:"\u2014",micro:"\xb5",middot:"\xb7",minus:"\u2212",Mu:"\u039c",mu:"\u03bc",nabla:"\u2207",nbsp:"\xa0",ndash:"\u2013",ne:"\u2260",ni:"\u220b",not:"\xac",notin:"\u2209",nsub:"\u2284",Ntilde:"\xd1",ntilde:"\xf1",Nu:"\u039d",nu:"\u03bd",Oacute:"\xd3",oacute:"\xf3",Ocirc:"\xd4",ocirc:"\xf4",OElig:"\u0152",oelig:"\u0153",Ograve:"\xd2",ograve:"\xf2",oline:"\u203e",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",oplus:"\u2295",or:"\u2228",ordf:"\xaa",ordm:"\xba",Oslash:"\xd8",oslash:"\xf8",Otilde:"\xd5",otilde:"\xf5",otimes:"\u2297",Ouml:"\xd6",ouml:"\xf6",para:"\xb6",permil:"\u2030",perp:"\u22a5",Phi:"\u03a6",phi:"\u03c6",Pi:"\u03a0",pi:"\u03c0",piv:"\u03d6",plusmn:"\xb1",pound:"\xa3",prime:"\u2032",Prime:"\u2033",prod:"\u220f",prop:"\u221d",Psi:"\u03a8",psi:"\u03c8",quot:'"',radic:"\u221a",rang:"\u27e9",raquo:"\xbb",rarr:"\u2192",rArr:"\u21d2",rceil:"\u2309",rdquo:"\u201d",real:"\u211c",reg:"\xae",rfloor:"\u230b",Rho:"\u03a1",rho:"\u03c1",rlm:"\u200f",rsaquo:"\u203a",rsquo:"\u2019",sbquo:"\u201a",Scaron:"\u0160",scaron:"\u0161",sdot:"\u22c5",sect:"\xa7",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sim:"\u223c",spades:"\u2660",sub:"\u2282",sube:"\u2286",sum:"\u2211",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supe:"\u2287",szlig:"\xdf",Tau:"\u03a4",tau:"\u03c4",there4:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thinsp:"\u2009",THORN:"\xde",thorn:"\xfe",tilde:"\u02dc",times:"\xd7",trade:"\u2122",Uacute:"\xda",uacute:"\xfa",uarr:"\u2191",uArr:"\u21d1",Ucirc:"\xdb",ucirc:"\xfb",Ugrave:"\xd9",ugrave:"\xf9",uml:"\xa8",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",Uuml:"\xdc",uuml:"\xfc",weierp:"\u2118",Xi:"\u039e",xi:"\u03be",Yacute:"\xdd",yacute:"\xfd",yen:"\xa5",yuml:"\xff",Yuml:"\u0178",Zeta:"\u0396",zeta:"\u03b6",zwj:"\u200d",zwnj:"\u200c"};k.ngsp="\ue500";var C,w,S=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.closedByChildren,a=n.implicitNamespacePrefix,o=n.contentType,s=void 0===o?i.PARSABLE_DATA:o,c=n.closedByParent,l=void 0!==c&&c,u=n.isVoid,d=void 0!==u&&u,p=n.ignoreFirstLf,h=void 0!==p&&p,f=n.preventNamespaceInheritance,m=void 0!==f&&f;Object(g.a)(this,e),this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,r&&r.length>0&&r.forEach((function(e){return t.closedByChildren[e]=!0})),this.isVoid=d,this.closedByParent=l||d,this.implicitNamespacePrefix=a||null,this.contentType=s,this.ignoreFirstLf=h,this.preventNamespaceInheritance=m}return Object(b.a)(e,[{key:"isClosedByChild",value:function(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}}]),e}();function I(e){var t,n;return w||(C=new S,w={base:new S({isVoid:!0}),meta:new S({isVoid:!0}),area:new S({isVoid:!0}),embed:new S({isVoid:!0}),link:new S({isVoid:!0}),img:new S({isVoid:!0}),input:new S({isVoid:!0}),param:new S({isVoid:!0}),hr:new S({isVoid:!0}),br:new S({isVoid:!0}),source:new S({isVoid:!0}),track:new S({isVoid:!0}),wbr:new S({isVoid:!0}),p:new S({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new S({closedByChildren:["tbody","tfoot"]}),tbody:new S({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new S({closedByChildren:["tbody"],closedByParent:!0}),tr:new S({closedByChildren:["tr"],closedByParent:!0}),td:new S({closedByChildren:["td","th"],closedByParent:!0}),th:new S({closedByChildren:["td","th"],closedByParent:!0}),col:new S({isVoid:!0}),svg:new S({implicitNamespacePrefix:"svg"}),foreignObject:new S({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new S({implicitNamespacePrefix:"math"}),li:new S({closedByChildren:["li"],closedByParent:!0}),dt:new S({closedByChildren:["dt","dd"]}),dd:new S({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new S({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new S({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new S({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new S({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new S({closedByChildren:["optgroup"],closedByParent:!0}),option:new S({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new S({ignoreFirstLf:!0}),listing:new S({ignoreFirstLf:!0}),style:new S({contentType:i.RAW_TEXT}),script:new S({contentType:i.RAW_TEXT}),title:new S({contentType:i.ESCAPABLE_RAW_TEXT}),textarea:new S({contentType:i.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),null!==(n=null!==(t=w[e])&&void 0!==t?t:w[e.toLowerCase()])&&void 0!==n?n:C}var T,A,P=new RegExp("(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*]+)(?:=([\"']?)([^\\]\"']*)\\5)?\\])|(\\))|(\\s*,\\s*)","g"),M=function(){function e(){Object(g.a)(this,e),this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}return Object(b.a)(e,[{key:"isElementSelector",value:function(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length}},{key:"hasElementSelector",value:function(){return!!this.element}},{key:"setElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.element=e}},{key:"getMatchingElementTemplate",value:function(){for(var e=this.element||"div",t=this.classNames.length>0?' class="'.concat(this.classNames.join(" "),'"'):"",n="",r=0;r<this.attrs.length;r+=2){var i=this.attrs[r],a=""!==this.attrs[r+1]?'="'.concat(this.attrs[r+1],'"'):"";n+=" ".concat(i).concat(a)}return I(e).isVoid?"<".concat(e).concat(t).concat(n,"/>"):"<".concat(e).concat(t).concat(n,"></").concat(e,">")}},{key:"getAttrs",value:function(){var e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}},{key:"addAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.attrs.push(e,t&&t.toLowerCase()||"")}},{key:"addClassName",value:function(e){this.classNames.push(e.toLowerCase())}},{key:"toString",value:function(){var e=this.element||"";if(this.classNames&&this.classNames.forEach((function(t){return e+=".".concat(t)})),this.attrs)for(var t=0;t<this.attrs.length;t+=2){var n=this.attrs[t],r=this.attrs[t+1];e+="[".concat(n).concat(r?"="+r:"","]")}return this.notSelectors.forEach((function(t){return e+=":not(".concat(t,")")})),e}}],[{key:"parse",value:function(t){var n,r=[],i=function(e,t){t.notSelectors.length>0&&!t.element&&0==t.classNames.length&&0==t.attrs.length&&(t.element="*"),e.push(t)},a=new e,o=a,s=!1;for(P.lastIndex=0;n=P.exec(t);){if(n[1]){if(s)throw new Error("Nesting :not in a selector is not allowed");s=!0,o=new e,a.notSelectors.push(o)}var c=n[2];if(c){var l=n[3];"#"===l?o.addAttribute("id",c.substr(1)):"."===l?o.addClassName(c.substr(1)):o.setElement(c)}var u=n[4];if(u&&o.addAttribute(u,n[6]),n[7]&&(s=!1,o=a),n[8]){if(s)throw new Error("Multiple selectors in :not are not supported");i(r,a),a=o=new e}}return i(r,a),r}}]),e}(),D=function(){function e(){Object(g.a)(this,e),this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}return Object(b.a)(e,[{key:"addSelectables",value:function(e,t){var n=null;e.length>1&&(n=new j(e),this._listContexts.push(n));for(var r=0;r<e.length;r++)this._addSelectable(e[r],t,n)}},{key:"_addSelectable",value:function(e,t,n){var r=this,i=e.element,a=e.classNames,o=e.attrs,s=new R(e,t,n);i&&(0===o.length&&0===a.length?this._addTerminal(r._elementMap,i,s):r=this._addPartial(r._elementPartialMap,i));if(a)for(var c=0;c<a.length;c++){var l=0===o.length&&c===a.length-1,u=a[c];l?this._addTerminal(r._classMap,u,s):r=this._addPartial(r._classPartialMap,u)}if(o)for(var d=0;d<o.length;d+=2){var p=d===o.length-2,h=o[d],f=o[d+1];if(p){var m=r._attrValueMap,g=m.get(h);g||(g=new Map,m.set(h,g)),this._addTerminal(g,f,s)}else{var b=r._attrValuePartialMap,v=b.get(h);v||(v=new Map,b.set(h,v)),r=this._addPartial(v,f)}}}},{key:"_addTerminal",value:function(e,t,n){var r=e.get(t);r||(r=[],e.set(t,r)),r.push(n)}},{key:"_addPartial",value:function(t,n){var r=t.get(n);return r||(r=new e,t.set(n,r)),r}},{key:"match",value:function(e,t){for(var n=!1,r=e.element,i=e.classNames,a=e.attrs,o=0;o<this._listContexts.length;o++)this._listContexts[o].alreadyMatched=!1;if(n=this._matchTerminal(this._elementMap,r,e,t)||n,n=this._matchPartial(this._elementPartialMap,r,e,t)||n,i)for(var s=0;s<i.length;s++){var c=i[s];n=this._matchTerminal(this._classMap,c,e,t)||n,n=this._matchPartial(this._classPartialMap,c,e,t)||n}if(a)for(var l=0;l<a.length;l+=2){var u=a[l],d=a[l+1],p=this._attrValueMap.get(u);d&&(n=this._matchTerminal(p,"",e,t)||n),n=this._matchTerminal(p,d,e,t)||n;var h=this._attrValuePartialMap.get(u);d&&(n=this._matchPartial(h,"",e,t)||n),n=this._matchPartial(h,d,e,t)||n}return n}},{key:"_matchTerminal",value:function(e,t,n,r){if(!e||"string"!=typeof t)return!1;var i=e.get(t)||[],a=e.get("*");if(a&&(i=i.concat(a)),0===i.length)return!1;for(var o=!1,s=0;s<i.length;s++)o=i[s].finalize(n,r)||o;return o}},{key:"_matchPartial",value:function(e,t,n,r){if(!e||"string"!=typeof t)return!1;var i=e.get(t);return!!i&&i.match(n,r)}}],[{key:"createNotMatcher",value:function(t){var n=new e;return n.addSelectables(t,null),n}}]),e}(),j=function e(t){Object(g.a)(this,e),this.selectors=t,this.alreadyMatched=!1},R=function(){function e(t,n,r){Object(g.a)(this,e),this.selector=t,this.cbContext=n,this.listContext=r,this.notSelectors=t.notSelectors}return Object(b.a)(e,[{key:"finalize",value:function(e,t){var n=!0;!(this.notSelectors.length>0)||this.listContext&&this.listContext.alreadyMatched||(n=!D.createNotMatcher(this.notSelectors).match(e,null));return!n||!t||this.listContext&&this.listContext.alreadyMatched||(this.listContext&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),n}}]),e}();F("Inject",(function(e){return{token:e}})),F("InjectionToken",(function(e){return{_desc:e,"\u0275prov":void 0}})),F("Attribute",(function(e){return{attributeName:e}})),F("ContentChildren",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!1,isViewQuery:!1,descendants:!1},t)})),F("ContentChild",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!0,isViewQuery:!1,descendants:!0},t)})),F("ViewChildren",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!1,isViewQuery:!0,descendants:!0},t)})),F("ViewChild",(function(e,t){return Object.assign({selector:e,first:!0,isViewQuery:!0,descendants:!0},t)})),F("Directive",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}));!function(e){e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(T||(T={})),function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(A||(A={}));F("Component",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({changeDetection:A.Default},e)})),F("Pipe",(function(e){return Object.assign({pure:!0},e)})),F("Input",(function(e){return{bindingPropertyName:e}})),F("Output",(function(e){return{bindingPropertyName:e}})),F("HostBinding",(function(e){return{hostPropertyName:e}})),F("HostListener",(function(e,t){return{eventName:e,args:t}})),F("NgModule",(function(e){return e})),F("Injectable",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}));var L,N,B={name:"custom-elements"},U={name:"no-errors-schema"};F("Optional"),F("Self"),F("SkipSelf"),F("Host");function F(e,t){function n(){var n=t?t.apply(void 0,arguments):{};return Object.assign({ngMetadataName:e},n)}return n.isTypeOf=function(t){return t&&t.ngMetadataName===e},n.ngMetadataName=e,n}function q(e){var t=function(e){var t=e.classNames&&e.classNames.length?[8].concat(Object(m.a)(e.classNames)):[];return[e.element&&"*"!==e.element?e.element:""].concat(Object(m.a)(e.attrs),Object(m.a)(t))}(e),n=e.notSelectors&&e.notSelectors.length?e.notSelectors.map((function(e){return function(e){var t=e.classNames&&e.classNames.length?[8].concat(Object(m.a)(e.classNames)):[];return e.element?[5,e.element].concat(Object(m.a)(e.attrs),Object(m.a)(t)):e.attrs.length?[3].concat(Object(m.a)(e.attrs),Object(m.a)(t)):e.classNames&&e.classNames.length?[9].concat(Object(m.a)(e.classNames)):[]}(e)})):[];return t.concat.apply(t,Object(m.a)(n))}function W(e){return e?M.parse(e).map(q):[]}!function(e){e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL"}(L||(L={})),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore"}(N||(N={}));var H;!function(e){e[e.Const=0]="Const"}(H||(H={}));var K,z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(g.a)(this,e),this.modifiers=t}return Object(b.a)(e,[{key:"hasModifier",value:function(e){return-1!==this.modifiers.indexOf(e)}}]),e}();!function(e){e[e.Dynamic=0]="Dynamic",e[e.Bool=1]="Bool",e[e.String=2]="String",e[e.Int=3]="Int",e[e.Number=4]="Number",e[e.Function=5]="Function",e[e.Inferred=6]="Inferred",e[e.None=7]="None"}(K||(K={}));var V,G,Y=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i;return Object(g.a)(this,n),(i=t.call(this,r)).name=e,i}return Object(b.a)(n,[{key:"visitType",value:function(e,t){return e.visitBuiltinType(this,t)}}]),n}(z),X=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(g.a)(this,n),(i=t.call(this,r)).value=e,i.typeParams=a,i}return Object(b.a)(n,[{key:"visitType",value:function(e,t){return e.visitExpressionType(this,t)}}]),n}(z),Q=new Y(K.Dynamic),J=new Y(K.Inferred),$=new Y(K.Bool),Z=(new Y(K.Int),new Y(K.Number)),ee=new Y(K.String),te=(new Y(K.Function),new Y(K.None));function ne(e,t){return null==e||null==t?e==t:e.isEquivalent(t)}function re(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(!e[r].isEquivalent(t[r]))return!1;return!0}!function(e){e[e.Minus=0]="Minus",e[e.Plus=1]="Plus"}(V||(V={})),function(e){e[e.Equals=0]="Equals",e[e.NotEquals=1]="NotEquals",e[e.Identical=2]="Identical",e[e.NotIdentical=3]="NotIdentical",e[e.Minus=4]="Minus",e[e.Plus=5]="Plus",e[e.Divide=6]="Divide",e[e.Multiply=7]="Multiply",e[e.Modulo=8]="Modulo",e[e.And=9]="And",e[e.Or=10]="Or",e[e.BitwiseAnd=11]="BitwiseAnd",e[e.Lower=12]="Lower",e[e.LowerEquals=13]="LowerEquals",e[e.Bigger=14]="Bigger",e[e.BiggerEquals=15]="BiggerEquals"}(G||(G={}));var ie,ae=function(){function e(t,n){Object(g.a)(this,e),this.type=t||null,this.sourceSpan=n||null}return Object(b.a)(e,[{key:"prop",value:function(e,t){return new Re(this,e,null,t)}},{key:"key",value:function(e,t,n){return new Le(this,e,t,n)}},{key:"callMethod",value:function(e,t,n){return new he(this,e,t,null,n)}},{key:"callFn",value:function(e,t,n){return new fe(this,e,null,t,n)}},{key:"instantiate",value:function(e,t,n){return new me(this,e,t,n)}},{key:"conditional",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new Se(this,e,t,null,n)}},{key:"equals",value:function(e,t){return new je(G.Equals,this,e,null,t)}},{key:"notEquals",value:function(e,t){return new je(G.NotEquals,this,e,null,t)}},{key:"identical",value:function(e,t){return new je(G.Identical,this,e,null,t)}},{key:"notIdentical",value:function(e,t){return new je(G.NotIdentical,this,e,null,t)}},{key:"minus",value:function(e,t){return new je(G.Minus,this,e,null,t)}},{key:"plus",value:function(e,t){return new je(G.Plus,this,e,null,t)}},{key:"divide",value:function(e,t){return new je(G.Divide,this,e,null,t)}},{key:"multiply",value:function(e,t){return new je(G.Multiply,this,e,null,t)}},{key:"modulo",value:function(e,t){return new je(G.Modulo,this,e,null,t)}},{key:"and",value:function(e,t){return new je(G.And,this,e,null,t)}},{key:"bitwiseAnd",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new je(G.BitwiseAnd,this,e,null,t,n)}},{key:"or",value:function(e,t){return new je(G.Or,this,e,null,t)}},{key:"lower",value:function(e,t){return new je(G.Lower,this,e,null,t)}},{key:"lowerEquals",value:function(e,t){return new je(G.LowerEquals,this,e,null,t)}},{key:"bigger",value:function(e,t){return new je(G.Bigger,this,e,null,t)}},{key:"biggerEquals",value:function(e,t){return new je(G.BiggerEquals,this,e,null,t)}},{key:"isBlank",value:function(e){return this.equals(qe,e)}},{key:"cast",value:function(e,t){return new Ae(this,e,t)}},{key:"toStmt",value:function(){return new Ge(this,null)}}]),e}();!function(e){e[e.This=0]="This",e[e.Super=1]="Super",e[e.CatchError=2]="CatchError",e[e.CatchStack=3]="CatchStack"}(ie||(ie={}));var oe,se=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),a=t.call(this,r,i),"string"==typeof e?(a.name=e,a.builtin=null):(a.name=null,a.builtin=e),a}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&this.builtin===e.builtin}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadVarExpr(this,t)}},{key:"set",value:function(e){if(!this.name)throw new Error("Built in variable ".concat(this.builtin," can not be assigned to."));return new ue(this.name,e,null,this.sourceSpan)}}]),n}(ae),ce=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,r,i)).expr=e,a}return Object(b.a)(n,[{key:"visitExpression",value:function(e,t){return e.visitTypeofExpr(this,t)}},{key:"isEquivalent",value:function(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}},{key:"isConstant",value:function(){return this.expr.isConstant()}}]),n}(ae),le=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,r,i)).node=e,a}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.node===e.node}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWrappedNodeExpr(this,t)}}]),n}(ae),ue=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,i||r.type,a)).name=e,o.value=r,o}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWriteVarExpr(this,t)}},{key:"toDeclStmt",value:function(e,t){return new ze(this.name,this.value,e,t,this.sourceSpan)}},{key:"toConstDecl",value:function(){return this.toDeclStmt(J,[Ce.Final])}}]),n}(ae),de=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,a||i.type,o)).receiver=e,s.index=r,s.value=i,s}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWriteKeyExpr(this,t)}}]),n}(ae),pe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,a||i.type,o)).receiver=e,s.name=r,s.value=i,s}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWritePropExpr(this,t)}}]),n}(ae);!function(e){e[e.ConcatArray=0]="ConcatArray",e[e.SubscribeObservable=1]="SubscribeObservable",e[e.Bind=2]="Bind"}(oe||(oe={}));var he=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,a,o)).receiver=e,s.args=i,"string"==typeof r?(s.name=r,s.builtin=null):(s.name=null,s.builtin=r),s}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.builtin===e.builtin&&re(this.args,e.args)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInvokeMethodExpr(this,t)}}]),n}(ae),fe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(g.a)(this,n),(o=t.call(this,i,a)).fn=e,o.args=r,o.pure=s,o}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.fn.isEquivalent(e.fn)&&re(this.args,e.args)&&this.pure===e.pure}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInvokeFunctionExpr(this,t)}}]),n}(ae),me=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,i,a)).classExpr=e,o.args=r,o}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.classExpr.isEquivalent(e.classExpr)&&re(this.args,e.args)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInstantiateExpr(this,t)}}]),n}(ae),ge=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,r,i)).value=e,a}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value===e.value}},{key:"isConstant",value:function(){return!0}},{key:"visitExpression",value:function(e,t){return e.visitLiteralExpr(this,t)}}]),n}(ae),be=function e(t,n){Object(g.a)(this,e),this.text=t,this.sourceSpan=n},ve=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return n}(be),_e=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return n}(be),ye=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,ee,o)).metaBlock=e,s.messageParts=r,s.placeHolderNames=i,s.expressions=a,s}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return!1}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitLocalizedString(this,t)}},{key:"serializeI18nHead",value:function(){var e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e="".concat(this.metaBlock.meaning).concat("|").concat(e)),this.metaBlock.customId&&(e="".concat(e).concat("@@").concat(this.metaBlock.customId)),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach((function(t){e="".concat(e).concat("\u241f").concat(t)})),ke(e,this.messageParts[0].text)}},{key:"getMessagePartSourceSpan",value:function(e){var t,n;return null!==(n=null===(t=this.messageParts[e])||void 0===t?void 0:t.sourceSpan)&&void 0!==n?n:this.sourceSpan}},{key:"getPlaceholderSourceSpan",value:function(e){var t,n,r,i;return null!==(i=null!==(n=null===(t=this.placeHolderNames[e])||void 0===t?void 0:t.sourceSpan)&&void 0!==n?n:null===(r=this.expressions[e])||void 0===r?void 0:r.sourceSpan)&&void 0!==i?i:this.sourceSpan}},{key:"serializeI18nTemplatePart",value:function(e){return ke(this.placeHolderNames[e-1].text,this.messageParts[e].text)}}]),n}(ae),Oe=function(e){return e.replace(/\\/g,"\\\\")},xe=function(e){return e.replace(/:/g,"\\:")},Ee=function(e){return e.replace(/`/g,"\\`").replace(/\${/g,"$\\{")};function ke(e,t){return""===e?{cooked:t,raw:Ee((n=Oe(t),n.replace(/^:/,"\\:")))}:{cooked:":".concat(e,":").concat(t),raw:Ee(":".concat(xe(Oe(e)),":").concat(Oe(t)))};var n}var Ce,we=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return Object(g.a)(this,n),(i=t.call(this,r,o)).value=e,i.typeParams=a,i}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName&&this.value.runtime===e.value.runtime}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitExternalExpr(this,t)}}]),n}(ae),Se=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(g.a)(this,n),(i=t.call(this,o||r.type,s)).condition=e,i.falseCase=a,i.trueCase=r,i}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&ne(this.falseCase,e.falseCase)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitConditionalExpr(this,t)}}]),n}(ae),Ie=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i;return Object(g.a)(this,n),(i=t.call(this,$,r)).condition=e,i}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitNotExpr(this,t)}}]),n}(ae),Te=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i;return Object(g.a)(this,n),(i=t.call(this,e.type,r)).condition=e,i}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitAssertNotNullExpr(this,t)}}]),n}(ae),Ae=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,r,i)).value=e,a}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitCastExpr(this,t)}}]),n}(ae),Pe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(g.a)(this,e),this.name=t,this.type=n}return Object(b.a)(e,[{key:"isEquivalent",value:function(e){return this.name===e.name}}]),e}(),Me=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,i,a)).params=e,s.statements=r,s.name=o,s}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&re(this.params,e.params)&&re(this.statements,e.statements)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitFunctionExpr(this,t)}},{key:"toDeclStmt",value:function(e,t){return new Ve(e,this.params,this.statements,this.type,t,this.sourceSpan)}}]),n}(ae),De=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return Object(g.a)(this,n),(o=t.call(this,i||Z,a)).operator=e,o.expr=r,o.parens=s,o}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitUnaryOperatorExpr(this,t)}}]),n}(ae),je=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return Object(g.a)(this,n),(s=t.call(this,a||r.type,o)).operator=e,s.rhs=i,s.parens=c,s.lhs=r,s}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitBinaryOperatorExpr(this,t)}}]),n}(ae),Re=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,i,a)).receiver=e,o.name=r,o}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadPropExpr(this,t)}},{key:"set",value:function(e){return new pe(this.receiver,this.name,e,null,this.sourceSpan)}}]),n}(ae),Le=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,i,a)).receiver=e,o.index=r,o}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadKeyExpr(this,t)}},{key:"set",value:function(e){return new de(this.receiver,this.index,e,null,this.sourceSpan)}}]),n}(ae),Ne=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,r,i)).entries=e,a}return Object(b.a)(n,[{key:"isConstant",value:function(){return this.entries.every((function(e){return e.isConstant()}))}},{key:"isEquivalent",value:function(e){return e instanceof n&&re(this.entries,e.entries)}},{key:"visitExpression",value:function(e,t){return e.visitLiteralArrayExpr(this,t)}}]),n}(ae),Be=function(){function e(t,n,r){Object(g.a)(this,e),this.key=t,this.value=n,this.quoted=r}return Object(b.a)(e,[{key:"isEquivalent",value:function(e){return this.key===e.key&&this.value.isEquivalent(e.value)}}]),e}(),Ue=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,r,i)).entries=e,a.valueType=null,r&&(a.valueType=r.valueType),a}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&re(this.entries,e.entries)}},{key:"isConstant",value:function(){return this.entries.every((function(e){return e.value.isConstant()}))}},{key:"visitExpression",value:function(e,t){return e.visitLiteralMapExpr(this,t)}}]),n}(ae),Fe=(new se(ie.This,null,null),new se(ie.Super,null,null),new se(ie.CatchError,null,null),new se(ie.CatchStack,null,null),new ge(null,null,null)),qe=new ge(null,J,null);!function(e){e[e.Final=0]="Final",e[e.Private=1]="Private",e[e.Exported=2]="Exported",e[e.Static=3]="Static"}(Ce||(Ce={}));var We=function(){function e(t,n,r){Object(g.a)(this,e),this.text=t,this.multiline=n,this.trailingNewline=r}return Object(b.a)(e,[{key:"toString",value:function(){return this.multiline?" ".concat(this.text," "):this.text}}]),e}(),He=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,"",!0,!0)).tags=e,r}return Object(b.a)(n,[{key:"toString",value:function(){return function(e){if(0===e.length)return"";if(1===e.length&&e[0].tagName&&!e[0].text)return"*".concat(ot(e[0])," ");var t,n="*\n",r=Object(u.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=" *",n+=ot(i).replace(/\n/g,"\n * "),n+="\n"}}catch(a){r.e(a)}finally{r.f()}return n+=" "}(this.tags)}}]),n}(We),Ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0;Object(g.a)(this,e),this.modifiers=t,this.sourceSpan=n,this.leadingComments=r}return Object(b.a)(e,[{key:"hasModifier",value:function(e){return-1!==this.modifiers.indexOf(e)}},{key:"addLeadingComment",value:function(e){var t;this.leadingComments=null!==(t=this.leadingComments)&&void 0!==t?t:[],this.leadingComments.push(e)}}]),e}(),ze=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(g.a)(this,n),(c=t.call(this,a,o,s)).name=e,c.value=r,c.type=i||r&&r.type||null,c}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}},{key:"visitStatement",value:function(e,t){return e.visitDeclareVarStmt(this,t)}}]),n}(Ke),Ve=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s,c){var l;return Object(g.a)(this,n),(l=t.call(this,o,s,c)).name=e,l.params=r,l.statements=i,l.type=a||null,l}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&re(this.params,e.params)&&re(this.statements,e.statements)}},{key:"visitStatement",value:function(e,t){return e.visitDeclareFunctionStmt(this,t)}}]),n}(Ke),Ge=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,[],r,i)).expr=e,a}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}},{key:"visitStatement",value:function(e,t){return e.visitExpressionStmt(this,t)}}]),n}(Ke),Ye=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0;return Object(g.a)(this,n),(r=t.call(this,[],i,a)).value=e,r}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.isEquivalent(e.value)}},{key:"visitStatement",value:function(e,t){return e.visitReturnStmt(this,t)}}]),n}(Ke),Xe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(g.a)(this,n),(i=t.call(this,[],o,s)).condition=e,i.trueCase=r,i.falseCase=a,i}return Object(b.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&re(this.trueCase,e.trueCase)&&re(this.falseCase,e.falseCase)}},{key:"visitStatement",value:function(e,t){return e.visitIfStmt(this,t)}}]),n}(Ke);function Qe(e,t,n){return new se(e,t,n)}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new we(e,null,t,n)}function $e(e,t,n){return new X(e,t,n)}function Ze(e){return new ce(e)}function et(e,t,n){return new Ne(e,t,n)}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Ue(e.map((function(e){return new Be(e.key,e.value,e.quoted)})),t,null)}function nt(e,t,n,r,i){return new Me(e,t,n,r,i)}function rt(e,t,n,r,i){return new Xe(e,t,n,r,i)}function it(e,t,n){return new ge(e,t,n)}function at(e){return e instanceof ge&&null===e.value}function ot(e){var t="";if(e.tagName&&(t+=" @".concat(e.tagName)),e.text){if(e.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');t+=" "+e.text.replace(/@/g,"\\@")}return t}var st=/-+([a-z0-9])/g;function ct(e,t){return lt(e,":",t)}function lt(e,t,n){var r=e.indexOf(t);return-1==r?n:[e.slice(0,r).trim(),e.slice(r+1).trim()]}function ut(e){throw new Error("Internal Error: ".concat(e))}function dt(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}Object.getPrototypeOf({});function pt(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319&&e.length>n+1){var i=e.charCodeAt(n+1);i>=56320&&i<=57343&&(n++,r=(r-55296<<10)+i-56320+65536)}r<=127?t+=String.fromCharCode(r):r<=2047?t+=String.fromCharCode(r>>6&31|192,63&r|128):r<=65535?t+=String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128):r<=2097151&&(t+=String.fromCharCode(r>>18&7|240,r>>12&63|128,r>>6&63|128,63&r|128))}return t}function ht(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ht).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);if(!e.toString)return"object";var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var ft="undefined"!=typeof window&&window,mt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,gt="undefined"!=typeof global&&global||ft||mt;function bt(e,t){for(var n=[],r=0;r<e;r++)n.push(t);return n}function vt(e,t){var n=[],r=[];return e.forEach((function(e){(t(e)?n:r).push(e)})),[n,r]}var _t=Qe("<unknown>"),yt={},Ot=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e.type)).resolved=e,r.original=e,r}return Object(b.a)(n,[{key:"visitExpression",value:function(e,t){return t===yt?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}},{key:"isEquivalent",value:function(e){return e instanceof n&&this.resolved.isEquivalent(e.resolved)}},{key:"isConstant",value:function(){return!0}},{key:"fixup",value:function(e){this.resolved=e,this.shared=!0}}]),n}(ae),xt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(g.a)(this,e),this.isClosureCompilerEnabled=t,this.statements=[],this.literals=new Map,this.literalFactories=new Map,this.injectorDefinitions=new Map,this.directiveDefinitions=new Map,this.componentDefinitions=new Map,this.pipeDefinitions=new Map,this.nextNameIndex=0}return Object(b.a)(e,[{key:"getConstLiteral",value:function(e,t){if(e instanceof ge&&!wt(e)||e instanceof Ot)return e;var n=this.keyOf(e),r=this.literals.get(n),i=!1;if(r||(r=new Ot(e),this.literals.set(n,r),i=!0),!i&&!r.shared||i&&t){var a,o,s=this.freshName();this.isClosureCompilerEnabled&&wt(e)?(a=Qe(s).set(new Me([],[new Ye(e)])),o=Qe(s).callFn([])):(a=Qe(s).set(e),o=Qe(s)),this.statements.push(a.toDeclStmt(J,[Ce.Final])),r.fixup(o)}return r}},{key:"getDefinition",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.definitionsOf(t),a=i.get(e),o=!1;if(!a){var s=this.propertyNameOf(t);a=new Ot(n.importExpr(e).prop(s)),i.set(e,a),o=!0}if(!o&&!a.shared||o&&r){var c=this.freshName();this.statements.push(Qe(c).set(a.resolved).toDeclStmt(J,[Ce.Final])),a.fixup(Qe(c))}return a}},{key:"getLiteralFactory",value:function(e){if(e instanceof Ne){var t=e.entries.map((function(e){return e.isConstant()?e:_t})),n=this.keyOf(et(t));return this._getLiteralFactory(n,e.entries,(function(e){return et(e)}))}var r=tt(e.entries.map((function(e){return{key:e.key,value:e.value.isConstant()?e.value:_t,quoted:e.quoted}}))),i=this.keyOf(r);return this._getLiteralFactory(i,e.entries.map((function(e){return e.value})),(function(t){return tt(t.map((function(t,n){return{key:e.entries[n].key,value:t,quoted:e.entries[n].quoted}})))}))}},{key:"_getLiteralFactory",value:function(e,t,n){var r=this,i=this.literalFactories.get(e),a=t.filter((function(e){return!e.isConstant()}));if(!i){var o=t.map((function(e,t){return e.isConstant()?r.getConstLiteral(e,!0):Qe("a".concat(t))})),s=nt(o.filter(Ct).map((function(e){return new Pe(e.name,Q)})),[new Ye(n(o))],J),c=this.freshName();this.statements.push(Qe(c).set(s).toDeclStmt(J,[Ce.Final])),i=Qe(c),this.literalFactories.set(e,i)}return{literalFactory:i,literalFactoryArguments:a}}},{key:"uniqueName",value:function(e){return"".concat(e).concat(this.nextNameIndex++)}},{key:"definitionsOf",value:function(e){switch(e){case 2:return this.componentDefinitions;case 1:return this.directiveDefinitions;case 0:return this.injectorDefinitions;case 3:return this.pipeDefinitions}return ut("Unknown definition kind ".concat(e)),this.componentDefinitions}},{key:"propertyNameOf",value:function(e){switch(e){case 2:return"\u0275cmp";case 1:return"\u0275dir";case 0:return"\u0275inj";case 3:return"\u0275pipe"}return ut("Unknown definition kind ".concat(e)),"<unknown>"}},{key:"freshName",value:function(){return this.uniqueName("_c")}},{key:"keyOf",value:function(e){return e.visitExpression(new Et,yt)}}]),e}(),Et=function(){function e(){Object(g.a)(this,e),this.visitWrappedNodeExpr=kt,this.visitWriteVarExpr=kt,this.visitWriteKeyExpr=kt,this.visitWritePropExpr=kt,this.visitInvokeMethodExpr=kt,this.visitInvokeFunctionExpr=kt,this.visitInstantiateExpr=kt,this.visitConditionalExpr=kt,this.visitNotExpr=kt,this.visitAssertNotNullExpr=kt,this.visitCastExpr=kt,this.visitFunctionExpr=kt,this.visitUnaryOperatorExpr=kt,this.visitBinaryOperatorExpr=kt,this.visitReadPropExpr=kt,this.visitReadKeyExpr=kt,this.visitCommaExpr=kt,this.visitLocalizedString=kt}return Object(b.a)(e,[{key:"visitLiteralExpr",value:function(e){return"".concat("string"==typeof e.value?'"'+e.value+'"':e.value)}},{key:"visitLiteralArrayExpr",value:function(e,t){var n=this;return"[".concat(e.entries.map((function(e){return e.visitExpression(n,t)})).join(","),"]")}},{key:"visitLiteralMapExpr",value:function(e,t){var n=this;return"{".concat(e.entries.map((function(e){return"".concat(function(e){var t=e.quoted?'"':"";return"".concat(t).concat(e.key).concat(t)}(e),":").concat(e.value.visitExpression(n,t))})).join(","))}},{key:"visitExternalExpr",value:function(e){return e.value.moduleName?"EX:".concat(e.value.moduleName,":").concat(e.value.name):"EX:".concat(e.value.runtime.name)}},{key:"visitReadVarExpr",value:function(e){return"VAR:".concat(e.name)}},{key:"visitTypeofExpr",value:function(e,t){return"TYPEOF:".concat(e.expr.visitExpression(this,t))}}]),e}();function kt(e){throw new Error("Invalid state: Visitor ".concat(this.constructor.name," doesn't handle ").concat(e.constructor.name))}function Ct(e){return e instanceof se}function wt(e){return e instanceof ge&&"string"==typeof e.value&&e.value.length>=50}var St="@angular/core",It=function e(){Object(g.a)(this,e)};It.ANALYZE_FOR_ENTRY_COMPONENTS={name:"ANALYZE_FOR_ENTRY_COMPONENTS",moduleName:St},It.ElementRef={name:"ElementRef",moduleName:St},It.NgModuleRef={name:"NgModuleRef",moduleName:St},It.ViewContainerRef={name:"ViewContainerRef",moduleName:St},It.ChangeDetectorRef={name:"ChangeDetectorRef",moduleName:St},It.QueryList={name:"QueryList",moduleName:St},It.TemplateRef={name:"TemplateRef",moduleName:St},It.Renderer2={name:"Renderer2",moduleName:St},It.CodegenComponentFactoryResolver={name:"\u0275CodegenComponentFactoryResolver",moduleName:St},It.ComponentFactoryResolver={name:"ComponentFactoryResolver",moduleName:St},It.ComponentFactory={name:"ComponentFactory",moduleName:St},It.ComponentRef={name:"ComponentRef",moduleName:St},It.NgModuleFactory={name:"NgModuleFactory",moduleName:St},It.createModuleFactory={name:"\u0275cmf",moduleName:St},It.moduleDef={name:"\u0275mod",moduleName:St},It.moduleProviderDef={name:"\u0275mpd",moduleName:St},It.RegisterModuleFactoryFn={name:"\u0275registerModuleFactory",moduleName:St},It.inject={name:"\u0275\u0275inject",moduleName:St},It.directiveInject={name:"\u0275\u0275directiveInject",moduleName:St},It.INJECTOR={name:"INJECTOR",moduleName:St},It.Injector={name:"Injector",moduleName:St},It.\u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:St},It.InjectableDef={name:"\u0275\u0275InjectableDef",moduleName:St},It.ViewEncapsulation={name:"ViewEncapsulation",moduleName:St},It.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:St},It.SecurityContext={name:"SecurityContext",moduleName:St},It.LOCALE_ID={name:"LOCALE_ID",moduleName:St},It.TRANSLATIONS_FORMAT={name:"TRANSLATIONS_FORMAT",moduleName:St},It.inlineInterpolate={name:"\u0275inlineInterpolate",moduleName:St},It.interpolate={name:"\u0275interpolate",moduleName:St},It.EMPTY_ARRAY={name:"\u0275EMPTY_ARRAY",moduleName:St},It.EMPTY_MAP={name:"\u0275EMPTY_MAP",moduleName:St},It.Renderer={name:"Renderer",moduleName:St},It.viewDef={name:"\u0275vid",moduleName:St},It.elementDef={name:"\u0275eld",moduleName:St},It.anchorDef={name:"\u0275and",moduleName:St},It.textDef={name:"\u0275ted",moduleName:St},It.directiveDef={name:"\u0275did",moduleName:St},It.providerDef={name:"\u0275prd",moduleName:St},It.queryDef={name:"\u0275qud",moduleName:St},It.pureArrayDef={name:"\u0275pad",moduleName:St},It.pureObjectDef={name:"\u0275pod",moduleName:St},It.purePipeDef={name:"\u0275ppd",moduleName:St},It.pipeDef={name:"\u0275pid",moduleName:St},It.nodeValue={name:"\u0275nov",moduleName:St},It.ngContentDef={name:"\u0275ncd",moduleName:St},It.unwrapValue={name:"\u0275unv",moduleName:St},It.createRendererType2={name:"\u0275crt",moduleName:St},It.RendererType2={name:"RendererType2",moduleName:St},It.ViewDefinition={name:"\u0275ViewDefinition",moduleName:St},It.createComponentFactory={name:"\u0275ccf",moduleName:St},It.setClassMetadata={name:"\u0275setClassMetadata",moduleName:St};var Tt=function(){function e(t,n,r){Object(g.a)(this,e),this.filePath=t,this.name=n,this.members=r}return Object(b.a)(e,[{key:"assertNoMembers",value:function(){if(this.members.length)throw new Error("Illegal state: symbol without members expected, but got ".concat(JSON.stringify(this),"."))}}]),e}();function At(e){return e.replace(/\W/g,"_")}var Pt,Mt=0;function Dt(e){if(!e||!e.reference)return null;var t=e.reference;if(t instanceof Tt)return t.name;if(t.__anonymousType)return t.__anonymousType;var n=ht(t);return n.indexOf("(")>=0?(n="anonymous_".concat(Mt++),t.__anonymousType=n):n=At(n),n}!function(e){e[e.Pipe=0]="Pipe",e[e.Directive=1]="Directive",e[e.NgModule=2]="NgModule",e[e.Injectable=3]="Injectable"}(Pt||(Pt={}));function jt(e){return e.reduce((function(e,t){var n=Array.isArray(t)?jt(t):t;return e.concat(n)}),[])}var Rt="@angular/core",Lt=function e(){Object(g.a)(this,e)};function Nt(e){return tt(Object.keys(e).map((function(t){return{key:t,value:e[t],quoted:!1}})))}function Bt(e,t){if(0===t)return $e(e);for(var n=[],r=0;r<t;r++)n.push(Q);return $e(e,void 0,n)}Lt.NEW_METHOD="factory",Lt.TRANSFORM_METHOD="transform",Lt.PATCH_DEPS="patchedDeps",Lt.namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:Rt},Lt.namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:Rt},Lt.namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:Rt},Lt.element={name:"\u0275\u0275element",moduleName:Rt},Lt.elementStart={name:"\u0275\u0275elementStart",moduleName:Rt},Lt.elementEnd={name:"\u0275\u0275elementEnd",moduleName:Rt},Lt.advance={name:"\u0275\u0275advance",moduleName:Rt},Lt.syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:Rt},Lt.syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:Rt},Lt.attribute={name:"\u0275\u0275attribute",moduleName:Rt},Lt.attributeInterpolate1={name:"\u0275\u0275attributeInterpolate1",moduleName:Rt},Lt.attributeInterpolate2={name:"\u0275\u0275attributeInterpolate2",moduleName:Rt},Lt.attributeInterpolate3={name:"\u0275\u0275attributeInterpolate3",moduleName:Rt},Lt.attributeInterpolate4={name:"\u0275\u0275attributeInterpolate4",moduleName:Rt},Lt.attributeInterpolate5={name:"\u0275\u0275attributeInterpolate5",moduleName:Rt},Lt.attributeInterpolate6={name:"\u0275\u0275attributeInterpolate6",moduleName:Rt},Lt.attributeInterpolate7={name:"\u0275\u0275attributeInterpolate7",moduleName:Rt},Lt.attributeInterpolate8={name:"\u0275\u0275attributeInterpolate8",moduleName:Rt},Lt.attributeInterpolateV={name:"\u0275\u0275attributeInterpolateV",moduleName:Rt},Lt.classProp={name:"\u0275\u0275classProp",moduleName:Rt},Lt.elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:Rt},Lt.elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:Rt},Lt.elementContainer={name:"\u0275\u0275elementContainer",moduleName:Rt},Lt.styleMap={name:"\u0275\u0275styleMap",moduleName:Rt},Lt.styleMapInterpolate1={name:"\u0275\u0275styleMapInterpolate1",moduleName:Rt},Lt.styleMapInterpolate2={name:"\u0275\u0275styleMapInterpolate2",moduleName:Rt},Lt.styleMapInterpolate3={name:"\u0275\u0275styleMapInterpolate3",moduleName:Rt},Lt.styleMapInterpolate4={name:"\u0275\u0275styleMapInterpolate4",moduleName:Rt},Lt.styleMapInterpolate5={name:"\u0275\u0275styleMapInterpolate5",moduleName:Rt},Lt.styleMapInterpolate6={name:"\u0275\u0275styleMapInterpolate6",moduleName:Rt},Lt.styleMapInterpolate7={name:"\u0275\u0275styleMapInterpolate7",moduleName:Rt},Lt.styleMapInterpolate8={name:"\u0275\u0275styleMapInterpolate8",moduleName:Rt},Lt.styleMapInterpolateV={name:"\u0275\u0275styleMapInterpolateV",moduleName:Rt},Lt.classMap={name:"\u0275\u0275classMap",moduleName:Rt},Lt.classMapInterpolate1={name:"\u0275\u0275classMapInterpolate1",moduleName:Rt},Lt.classMapInterpolate2={name:"\u0275\u0275classMapInterpolate2",moduleName:Rt},Lt.classMapInterpolate3={name:"\u0275\u0275classMapInterpolate3",moduleName:Rt},Lt.classMapInterpolate4={name:"\u0275\u0275classMapInterpolate4",moduleName:Rt},Lt.classMapInterpolate5={name:"\u0275\u0275classMapInterpolate5",moduleName:Rt},Lt.classMapInterpolate6={name:"\u0275\u0275classMapInterpolate6",moduleName:Rt},Lt.classMapInterpolate7={name:"\u0275\u0275classMapInterpolate7",moduleName:Rt},Lt.classMapInterpolate8={name:"\u0275\u0275classMapInterpolate8",moduleName:Rt},Lt.classMapInterpolateV={name:"\u0275\u0275classMapInterpolateV",moduleName:Rt},Lt.styleProp={name:"\u0275\u0275styleProp",moduleName:Rt},Lt.stylePropInterpolate1={name:"\u0275\u0275stylePropInterpolate1",moduleName:Rt},Lt.stylePropInterpolate2={name:"\u0275\u0275stylePropInterpolate2",moduleName:Rt},Lt.stylePropInterpolate3={name:"\u0275\u0275stylePropInterpolate3",moduleName:Rt},Lt.stylePropInterpolate4={name:"\u0275\u0275stylePropInterpolate4",moduleName:Rt},Lt.stylePropInterpolate5={name:"\u0275\u0275stylePropInterpolate5",moduleName:Rt},Lt.stylePropInterpolate6={name:"\u0275\u0275stylePropInterpolate6",moduleName:Rt},Lt.stylePropInterpolate7={name:"\u0275\u0275stylePropInterpolate7",moduleName:Rt},Lt.stylePropInterpolate8={name:"\u0275\u0275stylePropInterpolate8",moduleName:Rt},Lt.stylePropInterpolateV={name:"\u0275\u0275stylePropInterpolateV",moduleName:Rt},Lt.nextContext={name:"\u0275\u0275nextContext",moduleName:Rt},Lt.templateCreate={name:"\u0275\u0275template",moduleName:Rt},Lt.text={name:"\u0275\u0275text",moduleName:Rt},Lt.enableBindings={name:"\u0275\u0275enableBindings",moduleName:Rt},Lt.disableBindings={name:"\u0275\u0275disableBindings",moduleName:Rt},Lt.getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:Rt},Lt.textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:Rt},Lt.textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:Rt},Lt.textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:Rt},Lt.textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:Rt},Lt.textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:Rt},Lt.textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:Rt},Lt.textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:Rt},Lt.textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:Rt},Lt.textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:Rt},Lt.textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:Rt},Lt.restoreView={name:"\u0275\u0275restoreView",moduleName:Rt},Lt.pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:Rt},Lt.pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:Rt},Lt.pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:Rt},Lt.pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:Rt},Lt.pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:Rt},Lt.pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:Rt},Lt.pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:Rt},Lt.pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:Rt},Lt.pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:Rt},Lt.pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:Rt},Lt.pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:Rt},Lt.pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:Rt},Lt.pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:Rt},Lt.pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:Rt},Lt.pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:Rt},Lt.hostProperty={name:"\u0275\u0275hostProperty",moduleName:Rt},Lt.property={name:"\u0275\u0275property",moduleName:Rt},Lt.propertyInterpolate={name:"\u0275\u0275propertyInterpolate",moduleName:Rt},Lt.propertyInterpolate1={name:"\u0275\u0275propertyInterpolate1",moduleName:Rt},Lt.propertyInterpolate2={name:"\u0275\u0275propertyInterpolate2",moduleName:Rt},Lt.propertyInterpolate3={name:"\u0275\u0275propertyInterpolate3",moduleName:Rt},Lt.propertyInterpolate4={name:"\u0275\u0275propertyInterpolate4",moduleName:Rt},Lt.propertyInterpolate5={name:"\u0275\u0275propertyInterpolate5",moduleName:Rt},Lt.propertyInterpolate6={name:"\u0275\u0275propertyInterpolate6",moduleName:Rt},Lt.propertyInterpolate7={name:"\u0275\u0275propertyInterpolate7",moduleName:Rt},Lt.propertyInterpolate8={name:"\u0275\u0275propertyInterpolate8",moduleName:Rt},Lt.propertyInterpolateV={name:"\u0275\u0275propertyInterpolateV",moduleName:Rt},Lt.i18n={name:"\u0275\u0275i18n",moduleName:Rt},Lt.i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:Rt},Lt.i18nExp={name:"\u0275\u0275i18nExp",moduleName:Rt},Lt.i18nStart={name:"\u0275\u0275i18nStart",moduleName:Rt},Lt.i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:Rt},Lt.i18nApply={name:"\u0275\u0275i18nApply",moduleName:Rt},Lt.i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:Rt},Lt.pipe={name:"\u0275\u0275pipe",moduleName:Rt},Lt.projection={name:"\u0275\u0275projection",moduleName:Rt},Lt.projectionDef={name:"\u0275\u0275projectionDef",moduleName:Rt},Lt.reference={name:"\u0275\u0275reference",moduleName:Rt},Lt.inject={name:"\u0275\u0275inject",moduleName:Rt},Lt.injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:Rt},Lt.injectPipeChangeDetectorRef={name:"\u0275\u0275injectPipeChangeDetectorRef",moduleName:Rt},Lt.directiveInject={name:"\u0275\u0275directiveInject",moduleName:Rt},Lt.invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:Rt},Lt.invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:Rt},Lt.templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:Rt},Lt.resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:Rt},Lt.resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:Rt},Lt.resolveBody={name:"\u0275\u0275resolveBody",moduleName:Rt},Lt.defineComponent={name:"\u0275\u0275defineComponent",moduleName:Rt},Lt.setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:Rt},Lt.ComponentDefWithMeta={name:"\u0275\u0275ComponentDefWithMeta",moduleName:Rt},Lt.FactoryDef={name:"\u0275\u0275FactoryDef",moduleName:Rt},Lt.defineDirective={name:"\u0275\u0275defineDirective",moduleName:Rt},Lt.DirectiveDefWithMeta={name:"\u0275\u0275DirectiveDefWithMeta",moduleName:Rt},Lt.InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:Rt},Lt.defineInjector={name:"\u0275\u0275defineInjector",moduleName:Rt},Lt.NgModuleDefWithMeta={name:"\u0275\u0275NgModuleDefWithMeta",moduleName:Rt},Lt.ModuleWithProviders={name:"ModuleWithProviders",moduleName:Rt},Lt.defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:Rt},Lt.setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:Rt},Lt.PipeDefWithMeta={name:"\u0275\u0275PipeDefWithMeta",moduleName:Rt},Lt.definePipe={name:"\u0275\u0275definePipe",moduleName:Rt},Lt.queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:Rt},Lt.viewQuery={name:"\u0275\u0275viewQuery",moduleName:Rt},Lt.staticViewQuery={name:"\u0275\u0275staticViewQuery",moduleName:Rt},Lt.staticContentQuery={name:"\u0275\u0275staticContentQuery",moduleName:Rt},Lt.loadQuery={name:"\u0275\u0275loadQuery",moduleName:Rt},Lt.contentQuery={name:"\u0275\u0275contentQuery",moduleName:Rt},Lt.NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:Rt},Lt.InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:Rt},Lt.CopyDefinitionFeature={name:"\u0275\u0275CopyDefinitionFeature",moduleName:Rt},Lt.ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:Rt},Lt.listener={name:"\u0275\u0275listener",moduleName:Rt},Lt.getFactoryOf={name:"\u0275\u0275getFactoryOf",moduleName:Rt},Lt.getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:Rt},Lt.sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:Rt},Lt.sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:Rt},Lt.sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:Rt},Lt.sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:Rt},Lt.sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:Rt},Lt.sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:Rt};var Ut="@";function Ft(e){return"".concat(Ut).concat(e)}function qt(e,t){return"".concat(Ut).concat(e,".").concat(t)}function Wt(e,t){return"animation_".concat(e,"_").concat(t)}var Ht=10,Kt=41,zt=44,Vt=47,Gt=58,Yt=59,Xt=61,Qt=62,Jt=97,$t=122,Zt=123,en=125;function tn(e){return e>=9&&e<=32||160==e}function nn(e){return 48<=e&&e<=57}function rn(e){return e>=Jt&&e<=$t||e>=65&&e<=90}function an(e){return e===Ht||13===e}function on(e){return 48<=e&&e<=55}var sn,cn=function(){function e(t,n,r,i){Object(g.a)(this,e),this.file=t,this.offset=n,this.line=r,this.col=i}return Object(b.a)(e,[{key:"toString",value:function(){return null!=this.offset?"".concat(this.file.url,"@").concat(this.line,":").concat(this.col):this.file.url}},{key:"moveBy",value:function(t){for(var n=this.file.content,r=n.length,i=this.offset,a=this.line,o=this.col;i>0&&t<0;){if(i--,t++,n.charCodeAt(i)==Ht){a--;var s=n.substr(0,i-1).lastIndexOf(String.fromCharCode(Ht));o=s>0?i-s:i}else o--}for(;i<r&&t>0;){var c=n.charCodeAt(i);i++,t--,c==Ht?(a++,o=0):o++}return new e(this.file,i,a,o)}},{key:"getContext",value:function(e,t){var n=this.file.content,r=this.offset;if(null!=r){r>n.length-1&&(r=n.length-1);for(var i=r,a=0,o=0;a<e&&r>0&&(a++,"\n"!=n[--r]||++o!=t););for(a=0,o=0;a<e&&i<n.length-1&&(a++,"\n"!=n[++i]||++o!=t););return{before:n.substring(r,this.offset),after:n.substring(this.offset,i+1)}}return null}}]),e}(),ln=function e(t,n){Object(g.a)(this,e),this.content=t,this.url=n},un=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(g.a)(this,e),this.start=t,this.end=n,this.fullStart=r,this.details=i}return Object(b.a)(e,[{key:"toString",value:function(){return this.start.file.content.substring(this.start.offset,this.end.offset)}}]),e}();!function(e){e[e.WARNING=0]="WARNING",e[e.ERROR=1]="ERROR"}(sn||(sn={}));var dn=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;Object(g.a)(this,e),this.span=t,this.msg=n,this.level=r}return Object(b.a)(e,[{key:"contextualMessage",value:function(){var e=this.span.start.getContext(100,3);return e?"".concat(this.msg,' ("').concat(e.before,"[").concat(sn[this.level]," ->]").concat(e.after,'")'):this.msg}},{key:"toString",value:function(){var e=this.span.details?", ".concat(this.span.details):"";return"".concat(this.contextualMessage(),": ").concat(this.span.start).concat(e)}}]),e}();var pn=function(){function e(t,n){Object(g.a)(this,e),this.value=t,this.sourceSpan=n}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitText(this)}}]),e}(),hn=function(){function e(t,n,r){Object(g.a)(this,e),this.value=t,this.sourceSpan=n,this.i18n=r}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitBoundText(this)}}]),e}(),fn=function(){function e(t,n,r,i,a){Object(g.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r,this.valueSpan=i,this.i18n=a}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitTextAttribute(this)}}]),e}(),mn=function(){function e(t,n,r,i,a,o,s,c){Object(g.a)(this,e),this.name=t,this.type=n,this.securityContext=r,this.value=i,this.unit=a,this.sourceSpan=o,this.valueSpan=s,this.i18n=c}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitBoundAttribute(this)}}],[{key:"fromBoundElementProperty",value:function(t,n){return new e(t.name,t.type,t.securityContext,t.value,t.unit,t.sourceSpan,t.valueSpan,n)}}]),e}(),gn=function(){function e(t,n,r,i,a,o,s){Object(g.a)(this,e),this.name=t,this.type=n,this.handler=r,this.target=i,this.phase=a,this.sourceSpan=o,this.handlerSpan=s}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitBoundEvent(this)}}],[{key:"fromParsedEvent",value:function(t){var n=0===t.type?t.targetOrPhase:null,r=1===t.type?t.targetOrPhase:null;return new e(t.name,t.type,t.handler,n,r,t.sourceSpan,t.handlerSpan)}}]),e}(),bn=function(){function e(t,n,r,i,a,o,s,c,l,u){Object(g.a)(this,e),this.name=t,this.attributes=n,this.inputs=r,this.outputs=i,this.children=a,this.references=o,this.sourceSpan=s,this.startSourceSpan=c,this.endSourceSpan=l,this.i18n=u,0===a.length&&c&&l&&(this.sourceSpan=new un(s.start,l.end))}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitElement(this)}}]),e}(),vn=function(){function e(t,n,r,i,a,o,s,c,l,u,d,p){Object(g.a)(this,e),this.tagName=t,this.attributes=n,this.inputs=r,this.outputs=i,this.templateAttrs=a,this.children=o,this.references=s,this.variables=c,this.sourceSpan=l,this.startSourceSpan=u,this.endSourceSpan=d,this.i18n=p}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitTemplate(this)}}]),e}(),_n=function(){function e(t,n,r,i){Object(g.a)(this,e),this.selector=t,this.attributes=n,this.sourceSpan=r,this.i18n=i,this.name="ng-content"}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitContent(this)}}]),e}(),yn=function(){function e(t,n,r,i){Object(g.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r,this.valueSpan=i}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitVariable(this)}}]),e}(),On=function(){function e(t,n,r,i){Object(g.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r,this.valueSpan=i}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitReference(this)}}]),e}(),xn=function(){function e(t,n,r,i){Object(g.a)(this,e),this.vars=t,this.placeholders=n,this.sourceSpan=r,this.i18n=i}return Object(b.a)(e,[{key:"visit",value:function(e){return e.visitIcu(this)}}]),e}();function En(e,t){var n=[];if(e.visit){var r,i=Object(u.a)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.visit(a)||a.visit(e)}}catch(l){i.e(l)}finally{i.f()}}else{var o,s=Object(u.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value.visit(e);c&&n.push(c)}}catch(l){s.e(l)}finally{s.f()}}return n}var kn=function e(t,n,r,i,a,o){Object(g.a)(this,e),this.nodes=t,this.placeholders=n,this.placeholderToMessage=r,this.meaning=i,this.description=a,this.customId=o,this.id=this.customId,this.legacyIds=[],t.length?this.sources=[{filePath:t[0].sourceSpan.start.file.url,startLine:t[0].sourceSpan.start.line+1,startCol:t[0].sourceSpan.start.col+1,endLine:t[t.length-1].sourceSpan.end.line+1,endCol:t[0].sourceSpan.start.col+1}]:this.sources=[]},Cn=function(){function e(t,n){Object(g.a)(this,e),this.value=t,this.sourceSpan=n}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),e}(),wn=function(){function e(t,n){Object(g.a)(this,e),this.children=t,this.sourceSpan=n}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitContainer(this,t)}}]),e}(),Sn=function(){function e(t,n,r,i){Object(g.a)(this,e),this.expression=t,this.type=n,this.cases=r,this.sourceSpan=i}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitIcu(this,t)}}]),e}(),In=function(){function e(t,n,r,i,a,o,s,c,l){Object(g.a)(this,e),this.tag=t,this.attrs=n,this.startName=r,this.closeName=i,this.children=a,this.isVoid=o,this.sourceSpan=s,this.startSourceSpan=c,this.endSourceSpan=l}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitTagPlaceholder(this,t)}}]),e}(),Tn=function(){function e(t,n,r){Object(g.a)(this,e),this.value=t,this.name=n,this.sourceSpan=r}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitPlaceholder(this,t)}}]),e}(),An=function(){function e(t,n,r){Object(g.a)(this,e),this.value=t,this.name=n,this.sourceSpan=r}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitIcuPlaceholder(this,t)}}]),e}();function Pn(e){return function(e){var t=pt(e),n=function(e,t){for(var n=e.length+3>>>2,r=[],i=0;i<n;i++)r[i]=Xn(e,4*i,t);return r}(t,Ln.Big),r=8*t.length,i=bt(80),a=1732584193,o=4023233417,s=2562383102,c=271733878,l=3285377520;n[r>>5]|=128<<24-r%32,n[15+(r+64>>9<<4)]=r;for(var u=0;u<n.length;u+=16){for(var d=a,p=o,h=s,f=c,m=l,g=0;g<80;g++){i[g]=g<16?n[u+g]:Vn(i[g-3]^i[g-8]^i[g-14]^i[g-16],1);var b=Bn(g,o,s,c),v=b[0],_=b[1],y=[Vn(a,5),v,l,_,i[g]].reduce(Wn);l=c,c=s,s=Vn(o,30),o=a,a=y}a=Wn(a,d),o=Wn(o,p),s=Wn(s,h),c=Wn(c,f),l=Wn(l,m)}return function(e){for(var t="",n=0;n<e.length;n++){var r=Yn(e,n);t+=(r>>>4).toString(16)+(15&r).toString(16)}return t.toLowerCase()}(Qn([a,o,s,c,l]))}((t=e.nodes,t.map((function(e){return e.visit(Rn,null)}))).join("")+"[".concat(e.meaning,"]"));var t}function Mn(e){return e.id||Dn(e)}function Dn(e){var t=new Nn;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Un(e);if(t){var r=Un(t);n=Kn(Gn(n,1),r)}var i=n[0],a=n[1];return Jn(Qn([2147483647&i,a]))}(e.nodes.map((function(e){return e.visit(t,null)})).join(""),e.meaning)}var jn=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitText",value:function(e,t){return e.value}},{key:"visitContainer",value:function(e,t){var n=this;return"[".concat(e.children.map((function(e){return e.visit(n)})).join(", "),"]")}},{key:"visitIcu",value:function(e,t){var n=this,r=Object.keys(e.cases).map((function(t){return"".concat(t," {").concat(e.cases[t].visit(n),"}")}));return"{".concat(e.expression,", ").concat(e.type,", ").concat(r.join(", "),"}")}},{key:"visitTagPlaceholder",value:function(e,t){var n=this;return e.isVoid?'<ph tag name="'.concat(e.startName,'"/>'):'<ph tag name="'.concat(e.startName,'">').concat(e.children.map((function(e){return e.visit(n)})).join(", "),'</ph name="').concat(e.closeName,'">')}},{key:"visitPlaceholder",value:function(e,t){return e.value?'<ph name="'.concat(e.name,'">').concat(e.value,"</ph>"):'<ph name="'.concat(e.name,'"/>')}},{key:"visitIcuPlaceholder",value:function(e,t){return'<ph icu name="'.concat(e.name,'">').concat(e.value.visit(this),"</ph>")}}]),e}(),Rn=new jn;var Ln,Nn=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"visitIcu",value:function(e,t){var n=this,r=Object.keys(e.cases).map((function(t){return"".concat(t," {").concat(e.cases[t].visit(n),"}")}));return"{".concat(e.type,", ").concat(r.join(", "),"}")}}]),n}(jn);function Bn(e,t,n,r){return e<20?[t&n|~t&r,1518500249]:e<40?[t^n^r,1859775393]:e<60?[t&n|t&r|n&r,2400959708]:[t^n^r,3395469782]}function Un(e){var t=pt(e),n=Fn(t,0),r=Fn(t,102072);return 0!=n||0!=r&&1!=r||(n^=319790063,r^=-1801410264),[n,r]}function Fn(e,t){var n,r=2654435769,i=2654435769,a=e.length;for(n=0;n+12<=a;n+=12){var o=qn(r=Wn(r,Xn(e,n,Ln.Little)),i=Wn(i,Xn(e,n+4,Ln.Little)),t=Wn(t,Xn(e,n+8,Ln.Little)));r=o[0],i=o[1],t=o[2]}return r=Wn(r,Xn(e,n,Ln.Little)),i=Wn(i,Xn(e,n+4,Ln.Little)),t=Wn(t,a),qn(r,i,t=Wn(t,Xn(e,n+8,Ln.Little)<<8))[2]}function qn(e,t,n){return e=zn(e,t),e=zn(e,n),e^=n>>>13,t=zn(t,n),t=zn(t,e),t^=e<<8,n=zn(n,e),n=zn(n,t),n^=t>>>13,e=zn(e,t),e=zn(e,n),e^=n>>>12,t=zn(t,n),t=zn(t,e),t^=e<<16,n=zn(n,e),n=zn(n,t),n^=t>>>5,e=zn(e,t),e=zn(e,n),e^=n>>>3,t=zn(t,n),t=zn(t,e),t^=e<<10,n=zn(n,e),n=zn(n,t),[e,t,n^=t>>>15]}function Wn(e,t){return Hn(e,t)[1]}function Hn(e,t){var n=(65535&e)+(65535&t),r=(e>>>16)+(t>>>16)+(n>>>16);return[r>>>16,r<<16|65535&n]}function Kn(e,t){var n=e[0],r=e[1],i=t[0],a=Hn(r,t[1]),o=a[0],s=a[1];return[Wn(Wn(n,i),o),s]}function zn(e,t){var n=(65535&e)-(65535&t);return(e>>16)-(t>>16)+(n>>16)<<16|65535&n}function Vn(e,t){return e<<t|e>>>32-t}function Gn(e,t){var n=e[0],r=e[1];return[n<<t|r>>>32-t,r<<t|n>>>32-t]}function Yn(e,t){return t>=e.length?0:255&e.charCodeAt(t)}function Xn(e,t,n){var r=0;if(n===Ln.Big)for(var i=0;i<4;i++)r+=Yn(e,t+i)<<24-8*i;else for(var a=0;a<4;a++)r+=Yn(e,t+a)<<8*a;return r}function Qn(e){return e.reduce((function(e,t){return e+function(e){for(var t="",n=0;n<4;n++)t+=String.fromCharCode(e>>>8*(3-n)&255);return t}(t)}),"")}function Jn(e){for(var t="",n="1",r=e.length-1;r>=0;r--)t=$n(t,Zn(Yn(e,r),n)),n=Zn(256,n);return t.split("").reverse().join("")}function $n(e,t){for(var n="",r=Math.max(e.length,t.length),i=0,a=0;i<r||a;i++){var o=a+ +(e[i]||0)+ +(t[i]||0);o>=10?(a=1,n+=o-10):(a=0,n+=o)}return n}function Zn(e,t){for(var n="",r=t;0!==e;e>>>=1)1&e&&(n=$n(n,r)),r=$n(r,r);return n}!function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(Ln||(Ln={}));new(function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitTag",value:function(e){var t=this,n=this._serializeAttributes(e.attrs);if(0==e.children.length)return"<".concat(e.name).concat(n,"/>");var r=e.children.map((function(e){return e.visit(t)}));return"<".concat(e.name).concat(n,">").concat(r.join(""),"</").concat(e.name,">")}},{key:"visitText",value:function(e){return e.value}},{key:"visitDeclaration",value:function(e){return"<?xml".concat(this._serializeAttributes(e.attrs)," ?>")}},{key:"_serializeAttributes",value:function(e){var t=Object.keys(e).map((function(t){return"".concat(t,'="').concat(e[t],'"')})).join(" ");return t.length>0?" "+t:""}},{key:"visitDoctype",value:function(e){return"<!DOCTYPE ".concat(e.rootTag," [\n").concat(e.dtd,"\n]>")}}]),e}());function er(e){return e.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var tr="i18n",nr="i18n-",rr="\ufffd";function ir(e){return e===tr||e.startsWith(nr)}function ar(e){return e instanceof kn}function or(e){return ar(e)&&1===e.nodes.length&&e.nodes[0]instanceof Sn}function sr(e){return!!e.i18n}function cr(e){return e.nodes[0]}function lr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t>0?":".concat(t):"";return"".concat(rr).concat(e).concat(n).concat(rr)}function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e;return function(){return t++}}function dr(e){var t={};return e.forEach((function(e,n){t[n]=it(e.length>1?"[".concat(e.join("|"),"]"):e[0])})),t}function pr(e,t){for(var n=e.get(t)||[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];n.push.apply(n,i),e.set(t,n)}function hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t,i=new Map,a=e instanceof kn?e.nodes.find((function(e){return e instanceof wn})):e;return a&&a.children.filter((function(e){return e instanceof Tn})).forEach((function(e,t){var a=lr(r+t,n);pr(i,e.name,a)})),i}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={};return e&&Object.keys(e).length&&Object.keys(e).forEach((function(r){return n[mr(r,t)]=e[r]})),n}function mr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=er(e);if(!t)return n;var r,i=n.split("_");if(1===i.length)return e.toLowerCase();/^\d+$/.test(i[i.length-1])&&(r=i.pop());var a=i.shift().toLowerCase();return i.length&&(a+=i.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join("")),r?"".concat(a,"_").concat(r):a}function gr(e){return"".concat("MSG_").concat(e).toUpperCase()}function br(e){return new ze(e.name,void 0,J,void 0,e.sourceSpan)}var vr=/[-.]/,_r="_t",yr="ctx",Or="rf";function xr(e,t){var n=null;return function(){return n||(e.push(new ze(_r,void 0,Q)),n=Qe(t)),n}}function Er(e){if(this)throw new Error("Builder ".concat(this.constructor.name," doesn't support ").concat(e," yet"));throw new Error("Feature ".concat(e," is not supported yet"))}function kr(e){throw new Error("Invalid state: Visitor ".concat(this.constructor.name," doesn't handle ").concat(e.constructor.name))}function Cr(e){return Array.isArray(e)?et(e.map(Cr)):it(e,J)}function wr(e,t){return Object.getOwnPropertyNames(e).length>0?function(e,t){return tt(Object.getOwnPropertyNames(e).map((function(n){var r,i,a,o=e[n];if(Array.isArray(o)){var s=Object(l.a)(o,2);i=s[0],r=s[1]}else{var c=ct(n,[n,o]),u=Object(l.a)(c,2);r=u[0],i=u[1]}return{key:a=r,quoted:vr.test(a),value:t&&i!==r?et([Cr(i),Cr(r)]):Cr(i)}})))}(e,t):null}function Sr(e){for(;at(e[e.length-1]);)e.pop();return e}function Ir(e,t){if(Array.isArray(e.predicate)){var n=[];return e.predicate.forEach((function(e){var t=e.split(",").map((function(e){return it(e.trim())}));n.push.apply(n,Object(m.a)(t))})),t.getConstLiteral(et(n),!0)}return e.predicate}var Tr,Ar,Pr,Mr=function(){function e(){Object(g.a)(this,e),this.values=[]}return Object(b.a)(e,[{key:"set",value:function(e,t){t&&this.values.push({key:e,value:t,quoted:!1})}},{key:"toLiteralMap",value:function(){return tt(this.values)}}]),e}();function Dr(e){var t={};return e instanceof vn&&"ng-template"!==e.tagName?e.templateAttrs.forEach((function(e){return t[e.name]=""})):(e.attributes.forEach((function(e){ir(e.name)||(t[e.name]=e.value)})),e.inputs.forEach((function(e){t[e.name]=""})),e.outputs.forEach((function(e){t[e.name]=""}))),t}function jr(e,t,n){var r=Je(e,null,n);if(t.length>0)for(var i=0;i<t.length;i++)r=r.callFn(t[i],n);else r=r.callFn([],n);return r}function Rr(e){var t=e.expressions,n=e.strings;return 1===t.length&&2===n.length&&""===n[0]&&""===n[1]?1:t.length+n.length}function Lr(e){var t,n,r,i=Qe("t"),a=[],o=te,s=Br(e)?i:new je(G.Or,i,e.internalType),c=null;if(null!==e.deps)"invalid"!==e.deps&&(c=new me(s,Nr(e.deps,e.injectFn,e.target===Ar.Pipe)),t=e.deps,n=!1,r=t.map((function(e){var t=function(e){var t=[];return e.resolved===Pr.Attribute&&null!==e.attribute&&t.push({key:"attribute",value:e.attribute,quoted:!1}),e.optional&&t.push({key:"optional",value:it(!0),quoted:!1}),e.host&&t.push({key:"host",value:it(!0),quoted:!1}),e.self&&t.push({key:"self",value:it(!0),quoted:!1}),e.skipSelf&&t.push({key:"skipSelf",value:it(!0),quoted:!1}),t.length>0?tt(t):null}(e);return null!==t?(n=!0,t):it(null)})),o=n?$e(et(r)):te);else{var l=Qe("\u0275".concat(e.name,"_BaseFactory")),u=Je(Lt.getInheritedFactory),d=l.set(u.callFn([e.internalType],void 0,!0)).toDeclStmt(J,[Ce.Exported,Ce.Final]);a.push(d),c=l.callFn([s])}var p=c,h=[],f=null;function m(e){var t=Qe("r");h.push(t.set(Fe).toDeclStmt());var n=null;return n=null!==p?t.set(p).toStmt():Je(Lt.invalidFactory).callFn([]).toStmt(),h.push(rt(i,[n],[t.set(e).toStmt()])),t}if(Br(e)&&e.delegateType===Tr.Factory){var g=Qe("\u0275".concat(e.name,"_BaseFactory")),b=Je(Lt.getFactoryOf);if(e.delegate.isEquivalent(e.internalType))throw new Error("Illegal state: compiling factory that delegates to itself");var v=g.set(b.callFn([e.delegate])).toDeclStmt(J,[Ce.Exported,Ce.Final]);a.push(v),f=m(g.callFn([]))}else if(Br(e)){var _=Nr(e.delegateDeps,e.injectFn,e.target===Ar.Pipe);f=m(new(e.delegateType===Tr.Class?me:fe)(e.delegate,_))}else f=function(e){return void 0!==e.expression}(e)?m(e.expression):c;return null!==f?h.push(new Ye(f)):h.push(Je(Lt.invalidFactory).callFn([]).toStmt()),{factory:nt([new Pe("t",Q)],h,J,void 0,"".concat(e.name,"_Factory")),statements:a,type:$e(Je(Lt.FactoryDef,[Bt(e.type.type,e.typeArgumentCount),o]))}}function Nr(e,t,n){return e.map((function(e,r){return function(e,t,n,r){switch(e.resolved){case Pr.Token:case Pr.ChangeDetectorRef:var i=0|(e.self?2:0)|(e.skipSelf?4:0)|(e.host?1:0)|(e.optional?8:0),a=0!==i||e.optional?it(i):null;if(n&&e.resolved===Pr.ChangeDetectorRef)return Je(Lt.injectPipeChangeDetectorRef).callFn(a?[a]:[]);var o=[e.token];return a&&o.push(a),Je(t).callFn(o);case Pr.Attribute:return Je(Lt.injectAttribute).callFn([e.token]);case Pr.Invalid:return Je(Lt.invalidFactoryDep).callFn([it(r)]);default:return Er("Unknown R3ResolvedDependencyType: ".concat(Pr[e.resolved]))}}(e,t,n,r)}))}function Br(e){return void 0!==e.delegateType}function Ur(e,t){return{statements:[],factory:e.node===t.node?t.prop("\u0275fac"):nt([new Pe("t",Q)],[new Ye(t.callMethod("\u0275fac",[Qe("t")]))])}}!function(e){e[e.Class=0]="Class",e[e.Function=1]="Function",e[e.Factory=2]="Factory"}(Tr||(Tr={})),function(e){e[e.Directive=0]="Directive",e[e.Component=1]="Component",e[e.Injectable=2]="Injectable",e[e.Pipe=3]="Pipe",e[e.NgModule=4]="NgModule"}(Ar||(Ar={})),function(e){e[e.Token=0]="Token",e[e.Attribute=1]="Attribute",e[e.ChangeDetectorRef=2]="ChangeDetectorRef",e[e.Invalid=3]="Invalid"}(Pr||(Pr={}));var Fr=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function qr(e,t){if(!(null==t||Array.isArray(t)&&2==t.length))throw new Error("Expected '".concat(e,"' to be an array, [start, end]."));if(null!=t){var n=t[0],r=t[1];Fr.forEach((function(e){if(e.test(n)||e.test(r))throw new Error("['".concat(n,"', '").concat(r,"'] contains unusable interpolation symbol."))}))}}var Wr=function(){function e(t,n){Object(g.a)(this,e),this.start=t,this.end=n}return Object(b.a)(e,null,[{key:"fromArray",value:function(t){return t?(qr("interpolation",t),new e(t[0],t[1])):Hr}}]),e}(),Hr=new Wr("{{","}}"),Kr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(g.a)(this,e),this.file=t,this.sourcesContent=new Map,this.lines=[],this.lastCol0=0,this.hasMappings=!1}return Object(b.a)(e,[{key:"addSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}},{key:"addLine",value:function(){return this.lines.push([]),this.lastCol0=0,this}},{key:"addMapping",value:function(e,t,n,r){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(null!=t&&!this.sourcesContent.has(t))throw new Error('Unknown source file "'.concat(t,'"'));if(null==e)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(null==n||null==r))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:n,sourceCol0:r}),this}},{key:"currentLine",get:function(){return this.lines.slice(-1)[0]}},{key:"toJSON",value:function(){var e=this;if(!this.hasMappings)return null;var t=new Map,n=[],r=[];Array.from(this.sourcesContent.keys()).forEach((function(i,a){t.set(i,a),n.push(i),r.push(e.sourcesContent.get(i)||null)}));var i="",a=0,o=0,s=0,c=0;return this.lines.forEach((function(e){a=0,i+=e.map((function(e){var n=zr(e.col0-a);return a=e.col0,null!=e.sourceUrl&&(n+=zr(t.get(e.sourceUrl)-o),o=t.get(e.sourceUrl),n+=zr(e.sourceLine0-s),s=e.sourceLine0,n+=zr(e.sourceCol0-c),c=e.sourceCol0),n})).join(","),i+=";"})),i=i.slice(0,-1),{file:this.file||"",version:3,sourceRoot:"",sources:n,sourcesContent:r,mappings:i}}},{key:"toJsComment",value:function(){return this.hasMappings?"//# sourceMappingURL=data:application/json;base64,"+function(e){var t="";e=pt(e);for(var n=0;n<e.length;){var r=e.charCodeAt(n++),i=e.charCodeAt(n++),a=e.charCodeAt(n++);t+=Vr(r>>2),t+=Vr((3&r)<<4|(isNaN(i)?0:i>>4)),t+=isNaN(i)?"=":Vr((15&i)<<2|a>>6),t+=isNaN(i)||isNaN(a)?"=":Vr(63&a)}return t}(JSON.stringify(this,null,0)):""}}]),e}();function zr(e){e=e<0?1+(-e<<1):e<<1;var t="";do{var n=31&e;(e>>=5)>0&&(n|=32),t+=Vr(n)}while(e>0);return t}function Vr(e){if(e<0||e>=64)throw new Error("Can only encode value in the range [0, 63]");return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}var Gr=/'|\\|\n|\r|\$/g,Yr=/^[$A-Z_][0-9A-Z_$]*$/i,Xr="  ",Qr=Qe("error",null,null),Jr=Qe("stack",null,null),$r=function e(t){Object(g.a)(this,e),this.indent=t,this.partsLength=0,this.parts=[],this.srcSpans=[]},Zr=function(){function e(t){Object(g.a)(this,e),this._indent=t,this._classes=[],this._preambleLineCount=0,this._lines=[new $r(t)]}return Object(b.a)(e,[{key:"_currentLine",get:function(){return this._lines[this._lines.length-1]}},{key:"println",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.print(e||null,t,!0)}},{key:"lineIsEmpty",value:function(){return 0===this._currentLine.parts.length}},{key:"lineLength",value:function(){return this._currentLine.indent*Xr.length+this._currentLine.partsLength}},{key:"print",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),n&&this._lines.push(new $r(this._indent))}},{key:"removeEmptyLastLine",value:function(){this.lineIsEmpty()&&this._lines.pop()}},{key:"incIndent",value:function(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}},{key:"decIndent",value:function(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}},{key:"pushClass",value:function(e){this._classes.push(e)}},{key:"popClass",value:function(){return this._classes.pop()}},{key:"currentClass",get:function(){return this._classes.length>0?this._classes[this._classes.length-1]:null}},{key:"toSource",value:function(){return this.sourceLines.map((function(e){return e.parts.length>0?ni(e.indent)+e.parts.join(""):""})).join("\n")}},{key:"toSourceMapGenerator",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Kr(e),r=!1,i=function(){r||(n.addSource(e," ").addMapping(0,e,0,0),r=!0)},a=0;a<t;a++)n.addLine(),i();return this.sourceLines.forEach((function(e,t){n.addLine();for(var a=e.srcSpans,o=e.parts,s=e.indent*Xr.length,c=0;c<a.length&&!a[c];)s+=o[c].length,c++;for(c<a.length&&0===t&&0===s?r=!0:i();c<a.length;){var l=a[c],u=l.start.file,d=l.start.line,p=l.start.col;for(n.addSource(u.url,u.content).addMapping(s,u.url,d,p),s+=o[c].length,c++;c<a.length&&(l===a[c]||!a[c]);)s+=o[c].length,c++}})),n}},{key:"setPreambleLineCount",value:function(e){return this._preambleLineCount=e}},{key:"spanOf",value:function(e,t){var n=this._lines[e-this._preambleLineCount];if(n)for(var r=t-ni(n.indent).length,i=0;i<n.parts.length;i++){var a=n.parts[i];if(a.length>r)return n.srcSpans[i];r-=a.length}return null}},{key:"sourceLines",get:function(){return this._lines.length&&0===this._lines[this._lines.length-1].parts.length?this._lines.slice(0,-1):this._lines}}],[{key:"createRoot",value:function(){return new e(0)}}]),e}(),ei=function(){function e(t){Object(g.a)(this,e),this._escapeDollarInStrings=t}return Object(b.a)(e,[{key:"printLeadingComments",value:function(e,t){if(void 0!==e.leadingComments){var n,r=Object(u.a)(e.leadingComments);try{for(r.s();!(n=r.n()).done;){var i=n.value;i instanceof He?t.print(e,"/*".concat(i.toString(),"*/"),i.trailingNewline):i.multiline?t.print(e,"/* ".concat(i.text," */"),i.trailingNewline):i.text.split("\n").forEach((function(n){t.println(e,"// ".concat(n))}))}}catch(a){r.e(a)}finally{r.f()}}}},{key:"visitExpressionStmt",value:function(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}},{key:"visitReturnStmt",value:function(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}},{key:"visitIfStmt",value:function(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),e.condition.visitExpression(this,t),t.print(e,") {");var n=null!=e.falseCase&&e.falseCase.length>0;return e.trueCase.length<=1&&!n?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),n&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}},{key:"visitThrowStmt",value:function(e,t){return this.printLeadingComments(e,t),t.print(e,"throw "),e.error.visitExpression(this,t),t.println(e,";"),null}},{key:"visitWriteVarExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),t.print(e,"".concat(e.name," = ")),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitWriteKeyExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"] = "),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitWritePropExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,".".concat(e.name," = ")),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitInvokeMethodExpr",value:function(e,t){e.receiver.visitExpression(this,t);var n=e.name;return null!=e.builtin&&null==(n=this.getBuiltinMethodName(e.builtin))||(t.print(e,".".concat(n,"(")),this.visitAllExpressions(e.args,t,","),t.print(e,")")),null}},{key:"visitInvokeFunctionExpr",value:function(e,t){return e.fn.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}},{key:"visitWrappedNodeExpr",value:function(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}},{key:"visitTypeofExpr",value:function(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}},{key:"visitReadVarExpr",value:function(e,t){var n=e.name;if(null!=e.builtin)switch(e.builtin){case ie.Super:n="super";break;case ie.This:n="this";break;case ie.CatchError:n=Qr.name;break;case ie.CatchStack:n=Jr.name;break;default:throw new Error("Unknown builtin variable ".concat(e.builtin))}return t.print(e,n),null}},{key:"visitInstantiateExpr",value:function(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}},{key:"visitLiteralExpr",value:function(e,t){var n=e.value;return"string"==typeof n?t.print(e,ti(n,this._escapeDollarInStrings)):t.print(e,"".concat(n)),null}},{key:"visitLocalizedString",value:function(e,t){var n=e.serializeI18nHead();t.print(e,"$localize `"+n.raw);for(var r=1;r<e.messageParts.length;r++)t.print(e,"${"),e.expressions[r-1].visitExpression(this,t),t.print(e,"}".concat(e.serializeI18nTemplatePart(r).raw));return t.print(e,"`"),null}},{key:"visitConditionalExpr",value:function(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}},{key:"visitNotExpr",value:function(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}},{key:"visitAssertNotNullExpr",value:function(e,t){return e.condition.visitExpression(this,t),null}},{key:"visitUnaryOperatorExpr",value:function(e,t){var n;switch(e.operator){case V.Plus:n="+";break;case V.Minus:n="-";break;default:throw new Error("Unknown operator ".concat(e.operator))}return e.parens&&t.print(e,"("),t.print(e,n),e.expr.visitExpression(this,t),e.parens&&t.print(e,")"),null}},{key:"visitBinaryOperatorExpr",value:function(e,t){var n;switch(e.operator){case G.Equals:n="==";break;case G.Identical:n="===";break;case G.NotEquals:n="!=";break;case G.NotIdentical:n="!==";break;case G.And:n="&&";break;case G.BitwiseAnd:n="&";break;case G.Or:n="||";break;case G.Plus:n="+";break;case G.Minus:n="-";break;case G.Divide:n="/";break;case G.Multiply:n="*";break;case G.Modulo:n="%";break;case G.Lower:n="<";break;case G.LowerEquals:n="<=";break;case G.Bigger:n=">";break;case G.BiggerEquals:n=">=";break;default:throw new Error("Unknown operator ".concat(e.operator))}return e.parens&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e," ".concat(n," ")),e.rhs.visitExpression(this,t),e.parens&&t.print(e,")"),null}},{key:"visitReadPropExpr",value:function(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}},{key:"visitReadKeyExpr",value:function(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}},{key:"visitLiteralArrayExpr",value:function(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}},{key:"visitLiteralMapExpr",value:function(e,t){var n=this;return t.print(e,"{"),this.visitAllObjects((function(r){t.print(e,"".concat(ti(r.key,n._escapeDollarInStrings,r.quoted),":")),r.value.visitExpression(n,t)}),e.entries,t,","),t.print(e,"}"),null}},{key:"visitCommaExpr",value:function(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}},{key:"visitAllExpressions",value:function(e,t,n){var r=this;this.visitAllObjects((function(e){return e.visitExpression(r,t)}),e,t,n)}},{key:"visitAllObjects",value:function(e,t,n,r){for(var i=!1,a=0;a<t.length;a++)a>0&&(n.lineLength()>80?(n.print(null,r,!0),i||(n.incIndent(),n.incIndent(),i=!0)):n.print(null,r,!1)),e(t[a]);i&&(n.decIndent(),n.decIndent())}},{key:"visitAllStatements",value:function(e,t){var n=this;e.forEach((function(e){return e.visitStatement(n,t)}))}}]),e}();function ti(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e)return null;var r=e.replace(Gr,(function(){return"$"==(arguments.length<=0?void 0:arguments[0])?t?"\\$":"$":"\n"==(arguments.length<=0?void 0:arguments[0])?"\\n":"\r"==(arguments.length<=0?void 0:arguments[0])?"\\r":"\\".concat(arguments.length<=0?void 0:arguments[0])})),i=n||!Yr.test(r);return i?"'".concat(r,"'"):r}function ni(e){for(var t="",n=0;n<e;n++)t+=Xr;return t}var ri=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.call(this,!1)}return Object(b.a)(n,[{key:"visitDeclareClassStmt",value:function(e,t){var n=this;return t.pushClass(e),this._visitClassConstructor(e,t),null!=e.parent&&(t.print(e,"".concat(e.name,".prototype = Object.create(")),e.parent.visitExpression(this,t),t.println(e,".prototype);")),e.getters.forEach((function(r){return n._visitClassGetter(e,r,t)})),e.methods.forEach((function(r){return n._visitClassMethod(e,r,t)})),t.popClass(),null}},{key:"_visitClassConstructor",value:function(e,t){t.print(e,"function ".concat(e.name,"(")),null!=e.constructorMethod&&this._visitParams(e.constructorMethod.params,t),t.println(e,") {"),t.incIndent(),null!=e.constructorMethod&&e.constructorMethod.body.length>0&&(t.println(e,"var self = this;"),this.visitAllStatements(e.constructorMethod.body,t)),t.decIndent(),t.println(e,"}")}},{key:"_visitClassGetter",value:function(e,t,n){n.println(e,"Object.defineProperty(".concat(e.name,".prototype, '").concat(t.name,"', { get: function() {")),n.incIndent(),t.body.length>0&&(n.println(e,"var self = this;"),this.visitAllStatements(t.body,n)),n.decIndent(),n.println(e,"}});")}},{key:"_visitClassMethod",value:function(e,t,n){n.print(e,"".concat(e.name,".prototype.").concat(t.name," = function(")),this._visitParams(t.params,n),n.println(e,") {"),n.incIndent(),t.body.length>0&&(n.println(e,"var self = this;"),this.visitAllStatements(t.body,n)),n.decIndent(),n.println(e,"};")}},{key:"visitWrappedNodeExpr",value:function(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}},{key:"visitReadVarExpr",value:function(e,t){if(e.builtin===ie.This)t.print(e,"self");else{if(e.builtin===ie.Super)throw new Error("'super' needs to be handled at a parent ast node, not at the variable level!");Object(d.a)(Object(p.a)(n.prototype),"visitReadVarExpr",this).call(this,e,t)}return null}},{key:"visitDeclareVarStmt",value:function(e,t){return t.print(e,"var ".concat(e.name)),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}},{key:"visitCastExpr",value:function(e,t){return e.value.visitExpression(this,t),null}},{key:"visitInvokeFunctionExpr",value:function(e,t){var r=e.fn;return r instanceof se&&r.builtin===ie.Super?(t.currentClass.parent.visitExpression(this,t),t.print(e,".call(this"),e.args.length>0&&(t.print(e,", "),this.visitAllExpressions(e.args,t,",")),t.print(e,")")):Object(d.a)(Object(p.a)(n.prototype),"visitInvokeFunctionExpr",this).call(this,e,t),null}},{key:"visitFunctionExpr",value:function(e,t){return t.print(e,"function".concat(e.name?" "+e.name:"","(")),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}},{key:"visitDeclareFunctionStmt",value:function(e,t){return t.print(e,"function ".concat(e.name,"(")),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}},{key:"visitTryCatchStmt",value:function(e,t){t.println(e,"try {"),t.incIndent(),this.visitAllStatements(e.bodyStmts,t),t.decIndent(),t.println(e,"} catch (".concat(Qr.name,") {")),t.incIndent();var n=[Jr.set(Qr.prop("stack")).toDeclStmt(null,[Ce.Final])].concat(e.catchStmts);return this.visitAllStatements(n,t),t.decIndent(),t.println(e,"}"),null}},{key:"visitLocalizedString",value:function(e,t){var n=this;t.print(e,'$localize((this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})(');for(var r=[e.serializeI18nHead()],i=1;i<e.messageParts.length;i++)r.push(e.serializeI18nTemplatePart(i));return t.print(e,"[".concat(r.map((function(e){return ti(e.cooked,!1)})).join(", "),"], ")),t.print(e,"[".concat(r.map((function(e){return ti(e.raw,!1)})).join(", "),"])")),e.expressions.forEach((function(r){t.print(e,", "),r.visitExpression(n,t)})),t.print(e,")"),null}},{key:"_visitParams",value:function(e,t){this.visitAllObjects((function(e){return t.print(null,e.name)}),e,t,",")}},{key:"getBuiltinMethodName",value:function(e){var t;switch(e){case oe.ConcatArray:t="concat";break;case oe.SubscribeObservable:t="subscribe";break;case oe.Bind:t="bind";break;default:throw new Error("Unknown builtin method: ".concat(e))}return t}}]),n}(ei),ii=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"evaluateStatements",value:function(e,t,n,r){var i=new ai(n),a=Zr.createRoot();return t.length>0&&!t[0].isEquivalent(it("use strict").toStmt())&&(t=[it("use strict").toStmt()].concat(Object(m.a)(t))),i.visitAllStatements(t,a),i.createReturnStmt(a),this.evaluateCode(e,a,i.getArgs(),r)}},{key:"evaluateCode",value:function(e,t,n,r){var i='"use strict";'.concat(t.toSource(),"\n//# sourceURL=").concat(e),a=[],o=[];for(var s in n)o.push(n[s]),a.push(s);if(r){var l=Object(c.a)(Function,Object(m.a)(a.concat("return null;"))).toString(),u=l.slice(0,l.indexOf("return null;")).split("\n").length-1;i+="\n".concat(t.toSourceMapGenerator(e,u).toJsComment())}var d=Object(c.a)(Function,Object(m.a)(a.concat(i)));return this.executeFunction(d,o)}},{key:"executeFunction",value:function(e,t){return e.apply(void 0,Object(m.a)(t))}}]),e}(),ai=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this)).reflector=e,r._evalArgNames=[],r._evalArgValues=[],r._evalExportedVars=[],r}return Object(b.a)(n,[{key:"createReturnStmt",value:function(e){new Ye(new Ue(this._evalExportedVars.map((function(e){return new Be(e,Qe(e),!1)})))).visitStatement(this,e)}},{key:"getArgs",value:function(){for(var e={},t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}},{key:"visitExternalExpr",value:function(e,t){return this._emitReferenceToExternal(e,this.reflector.resolveExternalReference(e.value),t),null}},{key:"visitWrappedNodeExpr",value:function(e,t){return this._emitReferenceToExternal(e,e.node,t),null}},{key:"visitDeclareVarStmt",value:function(e,t){return e.hasModifier(Ce.Exported)&&this._evalExportedVars.push(e.name),Object(d.a)(Object(p.a)(n.prototype),"visitDeclareVarStmt",this).call(this,e,t)}},{key:"visitDeclareFunctionStmt",value:function(e,t){return e.hasModifier(Ce.Exported)&&this._evalExportedVars.push(e.name),Object(d.a)(Object(p.a)(n.prototype),"visitDeclareFunctionStmt",this).call(this,e,t)}},{key:"visitDeclareClassStmt",value:function(e,t){return e.hasModifier(Ce.Exported)&&this._evalExportedVars.push(e.name),Object(d.a)(Object(p.a)(n.prototype),"visitDeclareClassStmt",this).call(this,e,t)}},{key:"_emitReferenceToExternal",value:function(e,t,n){var r=this._evalArgValues.indexOf(t);if(-1===r){r=this._evalArgValues.length,this._evalArgValues.push(t);var i=Dt({reference:t})||"val";this._evalArgNames.push("jit_".concat(i,"_").concat(r))}n.print(e,this._evalArgNames[r])}}]),n}(ri);var oi=function(){function e(t){Object(g.a)(this,e),this.context=t}return Object(b.a)(e,[{key:"resolveExternalReference",value:function(e){if("@angular/core"!==e.moduleName)throw new Error("Cannot resolve external reference to ".concat(e.moduleName,", only references to @angular/core are supported."));if(!this.context.hasOwnProperty(e.name))throw new Error("No value provided for @angular/core symbol '".concat(e.name,"'."));return this.context[e.name]}},{key:"parameters",value:function(e){throw new Error("Not implemented.")}},{key:"annotations",value:function(e){throw new Error("Not implemented.")}},{key:"shallowAnnotations",value:function(e){throw new Error("Not implemented.")}},{key:"tryAnnotations",value:function(e){throw new Error("Not implemented.")}},{key:"propMetadata",value:function(e){throw new Error("Not implemented.")}},{key:"hasLifecycleHook",value:function(e,t){throw new Error("Not implemented.")}},{key:"guards",value:function(e){throw new Error("Not implemented.")}},{key:"componentModuleUrl",value:function(e,t){throw new Error("Not implemented.")}}]),e}();function si(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tt(Object.keys(e).map((function(n){return{key:n,quoted:t,value:e[n]}})))}function ci(e){var t=e.internalType,n=e.type,r=e.bootstrap,i=e.declarations,a=e.imports,o=e.exports,s=e.schemas,c=e.containsForwardDecls,l=e.emitInline,u=e.id,d=[],p={type:t};if(r.length&&(p.bootstrap=ui(r,c)),l)i.length&&(p.declarations=ui(i,c)),a.length&&(p.imports=ui(a,c)),o.length&&(p.exports=ui(o,c));else{var h=function(e){var t=e.adjacentType,n=e.declarations,r=e.imports,i=e.exports,a=e.containsForwardDecls,o={};n.length&&(o.declarations=ui(n,a));r.length&&(o.imports=ui(r,a));i.length&&(o.exports=ui(i,a));if(0===Object.keys(o).length)return null;var s=(l=new fe(Je(Lt.setNgModuleScope),[t,Nt(o)]),u=new we({name:"ngJitMode",moduleName:null}),d=new je(G.Identical,new ce(u),it("undefined")),p=new je(G.Or,d,u,void 0,void 0,!0),new je(G.And,p,l)),c=new Me([],[s.toStmt()]);var l,u,d,p;return new fe(c,[]).toStmt()}(e);null!==h&&d.push(h)}return s&&s.length&&(p.schemas=et(s.map((function(e){return e.value})))),u&&(p.id=u),{expression:Je(Lt.defineNgModule).callFn([Nt(p)]),type:new X(Je(Lt.NgModuleDefWithMeta,[new X(n.type),li(i),li(a),li(o)])),additionalStatements:d}}function li(e){var t=e.map((function(e){return Ze(e.type)}));return e.length>0?$e(et(t)):te}function ui(e,t){var n=et(e.map((function(e){return e.value})));return t?nt([],[new Ye(n)]):n}function di(e){var t=[];return t.push({key:"name",value:it(e.pipeName),quoted:!1}),t.push({key:"type",value:e.type.value,quoted:!1}),t.push({key:"pure",value:it(e.pure),quoted:!1}),{expression:Je(Lt.definePipe).callFn([tt(t)]),type:new X(Je(Lt.PipeDefWithMeta,[Bt(e.type.type,e.typeArgumentCount),new X(new ge(e.pipeName))]))}}var pi,hi=function e(t,n,r,i){Object(g.a)(this,e),this.input=n,this.errLocation=r,this.ctxLocation=i,this.message="Parser Error: ".concat(t," ").concat(r," [").concat(n,"] in ").concat(i)},fi=function(){function e(t,n){Object(g.a)(this,e),this.start=t,this.end=n}return Object(b.a)(e,[{key:"toAbsolute",value:function(e){return new Ui(e+this.start,e+this.end)}}]),e}(),mi=function(){function e(t,n){Object(g.a)(this,e),this.span=t,this.sourceSpan=n}return Object(b.a)(e,[{key:"visit",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null}},{key:"toString",value:function(){return"AST"}}]),e}(),gi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,e,r)).nameSpan=i,a}return n}(mi),bi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,e,r)).prefix=i,s.uninterpretedExpression=a,s.location=o,s}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitQuote(this,t)}},{key:"toString",value:function(){return"Quote"}}]),n}(mi),vi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"visit",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}]),n}(mi),_i=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitImplicitReceiver(this,t)}}]),n}(mi),yi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,e,r)).expressions=i,a}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitChain(this,t)}}]),n}(mi),Oi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,e,r)).condition=i,s.trueExp=a,s.falseExp=o,s}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitConditional(this,t)}}]),n}(mi),xi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,e,r,i)).receiver=a,s.name=o,s}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPropertyRead(this,t)}}]),n}(gi),Ei=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(g.a)(this,n),(c=t.call(this,e,r,i)).receiver=a,c.name=o,c.value=s,c}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPropertyWrite(this,t)}}]),n}(gi),ki=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,e,r,i)).receiver=a,s.name=o,s}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitSafePropertyRead(this,t)}}]),n}(gi),Ci=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,e,r)).obj=i,o.key=a,o}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitKeyedRead(this,t)}}]),n}(mi),wi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,e,r)).obj=i,s.key=a,s.value=o,s}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitKeyedWrite(this,t)}}]),n}(mi),Si=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(g.a)(this,n),(c=t.call(this,e,r,s)).exp=i,c.name=a,c.args=o,c}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPipe(this,t)}}]),n}(gi),Ii=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,e,r)).value=i,a}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralPrimitive(this,t)}}]),n}(mi),Ti=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,e,r)).expressions=i,a}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralArray(this,t)}}]),n}(mi),Ai=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,e,r)).keys=i,o.values=a,o}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralMap(this,t)}}]),n}(mi),Pi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,e,r)).strings=i,o.expressions=a,o}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitInterpolation(this,t)}}]),n}(mi),Mi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,e,r)).operation=i,s.left=a,s.right=o,s}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitBinary(this,t)}}]),n}(mi),Di=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s,c){var l;return Object(g.a)(this,n),(l=t.call(this,e,r,o,s,c)).operator=i,l.expr=a,l}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0!==e.visitUnary?e.visitUnary(this,t):e.visitBinary(this,t)}}],[{key:"createMinus",value:function(e,t,r){return new n(e,t,"-",r,"-",new Ii(e,t,0),r)}},{key:"createPlus",value:function(e,t,r){return new n(e,t,"+",r,"-",r,new Ii(e,t,0))}}]),n}(Mi),ji=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,e,r)).expression=i,a}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPrefixNot(this,t)}}]),n}(mi),Ri=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,e,r)).expression=i,a}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitNonNullAssert(this,t)}}]),n}(mi),Li=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(g.a)(this,n),(c=t.call(this,e,r,i)).receiver=a,c.name=o,c.args=s,c}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitMethodCall(this,t)}}]),n}(gi),Ni=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(g.a)(this,n),(c=t.call(this,e,r,i)).receiver=a,c.name=o,c.args=s,c}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitSafeMethodCall(this,t)}}]),n}(gi),Bi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,e,r)).target=i,o.args=a,o}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitFunctionCall(this,t)}}]),n}(mi),Ui=function e(t,n){Object(g.a)(this,e),this.start=t,this.end=n},Fi=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,new fi(0,null===r?0:r.length),new Ui(a,null===r?a:a+r.length))).ast=e,s.source=r,s.location=i,s.errors=o,s}return Object(b.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}},{key:"toString",value:function(){return"".concat(this.source," in ").concat(this.location)}}]),n}(mi),qi=function e(t,n,r){Object(g.a)(this,e),this.sourceSpan=t,this.key=n,this.value=r},Wi=function e(t,n,r){Object(g.a)(this,e),this.sourceSpan=t,this.key=n,this.value=r},Hi=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visit",value:function(e,t){e.visit(this,t)}},{key:"visitUnary",value:function(e,t){this.visit(e.expr,t)}},{key:"visitBinary",value:function(e,t){this.visit(e.left,t),this.visit(e.right,t)}},{key:"visitChain",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitConditional",value:function(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}},{key:"visitPipe",value:function(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}},{key:"visitFunctionCall",value:function(e,t){e.target&&this.visit(e.target,t),this.visitAll(e.args,t)}},{key:"visitImplicitReceiver",value:function(e,t){}},{key:"visitInterpolation",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitKeyedRead",value:function(e,t){this.visit(e.obj,t),this.visit(e.key,t)}},{key:"visitKeyedWrite",value:function(e,t){this.visit(e.obj,t),this.visit(e.key,t),this.visit(e.value,t)}},{key:"visitLiteralArray",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitLiteralMap",value:function(e,t){this.visitAll(e.values,t)}},{key:"visitLiteralPrimitive",value:function(e,t){}},{key:"visitMethodCall",value:function(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}},{key:"visitPrefixNot",value:function(e,t){this.visit(e.expression,t)}},{key:"visitNonNullAssert",value:function(e,t){this.visit(e.expression,t)}},{key:"visitPropertyRead",value:function(e,t){this.visit(e.receiver,t)}},{key:"visitPropertyWrite",value:function(e,t){this.visit(e.receiver,t),this.visit(e.value,t)}},{key:"visitSafePropertyRead",value:function(e,t){this.visit(e.receiver,t)}},{key:"visitSafeMethodCall",value:function(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}},{key:"visitQuote",value:function(e,t){}},{key:"visitAll",value:function(e,t){var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.visit(i,t)}}catch(a){r.e(a)}finally{r.f()}}}]),e}(),Ki=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){return e}},{key:"visitInterpolation",value:function(e,t){return new Pi(e.span,e.sourceSpan,e.strings,this.visitAll(e.expressions))}},{key:"visitLiteralPrimitive",value:function(e,t){return new Ii(e.span,e.sourceSpan,e.value)}},{key:"visitPropertyRead",value:function(e,t){return new xi(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}},{key:"visitPropertyWrite",value:function(e,t){return new Ei(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,e.value.visit(this))}},{key:"visitSafePropertyRead",value:function(e,t){return new ki(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}},{key:"visitMethodCall",value:function(e,t){return new Li(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,this.visitAll(e.args))}},{key:"visitSafeMethodCall",value:function(e,t){return new Ni(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,this.visitAll(e.args))}},{key:"visitFunctionCall",value:function(e,t){return new Bi(e.span,e.sourceSpan,e.target.visit(this),this.visitAll(e.args))}},{key:"visitLiteralArray",value:function(e,t){return new Ti(e.span,e.sourceSpan,this.visitAll(e.expressions))}},{key:"visitLiteralMap",value:function(e,t){return new Ai(e.span,e.sourceSpan,e.keys,this.visitAll(e.values))}},{key:"visitUnary",value:function(e,t){switch(e.operator){case"+":return Di.createPlus(e.span,e.sourceSpan,e.expr.visit(this));case"-":return Di.createMinus(e.span,e.sourceSpan,e.expr.visit(this));default:throw new Error("Unknown unary operator ".concat(e.operator))}}},{key:"visitBinary",value:function(e,t){return new Mi(e.span,e.sourceSpan,e.operation,e.left.visit(this),e.right.visit(this))}},{key:"visitPrefixNot",value:function(e,t){return new ji(e.span,e.sourceSpan,e.expression.visit(this))}},{key:"visitNonNullAssert",value:function(e,t){return new Ri(e.span,e.sourceSpan,e.expression.visit(this))}},{key:"visitConditional",value:function(e,t){return new Oi(e.span,e.sourceSpan,e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this))}},{key:"visitPipe",value:function(e,t){return new Si(e.span,e.sourceSpan,e.exp.visit(this),e.name,this.visitAll(e.args),e.nameSpan)}},{key:"visitKeyedRead",value:function(e,t){return new Ci(e.span,e.sourceSpan,e.obj.visit(this),e.key.visit(this))}},{key:"visitKeyedWrite",value:function(e,t){return new wi(e.span,e.sourceSpan,e.obj.visit(this),e.key.visit(this),e.value.visit(this))}},{key:"visitAll",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].visit(this);return t}},{key:"visitChain",value:function(e,t){return new yi(e.span,e.sourceSpan,this.visitAll(e.expressions))}},{key:"visitQuote",value:function(e,t){return new bi(e.span,e.sourceSpan,e.prefix,e.uninterpretedExpression,e.location)}}]),e}(),zi=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){return e}},{key:"visitInterpolation",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new Pi(e.span,e.sourceSpan,e.strings,n):e}},{key:"visitLiteralPrimitive",value:function(e,t){return e}},{key:"visitPropertyRead",value:function(e,t){var n=e.receiver.visit(this);return n!==e.receiver?new xi(e.span,e.sourceSpan,e.nameSpan,n,e.name):e}},{key:"visitPropertyWrite",value:function(e,t){var n=e.receiver.visit(this),r=e.value.visit(this);return n!==e.receiver||r!==e.value?new Ei(e.span,e.sourceSpan,e.nameSpan,n,e.name,r):e}},{key:"visitSafePropertyRead",value:function(e,t){var n=e.receiver.visit(this);return n!==e.receiver?new ki(e.span,e.sourceSpan,e.nameSpan,n,e.name):e}},{key:"visitMethodCall",value:function(e,t){var n=e.receiver.visit(this),r=this.visitAll(e.args);return n!==e.receiver||r!==e.args?new Li(e.span,e.sourceSpan,e.nameSpan,n,e.name,r):e}},{key:"visitSafeMethodCall",value:function(e,t){var n=e.receiver.visit(this),r=this.visitAll(e.args);return n!==e.receiver||r!==e.args?new Ni(e.span,e.sourceSpan,e.nameSpan,n,e.name,r):e}},{key:"visitFunctionCall",value:function(e,t){var n=e.target&&e.target.visit(this),r=this.visitAll(e.args);return n!==e.target||r!==e.args?new Bi(e.span,e.sourceSpan,n,r):e}},{key:"visitLiteralArray",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new Ti(e.span,e.sourceSpan,n):e}},{key:"visitLiteralMap",value:function(e,t){var n=this.visitAll(e.values);return n!==e.values?new Ai(e.span,e.sourceSpan,e.keys,n):e}},{key:"visitUnary",value:function(e,t){var n=e.expr.visit(this);if(n!==e.expr)switch(e.operator){case"+":return Di.createPlus(e.span,e.sourceSpan,n);case"-":return Di.createMinus(e.span,e.sourceSpan,n);default:throw new Error("Unknown unary operator ".concat(e.operator))}return e}},{key:"visitBinary",value:function(e,t){var n=e.left.visit(this),r=e.right.visit(this);return n!==e.left||r!==e.right?new Mi(e.span,e.sourceSpan,e.operation,n,r):e}},{key:"visitPrefixNot",value:function(e,t){var n=e.expression.visit(this);return n!==e.expression?new ji(e.span,e.sourceSpan,n):e}},{key:"visitNonNullAssert",value:function(e,t){var n=e.expression.visit(this);return n!==e.expression?new Ri(e.span,e.sourceSpan,n):e}},{key:"visitConditional",value:function(e,t){var n=e.condition.visit(this),r=e.trueExp.visit(this),i=e.falseExp.visit(this);return n!==e.condition||r!==e.trueExp||i!==e.falseExp?new Oi(e.span,e.sourceSpan,n,r,i):e}},{key:"visitPipe",value:function(e,t){var n=e.exp.visit(this),r=this.visitAll(e.args);return n!==e.exp||r!==e.args?new Si(e.span,e.sourceSpan,n,e.name,r,e.nameSpan):e}},{key:"visitKeyedRead",value:function(e,t){var n=e.obj.visit(this),r=e.key.visit(this);return n!==e.obj||r!==e.key?new Ci(e.span,e.sourceSpan,n,r):e}},{key:"visitKeyedWrite",value:function(e,t){var n=e.obj.visit(this),r=e.key.visit(this),i=e.value.visit(this);return n!==e.obj||r!==e.key||i!==e.value?new wi(e.span,e.sourceSpan,n,r,i):e}},{key:"visitAll",value:function(e){for(var t=[],n=!1,r=0;r<e.length;++r){var i=e[r],a=i.visit(this);t[r]=a,n=n||a!==i}return n?t:e}},{key:"visitChain",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new yi(e.span,e.sourceSpan,n):e}},{key:"visitQuote",value:function(e,t){return e}}]),e}(),Vi=function e(t,n,r,i,a){Object(g.a)(this,e),this.name=t,this.expression=n,this.type=r,this.sourceSpan=i,this.valueSpan=a,this.isLiteral=this.type===pi.LITERAL_ATTR,this.isAnimation=this.type===pi.ANIMATION};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LITERAL_ATTR=1]="LITERAL_ATTR",e[e.ANIMATION=2]="ANIMATION"}(pi||(pi={}));var Gi=function e(t,n,r,i,a,o){Object(g.a)(this,e),this.name=t,this.targetOrPhase=n,this.type=r,this.handler=i,this.sourceSpan=a,this.handlerSpan=o},Yi=function e(t,n,r,i,a){Object(g.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=a},Xi=function e(t,n,r,i,a,o,s){Object(g.a)(this,e),this.name=t,this.type=n,this.securityContext=r,this.value=i,this.unit=a,this.sourceSpan=o,this.valueSpan=s},Qi=function e(){Object(g.a)(this,e)};Qi.event=Qe("$event");var Ji=function e(t,n){Object(g.a)(this,e),this.stmts=t,this.allowDefault=n,this.render3Stmts=t.map((function(e){if(e instanceof ze&&e.name==n.name&&e.value instanceof je){var t=e.value.lhs;return new Ye(t.value)}return e}))};function $i(e,t,n,r,i,a,o){e||(e=new da);var s=Zi({createLiteralArrayConverter:function(e){return function(e){return et(e)}},createLiteralMapConverter:function(e){return function(t){return tt(e.map((function(e,n){return{key:e.key,value:t[n],quoted:e.quoted}})))}},createPipeConverter:function(e){throw new Error("Illegal State: Actions are not allowed to contain pipes. Pipe: ".concat(e))}},n),c=new ua(e,t,r,i,a,o),l=[];!function e(t,n){Array.isArray(t)?t.forEach((function(t){return e(t,n)})):n.push(t)}(s.visit(c,ta.Statement),l),function(e,t,n){for(var r=e-1;r>=0;r--)n.unshift(oa(t,r))}(c.temporaryCount,r,l),c.usesImplicitReceiver&&e.notifyImplicitReceiverUse();var u=l.length-1,d=null;if(u>=0){var p=function(e){if(e instanceof Ge)return e.expr;if(e instanceof Ye)return e.value;return null}(l[u]);p&&(d=function(e){return Qe("pd_".concat(e))}(r),l[u]=d.set(p.cast(Q).notIdentical(it(!1))).toDeclStmt(null,[Ce.Final]))}return new Ji(l,d)}function Zi(e,t){return function(e,t){var n=new la(e);return t.visit(n)}(e,t)}var ea,ta,na=function e(t,n){Object(g.a)(this,e),this.stmts=t,this.currValExpr=n};function ra(e,t,n,r,i,a){e||(e=new da);var o=new ua(e,t,r,a),s=n.visit(o,ta.Expression),c=ia(o,r);if(o.usesImplicitReceiver&&e.notifyImplicitReceiverUse(),0===o.temporaryCount&&i==ea.TrySimple)return new na([],s);if(i===ea.Expression)return new na(c,s);var l=function(e){return Qe("currVal_".concat(e))}(r);return c.push(l.set(s).toDeclStmt(Q,[Ce.Final])),new na(c,l)}function ia(e,t){for(var n=[],r=0;r<e.temporaryCount;r++)n.push(oa(t,r));return n}function aa(e,t){return"tmp_".concat(e,"_").concat(t)}function oa(e,t){return new ze(aa(e,t),Fe)}function sa(e,t){if(e!==ta.Expression)throw new Error("Expected an expression, but saw ".concat(t))}function ca(e,t){return e===ta.Statement?t.toStmt():t}!function(e){e[e.General=0]="General",e[e.TrySimple=1]="TrySimple",e[e.Expression=2]="Expression"}(ea||(ea={})),function(e){e[e.Statement=0]="Statement",e[e.Expression=1]="Expression"}(ta||(ta={}));var la=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this))._converterFactory=e,r}return Object(b.a)(n,[{key:"visitPipe",value:function(e,t){var n=this,r=[e.exp].concat(Object(m.a)(e.args)).map((function(e){return e.visit(n,t)}));return new pa(e.span,e.sourceSpan,r,this._converterFactory.createPipeConverter(e.name,r.length))}},{key:"visitLiteralArray",value:function(e,t){var n=this,r=e.expressions.map((function(e){return e.visit(n,t)}));return new pa(e.span,e.sourceSpan,r,this._converterFactory.createLiteralArrayConverter(e.expressions.length))}},{key:"visitLiteralMap",value:function(e,t){var n=this,r=e.values.map((function(e){return e.visit(n,t)}));return new pa(e.span,e.sourceSpan,r,this._converterFactory.createLiteralMapConverter(e.keys))}}]),n}(Ki),ua=function(){function e(t,n,r,i,a,o){Object(g.a)(this,e),this._localResolver=t,this._implicitReceiver=n,this.bindingId=r,this.interpolationFunction=i,this.baseSourceSpan=a,this.implicitReceiverAccesses=o,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.temporaryCount=0,this.usesImplicitReceiver=!1}return Object(b.a)(e,[{key:"visitUnary",value:function(e,t){var n;switch(e.operator){case"+":n=V.Plus;break;case"-":n=V.Minus;break;default:throw new Error("Unsupported operator ".concat(e.operator))}return ca(t,new De(n,this._visit(e.expr,ta.Expression),void 0,this.convertSourceSpan(e.span)))}},{key:"visitBinary",value:function(e,t){var n;switch(e.operation){case"+":n=G.Plus;break;case"-":n=G.Minus;break;case"*":n=G.Multiply;break;case"/":n=G.Divide;break;case"%":n=G.Modulo;break;case"&&":n=G.And;break;case"||":n=G.Or;break;case"==":n=G.Equals;break;case"!=":n=G.NotEquals;break;case"===":n=G.Identical;break;case"!==":n=G.NotIdentical;break;case"<":n=G.Lower;break;case">":n=G.Bigger;break;case"<=":n=G.LowerEquals;break;case">=":n=G.BiggerEquals;break;default:throw new Error("Unsupported operation ".concat(e.operation))}return ca(t,new je(n,this._visit(e.left,ta.Expression),this._visit(e.right,ta.Expression),void 0,this.convertSourceSpan(e.span)))}},{key:"visitChain",value:function(e,t){return function(e,t){if(e!==ta.Statement)throw new Error("Expected a statement, but saw ".concat(t))}(t,e),this.visitAll(e.expressions,t)}},{key:"visitConditional",value:function(e,t){return ca(t,this._visit(e.condition,ta.Expression).conditional(this._visit(e.trueExp,ta.Expression),this._visit(e.falseExp,ta.Expression),this.convertSourceSpan(e.span)))}},{key:"visitPipe",value:function(e,t){throw new Error("Illegal state: Pipes should have been converted into functions. Pipe: ".concat(e.name))}},{key:"visitFunctionCall",value:function(e,t){var n=this.visitAll(e.args,ta.Expression);return ca(t,e instanceof pa?e.converter(n):this._visit(e.target,ta.Expression).callFn(n,this.convertSourceSpan(e.span)))}},{key:"visitImplicitReceiver",value:function(e,t){return sa(t,e),this.usesImplicitReceiver=!0,this._implicitReceiver}},{key:"visitInterpolation",value:function(e,t){sa(t,e);for(var n=[it(e.expressions.length)],r=0;r<e.strings.length-1;r++)n.push(it(e.strings[r])),n.push(this._visit(e.expressions[r],ta.Expression));return n.push(it(e.strings[e.strings.length-1])),this.interpolationFunction?this.interpolationFunction(n):e.expressions.length<=9?Je(It.inlineInterpolate).callFn(n):Je(It.interpolate).callFn([n[0],et(n.slice(1),void 0,this.convertSourceSpan(e.span))])}},{key:"visitKeyedRead",value:function(e,t){var n=this.leftMostSafeNode(e);return n?this.convertSafeAccess(e,n,t):ca(t,this._visit(e.obj,ta.Expression).key(this._visit(e.key,ta.Expression)))}},{key:"visitKeyedWrite",value:function(e,t){var n=this._visit(e.obj,ta.Expression),r=this._visit(e.key,ta.Expression),i=this._visit(e.value,ta.Expression);return ca(t,n.key(r).set(i))}},{key:"visitLiteralArray",value:function(e,t){throw new Error("Illegal State: literal arrays should have been converted into functions")}},{key:"visitLiteralMap",value:function(e,t){throw new Error("Illegal State: literal maps should have been converted into functions")}},{key:"visitLiteralPrimitive",value:function(e,t){var n=null===e.value||void 0===e.value||!0===e.value||!0===e.value?J:void 0;return ca(t,it(e.value,n,this.convertSourceSpan(e.span)))}},{key:"_getLocal",value:function(e){return this._localResolver.getLocal(e)}},{key:"visitMethodCall",value:function(e,t){if(e.receiver instanceof _i&&"$any"==e.name){var n=this.visitAll(e.args,ta.Expression);if(1!=n.length)throw new Error("Invalid call to $any, expected 1 argument but received ".concat(n.length||"none"));return n[0].cast(Q,this.convertSourceSpan(e.span))}var r=this.leftMostSafeNode(e);if(r)return this.convertSafeAccess(e,r,t);var i=this.visitAll(e.args,ta.Expression),a=this.usesImplicitReceiver,o=null,s=this._visit(e.receiver,ta.Expression);if(s===this._implicitReceiver){var c=this._getLocal(e.name);c&&(this.usesImplicitReceiver=a,o=c.callFn(i)),this.addImplicitReceiverAccess(e.name)}return null==o&&(o=s.callMethod(e.name,i,this.convertSourceSpan(e.span))),ca(t,o)}},{key:"visitPrefixNot",value:function(e,t){return ca(t,(n=this._visit(e.expression,ta.Expression),new Ie(n,r)));var n,r}},{key:"visitNonNullAssert",value:function(e,t){return ca(t,(n=this._visit(e.expression,ta.Expression),new Te(n,r)));var n,r}},{key:"visitPropertyRead",value:function(e,t){var n=this.leftMostSafeNode(e);if(n)return this.convertSafeAccess(e,n,t);var r=null,i=this.usesImplicitReceiver,a=this._visit(e.receiver,ta.Expression);return a===this._implicitReceiver&&((r=this._getLocal(e.name))&&(this.usesImplicitReceiver=i),this.addImplicitReceiverAccess(e.name)),null==r&&(r=a.prop(e.name)),ca(t,r)}},{key:"visitPropertyWrite",value:function(e,t){var n=this._visit(e.receiver,ta.Expression),r=this.usesImplicitReceiver,i=null;if(n===this._implicitReceiver){var a=this._getLocal(e.name);if(a){if(!(a instanceof Re)){var o=e.name,s=e.value instanceof xi?e.value.name:void 0;throw new Error('Cannot assign value "'.concat(s,'" to template variable "').concat(o,'". Template variables are read-only.'))}i=a,this.usesImplicitReceiver=r,this.addImplicitReceiverAccess(e.name)}}return null===i&&(i=n.prop(e.name)),ca(t,i.set(this._visit(e.value,ta.Expression)))}},{key:"visitSafePropertyRead",value:function(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}},{key:"visitSafeMethodCall",value:function(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}},{key:"visitAll",value:function(e,t){var n=this;return e.map((function(e){return n._visit(e,t)}))}},{key:"visitQuote",value:function(e,t){throw new Error("Quotes are not supported for evaluation!\n        Statement: ".concat(e.uninterpretedExpression," located at ").concat(e.location))}},{key:"_visit",value:function(e,t){var n=this._resultMap.get(e);return n||(this._nodeMap.get(e)||e).visit(this,t)}},{key:"convertSafeAccess",value:function(e,t,n){var r=this._visit(t.receiver,ta.Expression),i=void 0;this.needsTemporary(t.receiver)&&(r=(i=this.allocateTemporary()).set(r),this._resultMap.set(t.receiver,i));var a=r.isBlank();t instanceof Ni?this._nodeMap.set(t,new Li(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name,t.args)):this._nodeMap.set(t,new xi(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name));var o=this._visit(e,ta.Expression);return this._nodeMap.delete(t),i&&this.releaseTemporary(i),ca(n,a.conditional(it(null),o))}},{key:"leftMostSafeNode",value:function(e){var t=this,n=function(e,n){return(t._nodeMap.get(n)||n).visit(e)};return e.visit({visitUnary:function(e){return null},visitBinary:function(e){return null},visitChain:function(e){return null},visitConditional:function(e){return null},visitFunctionCall:function(e){return null},visitImplicitReceiver:function(e){return null},visitInterpolation:function(e){return null},visitKeyedRead:function(e){return n(this,e.obj)},visitKeyedWrite:function(e){return null},visitLiteralArray:function(e){return null},visitLiteralMap:function(e){return null},visitLiteralPrimitive:function(e){return null},visitMethodCall:function(e){return n(this,e.receiver)},visitPipe:function(e){return null},visitPrefixNot:function(e){return null},visitNonNullAssert:function(e){return null},visitPropertyRead:function(e){return n(this,e.receiver)},visitPropertyWrite:function(e){return null},visitQuote:function(e){return null},visitSafeMethodCall:function(e){return n(this,e.receiver)||e},visitSafePropertyRead:function(e){return n(this,e.receiver)||e}})}},{key:"needsTemporary",value:function(e){var t=this,n=function(e,n){return n&&(t._nodeMap.get(n)||n).visit(e)};return e.visit({visitUnary:function(e){return n(this,e.expr)},visitBinary:function(e){return n(this,e.left)||n(this,e.right)},visitChain:function(e){return!1},visitConditional:function(e){return n(this,e.condition)||n(this,e.trueExp)||n(this,e.falseExp)},visitFunctionCall:function(e){return!0},visitImplicitReceiver:function(e){return!1},visitInterpolation:function(e){return function(e,t){return t.some((function(t){return n(e,t)}))}(this,e.expressions)},visitKeyedRead:function(e){return!1},visitKeyedWrite:function(e){return!1},visitLiteralArray:function(e){return!0},visitLiteralMap:function(e){return!0},visitLiteralPrimitive:function(e){return!1},visitMethodCall:function(e){return!0},visitPipe:function(e){return!0},visitPrefixNot:function(e){return n(this,e.expression)},visitNonNullAssert:function(e){return n(this,e.expression)},visitPropertyRead:function(e){return!1},visitPropertyWrite:function(e){return!1},visitQuote:function(e){return!1},visitSafeMethodCall:function(e){return!0},visitSafePropertyRead:function(e){return!1}})}},{key:"allocateTemporary",value:function(){var e=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new se(aa(this.bindingId,e))}},{key:"releaseTemporary",value:function(e){if(this._currentTemporary--,e.name!=aa(this.bindingId,this._currentTemporary))throw new Error("Temporary ".concat(e.name," released out of order"))}},{key:"convertSourceSpan",value:function(e){if(this.baseSourceSpan){var t=this.baseSourceSpan.start.moveBy(e.start),n=this.baseSourceSpan.start.moveBy(e.end),r=this.baseSourceSpan.fullStart.moveBy(e.start);return new un(t,n,r)}return null}},{key:"addImplicitReceiverAccess",value:function(e){this.implicitReceiverAccesses&&this.implicitReceiverAccesses.add(e)}}]),e}();var da=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"notifyImplicitReceiverUse",value:function(){}},{key:"getLocal",value:function(e){return e===Qi.event.name?Qi.event:null}}]),e}();var pa=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this,e,r,null,i)).args=i,o.converter=a,o}return n}(Bi),ha=function(){function e(){Object(g.a)(this,e),this.strictStyling=!0}return Object(b.a)(e,[{key:"shimCssText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=ja(e);e=Ma(e),e=this._insertDirectives(e);var i=this._scopeCssText(e,t,n);return[i].concat(Object(m.a)(r)).join("\n")}},{key:"_insertDirectives",value:function(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}},{key:"_insertPolyfillDirectivesInCssText",value:function(e){return e.replace(ma,(function(){return(arguments.length<=2?void 0:arguments[2])+"{"}))}},{key:"_insertPolyfillRulesInCssText",value:function(e){return e.replace(ga,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0].replace(t[1],"").replace(t[2],"");return t[4]+r}))}},{key:"_scopeCssText",value:function(e,t,n){var r=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeSelectors(e,t,n)),(e=e+"\n"+r).trim()}},{key:"_extractUnscopedRulesFromCssText",value:function(e){var t,n="";for(ba.lastIndex=0;null!==(t=ba.exec(e));){n+=t[0].replace(t[2],"").replace(t[1],t[4])+"\n\n"}return n}},{key:"_convertColonHost",value:function(e){return this._convertColonRule(e,Oa,this._colonHostPartReplacer)}},{key:"_convertColonHostContext",value:function(e){return this._convertColonRule(e,xa,this._colonHostContextPartReplacer)}},{key:"_convertColonRule",value:function(e,t,n){return e.replace(t,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t[2]){for(var i=t[2].split(","),a=[],o=0;o<i.length;o++){var s=i[o].trim();if(!s)break;a.push(n(Ea,s,t[3]))}return a.join(",")}return Ea+t[3]}))}},{key:"_colonHostContextPartReplacer",value:function(e,t,n){return t.indexOf(va)>-1?this._colonHostPartReplacer(e,t,n):e+t+n+", "+t+" "+e+n}},{key:"_colonHostPartReplacer",value:function(e,t,n){return e+t.replace(va,"")+n}},{key:"_convertShadowDOMSelectors",value:function(e){return Ca.reduce((function(e,t){return e.replace(t," ")}),e)}},{key:"_scopeSelectors",value:function(e,t,n){var r,i,a,o,s,c=this;return r=function(e){var r=e.selector,i=e.content;return"@"!=e.selector[0]?r=c._scopeSelector(e.selector,t,n,c.strictStyling):(e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document"))&&(i=c._scopeSelectors(e.content,t,n)),new qa(r,i)},i=Ha(e,Fa,La),a=Ha(i.escapedString,Ua,Ra),o=0,s=0,a.escapedString.replace(Na,(function(){var e=arguments.length<=2?void 0:arguments[2],t="",n=arguments.length<=4?void 0:arguments[4],i="";n&&n.startsWith("{%BLOCK%")&&(t=a.blocks[o++],n=n.substring(Ra.length+1),i="{");var s=r(new qa(e,t));return"".concat(arguments.length<=1?void 0:arguments[1]).concat(s.selector).concat(arguments.length<=3?void 0:arguments[3]).concat(i).concat(s.content).concat(n)})).replace(Ba,(function(){return i.blocks[s++]}))}},{key:"_scopeSelector",value:function(e,t,n,r){var i=this;return e.split(",").map((function(e){return e.trim().split(wa)})).map((function(e){var a=Object(s.a)(e),o=a[0],c=a.slice(1);return[function(e){return i._selectorNeedsScoping(e,t)?r?i._applyStrictSelectorScope(e,t,n):i._applySelectorScope(e,t,n):e}(o)].concat(Object(m.a)(c)).join(" ")})).join(", ")}},{key:"_selectorNeedsScoping",value:function(e,t){return!this._makeScopeMatcher(t).test(e)}},{key:"_makeScopeMatcher",value:function(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+Sa,"m")}},{key:"_applySelectorScope",value:function(e,t,n){return this._applySimpleSelectorScope(e,t,n)}},{key:"_applySimpleSelectorScope",value:function(e,t,n){if(Ia.lastIndex=0,Ia.test(e)){var r=this.strictStyling?"[".concat(n,"]"):t;return e.replace(ka,(function(e,t){return t.replace(/([^:]*)(:*)(.*)/,(function(e,t,n,i){return t+r+n+i}))})).replace(Ia,r+" ")}return t+" "+e}},{key:"_applyStrictSelectorScope",value:function(e,t,n){for(var r,i=this,a="["+(t=t.replace(/\[is=([^\]]*)\]/g,(function(e){return arguments.length<=1?void 0:arguments[1]})))+"]",o=function(e){var r=e.trim();if(!r)return"";if(e.indexOf(Ea)>-1)r=i._applySimpleSelectorScope(e,t,n);else{var o=e.replace(Ia,"");if(o.length>0){var s=o.match(/([^:]*)(:*)(.*)/);s&&(r=s[1]+a+s[2]+s[3])}}return r},s=new fa(e),c="",l=0,u=/( |>|\+|~(?!=))\s*/g,d=!((e=s.content()).indexOf(Ea)>-1);null!==(r=u.exec(e));){var p=r[1],h=e.slice(l,r.index).trim(),f=(d=d||h.indexOf(Ea)>-1)?o(h):h;c+="".concat(f," ").concat(p," "),l=u.lastIndex}var m=e.substring(l);return c+=(d=d||m.indexOf(Ea)>-1)?o(m):m,s.restore(c)}},{key:"_insertPolyfillHostInCssText",value:function(e){return e.replace(Aa,_a).replace(Ta,va)}}]),e}(),fa=function(){function e(t){var n=this;Object(g.a)(this,e),this.placeholders=[],this.index=0,t=t.replace(/(\[[^\]]*\])/g,(function(e,t){var r="__ph-".concat(n.index,"__");return n.placeholders.push(t),n.index++,r})),this._content=t.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(function(e,t,r){var i="__ph-".concat(n.index,"__");return n.placeholders.push(r),n.index++,t+i}))}return Object(b.a)(e,[{key:"restore",value:function(e){var t=this;return e.replace(/__ph-(\d+)__/g,(function(e,n){return t.placeholders[+n]}))}},{key:"content",value:function(){return this._content}}]),e}(),ma=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,ga=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,ba=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,va="-shadowcsshost",_a="-shadowcsscontext",ya=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",Oa=new RegExp("("+va+ya,"gim"),xa=new RegExp("("+_a+ya,"gim"),Ea=va+"-no-combinator",ka=/-shadowcsshost-no-combinator([^\s]*)/,Ca=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],wa=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,Sa="([>\\s~+[.,{:][\\s\\S]*)?$",Ia=/-shadowcsshost/gim,Ta=/:host/gim,Aa=/:host-context/gim,Pa=/\/\*\s*[\s\S]*?\*\//g;function Ma(e){return e.replace(Pa,"")}var Da=/\/\*\s*#\s*source(Mapping)?URL=[\s\S]+?\*\//g;function ja(e){return e.match(Da)||[]}var Ra="%BLOCK%",La="%QUOTED%",Na=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,Ba=/%QUOTED%/g,Ua=new Map([["{","}"]]),Fa=new Map([['"','"'],["'","'"]]),qa=function e(t,n){Object(g.a)(this,e),this.selector=t,this.content=n};var Wa=function e(t,n){Object(g.a)(this,e),this.escapedString=t,this.blocks=n};function Ha(e,t,n){for(var r,i,a=[],o=[],s=0,c=0,l=-1,u=0;u<e.length;u++){var d=e[u];"\\"===d?u++:d===i?0===--s&&(o.push(e.substring(l,u)),a.push(n),c=u,l=-1,r=i=void 0):d===r?s++:0===s&&t.has(d)&&(r=d,i=t.get(d),s=1,l=u+1,a.push(e.substring(c,l)))}return-1!==l?(o.push(e.substring(l)),a.push(n)):a.push(e.substring(c)),new Wa(a.join(""),o)}var Ka="%COMP%",za="_nghost-".concat(Ka),Va="_ngcontent-".concat(Ka);var Ga=function e(t,n){Object(g.a)(this,e),this.sourceSpan=t,this.i18n=n},Ya=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,r,i)).value=e,a}return Object(b.a)(n,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),n}(Ga),Xa=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(g.a)(this,n),(c=t.call(this,a,s)).switchValue=e,c.type=r,c.cases=i,c.switchValueSourceSpan=o,c}return Object(b.a)(n,[{key:"visit",value:function(e,t){return e.visitExpansion(this,t)}}]),n}(Ga),Qa=function(){function e(t,n,r,i,a){Object(g.a)(this,e),this.value=t,this.expression=n,this.sourceSpan=r,this.valueSourceSpan=i,this.expSourceSpan=a}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitExpansionCase(this,t)}}]),e}(),Ja=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(g.a)(this,n),(s=t.call(this,i,o)).name=e,s.value=r,s.valueSpan=a,s}return Object(b.a)(n,[{key:"visit",value:function(e,t){return e.visitAttribute(this,t)}}]),n}(Ga),$a=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6?arguments[6]:void 0;return Object(g.a)(this,n),(o=t.call(this,a,l)).name=e,o.attrs=r,o.children=i,o.startSourceSpan=s,o.endSourceSpan=c,o}return Object(b.a)(n,[{key:"visit",value:function(e,t){return e.visitElement(this,t)}}]),n}(Ga),Za=function(){function e(t,n){Object(g.a)(this,e),this.value=t,this.sourceSpan=n}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitComment(this,t)}}]),e}();function eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],i=e.visit?function(t){return e.visit(t,n)||t.visit(e,n)}:function(t){return t.visit(e,n)};return t.forEach((function(e){var t=i(e);t&&r.push(t)})),r}var to;!function(e){e[e.TAG_OPEN_START=0]="TAG_OPEN_START",e[e.TAG_OPEN_END=1]="TAG_OPEN_END",e[e.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",e[e.TAG_CLOSE=3]="TAG_CLOSE",e[e.TEXT=4]="TEXT",e[e.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",e[e.RAW_TEXT=6]="RAW_TEXT",e[e.COMMENT_START=7]="COMMENT_START",e[e.COMMENT_END=8]="COMMENT_END",e[e.CDATA_START=9]="CDATA_START",e[e.CDATA_END=10]="CDATA_END",e[e.ATTR_NAME=11]="ATTR_NAME",e[e.ATTR_QUOTE=12]="ATTR_QUOTE",e[e.ATTR_VALUE=13]="ATTR_VALUE",e[e.DOC_TYPE=14]="DOC_TYPE",e[e.EXPANSION_FORM_START=15]="EXPANSION_FORM_START",e[e.EXPANSION_CASE_VALUE=16]="EXPANSION_CASE_VALUE",e[e.EXPANSION_CASE_EXP_START=17]="EXPANSION_CASE_EXP_START",e[e.EXPANSION_CASE_EXP_END=18]="EXPANSION_CASE_EXP_END",e[e.EXPANSION_FORM_END=19]="EXPANSION_FORM_END",e[e.EOF=20]="EOF"}(to||(to={}));var no=function e(t,n,r){Object(g.a)(this,e),this.type=t,this.parts=n,this.sourceSpan=r},ro=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,i,e)).tokenType=r,a}return n}(dn),io=function e(t,n,r){Object(g.a)(this,e),this.tokens=t,this.errors=n,this.nonNormalizedIcuExpressions=r};var ao,oo=/\r\n?/g;function so(e){var t=0===e?"EOF":String.fromCharCode(e);return'Unexpected character "'.concat(t,'"')}function co(e){return'Unknown entity "'.concat(e,'" - use the "&#<decimal>;" or  "&#x<hex>;" syntax')}!function(e){e.HEX="hexadecimal",e.DEC="decimal"}(ao||(ao={}));var lo=function e(t){Object(g.a)(this,e),this.error=t},uo=function(){function e(t,n,r){Object(g.a)(this,e),this._getTagDefinition=n,this._currentTokenStart=null,this._currentTokenType=null,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this.nonNormalizedIcuExpressions=[],this._tokenizeIcu=r.tokenizeExpansionForms||!1,this._interpolationConfig=r.interpolationConfig||Hr,this._leadingTriviaCodePoints=r.leadingTriviaChars&&r.leadingTriviaChars.map((function(e){return e.codePointAt(0)||0}));var i=r.range||{endPos:t.content.length,startPos:0,startLine:0,startCol:0};this._cursor=r.escapedString?new _o(t,i):new vo(t,i),this._preserveLineEndings=r.preserveLineEndings||!1,this._escapedString=r.escapedString||!1,this._i18nNormalizeLineEndingsInICUs=r.i18nNormalizeLineEndingsInICUs||!1;try{this._cursor.init()}catch(a){this.handleError(a)}}return Object(b.a)(e,[{key:"_processCarriageReturns",value:function(e){return this._preserveLineEndings?e:e.replace(oo,"\n")}},{key:"tokenize",value:function(){for(;0!==this._cursor.peek();){var e=this._cursor.clone();try{this._attemptCharCode(60)?this._attemptCharCode(33)?this._attemptCharCode(91)?this._consumeCdata(e):this._attemptCharCode(45)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(Vt)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(t){this.handleError(t)}}this._beginToken(to.EOF),this._endToken([])}},{key:"_tokenizeExpansionForm",value:function(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(this._cursor.peek()!==en&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===en){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}},{key:"_beginToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._cursor.clone();this._currentTokenStart=t,this._currentTokenType=e}},{key:"_endToken",value:function(e,t){if(null===this._currentTokenStart)throw new ro("Programming error - attempted to end a token when there was no start to the token",this._currentTokenType,this._cursor.getSpan(t));if(null===this._currentTokenType)throw new ro("Programming error - attempted to end a token which has no token type",null,this._cursor.getSpan(this._currentTokenStart));var n=new no(this._currentTokenType,e,this._cursor.getSpan(this._currentTokenStart,this._leadingTriviaCodePoints));return this.tokens.push(n),this._currentTokenStart=null,this._currentTokenType=null,n}},{key:"_createError",value:function(e,t){this._isInExpansionForm()&&(e+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');var n=new ro(e,this._currentTokenType,t);return this._currentTokenStart=null,this._currentTokenType=null,new lo(n)}},{key:"handleError",value:function(e){if(e instanceof yo&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),!(e instanceof lo))throw e;this.errors.push(e.error)}},{key:"_attemptCharCode",value:function(e){return this._cursor.peek()===e&&(this._cursor.advance(),!0)}},{key:"_attemptCharCodeCaseInsensitive",value:function(e){return t=this._cursor.peek(),n=e,go(t)==go(n)&&(this._cursor.advance(),!0);var t,n}},{key:"_requireCharCode",value:function(e){var t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(t))}},{key:"_attemptStr",value:function(e){var t=e.length;if(this._cursor.charsLeft()<t)return!1;for(var n=this._cursor.clone(),r=0;r<t;r++)if(!this._attemptCharCode(e.charCodeAt(r)))return this._cursor=n,!1;return!0}},{key:"_attemptStrCaseInsensitive",value:function(e){for(var t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}},{key:"_requireStr",value:function(e){var t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(t))}},{key:"_attemptCharCodeUntilFn",value:function(e){for(;!e(this._cursor.peek());)this._cursor.advance()}},{key:"_requireCharCodeUntilFn",value:function(e,t){var n=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(n)<t)throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(n))}},{key:"_attemptUntilChar",value:function(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}},{key:"_readChar",value:function(e){if(e&&38===this._cursor.peek())return this._decodeEntity();var t=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),t}},{key:"_decodeEntity",value:function(){var e=this._cursor.clone();if(this._cursor.advance(),!this._attemptCharCode(35)){var t=this._cursor.clone();if(this._attemptCharCodeUntilFn(mo),this._cursor.peek()!=Yt)return this._cursor=t,"&";var n=this._cursor.getChars(t);this._cursor.advance();var r=k[n];if(!r)throw this._createError(co(n),this._cursor.getSpan(e));return r}var i=this._attemptCharCode(120)||this._attemptCharCode(88),a=this._cursor.clone();if(this._attemptCharCodeUntilFn(fo),this._cursor.peek()!=Yt){this._cursor.advance();var o=i?ao.HEX:ao.DEC;throw this._createError((s=o,c=this._cursor.getChars(e),'Unable to parse entity "'.concat(c,'" - ').concat(s,' character reference entities must end with ";"')),this._cursor.getSpan())}var s,c,l=this._cursor.getChars(a);this._cursor.advance();try{var u=parseInt(l,i?16:10);return String.fromCharCode(u)}catch(d){throw this._createError(co(this._cursor.getChars(e)),this._cursor.getSpan())}}},{key:"_consumeRawText",value:function(e,t){this._beginToken(e?to.ESCAPABLE_RAW_TEXT:to.RAW_TEXT);for(var n=[];;){var r=this._cursor.clone(),i=t();if(this._cursor=r,i)break;n.push(this._readChar(e))}return this._endToken([this._processCarriageReturns(n.join(""))])}},{key:"_consumeComment",value:function(e){var t=this;this._beginToken(to.COMMENT_START,e),this._requireCharCode(45),this._endToken([]),this._consumeRawText(!1,(function(){return t._attemptStr("--\x3e")})),this._beginToken(to.COMMENT_END),this._requireStr("--\x3e"),this._endToken([])}},{key:"_consumeCdata",value:function(e){var t=this;this._beginToken(to.CDATA_START,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,(function(){return t._attemptStr("]]>")})),this._beginToken(to.CDATA_END),this._requireStr("]]>"),this._endToken([])}},{key:"_consumeDocType",value:function(e){this._beginToken(to.DOC_TYPE,e);var t=this._cursor.clone();this._attemptUntilChar(Qt);var n=this._cursor.getChars(t);this._cursor.advance(),this._endToken([n])}},{key:"_consumePrefixAndName",value:function(){for(var e,t,n=this._cursor.clone(),r="";this._cursor.peek()!==Gt&&!(((e=this._cursor.peek())<Jt||$t<e)&&(e<65||90<e)&&(e<48||e>57));)this._cursor.advance();return this._cursor.peek()===Gt?(r=this._cursor.getChars(n),this._cursor.advance(),t=this._cursor.clone()):t=n,this._requireCharCodeUntilFn(ho,""===r?0:1),[r,this._cursor.getChars(t)]}},{key:"_consumeTagOpen",value:function(e){var t,n,r,a=this.tokens.length,o=this._cursor.clone();try{if(!rn(this._cursor.peek()))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(e));for(n=(r=this._consumeTagOpenStart(e)).parts[0],t=r.parts[1],this._attemptCharCodeUntilFn(po);this._cursor.peek()!==Vt&&this._cursor.peek()!==Qt;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(po),this._attemptCharCode(Xt)&&(this._attemptCharCodeUntilFn(po),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(po);this._consumeTagOpenEnd()}catch(c){if(c instanceof lo)return this._cursor=o,r&&(this.tokens.length=a),this._beginToken(to.TEXT,e),void this._endToken(["<"]);throw c}var s=this._getTagDefinition(t).contentType;s===i.RAW_TEXT?this._consumeRawTextWithTagClose(n,t,!1):s===i.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(n,t,!0)}},{key:"_consumeRawTextWithTagClose",value:function(e,t,n){var r=this;this._consumeRawText(n,(function(){return!!r._attemptCharCode(60)&&(!!r._attemptCharCode(Vt)&&(r._attemptCharCodeUntilFn(po),!!r._attemptStrCaseInsensitive(t)&&(r._attemptCharCodeUntilFn(po),r._attemptCharCode(Qt))))}));this._beginToken(to.TAG_CLOSE),this._requireCharCodeUntilFn((function(e){return e===Qt}),3),this._cursor.advance(),this._endToken([e,t])}},{key:"_consumeTagOpenStart",value:function(e){this._beginToken(to.TAG_OPEN_START,e);var t=this._consumePrefixAndName();return this._endToken(t)}},{key:"_consumeAttributeName",value:function(){var e=this._cursor.peek();if(39===e||34===e)throw this._createError(so(e),this._cursor.getSpan());this._beginToken(to.ATTR_NAME);var t=this._consumePrefixAndName();this._endToken(t)}},{key:"_consumeAttributeValue",value:function(){var e;if(39===this._cursor.peek()||34===this._cursor.peek()){this._beginToken(to.ATTR_QUOTE);var t=this._cursor.peek();this._cursor.advance(),this._endToken([String.fromCodePoint(t)]),this._beginToken(to.ATTR_VALUE);for(var n=[];this._cursor.peek()!==t;)n.push(this._readChar(!0));e=n.join(""),this._endToken([this._processCarriageReturns(e)]),this._beginToken(to.ATTR_QUOTE),this._cursor.advance(),this._endToken([String.fromCodePoint(t)])}else{this._beginToken(to.ATTR_VALUE);var r=this._cursor.clone();this._requireCharCodeUntilFn(ho,1),e=this._cursor.getChars(r),this._endToken([this._processCarriageReturns(e)])}}},{key:"_consumeTagOpenEnd",value:function(){var e=this._attemptCharCode(Vt)?to.TAG_OPEN_END_VOID:to.TAG_OPEN_END;this._beginToken(e),this._requireCharCode(Qt),this._endToken([])}},{key:"_consumeTagClose",value:function(e){this._beginToken(to.TAG_CLOSE,e),this._attemptCharCodeUntilFn(po);var t=this._consumePrefixAndName();this._attemptCharCodeUntilFn(po),this._requireCharCode(Qt),this._endToken(t)}},{key:"_consumeExpansionFormStart",value:function(){this._beginToken(to.EXPANSION_FORM_START),this._requireCharCode(Zt),this._endToken([]),this._expansionCaseStack.push(to.EXPANSION_FORM_START),this._beginToken(to.RAW_TEXT);var e=this._readUntil(zt),t=this._processCarriageReturns(e);if(this._escapedString||this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{var n=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(n)}this._requireCharCode(zt),this._attemptCharCodeUntilFn(po),this._beginToken(to.RAW_TEXT);var r=this._readUntil(zt);this._endToken([r]),this._requireCharCode(zt),this._attemptCharCodeUntilFn(po)}},{key:"_consumeExpansionCaseStart",value:function(){this._beginToken(to.EXPANSION_CASE_VALUE);var e=this._readUntil(Zt).trim();this._endToken([e]),this._attemptCharCodeUntilFn(po),this._beginToken(to.EXPANSION_CASE_EXP_START),this._requireCharCode(Zt),this._endToken([]),this._attemptCharCodeUntilFn(po),this._expansionCaseStack.push(to.EXPANSION_CASE_EXP_START)}},{key:"_consumeExpansionCaseEnd",value:function(){this._beginToken(to.EXPANSION_CASE_EXP_END),this._requireCharCode(en),this._endToken([]),this._attemptCharCodeUntilFn(po),this._expansionCaseStack.pop()}},{key:"_consumeExpansionFormEnd",value:function(){this._beginToken(to.EXPANSION_FORM_END),this._requireCharCode(en),this._endToken([]),this._expansionCaseStack.pop()}},{key:"_consumeText",value:function(){var e=this._cursor.clone();this._beginToken(to.TEXT,e);var t=[];do{this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(t.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._inInterpolation&&this._attemptStr(this._interpolationConfig.end)?(t.push(this._interpolationConfig.end),this._inInterpolation=!1):t.push(this._readChar(!0))}while(!this._isTextEnd());this._endToken([this._processCarriageReturns(t.join(""))])}},{key:"_isTextEnd",value:function(){if(60===this._cursor.peek()||0===this._cursor.peek())return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(this.isExpansionFormStart())return!0;if(this._cursor.peek()===en&&this._isInExpansionCase())return!0}return!1}},{key:"_readUntil",value:function(e){var t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}},{key:"_isInExpansionCase",value:function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===to.EXPANSION_CASE_EXP_START}},{key:"_isInExpansionForm",value:function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===to.EXPANSION_FORM_START}},{key:"isExpansionFormStart",value:function(){if(this._cursor.peek()!==Zt)return!1;if(this._interpolationConfig){var e=this._cursor.clone(),t=this._attemptStr(this._interpolationConfig.start);return this._cursor=e,!t}return!0}}]),e}();function po(e){return!tn(e)||0===e}function ho(e){return tn(e)||e===Qt||e===Vt||39===e||34===e||e===Xt}function fo(e){return e==Yt||0==e||!function(e){return e>=Jt&&e<=102||e>=65&&e<=70||nn(e)}(e)}function mo(e){return e==Yt||0==e||!rn(e)}function go(e){return e>=Jt&&e<=$t?e-Jt+65:e}function bo(e){for(var t=[],n=void 0,r=0;r<e.length;r++){var i=e[r];n&&n.type==to.TEXT&&i.type==to.TEXT?(n.parts[0]+=i.parts[0],n.sourceSpan.end=i.sourceSpan.end):(n=i,t.push(n))}return t}var vo=function(){function e(t,n){if(Object(g.a)(this,e),t instanceof e){this.file=t.file,this.input=t.input,this.end=t.end;var r=t.state;this.state={peek:r.peek,offset:r.offset,line:r.line,column:r.column}}else{if(!n)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=t,this.input=t.content,this.end=n.endPos,this.state={peek:-1,offset:n.startPos,line:n.startLine,column:n.startCol}}}return Object(b.a)(e,[{key:"clone",value:function(){return new e(this)}},{key:"peek",value:function(){return this.state.peek}},{key:"charsLeft",value:function(){return this.end-this.state.offset}},{key:"diff",value:function(e){return this.state.offset-e.state.offset}},{key:"advance",value:function(){this.advanceState(this.state)}},{key:"init",value:function(){this.updatePeek(this.state)}},{key:"getSpan",value:function(e,t){var n=e=e||this;if(t)for(;this.diff(e)>0&&-1!==t.indexOf(e.peek());)n===e&&(e=e.clone()),e.advance();var r=this.locationFromCursor(e),i=this.locationFromCursor(this),a=n!==e?this.locationFromCursor(n):r;return new un(r,i,a)}},{key:"getChars",value:function(e){return this.input.substring(e.state.offset,this.state.offset)}},{key:"charAt",value:function(e){return this.input.charCodeAt(e)}},{key:"advanceState",value:function(e){if(e.offset>=this.end)throw this.state=e,new yo('Unexpected character "EOF"',this);var t=this.charAt(e.offset);t===Ht?(e.line++,e.column=0):an(t)||e.column++,e.offset++,this.updatePeek(e)}},{key:"updatePeek",value:function(e){e.peek=e.offset>=this.end?0:this.charAt(e.offset)}},{key:"locationFromCursor",value:function(e){return new cn(e.file,e.state.offset,e.state.line,e.state.column)}}]),e}(),_o=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i;return Object(g.a)(this,n),e instanceof n?(i=t.call(this,e)).internalState=Object.assign({},e.internalState):(i=t.call(this,e,r)).internalState=i.state,Object(o.a)(i)}return Object(b.a)(n,[{key:"advance",value:function(){this.state=this.internalState,Object(d.a)(Object(p.a)(n.prototype),"advance",this).call(this),this.processEscapeSequence()}},{key:"init",value:function(){Object(d.a)(Object(p.a)(n.prototype),"init",this).call(this),this.processEscapeSequence()}},{key:"clone",value:function(){return new n(this)}},{key:"getChars",value:function(e){for(var t=e.clone(),n="";t.internalState.offset<this.internalState.offset;)n+=String.fromCodePoint(t.peek()),t.advance();return n}},{key:"processEscapeSequence",value:function(){var e=this,t=function(){return e.internalState.peek};if(92===t())if(this.internalState=Object.assign({},this.state),this.advanceState(this.internalState),110===t())this.state.peek=Ht;else if(114===t())this.state.peek=13;else if(118===t())this.state.peek=11;else if(116===t())this.state.peek=9;else if(98===t())this.state.peek=8;else if(102===t())this.state.peek=12;else if(117===t())if(this.advanceState(this.internalState),t()===Zt){this.advanceState(this.internalState);for(var n=this.clone(),r=0;t()!==en;)this.advanceState(this.internalState),r++;this.state.peek=this.decodeHexDigits(n,r)}else{var i=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(i,4)}else if(120===t()){this.advanceState(this.internalState);var a=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(a,2)}else if(on(t())){for(var o="",s=0,c=this.clone();on(t())&&s<3;)c=this.clone(),o+=String.fromCodePoint(t()),this.advanceState(this.internalState),s++;this.state.peek=parseInt(o,8),this.internalState=c.internalState}else an(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}},{key:"decodeHexDigits",value:function(e,t){var n=this.input.substr(e.internalState.offset,t),r=parseInt(n,16);if(isNaN(r))throw e.state=e.internalState,new yo("Invalid hexadecimal escape sequence",e);return r}}]),n}(vo),yo=function e(t,n){Object(g.a)(this,e),this.msg=t,this.cursor=n},Oo=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(g.a)(this,n),(a=t.call(this,r,i)).elementName=e,a}return Object(b.a)(n,null,[{key:"create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dn),xo=function e(t,n){Object(g.a)(this,e),this.rootNodes=t,this.errors=n},Eo=function(){function e(t){Object(g.a)(this,e),this.getTagDefinition=t}return Object(b.a)(e,[{key:"parse",value:function(e,t,n){var r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new uo(new ln(e,t),n,r);return i.tokenize(),new io(bo(i.tokens),i.errors,i.nonNormalizedIcuExpressions)}(e,t,this.getTagDefinition,n),i=new ko(r.tokens,this.getTagDefinition);return i.build(),new xo(i.rootNodes,r.errors.concat(i.errors))}}]),e}(),ko=function(){function e(t,n){Object(g.a)(this,e),this.tokens=t,this.getTagDefinition=n,this._index=-1,this._elementStack=[],this.rootNodes=[],this.errors=[],this._advance()}return Object(b.a)(e,[{key:"build",value:function(){for(;this._peek.type!==to.EOF;)this._peek.type===to.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===to.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===to.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===to.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===to.TEXT||this._peek.type===to.RAW_TEXT||this._peek.type===to.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===to.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance()}},{key:"_advance",value:function(){var e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}},{key:"_advanceIf",value:function(e){return this._peek.type===e?this._advance():null}},{key:"_consumeCdata",value:function(e){this._consumeText(this._advance()),this._advanceIf(to.CDATA_END)}},{key:"_consumeComment",value:function(e){var t=this._advanceIf(to.RAW_TEXT);this._advanceIf(to.COMMENT_END);var n=null!=t?t.parts[0].trim():null;this._addToParent(new Za(n,e.sourceSpan))}},{key:"_consumeExpansion",value:function(e){for(var t=this._advance(),n=this._advance(),r=[];this._peek.type===to.EXPANSION_CASE_VALUE;){var i=this._parseExpansionCase();if(!i)return;r.push(i)}if(this._peek.type===to.EXPANSION_FORM_END){var a=new un(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Xa(t.parts[0],n.parts[0],r,a,t.sourceSpan)),this._advance()}else this.errors.push(Oo.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."))}},{key:"_parseExpansionCase",value:function(){var t=this._advance();if(this._peek.type!==to.EXPANSION_CASE_EXP_START)return this.errors.push(Oo.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;var n=this._advance(),r=this._collectExpansionExpTokens(n);if(!r)return null;var i=this._advance();r.push(new no(to.EOF,[],i.sourceSpan));var a=new e(r,this.getTagDefinition);if(a.build(),a.errors.length>0)return this.errors=this.errors.concat(a.errors),null;var o=new un(t.sourceSpan.start,i.sourceSpan.end,t.sourceSpan.fullStart),s=new un(n.sourceSpan.start,i.sourceSpan.end,n.sourceSpan.fullStart);return new Qa(t.parts[0],a.rootNodes,o,t.sourceSpan,s)}},{key:"_collectExpansionExpTokens",value:function(e){for(var t=[],n=[to.EXPANSION_CASE_EXP_START];;){if(this._peek.type!==to.EXPANSION_FORM_START&&this._peek.type!==to.EXPANSION_CASE_EXP_START||n.push(this._peek.type),this._peek.type===to.EXPANSION_CASE_EXP_END){if(!Co(n,to.EXPANSION_CASE_EXP_START))return this.errors.push(Oo.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(n.pop(),0==n.length)return t}if(this._peek.type===to.EXPANSION_FORM_END){if(!Co(n,to.EXPANSION_FORM_START))return this.errors.push(Oo.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;n.pop()}if(this._peek.type===to.EOF)return this.errors.push(Oo.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}},{key:"_consumeText",value:function(e){var t=e.parts[0];if(t.length>0&&"\n"==t[0]){var n=this._getParentElement();null!=n&&0==n.children.length&&this.getTagDefinition(n.name).ignoreFirstLf&&(t=t.substring(1))}t.length>0&&this._addToParent(new Ya(t,e.sourceSpan))}},{key:"_closeVoidElement",value:function(){var e=this._getParentElement();e&&this.getTagDefinition(e.name).isVoid&&this._elementStack.pop()}},{key:"_consumeStartTag",value:function(e){for(var t=e.parts[0],n=e.parts[1],r=[];this._peek.type===to.ATTR_NAME;)r.push(this._consumeAttr(this._advance()));var i=this._getElementFullName(t,n,this._getParentElement()),a=!1;if(this._peek.type===to.TAG_OPEN_END_VOID){this._advance(),a=!0;var o=this.getTagDefinition(i);o.canSelfClose||null!==x(i)||o.isVoid||this.errors.push(Oo.create(i,e.sourceSpan,'Only void and foreign elements can be self closed "'.concat(e.parts[1],'"')))}else this._peek.type===to.TAG_OPEN_END&&(this._advance(),a=!1);var s=this._peek.sourceSpan.start,c=new un(e.sourceSpan.start,s,e.sourceSpan.fullStart),l=new un(e.sourceSpan.start,s,e.sourceSpan.fullStart),u=new $a(i,r,[],c,l,void 0);this._pushElement(u),a&&this._popElement(i,c)}},{key:"_pushElement",value:function(e){var t=this._getParentElement();t&&this.getTagDefinition(t.name).isClosedByChild(e.name)&&this._elementStack.pop(),this._addToParent(e),this._elementStack.push(e)}},{key:"_consumeEndTag",value:function(e){var t=this._getElementFullName(e.parts[0],e.parts[1],this._getParentElement());if(this.getTagDefinition(t).isVoid)this.errors.push(Oo.create(t,e.sourceSpan,'Void elements do not have end tags "'.concat(e.parts[1],'"')));else if(!this._popElement(t,e.sourceSpan)){var n='Unexpected closing tag "'.concat(t,'". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags');this.errors.push(Oo.create(t,e.sourceSpan,n))}}},{key:"_popElement",value:function(e,t){for(var n=this._elementStack.length-1;n>=0;n--){var r=this._elementStack[n];if(r.name==e)return r.endSourceSpan=t,this._elementStack.splice(n,this._elementStack.length-n),!0;if(!this.getTagDefinition(r.name).closedByParent)return!1}return!1}},{key:"_consumeAttr",value:function(e){var t=E(e.parts[0],e.parts[1]),n=e.sourceSpan.end,r="",i=void 0;if(this._peek.type===to.ATTR_QUOTE&&this._advance(),this._peek.type===to.ATTR_VALUE){var a=this._advance();r=a.parts[0],n=a.sourceSpan.end,i=a.sourceSpan}this._peek.type===to.ATTR_QUOTE&&(n=this._advance().sourceSpan.end);return new Ja(t,r,new un(e.sourceSpan.start,n,e.sourceSpan.fullStart),i)}},{key:"_getParentElement",value:function(){return this._elementStack.length>0?this._elementStack[this._elementStack.length-1]:null}},{key:"_addToParent",value:function(e){var t=this._getParentElement();null!=t?t.children.push(e):this.rootNodes.push(e)}},{key:"_getElementFullName",value:function(e,t,n){if(""===e&&""===(e=this.getTagDefinition(t).implicitNamespacePrefix||"")&&null!=n){var r=v(n.name)[1];this.getTagDefinition(r).preventNamespaceInheritance||(e=x(n.name))}return E(e,t)}}]),e}();function Co(e,t){return e.length>0&&e[e.length-1]===t}var wo=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(g.a)(this,n),t.call(this,I)}return Object(b.a)(n,[{key:"parse",value:function(e,t,r){return Object(d.a)(Object(p.a)(n.prototype),"parse",this).call(this,e,t,r)}}]),n}(Eo),So="ngPreserveWhitespaces",Io=new Set(["pre","template","textarea","script","style"]),To=" \f\n\r\t\v\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff",Ao=new RegExp("[^".concat(To,"]")),Po=new RegExp("[".concat(To,"]{2,}"),"g");function Mo(e){return e.replace(new RegExp("\ue500","g")," ")}var Do=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitElement",value:function(e,t){return Io.has(e.name)||e.attrs.some((function(e){return e.name===So}))?new $a(e.name,eo(this,e.attrs),e.children,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n):new $a(e.name,e.attrs,(n=this,r=e.children,i=[],r.forEach((function(e,t){var a={prev:r[t-1],next:r[t+1]},o=e.visit(n,a);o&&i.push(o)})),i),e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);var n,r,i}},{key:"visitAttribute",value:function(e,t){return e.name!==So?e:null}},{key:"visitText",value:function(e,t){var n=e.value.match(Ao),r=t&&(t.prev instanceof Xa||t.next instanceof Xa);return n||r?new Ya(Mo(e.value).replace(Po," "),e.sourceSpan,e.i18n):null}},{key:"visitComment",value:function(e,t){return e}},{key:"visitExpansion",value:function(e,t){return e}},{key:"visitExpansionCase",value:function(e,t){return e}}]),e}();var jo,Ro=function(){function e(t,n,r){Object(g.a)(this,e),this.value=t,this.ngContentIndex=n,this.sourceSpan=r}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),e}(),Lo=function(){function e(t,n,r){Object(g.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitAttr(this,t)}}]),e}(),No=(r={},Object(a.a)(r,4,4),Object(a.a)(r,1,1),Object(a.a)(r,2,2),Object(a.a)(r,0,0),Object(a.a)(r,3,3),function(){function e(t,n,r,i,a,o,s,c,l,u,d,p,h){Object(g.a)(this,e),this.name=t,this.attrs=n,this.inputs=r,this.outputs=i,this.references=a,this.directives=o,this.providers=s,this.hasViewContainer=c,this.queryMatches=l,this.children=u,this.ngContentIndex=d,this.sourceSpan=p,this.endSourceSpan=h}return Object(b.a)(e,[{key:"visit",value:function(e,t){return e.visitElement(this,t)}}]),e}());!function(e){e[e.PublicService=0]="PublicService",e[e.PrivateService=1]="PrivateService",e[e.Component=2]="Component",e[e.Directive=3]="Directive",e[e.Builtin=4]="Builtin"}(jo||(jo={}));function Bo(e){if(null==e||0===e.length||"/"==e[0])return!1;var t=e.match(Uo);return null===t||"package"==t[1]||"asset"==t[1]}var Uo=/^([^:/?#]+):/,Fo=".",qo="attr",Wo="class",Ho="style",Ko="animate-",zo=function(){function e(t,n,r,i,a){if(Object(g.a)(this,e),this._exprParser=t,this._interpolationConfig=n,this._schemaRegistry=r,this.errors=a,this.pipesByName=null,this._usedPipes=new Map,i){var o=new Map;i.forEach((function(e){return o.set(e.name,e)})),this.pipesByName=o}}return Object(b.a)(e,[{key:"interpolationConfig",get:function(){return this._interpolationConfig}},{key:"getUsedPipes",value:function(){return Array.from(this._usedPipes.values())}},{key:"createBoundHostProperties",value:function(e,t){var n=this;if(e.hostProperties){var r=[];return Object.keys(e.hostProperties).forEach((function(i){var a=e.hostProperties[i];"string"==typeof a?n.parsePropertyBinding(i,a,!0,t,t.start.offset,void 0,[],r):n._reportError('Value of the host property binding "'.concat(i,'" needs to be a string representing an expression but got "').concat(a,'" (').concat(typeof a,")"),t)})),r}return null}},{key:"createDirectiveHostPropertyAsts",value:function(e,t,n){var r=this,i=this.createBoundHostProperties(e,n);return i&&i.map((function(e){return r.createBoundElementProperty(t,e)}))}},{key:"createDirectiveHostEventAsts",value:function(e,t){var n=this;if(e.hostListeners){var r=[];return Object.keys(e.hostListeners).forEach((function(i){var a=e.hostListeners[i];"string"==typeof a?n.parseEvent(i,a,t,t,[],r):n._reportError('Value of the host listener "'.concat(i,'" needs to be a string representing an expression but got "').concat(a,'" (').concat(typeof a,")"),t)})),r}return null}},{key:"parseInterpolation",value:function(e,t){var n=t.start.toString();try{var r=this._exprParser.parseInterpolation(e,n,t.start.offset,this._interpolationConfig);return r&&this._reportExpressionParserErrors(r.errors,t),this._checkPipes(r,t),r}catch(i){return this._reportError("".concat(i),t),this._exprParser.wrapLiteralPrimitive("ERROR",n,t.start.offset)}}},{key:"parseInlineTemplateBinding",value:function(e,t,n,r,i,a,o){var s,c=n.start.offset+"*".length,l=this._parseTemplateBindings(e,t,n,c,r),d=Object(u.a)(l);try{for(d.s();!(s=d.n()).done;){var p=s.value,h=Xo(n,p.sourceSpan),f=p.key.source,m=Xo(n,p.key.span);if(p instanceof qi){var g=p.value?p.value.source:"$implicit",b=p.value?Xo(n,p.value.span):void 0;o.push(new Yi(f,g,h,m,b))}else if(p.value){var v=Xo(n,p.value.ast.sourceSpan);this._parsePropertyAst(f,p.value,n,v,i,a)}else i.push([f,""]),this.parseLiteralAttr(f,null,n,r,void 0,i,a)}}catch(_){d.e(_)}finally{d.f()}}},{key:"_parseTemplateBindings",value:function(e,t,n,r,i){var a=this,o=n.start.toString();try{var s=this._exprParser.parseTemplateBindings(e,t,o,r,i);return this._reportExpressionParserErrors(s.errors,n),s.templateBindings.forEach((function(e){e.value instanceof Fi&&a._checkPipes(e.value,n)})),s.warnings.forEach((function(e){a._reportError(e,n,sn.WARNING)})),s.templateBindings}catch(c){return this._reportError("".concat(c),n),[]}}},{key:"parseLiteralAttr",value:function(e,t,n,r,i,a,o){Go(e)?(e=e.substring(1),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',n,sn.ERROR),this._parseAnimation(e,t,n,r,i,a,o)):o.push(new Vi(e,this._exprParser.wrapLiteralPrimitive(t,"",r),pi.LITERAL_ATTR,n,i))}},{key:"parsePropertyBinding",value:function(e,t,n,r,i,a,o,s){0===e.length&&this._reportError("Property name is missing in binding",r);var c=!1;e.startsWith(Ko)?(c=!0,e=e.substring(Ko.length)):Go(e)&&(c=!0,e=e.substring(1)),c?this._parseAnimation(e,t,r,i,a,o,s):this._parsePropertyAst(e,this._parseBinding(t,n,a||r,i),r,a,o,s)}},{key:"parsePropertyInterpolation",value:function(e,t,n,r,i,a){var o=this.parseInterpolation(t,r||n);return!!o&&(this._parsePropertyAst(e,o,n,r,i,a),!0)}},{key:"_parsePropertyAst",value:function(e,t,n,r,i,a){i.push([e,t.source]),a.push(new Vi(e,t,pi.DEFAULT,n,r))}},{key:"_parseAnimation",value:function(e,t,n,r,i,a,o){0===e.length&&this._reportError("Animation trigger is missing",n);var s=this._parseBinding(t||"undefined",!1,i||n,r);a.push([e,s.source]),o.push(new Vi(e,s,pi.ANIMATION,n,i))}},{key:"_parseBinding",value:function(e,t,n,r){var i=(n&&n.start||"(unknown)").toString();try{var a=t?this._exprParser.parseSimpleBinding(e,i,r,this._interpolationConfig):this._exprParser.parseBinding(e,i,r,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,n),this._checkPipes(a,n),a}catch(o){return this._reportError("".concat(o),n),this._exprParser.wrapLiteralPrimitive("ERROR",i,r)}}},{key:"createBoundElementProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t.isAnimation)return new Xi(t.name,4,L.NONE,t.expression,null,t.sourceSpan,t.valueSpan);var i=null,a=void 0,o=null,s=t.name.split(Fo),c=void 0;if(s.length>1)if(s[0]==qo){o=s.slice(1).join(Fo),n||this._validatePropertyOrAttributeName(o,t.sourceSpan,!0),c=Yo(this._schemaRegistry,e,o,!0);var l=o.indexOf(":");if(l>-1){var u=o.substring(0,l),d=o.substring(l+1);o=E(u,d)}a=1}else s[0]==Wo?(o=s[1],a=2,c=[L.NONE]):s[0]==Ho&&(i=s.length>2?s[2]:null,o=s[1],a=3,c=[L.STYLE]);if(null===o){var p=this._schemaRegistry.getMappedPropName(t.name);o=r?p:t.name,c=Yo(this._schemaRegistry,e,p,!1),a=0,n||this._validatePropertyOrAttributeName(p,t.sourceSpan,!1)}return new Xi(o,a,c[0],t.expression,i,t.sourceSpan,t.valueSpan)}},{key:"parseEvent",value:function(e,t,n,r,i,a){0===e.length&&this._reportError("Event name is missing in binding",n),Go(e)?(e=e.substr(1),this._parseAnimationEvent(e,t,n,r,a)):this._parseRegularEvent(e,t,n,r,i,a)}},{key:"calcPossibleSecurityContexts",value:function(e,t,n){var r=this._schemaRegistry.getMappedPropName(t);return Yo(this._schemaRegistry,e,r,n)}},{key:"_parseAnimationEvent",value:function(e,t,n,r,i){var a=lt(e,".",[e,""]),o=a[0],s=a[1].toLowerCase();if(s)switch(s){case"start":case"done":var c=this._parseAction(t,r);i.push(new Gi(o,s,1,c,n,r));break;default:this._reportError('The provided animation output phase value "'.concat(s,'" for "@').concat(o,'" is not supported (use start or done)'),n)}else this._reportError("The animation trigger output event (@".concat(o,") is missing its phase value name (start or done are currently supported)"),n)}},{key:"_parseRegularEvent",value:function(e,t,n,r,i,a){var o=ct(e,[null,e]),s=Object(l.a)(o,2),c=s[0],u=s[1],d=this._parseAction(t,r);i.push([e,d.source]),a.push(new Gi(u,c,0,d,n,r))}},{key:"_parseAction",value:function(e,t){var n=(t&&t.start||"(unknown").toString(),r=t&&t.start?t.start.offset:0;try{var i=this._exprParser.parseAction(e,n,r,this._interpolationConfig);return i&&this._reportExpressionParserErrors(i.errors,t),!i||i.ast instanceof vi?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)):(this._checkPipes(i,t),i)}catch(a){return this._reportError("".concat(a),t),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)}}},{key:"_reportError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;this.errors.push(new dn(t,e,n))}},{key:"_reportExpressionParserErrors",value:function(e,t){var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._reportError(i.message,t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"_checkPipes",value:function(e,t){var n=this;if(e&&this.pipesByName){var r=new Vo;e.visit(r),r.pipes.forEach((function(e,r){var i=n.pipesByName.get(r);i?n._usedPipes.set(r,i):n._reportError("The pipe '".concat(r,"' could not be found"),new un(t.start.moveBy(e.span.start),t.start.moveBy(e.span.end)))}))}}},{key:"_validatePropertyOrAttributeName",value:function(e,t,n){var r=n?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);r.error&&this._reportError(r.msg,t,sn.ERROR)}}]),e}(),Vo=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.apply(this,arguments)).pipes=new Map,e}return Object(b.a)(n,[{key:"visitPipe",value:function(e,t){return this.pipes.set(e.name,e),e.exp.visit(this),this.visitAll(e.args,t),null}}]),n}(Hi);function Go(e){return"@"==e[0]}function Yo(e,t,n,r){var i=[];return M.parse(t).forEach((function(t){var a=t.element?[t.element]:e.allKnownElementNames(),o=new Set(t.notSelectors.filter((function(e){return e.isElementSelector()})).map((function(e){return e.element}))),s=a.filter((function(e){return!o.has(e)}));i.push.apply(i,Object(m.a)(s.map((function(t){return e.securityContext(t,n,r)}))))})),0===i.length?[L.NONE]:Array.from(new Set(i)).sort()}function Xo(e,t){var n=t.start-e.start.offset,r=t.end-e.end.offset;return new un(e.start.moveBy(n),e.end.moveBy(r),e.fullStart.moveBy(n),e.details)}var Qo;function Jo(e){var t=null,n=null,r=null,i=!1,a="";e.attrs.forEach((function(e){var o=e.name.toLowerCase();"select"==o?t=e.value:"href"==o?n=e.value:"rel"==o?r=e.value:"ngNonBindable"==e.name?i=!0:"ngProjectAs"==e.name&&e.value.length>0&&(a=e.value)})),t=function(e){if(null===e||0===e.length)return"*";return e}(t);var o=e.name.toLowerCase(),s=Qo.OTHER;return y(o)?s=Qo.NG_CONTENT:"style"==o?s=Qo.STYLE:"script"==o?s=Qo.SCRIPT:"link"==o&&"stylesheet"==r&&(s=Qo.STYLESHEET),new $o(s,t,n,i,a)}!function(e){e[e.NG_CONTENT=0]="NG_CONTENT",e[e.STYLE=1]="STYLE",e[e.STYLESHEET=2]="STYLESHEET",e[e.SCRIPT=3]="SCRIPT",e[e.OTHER=4]="OTHER"}(Qo||(Qo={}));var $o=function e(t,n,r,i,a){Object(g.a)(this,e),this.type=t,this.selectAttr=n,this.hrefAttr=r,this.nonBindable=i,this.projectAs=a};var Zo;function es(){return Zo||(Zo=M.parse("*")[0]),Zo}var ts=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitElement",value:function(e,t){var n=Jo(e);if(n.type===Qo.SCRIPT||n.type===Qo.STYLE||n.type===Qo.STYLESHEET)return null;var r=e.attrs.map((function(e){return[e.name,e.value]})),i=rs(e.name,r),a=t.findNgContentIndex(i),o=eo(this,e.children,is);return new No(e.name,eo(this,e.attrs),[],[],[],[],[],!1,[],o,a,e.sourceSpan,e.endSourceSpan)}},{key:"visitComment",value:function(e,t){return null}},{key:"visitAttribute",value:function(e,t){return new Lo(e.name,e.value,e.sourceSpan)}},{key:"visitText",value:function(e,t){var n=t.findNgContentIndex(es());return new Ro(e.value,n,e.sourceSpan)}},{key:"visitExpansion",value:function(e,t){return e}},{key:"visitExpansionCase",value:function(e,t){return e}}]),e}();var ns=function(){function e(t,n,r,i){Object(g.a)(this,e),this.isTemplateElement=t,this._ngContentIndexMatcher=n,this._wildcardNgContentIndex=r,this.providerContext=i}return Object(b.a)(e,[{key:"findNgContentIndex",value:function(e){var t=[];return this._ngContentIndexMatcher.match(e,(function(e,n){t.push(n)})),t.sort(),null!=this._wildcardNgContentIndex&&t.push(this._wildcardNgContentIndex),t.length>0?t[0]:null}}],[{key:"create",value:function(t,n,r){var i=new D,a=null,o=n.find((function(e){return e.directive.isComponent}));if(o)for(var s=o.directive.template.ngContentSelectors,c=0;c<s.length;c++){"*"===s[c]?a=c:i.addSelectables(M.parse(s[c]),c)}return new e(t,i,a,r)}}]),e}();function rs(e,t){var n=new M,r=v(e)[1];n.setElement(r);for(var i=0;i<t.length;i++){var a=t[i][0],o=v(a)[1],s=t[i][1];if(n.addAttribute(o,s),"class"==a.toLowerCase())s.trim().split(/\s+/g).forEach((function(e){return n.addClassName(e)}))}return n}var is=new ns(!0,new D,null,null);new ts;function as(e){return e instanceof Fi&&(e=e.ast),e instanceof vi}function os(e){var t=e.charCodeAt(0);if(t==e.charCodeAt(e.length-1)&&(39==t||34==t)){var n=e.substring(1,e.length-1);-1==n.indexOf("'")&&-1==n.indexOf('"')&&(e=n)}return e}function ss(e){return e.replace(/[a-z][A-Z]/g,(function(e){return e.charAt(0)+"-"+e.charAt(1)})).toLowerCase()}var cs,ls=function(){function e(t){Object(g.a)(this,e),this._directiveExpr=t,this._hasInitialValues=!1,this.hasBindings=!1,this.hasBindingsWithPipes=!1,this._classMapInput=null,this._styleMapInput=null,this._singleStyleInputs=null,this._singleClassInputs=null,this._lastStylingInput=null,this._firstStylingInput=null,this._stylesIndex=new Map,this._classesIndex=new Map,this._initialStyleValues=[],this._initialClassValues=[]}return Object(b.a)(e,[{key:"registerBoundInput",value:function(e){var t=null,n=e.name;switch(e.type){case 0:t=this.registerInputBasedOnName(n,e.value,e.sourceSpan);break;case 3:t=this.registerStyleInput(n,!1,e.value,e.sourceSpan,e.unit);break;case 2:t=this.registerClassInput(n,!1,e.value,e.sourceSpan)}return!!t}},{key:"registerInputBasedOnName",value:function(e,t,n){var r=null,i=e.substring(0,6),a="style"===e||"style."===i||"style!"===i;if(a||!a&&("class"===e||"class."===i||"class!"===i)){var o="."!==e.charAt(5),s=e.substr(o?5:6);r=a?this.registerStyleInput(s,o,t,n):this.registerClassInput(s,o,t,n)}return r}},{key:"registerStyleInput",value:function(e,t,n,r,i){if(as(n))return null;var a=ds(e=ss(e)),o=a.property,s=a.hasOverrideFlag,c=a.suffix,l={name:o,suffix:i="string"==typeof i&&0!==i.length?i:c,value:n,sourceSpan:r,hasOverrideFlag:s};return t?this._styleMapInput=l:((this._singleStyleInputs=this._singleStyleInputs||[]).push(l),us(this._stylesIndex,o)),this._lastStylingInput=l,this._firstStylingInput=this._firstStylingInput||l,this._checkForPipes(n),this.hasBindings=!0,l}},{key:"registerClassInput",value:function(e,t,n,r){if(as(n))return null;var i=ds(e),a=i.property,o={name:a,value:n,sourceSpan:r,hasOverrideFlag:i.hasOverrideFlag,suffix:null};if(t){if(this._classMapInput)throw new Error("[class] and [className] bindings cannot be used on the same element simultaneously");this._classMapInput=o}else(this._singleClassInputs=this._singleClassInputs||[]).push(o),us(this._classesIndex,a);return this._lastStylingInput=o,this._firstStylingInput=this._firstStylingInput||o,this._checkForPipes(n),this.hasBindings=!0,o}},{key:"_checkForPipes",value:function(e){e instanceof Fi&&e.ast instanceof Si&&(this.hasBindingsWithPipes=!0)}},{key:"registerStyleAttr",value:function(e){this._initialStyleValues=function(e){for(var t=[],n=0,r=0,i=0,a=0,o=0,s=null,c=!1;n<e.length;)switch(e.charCodeAt(n++)){case 40:r++;break;case 41:r--;break;case 39:c=c||a>0,0===i?i=39:39===i&&92!==e.charCodeAt(n-1)&&(i=0);break;case 34:c=c||a>0,0===i?i=34:34===i&&92!==e.charCodeAt(n-1)&&(i=0);break;case 58:s||0!==r||0!==i||(s=ss(e.substring(o,n-1).trim()),a=n);break;case 59:if(s&&a>0&&0===r&&0===i){var l=e.substring(a,n-1).trim();t.push(s,c?os(l):l),o=n,a=0,s=null,c=!1}}if(s&&a){var u=e.substr(a).trim();t.push(s,c?os(u):u)}return t}(e),this._hasInitialValues=!0}},{key:"registerClassAttr",value:function(e){this._initialClassValues=e.trim().split(/\s+/g),this._hasInitialValues=!0}},{key:"populateInitialStylingAttrs",value:function(e){if(this._initialClassValues.length){e.push(it(1));for(var t=0;t<this._initialClassValues.length;t++)e.push(it(this._initialClassValues[t]))}if(this._initialStyleValues.length){e.push(it(2));for(var n=0;n<this._initialStyleValues.length;n+=2)e.push(it(this._initialStyleValues[n]),it(this._initialStyleValues[n+1]))}}},{key:"assignHostAttrs",value:function(e,t){this._directiveExpr&&(e.length||this._hasInitialValues)&&(this.populateInitialStylingAttrs(e),t.set("hostAttrs",et(e)))}},{key:"buildClassMapInstruction",value:function(e){return this._classMapInput?this._buildMapBasedInstruction(e,!0,this._classMapInput):null}},{key:"buildStyleMapInstruction",value:function(e){return this._styleMapInput?this._buildMapBasedInstruction(e,!1,this._styleMapInput):null}},{key:"_buildMapBasedInstruction",value:function(e,t,n){var r,i=2,a=n.value.visit(e);return a instanceof Pi?(i+=a.expressions.length,r=t?function(e){switch(Rr(e)){case 1:return Lt.classMap;case 3:return Lt.classMapInterpolate1;case 5:return Lt.classMapInterpolate2;case 7:return Lt.classMapInterpolate3;case 9:return Lt.classMapInterpolate4;case 11:return Lt.classMapInterpolate5;case 13:return Lt.classMapInterpolate6;case 15:return Lt.classMapInterpolate7;case 17:return Lt.classMapInterpolate8;default:return Lt.classMapInterpolateV}}(a):function(e){switch(Rr(e)){case 1:return Lt.styleMap;case 3:return Lt.styleMapInterpolate1;case 5:return Lt.styleMapInterpolate2;case 7:return Lt.styleMapInterpolate3;case 9:return Lt.styleMapInterpolate4;case 11:return Lt.styleMapInterpolate5;case 13:return Lt.styleMapInterpolate6;case 15:return Lt.styleMapInterpolate7;case 17:return Lt.styleMapInterpolate8;default:return Lt.styleMapInterpolateV}}(a)):r=t?Lt.classMap:Lt.styleMap,{reference:r,calls:[{supportsInterpolation:!0,sourceSpan:n.sourceSpan,allocateBindingSlots:i,params:function(e){var t=e(a),n=Array.isArray(t)?t:[t];return n}}]}}},{key:"_buildSingleInputs",value:function(e,t,n,r,i){var a=[];return t.forEach((function(t){var o=a[a.length-1],s=t.value.visit(n),c=e,l=2;s instanceof Pi&&(l+=s.expressions.length,r&&(c=r(s)));var u={sourceSpan:t.sourceSpan,allocateBindingSlots:l,supportsInterpolation:!!r,params:function(e){var n=[];n.push(it(t.name));var r=e(s);return Array.isArray(r)?n.push.apply(n,Object(m.a)(r)):n.push(r),i||null===t.suffix||n.push(it(t.suffix)),n}};o&&o.reference===c?o.calls.push(u):a.push({reference:c,calls:[u]})})),a}},{key:"_buildClassInputs",value:function(e){return this._singleClassInputs?this._buildSingleInputs(Lt.classProp,this._singleClassInputs,e,null,!0):[]}},{key:"_buildStyleInputs",value:function(e){return this._singleStyleInputs?this._buildSingleInputs(Lt.styleProp,this._singleStyleInputs,e,ps,!1):[]}},{key:"buildUpdateLevelInstructions",value:function(e){var t=[];if(this.hasBindings){var n=this.buildStyleMapInstruction(e);n&&t.push(n);var r=this.buildClassMapInstruction(e);r&&t.push(r),t.push.apply(t,Object(m.a)(this._buildStyleInputs(e))),t.push.apply(t,Object(m.a)(this._buildClassInputs(e)))}return t}}]),e}();function us(e,t){e.has(t)||e.set(t,e.size)}function ds(e){var t=!1,n=e.indexOf("!important");-1!==n&&(e=n>0?e.substring(0,n):"",t=!0);var r=null,i=e,a=e.lastIndexOf(".");return a>0&&(r=e.substr(a+1),i=e.substring(0,a)),{property:i,suffix:r,hasOverrideFlag:t}}function ps(e){switch(Rr(e)){case 1:return Lt.styleProp;case 3:return Lt.stylePropInterpolate1;case 5:return Lt.stylePropInterpolate2;case 7:return Lt.stylePropInterpolate3;case 9:return Lt.stylePropInterpolate4;case 11:return Lt.stylePropInterpolate5;case 13:return Lt.stylePropInterpolate6;case 15:return Lt.stylePropInterpolate7;case 17:return Lt.stylePropInterpolate8;default:return Lt.stylePropInterpolateV}}!function(e){e[e.Character=0]="Character",e[e.Identifier=1]="Identifier",e[e.Keyword=2]="Keyword",e[e.String=3]="String",e[e.Operator=4]="Operator",e[e.Number=5]="Number",e[e.Error=6]="Error"}(cs||(cs={}));var hs=["var","let","as","null","undefined","true","false","if","else","this"],fs=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"tokenize",value:function(e){for(var t=new _s(e),n=[],r=t.scanToken();null!=r;)n.push(r),r=t.scanToken();return n}}]),e}(),ms=function(){function e(t,n,r,i,a){Object(g.a)(this,e),this.index=t,this.end=n,this.type=r,this.numValue=i,this.strValue=a}return Object(b.a)(e,[{key:"isCharacter",value:function(e){return this.type==cs.Character&&this.numValue==e}},{key:"isNumber",value:function(){return this.type==cs.Number}},{key:"isString",value:function(){return this.type==cs.String}},{key:"isOperator",value:function(e){return this.type==cs.Operator&&this.strValue==e}},{key:"isIdentifier",value:function(){return this.type==cs.Identifier}},{key:"isKeyword",value:function(){return this.type==cs.Keyword}},{key:"isKeywordLet",value:function(){return this.type==cs.Keyword&&"let"==this.strValue}},{key:"isKeywordAs",value:function(){return this.type==cs.Keyword&&"as"==this.strValue}},{key:"isKeywordNull",value:function(){return this.type==cs.Keyword&&"null"==this.strValue}},{key:"isKeywordUndefined",value:function(){return this.type==cs.Keyword&&"undefined"==this.strValue}},{key:"isKeywordTrue",value:function(){return this.type==cs.Keyword&&"true"==this.strValue}},{key:"isKeywordFalse",value:function(){return this.type==cs.Keyword&&"false"==this.strValue}},{key:"isKeywordThis",value:function(){return this.type==cs.Keyword&&"this"==this.strValue}},{key:"isError",value:function(){return this.type==cs.Error}},{key:"toNumber",value:function(){return this.type==cs.Number?this.numValue:-1}},{key:"toString",value:function(){switch(this.type){case cs.Character:case cs.Identifier:case cs.Keyword:case cs.Operator:case cs.String:case cs.Error:return this.strValue;case cs.Number:return this.numValue.toString();default:return null}}}]),e}();function gs(e,t,n){return new ms(e,t,cs.Character,n,String.fromCharCode(n))}function bs(e,t,n){return new ms(e,t,cs.Operator,0,n)}var vs=new ms(-1,-1,cs.Character,0,""),_s=function(){function e(t){Object(g.a)(this,e),this.input=t,this.peek=0,this.index=-1,this.length=t.length,this.advance()}return Object(b.a)(e,[{key:"advance",value:function(){this.peek=++this.index>=this.length?0:this.input.charCodeAt(this.index)}},{key:"scanToken",value:function(){for(var e=this.input,t=this.length,n=this.peek,r=this.index;n<=32;){if(++r>=t){n=0;break}n=e.charCodeAt(r)}if(this.peek=n,this.index=r,r>=t)return null;if(ys(n))return this.scanIdentifier();if(nn(n))return this.scanNumber(r);var i=r;switch(n){case 46:return this.advance(),nn(this.peek)?this.scanNumber(i):gs(i,this.index,46);case 40:case Kt:case Zt:case en:case 91:case 93:case zt:case Gt:case Yt:return this.scanCharacter(i,n);case 39:case 34:return this.scanString();case 35:case 43:case 45:case 42:case Vt:case 37:case 94:return this.scanOperator(i,String.fromCharCode(n));case 63:return this.scanComplexOperator(i,"?",46,".");case 60:case Qt:return this.scanComplexOperator(i,String.fromCharCode(n),Xt,"=");case 33:case Xt:return this.scanComplexOperator(i,String.fromCharCode(n),Xt,"=",Xt,"=");case 38:return this.scanComplexOperator(i,"&",38,"&");case 124:return this.scanComplexOperator(i,"|",124,"|");case 160:for(;tn(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error("Unexpected character [".concat(String.fromCharCode(n),"]"),0)}},{key:"scanCharacter",value:function(e,t){return this.advance(),gs(e,this.index,t)}},{key:"scanOperator",value:function(e,t){return this.advance(),bs(e,this.index,t)}},{key:"scanComplexOperator",value:function(e,t,n,r,i,a){this.advance();var o=t;return this.peek==n&&(this.advance(),o+=r),null!=i&&this.peek==i&&(this.advance(),o+=a),bs(e,this.index,o)}},{key:"scanIdentifier",value:function(){var e=this.index;for(this.advance();Os(this.peek);)this.advance();var t,n,r,i=this.input.substring(e,this.index);return hs.indexOf(i)>-1?(t=e,n=this.index,r=i,new ms(t,n,cs.Keyword,0,r)):function(e,t,n){return new ms(e,t,cs.Identifier,0,n)}(e,this.index,i)}},{key:"scanNumber",value:function(e){var t,n=this.index===e;for(this.advance();;){if(nn(this.peek));else if(46==this.peek)n=!1;else{if(101!=(t=this.peek)&&69!=t)break;if(this.advance(),xs(this.peek)&&this.advance(),!nn(this.peek))return this.error("Invalid exponent",-1);n=!1}this.advance()}var r,i,a,o=this.input.substring(e,this.index),s=n?function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}(o):parseFloat(o);return r=e,i=this.index,a=s,new ms(r,i,cs.Number,a,"")}},{key:"scanString",value:function(){var e=this.index,t=this.peek;this.advance();for(var n="",r=this.index,i=this.input;this.peek!=t;)if(92==this.peek){n+=i.substring(r,this.index),this.advance();var a=void 0;if(this.peek=this.peek,117==this.peek){var o=i.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(o))return this.error("Invalid unicode escape [\\u".concat(o,"]"),0);a=parseInt(o,16);for(var s=0;s<5;s++)this.advance()}else a=Es(this.peek),this.advance();n+=String.fromCharCode(a),r=this.index}else{if(0==this.peek)return this.error("Unterminated quote",0);this.advance()}var c,l,u,d=i.substring(r,this.index);return this.advance(),c=e,l=this.index,u=n+d,new ms(c,l,cs.String,0,u)}},{key:"error",value:function(e,t){var n=this.index+t;return function(e,t,n){return new ms(e,t,cs.Error,0,n)}(n,this.index,"Lexer Error: ".concat(e," at column ").concat(n," in expression [").concat(this.input,"]"))}}]),e}();function ys(e){return Jt<=e&&e<=$t||65<=e&&e<=90||95==e||36==e}function Os(e){return rn(e)||nn(e)||95==e||36==e}function xs(e){return 45==e||43==e}function Es(e){switch(e){case 110:return Ht;case 102:return 12;case 114:return 13;case 116:return 9;case 118:return 11;default:return e}}var ks=function e(t,n,r,i,a){Object(g.a)(this,e),this.strings=t,this.stringSpans=n,this.expressions=r,this.expressionsSpans=i,this.offsets=a},Cs=function e(t,n,r){Object(g.a)(this,e),this.templateBindings=t,this.warnings=n,this.errors=r},ws=Ss(Hr);function Ss(e){var t=dt(e.start)+"([\\s\\S]*?)"+dt(e.end);return new RegExp(t,"g")}var Is,Ts=function(){function e(t){Object(g.a)(this,e),this._lexer=t,this.errors=[],this.simpleExpressionChecker=Ds}return Object(b.a)(e,[{key:"parseAction",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hr;this._checkNoInterpolation(e,t,r);var i=this._stripComments(e),a=this._lexer.tokenize(this._stripComments(e)),o=new Ms(e,t,n,a,i.length,!0,this.errors,e.length-i.length).parseChain();return new Fi(o,e,t,n,this.errors)}},{key:"parseBinding",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hr,i=this._parseBindingAst(e,t,n,r);return new Fi(i,e,t,n,this.errors)}},{key:"checkSimpleExpression",value:function(e){var t=new this.simpleExpressionChecker;return e.visit(t),t.errors}},{key:"parseSimpleBinding",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hr,i=this._parseBindingAst(e,t,n,r),a=this.checkSimpleExpression(i);return a.length>0&&this._reportError("Host binding expression cannot contain ".concat(a.join(" ")),e,t),new Fi(i,e,t,n,this.errors)}},{key:"_reportError",value:function(e,t,n,r){this.errors.push(new hi(e,t,n,r))}},{key:"_parseBindingAst",value:function(e,t,n,r){var i=this._parseQuote(e,t,n);if(null!=i)return i;this._checkNoInterpolation(e,t,r);var a=this._stripComments(e),o=this._lexer.tokenize(a);return new Ms(e,t,n,o,a.length,!1,this.errors,e.length-a.length).parseChain()}},{key:"_parseQuote",value:function(e,t,n){if(null==e)return null;var r=e.indexOf(":");if(-1==r)return null;var i=e.substring(0,r).trim();if(!function(e){if(0==e.length)return!1;var t=new _s(e);if(!ys(t.peek))return!1;for(t.advance();0!==t.peek;){if(!Os(t.peek))return!1;t.advance()}return!0}(i))return null;var a=e.substring(r+1),o=new fi(0,e.length);return new bi(o,o.toAbsolute(n),i,a,t)}},{key:"parseTemplateBindings",value:function(e,t,n,r,i){var a=this._lexer.tokenize(t);return new Ms(t,n,i,a,t.length,!1,this.errors,0).parseTemplateBindings({source:e,span:new Ui(r,r+e.length)})}},{key:"parseInterpolation",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hr,i=this.splitInterpolation(e,t,r);if(null==i)return null;for(var a=[],o=0;o<i.expressions.length;++o){var s=i.expressions[o],c=this._stripComments(s),l=this._lexer.tokenize(c),u=new Ms(e,t,n,l,c.length,!1,this.errors,i.offsets[o]+(s.length-c.length)).parseChain();a.push(u)}var d=new fi(0,null==e?0:e.length);return new Fi(new Pi(d,d.toAbsolute(n),i.strings,a),e,t,n,this.errors)}},{key:"splitInterpolation",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hr,r=[],i=[],a=[],o=[],s=[],c=0,l=!1,u=!1,d=n.start,p=n.end;c<e.length;)if(l){var h=c,f=h+d.length,m=e.indexOf(p,f);if(-1===m){l=!1,u=!0;break}var g=m+p.length,b=e.substring(f,m);b.trim().length>0?i.push(b):(this._reportError("Blank expressions are not allowed in interpolated strings",e,"at column ".concat(c," in"),t),i.push("$implicit")),a.push(f),s.push({start:h,end:g}),c=g,l=!1}else{var v=c;-1===(c=e.indexOf(d,c))&&(c=e.length);var _=e.substring(v,c);r.push(_),o.push({start:v,end:c}),l=!0}return l||(u?(r[r.length-1]+=e.substring(c),o[o.length-1].end=e.length):(r.push(e.substring(c)),o.push({start:c,end:e.length}))),0===i.length?null:new ks(r,o,i,s,a)}},{key:"wrapLiteralPrimitive",value:function(e,t,n){var r=new fi(0,null==e?0:e.length);return new Fi(new Ii(r,r.toAbsolute(n),e),e,t,n,this.errors)}},{key:"_stripComments",value:function(e){var t=this._commentStart(e);return null!=t?e.substring(0,t).trim():e}},{key:"_commentStart",value:function(e){for(var t,n=null,r=0;r<e.length-1;r++){var i=e.charCodeAt(r),a=e.charCodeAt(r+1);if(i===Vt&&a==Vt&&null==n)return r;n===i?n=null:null==n&&(39===(t=i)||34===t||96===t)&&(n=i)}return null}},{key:"_checkNoInterpolation",value:function(e,t,n){var r,i=(r=n)===Hr?ws:Ss(r),a=e.split(i);a.length>1&&this._reportError("Got interpolation (".concat(n.start).concat(n.end,") where expression was expected"),e,"at column ".concat(this._findInterpolationErrorColumn(a,1,n)," in"),t)}},{key:"_findInterpolationErrorColumn",value:function(e,t,n){for(var r="",i=0;i<t;i++)r+=i%2==0?e[i]:"".concat(n.start).concat(e[i]).concat(n.end);return r.length}}]),e}(),As=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.apply(this,arguments)).simpleExpressionChecker=js,e}return n}(Ts);!function(e){e[e.None=0]="None",e[e.Writable=1]="Writable"}(Is||(Is={}));var Ps,Ms=function(){function e(t,n,r,i,a,o,s,c){Object(g.a)(this,e),this.input=t,this.location=n,this.absoluteOffset=r,this.tokens=i,this.inputLength=a,this.parseAction=o,this.errors=s,this.offset=c,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=Is.None,this.sourceSpanCache=new Map,this.index=0}return Object(b.a)(e,[{key:"peek",value:function(e){var t=this.index+e;return t<this.tokens.length?this.tokens[t]:vs}},{key:"next",get:function(){return this.peek(0)}},{key:"atEOF",get:function(){return this.index>=this.tokens.length}},{key:"inputIndex",get:function(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}},{key:"currentEndIndex",get:function(){return this.index>0?this.peek(-1).end+this.offset:0===this.tokens.length?this.inputLength+this.offset:this.next.index+this.offset}},{key:"currentAbsoluteOffset",get:function(){return this.absoluteOffset+this.inputIndex}},{key:"span",value:function(e){return new fi(e,this.currentEndIndex)}},{key:"sourceSpan",value:function(e){var t="".concat(e,"@").concat(this.inputIndex);return this.sourceSpanCache.has(t)||this.sourceSpanCache.set(t,this.span(e).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(t)}},{key:"advance",value:function(){this.index++}},{key:"withContext",value:function(e,t){this.context|=e;var n=t();return this.context^=e,n}},{key:"consumeOptionalCharacter",value:function(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)}},{key:"peekKeywordLet",value:function(){return this.next.isKeywordLet()}},{key:"peekKeywordAs",value:function(){return this.next.isKeywordAs()}},{key:"expectCharacter",value:function(e){this.consumeOptionalCharacter(e)||this.error("Missing expected ".concat(String.fromCharCode(e)))}},{key:"consumeOptionalOperator",value:function(e){return!!this.next.isOperator(e)&&(this.advance(),!0)}},{key:"expectOperator",value:function(e){this.consumeOptionalOperator(e)||this.error("Missing expected operator ".concat(e))}},{key:"prettyPrintToken",value:function(e){return e===vs?"end of input":"token ".concat(e)}},{key:"expectIdentifierOrKeyword",value:function(){var e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(this.error("Unexpected ".concat(this.prettyPrintToken(e),", expected identifier or keyword")),"")}},{key:"expectIdentifierOrKeywordOrString",value:function(){var e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(this.error("Unexpected ".concat(this.prettyPrintToken(e),", expected identifier, keyword, or string")),"")}},{key:"parseChain",value:function(){for(var e=[],t=this.inputIndex;this.index<this.tokens.length;){var n=this.parsePipe();if(e.push(n),this.consumeOptionalCharacter(Yt))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(Yt););else this.index<this.tokens.length&&this.error("Unexpected token '".concat(this.next,"'"))}return 0==e.length?new vi(this.span(t),this.sourceSpan(t)):1==e.length?e[0]:new yi(this.span(t),this.sourceSpan(t),e)}},{key:"parsePipe",value:function(){var e=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{for(var t=this.inputIndex,n=this.expectIdentifierOrKeyword(),r=this.sourceSpan(t),i=[];this.consumeOptionalCharacter(Gt);)i.push(this.parseExpression());var a=e.span.start;e=new Si(this.span(a),this.sourceSpan(a),e,n,i,r)}while(this.consumeOptionalOperator("|"))}return e}},{key:"parseExpression",value:function(){return this.parseConditional()}},{key:"parseConditional",value:function(){var e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){var n,r=this.parsePipe();if(this.consumeOptionalCharacter(Gt))n=this.parsePipe();else{var i=this.inputIndex,a=this.input.substring(e,i);this.error("Conditional expression ".concat(a," requires all 3 expressions")),n=new vi(this.span(e),this.sourceSpan(e))}return new Oi(this.span(e),this.sourceSpan(e),t,r,n)}return t}},{key:"parseLogicalOr",value:function(){for(var e=this.parseLogicalAnd();this.consumeOptionalOperator("||");){var t=this.parseLogicalAnd(),n=e.span.start;e=new Mi(this.span(n),this.sourceSpan(n),"||",e,t)}return e}},{key:"parseLogicalAnd",value:function(){for(var e=this.parseEquality();this.consumeOptionalOperator("&&");){var t=this.parseEquality(),n=e.span.start;e=new Mi(this.span(n),this.sourceSpan(n),"&&",e,t)}return e}},{key:"parseEquality",value:function(){for(var e=this.parseRelational();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"==":case"===":case"!=":case"!==":this.advance();var n=this.parseRelational(),r=e.span.start;e=new Mi(this.span(r),this.sourceSpan(r),t,e,n);continue}break}return e}},{key:"parseRelational",value:function(){for(var e=this.parseAdditive();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"<":case">":case"<=":case">=":this.advance();var n=this.parseAdditive(),r=e.span.start;e=new Mi(this.span(r),this.sourceSpan(r),t,e,n);continue}break}return e}},{key:"parseAdditive",value:function(){for(var e=this.parseMultiplicative();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"+":case"-":this.advance();var n=this.parseMultiplicative(),r=e.span.start;e=new Mi(this.span(r),this.sourceSpan(r),t,e,n);continue}break}return e}},{key:"parseMultiplicative",value:function(){for(var e=this.parsePrefix();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"*":case"%":case"/":this.advance();var n=this.parsePrefix(),r=e.span.start;e=new Mi(this.span(r),this.sourceSpan(r),t,e,n);continue}break}return e}},{key:"parsePrefix",value:function(){if(this.next.type==cs.Operator){var e,t=this.inputIndex;switch(this.next.strValue){case"+":return this.advance(),e=this.parsePrefix(),Di.createPlus(this.span(t),this.sourceSpan(t),e);case"-":return this.advance(),e=this.parsePrefix(),Di.createMinus(this.span(t),this.sourceSpan(t),e);case"!":return this.advance(),e=this.parsePrefix(),new ji(this.span(t),this.sourceSpan(t),e)}}return this.parseCallChain()}},{key:"parseCallChain",value:function(){for(var e=this,t=this.parsePrimary(),n=t.span.start;;)if(this.consumeOptionalCharacter(46))t=this.parseAccessMemberOrMethodCall(t,!1);else if(this.consumeOptionalOperator("?."))t=this.parseAccessMemberOrMethodCall(t,!0);else if(this.consumeOptionalCharacter(91))this.withContext(Is.Writable,(function(){e.rbracketsExpected++;var r=e.parsePipe();if(r instanceof vi&&e.error("Key access cannot be empty"),e.rbracketsExpected--,e.expectCharacter(93),e.consumeOptionalOperator("=")){var i=e.parseConditional();t=new wi(e.span(n),e.sourceSpan(n),t,r,i)}else t=new Ci(e.span(n),e.sourceSpan(n),t,r)}));else if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var r=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(Kt),t=new Bi(this.span(n),this.sourceSpan(n),t,r)}else{if(!this.consumeOptionalOperator("!"))return t;t=new Ri(this.span(n),this.sourceSpan(n),t)}}},{key:"parsePrimary",value:function(){var e=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var t=this.parsePipe();return this.rparensExpected--,this.expectCharacter(Kt),t}if(this.next.isKeywordNull())return this.advance(),new Ii(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new Ii(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new Ii(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new Ii(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordThis())return this.advance(),new _i(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;var n=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new Ti(this.span(e),this.sourceSpan(e),n)}if(this.next.isCharacter(Zt))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new _i(this.span(e),this.sourceSpan(e)),!1);if(this.next.isNumber()){var r=this.next.toNumber();return this.advance(),new Ii(this.span(e),this.sourceSpan(e),r)}if(this.next.isString()){var i=this.next.toString();return this.advance(),new Ii(this.span(e),this.sourceSpan(e),i)}return this.index>=this.tokens.length?(this.error("Unexpected end of expression: ".concat(this.input)),new vi(this.span(e),this.sourceSpan(e))):(this.error("Unexpected token ".concat(this.next)),new vi(this.span(e),this.sourceSpan(e)))}},{key:"parseExpressionList",value:function(e){var t=[];if(!this.next.isCharacter(e))do{t.push(this.parsePipe())}while(this.consumeOptionalCharacter(zt));return t}},{key:"parseLiteralMap",value:function(){var e=[],t=[],n=this.inputIndex;if(this.expectCharacter(Zt),!this.consumeOptionalCharacter(en)){this.rbracesExpected++;do{var r=this.next.isString(),i=this.expectIdentifierOrKeywordOrString();e.push({key:i,quoted:r}),this.expectCharacter(Gt),t.push(this.parsePipe())}while(this.consumeOptionalCharacter(zt));this.rbracesExpected--,this.expectCharacter(en)}return new Ai(this.span(n),this.sourceSpan(n),e,t)}},{key:"parseAccessMemberOrMethodCall",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.span.start,r=this.inputIndex,i=this.expectIdentifierOrKeyword(),a=this.sourceSpan(r);if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var o=this.parseCallArguments();this.expectCharacter(Kt),this.rparensExpected--;var s=this.span(n),c=this.sourceSpan(n);return t?new Ni(s,c,a,e,i,o):new Li(s,c,a,e,i,o)}if(t)return this.consumeOptionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new vi(this.span(n),this.sourceSpan(n))):new ki(this.span(n),this.sourceSpan(n),a,e,i);if(this.consumeOptionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new vi(this.span(n),this.sourceSpan(n));var l=this.parseConditional();return new Ei(this.span(n),this.sourceSpan(n),a,e,i,l)}return new xi(this.span(n),this.sourceSpan(n),a,e,i)}},{key:"parseCallArguments",value:function(){if(this.next.isCharacter(Kt))return[];var e=[];do{e.push(this.parsePipe())}while(this.consumeOptionalCharacter(zt));return e}},{key:"expectTemplateBindingKey",value:function(){var e="",t=!1,n=this.currentAbsoluteOffset;do{e+=this.expectIdentifierOrKeywordOrString(),(t=this.consumeOptionalOperator("-"))&&(e+="-")}while(t);return{source:e,span:new Ui(n,n+e.length)}}},{key:"parseTemplateBindings",value:function(e){var t=[];for(t.push.apply(t,Object(m.a)(this.parseDirectiveKeywordBindings(e)));this.index<this.tokens.length;){var n=this.parseLetBinding();if(n)t.push(n);else{var r=this.expectTemplateBindingKey(),i=this.parseAsBinding(r);i?t.push(i):(r.source=e.source+r.source[0].toUpperCase()+r.source.substring(1),t.push.apply(t,Object(m.a)(this.parseDirectiveKeywordBindings(r))))}this.consumeStatementTerminator()}return new Cs(t,[],this.errors)}},{key:"parseDirectiveKeywordBindings",value:function(e){var t=[];this.consumeOptionalCharacter(Gt);var n=this.getDirectiveBoundTarget(),r=this.currentAbsoluteOffset,i=this.parseAsBinding(e);i||(this.consumeStatementTerminator(),r=this.currentAbsoluteOffset);var a=new Ui(e.span.start,r);return t.push(new Wi(a,e,n)),i&&t.push(i),t}},{key:"getDirectiveBoundTarget",value:function(){if(this.next===vs||this.peekKeywordAs()||this.peekKeywordLet())return null;var e=this.parsePipe(),t=e.span,n=t.start,r=t.end,i=this.input.substring(n,r);return new Fi(e,i,this.location,this.absoluteOffset+n,this.errors)}},{key:"parseAsBinding",value:function(e){if(!this.peekKeywordAs())return null;this.advance();var t=this.expectTemplateBindingKey();this.consumeStatementTerminator();var n=new Ui(e.span.start,this.currentAbsoluteOffset);return new qi(n,t,e)}},{key:"parseLetBinding",value:function(){if(!this.peekKeywordLet())return null;var e=this.currentAbsoluteOffset;this.advance();var t=this.expectTemplateBindingKey(),n=null;this.consumeOptionalOperator("=")&&(n=this.expectTemplateBindingKey()),this.consumeStatementTerminator();var r=new Ui(e,this.currentAbsoluteOffset);return new qi(r,t,n)}},{key:"consumeStatementTerminator",value:function(){this.consumeOptionalCharacter(Yt)||this.consumeOptionalCharacter(zt)}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.errors.push(new hi(e,this.input,this.locationText(t),this.location)),this.skip()}},{key:"locationText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e&&(e=this.index),e<this.tokens.length?"at column ".concat(this.tokens[e].index+1," in"):"at the end of the expression"}},{key:"skip",value:function(){for(var e=this.next;!(!(this.index<this.tokens.length)||e.isCharacter(Yt)||!(this.rparensExpected<=0)&&e.isCharacter(Kt)||!(this.rbracesExpected<=0)&&e.isCharacter(en)||!(this.rbracketsExpected<=0)&&e.isCharacter(93)||this.context&Is.Writable&&e.isOperator("="));)this.next.isError()&&this.errors.push(new hi(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}}]),e}(),Ds=function(){function e(){Object(g.a)(this,e),this.errors=[]}return Object(b.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){}},{key:"visitInterpolation",value:function(e,t){}},{key:"visitLiteralPrimitive",value:function(e,t){}},{key:"visitPropertyRead",value:function(e,t){}},{key:"visitPropertyWrite",value:function(e,t){}},{key:"visitSafePropertyRead",value:function(e,t){}},{key:"visitMethodCall",value:function(e,t){}},{key:"visitSafeMethodCall",value:function(e,t){}},{key:"visitFunctionCall",value:function(e,t){}},{key:"visitLiteralArray",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitLiteralMap",value:function(e,t){this.visitAll(e.values,t)}},{key:"visitUnary",value:function(e,t){}},{key:"visitBinary",value:function(e,t){}},{key:"visitPrefixNot",value:function(e,t){}},{key:"visitNonNullAssert",value:function(e,t){}},{key:"visitConditional",value:function(e,t){}},{key:"visitPipe",value:function(e,t){this.errors.push("pipes")}},{key:"visitKeyedRead",value:function(e,t){}},{key:"visitKeyedWrite",value:function(e,t){}},{key:"visitAll",value:function(e,t){var n=this;return e.map((function(e){return e.visit(n,t)}))}},{key:"visitChain",value:function(e,t){}},{key:"visitQuote",value:function(e,t){}}]),e}(),js=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.apply(this,arguments)).errors=[],e}return Object(b.a)(n,[{key:"visitPipe",value:function(){this.errors.push("pipes")}}]),n}(Hi);function Rs(){return Ps||(Ps={},Ls(L.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),Ls(L.STYLE,["*|style"]),Ls(L.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","img|srcset","input|src","ins|cite","q|cite","source|src","source|srcset","track|src","video|poster","video|src"]),Ls(L.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),Ps}function Ls(e,t){var n,r=Object(u.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;Ps[i.toLowerCase()]=e}}catch(a){r.e(a)}finally{r.f()}}var Ns=["[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume",":svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|media,sizes,src,srcset,type","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|"],Bs={class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Us=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.call(this))._schema={},Ns.forEach((function(t){var n={},r=t.split("|"),i=Object(l.a)(r,2),a=i[0],o=i[1].split(","),s=a.split("^"),c=Object(l.a)(s,2),u=c[0],d=c[1];u.split(",").forEach((function(t){return e._schema[t.toLowerCase()]=n}));var p=d&&e._schema[d.toLowerCase()];p&&Object.keys(p).forEach((function(e){n[e]=p[e]})),o.forEach((function(e){if(e.length>0)switch(e[0]){case"*":break;case"!":n[e.substring(1)]="boolean";break;case"#":n[e.substring(1)]="number";break;case"%":n[e.substring(1)]="object";break;default:n[e]="string"}}))})),e}return Object(b.a)(n,[{key:"hasProperty",value:function(e,t,n){if(n.some((function(e){return e.name===U.name})))return!0;if(e.indexOf("-")>-1){if(_(e)||y(e))return!1;if(n.some((function(e){return e.name===B.name})))return!0}return!!(this._schema[e.toLowerCase()]||this._schema.unknown)[t]}},{key:"hasElement",value:function(e,t){if(t.some((function(e){return e.name===U.name})))return!0;if(e.indexOf("-")>-1){if(_(e)||y(e))return!0;if(t.some((function(e){return e.name===B.name})))return!0}return!!this._schema[e.toLowerCase()]}},{key:"securityContext",value:function(e,t,n){n&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();var r=Rs()[e+"|"+t];return r||((r=Rs()["*|"+t])||L.NONE)}},{key:"getMappedPropName",value:function(e){return Bs[e]||e}},{key:"getDefaultComponentElementName",value:function(){return"ng-component"}},{key:"validateProperty",value:function(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:"Binding to event property '".concat(e,"' is disallowed for security reasons, ")+"please use (".concat(e.slice(2),")=...")+"\nIf '".concat(e,"' is a directive input, make sure the directive is imported by the")+" current module."}:{error:!1}}},{key:"validateAttribute",value:function(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:"Binding to event attribute '".concat(e,"' is disallowed for security reasons, ")+"please use (".concat(e.slice(2),")=...")}:{error:!1}}},{key:"allKnownElementNames",value:function(){return Object.keys(this._schema)}},{key:"normalizeAnimationStyleProperty",value:function(e){return e.replace(st,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()}))}},{key:"normalizeAnimationStyleValue",value:function(e,t,n){var r="",i=n.toString().trim(),a=null;if(function(e){switch(e){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}(e)&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&(a="Please provide a CSS unit value for ".concat(t,":").concat(n))}return{error:a,value:i+r}}}]),n}((function e(){Object(g.a)(this,e)}));var Fs=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/;function qs(e,t){var n=new Hs(t);return{nodes:eo(n,e),errors:t.errors.concat(n.errors),styleUrls:n.styleUrls,styles:n.styles,ngContentSelectors:n.ngContentSelectors}}var Ws,Hs=function(){function e(t){Object(g.a)(this,e),this.bindingParser=t,this.errors=[],this.styles=[],this.styleUrls=[],this.ngContentSelectors=[],this.inI18nBlock=!1}return Object(b.a)(e,[{key:"visitElement",value:function(e){var t=this,n=ar(e.i18n);n&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);var r,i=Jo(e);if(i.type===Qo.SCRIPT)return null;if(i.type===Qo.STYLE){var a=1===(r=e).children.length&&r.children[0]instanceof Ya?r.children[0].value:null;return null!==a&&this.styles.push(a),null}if(i.type===Qo.STYLESHEET&&Bo(i.hrefAttr))return this.styleUrls.push(i.hrefAttr),null;var o,s=O(e.name),c=[],l=[],d=[],p=[],h=[],f={},g=[],b=[],v=!1,_=Object(u.a)(e.attrs);try{for(_.s();!(o=_.n()).done;){var y=o.value,x=!1,E=zs(y.name),k=!1;if(y.i18n&&(f[y.name]=y.i18n),E.startsWith("*")){v&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",y.sourceSpan),k=!0,v=!0;var C=y.value,w=E.substring("*".length),S=[],I=y.valueSpan?y.valueSpan.start.offset:y.sourceSpan.start.offset+y.name.length;this.bindingParser.parseInlineTemplateBinding(w,C,y.sourceSpan,I,[],g,S),b.push.apply(b,Object(m.a)(S.map((function(e){return new yn(e.name,e.value,e.sourceSpan,e.valueSpan)}))))}else x=this.parseAttribute(s,y,[],c,l,d,p);x||k||h.push(this.visitAttribute(y))}}catch(U){_.e(U)}finally{_.f()}var T,A=eo(i.nonBindable?Ks:this,e.children);if(i.type===Qo.NG_CONTENT){e.children&&!e.children.every((function(e){return function(e){return e instanceof Ya&&0==e.value.trim().length}(e)||function(e){return e instanceof Za}(e)}))&&this.reportError("<ng-content> element cannot have content.",e.sourceSpan);var P=i.selectAttr,M=e.attrs.map((function(e){return t.visitAttribute(e)}));T=new _n(P,M,e.sourceSpan,e.i18n),this.ngContentSelectors.push(P)}else if(s){var D=this.extractAttributes(e.name,c,f);T=new vn(e.name,h,D.bound,l,[],A,p,d,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{var j=this.extractAttributes(e.name,c,f);T=new bn(e.name,h,j.bound,l,A,p,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}if(v){var R=this.extractAttributes("ng-template",g,f),L=[];R.literal.forEach((function(e){return L.push(e)})),R.bound.forEach((function(e){return L.push(e)}));var N=T instanceof bn?{attributes:T.attributes,inputs:T.inputs,outputs:T.outputs}:{attributes:[],inputs:[],outputs:[]},B=s&&n?void 0:e.i18n;T=new vn(T.name,N.attributes,N.inputs,N.outputs,L,[T],[],b,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,B)}return n&&(this.inI18nBlock=!1),T}},{key:"visitAttribute",value:function(e){return new fn(e.name,e.value,e.sourceSpan,e.valueSpan,e.i18n)}},{key:"visitText",value:function(e){return this._visitTextWithInterpolation(e.value,e.sourceSpan,e.i18n)}},{key:"visitExpansion",value:function(e){var t=this;if(!e.i18n)return null;if(!ar(e.i18n))throw new Error('Invalid type "'.concat(e.i18n.constructor,'" for "i18n" property of ').concat(e.sourceSpan.toString(),'. Expected a "Message"'));var n=e.i18n,r={},i={};return Object.keys(n.placeholders).forEach((function(a){var o=n.placeholders[a];if(a.startsWith("VAR_")){var s=t.bindingParser.interpolationConfig,c="".concat(s.start).concat(o).concat(s.end),l=a.trim();r[l]=t._visitTextWithInterpolation(c,e.sourceSpan)}else i[a]=t._visitTextWithInterpolation(o,e.sourceSpan)})),new xn(r,i,e.sourceSpan,n)}},{key:"visitExpansionCase",value:function(e){return null}},{key:"visitComment",value:function(e){return null}},{key:"extractAttributes",value:function(e,t,n){var r=this,i=[],a=[];return t.forEach((function(t){var o=n[t.name];if(t.isLiteral)a.push(new fn(t.name,t.expression.source||"",t.sourceSpan,void 0,o));else{var s=r.bindingParser.createBoundElementProperty(e,t,!0,!1);i.push(mn.fromBoundElementProperty(s,o))}})),{bound:i,literal:a}}},{key:"parseAttribute",value:function(e,t,n,r,i,a,o){var s=zs(t.name),c=t.value,l=t.sourceSpan,u=t.valueSpan?t.valueSpan.start.offset:l.start.offset,d=s.match(Fs),p=!1;if(d){if(p=!0,null!=d[1])this.bindingParser.parsePropertyBinding(d[7],c,!1,l,u,t.valueSpan,n,r);else if(d[2])if(e){var h=d[7];this.parseVariable(h,c,l,t.valueSpan,a)}else this.reportError('"let-" is only supported on ng-template elements.',l);else if(d[3]){var f=d[7];this.parseReference(f,c,l,t.valueSpan,o)}else if(d[4]){var m=[];this.bindingParser.parseEvent(d[7],c,l,t.valueSpan||l,n,m),Vs(m,i)}else if(d[5])this.bindingParser.parsePropertyBinding(d[7],c,!1,l,u,t.valueSpan,n,r),this.parseAssignmentEvent(d[7],c,l,t.valueSpan,n,i);else if(d[6])this.bindingParser.parseLiteralAttr(s,c,l,u,t.valueSpan,n,r);else if(d[8])this.bindingParser.parsePropertyBinding(d[8],c,!1,l,u,t.valueSpan,n,r),this.parseAssignmentEvent(d[8],c,l,t.valueSpan,n,i);else if(d[9])this.bindingParser.parsePropertyBinding(d[9],c,!1,l,u,t.valueSpan,n,r);else if(d[10]){var g=[];this.bindingParser.parseEvent(d[10],c,l,t.valueSpan||l,n,g),Vs(g,i)}}else p=this.bindingParser.parsePropertyInterpolation(s,c,l,t.valueSpan,n,r);return p}},{key:"_visitTextWithInterpolation",value:function(e,t,n){var r=Mo(e),i=this.bindingParser.parseInterpolation(r,t);return i?new hn(i,t,n):new pn(r,t)}},{key:"parseVariable",value:function(e,t,n,r,i){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',n):0===e.length&&this.reportError("Variable does not have a name",n),i.push(new yn(e,t,n,r))}},{key:"parseReference",value:function(e,t,n,r,i){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',n):0===e.length&&this.reportError("Reference does not have a name",n),i.push(new On(e,t,n,r))}},{key:"parseAssignmentEvent",value:function(e,t,n,r,i,a){var o=[];this.bindingParser.parseEvent("".concat(e,"Change"),"".concat(t,"=$event"),n,r||n,i,o),Vs(o,a)}},{key:"reportError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;this.errors.push(new dn(t,e,n))}}]),e}(),Ks=new(function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitElement",value:function(e){var t=Jo(e);if(t.type===Qo.SCRIPT||t.type===Qo.STYLE||t.type===Qo.STYLESHEET)return null;var n=eo(this,e.children,null);return new bn(e.name,eo(this,e.attrs),[],[],n,[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}},{key:"visitComment",value:function(e){return null}},{key:"visitAttribute",value:function(e){return new fn(e.name,e.value,e.sourceSpan,void 0,e.i18n)}},{key:"visitText",value:function(e){return new pn(e.value,e.sourceSpan)}},{key:"visitExpansion",value:function(e){return null}},{key:"visitExpansionCase",value:function(e){return null}}]),e}());function zs(e){return/^data-/i.test(e)?e.substring(5):e}function Vs(e,t){t.push.apply(t,Object(m.a)(e.map((function(e){return gn.fromParsedEvent(e)}))))}function Gs(){return{getUniqueId:ur(),icus:new Map}}!function(e){e[e.ELEMENT=0]="ELEMENT",e[e.TEMPLATE=1]="TEMPLATE",e[e.PROJECTION=2]="PROJECTION"}(Ws||(Ws={}));var Ys=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;Object(g.a)(this,e),this.index=t,this.ref=n,this.level=r,this.templateIndex=i,this.meta=a,this.registry=o,this.bindings=new Set,this.placeholders=new Map,this.isEmitted=!1,this._unresolvedCtxCount=0,this._registry=o||Gs(),this.id=this._registry.getUniqueId()}return Object(b.a)(e,[{key:"appendTag",value:function(e,t,n,r){if(!t.isVoid||!r){var i=t.isVoid||!r?t.startName:t.closeName,a={type:e,index:n,ctx:this.id,isVoid:t.isVoid,closed:r};pr(this.placeholders,i,a)}}},{key:"icus",get:function(){return this._registry.icus}},{key:"isRoot",get:function(){return 0===this.level}},{key:"isResolved",get:function(){return 0===this._unresolvedCtxCount}},{key:"getSerializedPlaceholders",value:function(){var e=new Map;return this.placeholders.forEach((function(t,n){return e.set(n,t.map($s))})),e}},{key:"appendBinding",value:function(e){this.bindings.add(e)}},{key:"appendIcu",value:function(e,t){pr(this._registry.icus,e,t)}},{key:"appendBoundText",value:function(e){var t=this;hr(e,this.bindings.size,this.id).forEach((function(e,n){return pr.apply(void 0,[t.placeholders,n].concat(Object(m.a)(e)))}))}},{key:"appendTemplate",value:function(e,t){this.appendTag(Ws.TEMPLATE,e,t,!1),this.appendTag(Ws.TEMPLATE,e,t,!0),this._unresolvedCtxCount++}},{key:"appendElement",value:function(e,t,n){this.appendTag(Ws.ELEMENT,e,t,n)}},{key:"appendProjection",value:function(e,t){this.appendTag(Ws.PROJECTION,e,t,!1),this.appendTag(Ws.PROJECTION,e,t,!0)}},{key:"forkChildContext",value:function(t,n,r){return new e(t,this.ref,this.level+1,n,r,this._registry)}},{key:"reconcileChildContext",value:function(e){var t=this;["start","close"].forEach((function(n){var r=e.meta["".concat(n,"Name")],i=(t.placeholders.get(r)||[]).find(Js(t.id,e.templateIndex));i&&(i.ctx=e.id)})),e.placeholders.forEach((function(n,r){var i=t.placeholders.get(r);if(i){var a=i.findIndex(Js(e.id,e.templateIndex));if(a>=0){var o=r.startsWith("CLOSE");if(r.endsWith("NG-TEMPLATE"))i.splice.apply(i,[a+(o?0:1),0].concat(Object(m.a)(n)));else n[o?n.length-1:0].tmpl=i[a],i.splice.apply(i,[a,1].concat(Object(m.a)(n)))}else i.push.apply(i,Object(m.a)(n));t.placeholders.set(r,i)}else t.placeholders.set(r,n)})),this._unresolvedCtxCount--}}]),e}();function Xs(e,t,n,r){var i=r?"/":"";return lr("".concat(i).concat(e).concat(t),n)}function Qs(e,t,n){var r=t.index,i=t.ctx;return t.isVoid?Xs(e,r,i)+Xs(e,r,i,!0):Xs(e,r,i,n)}function Js(e,t){return function(n){return"object"==typeof n&&n.type===Ws.TEMPLATE&&n.index===t&&n.ctx===e}}function $s(e){var t,n,r=function(e,t){return Qs("#",e,t)},i=function(e,t){return Qs("*",e,t)};switch(e.type){case Ws.ELEMENT:return e.closed?r(e,!0)+(e.tmpl?i(e.tmpl,!0):""):e.tmpl?i(e.tmpl)+r(e)+(e.isVoid?i(e.tmpl,!0):""):r(e);case Ws.TEMPLATE:return i(e,e.closed);case Ws.PROJECTION:return t=e,n=e.closed,Qs("!",t,n);default:return e}}var Zs=new(function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitText",value:function(e){return e.value}},{key:"visitContainer",value:function(e){var t=this;return e.children.map((function(e){return e.visit(t)})).join("")}},{key:"visitIcu",value:function(e){var t=this,n=Object.keys(e.cases).map((function(n){return"".concat(n," {").concat(e.cases[n].visit(t),"}")}));return"{".concat(e.expressionPlaceholder,", ").concat(e.type,", ").concat(n.join(" "),"}")}},{key:"visitTagPlaceholder",value:function(e){var t=this;return e.isVoid?this.formatPh(e.startName):"".concat(this.formatPh(e.startName)).concat(e.children.map((function(e){return e.visit(t)})).join("")).concat(this.formatPh(e.closeName))}},{key:"visitPlaceholder",value:function(e){return this.formatPh(e.name)}},{key:"visitIcuPlaceholder",value:function(e,t){return this.formatPh(e.name)}},{key:"formatPh",value:function(e){return"{".concat(mr(e,!1),"}")}}]),e}());function ec(e){return e.visit(Zs)}var tc={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},nc=function(){function e(){Object(g.a)(this,e),this._placeHolderNameCounts={},this._signatureToName={}}return Object(b.a)(e,[{key:"getStartTagPlaceholderName",value:function(e,t,n){var r=this._hashTag(e,t,n);if(this._signatureToName[r])return this._signatureToName[r];var i=e.toUpperCase(),a=tc[i]||"TAG_".concat(i),o=this._generateUniqueName(n?a:"START_".concat(a));return this._signatureToName[r]=o,o}},{key:"getCloseTagPlaceholderName",value:function(e){var t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];var n=e.toUpperCase(),r=tc[n]||"TAG_".concat(n),i=this._generateUniqueName("CLOSE_".concat(r));return this._signatureToName[t]=i,i}},{key:"getPlaceholderName",value:function(e,t){var n=e.toUpperCase(),r="PH: ".concat(n,"=").concat(t);if(this._signatureToName[r])return this._signatureToName[r];var i=this._generateUniqueName(n);return this._signatureToName[r]=i,i}},{key:"getUniquePlaceholder",value:function(e){return this._generateUniqueName(e.toUpperCase())}},{key:"_hashTag",value:function(e,t,n){return"<".concat(e)+Object.keys(t).sort().map((function(e){return" ".concat(e,"=").concat(t[e])})).join("")+(n?"/>":"></".concat(e,">"))}},{key:"_hashClosingTag",value:function(e){return this._hashTag("/".concat(e),{},!1)}},{key:"_generateUniqueName",value:function(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;var t=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=t+1,"".concat(e,"_").concat(t)}}]),e}(),rc=new Ts(new fs);function ic(e){var t=new oc(rc,e);return function(e,n,r,i,a){return t.toI18nMessage(e,n,r,i,a)}}function ac(e,t){return t}var oc=function(){function e(t,n){Object(g.a)(this,e),this._expressionParser=t,this._interpolationConfig=n}return Object(b.a)(e,[{key:"toI18nMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,a={isIcu:1==e.length&&e[0]instanceof Xa,icuDepth:0,placeholderRegistry:new nc,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:i||ac},o=eo(this,e,a);return new kn(o,a.placeholderToContent,a.placeholderToMessage,t,n,r)}},{key:"visitElement",value:function(e,t){var n=eo(this,e.children,t),r={};e.attrs.forEach((function(e){r[e.name]=e.value}));var i=I(e.name).isVoid,a=t.placeholderRegistry.getStartTagPlaceholderName(e.name,r,i);t.placeholderToContent[a]=e.sourceSpan.toString();var o="";i||(o=t.placeholderRegistry.getCloseTagPlaceholderName(e.name),t.placeholderToContent[o]="</".concat(e.name,">"));var s=new In(e.name,r,a,o,n,i,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,s)}},{key:"visitAttribute",value:function(e,t){var n=this._visitTextWithInterpolation(e.value,e.sourceSpan,t);return t.visitNodeFn(e,n)}},{key:"visitText",value:function(e,t){var n=this._visitTextWithInterpolation(e.value,e.sourceSpan,t);return t.visitNodeFn(e,n)}},{key:"visitComment",value:function(e,t){return null}},{key:"visitExpansion",value:function(e,t){var n=this;t.icuDepth++;var r={},i=new Sn(e.switchValue,e.type,r,e.sourceSpan);if(e.cases.forEach((function(e){r[e.value]=new wn(e.expression.map((function(e){return e.visit(n,t)})),e.expSourceSpan)})),t.icuDepth--,t.isIcu||t.icuDepth>0){var a=t.placeholderRegistry.getUniquePlaceholder("VAR_".concat(e.type));return i.expressionPlaceholder=a,t.placeholderToContent[a]=e.switchValue,t.visitNodeFn(e,i)}var o=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[o]=this.toI18nMessage([e],"","","",void 0);var s=new An(i,o,e.sourceSpan);return t.visitNodeFn(e,s)}},{key:"visitExpansionCase",value:function(e,t){throw new Error("Unreachable code")}},{key:"_visitTextWithInterpolation",value:function(e,t,n){var r=this._expressionParser.splitInterpolation(e,t.start.toString(),this._interpolationConfig);if(!r)return new Cn(e,t);for(var i=[],a=new wn(i,t),o=this._interpolationConfig,s=o.start,c=o.end,l=0;l<r.strings.length-1;l++){var u=r.expressions[l],d=u.split(cc)[2]||"INTERPOLATION",p=n.placeholderRegistry.getPlaceholderName(d,u);if(r.strings[l].length){var h=sc(t,r.stringSpans[l]);i.push(new Cn(r.strings[l],h))}var f=sc(t,r.expressionsSpans[l]);i.push(new Tn(u,p,f)),n.placeholderToContent[p]=s+u+c}var m=r.strings.length-1;if(r.strings[m].length){var g=sc(t,r.stringSpans[m]);i.push(new Cn(r.strings[m],g))}return a}}]),e}();function sc(e,t){var n=t.start,r=t.end;return new un(e.fullStart.moveBy(n),e.fullStart.moveBy(r))}var cc=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;var lc=function(e,t){return e instanceof Ga&&(t instanceof An&&e.i18n instanceof kn&&(t.previousMessage=e.i18n),e.i18n=t),t},uc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(g.a)(this,e),this.interpolationConfig=t,this.keepI18nAttrs=n,this.enableI18nLegacyMessageIdFormat=r,this.hasI18nMeta=!1,this._createI18nMessage=ic(this.interpolationConfig)}return Object(b.a)(e,[{key:"_generateI18nMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=this._parseMetadata(t),i=r.meaning,a=r.description,o=r.customId,s=this._createI18nMessage(e,i,a,o,n);return this._setMessageId(s,t),this._setLegacyIds(s,t),s}},{key:"visitElement",value:function(e){if(function(e){return e.attrs.some((function(e){return ir(e.name)}))}(e)){this.hasI18nMeta=!0;var t,n=[],r={},i=Object(u.a)(e.attrs);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.name===tr){var o=e.i18n||a.value,s=this._generateI18nMessage(e.children,o,lc);s.nodes.length&&(e.i18n=s)}else if(a.name.startsWith(nr)){r[a.name.slice(nr.length)]=a.value}else n.push(a)}}catch(h){i.e(h)}finally{i.f()}if(Object.keys(r).length){var c,l=Object(u.a)(n);try{for(l.s();!(c=l.n()).done;){var d=c.value,p=r[d.name];void 0!==p&&d.value&&(d.i18n=this._generateI18nMessage([d],d.i18n||p))}}catch(h){l.e(h)}finally{l.f()}}this.keepI18nAttrs||(e.attrs=n)}return eo(this,e.children,e.i18n),e}},{key:"visitExpansion",value:function(e,t){var n,r=e.i18n;if(this.hasI18nMeta=!0,r instanceof An){var i=r.name;cr(n=this._generateI18nMessage([e],r)).name=i}else n=this._generateI18nMessage([e],t||r);return e.i18n=n,e}},{key:"visitText",value:function(e){return e}},{key:"visitAttribute",value:function(e){return e}},{key:"visitComment",value:function(e){return e}},{key:"visitExpansionCase",value:function(e){return e}},{key:"_parseMetadata",value:function(e){return"string"==typeof e?function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(r=r.trim()){var i,a=r.indexOf(dc),o=r.indexOf("|"),s=a>-1?[r.slice(0,a),r.slice(a+2)]:[r,""],c=Object(l.a)(s,2);i=c[0],e=c[1];var u=o>-1?[i.slice(0,o),i.slice(o+1)]:["",i],d=Object(l.a)(u,2);t=d[0],n=d[1]}return{customId:e,meaning:t,description:n}}(e):e instanceof kn?e:{}}},{key:"_setMessageId",value:function(e,t){e.id||(e.id=t instanceof kn&&t.id||Mn(e))}},{key:"_setLegacyIds",value:function(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[Pn(e),Dn(e)];else if("string"!=typeof t){var n=t instanceof kn?t:t instanceof An?t.previousMessage:void 0;e.legacyIds=n?n.legacyIds:[]}}}]),e}(),dc="@@";function pc(e){var t=[];return e.description&&t.push({tagName:"desc",text:e.description}),e.meaning&&t.push({tagName:"meaning",text:e.meaning}),0==t.length?null:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new He(e)}(t)}function hc(e,t,n,r){var i=[it(function(e){return e.nodes.map((function(e){return e.visit(fc,null)})).join("")}(t))];Object.keys(r).length&&i.push(si(r,!0));var a=n.set(Qe("goog.getMsg").callFn(i)).toConstDecl(),o=pc(t);return null!==o&&a.addLeadingComment(o),[a,new Ge(e.set(n))]}var fc=new(function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"formatPh",value:function(e){return"{$".concat(mr(e),"}")}},{key:"visitText",value:function(e){return e.value}},{key:"visitContainer",value:function(e){var t=this;return e.children.map((function(e){return e.visit(t)})).join("")}},{key:"visitIcu",value:function(e){return ec(e)}},{key:"visitTagPlaceholder",value:function(e){var t=this;return e.isVoid?this.formatPh(e.startName):"".concat(this.formatPh(e.startName)).concat(e.children.map((function(e){return e.visit(t)})).join("")).concat(this.formatPh(e.closeName))}},{key:"visitPlaceholder",value:function(e){return this.formatPh(e.name)}},{key:"visitIcuPlaceholder",value:function(e,t){return this.formatPh(e.name)}}]),e}());function mc(e,t,n){var r=function(e){var t=[];return e.nodes.forEach((function(e){return e.visit(gc,t)})),function(e){var t=[],n=[];e[0]instanceof _e&&t.push(bc(e[0].sourceSpan.start));for(var r=0;r<e.length;r++){var i=e[r];i instanceof ve?t.push(i):(n.push(i),e[r-1]instanceof _e&&t.push(bc(e[r-1].sourceSpan.end)))}e[e.length-1]instanceof _e&&t.push(bc(e[e.length-1].sourceSpan.end));return{messageParts:t,placeHolders:n}}(t)}(t),i=r.messageParts,a=r.placeHolders,o=function(e){var t=e.nodes[0],n=e.nodes[e.nodes.length-1];return new un(t.sourceSpan.start,n.sourceSpan.end,t.sourceSpan.fullStart,t.sourceSpan.details)}(t),s=a.map((function(e){return n[e.text]})),c=function(e,t,n,r,i){return new ye(e,t,n,r,i)}(t,i,a,s,o),l=e.set(c);return[new Ge(l)]}var gc=new(function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"visitText",value:function(e,t){t[t.length-1]instanceof ve?t[t.length-1].text+=e.value:t.push(new ve(e.value,e.sourceSpan))}},{key:"visitContainer",value:function(e,t){var n=this;e.children.forEach((function(e){return e.visit(n,t)}))}},{key:"visitIcu",value:function(e,t){t.push(new ve(ec(e),e.sourceSpan))}},{key:"visitTagPlaceholder",value:function(e,t){var n,r,i=this;t.push(this.createPlaceholderPiece(e.startName,null!==(n=e.startSourceSpan)&&void 0!==n?n:e.sourceSpan)),e.isVoid||(e.children.forEach((function(e){return e.visit(i,t)})),t.push(this.createPlaceholderPiece(e.closeName,null!==(r=e.endSourceSpan)&&void 0!==r?r:e.sourceSpan)))}},{key:"visitPlaceholder",value:function(e,t){t.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}},{key:"visitIcuPlaceholder",value:function(e,t){t.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}},{key:"createPlaceholderPiece",value:function(e,t){return new _e(mr(e,!1),t)}}]),e}());function bc(e){return new ve("",new un(e,e))}var vc="ngProjectAs",_c=new Map([["window",Lt.resolveWindow],["document",Lt.resolveDocument],["body",Lt.resolveBody]]),yc=[" ","\n","\r","\t"];function Oc(e,t){return rt(Qe(Or).bitwiseAnd(it(e),null,!1),t)}function xc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.type,i=e.name,a=e.target,o=e.phase,s=e.handler;if(a&&!_c.has(a))throw new Error("Unexpected global target '".concat(a,"' defined for '").concat(i,"' event.\n        Supported list of global targets: ").concat(Array.from(_c.keys()),"."));var c="$event",l=new Set,u=null===n||0===n.bindingLevel?Qe(yr):n.getOrCreateSharedContextVar(0),d=$i(n,u,s,"b",(function(){return ut("Unexpected interpolation")}),e.handlerSpan,l),p=[];n&&(p.push.apply(p,Object(m.a)(n.restoreViewStatement())),p.push.apply(p,Object(m.a)(n.variableDeclarations()))),p.push.apply(p,Object(m.a)(d.render3Stmts));var h=1===r?qt(i,o):i,f=t&&At(t),g=[];l.has(c)&&g.push(new Pe(c,Q));var b=nt(g,p,J,null,f),v=[it(h),b];return a&&v.push(it(!1),Je(_c.get(a))),v}var Ec=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,p=arguments.length>10?arguments[10]:void 0,h=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,b=arguments.length>14&&void 0!==arguments[14]?arguments[14]:{prepareStatements:[],constExpressions:[]};Object(g.a)(this,e),this.constantPool=t,this.level=i,this.contextName=a,this.i18nContext=o,this.templateIndex=s,this.templateName=c,this.directiveMatcher=l,this.directives=u,this.pipeTypeByName=d,this.pipes=p,this._namespace=h,this.i18nUseExternalIds=m,this._constants=b,this._dataIndex=0,this._bindingContext=0,this._prefixCode=[],this._creationCodeFns=[],this._updateCodeFns=[],this._currentIndex=0,this._tempVariables=[],this._nestedTemplateFns=[],this._unsupported=Er,this.i18n=null,this._pureFunctionSlots=0,this._bindingSlots=0,this._ngContentReservedSlots=[],this._ngContentSelectorsOffset=0,this._implicitReceiverExpr=null,this.visitReference=kr,this.visitVariable=kr,this.visitTextAttribute=kr,this.visitBoundAttribute=kr,this.visitBoundEvent=kr,this._bindingScope=n.nestedScope(i),this.fileBasedI18nSuffix=f.replace(/[^A-Za-z0-9]/g,"_")+"_",this._valueConverter=new kc(t,(function(){return r.allocateDataSlot()}),(function(e){return r.allocatePureFunctionSlots(e)}),(function(e,t,n,i){var a=d.get(e);a&&r.pipes.add(a),r._bindingScope.set(r.level,t,i),r.creationInstruction(null,Lt.pipe,[it(n),it(e)])}))}return Object(b.a)(e,[{key:"buildTemplateFunction",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;this._ngContentSelectorsOffset=r,this._namespace!==Lt.namespaceHTML&&this.creationInstruction(null,this._namespace),t.forEach((function(e){return n.registerContextVariables(e)}));var a=this.i18nContext||ar(i)&&!or(i)&&!(Uc(e)&&e[0].i18n===i),o=qc(e);if(a&&this.i18nStart(null,i,o),En(this,e),this._pureFunctionSlots+=this._bindingSlots,this._valueConverter.updatePipeSlotOffsets(this._bindingSlots),this._nestedTemplateFns.forEach((function(e){return e()})),0===this.level&&this._ngContentReservedSlots.length){var s=[];if(this._ngContentReservedSlots.length>1||"*"!==this._ngContentReservedSlots[0]){var c=this._ngContentReservedSlots.map((function(e){return"*"!==e?W(e):e}));s.push(this.constantPool.getConstLiteral(Cr(c),!0))}this.creationInstruction(null,Lt.projectionDef,s,!0)}a&&this.i18nEnd(null,o);var l=this._creationCodeFns.map((function(e){return e()})),u=this._updateCodeFns.map((function(e){return e()})),d=this._bindingScope.viewSnapshotStatements(),p=this._bindingScope.variableDeclarations().concat(this._tempVariables),h=l.length>0?[Oc(1,d.concat(l))]:[],f=u.length>0?[Oc(2,p.concat(u))]:[];return nt([new Pe(Or,Z),new Pe(yr,null)],[].concat(Object(m.a)(this._prefixCode),h,f),J,null,this.templateName)}},{key:"getLocal",value:function(e){return this._bindingScope.get(e)}},{key:"notifyImplicitReceiverUse",value:function(){this._bindingScope.notifyImplicitReceiverUse()}},{key:"i18nTranslate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=r||this.i18nGenerateMainBlockVar(),o=this.i18nGenerateClosureVar(e.id),s=Hc(e,a,o,n,i);return(t=this._constants.prepareStatements).push.apply(t,Object(m.a)(s)),a}},{key:"registerContextVariables",value:function(e){var t=this._bindingScope.freshReferenceName(),n=this.level,r=Qe(e.name+t);this._bindingScope.set(n,e.name,r,1,(function(t,i){var a;if(t.bindingLevel===n)a=Qe(yr);else{var o=t.getSharedContextName(n);a=o||Ic(i)}return[r.set(a.prop(e.value||"$implicit")).toConstDecl()]}))}},{key:"i18nAppendBindings",value:function(e){var t=this;e.length>0&&e.forEach((function(e){return t.i18n.appendBinding(e)}))}},{key:"i18nBindProps",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){var i=e[r];if(i instanceof pn)n[r]=it(i.value);else{var a=i.value.visit(t._valueConverter);if(t.allocateBindingSlots(a),a instanceof Pi){var o=a.strings,s=a.expressions,c=t.i18n,l=c.id,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e.length)return"";for(var r="",i=e.length-1,a=0;a<i;a++)r+="".concat(e[a]).concat(lr(t+a,n));return r+e[i]}(o,c.bindings.size,l);t.i18nAppendBindings(s),n[r]=it(u)}}})),n}},{key:"i18nGenerateMainBlockVar",value:function(){return Qe(this.constantPool.uniqueName("i18n_"))}},{key:"i18nGenerateClosureVar",value:function(e){var t,n=this.fileBasedI18nSuffix.toUpperCase();if(this.i18nUseExternalIds){var r=gr("EXTERNAL_"),i=this.constantPool.uniqueName(n);t="".concat(r).concat(At(e),"$$").concat(i)}else{var a=gr(n);t=this.constantPool.uniqueName(a)}return Qe(t)}},{key:"i18nUpdateRef",value:function(e){var t=e.icus,n=e.meta,r=e.isRoot,i=e.isResolved,a=e.isEmitted;if(r&&i&&!a&&!or(n)){e.isEmitted=!0;var o,s=e.getSerializedPlaceholders(),c={},l=s.size?dr(s):{};t.size&&t.forEach((function(e,t){if(1===e.length)l[t]=e[0];else{var n=lr("".concat("I18N_EXP_").concat(t));l[t]=it(n),c[t]=et(e)}})),(Array.from(s.values()).some((function(e){return e.length>1}))||Object.keys(c).length)&&(o=function(e){var t=[e];return Object.keys(c).length&&t.push(si(c,!0)),Sc(null,Lt.i18nPostprocess,t)}),this.i18nTranslate(n,l,e.ref,o)}}},{key:"i18nStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=this.allocateDataSlot();this.i18n=this.i18nContext?this.i18nContext.forkChildContext(r,this.templateIndex,t):new Ys(r,this.i18nGenerateMainBlockVar(),0,this.templateIndex,t);var i=this.i18n,a=i.id,o=i.ref,s=[it(r),this.addToConsts(o)];a>0&&s.push(it(a)),this.creationInstruction(e,n?Lt.i18n:Lt.i18nStart,s)}},{key:"i18nEnd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;if(!this.i18n)throw new Error("i18nEnd is executed with no i18n context present");this.i18nContext?(this.i18nContext.reconcileChildContext(this.i18n),this.i18nUpdateRef(this.i18nContext)):this.i18nUpdateRef(this.i18n);var r=this.i18n,i=r.index,a=r.bindings;if(a.size){var o=[];a.forEach((function(n){o.push({sourceSpan:t,value:function(){return e.convertPropertyBinding(n)}})})),this.updateInstructionChainWithAdvance(this.getConstCount()-1,Lt.i18nExp,o),this.updateInstruction(t,Lt.i18nApply,[it(i)])}n||this.creationInstruction(t,Lt.i18nEnd),this.i18n=null}},{key:"i18nAttributesInstruction",value:function(e,t,n){var r=this,i=!1,a=[],o=[];if(t.forEach((function(e){var t=e.i18n;if(e instanceof fn)a.push(it(e.name),r.i18nTranslate(t));else{var s=e.value.visit(r._valueConverter);if(r.allocateBindingSlots(s),s instanceof Pi){var c=dr(hr(t));a.push(it(e.name),r.i18nTranslate(t,c)),s.expressions.forEach((function(e){i=!0,o.push({sourceSpan:n,value:function(){return r.convertPropertyBinding(e)}})}))}}})),o.length>0&&this.updateInstructionChainWithAdvance(e,Lt.i18nExp,o),a.length>0){var s=it(this.allocateDataSlot()),c=this.addToConsts(et(a));this.creationInstruction(n,Lt.i18nAttributes,[s,c]),i&&this.updateInstruction(n,Lt.i18nApply,[s])}}},{key:"getNamespaceInstruction",value:function(e){switch(e){case"math":return Lt.namespaceMathML;case"svg":return Lt.namespaceSVG;default:return Lt.namespaceHTML}}},{key:"addNamespaceInstruction",value:function(e,t){this._namespace=e,this.creationInstruction(t.sourceSpan,e)}},{key:"interpolatedUpdateInstruction",value:function(e,t,n,r,i,a){var o=this;this.updateInstructionWithAdvance(t,r.sourceSpan,e,(function(){return[it(n)].concat(Object(m.a)(o.getUpdateInstructionArguments(i)),Object(m.a)(a))}))}},{key:"visitContent",value:function(e){var t=this.allocateDataSlot(),n=this._ngContentSelectorsOffset+this._ngContentReservedSlots.length,r=[it(t)];this._ngContentReservedSlots.push(e.selector);var i=e.attributes.filter((function(e){return"select"!==e.name.toLowerCase()})),a=this.getAttributeExpressions(i,[],[]);a.length>0?r.push(it(n),et(a)):0!==n&&r.push(it(n)),this.creationInstruction(e.sourceSpan,Lt.projection,r),this.i18n&&this.i18n.appendProjection(e.i18n,t)}},{key:"visitElement",value:function(e){var t,n=this,r=this.allocateDataSlot(),i=new ls(null),a=!1,o=ar(e.i18n)&&!or(e.i18n),s=[],c=[],d=v(e.name),p=Object(l.a)(d,2),h=p[0],f=p[1],m=_(e.name),g=Object(u.a)(e.attributes);try{for(g.s();!(t=g.n()).done;){var b=t.value,y=b.name,O=b.value;"ngNonBindable"===y?a=!0:"style"===y?i.registerStyleAttr(O):"class"===y?i.registerClassAttr(O):(b.i18n?s:c).push(b)}}catch(F){g.e(F)}finally{g.f()}this.matchDirectives(e.name,e);var x=[it(r)];m||x.push(it(f));var E=[];e.inputs.forEach((function(e){i.registerBoundInput(e)||(0===e.type&&e.i18n?s.push(e):E.push(e))}));var k=this.getAttributeExpressions(c,E,e.outputs,i,[],s);x.push(this.addAttrsToConsts(k));var C=this.prepareRefsArray(e.references);x.push(this.addToConsts(C));var w=this._namespace,S=this.getNamespaceInstruction(h);S!==w&&this.addNamespaceInstruction(S,e),this.i18n&&this.i18n.appendElement(e.i18n,r);var I=!o&&this.i18n?!qc(e.children):e.children.length>0,T=!i.hasBindingsWithPipes&&0===e.outputs.length&&0===s.length&&!I,A=!T&&qc(e.children);if(T)this.creationInstruction(e.sourceSpan,m?Lt.elementContainer:Lt.element,Sr(x));else{if(this.creationInstruction(e.sourceSpan,m?Lt.elementContainerStart:Lt.elementStart,Sr(x)),a&&this.creationInstruction(e.sourceSpan,Lt.disableBindings),s.length>0&&this.i18nAttributesInstruction(r,s,e.sourceSpan),e.outputs.length>0){var P=e.outputs.map((function(t){return{sourceSpan:t.sourceSpan,params:n.prepareListenerParameter(e.name,t,r)}}));this.creationInstructionChain(Lt.listener,P)}o&&this.i18nStart(e.sourceSpan,e.i18n,A)}for(var M=i.buildUpdateLevelInstructions(this._valueConverter),D=M.length-1,j=0;j<=D;j++){var R=M[j];this._bindingSlots+=this.processStylingUpdateInstruction(r,R)}var L=it(void 0),N=[],B=[];if(E.forEach((function(e){var t=e.type;if(4===t){var i=e.value.visit(n._valueConverter),a=!(i instanceof Ii)||!!i.value;n.allocateBindingSlots(i),N.push({name:Ft(e.name),sourceSpan:e.sourceSpan,value:function(){return a?n.convertPropertyBinding(i):L}})}else{if(e.i18n)return;var o=e.value.visit(n._valueConverter);if(void 0!==o){var s=[],c=v(e.name),u=Object(l.a)(c,2),d=u[0],p=u[1],h=1===t,f=Bc(e.securityContext,h);if(f&&s.push(f),d){var m=it(d);f?s.push(m):s.push(it(null),m)}if(n.allocateBindingSlots(o),0===t)o instanceof Pi?n.interpolatedUpdateInstruction(Rc(o),r,p,e,o,s):N.push({name:p,sourceSpan:e.sourceSpan,value:function(){return n.convertPropertyBinding(o)},params:s});else if(1===t)if(o instanceof Pi&&Rr(o)>1)n.interpolatedUpdateInstruction(function(e){switch(Rr(e)){case 3:return Lt.attributeInterpolate1;case 5:return Lt.attributeInterpolate2;case 7:return Lt.attributeInterpolate3;case 9:return Lt.attributeInterpolate4;case 11:return Lt.attributeInterpolate5;case 13:return Lt.attributeInterpolate6;case 15:return Lt.attributeInterpolate7;case 17:return Lt.attributeInterpolate8;default:return Lt.attributeInterpolateV}}(o),r,p,e,o,s);else{var g=o instanceof Pi?o.expressions[0]:o;B.push({name:p,sourceSpan:e.sourceSpan,value:function(){return n.convertPropertyBinding(g)},params:s})}else n.updateInstructionWithAdvance(r,e.sourceSpan,Lt.classProp,(function(){return[it(r),it(p),n.convertPropertyBinding(o)].concat(s)}))}}})),N.length>0&&this.updateInstructionChainWithAdvance(r,Lt.property,N),B.length>0&&this.updateInstructionChainWithAdvance(r,Lt.attribute,B),En(this,e.children),!o&&this.i18n&&this.i18n.appendElement(e.i18n,r,!0),!T){var U=e.endSourceSpan||e.sourceSpan;o&&this.i18nEnd(U,A),a&&this.creationInstruction(U,Lt.enableBindings),this.creationInstruction(U,m?Lt.elementContainerEnd:Lt.elementEnd)}}},{key:"visitTemplate",value:function(t){var n=this,r="ng-template",i=this.allocateDataSlot();this.i18n&&this.i18n.appendTemplate(t.i18n,i);var a=At(t.tagName||""),o="".concat(this.contextName).concat(a?"_"+a:"","_").concat(i),s="".concat(o,"_Template"),c=[it(i),Qe(s),it(t.tagName?v(t.tagName)[1]:t.tagName)];this.matchDirectives(r,t);var u=vt(t.attributes,sr),d=Object(l.a)(u,2),p=d[0],h=d[1],f=this.getAttributeExpressions(h,t.inputs,t.outputs,void 0,t.templateAttrs,p);if(c.push(this.addAttrsToConsts(f)),t.references&&t.references.length){var g=this.prepareRefsArray(t.references);c.push(this.addToConsts(g)),c.push(Je(Lt.templateRefExtractor))}var b=new e(this.constantPool,this._bindingScope,this.level+1,o,this.i18n,i,s,this.directiveMatcher,this.directives,this.pipeTypeByName,this.pipes,this._namespace,this.fileBasedI18nSuffix,this.i18nUseExternalIds,this._constants);if(this._nestedTemplateFns.push((function(){var e,r=b.buildTemplateFunction(t.children,t.variables,n._ngContentReservedSlots.length+n._ngContentSelectorsOffset,t.i18n);(n.constantPool.statements.push(r.toDeclStmt(s)),b._ngContentReservedSlots.length)&&(e=n._ngContentReservedSlots).push.apply(e,Object(m.a)(b._ngContentReservedSlots))})),this.creationInstruction(t.sourceSpan,Lt.templateCreate,(function(){return c.splice(2,0,it(b.getConstCount()),it(b.getVarCount())),Sr(c)})),this.templatePropertyBindings(i,t.templateAttrs),t.tagName===r){var _=vt(t.inputs,sr),y=Object(l.a)(_,2),O=y[0],x=y[1],E=[].concat(Object(m.a)(p),Object(m.a)(O));if(E.length>0&&this.i18nAttributesInstruction(i,E,t.sourceSpan),x.length>0&&this.templatePropertyBindings(i,x),t.outputs.length>0){var k=t.outputs.map((function(e){return{sourceSpan:e.sourceSpan,params:n.prepareListenerParameter("ng_template",e,i)}}));this.creationInstructionChain(Lt.listener,k)}}}},{key:"visitBoundText",value:function(e){var t=this;if(this.i18n){var n=e.value.visit(this._valueConverter);return this.allocateBindingSlots(n),void(n instanceof Pi&&(this.i18n.appendBoundText(e.i18n),this.i18nAppendBindings(n.expressions)))}var r=this.allocateDataSlot();this.creationInstruction(e.sourceSpan,Lt.text,[it(r)]);var i=e.value.visit(this._valueConverter);this.allocateBindingSlots(i),i instanceof Pi?this.updateInstructionWithAdvance(r,e.sourceSpan,function(e){switch(Rr(e)){case 1:return Lt.textInterpolate;case 3:return Lt.textInterpolate1;case 5:return Lt.textInterpolate2;case 7:return Lt.textInterpolate3;case 9:return Lt.textInterpolate4;case 11:return Lt.textInterpolate5;case 13:return Lt.textInterpolate6;case 15:return Lt.textInterpolate7;case 17:return Lt.textInterpolate8;default:return Lt.textInterpolateV}}(i),(function(){return t.getUpdateInstructionArguments(i)})):ut("Text nodes should be interpolated and never bound directly.")}},{key:"visitText",value:function(e){this.i18n||this.creationInstruction(e.sourceSpan,Lt.text,[it(this.allocateDataSlot()),it(e.value)])}},{key:"visitIcu",value:function(e){var t=!1;this.i18n||(t=!0,this.i18nStart(null,e.i18n,!0));var n=this.i18n,r=this.i18nBindProps(e.vars),i=this.i18nBindProps(e.placeholders),a=e.i18n,o=function(e){var t=fr(Object.assign(Object.assign({},r),i),!1);return Sc(null,Lt.i18nPostprocess,[e,si(t,!0)])};if(or(n.meta))this.i18nTranslate(a,{},n.ref,o);else{var s=this.i18nTranslate(a,{},void 0,o);n.appendIcu(cr(a).name,s)}return t&&this.i18nEnd(null,!0),null}},{key:"allocateDataSlot",value:function(){return this._dataIndex++}},{key:"getConstCount",value:function(){return this._dataIndex}},{key:"getVarCount",value:function(){return this._pureFunctionSlots}},{key:"getConsts",value:function(){return this._constants}},{key:"getNgContentSelectors",value:function(){return this._ngContentReservedSlots.length?this.constantPool.getConstLiteral(Cr(this._ngContentReservedSlots),!0):null}},{key:"bindingContext",value:function(){return"".concat(this._bindingContext++)}},{key:"templatePropertyBindings",value:function(e,t){var n=this,r=[];t.forEach((function(t){if(t instanceof mn){var i=t.value.visit(n._valueConverter);if(void 0!==i)if(n.allocateBindingSlots(i),i instanceof Pi){n.interpolatedUpdateInstruction(Rc(i),e,t.name,t,i,[])}else r.push({name:t.name,sourceSpan:t.sourceSpan,value:function(){return n.convertPropertyBinding(i)}})}})),r.length>0&&this.updateInstructionChainWithAdvance(e,Lt.property,r)}},{key:"instructionFn",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e[i?"unshift":"push"]((function(){var e=Array.isArray(r)?r:r();return Sc(t,n,e).toStmt()}))}},{key:"processStylingUpdateInstruction",value:function(e,t){var n=this,r=0;if(t){var i=[];t.calls.forEach((function(e){r+=e.allocateBindingSlots,i.push({sourceSpan:e.sourceSpan,value:function(){return e.params((function(t){return e.supportsInterpolation&&t instanceof Pi?n.getUpdateInstructionArguments(t):n.convertPropertyBinding(t)}))}})})),this.updateInstructionChainWithAdvance(e,t.reference,i)}return r}},{key:"creationInstruction",value:function(e,t,n,r){this.instructionFn(this._creationCodeFns,e,t,n||[],r)}},{key:"creationInstructionChain",value:function(e,t){var n=t.length?t[0].sourceSpan:null;this._creationCodeFns.push((function(){return jr(e,t.map((function(e){return e.params()})),n).toStmt()}))}},{key:"updateInstructionWithAdvance",value:function(e,t,n,r){this.addAdvanceInstructionIfNecessary(e,t),this.updateInstruction(t,n,r)}},{key:"updateInstruction",value:function(e,t,n){this.instructionFn(this._updateCodeFns,e,t,n||[])}},{key:"updateInstructionChain",value:function(e,t){var n=t.length?t[0].sourceSpan:null;this._updateCodeFns.push((function(){var r=t.map((function(e){var t=e.value(),n=Array.isArray(t)?t:[t];return e.params&&n.push.apply(n,Object(m.a)(e.params)),e.name&&n.unshift(it(e.name)),n}));return jr(e,r,n).toStmt()}))}},{key:"updateInstructionChainWithAdvance",value:function(e,t,n){this.addAdvanceInstructionIfNecessary(e,n.length?n[0].sourceSpan:null),this.updateInstructionChain(t,n)}},{key:"addAdvanceInstructionIfNecessary",value:function(e,t){if(e!==this._currentIndex){var n=e-this._currentIndex;if(n<1)throw new Error("advance instruction can only go forwards");this.instructionFn(this._updateCodeFns,t,Lt.advance,[it(n)]),this._currentIndex=e}}},{key:"allocatePureFunctionSlots",value:function(e){var t=this._pureFunctionSlots;return this._pureFunctionSlots+=e,t}},{key:"allocateBindingSlots",value:function(e){this._bindingSlots+=e instanceof Pi?e.expressions.length:1}},{key:"getImplicitReceiverExpr",value:function(){return this._implicitReceiverExpr?this._implicitReceiverExpr:this._implicitReceiverExpr=0===this.level?Qe(yr):this._bindingScope.getOrCreateSharedContextVar(0)}},{key:"convertPropertyBinding",value:function(e){var t,n=ra(this,this.getImplicitReceiverExpr(),e,this.bindingContext(),ea.Expression,(function(){return ut("Unexpected interpolation")})),r=n.currValExpr;return(t=this._tempVariables).push.apply(t,Object(m.a)(n.stmts)),r}},{key:"getUpdateInstructionArguments",value:function(e){var t,n=function(e,t,n,r){var i=new ua(e,t,r,void 0),a=n.visit(i,ta.Expression);i.usesImplicitReceiver&&e.notifyImplicitReceiverUse();var o=ia(i,r),s=a.args.slice(1);if(n instanceof Pi){var c=n.strings;3===s.length&&""===c[0]&&""===c[1]?s=[s[1]]:s.length>=19&&(s=[et(s)])}return{stmts:o,args:s}}(this,this.getImplicitReceiverExpr(),e,this.bindingContext()),r=n.args,i=n.stmts;return(t=this._tempVariables).push.apply(t,Object(m.a)(i)),r}},{key:"matchDirectives",value:function(e,t){var n=this;if(this.directiveMatcher){var r=Dc(e,Dr(t));this.directiveMatcher.match(r,(function(e,t){n.directives.add(t)}))}}},{key:"getAttributeExpressions",value:function(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=new Set,c=[];function l(e,t){"string"==typeof e?s.has(e)||(c.push.apply(c,Object(m.a)(Ac(e))),void 0!==t&&c.push(t),s.add(e)):c.push(it(e))}if(e.forEach((function(e){e.name===vc&&(i=e),c.push.apply(c,Object(m.a)(Ac(e.name)).concat([Cr(e.value)]))})),i&&c.push.apply(c,Object(m.a)(jc(i))),r&&r.populateInitialStylingAttrs(c),t.length||n.length){for(var u=c.length,d=0;d<t.length;d++){var p=t[d];4!==p.type&&1!==p.type&&l(p.name)}for(var h=0;h<n.length;h++){var f=n[h];1!==f.type&&l(f.name)}c.length!==u&&c.splice(u,0,it(3))}return a.length&&(c.push(it(4)),a.forEach((function(e){return l(e.name)}))),o.length&&(c.push(it(6)),o.forEach((function(e){return l(e.name)}))),c}},{key:"addToConsts",value:function(e){if(at(e))return qe;for(var t=this._constants.constExpressions,n=0;n<t.length;n++)if(t[n].isEquivalent(e))return it(n);return it(t.push(e)-1)}},{key:"addAttrsToConsts",value:function(e){return e.length>0?this.addToConsts(et(e)):qe}},{key:"prepareRefsArray",value:function(e){var t=this;return e&&0!==e.length?Cr(jt(e.map((function(e){var n=t.allocateDataSlot(),r=t._bindingScope.freshReferenceName(),i=t.level,a=Qe(r);return t._bindingScope.set(i,e.name,a,0,(function(e,t){var r=t>0?[Ic(t).toStmt()]:[],i=a.set(Je(Lt.reference).callFn([it(n)]));return r.concat(i.toConstDecl())}),!0),[e.name,e.value]})))):qe}},{key:"prepareListenerParameter",value:function(e,t,n){var r=this;return function(){var i=t.name,a=1===t.type?Wt(i,t.phase):At(i),o="".concat(r.templateName,"_").concat(e,"_").concat(a,"_").concat(n,"_listener"),s=r._bindingScope.nestedScope(r._bindingScope.bindingLevel);return xc(t,o,s)}}}]),e}(),kc=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(g.a)(this,n),(o=t.call(this)).constantPool=e,o.allocateSlot=r,o.allocatePureFunctionSlots=i,o.definePipe=a,o._pipeBindExprs=[],o}return Object(b.a)(n,[{key:"visitPipe",value:function(e,t){var n=this.allocateSlot(),r="PIPE:".concat(n),i=this.allocatePureFunctionSlots(2+e.args.length),a=new xi(e.span,e.sourceSpan,e.nameSpan,new _i(e.span,e.sourceSpan),r),o=function(e){var t=Cc[e.length];return{identifier:t||Lt.pipeBindV,isVarLength:!t}}(e.args),s=o.identifier,c=o.isVarLength;this.definePipe(e.name,r,n,Je(s));var l=[e.exp].concat(Object(m.a)(e.args)),u=c?this.visitAll([new Ti(e.span,e.sourceSpan,l)]):this.visitAll(l),d=new Bi(e.span,e.sourceSpan,a,[new Ii(e.span,e.sourceSpan,n),new Ii(e.span,e.sourceSpan,i)].concat(Object(m.a)(u)));return this._pipeBindExprs.push(d),d}},{key:"updatePipeSlotOffsets",value:function(e){this._pipeBindExprs.forEach((function(t){t.args[1].value+=e}))}},{key:"visitLiteralArray",value:function(e,t){var n=this;return new pa(e.span,e.sourceSpan,this.visitAll(e.expressions),(function(e){var t=et(e);return Tc(n.constantPool,t,n.allocatePureFunctionSlots)}))}},{key:"visitLiteralMap",value:function(e,t){var n=this;return new pa(e.span,e.sourceSpan,this.visitAll(e.values),(function(t){var r=tt(t.map((function(t,n){return{key:e.keys[n].key,value:t,quoted:e.keys[n].quoted}})));return Tc(n.constantPool,r,n.allocatePureFunctionSlots)}))}}]),n}(zi),Cc=[Lt.pipeBind1,Lt.pipeBind2,Lt.pipeBind3,Lt.pipeBind4];var wc=[Lt.pureFunction0,Lt.pureFunction1,Lt.pureFunction2,Lt.pureFunction3,Lt.pureFunction4,Lt.pureFunction5,Lt.pureFunction6,Lt.pureFunction7,Lt.pureFunction8];function Sc(e,t,n){return Je(t,null,e).callFn(n,e)}function Ic(e){return Je(Lt.nextContext).callFn(e>1?[it(e)]:[])}function Tc(e,t,n){var r=e.getLiteralFactory(t),i=r.literalFactory,a=r.literalFactoryArguments,o=n(1+a.length),s=function(e){var t=wc[e.length];return{identifier:t||Lt.pureFunctionV,isVarLength:!t}}(a),c=s.identifier,l=s.isVarLength,u=[it(o),i];return l?u.push(et(a)):u.push.apply(u,Object(m.a)(a)),Je(c).callFn(u)}function Ac(e){var t=v(e),n=Object(l.a)(t,2),r=n[0],i=it(n[1]);return r?[it(0),it(r),i]:[i]}var Pc="$$shared_ctx$$",Mc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(g.a)(this,e),this.bindingLevel=t,this.parent=n,this.map=new Map,this.referenceNameIndex=0,this.restoreViewVariable=null}return Object(b.a)(e,[{key:"get",value:function(e){for(var t=this;t;){var n=t.map.get(e);if(null!=n)return t!==this&&(n={retrievalLevel:n.retrievalLevel,lhs:n.lhs,declareLocalCallback:n.declareLocalCallback,declare:!1,priority:n.priority,localRef:n.localRef},this.map.set(e,n),this.maybeGenerateSharedContextVar(n),this.maybeRestoreView(n.retrievalLevel,n.localRef)),n.declareLocalCallback&&!n.declare&&(n.declare=!0),n.lhs;t=t.parent}return 0===this.bindingLevel?null:this.getComponentProperty(e)}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(this.map.has(t)){if(a)return this;ut("The name ".concat(t," is already defined in scope to be ").concat(this.map.get(t)))}return this.map.set(t,{retrievalLevel:e,lhs:n,declare:!1,declareLocalCallback:i,priority:r,localRef:a||!1}),this}},{key:"getLocal",value:function(e){return this.get(e)}},{key:"notifyImplicitReceiverUse",value:function(){0!==this.bindingLevel&&(this.map.get("$$shared_ctx$$0").declare=!0)}},{key:"nestedScope",value:function(t){var n=new e(t,this);return t>0&&n.generateSharedContextVar(0),n}},{key:"getOrCreateSharedContextVar",value:function(e){var t=Pc+e;return this.map.has(t)||this.generateSharedContextVar(e),this.map.get(t).lhs}},{key:"getSharedContextName",value:function(e){var t=this.map.get(Pc+e);return t&&t.declare?t.lhs:null}},{key:"maybeGenerateSharedContextVar",value:function(e){if(1===e.priority&&e.retrievalLevel<this.bindingLevel){var t=this.map.get(Pc+e.retrievalLevel);t?t.declare=!0:this.generateSharedContextVar(e.retrievalLevel)}}},{key:"generateSharedContextVar",value:function(e){var t=Qe(yr+this.freshReferenceName());this.map.set(Pc+e,{retrievalLevel:e,lhs:t,declareLocalCallback:function(e,n){return[t.set(Ic(n)).toConstDecl()]},declare:!1,priority:2,localRef:!1})}},{key:"getComponentProperty",value:function(e){var t=this.map.get("$$shared_ctx$$0");return t.declare=!0,this.maybeRestoreView(0,!1),t.lhs.prop(e)}},{key:"maybeRestoreView",value:function(e,t){this.isListenerScope()&&(e<this.bindingLevel||t)&&(this.parent.restoreViewVariable||(this.parent.restoreViewVariable=Qe(this.parent.freshReferenceName())),this.restoreViewVariable=this.parent.restoreViewVariable)}},{key:"restoreViewStatement",value:function(){return this.restoreViewVariable?[Sc(null,Lt.restoreView,[this.restoreViewVariable]).toStmt()]:[]}},{key:"viewSnapshotStatements",value:function(){var e=Sc(null,Lt.getCurrentView,[]);return this.restoreViewVariable?[this.restoreViewVariable.set(e).toConstDecl()]:[]}},{key:"isListenerScope",value:function(){return this.parent&&this.parent.bindingLevel===this.bindingLevel}},{key:"variableDeclarations",value:function(){var e=this,t=0;return Array.from(this.map.values()).filter((function(e){return e.declare})).sort((function(e,t){return t.retrievalLevel-e.retrievalLevel||t.priority-e.priority})).reduce((function(n,r){var i=e.bindingLevel-r.retrievalLevel,a=r.declareLocalCallback(e,i-t);return t=i,n.concat(a)}),[])}},{key:"freshReferenceName",value:function(){for(var e=this;e.parent;)e=e.parent;return"".concat("_r").concat(e.referenceNameIndex++)}}],[{key:"createRootScope",value:function(){return(new e).set(0,"$event",Qe("$event"))}}]),e}();function Dc(e,t){var n=new M,r=v(e)[1];return n.setElement(r),Object.getOwnPropertyNames(t).forEach((function(e){var r=v(e)[1],i=t[e];(n.addAttribute(r,i),"class"===e.toLowerCase())&&i.trim().split(/\s+/).forEach((function(e){return n.addClassName(e)}))})),n}function jc(e){var t=W(e.value)[0];return[it(5),Cr(t)]}function Rc(e){switch(Rr(e)){case 1:return Lt.propertyInterpolate;case 3:return Lt.propertyInterpolate1;case 5:return Lt.propertyInterpolate2;case 7:return Lt.propertyInterpolate3;case 9:return Lt.propertyInterpolate4;case 11:return Lt.propertyInterpolate5;case 13:return Lt.propertyInterpolate6;case 15:return Lt.propertyInterpolate7;case 17:return Lt.propertyInterpolate8;default:return Lt.propertyInterpolateV}}var Lc=new Us;function Nc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr;return new zo(new As(new fs),e,Lc,null,[])}function Bc(e,t){switch(e){case L.HTML:return Je(Lt.sanitizeHtml);case L.SCRIPT:return Je(Lt.sanitizeScript);case L.STYLE:return t?Je(Lt.sanitizeStyle):null;case L.URL:return Je(Lt.sanitizeUrl);case L.RESOURCE_URL:return Je(Lt.sanitizeResourceUrl);default:return null}}function Uc(e){return 1===e.length&&e[0]instanceof bn}function Fc(e){return e instanceof pn||e instanceof hn||e instanceof xn}function qc(e){return e.every(Fc)}var Wc="ngI18nClosureMode";function Hc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,a=[br(t),rt(Kc(),hc(t,e,n,fr(r,!0)),mc(t,e,fr(r,!1)))];return i&&a.push(new Ge(t.set(i(t)))),a}function Kc(){return Ze(Qe(Wc)).notIdentical(it("undefined",ee)).and(Qe(Wc))}var zc=/attr\.([^\]]+)/;function Vc(e,t,n){var r=new Mr,i=W(e.selector);return r.set("type",e.internalType),i.length>0&&r.set("selectors",Cr(i)),e.queries.length>0&&r.set("contentQueries",function(e,t,n){var r,i=[],a=[],o=xr(a,_r),s=Object(u.a)(e);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=c.static?Lt.staticContentQuery:Lt.contentQuery;i.push(Je(l).callFn([Qe("dirIndex")].concat(Object(m.a)(Qc(c,t)))).toStmt());var d=o(),p=Je(Lt.loadQuery).callFn([]),h=Je(Lt.queryRefresh).callFn([d.set(p)]),f=Qe(yr).prop(c.propertyName).set(c.first?d.prop("first"):d);a.push(h.and(f).toStmt())}}catch(b){s.e(b)}finally{s.f()}var g=n?"".concat(n,"_ContentQueries"):null;return nt([new Pe(Or,Z),new Pe(yr,null),new Pe("dirIndex",null)],[Oc(1,i),Oc(2,a)],J,null,g)}(e.queries,t,e.name)),e.viewQueries.length&&r.set("viewQuery",function(e,t,n){var r=[],i=[],a=xr(i,_r);e.forEach((function(e){var n=Je(e.static?Lt.staticViewQuery:Lt.viewQuery).callFn(Qc(e,t));r.push(n.toStmt());var o=a(),s=Je(Lt.loadQuery).callFn([]),c=Je(Lt.queryRefresh).callFn([o.set(s)]),l=Qe(yr).prop(e.propertyName).set(e.first?o.prop("first"):o);i.push(c.and(l).toStmt())}));var o=n?"".concat(n,"_Query"):null;return nt([new Pe(Or,Z),new Pe(yr,null)],[Oc(1,r),Oc(2,i)],J,null,o)}(e.viewQueries,t,e.name)),r.set("hostBindings",function(e,t,n,r,i,a,o){var s=Qe(yr),c=new ls(s),l=e.specialAttributes,d=l.styleAttr,p=l.classAttr;void 0!==d&&c.registerStyleAttr(d);void 0!==p&&c.registerClassAttr(p);var h=[],f=[],g=t,b=tl(e),v=n.createDirectiveHostEventAsts(b,g);if(v&&v.length){var _=function(e,t){var n=[],r=[],i=[];e.forEach((function(e){var i=e.name&&At(e.name),a=1===e.type?Wt(i,e.targetOrPhase):i,o=t&&i?"".concat(t,"_").concat(a,"_HostBindingHandler"):null,s=xc(gn.fromParsedEvent(e),o);1==e.type?r.push(s):n.push(s)})),r.length>0&&i.push(jr(Lt.syntheticHostListener,r).toStmt());n.length>0&&i.push(jr(Lt.listener,n).toStmt());return i}(v,a);h.push.apply(h,Object(m.a)(_))}var y,O=n.createBoundHostProperties(b,g),x=[],E=0;O&&O.forEach((function(e){var t=e.name;c.registerInputBasedOnName(t,e.expression,e.sourceSpan)?E+=2:(x.push(e),E++)}));var k=function(){y||(y=new kc(r,(function(){return ut("Unexpected node")}),(function(e){var t=E;return E+=e,t}),(function(){return ut("Unexpected pipe")})));return y},C=[],w=[],S=[];x.forEach((function(e){var t=e.expression.visit(k()),r=el(s,t),a=function(e){var t,n=e.name,r=n.match(zc);r?(n=r[1],t=Lt.attribute):e.isAnimation?(n=Ft(n),t=Lt.syntheticHostProperty):t=Lt.hostProperty;return{bindingName:n,instruction:t,isAttribute:!!r}}(e),o=a.bindingName,c=a.instruction,l=a.isAttribute,u=n.calcPossibleSecurityContexts(i,o,l).filter((function(e){return e!==L.NONE})),d=null;u.length&&(d=2===u.length&&u.indexOf(L.URL)>-1&&u.indexOf(L.RESOURCE_URL)>-1?Je(Lt.sanitizeUrlOrResourceUrl):Bc(u[0],l));var p=[it(o),r.currValExpr];d&&p.push(d),f.push.apply(f,Object(m.a)(r.stmts)),c===Lt.hostProperty?C.push(p):c===Lt.attribute?w.push(p):c===Lt.syntheticHostProperty?S.push(p):f.push(Je(c).callFn(p).toStmt())})),C.length>0&&f.push(jr(Lt.hostProperty,C).toStmt());w.length>0&&f.push(jr(Lt.attribute,w).toStmt());S.length>0&&f.push(jr(Lt.syntheticHostProperty,S).toStmt());var I=function(e){var t,n=[],r=Object(u.a)(Object.getOwnPropertyNames(e));try{for(r.s();!(t=r.n()).done;){var i=t.value,a=e[i];n.push(it(i),a)}}catch(o){r.e(o)}finally{r.f()}return n}(e.attributes);c.assignHostAttrs(I,o),c.hasBindings&&c.buildUpdateLevelInstructions(k()).forEach((function(e){if(e.calls.length>0){var t=[];e.calls.forEach((function(e){E+=Math.max(e.allocateBindingSlots-2,0),t.push(function(e,t,n){return e.params((function(e){return n(t,e).currValExpr}))}(e,s,el))})),f.push(jr(e.reference,t).toStmt())}}));E&&o.set("hostVars",it(E));if(h.length>0||f.length>0){var T=a?"".concat(a,"_HostBindings"):null,A=[];return h.length>0&&A.push(Oc(1,h)),f.length>0&&A.push(Oc(2,f)),nt([new Pe(Or,Z),new Pe(yr,null)],A,J,null,T)}return null}(e.host,e.typeSourceSpan,n,t,e.selector||"",e.name,r)),r.set("inputs",wr(e.inputs,!0)),r.set("outputs",wr(e.outputs)),null!==e.exportAs&&r.set("exportAs",et(e.exportAs.map((function(e){return it(e)})))),r}function Gc(e,t){var n=[],r=t.providers,i=t.viewProviders;if(r||i){var a=[r||new Ne([])];i&&a.push(i),n.push(Je(Lt.ProvidersFeature).callFn(a))}t.usesInheritance&&n.push(Je(Lt.InheritDefinitionFeature)),t.fullInheritance&&n.push(Je(Lt.CopyDefinitionFeature)),t.lifecycle.usesOnChanges&&n.push(Je(Lt.NgOnChangesFeature)),n.length&&e.set("features",et(n))}function Yc(e,t,n){var r=Vc(e,t,n);Gc(r,e);var i=Je(Lt.defineDirective).callFn([r.toLiteralMap()]),a=Zc(e);return{expression:i,type:$e(Je(Lt.DirectiveDefWithMeta,a))}}function Xc(e,t,n){var r=Vc(e,t,n);Gc(r,e);var i=e.selector&&M.parse(e.selector),a=i&&i[0];if(a){var o=a.getAttrs();o.length&&r.set("attrs",t.getConstLiteral(et(o.map((function(e){return it(null!=e?e:void 0)}))),!0))}var s=null;if(e.directives.length>0){var c,l=new D,d=Object(u.a)(e.directives);try{for(d.s();!(c=d.n()).done;){var p=c.value,h=p.selector,f=p.expression;l.addSelectables(M.parse(h),f)}}catch(B){d.e(B)}finally{d.f()}s=l}var g=e.name,b=g?"".concat(g,"_Template"):null,v=new Set,_=new Set,y=e.changeDetection,O=e.template,x=new Ec(t,Mc.createRootScope(),0,g,null,null,b,s,v,e.pipes,_,Lt.namespaceHTML,e.relativeContextFilePath,e.i18nUseExternalIds),E=x.buildTemplateFunction(O.nodes,[]),k=x.getNgContentSelectors();k&&r.set("ngContentSelectors",k),r.set("decls",it(x.getConstCount())),r.set("vars",it(x.getVarCount()));var C=x.getConsts(),w=C.constExpressions,S=C.prepareStatements;if(w.length>0){var I=et(w);S.length>0&&(I=nt([],[].concat(Object(m.a)(S),[new Ye(I)]))),r.set("consts",I)}if(r.set("template",E),v.size){var P=et(Array.from(v));e.wrapDirectivesAndPipesInClosure&&(P=nt([],[new Ye(P)])),r.set("directives",P)}if(_.size){var j=et(Array.from(_));e.wrapDirectivesAndPipesInClosure&&(j=nt([],[new Ye(j)])),r.set("pipes",j)}if(null===e.encapsulation&&(e.encapsulation=T.Emulated),e.styles&&e.styles.length){var R=(e.encapsulation==T.Emulated?function(e,t,n){var r=new ha;return e.map((function(e){return r.shimCssText(e,t,n)}))}(e.styles,Va,za):e.styles).map((function(e){return t.getConstLiteral(it(e))}));r.set("styles",et(R))}else e.encapsulation===T.Emulated&&(e.encapsulation=T.None);e.encapsulation!==T.Emulated&&r.set("encapsulation",it(e.encapsulation)),null!==e.animations&&r.set("data",tt([{key:"animation",value:e.animations,quoted:!1}])),null!=y&&y!==A.Default&&r.set("changeDetection",it(y));var L=Je(Lt.defineComponent).callFn([r.toLiteralMap()]),N=Zc(e);return N.push($c(e.template.ngContentSelectors)),{expression:L,type:$e(Je(Lt.ComponentDefWithMeta,N))}}function Qc(e,t){var n=[Ir(e,t),it(e.descendants)];return e.read&&n.push(e.read),n}function Jc(e){return $e(tt(Object.keys(e).map((function(t){return{key:t,value:it(Array.isArray(e[t])?e[t][0]:e[t]),quoted:!0}}))))}function $c(e){return e.length>0?$e(et(e.map((function(e){return it(e)})))):te}function Zc(e){var t,n=null!==e.selector?e.selector.replace(/\n/g,""):null;return[Bt(e.type.type,e.typeArgumentCount),null!==n?(t=n,$e(it(t))):te,null!==e.exportAs?$c(e.exportAs):te,Jc(e.inputs),Jc(e.outputs),$c(e.queries.map((function(e){return e.propertyName})))]}function el(e,t){return ra(null,e,t,"b",ea.Expression,(function(){return ut("Unexpected interpolation")}))}function tl(e){return{hostAttributes:{},hostListeners:e.listeners,hostProperties:e.properties}}var nl=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;var rl=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"get",value:function(e){return""}}]),e}(),il=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii;Object(g.a)(this,e),this.jitEvaluator=t,this.R3ResolvedDependencyType=Pr,this.R3FactoryTarget=Ar,this.ResourceLoader=rl,this.elementSchemaRegistry=new Us}return Object(b.a)(e,[{key:"compilePipe",value:function(e,t,n){var r=di({name:n.name,type:ll(n.type),internalType:new le(n.type),typeArgumentCount:n.typeArgumentCount,deps:ml(n.deps),pipeName:n.pipeName,pure:n.pure});return this.jitExpression(r.expression,e,t,[])}},{key:"compileInjectable",value:function(e,t,n){var r=function(e){var t=null,n={name:e.name,type:e.type,internalType:e.internalType,typeArgumentCount:e.typeArgumentCount,deps:[],injectFn:It.inject,target:Ar.Injectable};if(void 0!==e.useClass){var r=e.useClass.isEquivalent(e.internalType),i=void 0;void 0!==e.userDeps&&(i=e.userDeps),t=void 0!==i?Lr(Object.assign(Object.assign({},n),{delegate:e.useClass,delegateDeps:i,delegateType:Tr.Class})):r?Lr(n):Ur(e.type.value,e.useClass)}else t=void 0!==e.useFactory?void 0!==e.userDeps?Lr(Object.assign(Object.assign({},n),{delegate:e.useFactory,delegateDeps:e.userDeps||[],delegateType:Tr.Function})):{statements:[],factory:nt([],[new Ye(e.useFactory.callFn([]))])}:void 0!==e.useValue?Lr(Object.assign(Object.assign({},n),{expression:e.useValue})):void 0!==e.useExisting?Lr(Object.assign(Object.assign({},n),{expression:Je(It.inject).callFn([e.useExisting])})):Ur(e.type.value,e.internalType);var a={token:e.internalType,factory:t.factory};return null!==e.providedIn.value&&(a.providedIn=e.providedIn),{expression:Je(It.\u0275\u0275defineInjectable).callFn([Nt(a)]),type:new X(Je(It.InjectableDef,[Bt(e.type.type,e.typeArgumentCount)])),statements:t.statements}}({name:n.name,type:ll(n.type),internalType:new le(n.type),typeArgumentCount:n.typeArgumentCount,providedIn:hl(n.providedIn),useClass:pl(n,al),useFactory:pl(n,ol),useValue:pl(n,sl),useExisting:pl(n,cl),userDeps:ml(n.userDeps)||void 0}),i=r.expression,a=r.statements;return this.jitExpression(i,e,t,a)}},{key:"compileInjector",value:function(e,t,n){var r=function(e){var t=Lr({name:e.name,type:e.type,internalType:e.internalType,typeArgumentCount:0,deps:e.deps,injectFn:Lt.inject,target:Ar.NgModule}),n={factory:t.factory};return null!==e.providers&&(n.providers=e.providers),e.imports.length>0&&(n.imports=et(e.imports)),{expression:Je(Lt.defineInjector).callFn([Nt(n)]),type:new X(Je(Lt.InjectorDef,[new X(e.type.type)])),statements:t.statements}}({name:n.name,type:ll(n.type),internalType:new le(n.type),deps:ml(n.deps),providers:new le(n.providers),imports:n.imports.map((function(e){return new le(e)}))});return this.jitExpression(r.expression,e,t,r.statements)}},{key:"compileNgModule",value:function(e,t,n){var r=ci({type:ll(n.type),internalType:new le(n.type),adjacentType:new le(n.type),bootstrap:n.bootstrap.map(ll),declarations:n.declarations.map(ll),imports:n.imports.map(ll),exports:n.exports.map(ll),emitInline:!0,containsForwardDecls:!1,schemas:n.schemas?n.schemas.map(ll):null,id:n.id?new le(n.id):null});return this.jitExpression(r.expression,e,t,[])}},{key:"compileDirective",value:function(e,t,n){var r=new xt,i=Nc(),a=Yc(dl(n),r,i);return this.jitExpression(a.expression,e,t,r.statements)}},{key:"compileComponent",value:function(e,t,n){var r=new xt,i=n.interpolation?Wr.fromArray(n.interpolation):Hr,a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.interpolationConfig,i=n.preserveWhitespaces,a=n.enableI18nLegacyMessageIdFormat,o=Nc(r),s=(new wo).parse(e,t,Object.assign(Object.assign({leadingTriviaChars:yc},n),{tokenizeExpansionForms:!0}));if(s.errors&&s.errors.length>0)return{errors:s.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};var c=s.rootNodes,l=new uc(r,!i,a);c=eo(l,c),i||(c=eo(new Do,c),l.hasI18nMeta&&(c=eo(new uc(r,!1),c)));var u=qs(c,o),d=u.nodes,p=u.errors,h=u.styleUrls,f=u.styles,m=u.ngContentSelectors;return p&&p.length>0?{errors:p,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]}:{nodes:d,styleUrls:h,styles:f,ngContentSelectors:m}}(n.template,t,{preserveWhitespaces:n.preserveWhitespaces,interpolationConfig:i});if(void 0!==a.errors){var o=a.errors.map((function(e){return e.toString()})).join(", ");throw new Error("Errors during JIT compilation of template for ".concat(n.name,": ").concat(o))}var s=Xc(Object.assign(Object.assign(Object.assign({},n),dl(n)),{selector:n.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:a,wrapDirectivesAndPipesInClosure:!1,styles:[].concat(Object(m.a)(n.styles),Object(m.a)(a.styles)),encapsulation:n.encapsulation,interpolation:i,changeDetection:n.changeDetection,animations:null!=n.animations?new le(n.animations):null,viewProviders:null!=n.viewProviders?new le(n.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0}),r,Nc(i)),c="ng:///".concat(n.name,".js");return this.jitExpression(s.expression,e,c,r.statements)}},{key:"compileFactory",value:function(e,t,n){var r=Lr({name:n.name,type:ll(n.type),internalType:new le(n.type),typeArgumentCount:n.typeArgumentCount,deps:ml(n.deps),injectFn:"directiveInject"===n.injectFn?It.directiveInject:It.inject,target:n.target});return this.jitExpression(r.factory,e,t,r.statements)}},{key:"createParseSourceSpan",value:function(e,t,n){return function(e,t,n){var r="in ".concat(e," ").concat(t," in ").concat(n),i=new ln("",r);return new un(new cn(i,-1,-1,-1),new cn(i,-1,-1,-1))}(e,t,n)}},{key:"jitExpression",value:function(e,t,n,r){var i=[].concat(Object(m.a)(r),[new ze("$def",e,void 0,[Ce.Exported])]);return this.jitEvaluator.evaluateStatements(n,i,new oi(t),!0).$def}}]),e}(),al=Object.keys({useClass:null})[0],ol=Object.keys({useFactory:null})[0],sl=Object.keys({useValue:null})[0],cl=Object.keys({useExisting:null})[0],ll=function(e){var t=new le(e);return{value:t,type:t}};function ul(e){return Object.assign(Object.assign({},e),{predicate:Array.isArray(e.predicate)?e.predicate:new le(e.predicate),read:e.read?new le(e.read):null,static:e.static})}function dl(e){var t=bl(e.inputs||[]),n=bl(e.outputs||[]),r=e.propMetadata,i={},a={},o=function(e){r.hasOwnProperty(e)&&r[e].forEach((function(t){!function(e){return"Input"===e.ngMetadataName}(t)?function(e){return"Output"===e.ngMetadataName}(t)&&(a[e]=t.bindingPropertyName||e):i[e]=t.bindingPropertyName?[t.bindingPropertyName,e]:e}))};for(var s in r)o(s);return Object.assign(Object.assign({},e),{typeSourceSpan:e.typeSourceSpan,type:ll(e.type),internalType:new le(e.type),deps:ml(e.deps),host:gl(e.propMetadata,e.typeSourceSpan,e.host),inputs:Object.assign(Object.assign({},t),i),outputs:Object.assign(Object.assign({},n),a),queries:e.queries.map(ul),providers:null!=e.providers?new le(e.providers):null,viewQueries:e.viewQueries.map(ul),fullInheritance:!1})}function pl(e,t){return e.hasOwnProperty(t)?new le(e[t]):void 0}function hl(e){return null==e||"string"==typeof e?new ge(e):new le(e)}function fl(e){return{token:null===e.token?new ge(null):e.resolved===Pr.Attribute?new ge(e.token):new le(e.token),attribute:null,resolved:e.resolved,host:e.host,optional:e.optional,self:e.self,skipSelf:e.skipSelf}}function ml(e){return null==e?null:e.map(fl)}function gl(e,t,n){var r=function(e){for(var t={},n={},r={},i={},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a],c=e[s],l=s.match(nl);if(null===l)switch(s){case"class":if("string"!=typeof c)throw new Error("Class binding must be string");i.classAttr=c;break;case"style":if("string"!=typeof c)throw new Error("Style binding must be string");i.styleAttr=c;break;default:t[s]="string"==typeof c?it(c):c}else if(null!=l[1]){if("string"!=typeof c)throw new Error("Property binding must be string");r[l[1]]=c}else if(null!=l[2]){if("string"!=typeof c)throw new Error("Event binding must be string");n[l[2]]=c}}return{attributes:t,listeners:n,properties:r,specialAttributes:i}}(n||{}),i=function(e,t){var n=tl(e),r=Nc();return r.createDirectiveHostEventAsts(n,t),r.createBoundHostProperties(n,t),r.errors}(r,t);if(i.length)throw new Error(i.map((function(e){return e.msg})).join("\n"));var a=function(t){e.hasOwnProperty(t)&&e[t].forEach((function(e){!function(e){return"HostBinding"===e.ngMetadataName}(e)?function(e){return"HostListener"===e.ngMetadataName}(e)&&(r.listeners[e.eventName||t]="".concat(t,"(").concat((e.args||[]).join(","),")")):r.properties[e.hostPropertyName||t]=t}))};for(var o in e)a(o);return r}function bl(e){return e.reduce((function(e,t){var n=t.split(",").map((function(e){return e.trim()})),r=Object(l.a)(n,2),i=r[0],a=r[1];return e[i]=a||i,e}),{})}new function e(t){Object(g.a)(this,e),this.full=t;var n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}("10.2.5");var vl;!function(e){e[e.Extract=0]="Extract",e[e.Merge=1]="Merge"}(vl||(vl={}));new(function(){function e(){Object(g.a)(this,e),this.closedByParent=!1,this.contentType=i.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0,this.preventNamespaceInheritance=!1}return Object(b.a)(e,[{key:"requireExtraParent",value:function(e){return!1}},{key:"isClosedByChild",value:function(e){return!1}}]),e}());var _l;!function(e){e[e.OnInit=0]="OnInit",e[e.OnDestroy=1]="OnDestroy",e[e.DoCheck=2]="DoCheck",e[e.OnChanges=3]="OnChanges",e[e.AfterContentInit=4]="AfterContentInit",e[e.AfterContentChecked=5]="AfterContentChecked",e[e.AfterViewInit=6]="AfterViewInit",e[e.AfterViewChecked=7]="AfterViewChecked"}(_l||(_l={}));_l.OnInit,_l.OnDestroy,_l.DoCheck,_l.OnChanges,_l.AfterContentInit,_l.AfterContentChecked,_l.AfterViewInit,_l.AfterViewChecked;Qe("_l");var yl="_any";new(function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"notifyImplicitReceiverUse",value:function(){}},{key:"getLocal",value:function(e){return e===Qi.event.name?Qe(yl):null}}]),e}()),Qe("_l"),Qe("_v"),Qe("_ck"),Qe("_co"),Qe("en"),Qe("ad");var Ol="useValue";new Set([Ol,"useFactory","data","id","loadChildren"]);var xl=function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,null,[{key:"build",value:function(){var t=new Map;return{define:function(e,n){return t.set(e,n),this},done:function(){return t.size>0?new El(t):e.empty}}}}]),e}();xl.missing={},xl.empty={resolve:function(e){return xl.missing}};var El=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this)).bindings=e,r}return Object(b.a)(n,[{key:"resolve",value:function(e){return this.bindings.has(e)?this.bindings.get(e):xl.missing}}]),n}(xl);var kl;new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");!function(e){e[e.Scheme=1]="Scheme",e[e.UserInfo=2]="UserInfo",e[e.Domain=3]="Domain",e[e.Port=4]="Port",e[e.Path=5]="Path",e[e.QueryData=6]="QueryData",e[e.Fragment=7]="Fragment"}(kl||(kl={}));!function(e){(e.ng||(e.ng={})).\u0275compilerFacade=new il}(gt)},"/J21":function(e,t,n){var r;e.exports=(function(e,t){var n=e.utils.isFunction;function r(e,t){return e-t}function i(e,n,r){return t.max(n,t.min(e,r))}e.sum=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.sumsqrd=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n]*e[n];return t},e.sumsqerr=function(t){for(var n,r=e.mean(t),i=0,a=t.length;--a>=0;)i+=(n=t[a]-r)*n;return i},e.sumrow=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.product=function(e){for(var t=1,n=e.length;--n>=0;)t*=e[n];return t},e.min=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]<t&&(t=e[n]);return t},e.max=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]>t&&(t=e[n]);return t},e.unique=function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(n){return t.pow(e.product(n),1/n.length)},e.median=function(e){var t=e.length,n=e.slice().sort(r);return 1&t?n[t/2|0]:(n[t/2-1]+n[t/2])/2},e.cumsum=function(t){return e.cumreduce(t,(function(e,t){return e+t}))},e.cumprod=function(t){return e.cumreduce(t,(function(e,t){return e*t}))},e.diff=function(e){var t,n=[],r=e.length;for(t=1;t<r;t++)n.push(e[t]-e[t-1]);return n},e.rank=function(e){var t,n=[],i={};for(t=0;t<e.length;t++)i[c=e[t]]?i[c]++:(i[c]=1,n.push(c));var a=n.sort(r),o={},s=1;for(t=0;t<a.length;t++){var c,l=i[c=a[t]],u=(s+(s+l-1))/2;o[c]=u,s+=l}return e.map((function(e){return o[e]}))},e.mode=function(e){var t,n=e.length,i=e.slice().sort(r),a=1,o=0,s=0,c=[];for(t=0;t<n;t++)i[t]===i[t+1]?a++:(a>o?(c=[i[t]],o=a,s=0):a===o&&(c.push(i[t]),s++),a=1);return 0===s?c[0]:c},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,n){return e.sumsqerr(t)/(t.length-(n?1:0))},e.pooledvariance=function(t){return t.reduce((function(t,n){return t+e.sumsqerr(n)}),0)/(t.reduce((function(e,t){return e+t.length}),0)-t.length)},e.deviation=function(t){for(var n=e.mean(t),r=t.length,i=new Array(r),a=0;a<r;a++)i[a]=t[a]-n;return i},e.stdev=function(n,r){return t.sqrt(e.variance(n,r))},e.pooledstdev=function(n){return t.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var r=e.mean(n),i=[],a=n.length-1;a>=0;a--)i.push(t.abs(n[a]-r));return e.mean(i)},e.meddev=function(n){for(var r=e.median(n),i=[],a=n.length-1;a>=0;a--)i.push(t.abs(n[a]-r));return e.median(i)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(e){var n=e.length,i=e.slice().sort(r);return[i[t.round(n/4)-1],i[t.round(n/2)-1],i[t.round(3*n/4)-1]]},e.quantiles=function(e,n,a,o){var s,c,l,u,d,p=e.slice().sort(r),h=[n.length],f=e.length;for(void 0===a&&(a=3/8),void 0===o&&(o=3/8),s=0;s<n.length;s++)l=f*(c=n[s])+(a+c*(1-a-o)),u=t.floor(i(l,1,f-1)),d=i(l-u,0,1),h[s]=(1-d)*p[u-1]+d*p[u];return h},e.percentile=function(e,t,n){var i=e.slice().sort(r),a=t*(i.length+(n?1:-1))+(n?0:1),o=parseInt(a),s=a-o;return o+1<i.length?i[o-1]+s*(i[o]-i[o-1]):i[o-1]},e.percentileOfScore=function(e,t,n){var r,i,a=0,o=e.length,s=!1;for("strict"===n&&(s=!0),i=0;i<o;i++)r=e[i],(s&&r<t||!s&&r<=t)&&a++;return a/o},e.histogram=function(n,r){r=r||4;var i,a=e.min(n),o=(e.max(n)-a)/r,s=n.length,c=[];for(i=0;i<r;i++)c[i]=0;for(i=0;i<s;i++)c[t.min(t.floor((n[i]-a)/o),r-1)]+=1;return c},e.covariance=function(t,n){var r,i=e.mean(t),a=e.mean(n),o=t.length,s=new Array(o);for(r=0;r<o;r++)s[r]=(t[r]-i)*(n[r]-a);return e.sum(s)/(o-1)},e.corrcoeff=function(t,n){return e.covariance(t,n)/e.stdev(t,1)/e.stdev(n,1)},e.spearmancoeff=function(t,n){return t=e.rank(t),n=e.rank(n),e.corrcoeff(t,n)},e.stanMoment=function(n,r){for(var i=e.mean(n),a=e.stdev(n),o=n.length,s=0,c=0;c<o;c++)s+=t.pow((n[c]-i)/a,r);return s/n.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var a=e.prototype;!function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(r,i){var o=[],s=0,c=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(c,a[t].call(c,r))})),this;if(this.length>1){for(c=!0===r?this:this.transpose();s<c.length;s++)o[s]=e[t](c[s]);return o}return e[t](this[0],r)}}(t[r])}("cumsum cumprod".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(r,i){var o=[],s=0,c=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(c,a[t].call(c,r))})),this;if(this.length>1){for("sumrow"!==t&&(c=!0===r?this:this.transpose());s<c.length;s++)o[s]=e[t](c[s]);return!0===r?e[t](e.utils.toVector(o)):o}return e[t](this[0],r)}}(t[r])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(){var r,i=[],o=0,s=this,c=Array.prototype.slice.call(arguments);if(n(c[c.length-1])){r=c[c.length-1];var l=c.slice(0,c.length-1);return setTimeout((function(){r.call(s,a[t].apply(s,l))})),this}r=void 0;var u=function(n){return e[t].apply(s,[n].concat(c))};if(this.length>1){for(s=s.transpose();o<s.length;o++)i[o]=u(s[o]);return i}return u(this[0])}}(t[r])}("quantiles percentileOfScore".split(" "))}(r=function(e,t){var n=Array.prototype.concat,r=Array.prototype.slice,i=Object.prototype.toString;function a(t,n){var r=t>n?t:n;return e.pow(10,17-~~(e.log(r>0?r:-r)*e.LOG10E))}var o=Array.isArray||function(e){return"[object Array]"===i.call(e)};function s(e){return"[object Function]"===i.call(e)}function c(e){return"number"==typeof e&&e-e==0}function l(e){return n.apply([],e)}function u(){return new u._init(arguments)}function d(){return 0}function p(){return 1}function h(e,t){return e===t?1:0}u.fn=u.prototype,u._init=function(e){if(o(e[0]))if(o(e[0][0])){s(e[1])&&(e[0]=u.map(e[0],e[1]));for(var t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=s(e[1])?u.map(e[0],e[1]):e[0],this.length=1;else if(c(e[0]))this[0]=u.seq.apply(null,e),this.length=1;else{if(e[0]instanceof u)return u(e[0].toArray());this[0]=[],this.length=1}return this},u._init.prototype=u.prototype,u._init.constructor=u,u.utils={calcRdx:a,isArray:o,isFunction:s,isNumber:c,toVector:l},u._random_fn=e.random,u.setRandom=function(e){if("function"!=typeof e)throw new TypeError("fn is not a function");u._random_fn=e},u.extend=function(e){var t,n;if(1===arguments.length){for(n in e)u[n]=e[n];return this}for(t=1;t<arguments.length;t++)for(n in arguments[t])e[n]=arguments[t][n];return e},u.rows=function(e){return e.length||1},u.cols=function(e){return e[0].length||1},u.dimensions=function(e){return{rows:u.rows(e),cols:u.cols(e)}},u.row=function(e,t){return o(t)?t.map((function(t){return u.row(e,t)})):e[t]},u.rowa=function(e,t){return u.row(e,t)},u.col=function(e,t){if(o(t)){var n=u.arange(e.length).map((function(){return new Array(t.length)}));return t.forEach((function(t,r){u.arange(e.length).forEach((function(i){n[i][r]=e[i][t]}))})),n}for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=[e[i][t]];return r},u.cola=function(e,t){return u.col(e,t).map((function(e){return e[0]}))},u.diag=function(e){for(var t=u.rows(e),n=new Array(t),r=0;r<t;r++)n[r]=[e[r][r]];return n},u.antidiag=function(e){for(var t=u.rows(e)-1,n=new Array(t),r=0;t>=0;t--,r++)n[r]=[e[r][t]];return n},u.transpose=function(e){var t,n,r,i,a,s=[];for(o(e[0])||(e=[e]),n=e.length,r=e[0].length,a=0;a<r;a++){for(t=new Array(n),i=0;i<n;i++)t[i]=e[i][a];s.push(t)}return 1===s.length?s[0]:s},u.map=function(e,t,n){var r,i,a,s,c;for(o(e[0])||(e=[e]),i=e.length,a=e[0].length,s=n?e:new Array(i),r=0;r<i;r++)for(s[r]||(s[r]=new Array(a)),c=0;c<a;c++)s[r][c]=t(e[r][c],r,c);return 1===s.length?s[0]:s},u.cumreduce=function(e,t,n){var r,i,a,s,c;for(o(e[0])||(e=[e]),i=e.length,a=e[0].length,s=n?e:new Array(i),r=0;r<i;r++)for(s[r]||(s[r]=new Array(a)),a>0&&(s[r][0]=e[r][0]),c=1;c<a;c++)s[r][c]=t(s[r][c-1],e[r][c]);return 1===s.length?s[0]:s},u.alter=function(e,t){return u.map(e,t,!0)},u.create=function(e,t,n){var r,i,a=new Array(e);for(s(t)&&(n=t,t=e),r=0;r<e;r++)for(a[r]=new Array(t),i=0;i<t;i++)a[r][i]=n(r,i);return a},u.zeros=function(e,t){return c(t)||(t=e),u.create(e,t,d)},u.ones=function(e,t){return c(t)||(t=e),u.create(e,t,p)},u.rand=function(e,t){return c(t)||(t=e),u.create(e,t,u._random_fn)},u.identity=function(e,t){return c(t)||(t=e),u.create(e,t,h)},u.symmetric=function(e){var t,n,r=e.length;if(e.length!==e[0].length)return!1;for(t=0;t<r;t++)for(n=0;n<r;n++)if(e[n][t]!==e[t][n])return!1;return!0},u.clear=function(e){return u.alter(e,d)},u.seq=function(e,t,n,r){s(r)||(r=!1);var i,o=[],c=a(e,t),l=(t*c-e*c)/((n-1)*c),u=e;for(i=0;u<=t&&i<n;u=(e*c+l*c*++i)/c)o.push(r?r(u,i):u);return o},u.arange=function(e,n,r){var i,a=[];if(r=r||1,n===t&&(n=e,e=0),e===n||0===r)return[];if(e<n&&r<0)return[];if(e>n&&r>0)return[];if(r>0)for(i=e;i<n;i+=r)a.push(i);else for(i=e;i>n;i+=r)a.push(i);return a},u.slice=function(){function e(e,n,r,i){var a,o=[],s=e.length;if(n===t&&r===t&&i===t)return u.copy(e);if(i=i||1,(n=(n=n||0)>=0?n:s+n)===(r=(r=r||e.length)>=0?r:s+r)||0===i)return[];if(n<r&&i<0)return[];if(n>r&&i>0)return[];if(i>0)for(a=n;a<r;a+=i)o.push(e[a]);else for(a=n;a>r;a+=i)o.push(e[a]);return o}function n(t,n){var r,i;return c((n=n||{}).row)?c(n.col)?t[n.row][n.col]:e(u.rowa(t,n.row),(r=n.col||{}).start,r.end,r.step):c(n.col)?e(u.cola(t,n.col),(i=n.row||{}).start,i.end,i.step):(i=n.row||{},r=n.col||{},e(t,i.start,i.end,i.step).map((function(t){return e(t,r.start,r.end,r.step)})))}return n}(),u.sliceAssign=function(n,r,i){var a,o;if(c(r.row)){if(c(r.col))return n[r.row][r.col]=i;r.col=r.col||{},r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,a=u.arange(r.col.start,e.min(n.length,r.col.end),r.col.step);var s=r.row;return a.forEach((function(e,t){n[s][e]=i[t]})),n}if(c(r.col)){r.row=r.row||{},r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,o=u.arange(r.row.start,e.min(n[0].length,r.row.end),r.row.step);var l=r.col;return o.forEach((function(e,t){n[e][l]=i[t]})),n}return i[0].length===t&&(i=[i]),r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,o=u.arange(r.row.start,e.min(n.length,r.row.end),r.row.step),a=u.arange(r.col.start,e.min(n[0].length,r.col.end),r.col.step),o.forEach((function(e,t){a.forEach((function(r,a){n[e][r]=i[t][a]}))})),n},u.diagonal=function(e){var t=u.zeros(e.length,e.length);return e.forEach((function(e,n){t[n][n]=e})),t},u.copy=function(e){return e.map((function(e){return c(e)?e:e.map((function(e){return e}))}))};var f=u.prototype;return f.length=0,f.push=Array.prototype.push,f.sort=Array.prototype.sort,f.splice=Array.prototype.splice,f.slice=Array.prototype.slice,f.toArray=function(){return this.length>1?r.call(this):r.call(this)[0]},f.map=function(e,t){return u(u.map(this,e,t))},f.cumreduce=function(e,t){return u(u.cumreduce(this,e,t))},f.alter=function(e){return u.alter(this,e),this},function(e){for(var t=0;t<e.length;t++)!function(e){f[e]=function(t){var n,r=this;return t?(setTimeout((function(){t.call(r,f[e].call(r))})),this):(n=u[e](this),o(n)?u(n):n)}}(e[t])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){f[e]=function(t,n){var r=this;return n?(setTimeout((function(){n.call(r,f[e].call(r,t))})),this):u(u[e](this,t))}}(e[t])}("row col".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){f[e]=function(){return u(u[e].apply(null,arguments))}}(e[t])}("create zeros ones rand identity".split(" ")),u}(Math),Math),function(e,t){e.gammaln=function(e){var n,r,i,a=0,o=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],s=1.000000000190015;for(i=(r=n=e)+5.5,i-=(n+.5)*t.log(i);a<6;a++)s+=o[a]/++r;return t.log(2.5066282746310007*s/n)-i},e.loggam=function(e){var n,r,i,a,o,s,c,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(n=e,c=0,1==e||2==e)return 0;for(e<=7&&(n=e+(c=t.floor(7-e))),r=1/(n*n),i=2*t.PI,o=l[9],s=8;s>=0;s--)o*=r,o+=l[s];if(a=o/n+.5*t.log(i)+(n-.5)*t.log(n)-n,e<=7)for(s=1;s<=c;s++)a-=t.log(n-1),n-=1;return a},e.gammafn=function(e){var n,r,i,a,o=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],s=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],c=!1,l=0,u=0,d=0,p=e;if(e>171.6243769536076)return 1/0;if(p<=0){if(!(a=p%1+36e-17))return 1/0;c=(1&p?-1:1)*t.PI/t.sin(t.PI*a),p=1-p}for(i=p,r=p<1?p++:(p-=l=(0|p)-1)-1,n=0;n<8;++n)d=(d+o[n])*r,u=u*r+s[n];if(a=d/u+1,i<p)a/=i;else if(i>p)for(n=0;n<l;++n)a*=p,p++;return c&&(a=c/a),a},e.gammap=function(t,n){return e.lowRegGamma(t,n)*e.gammafn(t)},e.lowRegGamma=function(n,r){var i,a=e.gammaln(n),o=n,s=1/n,c=s,l=r+1-n,u=1/1e-30,d=1/l,p=d,h=1,f=-~(8.5*t.log(n>=1?n:1/n)+.4*n+17);if(r<0||n<=0)return NaN;if(r<n+1){for(;h<=f;h++)s+=c*=r/++o;return s*t.exp(-r+n*t.log(r)-a)}for(;h<=f;h++)p*=(d=1/(d=(i=-h*(h-n))*d+(l+=2)))*(u=l+i/u);return 1-p*t.exp(-r+n*t.log(r)-a)},e.factorialln=function(t){return t<0?NaN:e.gammaln(t+1)},e.factorial=function(t){return t<0?NaN:e.gammafn(t+1)},e.combination=function(n,r){return n>170||r>170?t.exp(e.combinationln(n,r)):e.factorial(n)/e.factorial(r)/e.factorial(n-r)},e.combinationln=function(t,n){return e.factorialln(t)-e.factorialln(n)-e.factorialln(t-n)},e.permutation=function(t,n){return e.factorial(t)/e.factorial(t-n)},e.betafn=function(n,r){if(!(n<=0||r<=0))return n+r>170?t.exp(e.betaln(n,r)):e.gammafn(n)*e.gammafn(r)/e.gammafn(n+r)},e.betaln=function(t,n){return e.gammaln(t)+e.gammaln(n)-e.gammaln(t+n)},e.betacf=function(e,n,r){var i,a,o,s,c=1e-30,l=1,u=n+r,d=n+1,p=n-1,h=1,f=1-u*e/d;for(t.abs(f)<c&&(f=c),s=f=1/f;l<=100&&(f=1+(a=l*(r-l)*e/((p+(i=2*l))*(n+i)))*f,t.abs(f)<c&&(f=c),h=1+a/h,t.abs(h)<c&&(h=c),s*=(f=1/f)*h,f=1+(a=-(n+l)*(u+l)*e/((n+i)*(d+i)))*f,t.abs(f)<c&&(f=c),h=1+a/h,t.abs(h)<c&&(h=c),s*=o=(f=1/f)*h,!(t.abs(o-1)<3e-7));l++);return s},e.gammapinv=function(n,r){var i,a,o,s,c,l,u=0,d=r-1,p=1e-8,h=e.gammaln(r);if(n>=1)return t.max(100,r+100*t.sqrt(r));if(n<=0)return 0;for(r>1?(c=t.log(d),l=t.exp(d*(c-1)-h),s=n<.5?n:1-n,i=(2.30753+.27061*(a=t.sqrt(-2*t.log(s))))/(1+a*(.99229+.04481*a))-a,n<.5&&(i=-i),i=t.max(.001,r*t.pow(1-1/(9*r)-i/(3*t.sqrt(r)),3))):i=n<(a=1-r*(.253+.12*r))?t.pow(n/a,1/r):1-t.log(1-(n-a)/(1-a));u<12;u++){if(i<=0)return 0;if((i-=a=(o=(e.lowRegGamma(r,i)-n)/(a=r>1?l*t.exp(-(i-d)+d*(t.log(i)-c)):t.exp(-i+d*t.log(i)-h)))/(1-.5*t.min(1,o*((r-1)/i-1))))<=0&&(i=.5*(i+a)),t.abs(a)<p*i)break}return i},e.erf=function(e){var n,r,i,a,o=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],s=o.length-1,c=!1,l=0,u=0;for(e<0&&(e=-e,c=!0),r=4*(n=2/(2+e))-2;s>0;s--)i=l,l=r*l-u+o[s],u=i;return a=n*t.exp(-e*e+.5*(o[0]+r*l)-u),c?a-1:1-a},e.erfc=function(t){return 1-e.erf(t)},e.erfcinv=function(n){var r,i,a,o,s=0;if(n>=2)return-100;if(n<=0)return 100;for(o=n<1?n:2-n,r=-.70711*((2.30753+.27061*(a=t.sqrt(-2*t.log(o/2))))/(1+a*(.99229+.04481*a))-a);s<2;s++)r+=(i=e.erfc(r)-o)/(1.1283791670955126*t.exp(-r*r)-r*i);return n<1?r:-r},e.ibetainv=function(n,r,i){var a,o,s,c,l,u,d,p,h,f,m=1e-8,g=r-1,b=i-1,v=0;if(n<=0)return 0;if(n>=1)return 1;for(r>=1&&i>=1?(s=n<.5?n:1-n,u=(2.30753+.27061*(c=t.sqrt(-2*t.log(s))))/(1+c*(.99229+.04481*c))-c,n<.5&&(u=-u),d=(u*u-3)/6,p=2/(1/(2*r-1)+1/(2*i-1)),h=u*t.sqrt(d+p)/p-(1/(2*i-1)-1/(2*r-1))*(d+5/6-2/(3*p)),u=r/(r+i*t.exp(2*h))):(a=t.log(r/(r+i)),o=t.log(i/(r+i)),u=n<(c=t.exp(r*a)/r)/(h=c+(l=t.exp(i*o)/i))?t.pow(r*h*n,1/r):1-t.pow(i*h*(1-n),1/i)),f=-e.gammaln(r)-e.gammaln(i)+e.gammaln(r+i);v<10;v++){if(0===u||1===u)return u;if((u-=c=(l=(e.ibeta(u,r,i)-n)/(c=t.exp(g*t.log(u)+b*t.log(1-u)+f)))/(1-.5*t.min(1,l*(g/u-b/(1-u)))))<=0&&(u=.5*(u+c)),u>=1&&(u=.5*(u+c+1)),t.abs(c)<m*u&&v>0)break}return u},e.ibeta=function(n,r,i){var a=0===n||1===n?0:t.exp(e.gammaln(r+i)-e.gammaln(r)-e.gammaln(i)+r*t.log(n)+i*t.log(1-n));return!(n<0||n>1)&&(n<(r+1)/(r+i+2)?a*e.betacf(n,r,i)/r:1-a*e.betacf(1-n,i,r)/i)},e.randn=function(n,r){var i,a,o,s,c;if(r||(r=n),n)return e.create(n,r,(function(){return e.randn()}));do{i=e._random_fn(),a=1.7156*(e._random_fn()-.5),c=(o=i-.449871)*o+(s=t.abs(a)+.386595)*(.196*s-.25472*o)}while(c>.27597&&(c>.27846||a*a>-4*t.log(i)*i*i));return a/i},e.randg=function(n,r,i){var a,o,s,c,l,u,d=n;if(i||(i=r),n||(n=1),r)return(u=e.zeros(r,i)).alter((function(){return e.randg(n)})),u;n<1&&(n+=1),a=n-1/3,o=1/t.sqrt(9*a);do{do{c=1+o*(l=e.randn())}while(c<=0);c*=c*c,s=e._random_fn()}while(s>1-.331*t.pow(l,4)&&t.log(s)>.5*l*l+a*(1-c+t.log(c)));if(n==d)return a*c;do{s=e._random_fn()}while(0===s);return t.pow(s,1/d)*a*c},function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e.map(this,(function(n){return e[t](n)})))}}(t[n])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e[t].apply(null,arguments))}}(t[n])}("randn".split(" "))}(r,Math),function(e,t){function n(e,n,r,i){for(var a,o=0,s=1,c=1,l=1,u=0,d=0;t.abs((c-d)/c)>i;)d=c,s=l+(a=-(n+u)*(n+r+u)*e/(n+2*u)/(n+2*u+1))*s,c=(o=c+a*o)+(a=(u+=1)*(r-u)*e/(n+2*u-1)/(n+2*u))*c,o/=l=s+a*l,s/=l,c/=l,l=1;return c/n}function r(e){return e/t.abs(e)}function i(n,r,i){var a=12,o=6,s=-30,c=-50,l=60,u=8,d=3,p=2,h=3,f=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],m=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],g=.5*n;if(g>=u)return 1;var b,v=2*e.normal.cdf(g,0,1,1,0)-1;v=v>=t.exp(c/i)?t.pow(v,i):0;for(var _=g,y=(u-g)/(b=n>d?p:h),O=_+y,x=0,E=i-1,k=1;k<=b;k++){for(var C=0,w=.5*(O+_),S=.5*(O-_),I=1;I<=a;I++){var T,A=w+S*(o<I?f[(T=a-I+1)-1]:-f[(T=I)-1]),P=A*A;if(P>l)break;var M=2*e.normal.cdf(A,0,1,1,0)*.5-2*e.normal.cdf(A,n,1,1,0)*.5;M>=t.exp(s/E)&&(C+=M=m[T-1]*t.exp(-.5*P)*t.pow(M,E))}x+=C*=2*S*i/t.sqrt(2*t.PI),_=O,O+=y}return(v+=x)<=t.exp(s/r)?0:(v=t.pow(v,r))>=1?1:v}function a(e,n,r){var i=.322232421088,a=.099348462606,o=-1,s=.588581570495,c=-.342242088547,l=.531103462366,u=-.204231210125,d=.10353775285,p=-453642210148e-16,h=.0038560700634,f=.8832,m=.2368,g=1.214,b=1.208,v=1.4142,_=120,y=.5-.5*e,O=t.sqrt(t.log(1/(y*y))),x=O+((((O*p+u)*O+c)*O+o)*O+i)/((((O*h+d)*O+l)*O+s)*O+a);r<_&&(x+=(x*x*x+x)/r/4);var E=f-m*x;return r<_&&(E+=-g/r+b*x/r),x*(E*t.log(n-1)+v)}!function(t){for(var n=0;n<t.length;n++)!function(t){e[t]=function e(t,n,r){return this instanceof e?(this._a=t,this._b=n,this._c=r,this):new e(t,n,r)},e.fn[t]=function(n,r,i){var a=e[t](n,r,i);return a.data=this,a},e[t].prototype.sample=function(n){var r=this._a,i=this._b,a=this._c;return n?e.alter(n,(function(){return e[t].sample(r,i,a)})):e[t].sample(r,i,a)},function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(r){var i=this._a,a=this._b,o=this._c;return r||0===r||(r=this.data),"number"!=typeof r?e.fn.map.call(r,(function(r){return e[t][n](r,i,a,o)})):e[t][n](r,i,a,o)}}(n[r])}("pdf cdf inv".split(" ")),function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(){return e[t][n](this._a,this._b,this._c)}}(n[r])}("mean median mode variance".split(" "))}(t[n])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,r,i){return n>1||n<0?0:1==r&&1==i?1:r<512&&i<512?t.pow(n,r-1)*t.pow(1-n,i-1)/e.betafn(r,i):t.exp((r-1)*t.log(n)+(i-1)*t.log(1-n)-e.betaln(r,i))},cdf:function(t,n,r){return t>1||t<0?1*(t>1):e.ibeta(t,n,r)},inv:function(t,n,r){return e.ibetainv(t,n,r)},mean:function(e,t){return e/(e+t)},median:function(t,n){return e.ibetainv(.5,t,n)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(t,n){var r=e.randg(t);return r/(r+e.randg(n))},variance:function(e,n){return e*n/(t.pow(e+n,2)*(e+n+1))}}),e.extend(e.centralF,{pdf:function(n,r,i){var a;return n<0?0:r<=2?0===n&&r<2?1/0:0===n&&2===r?1:1/e.betafn(r/2,i/2)*t.pow(r/i,r/2)*t.pow(n,r/2-1)*t.pow(1+r/i*n,-(r+i)/2):(a=r*n/(i+n*r),r*(i/(i+n*r))/2*e.binomial.pdf((r-2)/2,(r+i-2)/2,a))},cdf:function(t,n,r){return t<0?0:e.ibeta(n*t/(n*t+r),n/2,r/2)},inv:function(t,n,r){return r/(n*(1/e.ibetainv(t,n/2,r/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(t,n){return 2*e.randg(t/2)/t/(2*e.randg(n/2)/n)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),e.extend(e.cauchy,{pdf:function(e,n,r){return r<0?0:r/(t.pow(e-n,2)+t.pow(r,2))/t.PI},cdf:function(e,n,r){return t.atan((e-n)/r)/t.PI+.5},inv:function(e,n,r){return n+r*t.tan(t.PI*(e-.5))},median:function(e){return e},mode:function(e){return e},sample:function(n,r){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*r+n}}),e.extend(e.chisquare,{pdf:function(n,r){return n<0?0:0===n&&2===r?.5:t.exp((r/2-1)*t.log(n)-n/2-r/2*t.log(2)-e.gammaln(r/2))},cdf:function(t,n){return t<0?0:e.lowRegGamma(n/2,t/2)},inv:function(t,n){return 2*e.gammapinv(t,.5*n)},mean:function(e){return e},median:function(e){return e*t.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(t){return 2*e.randg(t/2)},variance:function(e){return 2*e}}),e.extend(e.exponential,{pdf:function(e,n){return e<0?0:n*t.exp(-n*e)},cdf:function(e,n){return e<0?0:1-t.exp(-n*e)},inv:function(e,n){return-t.log(1-e)/n},mean:function(e){return 1/e},median:function(e){return 1/e*t.log(2)},mode:function(){return 0},sample:function(n){return-1/n*t.log(e._random_fn())},variance:function(e){return t.pow(e,-2)}}),e.extend(e.gamma,{pdf:function(n,r,i){return n<0?0:0===n&&1===r?1/i:t.exp((r-1)*t.log(n)-n/i-e.gammaln(r)-r*t.log(i))},cdf:function(t,n,r){return t<0?0:e.lowRegGamma(n,t/r)},inv:function(t,n,r){return e.gammapinv(t,n)*r},mean:function(e,t){return e*t},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(t,n){return e.randg(t)*n},variance:function(e,t){return e*t*t}}),e.extend(e.invgamma,{pdf:function(n,r,i){return n<=0?0:t.exp(-(r+1)*t.log(n)-i/n-e.gammaln(r)+r*t.log(i))},cdf:function(t,n,r){return t<=0?0:1-e.lowRegGamma(n,r/t)},inv:function(t,n,r){return r/e.gammapinv(1-t,n)},mean:function(e,t){return e>1?t/(e-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(t,n){return n/e.randg(t)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),e.extend(e.kumaraswamy,{pdf:function(e,n,r){return 0===e&&1===n?r:1===e&&1===r?n:t.exp(t.log(n)+t.log(r)+(n-1)*t.log(e)+(r-1)*t.log(1-t.pow(e,n)))},cdf:function(e,n,r){return e<0?0:e>1?1:1-t.pow(1-t.pow(e,n),r)},inv:function(e,n,r){return t.pow(1-t.pow(1-e,1/r),1/n)},mean:function(t,n){return n*e.gammafn(1+1/t)*e.gammafn(n)/e.gammafn(1+1/t+n)},median:function(e,n){return t.pow(1-t.pow(2,-1/n),1/e)},mode:function(e,n){if(e>=1&&n>=1&&1!==e&&1!==n)return t.pow((e-1)/(e*n-1),1/e)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(e,n,r){return e<=0?0:t.exp(-t.log(e)-.5*t.log(2*t.PI)-t.log(r)-t.pow(t.log(e)-n,2)/(2*r*r))},cdf:function(n,r,i){return n<0?0:.5+.5*e.erf((t.log(n)-r)/t.sqrt(2*i*i))},inv:function(n,r,i){return t.exp(-1.4142135623730951*i*e.erfcinv(2*n)+r)},mean:function(e,n){return t.exp(e+n*n/2)},median:function(e){return t.exp(e)},mode:function(e,n){return t.exp(e-n*n)},sample:function(n,r){return t.exp(e.randn()*r+n)},variance:function(e,n){return(t.exp(n*n)-1)*t.exp(2*e+n*n)}}),e.extend(e.noncentralt,{pdf:function(n,r,i){var a=1e-14;return t.abs(i)<a?e.studentt.pdf(n,r):t.abs(n)<a?t.exp(e.gammaln((r+1)/2)-i*i/2-.5*t.log(t.PI*r)-e.gammaln(r/2)):r/n*(e.noncentralt.cdf(n*t.sqrt(1+2/r),r+2,i)-e.noncentralt.cdf(n,r,i))},cdf:function(n,r,i){var a=1e-14,o=200;if(t.abs(i)<a)return e.studentt.cdf(n,r);var s=!1;n<0&&(s=!0,i=-i);for(var c=e.normal.cdf(-i,0,1),l=a+1,u=l,d=n*n/(n*n+r),p=0,h=t.exp(-i*i/2),f=t.exp(-i*i/2-.5*t.log(2)-e.gammaln(1.5))*i;p<o||u>a||l>a;)u=l,p>0&&(h*=i*i/(2*p),f*=i*i/(2*(p+.5))),c+=.5*(l=h*e.beta.cdf(d,p+.5,r/2)+f*e.beta.cdf(d,p+1,r/2)),p++;return s?1-c:c}}),e.extend(e.normal,{pdf:function(e,n,r){return t.exp(-.5*t.log(2*t.PI)-t.log(r)-t.pow(e-n,2)/(2*r*r))},cdf:function(n,r,i){return.5*(1+e.erf((n-r)/t.sqrt(2*i*i)))},inv:function(t,n,r){return-1.4142135623730951*r*e.erfcinv(2*t)+n},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},sample:function(t,n){return e.randn()*n+t},variance:function(e,t){return t*t}}),e.extend(e.pareto,{pdf:function(e,n,r){return e<n?0:r*t.pow(n,r)/t.pow(e,r+1)},cdf:function(e,n,r){return e<n?0:1-t.pow(n/e,r)},inv:function(e,n,r){return n/t.pow(1-e,1/r)},mean:function(e,n){if(!(n<=1))return n*t.pow(e,n)/(n-1)},median:function(e,n){return e*(n*t.SQRT2)},mode:function(e){return e},variance:function(e,n){if(!(n<=2))return e*e*n/(t.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,r){return r=r>1e100?1e100:r,1/(t.sqrt(r)*e.betafn(.5,r/2))*t.pow(1+n*n/r,-(r+1)/2)},cdf:function(n,r){var i=r/2;return e.ibeta((n+t.sqrt(n*n+r))/(2*t.sqrt(n*n+r)),i,i)},inv:function(n,r){var i=e.ibetainv(2*t.min(n,1-n),.5*r,.5);return i=t.sqrt(r*(1-i)/i),n>.5?i:-i},mean:function(e){return e>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(n){return e.randn()*t.sqrt(n/(2*e.randg(n/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(e,n,r){return e<0||n<0||r<0?0:r/n*t.pow(e/n,r-1)*t.exp(-t.pow(e/n,r))},cdf:function(e,n,r){return e<0?0:1-t.exp(-t.pow(e/n,r))},inv:function(e,n,r){return n*t.pow(-t.log(1-e),1/r)},mean:function(t,n){return t*e.gammafn(1+1/n)},median:function(e,n){return e*t.pow(t.log(2),1/n)},mode:function(e,n){return n<=1?0:e*t.pow((n-1)/n,1/n)},sample:function(n,r){return n*t.pow(-t.log(e._random_fn()),1/r)},variance:function(n,r){return n*n*e.gammafn(1+2/r)-t.pow(e.weibull.mean(n,r),2)}}),e.extend(e.uniform,{pdf:function(e,t,n){return e<t||e>n?0:1/(n-t)},cdf:function(e,t,n){return e<t?0:e<n?(e-t)/(n-t):1},inv:function(e,t,n){return t+e*(n-t)},mean:function(e,t){return.5*(e+t)},median:function(t,n){return e.mean(t,n)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(t,n){return t/2+n/2+(n/2-t/2)*(2*e._random_fn()-1)},variance:function(e,n){return t.pow(n-e,2)/12}}),e.extend(e.binomial,{pdf:function(n,r,i){return 0===i||1===i?r*i===n?1:0:e.combination(r,n)*t.pow(i,n)*t.pow(1-i,r-n)},cdf:function(r,i,a){var o,s=1e-10;if(r<0)return 0;if(r>=i)return 1;if(a<0||a>1||i<=0)return NaN;var c=a,l=(r=t.floor(r))+1,u=i-r,d=l+u,p=t.exp(e.gammaln(d)-e.gammaln(u)-e.gammaln(l)+l*t.log(c)+u*t.log(1-c));return o=c<(l+1)/(d+2)?p*n(c,l,u,s):1-p*n(1-c,u,l,s),t.round(1/s*(1-o))/(1/s)}}),e.extend(e.negbin,{pdf:function(n,r,i){return n===n>>>0&&(n<0?0:e.combination(n+r-1,r-1)*t.pow(1-i,n)*t.pow(i,r))},cdf:function(t,n,r){var i=0,a=0;if(t<0)return 0;for(;a<=t;a++)i+=e.negbin.pdf(a,n,r);return i}}),e.extend(e.hypgeom,{pdf:function(n,r,i,a){if(n!=n|0)return!1;if(n<0||n<i-(r-a))return 0;if(n>a||n>i)return 0;if(2*i>r)return 2*a>r?e.hypgeom.pdf(r-i-a+n,r,r-i,r-a):e.hypgeom.pdf(a-n,r,r-i,a);if(2*a>r)return e.hypgeom.pdf(i-n,r,i,r-a);if(i<a)return e.hypgeom.pdf(n,r,a,i);for(var o=1,s=0,c=0;c<n;c++){for(;o>1&&s<a;)o*=1-i/(r-s),s++;o*=(a-c)*(i-c)/((c+1)*(r-i-a+c+1))}for(;s<a;s++)o*=1-i/(r-s);return t.min(1,t.max(0,o))},cdf:function(n,r,i,a){if(n<0||n<i-(r-a))return 0;if(n>=a||n>=i)return 1;if(2*i>r)return 2*a>r?e.hypgeom.cdf(r-i-a+n,r,r-i,r-a):1-e.hypgeom.cdf(a-n-1,r,r-i,a);if(2*a>r)return 1-e.hypgeom.cdf(i-n-1,r,i,r-a);if(i<a)return e.hypgeom.cdf(n,r,a,i);for(var o=1,s=1,c=0,l=0;l<n;l++){for(;o>1&&c<a;){var u=1-i/(r-c);s*=u,o*=u,c++}o+=s*=(a-l)*(i-l)/((l+1)*(r-i-a+l+1))}for(;c<a;c++)o*=1-i/(r-c);return t.min(1,t.max(0,o))}}),e.extend(e.poisson,{pdf:function(n,r){return r<0||n%1!=0||n<0?0:t.pow(r,n)*t.exp(-r)/e.factorial(n)},cdf:function(t,n){var r=[],i=0;if(t<0)return 0;for(;i<=t;i++)r.push(e.poisson.pdf(i,n));return e.sum(r)},mean:function(e){return e},variance:function(e){return e},sampleSmall:function(n){var r=1,i=0,a=t.exp(-n);do{i++,r*=e._random_fn()}while(r>a);return i-1},sampleLarge:function(n){var r,i,a,o,s,c,l,u,d,p,h=n;for(o=t.sqrt(h),s=t.log(h),c=.02483*(l=.931+2.53*o)-.059,u=1.1239+1.1328/(l-3.4),d=.9277-3.6224/(l-2);;){if(i=t.random()-.5,a=t.random(),p=.5-t.abs(i),r=t.floor((2*c/p+l)*i+h+.43),p>=.07&&a<=d)return r;if(!(r<0||p<.013&&a>p)&&t.log(a)+t.log(u)-t.log(c/(p*p)+l)<=r*s-h-e.loggam(r+1))return r}},sample:function(e){return e<10?this.sampleSmall(e):this.sampleLarge(e)}}),e.extend(e.triangular,{pdf:function(e,t,n,r){return n<=t||r<t||r>n?NaN:e<t||e>n?0:e<r?2*(e-t)/((n-t)*(r-t)):e===r?2/(n-t):2*(n-e)/((n-t)*(n-r))},cdf:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=n?0:e>=r?1:e<=i?t.pow(e-n,2)/((r-n)*(i-n)):1-t.pow(r-e,2)/((r-n)*(r-i))},inv:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=(i-n)/(r-n)?n+(r-n)*t.sqrt(e*((i-n)/(r-n))):n+(r-n)*(1-t.sqrt((1-e)*(1-(i-n)/(r-n))))},mean:function(e,t,n){return(e+t+n)/3},median:function(e,n,r){return r<=(e+n)/2?n-t.sqrt((n-e)*(n-r))/t.sqrt(2):r>(e+n)/2?e+t.sqrt((n-e)*(r-e))/t.sqrt(2):void 0},mode:function(e,t,n){return n},sample:function(n,r,i){var a=e._random_fn();return a<(i-n)/(r-n)?n+t.sqrt(a*(r-n)*(i-n)):r-t.sqrt((1-a)*(r-n)*(r-i))},variance:function(e,t,n){return(e*e+t*t+n*n-e*t-e*n-t*n)/18}}),e.extend(e.arcsine,{pdf:function(e,n,r){return r<=n?NaN:e<=n||e>=r?0:2/t.PI*t.pow(t.pow(r-n,2)-t.pow(2*e-n-r,2),-.5)},cdf:function(e,n,r){return e<n?0:e<r?2/t.PI*t.asin(t.sqrt((e-n)/(r-n))):1},inv:function(e,n,r){return n+(.5-.5*t.cos(t.PI*e))*(r-n)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,r){return(n+r)/2+(r-n)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(e,n){return n<=e?NaN:t.pow(n-e,2)/8}}),e.extend(e.laplace,{pdf:function(e,n,r){return r<=0?0:t.exp(-t.abs(e-n)/r)/(2*r)},cdf:function(e,n,r){return r<=0?0:e<n?.5*t.exp((e-n)/r):1-.5*t.exp(-(e-n)/r)},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},variance:function(e,t){return 2*t*t},sample:function(n,i){var a=e._random_fn()-.5;return n-i*r(a)*t.log(1-2*t.abs(a))}}),e.extend(e.tukey,{cdf:function(n,r,a){var o=1,s=r,c=16,l=8,u=-30,d=1e-14,p=100,h=800,f=5e3,m=25e3,g=1,b=.5,v=.25,_=.125,y=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],O=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(a<2||o<1||s<2)return NaN;if(!Number.isFinite(n))return 1;if(a>m)return i(n,o,s);var x,E=.5*a,k=E*t.log(a)-a*t.log(2)-e.gammaln(E),C=E-1,w=.25*a;x=a<=p?g:a<=h?b:a<=f?v:_,k+=t.log(x);for(var S=0,I=1;I<=50;I++){for(var T=0,A=(2*I-1)*x,P=1;P<=c;P++){var M,D;l<P?(M=P-l-1,D=k+C*t.log(A+y[M]*x)-(y[M]*x+A)*w):(M=P-1,D=k+C*t.log(A-y[M]*x)+(y[M]*x-A)*w),D>=u&&(T+=i(l<P?n*t.sqrt(.5*(y[M]*x+A)):n*t.sqrt(.5*(-y[M]*x+A)),o,s)*O[M]*t.exp(D))}if(I*x>=1&&T<=d)break;S+=T}if(T>d)throw new Error("tukey.cdf failed to converge");return S>1&&(S=1),S},inv:function(n,r,i){var o=1e-4,s=50;if(i<2||r<2)return NaN;if(n<0||n>1)return NaN;if(0===n)return 0;if(1===n)return 1/0;var c,l=a(n,r,i),u=e.tukey.cdf(l,r,i)-n;c=u>0?t.max(0,l-1):l+1;for(var d,p=e.tukey.cdf(c,r,i)-n,h=1;h<s;h++)if(d=c-p*(c-l)/(p-u),u=p,l=c,d<0&&(d=0,p=-n),p=e.tukey.cdf(d,r,i)-n,c=d,t.abs(c-l)<o)return d;throw new Error("tukey.inv failed to converge")}})}(r,Math),function(e,t){var n=Array.prototype.push,r=e.utils.isArray;function i(t){return r(t)||t instanceof e}e.extend({add:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e+n[t][r]}))):e.map(t,(function(e){return e+n}))},subtract:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e-n[t][r]||0}))):e.map(t,(function(e){return e-n}))},divide:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.multiply(t,e.inv(n))):e.map(t,(function(e){return e/n}))},multiply:function(t,n){var r,a,o,s,c,l,u,d;if(void 0===t.length&&void 0===n.length)return t*n;if(c=t.length,l=t[0].length,u=e.zeros(c,o=i(n)?n[0].length:l),d=0,i(n)){for(;d<o;d++)for(r=0;r<c;r++){for(s=0,a=0;a<l;a++)s+=t[r][a]*n[a][d];u[r][d]=s}return 1===c&&1===d?u[0][0]:u}return e.map(t,(function(e){return e*n}))},outer:function(t,n){return e.multiply(t.map((function(e){return[e]})),[n])},dot:function(t,n){i(t[0])||(t=[t]),i(n[0])||(n=[n]);for(var r,a,o=1===t[0].length&&1!==t.length?e.transpose(t):t,s=1===n[0].length&&1!==n.length?e.transpose(n):n,c=[],l=0,u=o.length,d=o[0].length;l<u;l++){for(c[l]=[],r=0,a=0;a<d;a++)r+=o[l][a]*s[l][a];c[l]=r}return 1===c.length?c[0]:c},pow:function(n,r){return e.map(n,(function(e){return t.pow(e,r)}))},exp:function(n){return e.map(n,(function(e){return t.exp(e)}))},log:function(n){return e.map(n,(function(e){return t.log(e)}))},abs:function(n){return e.map(n,(function(e){return t.abs(e)}))},norm:function(e,n){var r=0,a=0;for(isNaN(n)&&(n=2),i(e[0])&&(e=e[0]);a<e.length;a++)r+=t.pow(t.abs(e[a]),n);return t.pow(r,1/n)},angle:function(n,r){return t.acos(e.dot(n,r)/(e.norm(n)*e.norm(r)))},aug:function(e,t){var r,i=[];for(r=0;r<e.length;r++)i.push(e[r].slice());for(r=0;r<i.length;r++)n.apply(i[r],t[r]);return i},inv:function(t){for(var n,r=t.length,i=t[0].length,a=e.identity(r,i),o=e.gauss_jordan(t,a),s=[],c=0;c<r;c++)for(s[c]=[],n=i;n<o[0].length;n++)s[c][n-i]=o[c][n];return s},det:function(e){var t,n=e.length,r=2*n,i=new Array(r),a=n-1,o=r-1,s=a-n+1,c=o,l=0,u=0;if(2===n)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)i[l]=1;for(l=0;l<n;l++){for(t=0;t<n;t++)i[s<0?s+n:s]*=e[l][t],i[c<n?c+n:c]*=e[l][t],s++,c--;s=--a-n+1,c=--o}for(l=0;l<n;l++)u+=i[l];for(;l<r;l++)u-=i[l];return u},gauss_elimination:function(n,r){var i,a,o,s,c=0,l=0,u=n.length,d=n[0].length,p=1,h=0,f=[];for(i=(n=e.aug(n,r))[0].length,c=0;c<u;c++){for(a=n[c][c],l=c,s=c+1;s<d;s++)a<t.abs(n[s][c])&&(a=n[s][c],l=s);if(l!=c)for(s=0;s<i;s++)o=n[c][s],n[c][s]=n[l][s],n[l][s]=o;for(l=c+1;l<u;l++)for(p=n[l][c]/n[c][c],s=c;s<i;s++)n[l][s]=n[l][s]-p*n[c][s]}for(c=u-1;c>=0;c--){for(h=0,l=c+1;l<=u-1;l++)h+=f[l]*n[c][l];f[c]=(n[c][i-1]-h)/n[c][c]}return f},gauss_jordan:function(n,r){var i,a,o,s=e.aug(n,r),c=s.length,l=s[0].length,u=0;for(a=0;a<c;a++){var d=a;for(o=a+1;o<c;o++)t.abs(s[o][a])>t.abs(s[d][a])&&(d=o);var p=s[a];for(s[a]=s[d],s[d]=p,o=a+1;o<c;o++)for(u=s[o][a]/s[a][a],i=a;i<l;i++)s[o][i]-=s[a][i]*u}for(a=c-1;a>=0;a--){for(u=s[a][a],o=0;o<a;o++)for(i=l-1;i>a-1;i--)s[o][i]-=s[a][i]*s[o][a]/u;for(s[a][a]/=u,i=c;i<l;i++)s[a][i]/=u}return s},triaUpSolve:function(t,n){var r,i=t[0].length,a=e.zeros(1,i)[0],o=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),o=!0),e.arange(i-1,-1,-1).forEach((function(o){r=e.arange(o+1,i).map((function(e){return a[e]*t[o][e]})),a[o]=(n[o]-e.sum(r))/t[o][o]})),o?a.map((function(e){return[e]})):a},triaLowSolve:function(t,n){var r,i=t[0].length,a=e.zeros(1,i)[0],o=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),o=!0),e.arange(i).forEach((function(i){r=e.arange(i).map((function(e){return t[i][e]*a[e]})),a[i]=(n[i]-e.sum(r))/t[i][i]})),o?a.map((function(e){return[e]})):a},lu:function(t){var n,r=t.length,i=e.identity(r),a=e.zeros(t.length,t[0].length);return e.arange(r).forEach((function(e){a[0][e]=t[0][e]})),e.arange(1,r).forEach((function(o){e.arange(o).forEach((function(r){n=e.arange(r).map((function(e){return i[o][e]*a[e][r]})),i[o][r]=(t[o][r]-e.sum(n))/a[r][r]})),e.arange(o,r).forEach((function(r){n=e.arange(o).map((function(e){return i[o][e]*a[e][r]})),a[o][r]=t[n.length][r]-e.sum(n)}))})),[i,a]},cholesky:function(n){var r,i=n.length,a=e.zeros(n.length,n[0].length);return e.arange(i).forEach((function(o){r=e.arange(o).map((function(e){return t.pow(a[o][e],2)})),a[o][o]=t.sqrt(n[o][o]-e.sum(r)),e.arange(o+1,i).forEach((function(t){r=e.arange(o).map((function(e){return a[o][e]*a[t][e]})),a[t][o]=(n[o][t]-e.sum(r))/a[o][o]}))})),a},gauss_jacobi:function(n,r,i,a){for(var o,s,c,l,u=0,d=0,p=n.length,h=[],f=[],m=[];u<p;u++)for(h[u]=[],f[u]=[],m[u]=[],d=0;d<p;d++)u>d?(h[u][d]=n[u][d],f[u][d]=m[u][d]=0):u<d?(f[u][d]=n[u][d],h[u][d]=m[u][d]=0):(m[u][d]=n[u][d],h[u][d]=f[u][d]=0);for(c=e.multiply(e.multiply(e.inv(m),e.add(h,f)),-1),s=e.multiply(e.inv(m),r),o=i,l=e.add(e.multiply(c,i),s),u=2;t.abs(e.norm(e.subtract(l,o)))>a;)o=l,l=e.add(e.multiply(c,o),s),u++;return l},gauss_seidel:function(n,r,i,a){for(var o,s,c,l,u,d=0,p=n.length,h=[],f=[],m=[];d<p;d++)for(h[d]=[],f[d]=[],m[d]=[],o=0;o<p;o++)d>o?(h[d][o]=n[d][o],f[d][o]=m[d][o]=0):d<o?(f[d][o]=n[d][o],h[d][o]=m[d][o]=0):(m[d][o]=n[d][o],h[d][o]=f[d][o]=0);for(l=e.multiply(e.multiply(e.inv(e.add(m,h)),f),-1),c=e.multiply(e.inv(e.add(m,h)),r),s=i,u=e.add(e.multiply(l,i),c),d=2;t.abs(e.norm(e.subtract(u,s)))>a;)s=u,u=e.add(e.multiply(l,s),c),d+=1;return u},SOR:function(n,r,i,a,o){for(var s,c,l,u,d,p=0,h=n.length,f=[],m=[],g=[];p<h;p++)for(f[p]=[],m[p]=[],g[p]=[],s=0;s<h;s++)p>s?(f[p][s]=n[p][s],m[p][s]=g[p][s]=0):p<s?(m[p][s]=n[p][s],f[p][s]=g[p][s]=0):(g[p][s]=n[p][s],f[p][s]=m[p][s]=0);for(u=e.multiply(e.inv(e.add(g,e.multiply(f,o))),e.subtract(e.multiply(g,1-o),e.multiply(m,o))),l=e.multiply(e.multiply(e.inv(e.add(g,e.multiply(f,o))),r),o),c=i,d=e.add(e.multiply(u,i),l),p=2;t.abs(e.norm(e.subtract(d,c)))>a;)c=d,d=e.add(e.multiply(u,c),l),p++;return d},householder:function(n){for(var r,i,a,o,s=n.length,c=n[0].length,l=0,u=[],d=[];l<s-1;l++){for(r=0,o=l+1;o<c;o++)r+=n[o][l]*n[o][l];for(r=(n[l+1][l]>0?-1:1)*t.sqrt(r),i=t.sqrt((r*r-n[l+1][l]*r)/2),(u=e.zeros(s,1))[l+1][0]=(n[l+1][l]-r)/(2*i),a=l+2;a<s;a++)u[a][0]=n[a][l]/(2*i);d=e.subtract(e.identity(s,c),e.multiply(e.multiply(u,e.transpose(u)),2)),n=e.multiply(d,e.multiply(n,d))}return n},QR:function(){var n=e.sum,r=e.arange;function i(i){var a,o,s,c=i.length,l=i[0].length,u=e.zeros(l,l);for(i=e.copy(i),o=0;o<l;o++){for(u[o][o]=t.sqrt(n(r(c).map((function(e){return i[e][o]*i[e][o]})))),a=0;a<c;a++)i[a][o]=i[a][o]/u[o][o];for(s=o+1;s<l;s++)for(u[o][s]=n(r(c).map((function(e){return i[e][o]*i[e][s]}))),a=0;a<c;a++)i[a][s]=i[a][s]-i[a][o]*u[o][s]}return[i,u]}return i}(),lstsq:function(){function t(t){var n=(t=e.copy(t)).length,r=e.identity(n);return e.arange(n-1,-1,-1).forEach((function(n){e.sliceAssign(r,{row:n},e.divide(e.slice(r,{row:n}),t[n][n])),e.sliceAssign(t,{row:n},e.divide(e.slice(t,{row:n}),t[n][n])),e.arange(n).forEach((function(i){var a=e.multiply(t[i][n],-1),o=e.slice(t,{row:i}),s=e.multiply(e.slice(t,{row:n}),a);e.sliceAssign(t,{row:i},e.add(o,s));var c=e.slice(r,{row:i}),l=e.multiply(e.slice(r,{row:n}),a);e.sliceAssign(r,{row:i},e.add(c,l))}))})),r}function n(n,r){var i=!1;void 0===r[0].length&&(r=r.map((function(e){return[e]})),i=!0);var a=e.QR(n),o=a[0],s=a[1],c=n[0].length,l=e.slice(o,{col:{end:c}}),u=t(e.slice(s,{row:{end:c}})),d=e.transpose(l);void 0===d[0].length&&(d=[d]);var p=e.multiply(e.multiply(u,d),r);return void 0===p.length&&(p=[[p]]),i?p.map((function(e){return e[0]})):p}return n}(),jacobi:function(n){for(var r,i,a,o,s,c,l,u=1,d=n.length,p=e.identity(d,d),h=[];1===u;){for(s=n[0][1],a=0,o=1,r=0;r<d;r++)for(i=0;i<d;i++)r!=i&&s<t.abs(n[r][i])&&(s=t.abs(n[r][i]),a=r,o=i);for(c=n[a][a]===n[o][o]?n[a][o]>0?t.PI/4:-t.PI/4:t.atan(2*n[a][o]/(n[a][a]-n[o][o]))/2,(l=e.identity(d,d))[a][a]=t.cos(c),l[a][o]=-t.sin(c),l[o][a]=t.sin(c),l[o][o]=t.cos(c),p=e.multiply(p,l),n=e.multiply(e.multiply(e.inv(l),n),l),u=0,r=1;r<d;r++)for(i=1;i<d;i++)r!=i&&t.abs(n[r][i])>.001&&(u=1)}for(r=0;r<d;r++)h.push(n[r][r]);return[p,h]},rungekutta:function(e,t,n,r,i,a){var o,s,c;if(2===a)for(;r<=n;)i+=((o=t*e(r,i))+(s=t*e(r+t,i+o)))/2,r+=t;if(4===a)for(;r<=n;)i+=((o=t*e(r,i))+2*(s=t*e(r+t/2,i+o/2))+2*(c=t*e(r+t/2,i+s/2))+t*e(r+t,i+c))/6,r+=t;return i},romberg:function(e,n,r,i){for(var a,o,s,c,l,u=0,d=(r-n)/2,p=[],h=[],f=[];u<i/2;){for(l=e(n),s=n,c=0;s<=r;s+=d,c++)p[c]=s;for(a=p.length,s=1;s<a-1;s++)l+=(s%2!=0?4:2)*e(p[s]);l=d/3*(l+e(r)),f[u]=l,d/=2,u++}for(o=f.length,a=1;1!==o;){for(s=0;s<o-1;s++)h[s]=(t.pow(4,a)*f[s+1]-f[s])/(t.pow(4,a)-1);o=h.length,f=h,h=[],a++}return f},richardson:function(e,n,r,i){function a(e,t){for(var n,r=0,i=e.length;r<i;r++)e[r]===t&&(n=r);return n}for(var o,s,c,l,u,d=t.abs(r-e[a(e,r)+1]),p=0,h=[],f=[];i>=d;)o=a(e,r+i),s=a(e,r),h[p]=(n[o]-2*n[s]+n[2*s-o])/(i*i),i/=2,p++;for(l=h.length,c=1;1!=l;){for(u=0;u<l-1;u++)f[u]=(t.pow(4,c)*h[u+1]-h[u])/(t.pow(4,c)-1);l=f.length,h=f,f=[],c++}return h},simpson:function(e,t,n,r){for(var i,a=(n-t)/r,o=e(t),s=[],c=t,l=0,u=1;c<=n;c+=a,l++)s[l]=c;for(i=s.length;u<i-1;u++)o+=(u%2!=0?4:2)*e(s[u]);return a/3*(o+e(n))},hermite:function(e,t,n,r){for(var i,a=e.length,o=0,s=0,c=[],l=[],u=[],d=[];s<a;s++){for(c[s]=1,i=0;i<a;i++)s!=i&&(c[s]*=(r-e[i])/(e[s]-e[i]));for(l[s]=0,i=0;i<a;i++)s!=i&&(l[s]+=1/(e[s]-e[i]));u[s]=(1-2*(r-e[s])*l[s])*(c[s]*c[s]),d[s]=(r-e[s])*(c[s]*c[s]),o+=u[s]*t[s]+d[s]*n[s]}return o},lagrange:function(e,t,n){for(var r,i,a=0,o=0,s=e.length;o<s;o++){for(i=t[o],r=0;r<s;r++)o!=r&&(i*=(n-e[r])/(e[o]-e[r]));a+=i}return a},cubic_spline:function(t,n,r){for(var i,a=t.length,o=0,s=[],c=[],l=[],u=[],d=[],p=[],h=[];o<a-1;o++)d[o]=t[o+1]-t[o];for(l[0]=0,o=1;o<a-1;o++)l[o]=3/d[o]*(n[o+1]-n[o])-3/d[o-1]*(n[o]-n[o-1]);for(o=1;o<a-1;o++)s[o]=[],c[o]=[],s[o][o-1]=d[o-1],s[o][o]=2*(d[o-1]+d[o]),s[o][o+1]=d[o],c[o][0]=l[o];for(u=e.multiply(e.inv(s),c),i=0;i<a-1;i++)p[i]=(n[i+1]-n[i])/d[i]-d[i]*(u[i+1][0]+2*u[i][0])/3,h[i]=(u[i+1][0]-u[i][0])/(3*d[i]);for(i=0;i<a&&!(t[i]>r);i++);return n[i-=1]+(r-t[i])*p[i]+e.sq(r-t[i])*u[i]+(r-t[i])*e.sq(r-t[i])*h[i]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(t){var n,r,i=t.length,a=t[0].length,o=0,s=[],c=[],l=[],u=[],d=[],p=[],h=[],f=[],m=[],g=[];for(o=0;o<i;o++)s[o]=e.sum(t[o])/a;for(o=0;o<a;o++)for(h[o]=[],n=0;n<i;n++)h[o][n]=t[n][o]-s[n];for(h=e.transpose(h),o=0;o<i;o++)for(f[o]=[],n=0;n<i;n++)f[o][n]=e.dot([h[o]],[h[n]])/(a-1);for(m=(l=e.jacobi(f))[0],c=l[1],g=e.transpose(m),o=0;o<c.length;o++)for(n=o;n<c.length;n++)c[o]<c[n]&&(r=c[o],c[o]=c[n],c[n]=r,u=g[o],g[o]=g[n],g[n]=u);for(p=e.transpose(h),o=0;o<i;o++)for(d[o]=[],n=0;n<p.length;n++)d[o][n]=e.dot([g[o]],[p[n]]);return[t,c,g,d]}}),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(n,r){var i=this;return r?(setTimeout((function(){r.call(i,e.fn[t].call(i,n))}),15),this):"number"==typeof e[t](this,n)?e[t](this,n):e(e[t](this,n))}}(t[n])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(r,Math),function(e,t){var n=[].slice,r=e.utils.isNumber,i=e.utils.isArray;function a(e,n,r,i){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var a=(e*n+r*i)/(n+i);return(e-r)/t.sqrt(a*(1-a)*(1/n+1/i))}e.extend({zscore:function(){var t=n.call(arguments);return r(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var r,a=n.call(arguments);return i(a[1])?(r=e.zscore(a[0],a[1],a[3]),1===a[2]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):a.length>2?(r=e.zscore(a[0],a[1],a[2]),1===a[3]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):(r=a[0],1===a[1]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1))}}),e.extend(e.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(n,r,i){var a=t.abs(this.zscore(n,i));return 1===r?e.normal.cdf(-a,0,1):2*e.normal.cdf(-a,0,1)}}),e.extend({tscore:function(){var r=n.call(arguments);return 4===r.length?(r[0]-r[1])/(r[2]/t.sqrt(r[3])):(r[0]-e.mean(r[1]))/(e.stdev(r[1],!0)/t.sqrt(r[1].length))},ttest:function(){var i,a=n.call(arguments);return 5===a.length?(i=t.abs(e.tscore(a[0],a[1],a[2],a[3])),1===a[4]?e.studentt.cdf(-i,a[3]-1):2*e.studentt.cdf(-i,a[3]-1)):r(a[1])?(i=t.abs(a[0]),1==a[2]?e.studentt.cdf(-i,a[1]-1):2*e.studentt.cdf(-i,a[1]-1)):(i=t.abs(e.tscore(a[0],a[1])),1==a[2]?e.studentt.cdf(-i,a[1].length-1):2*e.studentt.cdf(-i,a[1].length-1))}}),e.extend(e.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(n,r){return 1===r?1-e.studentt.cdf(t.abs(this.tscore(n)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(n)),this.cols()-1)}}),e.extend({anovafscore:function(){var r,i,a,o,s,c,l,u,d=n.call(arguments);if(1===d.length){for(s=new Array(d[0].length),l=0;l<d[0].length;l++)s[l]=d[0][l];d=s}for(i=new Array,l=0;l<d.length;l++)i=i.concat(d[l]);for(a=e.mean(i),r=0,l=0;l<d.length;l++)r+=d[l].length*t.pow(e.mean(d[l])-a,2);for(r/=d.length-1,c=0,l=0;l<d.length;l++)for(o=e.mean(d[l]),u=0;u<d[l].length;u++)c+=t.pow(d[l][u]-o,2);return r/(c/=i.length-d.length)},anovaftest:function(){var t,i,a,o,s=n.call(arguments);if(r(s[0]))return 1-e.centralF.cdf(s[0],s[1],s[2]);var c=e.anovafscore(s);for(t=s.length-1,a=0,o=0;o<s.length;o++)a+=s[o].length;return i=a-t-1,1-e.centralF.cdf(c,t,i)},ftest:function(t,n,r){return 1-e.centralF.cdf(t,n,r)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var t,n=0;for(t=0;t<this.length;t++)n+=this[t].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var i,a,o,s,c,l=n.call(arguments);return r(l[0])?(i=l[0],a=l[1],o=l[2],s=l[3],c=l[4]):(i=e.mean(l[0]),a=e.mean(l[1]),o=l[0].length,s=l[1].length,c=l[2]),t.abs(i-a)/(c*t.sqrt((1/o+1/s)/2))},qtest:function(){var t,r=n.call(arguments);3===r.length?(t=r[0],r=r.slice(1)):7===r.length?(t=e.qscore(r[0],r[1],r[2],r[3],r[4]),r=r.slice(5)):(t=e.qscore(r[0],r[1],r[2]),r=r.slice(3));var i=r[0],a=r[1];return 1-e.tukey.cdf(t,a,i-a)},tukeyhsd:function(t){for(var n=e.pooledstdev(t),r=t.map((function(t){return e.mean(t)})),i=t.reduce((function(e,t){return e+t.length}),0),a=[],o=0;o<t.length;++o)for(var s=o+1;s<t.length;++s){var c=e.qtest(r[o],r[s],t[o].length,t[s].length,n,i,t.length);a.push([[o,s],c])}return a}}),e.extend({normalci:function(){var r,i=n.call(arguments),a=new Array(2);return r=4===i.length?t.abs(e.normal.inv(i[1]/2,0,1)*i[2]/t.sqrt(i[3])):t.abs(e.normal.inv(i[1]/2,0,1)*e.stdev(i[2])/t.sqrt(i[2].length)),a[0]=i[0]-r,a[1]=i[0]+r,a},tci:function(){var r,i=n.call(arguments),a=new Array(2);return r=4===i.length?t.abs(e.studentt.inv(i[1]/2,i[3]-1)*i[2]/t.sqrt(i[3])):t.abs(e.studentt.inv(i[1]/2,i[2].length-1)*e.stdev(i[2],!0)/t.sqrt(i[2].length)),a[0]=i[0]-r,a[1]=i[0]+r,a},significant:function(e,t){return e<t}}),e.extend(e.fn,{normalci:function(t,n){return e.normalci(t,n,this.toArray())},tci:function(t,n){return e.tci(t,n,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,n,r,i){var o=a(t,n,r,i);return e.ztest(o,1)},twoSidedDifferenceOfProportions:function(t,n,r,i){var o=a(t,n,r,i);return e.ztest(o,2)}})}(r,Math),r.models=function(){function e(e){var n=e[0].length;return r.arange(n).map((function(i){var a=r.arange(n).filter((function(e){return e!==i}));return t(r.col(e,i).map((function(e){return e[0]})),r.col(e,a))}))}function t(e,t){var n=e.length,i=t[0].length-1,a=n-i-1,o=r.lstsq(t,e),s=r.multiply(t,o.map((function(e){return[e]}))).map((function(e){return e[0]})),c=r.subtract(e,s),l=r.mean(e),u=r.sum(s.map((function(e){return Math.pow(e-l,2)}))),d=r.sum(e.map((function(e,t){return Math.pow(e-s[t],2)}))),p=u+d;return{exog:t,endog:e,nobs:n,df_model:i,df_resid:a,coef:o,predict:s,resid:c,ybar:l,SST:p,SSE:u,SSR:d,R2:u/p}}function n(t){var n=e(t.exog),i=Math.sqrt(t.SSR/t.df_resid),a=n.map((function(e){var t=e.SST,n=e.R2;return i/Math.sqrt(t*(1-n))})),o=t.coef.map((function(e,t){return(e-0)/a[t]})),s=o.map((function(e){var n=r.studentt.cdf(e,t.df_resid);return 2*(n>.5?1-n:n)})),c=r.studentt.inv(.975,t.df_resid),l=t.coef.map((function(e,t){var n=c*a[t];return[e-n,e+n]}));return{se:a,t:o,p:s,sigmaHat:i,interval95:l}}function i(e){var t,n,i,a=e.R2/e.df_model/((1-e.R2)/e.df_resid);return{F_statistic:a,pvalue:1-(t=a,n=e.df_model,i=e.df_resid,r.beta.cdf(t/(i/n+t),n/2,i/2))}}function a(e,r){var a=t(e,r),o=n(a),s=i(a),c=1-(1-a.R2)*((a.nobs-1)/a.df_resid);return a.t=o,a.f=s,a.adjust_R2=c,a}return{ols:a}}(),r.extend({buildxmatrix:function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;t++){var n=[1];e[t]=n.concat(arguments[t])}return r(e)},builddxmatrix:function(){for(var e=new Array(arguments[0].length),t=0;t<arguments[0].length;t++){var n=[1];e[t]=n.concat(arguments[0][t])}return r(e)},buildjxmatrix:function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return r.builddxmatrix(t)},buildymatrix:function(e){return r(e).transpose()},buildjymatrix:function(e){return e.transpose()},matrixmult:function(e,t){var n,i,a,o,s;if(e.cols()==t.rows()){if(t.rows()>1){for(o=[],n=0;n<e.rows();n++)for(o[n]=[],i=0;i<t.cols();i++){for(s=0,a=0;a<e.cols();a++)s+=e.toArray()[n][a]*t.toArray()[a][i];o[n][i]=s}return r(o)}for(o=[],n=0;n<e.rows();n++)for(o[n]=[],i=0;i<t.cols();i++){for(s=0,a=0;a<e.cols();a++)s+=e.toArray()[n][a]*t.toArray()[i];o[n][i]=s}return r(o)}},regress:function(e,t){var n=r.xtranspxinv(e),i=e.transpose(),a=r.matrixmult(r(n),i);return r.matrixmult(a,t)},regresst:function(e,t,n){var i=r.regress(e,t),a={anova:{}},o=r.jMatYBar(e,i);a.yBar=o;var s=t.mean();a.anova.residuals=r.residuals(t,o),a.anova.ssr=r.ssr(o,s),a.anova.msr=a.anova.ssr/(e[0].length-1),a.anova.sse=r.sse(t,o),a.anova.mse=a.anova.sse/(t.length-(e[0].length-1)-1),a.anova.sst=r.sst(t,s),a.anova.mst=a.anova.sst/(t.length-1),a.anova.r2=1-a.anova.sse/a.anova.sst,a.anova.r2<0&&(a.anova.r2=0),a.anova.fratio=a.anova.msr/a.anova.mse,a.anova.pvalue=r.anovaftest(a.anova.fratio,e[0].length-1,t.length-(e[0].length-1)-1),a.anova.rmse=Math.sqrt(a.anova.mse),a.anova.r2adj=1-a.anova.mse/a.anova.mst,a.anova.r2adj<0&&(a.anova.r2adj=0),a.stats=new Array(e[0].length);for(var c,l,u,d=r.xtranspxinv(e),p=0;p<i.length;p++)c=Math.sqrt(a.anova.mse*Math.abs(d[p][p])),l=Math.abs(i[p]/c),u=r.ttest(l,t.length-e[0].length-1,n),a.stats[p]=[i[p],c,l,u];return a.regress=i,a},xtranspx:function(e){return r.matrixmult(e.transpose(),e)},xtranspxinv:function(e){var t=r.matrixmult(e.transpose(),e);return r.inv(t)},jMatYBar:function(e,t){var n=r.matrixmult(e,t);return new r(n)},residuals:function(e,t){return r.matrixsubtract(e,t)},ssr:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},sse:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n},sst:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},matrixsubtract:function(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++){n[i]=new Array(e[i].length);for(var a=0;a<e[i].length;a++)n[i][a]=e[i][a]-t[i][a]}return r(n)}}),r.jStat=r,r)},"/YfA":function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return ne}));var r,i=n("MMYH"),a=n("9fIP"),o=n("EM62"),s=n("ZTXN"),c=n("g6G6"),l=n("3p4X"),u=n("xVbo"),d=n("4xW2"),p=n("Ohay"),h=n("8j5Y"),f=n("2kYt"),m=["dialogPopup"],g=["hueSlider"],b=["alphaSlider"];function v(e,t){if(1&e&&o.hc(0,"div"),2&e){var n=o.yc();o.Wb("arrow arrow-",n.cpUsePosition,""),o.ad("top",n.arrowTop,"px")}}function _(e,t){if(1&e){var n=o.nc();o.mc(0,"div",26),o.uc("newValue",(function(e){return o.Qc(n),o.yc().onColorChange(e)}))("dragStart",(function(){return o.Qc(n),o.yc().onDragStart("saturation-lightness")}))("dragEnd",(function(){return o.Qc(n),o.yc().onDragEnd("saturation-lightness")})),o.hc(1,"div",13),o.lc()}if(2&e){var r=o.yc();o.ad("background-color",r.hueSliderColor),o.Dc("rgX",1)("rgY",1),o.Sb(1),o.ad("top",null==r.slider?null:r.slider.v,"px")("left",null==r.slider?null:r.slider.s,"px")}}function y(e,t){if(1&e){var n=o.nc();o.mc(0,"button",27),o.uc("click",(function(e){o.Qc(n);var t=o.yc();return t.onAddPresetColor(e,t.selectedColor)})),o.fd(1),o.lc()}if(2&e){var r=o.yc();o.Vb(r.cpAddColorButtonClass),o.Dc("disabled",r.cpPresetColors&&r.cpPresetColors.length>=r.cpMaxPresetColorsLength),o.Sb(1),o.hd(" ",r.cpAddColorButtonText," ")}}function O(e,t){1&e&&o.hc(0,"div",28)}function x(e,t){if(1&e){var n=o.nc();o.mc(0,"input",34),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc(2).onAlphaInput(e)})),o.lc()}if(2&e){var r=o.yc(2);o.Dc("rg",1)("value",null==r.cmykText?null:r.cmykText.a)}}function E(e,t){1&e&&(o.mc(0,"div"),o.fd(1,"A"),o.lc())}function k(e,t){if(1&e){var n=o.nc();o.mc(0,"div",29),o.mc(1,"div",30),o.mc(2,"input",31),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onCyanInput(e)})),o.lc(),o.mc(3,"input",31),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onMagentaInput(e)})),o.lc(),o.mc(4,"input",31),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onYellowInput(e)})),o.lc(),o.mc(5,"input",31),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onBlackInput(e)})),o.lc(),o.dd(6,x,1,2,"input",32),o.lc(),o.mc(7,"div",30),o.mc(8,"div"),o.fd(9,"C"),o.lc(),o.mc(10,"div"),o.fd(11,"M"),o.lc(),o.mc(12,"div"),o.fd(13,"Y"),o.lc(),o.mc(14,"div"),o.fd(15,"K"),o.lc(),o.dd(16,E,2,0,"div",33),o.lc(),o.lc()}if(2&e){var r=o.yc();o.ad("display",3!==r.format?"none":"block"),o.Sb(2),o.Dc("rg",100)("value",null==r.cmykText?null:r.cmykText.c),o.Sb(1),o.Dc("rg",100)("value",null==r.cmykText?null:r.cmykText.m),o.Sb(1),o.Dc("rg",100)("value",null==r.cmykText?null:r.cmykText.y),o.Sb(1),o.Dc("rg",100)("value",null==r.cmykText?null:r.cmykText.k),o.Sb(1),o.Dc("ngIf","disabled"!==r.cpAlphaChannel),o.Sb(10),o.Dc("ngIf","disabled"!==r.cpAlphaChannel)}}function C(e,t){if(1&e){var n=o.nc();o.mc(0,"input",34),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc(2).onAlphaInput(e)})),o.lc()}if(2&e){var r=o.yc(2);o.Dc("rg",1)("value",null==r.hslaText?null:r.hslaText.a)}}function w(e,t){1&e&&(o.mc(0,"div"),o.fd(1,"A"),o.lc())}function S(e,t){if(1&e){var n=o.nc();o.mc(0,"div",35),o.mc(1,"div",30),o.mc(2,"input",36),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onHueInput(e)})),o.lc(),o.mc(3,"input",31),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onSaturationInput(e)})),o.lc(),o.mc(4,"input",31),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onLightnessInput(e)})),o.lc(),o.dd(5,C,1,2,"input",32),o.lc(),o.mc(6,"div",30),o.mc(7,"div"),o.fd(8,"H"),o.lc(),o.mc(9,"div"),o.fd(10,"S"),o.lc(),o.mc(11,"div"),o.fd(12,"L"),o.lc(),o.dd(13,w,2,0,"div",33),o.lc(),o.lc()}if(2&e){var r=o.yc();o.ad("display",2!==r.format?"none":"block"),o.Sb(2),o.Dc("rg",360)("value",null==r.hslaText?null:r.hslaText.h),o.Sb(1),o.Dc("rg",100)("value",null==r.hslaText?null:r.hslaText.s),o.Sb(1),o.Dc("rg",100)("value",null==r.hslaText?null:r.hslaText.l),o.Sb(1),o.Dc("ngIf","disabled"!==r.cpAlphaChannel),o.Sb(8),o.Dc("ngIf","disabled"!==r.cpAlphaChannel)}}function I(e,t){if(1&e){var n=o.nc();o.mc(0,"input",34),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc(2).onAlphaInput(e)})),o.lc()}if(2&e){var r=o.yc(2);o.Dc("rg",1)("value",null==r.rgbaText?null:r.rgbaText.a)}}function T(e,t){1&e&&(o.mc(0,"div"),o.fd(1,"A"),o.lc())}function A(e,t){if(1&e){var n=o.nc();o.mc(0,"div",37),o.mc(1,"div",30),o.mc(2,"input",38),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onRedInput(e)})),o.lc(),o.mc(3,"input",38),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onGreenInput(e)})),o.lc(),o.mc(4,"input",38),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onBlueInput(e)})),o.lc(),o.dd(5,I,1,2,"input",32),o.lc(),o.mc(6,"div",30),o.mc(7,"div"),o.fd(8,"R"),o.lc(),o.mc(9,"div"),o.fd(10,"G"),o.lc(),o.mc(11,"div"),o.fd(12,"B"),o.lc(),o.dd(13,T,2,0,"div",33),o.lc(),o.lc()}if(2&e){var r=o.yc();o.ad("display",1!==r.format?"none":"block"),o.Sb(2),o.Dc("rg",255)("value",null==r.rgbaText?null:r.rgbaText.r),o.Sb(1),o.Dc("rg",255)("value",null==r.rgbaText?null:r.rgbaText.g),o.Sb(1),o.Dc("rg",255)("value",null==r.rgbaText?null:r.rgbaText.b),o.Sb(1),o.Dc("ngIf","disabled"!==r.cpAlphaChannel),o.Sb(8),o.Dc("ngIf","disabled"!==r.cpAlphaChannel)}}function P(e,t){if(1&e){var n=o.nc();o.mc(0,"input",34),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc(2).onAlphaInput(e)})),o.lc()}if(2&e){var r=o.yc(2);o.Dc("rg",1)("value",r.hexAlpha)}}function M(e,t){1&e&&(o.mc(0,"div"),o.fd(1,"A"),o.lc())}function D(e,t){if(1&e){var n=o.nc();o.mc(0,"div",39),o.mc(1,"div",30),o.mc(2,"input",40),o.uc("blur",(function(){return o.Qc(n),o.yc().onHexInput(null)}))("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onHexInput(e)})),o.lc(),o.dd(3,P,1,2,"input",32),o.lc(),o.mc(4,"div",30),o.mc(5,"div"),o.fd(6,"Hex"),o.lc(),o.dd(7,M,2,0,"div",33),o.lc(),o.lc()}if(2&e){var r=o.yc();o.ad("display",0!==r.format?"none":"block"),o.Yb("hex-alpha","forced"===r.cpAlphaChannel),o.Sb(2),o.Dc("value",r.hexText),o.Sb(1),o.Dc("ngIf","forced"===r.cpAlphaChannel),o.Sb(4),o.Dc("ngIf","forced"===r.cpAlphaChannel)}}function j(e,t){if(1&e){var n=o.nc();o.mc(0,"input",34),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc(2).onAlphaInput(e)})),o.lc()}if(2&e){var r=o.yc(2);o.Dc("rg",1)("value",null==r.hslaText?null:r.hslaText.a)}}function R(e,t){if(1&e){var n=o.nc();o.mc(0,"div",41),o.mc(1,"div",30),o.mc(2,"input",31),o.uc("keyup.enter",(function(e){return o.Qc(n),o.yc().onAcceptColor(e)}))("newValue",(function(e){return o.Qc(n),o.yc().onValueInput(e)})),o.lc(),o.dd(3,j,1,2,"input",32),o.lc(),o.mc(4,"div",30),o.mc(5,"div"),o.fd(6,"V"),o.lc(),o.mc(7,"div"),o.fd(8,"A"),o.lc(),o.lc(),o.lc()}if(2&e){var r=o.yc();o.Sb(2),o.Dc("rg",100)("value",null==r.hslaText?null:r.hslaText.l),o.Sb(1),o.Dc("ngIf","disabled"!==r.cpAlphaChannel)}}function L(e,t){if(1&e){var n=o.nc();o.mc(0,"div",42),o.mc(1,"span",43),o.uc("click",(function(){return o.Qc(n),o.yc().onFormatToggle(-1)})),o.lc(),o.mc(2,"span",43),o.uc("click",(function(){return o.Qc(n),o.yc().onFormatToggle(1)})),o.lc(),o.lc()}}function N(e,t){if(1&e){var n=o.nc();o.mc(0,"span",50),o.uc("click",(function(e){o.Qc(n);var t=o.yc().$implicit;return o.yc(3).onRemovePresetColor(e,t)})),o.lc()}if(2&e){var r=o.yc(4);o.Vb(r.cpRemoveColorButtonClass)}}function B(e,t){if(1&e){var n=o.nc();o.mc(0,"div",48),o.uc("click",(function(){o.Qc(n);var e=t.$implicit;return o.yc(3).setColorFromString(e)})),o.dd(1,N,1,3,"span",49),o.lc()}if(2&e){var r=t.$implicit,i=o.yc(3);o.ad("background-color",r),o.Sb(1),o.Dc("ngIf",i.cpAddColorButton)}}function U(e,t){if(1&e&&(o.mc(0,"div"),o.dd(1,B,2,3,"div",47),o.lc()),2&e){var n=o.yc(2);o.Vb(n.cpPresetColorsClass),o.Sb(1),o.Dc("ngForOf",n.cpPresetColors)}}function F(e,t){if(1&e&&(o.mc(0,"div"),o.fd(1),o.lc()),2&e){var n=o.yc(2);o.Vb(n.cpPresetEmptyMessageClass),o.Sb(1),o.gd(n.cpPresetEmptyMessage)}}function q(e,t){if(1&e&&(o.mc(0,"div",44),o.hc(1,"hr"),o.mc(2,"div",45),o.fd(3),o.lc(),o.dd(4,U,2,4,"div",46),o.dd(5,F,2,4,"div",46),o.lc()),2&e){var n=o.yc();o.Sb(3),o.gd(n.cpPresetLabel),o.Sb(1),o.Dc("ngIf",null==n.cpPresetColors?null:n.cpPresetColors.length),o.Sb(1),o.Dc("ngIf",!(null!=n.cpPresetColors&&n.cpPresetColors.length)&&n.cpAddColorButton)}}function W(e,t){if(1&e){var n=o.nc();o.mc(0,"button",53),o.uc("click",(function(e){return o.Qc(n),o.yc(2).onCancelColor(e)})),o.fd(1),o.lc()}if(2&e){var r=o.yc(2);o.Vb(r.cpCancelButtonClass),o.Sb(1),o.gd(r.cpCancelButtonText)}}function H(e,t){if(1&e){var n=o.nc();o.mc(0,"button",53),o.uc("click",(function(e){return o.Qc(n),o.yc(2).onAcceptColor(e)})),o.fd(1),o.lc()}if(2&e){var r=o.yc(2);o.Vb(r.cpOKButtonClass),o.Sb(1),o.gd(r.cpOKButtonText)}}function K(e,t){if(1&e&&(o.mc(0,"div",51),o.dd(1,W,2,4,"button",52),o.dd(2,H,2,4,"button",52),o.lc()),2&e){var n=o.yc();o.Sb(1),o.Dc("ngIf",n.cpCancelButton),o.Sb(1),o.Dc("ngIf",n.cpOKButton)}}!function(e){e[e.HEX=0]="HEX",e[e.RGBA=1]="RGBA",e[e.HSLA=2]="HSLA",e[e.CMYK=3]="CMYK"}(r||(r={}));var z=function e(t,n,r,i){Object(a.a)(this,e),this.r=t,this.g=n,this.b=r,this.a=i},V=function e(t,n,r,i){Object(a.a)(this,e),this.h=t,this.s=n,this.v=r,this.a=i},G=function e(t,n,r,i){Object(a.a)(this,e),this.h=t,this.s=n,this.l=r,this.a=i},Y=function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;Object(a.a)(this,e),this.c=t,this.m=n,this.y=r,this.k=i,this.a=o};var X=function(){function e(){Object(a.a)(this,e),this.newValue=new o.t}return Object(i.a)(e,[{key:"inputChange",value:function(e){var t=e.target.value;if(void 0===this.rg)this.newValue.emit(t);else{var n=parseFloat(t);this.newValue.emit({v:n,rg:this.rg})}}}]),e}();X.\u0275fac=function(e){return new(e||X)},X.\u0275dir=o.bc({type:X,selectors:[["","text",""]],hostBindings:function(e,t){1&e&&o.uc("input",(function(e){return t.inputChange(e)}))},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),X.propDecorators={rg:[{type:o.D}],text:[{type:o.D}],newValue:[{type:o.O}],inputChange:[{type:o.w,args:["input",["$event"]]}]};var Q=function(){function e(t){var n=this;Object(a.a)(this,e),this.elRef=t,this.dragEnd=new o.t,this.dragStart=new o.t,this.newValue=new o.t,this.listenerMove=function(e){return n.move(e)},this.listenerStop=function(){return n.stop()}}return Object(i.a)(e,[{key:"mouseDown",value:function(e){this.start(e)}},{key:"touchStart",value:function(e){this.start(e)}},{key:"move",value:function(e){e.preventDefault(),this.setCursor(e)}},{key:"start",value:function(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}},{key:"stop",value:function(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}},{key:"getX",value:function(e){var t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}},{key:"getY",value:function(e){var t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}},{key:"setCursor",value:function(e){var t=this.elRef.nativeElement.offsetWidth,n=this.elRef.nativeElement.offsetHeight,r=Math.max(0,Math.min(this.getX(e),t)),i=Math.max(0,Math.min(this.getY(e),n));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:r/t,v:1-i/n,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:i/n,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:r/t,rgX:this.rgX})}}]),e}();Q.\u0275fac=function(e){return new(e||Q)(o.gc(o.r))},Q.\u0275dir=o.bc({type:Q,selectors:[["","slider",""]],hostBindings:function(e,t){1&e&&o.uc("mousedown",(function(e){return t.mouseDown(e)}))("touchstart",(function(e){return t.touchStart(e)}))},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),Q.ctorParameters=function(){return[{type:o.r}]},Q.propDecorators={rgX:[{type:o.D}],rgY:[{type:o.D}],slider:[{type:o.D}],dragEnd:[{type:o.O}],dragStart:[{type:o.O}],newValue:[{type:o.O}],mouseDown:[{type:o.w,args:["mousedown",["$event"]]}],touchStart:[{type:o.w,args:["touchstart",["$event"]]}]};var J=function e(t,n,r,i){Object(a.a)(this,e),this.h=t,this.s=n,this.v=r,this.a=i},$=function e(t,n,r,i){Object(a.a)(this,e),this.h=t,this.s=n,this.v=r,this.a=i},Z=function(){function e(){Object(a.a)(this,e),this.active=null}return Object(i.a)(e,[{key:"setActive",value:function(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}},{key:"hsva2hsla",value:function(e){var t=e.h,n=e.s,r=e.v,i=e.a;if(0===r)return new G(t,0,0,i);if(0===n&&1===r)return new G(t,1,1,i);var a=r*(2-n)/2;return new G(t,r*n/(1-Math.abs(2*a-1)),a,i)}},{key:"hsla2hsva",value:function(e){var t=Math.min(e.h,1),n=Math.min(e.s,1),r=Math.min(e.l,1),i=Math.min(e.a,1);if(0===r)return new V(t,0,0,i);var a=r+n*(1-Math.abs(2*r-1))/2;return new V(t,2*(a-r)/a,a,i)}},{key:"hsvaToRgba",value:function(e){var t,n,r,i=e.h,a=e.s,o=e.v,s=e.a,c=Math.floor(6*i),l=6*i-c,u=o*(1-a),d=o*(1-l*a),p=o*(1-(1-l)*a);switch(c%6){case 0:t=o,n=p,r=u;break;case 1:t=d,n=o,r=u;break;case 2:t=u,n=o,r=p;break;case 3:t=u,n=d,r=o;break;case 4:t=p,n=u,r=o;break;case 5:t=o,n=u,r=d;break;default:t=0,n=0,r=0}return new z(t,n,r,s)}},{key:"cmykToRgb",value:function(e){var t=(1-e.c)*(1-e.k),n=(1-e.m)*(1-e.k),r=(1-e.y)*(1-e.k);return new z(t,n,r,e.a)}},{key:"rgbaToCmyk",value:function(e){var t=1-Math.max(e.r,e.g,e.b);if(1===t)return new Y(0,0,0,1,e.a);var n=(1-e.r-t)/(1-t),r=(1-e.g-t)/(1-t),i=(1-e.b-t)/(1-t);return new Y(n,r,i,t,e.a)}},{key:"rgbaToHsva",value:function(e){var t,n,r=Math.min(e.r,1),i=Math.min(e.g,1),a=Math.min(e.b,1),o=Math.min(e.a,1),s=Math.max(r,i,a),c=Math.min(r,i,a),l=s,u=s-c;if(n=0===s?0:u/s,s===c)t=0;else{switch(s){case r:t=(i-a)/u+(i<a?6:0);break;case i:t=(a-r)/u+2;break;case a:t=(r-i)/u+4;break;default:t=0}t/=6}return new V(t,n,l,o)}},{key:"rgbaToHex",value:function(e,t){var n="#"+(1<<24|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return t&&(n+=(256|Math.round(255*e.a)).toString(16).substr(1)),n}},{key:"normalizeCMYK",value:function(e){return new Y(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}},{key:"denormalizeCMYK",value:function(e){return new Y(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}},{key:"denormalizeRGBA",value:function(e){return new z(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}},{key:"stringToHsva",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;e=(e||"").toLowerCase();var r=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new z(parseInt(e[2],10)/255,parseInt(e[3],10)/255,parseInt(e[4],10)/255,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new G(parseInt(e[2],10)/360,parseInt(e[3],10)/100,parseInt(e[4],10)/100,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}}];for(var i in t?r.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(e){return new z(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,parseInt(e[4]||"FF",16)/255)}}):r.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return new z(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1)}}),r.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return new z(parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255,1)}}),r)if(r.hasOwnProperty(i)){var a=r[i],o=a.re.exec(e),s=o&&a.parse(o);if(s)return s instanceof z?n=this.rgbaToHsva(s):s instanceof G&&(n=this.hsla2hsva(s)),n}return n}},{key:"outputFormat",value:function(e,t,n){switch("auto"===t&&(t=e.a<1?"rgba":"hex"),t){case"hsla":var r=this.hsva2hsla(e),i=new G(Math.round(360*r.h),Math.round(100*r.s),Math.round(100*r.l),Math.round(100*r.a)/100);return e.a<1||"always"===n?"hsla("+i.h+","+i.s+"%,"+i.l+"%,"+i.a+")":"hsl("+i.h+","+i.s+"%,"+i.l+"%)";case"rgba":var a=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===n?"rgba("+a.r+","+a.g+","+a.b+","+Math.round(100*a.a)/100+")":"rgb("+a.r+","+a.g+","+a.b+")";default:var o="always"===n||"forced"===n;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),o)}}}]),e}();Z.\u0275fac=function(e){return new(e||Z)},Z.\u0275prov=o.cc({token:Z,factory:Z.\u0275fac}),Z.ctorParameters=function(){return[]};var ee=function(){function e(t,n,i){Object(a.a)(this,e),this.elRef=t,this.cdRef=n,this.service=i,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[r.HEX,r.RGBA,r.HSLA,r.CMYK],this.useRootViewContainer=!1,this.colorPickerHover=new s.a}return Object(i.a)(e,[{key:"handleEsc",value:function(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}},{key:"handleEnter",value:function(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}},{key:"handleMouseEnter",value:function(){this.colorPickerHover.next(!0)}},{key:"handleMouseLeave",value:function(){this.colorPickerHover.next(!1)}},{key:"ngOnInit",value:function(){var e=this;this.slider=new J(0,0,0,0);var t=this.hueSlider.nativeElement.offsetWidth||140,n=this.alphaSlider.nativeElement.offsetWidth||140;this.sliderDimMax=new $(t,this.cpWidth,130,n),this.cpCmykEnabled?this.format=r.CMYK:"rgba"===this.cpOutputFormat?this.format=r.RGBA:"hsla"===this.cpOutputFormat?this.format=r.HSLA:this.format=r.HEX,this.listenerMouseDown=function(t){e.onMouseDown(t)},this.listenerResize=function(){e.onResize()},this.openDialog(this.initialColor,!1)}},{key:"ngOnDestroy",value:function(){this.closeDialog()}},{key:"ngAfterViewInit",value:function(){if(230!==this.cpWidth||"inline"===this.cpDialogDisplay){var e=this.hueSlider.nativeElement.offsetWidth||140,t=this.alphaSlider.nativeElement.offsetWidth||140;this.sliderDimMax=new $(e,this.cpWidth,130,t),this.updateColorPicker(!1),this.cdRef.detectChanges()}}},{key:"openDialog",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,t),this.openColorPicker()}},{key:"closeDialog",value:function(){this.closeColorPicker()}},{key:"setupDialog",value:function(e,t,n,r,i,a,o,s,c,l,u,d,p,h,f,m,g,b,v,_,y,O,x,E,k,C,w,S,I,T,A,P,M,D,j,R){this.setInitialColor(n),this.setColorMode(s),this.isIE10=10===function(){var e="";"undefined"!=typeof navigator&&(e=navigator.userAgent.toLowerCase());var t=e.indexOf("msie ");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=t,this.cpDisableInput=d,this.cpCmykEnabled=c,this.cpAlphaChannel=l,this.cpOutputFormat=u,this.cpDialogDisplay=a,this.cpIgnoredElements=p,this.cpSaveClickOutside=h,this.cpCloseClickOutside=f,this.useRootViewContainer=m,this.width=this.cpWidth=parseInt(r,10),this.height=this.cpHeight=parseInt(i,10),this.cpPosition=g,this.cpPositionOffset=parseInt(b,10),this.cpOKButton=C,this.cpOKButtonText=S,this.cpOKButtonClass=w,this.cpCancelButton=I,this.cpCancelButtonText=A,this.cpCancelButtonClass=T,this.fallbackColor=o||"#fff",this.setPresetConfig(_,y),this.cpPresetColorsClass=O,this.cpMaxPresetColorsLength=x,this.cpPresetEmptyMessage=E,this.cpPresetEmptyMessageClass=k,this.cpAddColorButton=P,this.cpAddColorButtonText=D,this.cpAddColorButtonClass=M,this.cpRemoveColorButtonClass=j,this.cpTriggerElement=R,v||(this.dialogArrowOffset=0),"inline"===a&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===u&&"always"!==l&&"forced"!==l&&(this.cpAlphaChannel="disabled")}},{key:"setColorMode",value:function(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}},{key:"setInitialColor",value:function(e){this.initialColor=e}},{key:"setPresetConfig",value:function(e,t){this.cpPresetLabel=e,this.cpPresetColors=t}},{key:"setColorFromString",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];("always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel)&&((t=this.service.stringToHsva(e,!0))||this.hsva)||(t=this.service.stringToHsva(e,!1)),t||this.hsva||(t=this.service.stringToHsva(this.fallbackColor,!1)),t&&(this.hsva=t,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(n,r))}},{key:"onResize",value:function(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}},{key:"onDragEnd",value:function(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}},{key:"onDragStart",value:function(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}},{key:"onMouseDown",value:function(e){!this.show||this.isIE10||"popup"!==this.cpDialogDisplay||e.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,e.target)||this.isDescendant(this.directiveElementRef.nativeElement,e.target)||0!==this.cpIgnoredElements.filter((function(t){return t===e.target})).length||(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}},{key:"onAcceptColor",value:function(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}},{key:"onCancelColor",value:function(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}},{key:"onFormatToggle",value:function(e){var t=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),n=((this.dialogInputFields.indexOf(this.format)+e)%t+t)%t;this.format=this.dialogInputFields[n]}},{key:"onColorChange",value:function(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}},{key:"onHueChange",value:function(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}},{key:"onValueChange",value:function(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}},{key:"onAlphaChange",value:function(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}},{key:"onHexInput",value:function(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);var t=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(t=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);var n=t.test(e);n&&(e.length<5&&(e="#"+e.substring(1).split("").map((function(e){return e+e})).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:n,value:e,color:this.outputColor})}}},{key:"onRedInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:n,value:t.r,color:this.outputColor})}},{key:"onBlueInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:n,value:t.b,color:this.outputColor})}},{key:"onGreenInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:n,value:t.g,color:this.outputColor})}},{key:"onHueInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:t,value:this.hsva.h,color:this.outputColor})}},{key:"onValueInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:t,value:this.hsva.v,color:this.outputColor})}},{key:"onAlphaInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:t,value:this.hsva.a,color:this.outputColor})}},{key:"onLightnessInput",value:function(e){var t=this.service.hsva2hsla(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:n,value:t.l,color:this.outputColor})}},{key:"onSaturationInput",value:function(e){var t=this.service.hsva2hsla(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:n,value:t.s,color:this.outputColor})}},{key:"onCyanInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}},{key:"onMagentaInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}},{key:"onYellowInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}},{key:"onBlackInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}},{key:"onAddPresetColor",value:function(e,t){e.stopPropagation(),this.cpPresetColors.filter((function(e){return e===t})).length||(this.cpPresetColors=this.cpPresetColors.concat(t),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}},{key:"onRemovePresetColor",value:function(e,t){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter((function(e){return e!==t})),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}},{key:"openColorPicker",value:function(){var e=this;this.show||(this.show=!0,this.hidden=!0,setTimeout((function(){e.hidden=!1,e.setDialogPosition(),e.cdRef.detectChanges()}),0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}},{key:"closeColorPicker",value:function(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}},{key:"updateColorPicker",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.sliderDimMax){var i,a,o;2===this.cpColorMode&&(this.hsva.s=0);var s=this.outputColor;if(a=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(n?(o=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(o)):(o=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(o))),o=this.service.denormalizeRGBA(o),this.sliderH=this.hsva.h):o=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),i=this.service.denormalizeRGBA(this.service.hsvaToRgba(new V(this.sliderH||this.hsva.h,1,1,1))),t){this.hslaText=new G(Math.round(360*a.h),Math.round(100*a.s),Math.round(100*a.l),Math.round(100*a.a)/100),this.rgbaText=new z(o.r,o.g,o.b,Math.round(100*o.a)/100),this.cpCmykEnabled&&(this.cmykText=new Y(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100));var c="always"===this.cpAlphaChannel;this.hexText=this.service.rgbaToHex(o,c),this.hexAlpha=this.rgbaText.a}if("auto"===this.cpOutputFormat&&this.format!==r.RGBA&&this.format!==r.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?r.RGBA:r.HEX),this.hueSliderColor="rgb("+i.r+","+i.g+","+i.b+")",this.alphaSliderColor="rgb("+o.r+","+o.g+","+o.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==r.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){var l=Math.round(100*this.cmyk.a)/100;this.cmykColor="cmyka(".concat(this.cmyk.c,",").concat(this.cmyk.m,",").concat(this.cmyk.y,",").concat(this.cmyk.k,",").concat(l,")")}else this.cmykColor="cmyk(".concat(this.cmyk.c,",").concat(this.cmyk.m,",").concat(this.cmyk.y,",").concat(this.cmyk.k,")");this.slider=new J((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&s!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}},{key:"setDialogPosition",value:function(){if("inline"===this.cpDialogDisplay)this.position="relative";else{for(var e,t="static",n="",r=null,i=null,a=this.directiveElementRef.nativeElement.parentNode,o=this.dialogElement.nativeElement.offsetHeight;null!==a&&"HTML"!==a.tagName;){if("static"!==(t=(e=window.getComputedStyle(a)).getPropertyValue("position"))&&null===r&&(r=a),(n=e.getPropertyValue("transform"))&&"none"!==n&&null===i&&(i=a),"fixed"===t){r=i;break}a=a.parentNode}var s=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!r||r instanceof HTMLUnknownElement))this.top=s.top,this.left=s.left;else{null===r&&(r=a);var c=this.createDialogBox(r,"fixed"!==t);this.top=s.top-c.top,this.left=s.left-c.left}"fixed"===t&&(this.position="fixed");var l=this.cpPosition;if("auto"===this.cpPosition)l=function(e,t){var n="right",r="bottom",i=e.height,a=e.width,o=t.top,s=t.left,c=o+t.height,l=s+t.width,u=o-i<0,d=c+i>(window.innerHeight||document.documentElement.clientHeight),p=s-a<0,h=l+a>(window.innerWidth||document.documentElement.clientWidth);if(d&&(r="top"),u&&(r="bottom"),p&&(n="right"),h&&(n="left"),u&&d&&p&&h)return["left","right","top","bottom"].reduce((function(t,n){return e[t]>e[n]?t:n}));return p&&h?u?"bottom":d||o>c?"top":"bottom":u&&d?p?"right":h||s>l?"left":"right":"".concat(r,"-").concat(n)}(this.dialogElement.nativeElement.getBoundingClientRect(),this.cpTriggerElement.nativeElement.getBoundingClientRect());"top"===l?(this.arrowTop=o-1,this.top-=o+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*s.width-this.dialogArrowOffset):"bottom"===l?(this.top+=s.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*s.width-this.dialogArrowOffset):"top-left"===l||"left-top"===l?(this.top-=o-s.height+s.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===l||"right-top"===l?(this.top-=o-s.height+s.height*this.cpPositionOffset/100,this.left+=s.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===l||"bottom-left"===l||"left-bottom"===l?(this.top+=s.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=s.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=s.width+this.dialogArrowSize-2),this.cpUsePosition=l}}},{key:"isDescendant",value:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{key:"createDialogBox",value:function(e,t){return{top:e.getBoundingClientRect().top+(t?window.pageYOffset:0),left:e.getBoundingClientRect().left+(t?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}}]),e}();ee.\u0275fac=function(e){return new(e||ee)(o.gc(o.r),o.gc(o.j),o.gc(Z))},ee.\u0275cmp=o.ac({type:ee,selectors:[["color-picker"]],viewQuery:function(e,t){var n;(1&e&&(o.Xc(m,!0),o.Xc(g,!0),o.Xc(b,!0)),2&e)&&(o.Mc(n=o.vc())&&(t.dialogElement=n.first),o.Mc(n=o.vc())&&(t.hueSlider=n.first),o.Mc(n=o.vc())&&(t.alphaSlider=n.first))},hostBindings:function(e,t){1&e&&o.uc("keyup.esc",(function(e){return t.handleEsc(e)}),!1,o.Pc)("keyup.enter",(function(e){return t.handleEnter(e)}),!1,o.Pc)("mouseenter",(function(){return t.handleMouseEnter()}))("mouseleave",(function(){return t.handleMouseLeave()}))},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(e,t){1&e&&(o.mc(0,"div",0,1),o.uc("click",(function(e){return e.stopPropagation()})),o.dd(2,v,1,5,"div",2),o.dd(3,_,2,8,"div",3),o.mc(4,"div",4),o.mc(5,"div",5),o.hc(6,"div",6),o.hc(7,"div",7),o.dd(8,y,2,5,"button",8),o.lc(),o.mc(9,"div",9),o.dd(10,O,1,0,"div",10),o.mc(11,"div",11,12),o.uc("newValue",(function(e){return t.onHueChange(e)}))("dragStart",(function(){return t.onDragStart("hue")}))("dragEnd",(function(){return t.onDragEnd("hue")})),o.hc(13,"div",13),o.lc(),o.mc(14,"div",14,15),o.uc("newValue",(function(e){return t.onValueChange(e)}))("dragStart",(function(){return t.onDragStart("value")}))("dragEnd",(function(){return t.onDragEnd("value")})),o.hc(16,"div",13),o.lc(),o.mc(17,"div",16,17),o.uc("newValue",(function(e){return t.onAlphaChange(e)}))("dragStart",(function(){return t.onDragStart("alpha")}))("dragEnd",(function(){return t.onDragEnd("alpha")})),o.hc(19,"div",13),o.lc(),o.lc(),o.lc(),o.dd(20,k,17,12,"div",18),o.dd(21,S,14,10,"div",19),o.dd(22,A,14,10,"div",20),o.dd(23,D,8,7,"div",21),o.dd(24,R,9,3,"div",22),o.dd(25,L,3,0,"div",23),o.dd(26,q,6,3,"div",24),o.dd(27,K,3,2,"div",25),o.lc()),2&e&&(o.ad("display",t.show?"block":"none")("visibility",t.hidden?"hidden":"visible")("top",t.top,"px")("left",t.left,"px")("position",t.position)("height",t.cpHeight,"px")("width",t.cpWidth,"px"),o.Yb("open",t.show),o.Sb(2),o.Dc("ngIf","popup"==t.cpDialogDisplay),o.Sb(1),o.Dc("ngIf",1===(t.cpColorMode||1)),o.Sb(4),o.ad("background-color",t.selectedColor),o.Sb(1),o.Dc("ngIf",t.cpAddColorButton),o.Sb(2),o.Dc("ngIf","disabled"===t.cpAlphaChannel),o.Sb(1),o.ad("display",1===(t.cpColorMode||1)?"block":"none"),o.Dc("rgX",1),o.Sb(2),o.ad("left",null==t.slider?null:t.slider.h,"px"),o.Sb(1),o.ad("display",2===(t.cpColorMode||1)?"block":"none"),o.Dc("rgX",1),o.Sb(2),o.ad("right",null==t.slider?null:t.slider.v,"px"),o.Sb(1),o.ad("display","disabled"===t.cpAlphaChannel?"none":"block")("background-color",t.alphaSliderColor),o.Dc("rgX",1),o.Sb(2),o.ad("left",null==t.slider?null:t.slider.a,"px"),o.Sb(1),o.Dc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Dc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Dc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Dc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Dc("ngIf",!t.cpDisableInput&&2===(t.cpColorMode||1)),o.Sb(1),o.Dc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Dc("ngIf",(null==t.cpPresetColors?null:t.cpPresetColors.length)||t.cpAddColorButton),o.Sb(1),o.Dc("ngIf",t.cpOKButton||t.cpCancelButton))},directives:[f.t,Q,X,f.s],styles:['.color-picker{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;background-color:#fff;border:1px solid #777;cursor:default;height:auto;position:absolute;user-select:none;width:230px;z-index:1000}.color-picker *{box-sizing:border-box;font-size:11px;margin:0}.color-picker input{color:#000;font-size:13px;height:26px;min-width:0;text-align:center;width:0}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.color-picker .arrow{border-style:solid;height:0;position:absolute;width:0;z-index:999999}.color-picker .arrow.arrow-top{border-color:#777 transparent transparent;border-width:10px 5px;left:8px}.color-picker .arrow.arrow-bottom{border-color:transparent transparent #777;border-width:10px 5px;left:8px;top:-20px}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{border-color:transparent transparent transparent #777;border-width:5px 10px;bottom:8px;right:-21px}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{border-color:transparent #777 transparent transparent;border-width:5px 10px;bottom:8px;left:-20px}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{border-color:transparent transparent transparent #777;border-width:5px 10px;right:-21px;top:8px}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{border-color:transparent #777 transparent transparent;border-width:5px 10px;left:-20px;top:8px}.color-picker .cursor{border:2px solid #222;border-radius:50%;cursor:default;height:16px;position:relative;width:16px}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{padding:16px 8px;position:relative}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{color:#555;font-size:11px;overflow:hidden;padding:4px;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.color-picker .preset-area .preset-color{border:1px solid #a9a9a9;border-radius:25%;cursor:pointer;display:inline-block;height:18px;margin:4px 6px 8px;position:relative;width:18px}.color-picker .preset-area .preset-empty-message{font-style:italic;margin-bottom:8px;margin-top:4px;min-height:18px;text-align:center}.color-picker .hex-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{clear:left;color:#555;flex:1 1 auto;float:left;text-align:center}.color-picker .hex-text .box input{border:1px solid #a9a9a9;flex:1 1 auto;padding:1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{color:#555;flex:1 1 auto;margin-right:8px;text-align:center}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{border:1px solid #a9a9a9;flex:1;float:left;margin:0 8px 0 0;padding:1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC");direction:ltr}.color-picker .hue,.color-picker .value{background-size:100% 100%;border:none;cursor:pointer;height:16px;margin-bottom:16px;width:100%}.color-picker .value{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=");direction:rtl}.color-picker .alpha{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:16px;width:100%}.color-picker .type-policy{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==");background-position:50%;background-repeat:no-repeat;background-size:8px 16px;height:24px;position:absolute;right:12px;top:218px;width:16px}.color-picker .type-policy .type-policy-arrow{display:block;height:50%;width:100%}.color-picker .selected-color{border:1px solid #a9a9a9;border-radius:50%;height:40px;left:8px;position:absolute;top:16px;width:40px}.color-picker .selected-color-background{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC");border-radius:50%;height:40px;width:40px}.color-picker .saturation-lightness{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:130px;touch-action:manipulation;width:100%}.color-picker .cp-add-color-button-class{background:transparent;border:0;cursor:pointer;display:inline;margin:3px -3px;padding:0;position:absolute}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{color:#999;cursor:not-allowed}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{background:#fff;border-radius:50%;box-shadow:1px 1px 5px #333;cursor:pointer;display:block;height:10px;position:absolute;right:-5px;text-align:center;top:-5px;width:10px}.color-picker .cp-remove-color-button-class:before{bottom:3.5px;content:"x";display:inline-block;font-size:10px;position:relative}'],encapsulation:2}),ee.ctorParameters=function(){return[{type:o.r},{type:o.j},{type:Z}]},ee.propDecorators={dialogElement:[{type:o.gb,args:["dialogPopup",{static:!0}]}],hueSlider:[{type:o.gb,args:["hueSlider",{static:!0}]}],alphaSlider:[{type:o.gb,args:["alphaSlider",{static:!0}]}],handleEsc:[{type:o.w,args:["document:keyup.esc",["$event"]]}],handleEnter:[{type:o.w,args:["document:keyup.enter",["$event"]]}],handleMouseEnter:[{type:o.w,args:["mouseenter"]}],handleMouseLeave:[{type:o.w,args:["mouseleave"]}]};var te=function(){function e(t,n,r,i,c,l){Object(a.a)(this,e),this.injector=t,this.cfr=n,this.appRef=r,this.vcRef=i,this.elRef=c,this._service=l,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.hostElementHover=new s.a,this.colorPickerHover=new s.a,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOpenOnHover=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new o.t(!0),this.cpToggleChange=new o.t(!0),this.cpSliderChange=new o.t(!0),this.cpSliderDragEnd=new o.t(!0),this.cpSliderDragStart=new o.t(!0),this.colorPickerOpen=new o.t(!0),this.colorPickerClose=new o.t(!0),this.colorPickerCancel=new o.t(!0),this.colorPickerSelect=new o.t(!0),this.colorPickerChange=new o.t(!1),this.cpCmykColorChange=new o.t(!0),this.cpPresetColorsChange=new o.t(!0),this.subs=[]}return Object(i.a)(e,[{key:"handleClick",value:function(){this.inputFocus()}},{key:"handleFocus",value:function(){this.inputFocus()}},{key:"handleInput",value:function(e){this.inputChange(e)}},{key:"handleMouseOver",value:function(){this.hostElementHover.next(!0)}},{key:"handleMouseOut",value:function(){this.hostElementHover.next(!1)}},{key:"ngOnInit",value:function(){this.subs.push(this.listenToHoverEvents().subscribe())}},{key:"ngOnDestroy",value:function(){for(;this.subs.length>0;){var e=this.subs.pop();e&&e.unsubscribe()}null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}},{key:"ngOnChanges",value:function(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}},{key:"listenToHoverEvents",value:function(){var e=this;return Object(c.a)(this.hostElementHover,this.colorPickerHover).pipe(Object(u.a)((function(){return e.cpOpenOnHover})),Object(d.a)((function(e){return e?Object(l.a)(0):Object(l.a)(250)})),Object(p.a)(),Object(h.a)((function(t){t?e.openDialog():e.closeDialog()})))}},{key:"openDialog",value:function(){var e=this;if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{var t=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){var n=this.appRef.componentTypes[0],r=this.injector.get(n,o.C.NULL);r!==o.C.NULL?(t=r.vcRef||r.viewContainerRef||this.vcRef)===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor."):this.viewAttachedToAppRef=!0}var i=this.cfr.resolveComponentFactory(ee);if(this.viewAttachedToAppRef)this.cmpRef=i.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{var a=o.T.fromResolvedProviders([],t.parentInjector);this.cmpRef=t.createComponent(i,0,a,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.elRef),this.dialog=this.cmpRef.instance,this.vcRef!==t&&this.cmpRef.changeDetectorRef.detectChanges(),this.subs.push(this.cmpRef.instance.colorPickerHover.pipe(Object(h.a)((function(t){return e.colorPickerHover.next(t)}))).subscribe())}}},{key:"closeDialog",value:function(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}},{key:"cmykChanged",value:function(e){this.cpCmykColorChange.emit(e)}},{key:"stateChanged",value:function(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}},{key:"colorChanged",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ignoreChanges=t,this.colorPickerChange.emit(e)}},{key:"colorSelected",value:function(e){this.colorPickerSelect.emit(e)}},{key:"colorCanceled",value:function(){this.colorPickerCancel.emit()}},{key:"inputFocus",value:function(){var e=this.elRef.nativeElement,t=this.cpIgnoredElements.filter((function(t){return t===e}));this.cpDisabled||t.length||("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}},{key:"inputChange",value:function(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}},{key:"inputChanged",value:function(e){this.cpInputChange.emit(e)}},{key:"sliderChanged",value:function(e){this.cpSliderChange.emit(e)}},{key:"sliderDragEnd",value:function(e){this.cpSliderDragEnd.emit(e)}},{key:"sliderDragStart",value:function(e){this.cpSliderDragStart.emit(e)}},{key:"presetColorsChanged",value:function(e){this.cpPresetColorsChange.emit(e)}}]),e}();te.\u0275fac=function(e){return new(e||te)(o.gc(o.C),o.gc(o.m),o.gc(o.g),o.gc(o.hb),o.gc(o.r),o.gc(Z))},te.\u0275dir=o.bc({type:te,selectors:[["","colorPicker",""]],hostBindings:function(e,t){1&e&&o.uc("click",(function(){return t.handleClick()}))("focus",(function(){return t.handleFocus()}))("input",(function(e){return t.handleInput(e)}))("mouseenter",(function(){return t.handleMouseOver()}))("mouseleave",(function(){return t.handleMouseOut()}))},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOpenOnHover:"cpOpenOnHover",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[o.Qb]}),te.ctorParameters=function(){return[{type:o.C},{type:o.m},{type:o.g},{type:o.hb},{type:o.r},{type:Z}]},te.propDecorators={colorPicker:[{type:o.D}],cpWidth:[{type:o.D}],cpHeight:[{type:o.D}],cpToggle:[{type:o.D}],cpDisabled:[{type:o.D}],cpIgnoredElements:[{type:o.D}],cpFallbackColor:[{type:o.D}],cpColorMode:[{type:o.D}],cpCmykEnabled:[{type:o.D}],cpOutputFormat:[{type:o.D}],cpAlphaChannel:[{type:o.D}],cpDisableInput:[{type:o.D}],cpDialogDisplay:[{type:o.D}],cpSaveClickOutside:[{type:o.D}],cpCloseClickOutside:[{type:o.D}],cpUseRootViewContainer:[{type:o.D}],cpPosition:[{type:o.D}],cpPositionOffset:[{type:o.D}],cpPositionRelativeToArrow:[{type:o.D}],cpOpenOnHover:[{type:o.D}],cpOKButton:[{type:o.D}],cpOKButtonText:[{type:o.D}],cpOKButtonClass:[{type:o.D}],cpCancelButton:[{type:o.D}],cpCancelButtonText:[{type:o.D}],cpCancelButtonClass:[{type:o.D}],cpPresetLabel:[{type:o.D}],cpPresetColors:[{type:o.D}],cpPresetColorsClass:[{type:o.D}],cpMaxPresetColorsLength:[{type:o.D}],cpPresetEmptyMessage:[{type:o.D}],cpPresetEmptyMessageClass:[{type:o.D}],cpAddColorButton:[{type:o.D}],cpAddColorButtonText:[{type:o.D}],cpAddColorButtonClass:[{type:o.D}],cpRemoveColorButtonClass:[{type:o.D}],cpInputChange:[{type:o.O}],cpToggleChange:[{type:o.O}],cpSliderChange:[{type:o.O}],cpSliderDragEnd:[{type:o.O}],cpSliderDragStart:[{type:o.O}],colorPickerOpen:[{type:o.O}],colorPickerClose:[{type:o.O}],colorPickerCancel:[{type:o.O}],colorPickerSelect:[{type:o.O}],colorPickerChange:[{type:o.O}],cpCmykColorChange:[{type:o.O}],cpPresetColorsChange:[{type:o.O}],handleClick:[{type:o.w,args:["click"]}],handleFocus:[{type:o.w,args:["focus"]}],handleInput:[{type:o.w,args:["input",["$event"]]}],handleMouseOver:[{type:o.w,args:["mouseenter"]}],handleMouseOut:[{type:o.w,args:["mouseleave"]}]};var ne=function e(){Object(a.a)(this,e)};ne.\u0275mod=o.ec({type:ne}),ne.\u0275inj=o.dc({factory:function(e){return new(e||ne)},providers:[Z],imports:[[f.c]]})},"/ege":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("EM62"),i=function(){function e(e,t){this._context={ngLet:null},e.createEmbeddedView(t,this._context)}return Object.defineProperty(e.prototype,"ngLet",{set:function(e){this._context.ngLet=e},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(r.gc(r.hb),r.gc(r.cb))},e.\u0275dir=r.bc({type:e,selectors:[["","ngLet",""]],inputs:{ngLet:"ngLet"}}),e}()},"/g0E":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n("DL1I");var r=n("X0jn"),i=n("EM62"),a=n("2kYt");function o(e,t){if(1&e&&(i.xc(),i.hc(0,"stop")),2&e){var n=t.$implicit,r=t.index,a=i.yc(3);i.Tb("offset",a.gradient.ratios[r])("stop-color",n)}}function s(e,t){if(1&e&&(i.xc(),i.mc(0,"linearGradient",7),i.dd(1,o,1,2,"stop",8),i.lc()),2&e){var n=i.yc(2);i.Dc("id",n.linearId),i.Tb("x1",n.gradient.x0)("y1",n.gradient.y0)("x2",n.gradient.x1)("y2",n.gradient.y1),i.Sb(1),i.Dc("ngForOf",n.gradient.colors)}}function c(e,t){if(1&e&&(i.xc(),i.hc(0,"stop")),2&e){var n=t.$implicit,r=t.index,a=i.yc(3);i.Tb("offset",a.gradient.ratios[r])("stop-color",n)}}function l(e,t){if(1&e&&(i.xc(),i.mc(0,"radialGradient",7),i.dd(1,c,1,2,"stop",8),i.lc()),2&e){var n=i.yc(2);i.Dc("id",n.radialId),i.Tb("cx",n.gradient.x0)("cy",n.gradient.y0)("r",n.gradient.r0)("fx",n.gradient.x1)("fy",n.gradient.y1)("fr",n.gradient.r1),i.Sb(1),i.Dc("ngForOf",n.gradient.colors)}}function u(e,t){if(1&e&&(i.xc(),i.mc(0,"svg",3),i.dd(1,s,2,6,"linearGradient",4),i.dd(2,l,2,8,"radialGradient",4),i.hc(3,"rect",5),i.mc(4,"text",6),i.fd(5,"Aa"),i.lc(),i.lc()),2&e){var n=i.yc();i.Sb(1),i.Dc("ngIf",n.data.isLinearGradient),i.Sb(1),i.Dc("ngIf",n.data.isRadialGradient),i.Sb(1),i.Dc("ngStyle",n.tileStyles),i.Sb(1),i.Dc("ngStyle",n.fontStyles)}}function d(e,t){if(1&e&&(i.xc(),i.mc(0,"svg",9),i.hc(1,"circle",10),i.hc(2,"circle",11),i.hc(3,"line",12),i.lc()),2&e){var n=i.yc();i.Sb(1),i.Dc("ngStyle",n.tileStrokeStyles),i.Sb(1),i.Dc("ngStyle",n.tileStyles),i.Sb(1),i.Tb("stroke",n.fontStyles.fill)}}var p=function(){function e(){}return Object.defineProperty(e.prototype,"tileStyles",{get:function(){var e,t;return e=this.data.fillStyle===r.h.LinearGradient?"url(#"+this.linearId+")":this.data.fillStyle===r.h.RadialGradient?"url(#"+this.radialId+")":this.data.fillColor,t="circle"===this.svgType?0===this.data.lineStyle[0]&&0===this.data.lineStyle[1]?[0,0]:this.data.lineStyle[0]<1?[.5,3]:[2,5]:this.data.lineStyle,{fill:e,"fill-opacity":this.data.fillAlpha,stroke:e,"stroke-opacity":this.data.fillAlpha,"stroke-width":0,"stroke-dasharray":t,"stroke-linecap":"round","stroke-miterlimit":10,"stroke-linejoin":"round"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileStrokeStyles",{get:function(){return{fill:this.data.fillColor,"fill-opacity":1,stroke:this.data.lineColor,"stroke-opacity":1,"stroke-width":0,"stroke-dasharray":[0,0],"stroke-linecap":"round","stroke-miterlimit":10,"stroke-linejoin":"round"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradient",{get:function(){return this.data.getGradient(43,43)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyles",{get:function(){return{"font-size":16,fill:this.data.textColor,"font-weight":"normal","font-style":"normal","text-decoration":"none"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linearId",{get:function(){return"linear-"+this.data.styleId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radialId",{get:function(){return"radial-"+this.data.styleId},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.ac({type:e,selectors:[["styling-tile"]],inputs:{data:"data",svgType:"svgType"},decls:3,vars:4,consts:[[1,"style-tile-wrapper"],["class","style-tile","xmlns","http://www.w3.org/2000/svg","width","43","height","43","viewBox","0 0 43 43",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","-1 -1 22 22",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","43","height","43","viewBox","0 0 43 43",1,"style-tile"],["gradientUnits","userSpaceOnUse",3,"id",4,"ngIf"],["x","2.5","y","2.5","width","38","height","38","rx","4","ry","4",3,"ngStyle"],["transform","translate(12.11 26.22)",3,"ngStyle"],["gradientUnits","userSpaceOnUse",3,"id"],[4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","-1 -1 22 22"],["cx","10","cy","10","r","10",1,"outline",3,"ngStyle"],["cx","10","cy","10","r","8",1,"inner",3,"ngStyle"],["x1","7","y1","12.34","x2","13","y2","12.34","stroke-miterlimit","10","stroke-width","1"]],template:function(e,t){1&e&&(i.mc(0,"div",0),i.dd(1,u,6,4,"svg",1),i.dd(2,d,4,3,"svg",2),i.lc()),2&e&&(i.Yb("circle","circle"===t.svgType),i.Sb(1),i.Dc("ngIf","circle"!==t.svgType),i.Sb(1),i.Dc("ngIf","circle"===t.svgType))},directives:[a.t,a.w,a.s],styles:[".style-tile[_ngcontent-%COMP%]{border-radius:.25rem}.style-tile-wrapper[_ngcontent-%COMP%]{height:43px}.style-tile-wrapper.circle[_ngcontent-%COMP%]{border:1px solid #fff;height:24px;border-radius:100%;padding-left:8px}.style-tile-wrapper.circle[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   .outline[_ngcontent-%COMP%]{stroke-width:2px!important}.style-tile-wrapper.circle[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{stroke:#fff!important;stroke-width:1px!important}"],changeDetection:0}),e}()},"/w05":function(e,t,n){"use strict";t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,n){n=this.locInfo(n);for(var r=e?"@":"",i=[],o=0,s=0,c=t.length;s<c;s++){var l=t[s].part,u=t[s].original!==l;if(r+=(t[s].separator||"")+l,u||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new a.default("Invalid path: "+r,{loc:n});".."===l&&o++}}return{type:"PathExpression",data:e,depth:o,parts:i,original:r,loc:n}},t.prepareMustache=function(e,t,n,r,i,a){var o=r.charAt(3)||r.charAt(2),s="{"!==o&&"&"!==o;return{type:/\*/.test(r)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:s,strip:i,loc:this.locInfo(a)}},t.prepareRawBlock=function(e,t,n,r){o(e,n),r=this.locInfo(r);var i={type:"Program",body:t,strip:{},loc:r};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}},t.prepareBlock=function(e,t,n,r,i,s){r&&r.path&&o(e,r);var c=/\*/.test(e.open);t.blockParams=e.blockParams;var l=void 0,u=void 0;if(n){if(c)throw new a.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),u=n.strip,l=n.program}i&&(i=l,l=t,t=i);return{type:c?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:l,openStrip:e.strip,inverseStrip:u,closeStrip:r&&r.strip,loc:this.locInfo(s)}},t.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,r=e[e.length-1].loc;n&&r&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},t.preparePartialBlock=function(e,t,n,r){return o(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}};var r,i=n("0KrK"),a=(r=i)&&r.__esModule?r:{default:r};function o(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new a.default(e.path.original+" doesn't match "+t,n)}}},"0KrK":function(e,t,n){"use strict";t.__esModule=!0;var r=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function i(e,t){var n=t&&t.loc,a=void 0,o=void 0,s=void 0,c=void 0;n&&(a=n.start.line,o=n.end.line,s=n.start.column,c=n.end.column,e+=" - "+a+":"+s);for(var l=Error.prototype.constructor.call(this,e),u=0;u<r.length;u++)this[r[u]]=l[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{n&&(this.lineNumber=a,this.endLineNumber=o,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:c,enumerable:!0})):(this.column=s,this.endColumn=c))}catch(d){}}i.prototype=new Error,t.default=i,e.exports=t.default},"0itG":function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("hX56"),s=n("4y1S"),c=n("nsO7"),l=n("C05f"),u=n("HM3f"),d=n("ROBh"),p=n("YtkY"),h=n("TLy2"),f=n("8j5Y"),m=n("Ohay"),g=n("Lrfq"),b=n("c7W3"),v=n("QoSw"),_=n("SBw3"),y=(n("2m+3"),n("WydG")),O=n("iV8b"),x=n("iy5+"),E=n("NNJu"),k=n("s2Ay"),C=n("crdX"),w=n("2kYt"),S=n("j1Bk"),I=n("Wrqg"),T=n("am3J"),A=n("pYIu"),P=n("TdEb"),M=n("pVzg"),D=n("lQIu"),j=n("ZFuN"),R=["diagramInfoSection"],L=["gridSection"];function N(e,t){if(1&e&&(i.xc(),i.wc(),i.mc(0,"div",19),i.mc(1,"label",20),i.fd(2,"LABELS.LAST_UPDATED"),i.lc(),i.mc(3,"div",21),i.mc(4,"div",22),i.fd(5),i.mc(6,"span",23),i.fd(7),i.lc(),i.lc(),i.lc(),i.lc()),2&e){var n=i.yc(2).ngIf;i.Sb(5),i.hd("",null==n?null:n.updatedBy," "),i.Sb(2),i.gd(null==n?null:n.updatedDate)}}function B(e,t){if(1&e&&(i.xc(),i.wc(),i.mc(0,"div",13),i.mc(1,"label",20),i.fd(2,"LABELS.DIAGRAM_SIZE"),i.lc(),i.mc(3,"div",21),i.mc(4,"div",24),i.hc(5,"text-input",25),i.lc(),i.mc(6,"div",24),i.hc(7,"text-input",26),i.lc(),i.lc(),i.lc()),2&e){var n=i.yc(2).ngIf;i.Sb(5),i.Fc("value","",null==n?null:n.width," px"),i.Sb(2),i.Fc("value","",null==n?null:n.height," px")}}function U(e,t){if(1&e){var n=i.nc();i.xc(),i.wc(),i.mc(0,"div",19),i.mc(1,"text-input",27),i.uc("updateText",(function(e){return i.Qc(n),i.yc(3).updateDescription(e)})),i.zc(2,"translate"),i.zc(3,"translate"),i.lc(),i.lc()}if(2&e){var r=i.yc().ngIf,a=i.yc().ngIf;i.Sb(1),i.Ec("label",i.Ac(2,4,"LABELS.DESCRIPTION")),i.Ec("placeholder",i.Ac(3,6,"PLACEHOLDERS.ADD_DESCRIPTION")),i.Ec("value",null==a?null:a.description),i.Dc("readonly","view"===r)}}var F=function(){return[]};function q(e,t){if(1&e){var n=i.nc();i.xc(),i.wc(),i.mc(0,"div",13),i.mc(1,"tags-input-field",28),i.uc("updateTags",(function(e){return i.Qc(n),i.yc(3).updateTags(e)})),i.zc(2,"translate"),i.zc(3,"translate"),i.lc(),i.lc()}if(2&e){var r=i.yc().ngIf,a=i.yc().ngIf;i.Sb(1),i.Ec("label",i.Ac(2,4,"LABELS.TAGS")),i.Ec("placeholder",i.Ac(3,6,"PLACEHOLDERS.ADD_TAGS")),i.Dc("items",null!=a&&a.tagsArray?a.tagsArray:i.Hc(8,F))("readonly","view"===r)}}function W(e,t){if(1&e){var n=i.nc();i.xc(),i.wc(),i.mc(0,"simple-dropdown-item",38),i.uc("click",(function(){i.Qc(n);var e=t.$implicit;return i.yc(4).updateDocumentStatus(e)})),i.mc(1,"div",39),i.hc(2,"span",33),i.mc(3,"span",40),i.fd(4),i.lc(),i.lc(),i.lc()}if(2&e){var r=t.$implicit;i.Dc("item",r),i.Sb(2),i.ad("background-color",r.textColor)("color",r.textColor),i.Sb(2),i.gd(r.label)}}var H=function(){return{closeOnItemClicked:!0,closeOnBlur:!0}};function K(e,t){if(1&e){var n=i.nc();i.mc(0,"abs-dropdown",29),i.mc(1,"simple-dropdown-button",30),i.uc("clicked",(function(e){return i.Qc(n),i.yc(3).onDropdownOpen(e)})),i.mc(2,"div",31),i.mc(3,"div",32),i.hc(4,"span",33),i.zc(5,"async"),i.zc(6,"async"),i.mc(7,"span",34),i.fd(8),i.zc(9,"async"),i.lc(),i.lc(),i.xc(),i.mc(10,"svg",35),i.hc(11,"use",36),i.lc(),i.lc(),i.lc(),i.dd(12,W,5,6,"simple-dropdown-item",37),i.lc()}if(2&e){var r=i.yc(3);i.Dc("settings",i.Hc(14,H)),i.Sb(1),i.Dc("items",r.documentStatusItems),i.Sb(3),i.ad("background-color",i.Ac(5,8,r.documentStatus).textColor)("color",i.Ac(6,10,r.documentStatus).textColor),i.Sb(4),i.gd(i.Ac(9,12,r.documentStatus).label),i.Sb(4),i.Dc("ngForOf",r.documentStatusItems)}}function z(e,t){if(1&e&&(i.mc(0,"div",41),i.hc(1,"span",33),i.zc(2,"async"),i.zc(3,"async"),i.mc(4,"span",34),i.fd(5),i.zc(6,"async"),i.lc(),i.lc()),2&e){var n=i.yc(3);i.Sb(1),i.ad("background-color",i.Ac(2,5,n.documentStatus).textColor)("color",i.Ac(3,7,n.documentStatus).textColor),i.Sb(4),i.gd(i.Ac(6,9,n.documentStatus).label)}}function V(e,t){if(1&e){var n=i.nc();i.mc(0,"collapsable-panel-item",42),i.zc(1,"translate"),i.mc(2,"div",43),i.mc(3,"toggle-button",44),i.uc("change",(function(e){return i.Qc(n),i.yc(3).showGrid(e)})),i.zc(4,"translate"),i.zc(5,"async"),i.lc(),i.lc(),i.mc(6,"div",43),i.mc(7,"toggle-button",45),i.uc("change",(function(e){return i.Qc(n),i.yc(3).snapToGrid(e)})),i.zc(8,"translate"),i.lc(),i.lc(),i.mc(9,"div",43),i.mc(10,"toggle-button",46),i.uc("change",(function(e){return i.Qc(n),i.yc(3).showGuides(e)})),i.zc(11,"translate"),i.zc(12,"async"),i.lc(),i.lc(),i.mc(13,"div",43),i.mc(14,"toggle-button",47),i.uc("change",(function(e){return i.Qc(n),i.yc(3).snapToGuides(e)})),i.zc(15,"async"),i.zc(16,"translate"),i.lc(),i.lc(),i.lc()}if(2&e){var r=i.yc(3);i.Ec("heading",i.Ac(1,8,"PANEL_HEADINGS.GRID")),i.Sb(3),i.Ec("label",i.Ac(4,10,"LABELS.SHOW_GRID")),i.Dc("checked",i.Ac(5,12,r.gridService.showGrid)),i.Sb(4),i.Ec("label",i.Ac(8,14,"LABELS.SNAP_TO_GRID")),i.Sb(3),i.Ec("label",i.Ac(11,16,"LABELS.SHOW_GUIDES")),i.Dc("checked",i.Ac(12,18,r.state.changes("ShowGuides"))),i.Sb(4),i.Ec("label",i.Ac(16,22,"LABELS.SNAP_TO_GUIDES")),i.Dc("checked",i.Ac(15,20,r.state.changes("SnapToGuides")))}}function G(e,t){if(1&e){var n=i.nc();i.mc(0,"div"),i.mc(1,"div",4,5),i.mc(3,"div",6),i.hc(4,"panel-icon-header",7),i.mc(5,"button",8),i.uc("click",(function(){return i.Qc(n),i.yc(2).closePanel()})),i.xc(),i.mc(6,"svg",9),i.hc(7,"use",10),i.lc(),i.lc(),i.lc(),i.dd(8,N,8,2,"div",11),i.dd(9,B,8,2,"div",12),i.dd(10,U,4,8,"div",11),i.zc(11,"async"),i.dd(12,q,4,9,"div",12),i.zc(13,"async"),i.wc(),i.mc(14,"div",13),i.mc(15,"label",14),i.fd(16,"LABELS.DOCUMENT_STATUS.INPUT_LABEL"),i.lc(),i.dd(17,K,13,15,"abs-dropdown",15),i.zc(18,"async"),i.dd(19,z,7,11,"ng-template",null,16,i.ed),i.lc(),i.lc(),i.mc(21,"div",null,17),i.dd(23,V,17,24,"collapsable-panel-item",18),i.lc(),i.lc()}if(2&e){var r=t.ngIf,a=i.Nc(20),o=i.yc().ngIf,s=i.yc();i.Sb(8),i.Dc("ngIf","view"===r),i.Sb(1),i.Dc("ngIf","view"===r),i.Sb(1),i.Dc("ngIf",(null==o?null:o.description)||"edit"===r&&i.Ac(11,7,s.enableControls)),i.Sb(2),i.Dc("ngIf",(null==o?null:o.tagsArray)||"edit"===r&&i.Ac(13,9,s.enableControls)),i.Sb(5),i.Dc("ngIf","edit"===r&&i.Ac(18,11,s.enableControls))("ngIfElse",a),i.Sb(6),i.Dc("ngIf","edit"===r)}}function Y(e,t){if(1&e&&(i.mc(0,"div",2),i.dd(1,G,24,13,"div",3),i.zc(2,"async"),i.lc()),2&e){var n=i.yc();i.Sb(1),i.Dc("ngIf",i.Ac(2,1,n.uiState))}}var X=function(e){function t(t,n,r,i,a,o,s,c,u,d){var p=e.call(this,a,s,i,t,n,o)||this;return p.state=t,p.ll=n,p.gridService=r,p.commandService=i,p.componentFactoryResolver=a,p.injector=o,p.featureList=s,p.dataStore=c,p.translator=u,p.documentStatusMap=d,p.features=new l.a([]),p.documentStatus=new l.a(p.documentStatusMap.getDocumentStatus("none")),p.subs=[],p.enableControls=new l.a(!0),p}return Object(r.e)(t,e),Object.defineProperty(t,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return"diagraminfo"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return"properties"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.DIAGRAM_INFO")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uiState",{get:function(){return this.state.changes("InterfaceControlState")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEditorOpen",{get:function(){return this.state.changes("EditingText").pipe(Object(p.a)((function(e){return!!e.open})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"documentStatusItems",{get:function(){return this.documentStatusMap.getAllStatuses()},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.translator.onLangChange.subscribe((function(){e.documentStatus.next(e.documentStatusMap.getDocumentStatus(e.documentStatus.value.id))})),this.state.changes("SidebarControls").subscribe((function(t){t===x.b.ENABLED?e.enableControls.next(!0):t===x.b.DISABLED&&e.enableControls.next(!1)})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.ngOnInit=function(){this.diagram||(this.diagram=this.getDiagramObservable())},t.prototype.onActive=function(){this.diagram||(this.diagram=this.getDiagramObservable()),this.diagramSub=this.diagram.connect(),a.Jb.track("right.info.panel.click",{value1Type:"status",value1:"open"})},t.prototype.onInactive=function(){a.Jb.track("right.info.panel.click",{value1Type:"status",value1:"close"}),this.diagramSub.unsubscribe()},t.prototype.updateDescription=function(e){a.Jb.track("right.info.description.change"),this.commandService.dispatch(b.a.updateDiagramInfo,{description:e})},t.prototype.updateTags=function(e){a.Jb.track("right.info.tags.update",{value1Type:"tags",value1:e}),this.commandService.dispatch(b.a.updateDiagramInfo,{tags:e})},t.prototype.updateDocumentStatus=function(e){var t=this.documentStatusMap.getDocumentStatus(e.id);a.Jb.track("right.info.status.change",{value1Type:"selectedStatus",value1:t.id,value2Type:"previousStatus",value2:this.documentStatus.getValue().id}),this.commandService.dispatch(b.a.updateDiagramInfo,{status:t.id}).subscribe({error:function(e){a.Jb.track("notification.right.Info.statusChange.fail",{value1Type:"error",value1:e?e.message:"Unknown"})},complete:function(){a.Jb.track("notification.right.Info.statusChange.success")}})},t.prototype.onDropdownOpen=function(){a.Jb.track("right.info.status.click")},t.prototype.showGrid=function(e){var t=e?"true":"false";a.Jb.track("right.info.grid."+t),this.gridService.showGrid.value!==e&&this.gridService.showGrid.next(e)},t.prototype.snapToGrid=function(e){var t=e?"true":"false";a.Jb.track("right.info.snap."+t),this.gridService.enableSnapToGrid.value!==e&&this.gridService.enableSnapToGrid.next(e)},t.prototype.showGuides=function(e){this.state.get("ShowGuides")!==e&&this.state.set("ShowGuides",e)},t.prototype.snapToGuides=function(e){this.state.get("SnapToGuides")!==e&&this.state.set("SnapToGuides",e)},t.prototype.closePanel=function(){this.state.set("OpenRightSidebar",E.r.None)},t.prototype.handleListData=function(e,t){if(e.forEach((function(e){return e.selected=!1})),void 0===t||"object"==typeof t&&Object(c.isEmpty)(t))return e;var n=e.find((function(e){return""+e.value==""+t}));if(n)n.selected=!0;else{var r=e.find((function(e){return e.custom}));r?(r.id=t,r.label=t,r.buttonLabel=t,r.value=t,r.selected=!0):e.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}},t.prototype.getDiagramObservable=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(h.a)((function(e){return e.getDiagramModel()})),Object(h.a)((function(t){var n=e.dataStore.findOne(s.v,{id:t.updatedBy}).pipe(Object(p.a)((function(e){return e&&e.firstName?e:{firstName:"Someone"}})));return Object(u.b)([Object(d.a)(t),n])})),Object(p.a)((function(t){var n=Object(r.h)(t,2),i=n[0],a=n[1],o=i.getBounds();return{description:i.description,tagsArray:i.tagsArray,status:i.status,width:Math.round(o.width),height:Math.round(o.height),typeName:i.typeName?i.typeName:"Block Diagram",updatedBy:a.firstName,updatedDate:e.translator.instant("LABELS.UPDATED_THIS")+" "+i.lastUpdatedMoment()}})),Object(f.a)((function(t){e.documentStatus.next(e.documentStatusMap.getDocumentStatus(t.status))})),Object(m.a)((function(e,t){return Object(c.isEqual)(e,t)})),Object(g.a)())},t.\u0275fac=function(e){return new(e||t)(i.gc(a.Hb),i.gc(v.a),i.gc("GridService"),i.gc(a.B),i.gc(i.m),i.gc(i.C),i.gc(_.a),i.gc(o.b),i.gc(k.e),i.gc(O.a))},t.\u0275cmp=i.ac({type:t,selectors:[["diagram-info-panel"]],viewQuery:function(e,t){var n;(1&e&&(i.kd(R,!0,i.r),i.kd(L,!0,i.r)),2&e)&&(i.Mc(n=i.vc())&&(t.diagramInfoSection=n.first),i.Mc(n=i.vc())&&(t.gridSection=n.first))},features:[i.Pb],decls:3,vars:3,consts:[[1,"sidebar-scrollbar"],["class","panel-container",4,"ngIf"],[1,"panel-container"],[4,"ngIf"],[1,"panel-section","fx-margin-top-24"],["diagramInfoSection",""],[1,"panel-title-close-container"],["mainText","HEADER_MENU.PREFERENCES"],[1,"panel-close-btn",3,"click"],[1,"nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],["class","panel-item fx-margin-top-24",4,"ngIf"],["class","panel-item",4,"ngIf"],[1,"panel-item"],["translate","",1,"body"],["class","document-status-dropdown",3,"settings",4,"ngIf","ngIfElse"],["readonlyStatus",""],["gridSection",""],["testId","grid-panel",3,"heading",4,"ngIf"],[1,"panel-item","fx-margin-top-24"],["translate",""],[1,"row"],[1,"col","fx-margin-top-5"],[1,"grey","info-panel-user-time-stamp"],[1,"col"],["inline","true","label","W","readonly","true","transparentTextBox","true",3,"value"],["inline","true","label","H","readonly","true","transparentTextBox","true",3,"value"],["multiLined","true","data-testid","diagram-description",1,"info-panel-text-input",3,"label","placeholder","value","readonly","updateText"],["data-testid","add-tags",1,"info-panel-text-input",3,"label","items","placeholder","readonly","updateTags"],[1,"document-status-dropdown",3,"settings"],["ddbutton","",1,"document-status-dropdown-container",3,"items","clicked"],[1,"dropdown-idle"],[1,"document-status-dd-item"],[1,"document-status-dd-item-dot"],["translate","",1,"document-status-dd-item-text","body"],[1,"document-status-dropdown-icon","nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thick"],["dditem","",3,"item","click",4,"ngFor","ngForOf"],["dditem","",3,"item","click"],[1,"document-status-dd-item","document-status-list-item"],[1,"document-status-dd-item-text","body"],[1,"document-status-dd-item","document-status-list-item","document-status-label"],["testId","grid-panel",3,"heading"],[1,"panel-item","fx-margin-right-50"],["data-testid","show-grid-toggle",3,"label","checked","change"],["data-testid","snap-grid-toggle","checked","gridService.enableSnapToGrid | async",3,"label","change"],["data-testid","show-guides-toggle",3,"label","checked","change"],["data-testid","snap-guides-toggle",3,"checked","label","change"]],template:function(e,t){1&e&&(i.mc(0,"perfect-scrollbar",0),i.dd(1,Y,3,3,"div",1),i.zc(2,"async"),i.lc()),2&e&&(i.Sb(1),i.Dc("ngIf",i.Ac(2,1,t.diagram)))},directives:[C.b,w.t,S.a,k.a,I.a,T.a,A.a,P.a,w.s,M.a,D.b,j.a],pipes:[w.b,k.d],styles:[".info-panel-text-formatting[_ngcontent-%COMP%]{display:flex}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container{display:inline-block;width:22px}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container button{padding:0;margin:0}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container .nu-icon{width:24px;height:24px}.info-panel-text-formatting[_ngcontent-%COMP%]   .info-panel-text-bius[_ngcontent-%COMP%]{flex:1}.info-panel-text-formatting[_ngcontent-%COMP%]   .info-panel-text-align[_ngcontent-%COMP%]{margin-right:.875rem}.info-panel-line-formatting[_ngcontent-%COMP%]   .shrink[_ngcontent-%COMP%]{width:calc(54% - 10px)}.info-panel-line-formatting[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]{width:46%}.info-panel-style-color-pickers[_ngcontent-%COMP%]  .colorpicker-container{margin-bottom:1.25rem}.info-panel-user-time-stamp[_ngcontent-%COMP%]{text-transform:lowercase}.info-panel-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5019607843137255);z-index:1}.panel-section-color-text[_ngcontent-%COMP%]{margin-left:0}.document-status-dropdown-container[_ngcontent-%COMP%]{padding:.25rem;margin-top:.25rem;border:1px solid #caccce;-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;background-color:#fff;border-radius:.25rem;display:flex;align-items:center;height:36px}.dropdown-selected[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.dropdown-value[_ngcontent-%COMP%]{flex:1}.document-status-dd-item-list[_ngcontent-%COMP%]{opacity:0;padding-right:.625rem;padding-left:.625rem;position:absolute;border:#caccce;border-radius:.25rem;width:100%;background-color:#fff;right:0;min-width:130px;z-index:1;overflow:hidden;box-shadow:0 2px 2px #c3c3de;transform:translateY(-5px)}.document-status-dd-item[_ngcontent-%COMP%]{display:flex;align-items:center}.document-status-list-item[_ngcontent-%COMP%]{padding:.375rem 0}.document-status-label[_ngcontent-%COMP%]{margin-top:.25rem;padding:.5rem;border-radius:.25rem;border:#caccce;box-shadow:0 2px 2px #caccce}.document-status-dropdown-icon[_ngcontent-%COMP%]{margin-right:.625rem;height:12px;width:12px;color:#64767d}.document-status-dd-item-dot[_ngcontent-%COMP%]{margin:.625rem;display:inline-block;width:8px;height:8px;border-radius:50%}.document-status-dd-item-text[_ngcontent-%COMP%]{color:#354b53;-webkit-user-select:none;-moz-user-select:none;user-select:none}.dropdown-idle[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.dropdown-idle[_ngcontent-%COMP%]   .document-status-dd-item[_ngcontent-%COMP%]{flex-grow:1}.chevron[_ngcontent-%COMP%]{width:24px;height:24px}.document-status-dropdown[_ngcontent-%COMP%]  .simple-dd-btn-container{width:100%;max-width:100%}.document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:100%}@media only screen and (max-height:736px){.document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{height:200px}}.document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-inner{width:100%}.info-panel-text-input[_ngcontent-%COMP%]    , .info-panel-text-input[_ngcontent-%COMP%]     .text-input{height:36px}.panel-title-close-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:40px}.panel-close-btn[_ngcontent-%COMP%]{margin-top:.375rem;background:transparent;margin-right:-10px;cursor:pointer}.nu-ic-close[_ngcontent-%COMP%], .panel-close-btn[_ngcontent-%COMP%]{height:35px;width:35px}.abs-dropdown-inner[_ngcontent-%COMP%], .abs-dropdown-items-container[_ngcontent-%COMP%]{min-width:100%}"],changeDetection:0}),t}(y.a)},"13fK":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("ROBh"),i=n("5xGT"),a=n("QoSw"),o=n("YtkY"),s=n("EM62"),c=function(){function e(e,t){this.ll=e,this.states=t}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this.states.get("Selected");return this.locator.getDiagramOnce().pipe(Object(o.a)((function(e){return!e.isShapeInGroup(t)})))},e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,itemIcon:{type:"svg",value:e.icon},value:e}}));return Object(r.a)({value:n})},e.prototype.getApplyData=function(e,t){var n={shapeIds:this.states.get("Selected"),isVertical:t.value.isVertical,alignment:t.value.alignment};return Object(r.a)(n)},e.\u0275fac=function(t){return new(t||e)(s.qc(a.a),s.qc(i.Hb))},e.\u0275prov=s.cc({token:e,factory:e.\u0275fac}),e}()},"142O":function(e,t,n){"use strict";t.__esModule=!0;var r=n("XVEb");t.default=function(e){e.registerDecorator("inline",(function(e,t,n,i){var a=e;return t.partials||(t.partials={},a=function(i,a){var o=n.partials;n.partials=r.extend({},o,t.partials);var s=e(i,a);return n.partials=o,s}),t.partials[i.args[0]]=i.fn,a}))},e.exports=t.default},"1NHC":function(e,t,n){var r=n("sfKy"),i=n("oFOz"),a=n("eQvJ"),o=n("7B5I"),s=n("39iF");t.ABS=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.abs(e)},t.ACOS=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.acos(e);return isNaN(t)&&(t=i.num),t},t.ACOSH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.log(e+Math.sqrt(e*e-1));return isNaN(t)&&(t=i.num),t},t.ACOT=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.atan(1/e)},t.ACOTH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=.5*Math.log((e+1)/(e-1));return isNaN(t)&&(t=i.num),t},t.AGGREGATE=function(e,n,o,s){if(e=r.parseNumber(e),n=r.parseNumber(e),r.anyIsError(e,n))return i.value;switch(e){case 1:return a.AVERAGE(o);case 2:return a.COUNT(o);case 3:return a.COUNTA(o);case 4:return a.MAX(o);case 5:return a.MIN(o);case 6:return t.PRODUCT(o);case 7:return a.STDEV.S(o);case 8:return a.STDEV.P(o);case 9:return t.SUM(o);case 10:return a.VAR.S(o);case 11:return a.VAR.P(o);case 12:return a.MEDIAN(o);case 13:return a.MODE.SNGL(o);case 14:return a.LARGE(o,s);case 15:return a.SMALL(o,s);case 16:return a.PERCENTILE.INC(o,s);case 17:return a.QUARTILE.INC(o,s);case 18:return a.PERCENTILE.EXC(o,s);case 19:return a.QUARTILE.EXC(o,s)}},t.ARABIC=function(e){if(null==e)return 0;if(e instanceof Error)return e;if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(e))return i.value;var t=0;return e.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(e){t+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[e]})),t},t.ASIN=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.asin(e);return isNaN(t)&&(t=i.num),t},t.ASINH=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.log(e+Math.sqrt(e*e+1))},t.ATAN=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.atan(e)},t.ATAN2=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||Math.atan2(e,t)},t.ATANH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.log((1+e)/(1-e))/2;return isNaN(t)&&(t=i.num),t},t.BASE=function(e,t,n){e=r.parseNumber(e),t=r.parseNumber(t),n=r.parseNumber(n);var a=r.anyError(e,t,n);if(a)return a;if(0===t)return i.num;var o=e.toString(t);return new Array(Math.max(n+1-o.length,0)).join("0")+o},t.CEILING=function(e,n,i){e=r.parseNumber(e),n=r.parseNumber(n),i=r.parseNumber(i);var a=r.anyError(e,n,i);if(a)return a;if(0===n)return 0;n=Math.abs(n);var o=-Math.floor(Math.log(n)/Math.log(10));return e>=0?t.ROUND(Math.ceil(e/n)*n,o):0===i?-t.ROUND(Math.floor(Math.abs(e)/n)*n,o):-t.ROUND(Math.ceil(Math.abs(e)/n)*n,o)},t.CEILING.MATH=t.CEILING,t.CEILING.PRECISE=t.CEILING,t.COMBIN=function(e,n){e=r.parseNumber(e),n=r.parseNumber(n);var a=r.anyError(e,n);return a||(e<n?i.num:t.FACT(e)/(t.FACT(n)*t.FACT(e-n)))},t.COMBINA=function(e,n){e=r.parseNumber(e),n=r.parseNumber(n);var a=r.anyError(e,n);return a||(e<n?i.num:0===e&&0===n?1:t.COMBIN(e+n-1,e-1))},t.COS=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.cos(e)},t.COSH=function(e){return(e=r.parseNumber(e))instanceof Error?e:(Math.exp(e)+Math.exp(-e))/2},t.COT=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.div0:1/Math.tan(e)},t.COTH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;if(0===e)return i.div0;var t=Math.exp(2*e);return(t+1)/(t-1)},t.CSC=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.div0:1/Math.sin(e)},t.CSCH=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.div0:2/(Math.exp(e)-Math.exp(-e))},t.DECIMAL=function(e,t){if(arguments.length<1)return i.value;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(0===t?i.num:parseInt(e,t))},t.DEGREES=function(e){return(e=r.parseNumber(e))instanceof Error?e:180*e/Math.PI},t.EVEN=function(e){return(e=r.parseNumber(e))instanceof Error?e:t.CEILING(e,-2,-1)},t.EXP=function(e){return arguments.length<1?i.na:arguments.length>1?i.error:(e=r.parseNumber(e))instanceof Error?e:e=Math.exp(e)};var c=[];t.FACT=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var n=Math.floor(e);return 0===n||1===n?1:(c[n]>0||(c[n]=t.FACT(n-1)*n),c[n])},t.FACTDOUBLE=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var n=Math.floor(e);return n<=0?1:n*t.FACTDOUBLE(n-2)},t.FLOOR=function(e,n){e=r.parseNumber(e),n=r.parseNumber(n);var a=r.anyError(e,n);if(a)return a;if(0===n)return 0;if(!(e>=0&&n>0||e<=0&&n<0))return i.num;n=Math.abs(n);var o=-Math.floor(Math.log(n)/Math.log(10));return e>=0?t.ROUND(Math.floor(e/n)*n,o):-t.ROUND(Math.ceil(Math.abs(e)/n),o)},t.FLOOR.MATH=function(e,n,i){if(n instanceof Error)return n;n=void 0===n?0:n,e=r.parseNumber(e),n=r.parseNumber(n),i=r.parseNumber(i);var a=r.anyError(e,n,i);if(a)return a;if(0===n)return 0;n=n?Math.abs(n):1;var o=-Math.floor(Math.log(n)/Math.log(10));return e>=0?t.ROUND(Math.floor(e/n)*n,o):0===i||void 0===i?-t.ROUND(Math.ceil(Math.abs(e)/n)*n,o):-t.ROUND(Math.floor(Math.abs(e)/n)*n,o)},t.FLOOR.PRECISE=t.FLOOR.MATH,t.GCD=function(){var e=r.parseNumberArray(r.flatten(arguments));if(e instanceof Error)return e;for(var t=e.length,n=e[0],i=n<0?-n:n,a=1;a<t;a++){for(var o=e[a],s=o<0?-o:o;i&&s;)i>s?i%=s:s%=i;i+=s}return i},t.INT=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.floor(e)},t.ISO={CEILING:t.CEILING},t.LCM=function(){var e=r.parseNumberArray(r.flatten(arguments));if(e instanceof Error)return e;for(var t,n,i,a,o=1;void 0!==(i=e.pop());){if(0===i)return 0;for(;i>1;){if(i%2){for(t=3,n=Math.floor(Math.sqrt(i));t<=n&&i%t;t+=2);a=t<=n?t:i}else a=2;for(i/=a,o*=a,t=e.length;t;e[--t]%a==0&&1==(e[t]/=a)&&e.splice(t,1));}}return o},t.LN=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.num:Math.log(e)},t.LN10=function(){return Math.log(10)},t.LN2=function(){return Math.log(2)},t.LOG10E=function(){return Math.LOG10E},t.LOG2E=function(){return Math.LOG2E},t.LOG=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(0===e||0===t?i.num:Math.log(e)/Math.log(t))},t.LOG10=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.num:Math.log(e)/Math.log(10)},t.MOD=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);if(n)return n;if(0===t)return i.div0;var a=Math.abs(e%t);return a=e<0?t-a:a,t>0?a:-a},t.MROUND=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(e*t==0?0:e*t<0?i.num:Math.round(e/t)*t)},t.MULTINOMIAL=function(){var e=r.parseNumberArray(r.flatten(arguments));if(e instanceof Error)return e;for(var n=0,i=1,a=0;a<e.length;a++)n+=e[a],i*=t.FACT(e[a]);return t.FACT(n)/i},t.ODD=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.ceil(Math.abs(e));return t=1&t?t:t+1,e>=0?t:-t},t.PI=function(){return Math.PI},t.E=function(){return Math.E},t.POWER=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);if(n)return n;if(0===e&&0===t)return i.num;var a=Math.pow(e,t);return isNaN(a)?i.num:a},t.PRODUCT=function(){var e=r.flatten(arguments),t=e.filter((function(e){return null!=e}));if(0===t.length)return 0;var n=r.parseNumberArray(t);if(n instanceof Error)return n;for(var i=1,a=0;a<n.length;a++)i*=n[a];return i},t.QUOTIENT=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||parseInt(e/t,10)},t.RADIANS=function(e){return(e=r.parseNumber(e))instanceof Error?e:e*Math.PI/180},t.RAND=function(){return Math.random()},t.RANDBETWEEN=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||e+Math.ceil((t-e+1)*Math.random())-1},t.ROMAN=function(e){if((e=r.parseNumber(e))instanceof Error)return e;for(var t=String(e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],i="",a=3;a--;)i=(n[+t.pop()+10*a]||"")+i;return new Array(+t.join("")+1).join("M")+i},t.ROUND=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||Math.round(e*Math.pow(10,t))/Math.pow(10,t)},t.ROUNDDOWN=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(e>0?1:-1)*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},t.ROUNDUP=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(e>0?1:-1)*Math.ceil(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},t.SEC=function(e){return(e=r.parseNumber(e))instanceof Error?e:1/Math.cos(e)},t.SECH=function(e){return(e=r.parseNumber(e))instanceof Error?e:2/(Math.exp(e)+Math.exp(-e))},t.SERIESSUM=function(e,t,n,a){if(e=r.parseNumber(e),t=r.parseNumber(t),n=r.parseNumber(n),a=r.parseNumberArray(a),r.anyIsError(e,t,n,a))return i.value;for(var o=a[0]*Math.pow(e,t),s=1;s<a.length;s++)o+=a[s]*Math.pow(e,t+s*n);return o},t.SIGN=function(e){return(e=r.parseNumber(e))instanceof Error?e:e<0?-1:0===e?0:1},t.SIN=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.sin(e)},t.SINH=function(e){return(e=r.parseNumber(e))instanceof Error?e:(Math.exp(e)-Math.exp(-e))/2},t.SQRT=function(e){return(e=r.parseNumber(e))instanceof Error?e:e<0?i.num:Math.sqrt(e)},t.SQRTPI=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.sqrt(e*Math.PI)},t.SQRT1_2=function(){return 1/Math.sqrt(2)},t.SQRT2=function(){return Math.sqrt(2)},t.SUBTOTAL=function(e,n){if((e=r.parseNumber(e))instanceof Error)return e;switch(e){case 1:return a.AVERAGE(n);case 2:return a.COUNT(n);case 3:return a.COUNTA(n);case 4:return a.MAX(n);case 5:return a.MIN(n);case 6:return t.PRODUCT(n);case 7:return a.STDEV.S(n);case 8:return a.STDEV.P(n);case 9:return t.SUM(n);case 10:return a.VAR.S(n);case 11:return a.VAR.P(n);case 101:return a.AVERAGE(n);case 102:return a.COUNT(n);case 103:return a.COUNTA(n);case 104:return a.MAX(n);case 105:return a.MIN(n);case 106:return t.PRODUCT(n);case 107:return a.STDEV.S(n);case 108:return a.STDEV.P(n);case 109:return t.SUM(n);case 110:return a.VAR.S(n);case 111:return a.VAR.P(n)}},t.ADD=function(e,t){if(2!==arguments.length)return i.na;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||e+t},t.MINUS=function(e,t){if(2!==arguments.length)return i.na;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||e-t},t.DIVIDE=function(e,t){if(2!==arguments.length)return i.na;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(0===t?i.div0:e/t)},t.MULTIPLY=function(e,t){if(2!==arguments.length)return i.na;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||e*t},t.GT=function(e,t){if(2!==arguments.length)return i.na;if(e instanceof Error)return e;if(t instanceof Error)return t;r.anyIsString(e,t)?(e=r.parseString(e),t=r.parseString(t)):(e=r.parseNumber(e),t=r.parseNumber(t));var n=r.anyError(e,t);return n||e>t},t.GTE=function(e,t){if(2!==arguments.length)return i.na;r.anyIsString(e,t)?(e=r.parseString(e),t=r.parseString(t)):(e=r.parseNumber(e),t=r.parseNumber(t));var n=r.anyError(e,t);return n||e>=t},t.LT=function(e,t){if(2!==arguments.length)return i.na;r.anyIsString(e,t)?(e=r.parseString(e),t=r.parseString(t)):(e=r.parseNumber(e),t=r.parseNumber(t));var n=r.anyError(e,t);return n||e<t},t.LTE=function(e,t){if(2!==arguments.length)return i.na;r.anyIsString(e,t)?(e=r.parseString(e),t=r.parseString(t)):(e=r.parseNumber(e),t=r.parseNumber(t));var n=r.anyError(e,t);return n||e<=t},t.EQ=function(e,t){return 2!==arguments.length?i.na:e instanceof Error?e:t instanceof Error?t:(null===e&&(e=void 0),null===t&&(t=void 0),e===t)},t.NE=function(e,t){return 2!==arguments.length?i.na:e instanceof Error?e:t instanceof Error?t:(null===e&&(e=void 0),null===t&&(t=void 0),e!==t)},t.POW=function(e,n){return 2!==arguments.length?i.na:t.POWER(e,n)},t.SUM=function(){var e=0;return r.arrayEach(r.argsToArray(arguments),(function(n){if(e instanceof Error)return!1;if(n instanceof Error)e=n;else if("number"==typeof n)e+=n;else if("string"==typeof n){var r=parseFloat(n);!isNaN(r)&&(e+=r)}else if(Array.isArray(n)){var i=t.SUM.apply(null,n);i instanceof Error?e=i:e+=i}})),e},t.SUMIF=function(e,t,n){if(e=r.flatten(e),n=n?r.flatten(n):e,e instanceof Error)return e;if(null==t||t instanceof Error)return 0;for(var i=0,a="*"===t,o=a?null:s.parse(t+""),c=0;c<e.length;c++){var l=e[c],u=n[c];if(a)i+=l;else{var d=[s.createToken(l,s.TOKEN_TYPE_LITERAL)].concat(o);i+=s.compute(d)?u:0}}return i},t.SUMIFS=function(){var e=r.argsToArray(arguments),t=r.parseNumberArray(r.flatten(e.shift()));if(t instanceof Error)return t;for(var n=e,i=n.length/2,a=0;a<i;a++)n[2*a]=r.flatten(n[2*a]);var o=0;for(a=0;a<t.length;a++){for(var c=!1,l=0;l<i;l++){var u=n[2*l][a],d=n[2*l+1],p=void 0===d||"*"===d,h=!1;if(p)h=!0;else{var f=s.parse(d+""),m=[s.createToken(u,s.TOKEN_TYPE_LITERAL)].concat(f);h=s.compute(m)}if(!h){c=!1;break}c=!0}c&&(o+=t[a])}return o},t.SUMPRODUCT=function(){if(!arguments||0===arguments.length)return i.value;for(var e,t,n,a,o=arguments.length+1,s=0,c=0;c<arguments[0].length;c++)if(arguments[0][c]instanceof Array)for(var l=0;l<arguments[0][c].length;l++){for(e=1,t=1;t<o;t++){var u=arguments[t-1][c][l];if(u instanceof Error)return u;if((a=r.parseNumber(u))instanceof Error)return a;e*=a}s+=e}else{for(e=1,t=1;t<o;t++){var d=arguments[t-1][c];if(d instanceof Error)return d;if((n=r.parseNumber(d))instanceof Error)return n;e*=n}s+=e}return s},t.SUMSQ=function(){var e=r.parseNumberArray(r.flatten(arguments));if(e instanceof Error)return e;for(var t=0,n=e.length,i=0;i<n;i++)t+=o.ISNUMBER(e[i])?e[i]*e[i]:0;return t},t.SUMX2MY2=function(e,t){if(e=r.parseNumberArray(r.flatten(e)),t=r.parseNumberArray(r.flatten(t)),r.anyIsError(e,t))return i.value;for(var n=0,a=0;a<e.length;a++)n+=e[a]*e[a]-t[a]*t[a];return n},t.SUMX2PY2=function(e,t){if(e=r.parseNumberArray(r.flatten(e)),t=r.parseNumberArray(r.flatten(t)),r.anyIsError(e,t))return i.value;var n=0;e=r.parseNumberArray(r.flatten(e)),t=r.parseNumberArray(r.flatten(t));for(var a=0;a<e.length;a++)n+=e[a]*e[a]+t[a]*t[a];return n},t.SUMXMY2=function(e,t){if(e=r.parseNumberArray(r.flatten(e)),t=r.parseNumberArray(r.flatten(t)),r.anyIsError(e,t))return i.value;var n=0;e=r.flatten(e),t=r.flatten(t);for(var a=0;a<e.length;a++)n+=Math.pow(e[a]-t[a],2);return n},t.TAN=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.tan(e)},t.TANH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.exp(2*e);return(t-1)/(t+1)},t.TRUNC=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(e>0?1:-1)*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)}},"1OKj":function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("KEM+")),a=r(n("VrFO")),o=r(n("Y9Ll")),s=n("Y6vQ"),c=n("4e42").getGrammar,l=function(){function e(){(0,a.default)(this,e),this.expr=this.expr.bind(this),this._grammar=c()}return(0,o.default)(e,[{key:"addBinaryOp",value:function(e,t,n,r){this._addGrammarElement(e,(0,i.default)({type:"binaryOp",precedence:t},r?"evalOnDemand":"eval",n))}},{key:"addFunction",value:function(e,t){this._grammar.functions[e]=t}},{key:"addFunctions",value:function(e){for(var t in e)this._grammar.functions[t]=e[t]}},{key:"addUnaryOp",value:function(e,t){this._addGrammarElement(e,{type:"unaryOp",weight:1/0,eval:t})}},{key:"addTransform",value:function(e,t){this._grammar.transforms[e]=t}},{key:"addTransforms",value:function(e){for(var t in e)this._grammar.transforms[t]=e[t]}},{key:"compile",value:function(e){return this.createExpression(e).compile()}},{key:"createExpression",value:function(e){return new s(this._grammar,e)}},{key:"getFunction",value:function(e){return this._grammar.functions[e]}},{key:"getTransform",value:function(e){return this._grammar.transforms[e]}},{key:"eval",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.createExpression(e);return n.eval(t)}},{key:"evalSync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.createExpression(e);return n.evalSync(t)}},{key:"expr",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=e.reduce((function(e,t,r){return e+=t+(r<n.length?n[r]:"")}),"");return this.createExpression(i)}},{key:"removeOp",value:function(e){!this._grammar.elements[e]||"binaryOp"!==this._grammar.elements[e].type&&"unaryOp"!==this._grammar.elements[e].type||delete this._grammar.elements[e]}},{key:"_addGrammarElement",value:function(e,t){this._grammar.elements[e]=t}}]),e}();e.exports=new l,e.exports.Jexl=l},"1U5y":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("5xGT"),i=n("19Zn"),a=n("ROBh"),o=n("P4Xx"),s=n("nsO7"),c=n("6EBr"),l=n("YtkY"),u=n("0jHB"),d=n("EM62"),p=function(){function e(e,t){this.staticRenderer=e,this.defLocator=t,this.longArrowWidth=70,this.shortArrowWidth=30,this.arrowheadHeight=11.5,this.arrowThickness=2}return e.prototype.getFeatureData=function(e,t){var n=this,r="changeLeftArrowHead"===e?"left":"right",i=t.options.map((function(e){return n.getItemData(e,e,r,t.shapeId,t.end)})),a=this.getItemData("none",null,r,t.shapeId,t.end);i.unshift(a);var o=Object(s.uniqBy)(i,(function(e){return e.id}));return(o.find((function(e){return e.id===t.selected}))||a).selected=!0,this.loadSourceFiles(t.options).pipe(Object(l.a)((function(){return{value:o}})))},e.prototype.getApplyData=function(e,t){var n,r,i={changes:(n={},n[t.shapeId]=(r={},r[t.end]=t.value,r),n)};return Object(a.a)(i)},e.prototype.getDrawableIcon=function(e,t,n){var i=this;if(!e)return n===this.shortArrowWidth?"left"===t?{type:"svg",value:"arrow-default-left"}:{type:"svg",value:"arrow-default-right"}:{type:"canvas",value:function(e,t){var r=c.a.arrowIconColor;i.drawTail(e,r,n)}};var a=r.eb.fromTransform({scaleX:1,scaleY:1,skewX:0,skewY:0,x:"right"===t?n-this.arrowThickness:this.arrowThickness,y:this.arrowheadHeight/2+2*this.arrowThickness,angle:"right"===t?0:180});return{type:"canvas",value:function(t,r){var o=c.a.arrowIconColor;i.drawTail(t,o,n),i.staticRenderer.renderArrowHeadSync(t,e,{x:0,y:0,width:i.arrowheadHeight,height:i.arrowheadHeight},a,{lineColor:o,lineThickness:i.arrowThickness})}}},e.prototype.drawTail=function(e,t,n){e.setStrokeStyle(this.arrowThickness),e.beginStroke(t),e.moveTo(this.arrowThickness,this.arrowheadHeight/2+2*this.arrowThickness),e.lineTo(n-this.arrowThickness,this.arrowheadHeight/2+2*this.arrowThickness)},e.prototype.loadSourceFiles=function(e){var t=this,n=e.map((function(e){return t.defLocator.getClass(e)}));return Object(o.a)(n)},e.prototype.getItemData=function(e,t,n,r,i){return{id:e,label:null,itemIcon:this.getDrawableIcon(t,n,this.longArrowWidth),buttonIcon:this.getDrawableIcon(t,n,this.shortArrowWidth),value:t,shapeId:r,end:i}},e.\u0275fac=function(t){return new(t||e)(d.qc(i.D),d.qc(u.a))},e.\u0275prov=d.cc({token:e,factory:e.\u0275fac}),e}()},"1pbQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("D57K"),i=n("c7W3"),a=n("5xGT"),o=n("NNJu"),s=n("4C8c"),c=n("C05f"),l=n("TLy2"),u=n("Ohay"),d=n("YtkY"),p=n("8j5Y"),h=n("EM62"),f=n("s2Ay"),m=n("rPyh"),g=n("2kYt"),b=n("sIsI");function v(e,t){if(1&e&&(h.mc(0,"div",12),h.fd(1),h.lc()),2&e){var n=h.yc().$implicit;h.Sb(1),h.hd(" ",n.oldValue," ")}}function _(e,t){if(1&e&&(h.mc(0,"div",5),h.mc(1,"div",6),h.fd(2),h.zc(3,"async"),h.lc(),h.mc(4,"div",7),h.dd(5,v,2,1,"div",8),h.mc(6,"div",9),h.fd(7),h.lc(),h.lc(),h.mc(8,"div",10),h.mc(9,"div",11),h.fd(10),h.zc(11,"translate"),h.lc(),h.mc(12,"div",11),h.fd(13),h.lc(),h.lc(),h.lc()),2&e){var n=t.$implicit;h.Sb(2),h.hd(" ",h.Ac(3,6,n.title)," "),h.Sb(3),h.Dc("ngIf",void 0!==n.oldValue&&""!==n.oldValue),h.Sb(2),h.hd(" ",n.newValue," "),h.Sb(3),h.id(" ",h.Ac(11,8,"SHAPE_DATA.TABS.HISTORY.BY")," ",n.userName," "),h.Sb(3),h.hd(" ",n.time," ")}}function y(e,t){if(1&e){var n=h.nc();h.mc(0,"app-collapsible-menu-item",2),h.uc("activeChange",(function(e){h.Qc(n);var r=t.$implicit;return h.yc().toggleCollabsibleItem(r.date,e)})),h.mc(1,"div",3),h.dd(2,_,14,10,"div",4),h.lc(),h.lc()}if(2&e){var r=t.$implicit,i=h.yc();h.Dc("title",r.date)("subtitle",i.getGroupSubTitle(r.userNames))("active",r.active),h.Sb(2),h.Dc("ngForOf",r.items)}}var O=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.commandSvc=r,o.shapeHistoryService=i,o.translateService=a,o.subs=[],o.historyGroups=new c.a([]),o.activeShapeHistoryGroups={},o}return Object(r.e)(t,e),t.prototype.ngAfterViewInit=function(){var e=this,t=this.commandSvc.dispatch(i.a.getEntityHistory,this.eDataId,{entityId:this.entityId}).pipe(Object(l.a)((function(){return e.shapeHistoryService.getShapeHistoryGroups(e.eDataId,e.entityId).pipe(Object(u.a)((function(e,t){return e===t||(null==e?void 0:e.length)===t.length})),Object(d.a)((function(t){var n=[];if(t&&t.length>0){var r=void 0;t.forEach((function(t){var i=e.getShapeHistoryViewItem(t);r&&r.date===t.date||(r={items:[],date:t.date,userNames:new Set,active:!!e.activeShapeHistoryGroups[t.date]},n.push(r)),r.userNames.add(t.userName),r.items.push(i)}))}return n})),Object(p.a)((function(t){return e.historyGroups.next(t)})))}))).subscribe();this.subs.push(t)},t.prototype.toggleCollabsibleItem=function(e,t){this.activeShapeHistoryGroups[e]=!this.activeShapeHistoryGroups[e]},t.prototype.getGroupSubTitle=function(e){var t=e.size>3?e.size-3:0,n=t<1?"":1===t?this.translateService.instant("SHAPE_DATA.TABS.HISTORY.SUBTITLE.AND_OTHER"):this.translateService.instant("SHAPE_DATA.TABS.HISTORY.SUBTITLE.AND_OTHERS",{count:t});return Object(r.j)(e).slice(0,3).join(", ")+" "+n},t.prototype.ngOnDestroy=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},t.prototype.getShapeHistoryViewItem=function(e){return{id:e.id,title:this.getShapeHistoryViewTitle(e),oldValue:this.getTranslatedValue(e.type,e.oldValue),newValue:this.getTranslatedValue(e.type,e.newValue),date:e.date,time:e.time,userName:e.userName}},t.prototype.getTranslatedValue=function(e,t){var n;return(null===(n=t)||void 0===n?void 0:n.translate)?this.translateService.instant("SHAPE_DATA.TABS.HISTORY."+(null==e?void 0:e.toUpperCase())+"."+t.key):t},t.prototype.getShapeHistoryViewTitle=function(e){var t;return this.translateService.get("SHAPE_DATA.TABS.HISTORY."+(null===(t=e.type)||void 0===t?void 0:t.toUpperCase())+"."+e.action).pipe(Object(d.a)((function(t){return("DELETED"===e.type&&"DELETED"===e.fieldName?"":e.fieldName)+" "+t})))},t.\u0275fac=function(e){return new(e||t)(h.gc(h.m),h.gc(h.C),h.gc(a.B),h.gc(s.a),h.gc(f.e))},t.\u0275cmp=h.ac({type:t,selectors:[["shape-history"]],inputs:{eDataId:"eDataId",entityId:"entityId"},features:[h.Pb],decls:4,vars:3,consts:[[1,"shape-history-section"],[3,"title","subtitle","active","activeChange",4,"ngFor","ngForOf"],[3,"title","subtitle","active","activeChange"],[1,"shape-history-group"],["class","shape-history-item",4,"ngFor","ngForOf"],[1,"shape-history-item"],[1,"history-item-title","fx-padding-left-8","body"],[1,"history-item-change"],["class","history-item-old-val history-item-prop body",4,"ngIf"],[1,"history-item-new-val","history-item-prop","body"],[1,"history-item-meta"],[1,"history-item-prop","caption"],[1,"history-item-old-val","history-item-prop","body"]],template:function(e,t){1&e&&(h.mc(0,"div",0),h.mc(1,"app-collapsible-menu"),h.dd(2,y,3,4,"app-collapsible-menu-item",1),h.zc(3,"async"),h.lc(),h.lc()),2&e&&(h.Sb(2),h.Dc("ngForOf",h.Ac(3,1,t.historyGroups)))},directives:[m.a,g.s,b.a,g.t],pipes:[g.b,f.d],styles:[".shape-history-section[_ngcontent-%COMP%]{margin-left:-.625rem}.shape-history-group[_ngcontent-%COMP%]{padding-left:1.25rem}.shape-history-item[_ngcontent-%COMP%]{float:none;max-width:454px;display:block;padding-top:.625rem;padding-bottom:1rem}.shape-history-item[_ngcontent-%COMP%]   .history-item-title[_ngcontent-%COMP%]{color:#354b53;-webkit-user-select:text;-moz-user-select:text;user-select:text}.shape-history-item[_ngcontent-%COMP%]   .history-item-prop[_ngcontent-%COMP%]{margin-right:.5rem;margin-top:.25rem;margin-bottom:.25rem;padding:.25rem .5rem;float:left}.shape-history-item[_ngcontent-%COMP%]   .history-item-change[_ngcontent-%COMP%]{overflow:hidden;padding-right:.25rem;padding-top:.25rem;padding-bottom:.25rem}.shape-history-item[_ngcontent-%COMP%]   .history-item-change[_ngcontent-%COMP%]   .history-item-old-val[_ngcontent-%COMP%]{-webkit-user-select:text;-moz-user-select:text;user-select:text;-webkit-text-decoration-line:line-through;text-decoration-line:line-through;color:#dd524c;background:#fcf2f2}.shape-history-item[_ngcontent-%COMP%]   .history-item-change[_ngcontent-%COMP%]   .history-item-new-val[_ngcontent-%COMP%]{-webkit-user-select:text;-moz-user-select:text;user-select:text;color:#29947f;background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.shape-history-item[_ngcontent-%COMP%]   .history-item-meta[_ngcontent-%COMP%]{overflow:hidden;-webkit-user-select:text;-moz-user-select:text;user-select:text;color:#95a8af}.col-title[_ngcontent-%COMP%]{overflow:hidden}.col-title[_ngcontent-%COMP%]   .col-title-date[_ngcontent-%COMP%], .col-title[_ngcontent-%COMP%]   .col-title-users[_ngcontent-%COMP%]{float:left}"],changeDetection:0}),t}(o.k)},"2ZsA":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("ROBh"),i=n("EM62"),a=function(){function e(){this.btnRadius=12.5,this.itemRadius=11}return e.prototype.getFeatureData=function(e,t){var n=this;return t.data.forEach((function(e){e.buttonIcon=n.getDrawableIcon(e.value,n.btnRadius,!0),e.itemIcon=n.getDrawableIcon(e.value,n.itemRadius,e.selected)})),Object(r.a)({value:t.data,stateContext:t.stateContext})},e.prototype.getApplyData=function(e,t){return Object(r.a)({styles:{color:t.value},stateContext:t.stateContext})},e.prototype.getDrawableIcon=function(e,t,n){return{type:"canvas",value:function(n,r){n.setStrokeStyle(1),n.beginStroke("#ffffff"===e||"rgb(255, 255, 255)"===e?"#E7E6E6":e),n.beginFill(e),n.drawCircle(t,t,t-3),n.endFill(),n.endStroke()},width:2*t,height:2*t}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.cc({token:e,factory:e.\u0275fac}),e}()},"2aGL":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=n("W9bu"),a=n("NNJu"),o=n("5xGT"),s=n("EM62"),c=n("2kYt"),l=n("lQIu");function u(e,t){if(1&e&&(s.mc(0,"div",13),s.fd(1),s.zc(2,"async"),s.lc()),2&e){var n=s.yc().$implicit;s.Sb(1),s.gd(s.Ac(2,1,n.name))}}function d(e,t){if(1&e){var n=s.nc();s.mc(0,"div",10),s.dd(1,u,3,3,"div",11),s.mc(2,"a",12),s.uc("click",(function(){s.Qc(n);var e=t.$implicit;return s.yc(3).navigateToShape(e)})),s.fd(3),s.lc(),s.lc()}if(2&e){var r=t.index;s.Sb(1),s.Dc("ngIf",0===r),s.Sb(2),s.hd("[ ",r+1," ]")}}function p(e,t){if(1&e&&(s.mc(0,"div",8),s.dd(1,d,4,2,"div",9),s.lc()),2&e){var n=t.$implicit,r=s.yc().$implicit;s.Sb(1),s.Dc("ngForOf",r.shapesMap[n.key])}}function h(e,t){if(1&e&&(s.mc(0,"div",1),s.mc(1,"div",2),s.mc(2,"div",3),s.fd(3),s.zc(4,"async"),s.lc(),s.mc(5,"collapsable-panel-item",4),s.mc(6,"div",5),s.mc(7,"div",6),s.dd(8,p,2,1,"div",7),s.zc(9,"keyvalue"),s.lc(),s.lc(),s.lc(),s.lc(),s.lc()),2&e){var n=t.$implicit,r=s.yc();s.Sb(3),s.gd(s.Ac(4,4,n.name)),s.Sb(2),s.Gc("heading","",n.count," ",r.getPlural("Instance",n.count),""),s.Sb(3),s.Dc("ngForOf",s.Ac(9,6,n.shapesMap))}}var f=function(e){function t(t,n,r,i){var a=e.call(this,r,i)||this;return a.linkSvc=t,a.state=n,a.componentFactoryResolver=r,a.injector=i,a.subs=[],a}return Object(r.e)(t,e),t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.apply=function(){this.itemRef.instance.apply()},t.prototype.navigateToShape=function(e){this.state.get("CurrentDiagram")!==e.docId?this.linkSvc.navigateToDiagram(e.docId,["s",e.shapeId]).subscribe():this.linkSvc.navigateToShape(e.shapeId)},t.prototype.getPlural=function(e,t){return t>1?e+"s":e},t.\u0275fac=function(e){return new(e||t)(s.gc(i.a),s.gc(o.Hb),s.gc(s.m),s.gc(s.C))},t.\u0275cmp=s.ac({type:t,selectors:[["shape-info-item"]],inputs:{shapes:"shapes"},features:[s.Pb],decls:1,vars:1,consts:[["class","links-renderer-item",4,"ngFor","ngForOf"],[1,"links-renderer-item"],[1,"links-renderer-shape-item-doc"],[1,"links-renderer-item-doc-name","body"],[3,"heading"],[1,"contianer"],[1,"row"],["class","col my-auto",4,"ngFor","ngForOf"],[1,"col","my-auto"],["class","links-renderer-item-instance",4,"ngFor","ngForOf"],[1,"links-renderer-item-instance"],["class","links-renderer-item-instance-name caption",4,"ngIf"],[1,"links-instance-count","caption",3,"click"],[1,"links-renderer-item-instance-name","caption"]],template:function(e,t){1&e&&s.dd(0,h,10,8,"div",0),2&e&&s.Dc("ngForOf",t.shapes)},directives:[c.s,l.b,c.t],pipes:[c.b,c.l],styles:[".links-renderer-shape-item-doc[_ngcontent-%COMP%]{margin-bottom:.25rem}.links-renderer-item-circle[_ngcontent-%COMP%]{border:1px solid #95a8af;border-radius:25px;width:auto;height:25px;padding:4px 7px;display:inline-block;margin-right:7px}.links-renderer-item-instance[_ngcontent-%COMP%], .links-renderer-item-instance-name[_ngcontent-%COMP%]{display:inline-block}.links-renderer-item-instance-name[_ngcontent-%COMP%]{color:#354b53;margin-right:.5rem}.links-instance-count[_ngcontent-%COMP%]{color:#64767d}.row[_ngcontent-%COMP%]{margin-left:0}"],changeDetection:0}),t}(a.k)},"2m+3":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("C05f"),a=(n("kWt5"),n("ADlH")),o=n("EM62"),s=function(){function e(){this.enableSnapToGrid=new i.a(!0),this.showGrid=new i.a(!0),this.gridSizeMajor=5*e.gridSize}return e.prototype.isOnGrid=function(t){return t%e.gridSize==0},e.prototype.isOnGridMajor=function(e){return e%this.gridSizeMajor==0},e.prototype.snapToGrid=function(t){return Object(a.roundN)(t,e.gridSize)},e.prototype.snapToGridNext=function(t){return Object(a.ceilN)(t,e.gridSize)},e.prototype.snapToGridPrevious=function(t){return Object(a.floorN)(t,e.gridSize)},e.prototype.getGridLines=function(t,n){var i,a;return Object(r.f)(this,(function(r){switch(r.label){case 0:if(t===n)throw Error("Start and end of the grid line location cant be same");i=t<n?e.gridSize:-e.gridSize,a=t,this.isOnGrid(t)||(a=i>0?this.snapToGridNext(t):this.snapToGridPrevious(t)),r.label=1;case 1:return i>0&&a<n||i<0&&a>n?[4,a]:[3,3];case 2:return r.sent(),a+=i,[3,1];case 3:return[2]}}))},e.prototype.point=function(e){return this.enableSnapToGrid.value&&(e.x=this.adjustToGrid(e.x),e.y=this.adjustToGrid(e.y)),e},e.prototype.shapeTransform=function(e,t){return t},e.prototype.connectorPoints=function(e,t){return t},e.prototype.adjustToGrid=function(t){return t.value=Math.round(t.value),this.isOnGrid(t.value)?(this.adjustToGridProperty("low",t),this.adjustToGridProperty("high",t),t):0===t.low?(t.value=this.snapToGridNext(t.value),this.adjustToGridProperty("high",t)):0===t.high?(t.value=this.snapToGridPrevious(t.value),this.adjustToGridProperty("low",t)):(t.low<=e.gridSize&&t.high<=e.gridSize?t.value=this.snapToGrid(t.value):t.low>e.gridSize&&t.high>e.gridSize?t.low<t.high?t.value=this.snapToGridPrevious(t.value-t.low):t.value=this.snapToGridNext(t.value+t.high):t.low>e.gridSize?t.value=this.snapToGridNext(t.value):t.high>e.gridSize&&(t.value=this.snapToGridPrevious(t.value)),this.adjustToGridProperty("low",t),this.adjustToGridProperty("high",t),t)},e.prototype.adjustToGridProperty=function(t,n){return 0===n[t]||(n[t]<=e.gridSize?n[t]=e.gridSize:n[t]=this.snapToGridNext(n[t])),n},e.gridSize=10,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.cc({token:e,factory:e.\u0275fac}),e}()},"2zxM":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("ROBh"),i=n("5xGT"),a=n("w1VY"),o=n("SBw3"),s=n("xVbo"),c=n("YtkY"),l=n("wx9+"),u=n("EM62"),d=function(){function e(e,t,n,r,i){this.viewport=e,this.coordinate=t,this.state=n,this.random=r,this.featureList=i}return e.prototype.getFeatureData=function(e){var t=this.featureList.getFeature(e);return Object(r.a)(t)},e.prototype.getApplyData=function(e){var t=this;return this.viewport.getShapeOnce(this.state.get("Selected")[0]).pipe(Object(s.a)((function(e){return!!e})),Object(c.a)((function(e){var n=t.coordinate.width(100),r=e.bounds.y+e.bounds.height/2;return{id:t.random.shapeId(),points:[{id:t.random.pointId(),x:e.bounds.right,y:r,shapeId:e.id},{id:t.random.pointId(),x:e.bounds.right+n,y:r}]}})))},e.\u0275fac=function(t){return new(t||e)(u.qc(l.a),u.qc(a.a),u.qc(i.Hb),u.qc(i.rb),u.qc(o.a))},e.\u0275prov=u.cc({token:e,factory:e.\u0275fac}),e}()},"3/2H":function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){a.default(e)};var r,i=n("142O"),a=(r=i)&&r.__esModule?r:{default:r}},"33n6":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.parseWithoutProcessing=l,t.parse=function(e,t){var n=l(e,t);return new a.default(t).accept(n)};var i=r(n("Jk8n")),a=r(n("L8TE")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("/w05")),s=n("XVEb");t.parser=i.default;var c={};function l(e,t){return"Program"===e.type?e:(i.default.yy=c,c.locInfo=function(e){return new c.SourceLocation(t&&t.srcName,e)},i.default.parse(e))}s.extend(c,o)},"35j0":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("YtkY"),i=n("QoSw"),a=n("5xGT"),o=n("ROBh"),s=n("EM62"),c=function(){function e(e,t){this.state=e,this.ll=t}return e.prototype.getFeatureData=function(e,t){var n=this;return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(r.a)((function(e){var t=n.state.get("Selected");if(t.length>1&&e.isShapeInGroup(t)){var r=e.getGroupHierarchy(t[0])[0];return{value:!!e.groups[r].links}}return 1===t.length?{value:!!e.shapes[t[0]].links}:{value:!1}})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return t.length>1?this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(r.a)((function(e){return!!e.isShapeInGroup(t)}))):Object(o.a)(!0)},e.prototype.getApplyData=function(e,t){return Object(o.a)({open:!0})},e.\u0275fac=function(t){return new(t||e)(s.qc(a.Hb),s.qc(i.a))},e.\u0275prov=s.cc({token:e,factory:e.\u0275fac}),e}()},"39iF":function(e,t){var n=[">",">=","<","<=","=","<>"],r="operator",i="literal",a=[r,i];function o(e,t){if(-1===a.indexOf(t))throw new Error("Unsupported token type: "+t);return{value:e,type:t}}function s(e){for(var t="",a=[],s=0;s<e.length;s++){var c=e[s];0===s&&n.indexOf(c)>=0?a.push(o(c,r)):t+=c}return t.length>0&&a.push(o(function(e){return"string"!=typeof e||/^\d+(\.\d+)?$/.test(e)&&(e=-1===e.indexOf(".")?parseInt(e,10):parseFloat(e)),e}(t),i)),a.length>0&&a[0].type!==r&&a.unshift(o("=",r)),a}t.TOKEN_TYPE_OPERATOR=r,t.TOKEN_TYPE_LITERAL=i,t.parse=function(e){return s(function(e){for(var t=e.length,n=[],r=0,i="",a="";r<t;){var o=e.charAt(r);switch(o){case">":case"<":case"=":a+=o,i.length>0&&(n.push(i),i="");break;default:a.length>0&&(n.push(a),a=""),i+=o}r++}return i.length>0&&n.push(i),a.length>0&&n.push(a),n}(e))},t.createToken=o,t.compute=function(e){for(var t,n=[],a=0;a<e.length;a++){var o=e[a];switch(o.type){case r:t=o.value;break;case i:n.push(o.value)}}return function(e,t){var n=!1;switch(t){case">":n=e[0]>e[1];break;case">=":n=e[0]>=e[1];break;case"<":n=e[0]<e[1];break;case"<=":n=e[0]<=e[1];break;case"=":n=e[0]==e[1];break;case"<>":n=e[0]!=e[1]}return n}(n,t)}},"3AeD":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("D57K"),i=n("8j5Y"),a=n("J+dc"),o=n("TLy2"),s=n("5xGT"),c=n("P4Xx"),l=n("ROBh"),u=n("gZOS"),d=n("nsO7"),p=n("CSUU"),h=n("diDk"),f=n("X0jn"),m=n("dKf+"),g=n("EM62"),b=function(){function e(e,t,n){this.smartContainerSvc=e,this.edatall=t,this.ds=n}return Object.defineProperty(e.prototype,"name",{get:function(){return"ContainerChildrenLayoutingBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=this,r=e.__sakota__.getChanges(),a=u.Sakota.create(e);return Object(c.a)(this.childDetached(a,r),this.containerRegionSizeChanges(a,r),this.childTranslated(a,r,t),this.childContainerRegionIdChanges(a,r),this.updateSmartContainerChildren(a,r),this.childTransformed(a,r,t)).pipe(Object(i.a)({complete:function(){var r=a.__sakota__.getChanges(),i=e.__sakota__.mergeChanges(r);Object(d.isEmpty)(i)&&t!==s.A.PREVIEW&&!Object(d.isEmpty)(r)&&n.ds.addPreviewChange(r)}}))},e.prototype.containerRegionSizeChanges=function(t,n){var i=[Object(l.a)({})];for(var a in n.$set){e.regexScaleX.lastIndex=0;var o=e.regexScaleX.exec(a)||e.regexScaleY.exec(a);if(o){var s=o[1],u=t.shapes[s];if(!Object(d.isEmpty)(u.children))for(var p in u.children)this.smartContainerSvc.updateGridChildPosition(u,t.shapes[p]),this.smartContainerSvc.updateTimeLineChildPosition(t,u,t.shapes[p]);var h=u.containerRegions;h&&i.push(this.layoutChildren(t,u,Object.keys(h),!1))}}return c.a.apply(void 0,Object(r.j)(i))},e.prototype.childContainerRegionIdChanges=function(t,n){var i=[Object(l.a)({})];for(var a in n.$set){e.regexContainerRegionId.lastIndex=0;var o=e.regexContainerRegionId.exec(a);if(o){var s=o[1],u=t.shapes[s];if(u.containerId){var d=t.shapes[u.containerId];this.smartContainerSvc.updateChildIdentifiers(t,d,u)}}}return c.a.apply(void 0,Object(r.j)(i))},e.prototype.updateSmartContainerChildren=function(t,n){var i=this,s=[Object(l.a)({})],u=function(l){e.regexIdentifierChanges.lastIndex=0;var u=e.regexIdentifierChanges.exec(l);if(!u)return"continue";var p,h,f=n.$set[l],m=u[1],g=u[2],b=t.shapes[m],v=t.getDataItem(m,g);if(v&&(p=v.smartContainerIdentifier,h=v.smartContainerType),!p||!h)return"continue";if(b.eDataId&&b.entityId){var _=d.edatall.getEntityOnce(b.eDataId,b.entityId).pipe(Object(a.a)(1),Object(o.a)((function(e){var n=[];return Object.keys(e.shapes[t.id]).forEach((function(e){i.updateSmartContainerChildData(t,e,f,p,h,n)})),c.a.apply(void 0,Object(r.j)(n))})));s.push(_)}else b.containerId&&d.updateSmartContainerChildData(t,b.id,f,p,h,s)},d=this;for(var p in n.$set)u(p);return c.a.apply(void 0,Object(r.j)(s))},e.prototype.updateSmartContainerChildData=function(e,t,n,r,i,a){var o=e.shapes[t];if(o.containerId){var s=e.shapes[o.containerId];if(s.containerContexts&&s.containerContexts[0]){var c=s.containerContexts[0];if(i===f.u.Region){if(s.data.identifier&&s.data.identifier.value===r&&c===f.u.Region){var l=Object.values(s.texts).filter((function(e){return Object.keys(s.containerRegions).includes(e.id)})).filter((function(e){return e.plainText===n}));if(l.length>0){var u=l[0].id;s.containerRegions[o.containerRegionId]&&delete s.containerRegions[o.containerRegionId].shapes[t];var p=s.containerRegions[u];if(p.shapes&&!p.shapes[t]){var h=this.getShapeRegionLayoutIndex(e,p,o);o.layoutIndex=h,p.shapes[t]=!0}else Object(d.isEmpty)(p.shapes)&&(o.layoutIndex=1,p.shapes||(p.shapes={}),p.shapes[t]=!0);a.push(this.layoutChildren(e,s,[u,o.containerRegionId]))}}}else i===f.u.XWithWidth?s.data.identifier&&s.data.identifier.value===r&&c===f.u.XWithWidth&&(this.smartContainerSvc.updateTimeLineChildPosition(e,s,o),this.updateRelativeTranslate(s,o)):i===f.u.XY&&s.data.identifier&&s.data.identifier.value===r&&c===f.u.XY&&(this.smartContainerSvc.updateGridChildPosition(s,o),this.updateRelativeTranslate(s,o))}}},e.prototype.childDetached=function(t,n){var i=this,a=[Object(l.a)({})],o={};for(var s in n.$unset){e.regexChildren.lastIndex=0;var u=e.regexChildren.exec(s);if(u){var d=u[1],p=u[2],h=t.shapes[d],f=void 0,m=h.containerRegions;for(var g in m){var b=m[g];b.shapes&&b.shapes[p]&&(f=g)}this.manageChildrenInRegions(t,h.id,p),f&&(o[""+h.id]?o[""+h.id].regionIds.add(f):o[""+h.id]={instance:h,regionIds:new Set([f])})}}return Object.values(o).forEach((function(e){a.push(i.layoutChildren(t,e.instance,Array.from(e.regionIds)))})),c.a.apply(void 0,Object(r.j)(a))},e.prototype.childTranslated=function(t,n,i){var a=[Object(l.a)({})],o=new Set;for(var s in n.$set){e.regexChildrenRelativeX.lastIndex=0,e.regexChildrenRelativeY.lastIndex=0,e.regexChildrenRelativeAngle.lastIndex=0,e.regexChildren.lastIndex=0,e.regexChildrenContextChange.lastIndex=0;var u=e.regexChildrenRelativeX.exec(s)||e.regexChildrenRelativeY.exec(s)||e.regexChildrenRelativeAngle.exec(s)||e.regexChildren.exec(s)||e.regexChildrenContextChange.exec(s);if(u&&u[1]&&u[2]){var d=u[1],p=u[2],h=t.shapes[p];if(!o.has(p)){var f=t.shapes[d];"Execute"===i&&this.reArrangeContainerChildren(t,h,f,p,a),o.add(p)}}else if(u&&u[1]){p=u[1],h=t.shapes[p];if(!o.has(p)&&h.containerId){f=t.shapes[h.containerId];"Execute"===i&&this.reArrangeContainerChildren(t,h,f,p,a),o.add(p)}}}return c.a.apply(void 0,Object(r.j)(a))},e.prototype.reArrangeContainerChildren=function(e,t,n,r,i){var a=t.containerRegionId;if(this.manageChildrenInRegions(e,n.id,r),Object.keys(n.children).includes(r)){var o={x:n.x,y:n.y,width:n.width,height:n.height},c={x:t.x,y:t.y,width:t.width,height:t.height},l=a===t.containerRegionId?[a]:[a,t.containerRegionId];s.ub.from(o).contains(s.ub.from(c))&&(this.smartContainerSvc.updateGridChildDataItems(e,n,t),this.smartContainerSvc.updateGridChildActiveText(e,n,t)),i.push(this.layoutChildren(e,n,l,!1))}},e.prototype.childTransformed=function(t,n,i){var a=[Object(l.a)({})];if("Execute"===i&&!Object(d.isEmpty)(n.$set)){var o=Object.keys(n.$set).some((function(t){return e.regexUserSetWidth.test(t)}));for(var u in n.$set){e.regexUserSetWidth.lastIndex=0;var p=e.regexUserSetWidth.exec(u);e.regexX.lastIndex=0;var h=e.regexX.exec(u);if(p&&p[1]||h&&h[1]&&!o){var m=p?p[1]:h[1],g=t.shapes[m],b=g.containerId,v=g.shapeContext;if(b&&v&&v===f.u.XWithWidth){this.manageChildrenInRegions(t,b,m);var _=t.shapes[b];if(Object.keys(_.children).includes(m)){var y={x:_.x,y:_.y,width:_.width,height:_.height},O={x:g.x,y:g.y,width:g.width,height:g.height};s.ub.from(y).contains(s.ub.from(O))&&this.smartContainerSvc.updateTimeLineDateChange(t,_,g)}}}}}return c.a.apply(void 0,Object(r.j)(a))},e.prototype.layoutChildren=function(e,t,n,a){var o=this;void 0===a&&(a=!0);var u=[Object(l.a)({})],p=[];return n.forEach((function(n){var i=t.containerRegions[n];if(i&&i.layoutingData&&i.shapes&&!Object(d.isEmpty)(i.shapes)){p.push.apply(p,Object(r.j)(Object.keys(i.shapes)));var a=Object.keys(i.shapes).map((function(t){return e.shapes[t]})),o={x:i.x+t.x,y:i.y+t.y,width:i.width,height:i.height};u.push(s.Z.apply(e,a,o,i.layoutingData))}})),c.a.apply(void 0,Object(r.j)(u)).pipe(Object(i.a)({complete:function(){var n,i;if(!Object(d.isEmpty)(t.children)&&p.length>0)try{for(var s=Object(r.k)(p),c=s.next();!c.done;c=s.next()){var l=c.value;o.updateRelativeTranslate(t,e.shapes[l])}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}a&&(t.resizeContainerAfterLayouting?t.resizeContainerAfterLayouting(e,t):o.resizeContainerAfterLayouting(e,t))}}))},e.prototype.updateRelativeTranslate=function(e,t){var n=e.defaultBounds.getTransformedPoints(e.transform),r=t,i=r.defaultBounds.getTransformedPoints(r.transform),a=r.angle-e.angle,o=s.ab.from(n.topLeft.x,n.topLeft.y,n.bottomLeft.x,n.bottomLeft.y).perpendicularTo(i.topLeft),c=s.ab.from(o.x,o.y,i.topLeft.x,i.topLeft.y).length(),l=s.ab.from(n.topLeft.x,n.topLeft.y,n.topRight.x,n.topRight.y).perpendicularTo(i.topLeft),u=s.ab.from(l.x,l.y,i.topLeft.x,i.topLeft.y).length();e.children[t.id]&&(e.children[t.id].relativeX=c,e.children[t.id].relativeY=u,e.children[t.id].relativeAngle=a)},e.prototype.manageChildrenInRegions=function(e,t,n){var r=e.shapes[t],i=e.shapes[n],a=r.containerRegions;if(i){this.updateRelativeTranslate(r,i);var o=Object.keys(a).find((function(e){var t=a[e],n=r.children[i.id];if(n){var o=n.relativeX,s=n.relativeY,c=o+i.bounds.width/2,l=s+i.bounds.height/2,u=c<=t.x+t.width&&c>t.x,d=l<=t.y+t.height&&l>t.y;return u&&d}}));if(o!==i.containerRegionId&&i.containerRegionId){var s=a[i.containerRegionId];s&&s.shapes&&s.shapes[n]&&delete s.shapes[n]}if(o){var c=a[o];if(c)if(i.containerRegionId=o,c.shapes&&!c.shapes[i.id]){var l=this.getShapeRegionLayoutIndex(e,c,i);i.layoutIndex=l,c.shapes[i.id]=!0}else if(Object(d.isEmpty)(c.shapes))i.layoutIndex=1,c.shapes||(c.shapes={}),c.shapes[i.id]=!0;else if(c.shapes&&c.shapes[i.id]){l=this.getShapeRegionLayoutIndex(e,c,i);i.layoutIndex=l,c.shapes[i.id]=!0}}else i.containerRegionId=void 0}else for(var u in a){var p=a[u];if(p.shapes&&p.shapes[n])return void delete p.shapes[n]}},e.prototype.getShapeRegionLayoutIndex=function(e,t,n){var r=Object.keys(t.shapes).filter((function(e){return e!==n.id})).map((function(t){return e.shapes[t]})).filter((function(e){return!!e}));r.push(n);var i=r.reduce((function(e,t){return e[t.id]=t,e}),{}),a=Object(d.sortBy)(r,(function(e){return e.y}));if(1===a.length)return 1;for(var o=0;o<a.length;o++){var s=a[o],c=a[o-1],l=a[o+1],u=o+1;if(s.id===n.id&&0===o&&u<a.length)return i[l.id].layoutIndex/2;if(s.id===n.id&&o===a.length-1)return i[c.id].layoutIndex+1;if(s.id===n.id)return(i[l.id].layoutIndex+i[c.id].layoutIndex)/2}},e.prototype.resizeContainerAfterLayouting=function(t,n){var i=n.bounds;if(n.children&&Object.keys(n.children).length){var a=t.getBounds(Object(r.j)(Object.keys(n.children)));a.absorb(i);var o=a.width-i.width,s=a.height-i.height;if(o>0){var c=n.width+o+e.containerResizePadding;n.scaleX=c/n.defaultBounds.width}if(s>0){var l=n.height+s+e.containerResizePadding;n.scaleY=l/n.defaultBounds.height}}},e.containerResizePadding=10,e.regexX=/shapes\.([^\.]+)\.x/g,e.regexY=/shapes\.([^\.]+)\.y/g,e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.regexUserSetWidth=/shapes\.([^\.]+)\.userSetWidth/g,e.regexScaleY=/shapes\.([^\.]+)\.scaleY/g,e.regexContainerRegionId=/shapes\.([^\.]+)\.containerRegionId/g,e.regexIdentifierChanges=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.regexChildren=/shapes\.([^\.]+)\.children\.([^\.]+)/g,e.regexAngle=/shapes\.([^\.]+)\.angle/g,e.regexChildrenRelativeX=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeX/g,e.regexChildrenRelativeY=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeY/g,e.regexChildrenRelativeAngle=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeAngle/g,e.regexChildrenContextChange=/shapes\.([^\.]+)\.shapeContext/g,e.\u0275fac=function(t){return new(t||e)(g.qc(p.a),g.qc(h.a),g.qc(m.a))},e.\u0275prov=g.cc({token:e,factory:e.\u0275fac}),e}()},"3Uyd":function(e,t,n){"use strict";n.d(t,"a",(function(){return Q})),n.d(t,"b",(function(){return $})),n.d(t,"c",(function(){return z})),n.d(t,"d",(function(){return V})),n.d(t,"e",(function(){return q})),n.d(t,"f",(function(){return Y})),n.d(t,"g",(function(){return G})),n.d(t,"h",(function(){return X}));var r=n("MMYH"),i=n("PRnZ"),a=n("sRHE"),o=n("8K1b"),s=n("AqVP"),c=n("9fIP"),l=n("EM62"),u=n("cqs0"),d=n("5XID"),p=n("ZTXN"),h=n("bwdy"),f=0,m=new l.B("CdkAccordion"),g=function(){function e(){Object(c.a)(this,e),this._stateChanges=new p.a,this._openCloseAllActions=new p.a,this.id="cdk-accordion-".concat(f++),this._multi=!1}return Object(r.a)(e,[{key:"multi",get:function(){return this._multi},set:function(e){this._multi=Object(d.b)(e)}},{key:"openAll",value:function(){this._openCloseAll(!0)}},{key:"closeAll",value:function(){this._openCloseAll(!1)}},{key:"ngOnChanges",value:function(e){this._stateChanges.next(e)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"_openCloseAll",value:function(e){this.multi&&this._openCloseAllActions.next(e)}}]),e}();g.\u0275fac=function(e){return new(e||g)},g.\u0275dir=l.bc({type:g,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[l.Rb([{provide:m,useExisting:g}]),l.Qb]}),g.propDecorators={multi:[{type:l.D}]};var b=0,v=void 0,_=function(){function e(t,n,r){var i=this;Object(c.a)(this,e),this.accordion=t,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=h.a.EMPTY,this.closed=new l.t,this.opened=new l.t,this.destroyed=new l.t,this.expandedChange=new l.t,this.id="cdk-accordion-child-".concat(b++),this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=function(){},this._removeUniqueSelectionListener=r.listen((function(e,t){i.accordion&&!i.accordion.multi&&i.accordion.id===t&&i.id!==e&&(i.expanded=!1)})),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}return Object(r.a)(e,[{key:"expanded",get:function(){return this._expanded},set:function(e){if(e=Object(d.b)(e),this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();var t=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,t)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(d.b)(e)}},{key:"ngOnDestroy",value:function(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}},{key:"toggle",value:function(){this.disabled||(this.expanded=!this.expanded)}},{key:"close",value:function(){this.disabled||(this.expanded=!1)}},{key:"open",value:function(){this.disabled||(this.expanded=!0)}},{key:"_subscribeToOpenCloseAllActions",value:function(){var e=this;return this.accordion._openCloseAllActions.subscribe((function(t){e.disabled||(e.expanded=t)}))}}]),e}();_.\u0275fac=function(e){return new(e||_)(l.gc(m,12),l.gc(l.j),l.gc(u.c))},_.\u0275dir=l.bc({type:_,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[l.Rb([{provide:m,useValue:v}])]}),_.ctorParameters=function(){return[{type:g,decorators:[{type:l.N},{type:l.y,args:[m]},{type:l.ab}]},{type:l.j},{type:u.c}]},_.propDecorators={closed:[{type:l.O}],opened:[{type:l.O}],destroyed:[{type:l.O}],expandedChange:[{type:l.O}],expanded:[{type:l.D}],disabled:[{type:l.D}]};var y=function e(){Object(c.a)(this,e)};y.\u0275mod=l.ec({type:y}),y.\u0275inj=l.dc({factory:function(e){return new(e||y)}});var O=n("Sv/w"),x=n("2kYt"),E=n("sg/T"),k=n("Ohay"),C=n("jIqt"),w=n("xVbo"),S=n("J+dc"),I=n("fAiE"),T=n("5lCh"),A=n("6Oco"),P=n("g6G6"),M=n("f7+R"),D=["body"];function j(e,t){}var R=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]];function L(e,t){if(1&e&&l.hc(0,"span",2),2&e){var n=l.yc();l.Dc("@indicatorRotate",n._getExpandedState())}}var N=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],B=new l.B("MAT_ACCORDION"),U="225ms cubic-bezier(0.4,0.0,0.2,1)",F={indicatorRotate:Object(M.m)("indicatorRotate",[Object(M.j)("collapsed, void",Object(M.k)({transform:"rotate(0deg)"})),Object(M.j)("expanded",Object(M.k)({transform:"rotate(180deg)"})),Object(M.l)("expanded <=> collapsed, void => collapsed",Object(M.e)(U))]),bodyExpansion:Object(M.m)("bodyExpansion",[Object(M.j)("collapsed, void",Object(M.k)({height:"0px",visibility:"hidden"})),Object(M.j)("expanded",Object(M.k)({height:"*",visibility:"visible"})),Object(M.l)("expanded <=> collapsed, void => collapsed",Object(M.e)(U))])},q=function e(t){Object(c.a)(this,e),this._template=t};q.\u0275fac=function(e){return new(e||q)(l.gc(l.cb))},q.\u0275dir=l.bc({type:q,selectors:[["ng-template","matExpansionPanelContent",""]]}),q.ctorParameters=function(){return[{type:l.cb}]};var W=0,H=new l.B("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),K=void 0,z=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r,i,a,o,s,u){var d;return Object(c.a)(this,n),(d=t.call(this,e,r,i))._viewContainerRef=a,d._animationMode=s,d._hideToggle=!1,d.afterExpand=new l.t,d.afterCollapse=new l.t,d._inputChanges=new p.a,d._headerId="mat-expansion-panel-header-".concat(W++),d._bodyAnimationDone=new p.a,d.accordion=e,d._document=o,d._bodyAnimationDone.pipe(Object(k.a)((function(e,t){return e.fromState===t.fromState&&e.toState===t.toState}))).subscribe((function(e){"void"!==e.fromState&&("expanded"===e.toState?d.afterExpand.emit():"collapsed"===e.toState&&d.afterCollapse.emit())})),u&&(d.hideToggle=u.hideToggle),d}return Object(r.a)(n,[{key:"hideToggle",get:function(){return this._hideToggle||this.accordion&&this.accordion.hideToggle},set:function(e){this._hideToggle=Object(d.b)(e)}},{key:"togglePosition",get:function(){return this._togglePosition||this.accordion&&this.accordion.togglePosition},set:function(e){this._togglePosition=e}},{key:"_hasSpacing",value:function(){return!!this.accordion&&(this.expanded&&"default"===this.accordion.displayMode)}},{key:"_getExpandedState",value:function(){return this.expanded?"expanded":"collapsed"}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"close",value:function(){this.expanded=!1}},{key:"open",value:function(){this.expanded=!0}},{key:"ngAfterContentInit",value:function(){var e=this;this._lazyContent&&this.opened.pipe(Object(C.a)(null),Object(w.a)((function(){return e.expanded&&!e._portal})),Object(S.a)(1)).subscribe((function(){e._portal=new O.f(e._lazyContent._template,e._viewContainerRef)}))}},{key:"ngOnChanges",value:function(e){this._inputChanges.next(e)}},{key:"ngOnDestroy",value:function(){Object(i.a)(Object(a.a)(n.prototype),"ngOnDestroy",this).call(this),this._bodyAnimationDone.complete(),this._inputChanges.complete()}},{key:"_containsFocus",value:function(){if(this._body){var e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}}]),n}(_);z.\u0275fac=function(e){return new(e||z)(l.gc(B,12),l.gc(l.j),l.gc(u.c),l.gc(l.hb),l.gc(x.e),l.gc(T.a,8),l.gc(H,8))},z.\u0275cmp=l.ac({type:z,selectors:[["mat-expansion-panel"]],contentQueries:function(e,t,n){var r;(1&e&&l.Zb(n,q,!0),2&e)&&(l.Mc(r=l.vc())&&(t._lazyContent=r.first))},viewQuery:function(e,t){var n;(1&e&&l.kd(D,!0),2&e)&&(l.Mc(n=l.vc())&&(t._body=n.first))},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,t){2&e&&l.Yb("mat-expanded",t.expanded)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-expansion-panel-spacing",t._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[l.Rb([{provide:B,useValue:K}]),l.Pb,l.Qb],ngContentSelectors:["mat-expansion-panel-header","*","mat-action-row"],decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(l.Cc(R),l.Bc(0),l.mc(1,"div",0,1),l.uc("@bodyExpansion.done",(function(e){return t._bodyAnimationDone.next(e)})),l.mc(3,"div",2),l.Bc(4,1),l.dd(5,j,0,0,"ng-template",3),l.lc(),l.Bc(6,2),l.lc()),2&e&&(l.Sb(1),l.Dc("@bodyExpansion",t._getExpandedState())("id",t.id),l.Tb("aria-labelledby",t._headerId),l.Sb(4),l.Dc("cdkPortalOutlet",t._portal))},directives:[O.b],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[F.bodyExpansion]},changeDetection:0}),z.ctorParameters=function(){return[{type:void 0,decorators:[{type:l.N},{type:l.ab},{type:l.y,args:[B]}]},{type:l.j},{type:u.c},{type:l.hb},{type:void 0,decorators:[{type:l.y,args:[x.e]}]},{type:String,decorators:[{type:l.N},{type:l.y,args:[T.a]}]},{type:void 0,decorators:[{type:l.y,args:[H]},{type:l.N}]}]},z.propDecorators={hideToggle:[{type:l.D}],togglePosition:[{type:l.D}],afterExpand:[{type:l.O}],afterCollapse:[{type:l.O}],_lazyContent:[{type:l.n,args:[q]}],_body:[{type:l.gb,args:["body"]}]};var V=function e(){Object(c.a)(this,e)};V.\u0275fac=function(e){return new(e||V)},V.\u0275dir=l.bc({type:V,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]});var G=function(){function e(t,n,r,i,a,o){var s=this;Object(c.a)(this,e),this.panel=t,this._element=n,this._focusMonitor=r,this._changeDetectorRef=i,this._animationMode=o,this._parentChangeSubscription=h.a.EMPTY;var l=t.accordion?t.accordion._stateChanges.pipe(Object(w.a)((function(e){return!(!e.hideToggle&&!e.togglePosition)}))):A.a;this._parentChangeSubscription=Object(P.a)(t.opened,t.closed,l,t._inputChanges.pipe(Object(w.a)((function(e){return!!(e.hideToggle||e.disabled||e.togglePosition)})))).subscribe((function(){return s._changeDetectorRef.markForCheck()})),t.closed.pipe(Object(w.a)((function(){return t._containsFocus()}))).subscribe((function(){return r.focusVia(n,"program")})),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}return Object(r.a)(e,[{key:"disabled",get:function(){return this.panel.disabled}},{key:"_toggle",value:function(){this.disabled||this.panel.toggle()}},{key:"_isExpanded",value:function(){return this.panel.expanded}},{key:"_getExpandedState",value:function(){return this.panel._getExpandedState()}},{key:"_getPanelId",value:function(){return this.panel.id}},{key:"_getTogglePosition",value:function(){return this.panel.togglePosition}},{key:"_showToggle",value:function(){return!this.panel.hideToggle&&!this.panel.disabled}},{key:"_getHeaderHeight",value:function(){var e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}},{key:"_keydown",value:function(e){switch(e.keyCode){case I.o:case I.g:Object(I.t)(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._element,e,t)}},{key:"ngAfterViewInit",value:function(){var e=this;this._focusMonitor.monitor(this._element).subscribe((function(t){t&&e.panel.accordion&&e.panel.accordion._handleHeaderFocus(e)}))}},{key:"ngOnDestroy",value:function(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}]),e}();G.\u0275fac=function(e){return new(e||G)(l.gc(z,1),l.gc(l.r),l.gc(E.h),l.gc(l.j),l.gc(H,8),l.gc(T.a,8))},G.\u0275cmp=l.ac({type:G,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,t){1&e&&l.uc("click",(function(){return t._toggle()}))("keydown",(function(e){return t._keydown(e)})),2&e&&(l.Tb("id",t.panel._headerId)("tabindex",t.disabled?-1:0)("aria-controls",t._getPanelId())("aria-expanded",t._isExpanded())("aria-disabled",t.panel.disabled),l.ad("height",t._getHeaderHeight()),l.Yb("mat-expanded",t._isExpanded())("mat-expansion-toggle-indicator-after","after"===t._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===t._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:["mat-panel-title","mat-panel-description","*"],decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,t){1&e&&(l.Cc(N),l.mc(0,"span",0),l.Bc(1),l.Bc(2,1),l.Bc(3,2),l.lc(),l.dd(4,L,1,1,"span",1)),2&e&&(l.Sb(4),l.Dc("ngIf",t._showToggle()))},directives:[x.t],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[F.indicatorRotate]},changeDetection:0}),G.ctorParameters=function(){return[{type:z,decorators:[{type:l.u}]},{type:l.r},{type:E.h},{type:l.j},{type:void 0,decorators:[{type:l.y,args:[H]},{type:l.N}]},{type:String,decorators:[{type:l.N},{type:l.y,args:[T.a]}]}]},G.propDecorators={expandedHeight:[{type:l.D}],collapsedHeight:[{type:l.D}]};var Y=function e(){Object(c.a)(this,e)};Y.\u0275fac=function(e){return new(e||Y)},Y.\u0275dir=l.bc({type:Y,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]});var X=function e(){Object(c.a)(this,e)};X.\u0275fac=function(e){return new(e||X)},X.\u0275dir=l.bc({type:X,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]});var Q=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments))._ownHeaders=new l.S,e._hideToggle=!1,e.displayMode="default",e.togglePosition="after",e}return Object(r.a)(n,[{key:"hideToggle",get:function(){return this._hideToggle},set:function(e){this._hideToggle=Object(d.b)(e)}},{key:"ngAfterContentInit",value:function(){var e=this;this._headers.changes.pipe(Object(C.a)(this._headers)).subscribe((function(t){e._ownHeaders.reset(t.filter((function(t){return t.panel.accordion===e}))),e._ownHeaders.notifyOnChanges()})),this._keyManager=new E.g(this._ownHeaders).withWrap().withHomeAndEnd()}},{key:"_handleHeaderKeydown",value:function(e){this._keyManager.onKeydown(e)}},{key:"_handleHeaderFocus",value:function(e){this._keyManager.updateActiveItem(e)}}]),n}(g);Q.\u0275fac=function(e){return J(e||Q)},Q.\u0275dir=l.bc({type:Q,selectors:[["mat-accordion"]],contentQueries:function(e,t,n){var r;(1&e&&l.Zb(n,G,!0),2&e)&&(l.Mc(r=l.vc())&&(t._headers=r))},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,t){2&e&&l.Yb("mat-accordion-multi",t.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[l.Rb([{provide:B,useExisting:Q}]),l.Pb]}),Q.propDecorators={_headers:[{type:l.o,args:[G,{descendants:!0}]}],hideToggle:[{type:l.D}],displayMode:[{type:l.D}],togglePosition:[{type:l.D}]};var J=l.oc(Q),$=function e(){Object(c.a)(this,e)};$.\u0275mod=l.ec({type:$}),$.\u0275inj=l.dc({factory:function(e){return new(e||$)},imports:[[x.c,y,O.e]]})},"43qC":function(e,t){e.exports=function(e){return!!e&&"object"==typeof e}},"4e42":function(e,t,n){"use strict";t.getGrammar=function(){return{elements:{".":{type:"dot"},"[":{type:"openBracket"},"]":{type:"closeBracket"},"|":{type:"pipe"},"{":{type:"openCurl"},"}":{type:"closeCurl"},":":{type:"colon"},",":{type:"comma"},"(":{type:"openParen"},")":{type:"closeParen"},"?":{type:"question"},"+":{type:"binaryOp",precedence:30,eval:function(e,t){return e+t}},"-":{type:"binaryOp",precedence:30,eval:function(e,t){return e-t}},"*":{type:"binaryOp",precedence:40,eval:function(e,t){return e*t}},"/":{type:"binaryOp",precedence:40,eval:function(e,t){return e/t}},"//":{type:"binaryOp",precedence:40,eval:function(e,t){return Math.floor(e/t)}},"%":{type:"binaryOp",precedence:50,eval:function(e,t){return e%t}},"^":{type:"binaryOp",precedence:50,eval:function(e,t){return Math.pow(e,t)}},"==":{type:"binaryOp",precedence:20,eval:function(e,t){return e==t}},"!=":{type:"binaryOp",precedence:20,eval:function(e,t){return e!=t}},">":{type:"binaryOp",precedence:20,eval:function(e,t){return e>t}},">=":{type:"binaryOp",precedence:20,eval:function(e,t){return e>=t}},"<":{type:"binaryOp",precedence:20,eval:function(e,t){return e<t}},"<=":{type:"binaryOp",precedence:20,eval:function(e,t){return e<=t}},"&&":{type:"binaryOp",precedence:10,evalOnDemand:function(e,t){return e.eval().then((function(e){return e?t.eval():e}))}},"||":{type:"binaryOp",precedence:10,evalOnDemand:function(e,t){return e.eval().then((function(e){return e||t.eval()}))}},in:{type:"binaryOp",precedence:20,eval:function(e,t){return"string"==typeof t?-1!==t.indexOf(e):!!Array.isArray(t)&&t.some((function(t){return t===e}))}},"!":{type:"unaryOp",precedence:1/0,eval:function(e){return!e}}},functions:{},transforms:{}}}},"54H5":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("5xGT"),a=n("X0jn"),o=n("Zuf/"),s=n("I2sK"),c=n("GoAz"),l=n("6Oco"),u=n("9WAt"),d=n("4e/d"),p=n("kMe2"),h=function(){function e(){this.name="ContainerRulesBinder"}return e.prototype.apply=function(e,t){var n;if(t===i.A.EXECUTE){var r={},a=e.__sakota__.getChanges();if(a.$set){var o=Object.keys(a.$set).filter((function(e){return/shapes\.([^\.]+)\.data\.([^\.]+)\.value/.test(e)}));if(o.length>0){o.forEach((function(e){var t=e.split("."),n=t[1],i=t[2];r[n]||(r[n]=[]),r[n].push(i)}));var s=[];for(var p in r){var h=e.shapes[p];if(h.containerId){var f=e.shapes[h.containerId];(null===(n=f.rules)||void 0===n?void 0:n.length)>0&&s.push(this.applyRules(e,h,f))}}return s.length>0?Object(c.a)(Promise.all(s)).pipe(Object(u.a)(),Object(d.a)((function(){return l.a}))):l.a}}}return l.a},e.prototype.applyRules=function(e,t,n){return Object(r.c)(this,void 0,void 0,(function(){var i,a,o,s,c=this;return Object(r.f)(this,(function(r){switch(r.label){case 0:for(o in i=this.getRulesEngine(e),n.rules.forEach((function(e){i.addRule(e)})),a={childShape:t,container:n})i.addFact(o,a[o]);return i.addFact("container",n),[4,i.run()];case 1:return(s=r.sent().events).length>0&&s.forEach((function(r){var i;switch(r.type){case"updateChildData":c.updateShapeData(e,t,r.params,a);break;case"updateData":c.updateShapeData(e,n,r.params,a);break;case"updateRoles":c.updateRoles(e,t,r.params,null===(i=n.data)||void 0===i?void 0:i.identifier.value)}})),[2]}}))}))},e.prototype.updateShapeData=function(e,t,n,r){var i;if(n.dataItemLabel){var a=Object.values(t.getDataItems(e)).find((function(e){return e.label===n.dataItemLabel}));a&&(n.dataItemId=a.id)}n.dataItemId&&(i=t.data[n.dataItemId]),i&&(n.value?i.value=n.value:n.formula&&(i.value=s(n.formula).evaluate(r)))},e.prototype.updateRoles=function(e,t,n,r){var i;if(t.data[r]){var o=t.data[r].value,s=Object.values(t.getDataItems(e)).filter((function(e){return e.systemType===a.x.Role})),c={};s.forEach((function(e){c[e.label]=t.data[e.id]}));var l=n.roles.indexOf(o);-1!==l&&((null===(i=c[o])||void 0===i?void 0:i.value.roleData)&&(c[o].value.roleData.roleType=p.b.Active),n.roles.slice(0,l).forEach((function(e){var t;(null===(t=c[e])||void 0===t?void 0:t.value.roleData.roleType)&&(c[e].value.roleData.roleType=p.b.Done)})),n.roles.slice(l+1).forEach((function(e){var t;(null===(t=c[e])||void 0===t?void 0:t.value.roleData.roleType)&&(c[e].value.roleData.roleType=p.b.Next)})))}},e.prototype.getRulesEngine=function(e){var t=this,n=new o.Engine([],{pathResolver:function(e,t){return s(t).evaluate(e)}});return n.addFact("shapeData",(function(t){var n=t.shape;if(n&&n.data)return t.dataItemId?n.getDataItems(e)[t.dataItemId]:t.dataItemLabel?Object.values(n.getDataItems(e)).find((function(e){return e.label===t.dataItemLabel})):n.getDataItems(e)})),n.addFact("childData",(function(e,n){return Object(r.c)(t,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(r){switch(r.label){case 0:return t=e,[4,n.factValue("childShape")];case 1:return t.shape=r.sent(),[2,n.factValue("shapeData",e)]}}))}))})),n.addFact("containerData",(function(e,n){return Object(r.c)(t,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(r){switch(r.label){case 0:return t=e,[4,n.factValue("container")];case 1:return t.shape=r.sent(),[2,n.factValue("shapeData",e)]}}))}))})),n.addFact("updatedDataFields",(function(n,i){return Object(r.c)(t,void 0,void 0,(function(){var t,a,o,s;return Object(r.f)(this,(function(r){switch(r.label){case 0:return[4,i.factValue("childShape")];case 1:return t=r.sent(),(a=t.__sakota__.getChanges()).$set?(o=Object.keys(a.$set).filter((function(e){return/data\.([^\.]+)\.value/.test(e)})).map((function(e){return e.split(".")[1]})),(null==n?void 0:n.labels)?(s=t.getDataItems(e),[2,o.map((function(e){return s[e].label}))]):[2,o]):[2,[]]}}))}))})),n},e}()},"61p6":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("5xGT"),i=n("RrMq"),a=n("EM62"),o=n("s2Ay"),s=function(){function e(e){this.translator=e,this.id="shapeData",this.icon="data",this.width=550,this.disableAutoOpen=!0}return Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.SHAPE_DATA")},enumerable:!1,configurable:!0}),e.prototype.onActive=function(){r.Jb.track("right.data.panel.click",{value1Type:"status",value1:"open"}),this.shapeDataEditor&&this.shapeDataEditor.init()},e.prototype.onInactive=function(){r.Jb.track("right.data.panel.click",{value1Type:"status",value1:"close"}),this.shapeDataEditor&&this.shapeDataEditor.unsubscribe()},e.prototype.ngAfterViewInit=function(){this.shapeDataEditor.init()},e.\u0275fac=function(t){return new(t||e)(a.gc(o.e))},e.\u0275cmp=a.ac({type:e,selectors:[["shape-data-panel"]],viewQuery:function(e,t){var n;(1&e&&a.kd(i.a,!0),2&e)&&(a.Mc(n=a.vc())&&(t.shapeDataEditor=n.first))},decls:2,vars:0,consts:[["parentName","shape-data-panel"],["shapeDataEditor",""]],template:function(e,t){1&e&&a.hc(0,"shape-data-editor",0,1)},directives:[i.a],styles:[".shape-data-editor-tabs[_ngcontent-%COMP%]{height:calc(100% - 55px);overflow:hidden}abs-tab[_ngcontent-%COMP%]{display:block;height:100%}.shape-data-editor-overlay[_ngcontent-%COMP%]{z-index:100;background-color:rgba(0,0,0,.8)}.shape-data-editor-container[_ngcontent-%COMP%]{width:60%;height:calc(100% - 20px);background:#fff;position:relative}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:focus, .shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:hover{background-color:#fff}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label{margin-right:.75rem}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-view{position:relative!important;top:0;left:0;z-index:1000;transform:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-container{position:relative;z-index:2;background:unset;border:unset;box-shadow:unset;border-radius:unset;width:100%;transform:unset}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input-user{display:none}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input{border-top:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area{padding:.25rem;max-height:650px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu{display:block}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area comment-thread-item:first-child{display:none!important}.shape-data-editor-header[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem;padding-top:1.25rem}.shape-data-editor-container-inner[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:4px;display:flex;flex-direction:column;padding:1.75rem;box-sizing:border-box}.shape-data-editor-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column}.shape-data-editor-content-text[_ngcontent-%COMP%]{flex:1}.shape-data-editor-button-container[_ngcontent-%COMP%]{text-align:right}.shape-data-editor-close-btn[_ngcontent-%COMP%]{top:5px;right:5px;position:absolute}.shape-data-editor-tabs-section[_ngcontent-%COMP%]{float:left;width:67%;height:100%}"],changeDetection:0}),e}()},"6Qp7":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("5xGT"),i=n("ZTXN"),a=n("C05f"),o=n("YtkY"),s=n("EM62"),c=n("s2Ay"),l=n("29Wa"),u=n("Cd2c"),d=n("gcUQ"),p=n("x+xc"),h=n("2kYt"),f=function(){function e(e){this.translate=e,this.placeHolderHTML=this.translate.instant("PLACEHOLDERS.CHOOSE_A_DATE"),this.change=new i.a,this.dateSubject=new a.a(null)}return e.prototype.ngOnInit=function(){var e=this;this.data&&(this.setData(this.data),this.formatter||(this.formatter=function(t){if(t instanceof Date){return t.toLocaleDateString(void 0,{month:"short",day:"numeric"})}return e.placeHolderHTML}),this.dateDisplayValue=this.dateSubject.pipe(Object(o.a)(this.formatter)))},e.prototype.setData=function(e){e.value&&this.dateSubject.next(new Date(e.value))},e.prototype.onDateChange=function(e){if(e.value instanceof Date&&!isNaN(e.value)){var t=e.value.getTime();this.change.next(t),this.context&&r.Jb.track(this.context+".date.change")}},e.\u0275fac=function(t){return new(t||e)(s.gc(c.e))},e.\u0275cmp=s.ac({type:e,selectors:[["date-picker-uic-view"]],inputs:{context:"context",data:"data",placeHolderHTML:"placeHolderHTML"},outputs:{change:"change"},decls:9,vars:12,consts:[["appearance","fill"],[1,"btn-small","btn-link",3,"innerHTML","click"],["hidden","","matInput","",3,"placeholder","matDatepicker","value","blur","dateChange"],["picker",""]],template:function(e,t){if(1&e){var n=s.nc();s.mc(0,"mat-form-field",0),s.mc(1,"button",1),s.uc("click",(function(){return s.Qc(n),s.Nc(8).open()})),s.zc(2,"safeHTML"),s.zc(3,"async"),s.lc(),s.mc(4,"input",2),s.uc("blur",(function(e){return t.onDateChange(e)}))("dateChange",(function(e){return t.onDateChange(e)})),s.zc(5,"translate"),s.zc(6,"async"),s.lc(),s.hc(7,"mat-datepicker",null,3),s.lc()}if(2&e){var r=s.Nc(8);s.Sb(1),s.Dc("innerHTML",s.Ac(2,4,s.Ac(3,6,t.dateDisplayValue)),s.Rc),s.Sb(3),s.Ec("placeholder",s.Ac(5,8,"PLACEHOLDERS.CHOOSE_A_DATE")),s.Dc("matDatepicker",r)("value",s.Ac(6,10,t.dateSubject))}},directives:[l.c,u.b,d.h,d.f],pipes:[p.a,h.b,c.d],styles:["[_nghost-%COMP%]  .mat-form-field-wrapper{background-color:#fff;border-radius:.25rem;border:.5px solid #64767d}[_nghost-%COMP%]  .mat-form-field-appearance-fill .mat-form-field-flex{background-color:#fff!important;padding:0 0 0 4px!important}[_nghost-%COMP%]  .mat-form-field-infix{top:-.5rem}[_nghost-%COMP%]  .mat-button-focus-overlay{display:none}[_nghost-%COMP%]  .mat-datepicker-toggle-active{color:#08436b}"],changeDetection:0}),e}()},"6T0K":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("X0jn"),i=n("5xGT"),a=n("nsO7"),o=n("6Oco"),s=n("19Zn"),c=n("C0rp"),l=n("EM62"),u=function(){function e(){this.textFormatter=new s.G}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextDataItemBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["data","texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){if(t===i.A.PREVIEW)return o.a;var n=e.__sakota__.getChanges();return n.$set?(this.applyDataToText(e,n),this.applyTextToData(e,n),o.a):o.a},e.prototype.applyDataToText=function(t,n){var r=this,i=function(i){e.regexData.lastIndex=0;var o,s=e.regexData.exec(i),c=[];if(s)o=s[1],c=[s[2]];else{var l=i.split(".");if(!(2===l.length&&"shapes"===l[0]&&n.$set[i]&&n.$set[i].data))return"continue";o=l[1],c=Object.keys(n.$set[i].data)}var u=t.shapes[o],d=t.getShapeDataItems(o);c.forEach((function(e){var i=u.texts[e],s=d[e];if(Object(a.values)(u.texts).forEach((function(e){if(!Object(a.isEmpty)(e.handlebars)){var t=JSON.parse(e.handlebars),n=r.getStringValue(s);Object.keys(t).includes(s.label)&&(s.label&&!Object(a.isNil)(n)?t[s.label]=n:s.label&&(t[s.label]=s.label),e.handlebars=JSON.stringify(t))}})),!i&&u.eData){var c=t.getShapeDataItems(o)[e];if(c&&c.primaryTextBound&&(i=r.getPrimaryTextModel(u)),i&&!n.$set["shapes."+o+".texts."+e+".content"]){var l=n.$set["shapes."+o+".data."+e+".value"]||(n.$set["shapes."+o+".data."+e]||{}).value||Object(a.get)(n.$set["shapes."+o],"data."+e+".value");l&&i.content&&i.content[0]&&(i.content[0].text=l,i.content=[i.content[0]])}}}))};for(var o in n.$set)i(o)},e.prototype.getPrimaryTextModel=function(e){if(e.texts)return Object(a.toArray)(e.texts).find((function(e){return e&&!0===e.primary}))},e.prototype.applyTextToData=function(t,n){var i=this,o=function(o){e.regexText.lastIndex=0;var l=e.regexText.exec(o);if(!l)return"continue";var u=l[1],d=t.shapes[u],p=l[2],h=d.texts[p];if(h){var f=s.textFormatter.plainText(h.content);h.handlebars={},(f.match(/{{(.*?)}}/g)||[]).forEach((function(e){var n=e.replace(/[{{}}]/g,""),r=t.getShapeDataItems(u),o=Object(a.values)(r).find((function(e){return e.label===n}))||{},s=i.getStringValue(o);n&&!Object(a.isNil)(s)?h.handlebars[n]=s:n&&(h.handlebars[n]=n)})),h.handlebars=JSON.stringify(h.handlebars)}var m=d.texts[p].editableDataItem?d.texts[p].editableDataItem:p;if(!d.texts[p].editable)return"continue";if(!d.data)return"continue";var g=d.data[m];if(!g){var b=t.getShapeDataItems(u),v=Object(a.values)(b).find((function(e){return e.primaryTextBound}));if(v&&(g=d.data[v.id]),!g)return"continue"}return"childShapeData"===g.type?"continue":g.type===r.c.STRING_HTML?(g.value=c.html.html(n.$set[o]),"continue"):void(g.value=s.textFormatter.plainText(n.$set[o]))},s=this;for(var l in n.$set)o(l)},e.prototype.getStringValue=function(e){var t=null;if(e.type===r.c.BINARY)t=e.value?"True":"False";else if(e.type===r.c.OPTION_LIST)t=e.value;else if(e.type===r.c.STRING||e.type===r.c.NUMBER||e.type===r.c.FORMULA)t=e.value;else if("users"===e.type)t=((e.value||{}).people||[]).map((function(e){return e.fullName||e.email})).join(", ");else if("tags"===e.type)t=(e.value||[]).map((function(e){return e.name})).join(", ");else if("date"===e.type&&e.value){var n=new Date(e.value);t=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()}return t},e.regexData=/shapes\.([^\.]+)\.data\.([^\.]+)/g,e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.cc({token:e,factory:e.\u0275fac}),e}()},"6YKU":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n("D57K"),i=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r.name="FormulaError",r}return Object(r.e)(t,e),t}(Error),a="CYCLIC_REFERENCE"},"7B5I":function(e,t,n){var r=n("oFOz");t.CELL=function(){throw new Error("CELL is not implemented")},t.ERROR={},t.ERROR.TYPE=function(e){switch(e){case r.nil:return 1;case r.div0:return 2;case r.value:return 3;case r.ref:return 4;case r.name:return 5;case r.num:return 6;case r.na:return 7;case r.data:return 8}return r.na},t.INFO=function(){throw new Error("INFO is not implemented")},t.ISBLANK=function(e){return null===e},t.ISBINARY=function(e){return/^[01]{1,10}$/.test(e)},t.ISERR=function(e){return[r.value,r.ref,r.div0,r.num,r.name,r.nil].indexOf(e)>=0||"number"==typeof e&&(isNaN(e)||!isFinite(e))},t.ISERROR=function(e){return t.ISERR(e)||e===r.na},t.ISEVEN=function(e){return!(1&Math.floor(Math.abs(e)))},t.ISFORMULA=function(){throw new Error("ISFORMULA is not implemented")},t.ISLOGICAL=function(e){return!0===e||!1===e},t.ISNA=function(e){return e===r.na},t.ISNONTEXT=function(e){return"string"!=typeof e},t.ISNUMBER=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},t.ISODD=function(e){return!!(1&Math.floor(Math.abs(e)))},t.ISREF=function(){throw new Error("ISREF is not implemented")},t.ISTEXT=function(e){return"string"==typeof e},t.N=function(e){return this.ISNUMBER(e)?e:e instanceof Date?e.getTime():!0===e?1:!1===e?0:this.ISERROR(e)?e:0},t.NA=function(){return r.na},t.SHEET=function(){throw new Error("SHEET is not implemented")},t.SHEETS=function(){throw new Error("SHEETS is not implemented")},t.TYPE=function(e){return this.ISNUMBER(e)?1:this.ISTEXT(e)?2:this.ISLOGICAL(e)?4:this.ISERROR(e)?16:Array.isArray(e)?64:void 0}},"7N9q":function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n("D57K"),i=n("U8K0"),a=n("Lmsv"),o=n("5xGT"),s=n("C05f"),c=n("TLy2"),l=n("YtkY"),u=n("J+dc"),d=n("4y1S"),p=n("EM62"),h=n("s2Ay"),f=n("2kYt"),m=n("jHi0"),g=n("K0+f"),b=n("1ahL"),v=["window"],_=["windowInner"],y=function(){return{event:"notification.panel.markAllRead.click"}};function O(e,t){if(1&e){var n=p.nc();p.mc(0,"button",12),p.uc("click",(function(){return p.Qc(n),p.yc(3).markAllAsRead()})),p.mc(1,"span",13),p.fd(2,"TOOLTIPS.NOTIFICATION.MARK_ALL_AS_READ"),p.lc(),p.xc(),p.mc(3,"svg",16),p.hc(4,"use",17),p.lc(),p.lc()}2&e&&p.Dc("trackAction",p.Hc(1,y))}var x=function(){return{event:"notification.panel.settings.click"}};function E(e,t){if(1&e){var n=p.nc();p.mc(0,"div",7),p.mc(1,"div",8),p.fd(2),p.zc(3,"async"),p.lc(),p.mc(4,"div",9),p.dd(5,O,5,2,"button",10),p.zc(6,"async"),p.lc(),p.mc(7,"div",11),p.mc(8,"button",12),p.uc("click",(function(){return p.Qc(n),p.yc(2).selectedTab.next("notifications-settings")})),p.mc(9,"span",13),p.fd(10,"TOOLTIPS.NOTIFICATION.NOTIFICATION_SETTINGS"),p.lc(),p.xc(),p.mc(11,"svg",14),p.hc(12,"use",15),p.lc(),p.lc(),p.lc(),p.lc()}if(2&e){var r=p.yc(2);p.Sb(2),p.gd(p.Ac(3,3,r.numberOfUnreadGlobalNotificationLable)),p.Sb(3),p.Dc("ngIf",p.Ac(6,5,r.hasUnreadGlobalNotifications)),p.Sb(3),p.Dc("trackAction",p.Hc(7,x))}}var k=function(){return{event:"notification.panel.settings.back.click"}};function C(e,t){if(1&e){var n=p.nc();p.mc(0,"div",7),p.mc(1,"button",18),p.uc("click",(function(){return p.Qc(n),p.yc(2).selectedTab.next("notifications")})),p.xc(),p.mc(2,"svg",19),p.hc(3,"use",20),p.lc(),p.lc(),p.wc(),p.mc(4,"div",21),p.fd(5,"GLOBAL_NOTIFICATION.NOTIFICATION_SETTINGS"),p.lc(),p.lc()}2&e&&(p.Sb(1),p.Dc("trackAction",p.Hc(1,k)))}function w(e,t){1&e&&(p.mc(0,"div",25),p.hc(1,"global-notification-notifications"),p.lc())}function S(e,t){1&e&&(p.mc(0,"div",25),p.hc(1,"global-notification-settings"),p.lc())}function I(e,t){if(1&e&&(p.mc(0,"div",22),p.mc(1,"div",23),p.dd(2,w,2,0,"div",24),p.dd(3,S,2,0,"div",24),p.lc(),p.lc()),2&e){var n=t.ngIf;p.Sb(2),p.Dc("ngIf","notifications"===n),p.Sb(1),p.Dc("ngIf","notifications-settings"===n)}}function T(e,t){if(1&e&&(p.mc(0,"div",3,4),p.zc(2,"async"),p.dd(3,E,13,8,"div",5),p.dd(4,C,6,2,"div",5),p.dd(5,I,4,2,"div",6),p.zc(6,"async"),p.lc()),2&e){var n=t.ngIf,r=p.yc();p.Yb("demo-user",p.Ac(2,5,r.isDemoUser)),p.Sb(3),p.Dc("ngIf","notifications"===n),p.Sb(1),p.Dc("ngIf","notifications-settings"===n),p.Sb(1),p.Dc("ngIf",p.Ac(6,7,r.selectedTab))}}var A=function(e){function t(t,n,r,i,a,o){var c=e.call(this)||this;return c.modalController=t,c.stateService=n,c.globalNotificationService=r,c.commandService=i,c.userLocator=a,c.translateService=o,c.subs=[],c.stateService.set("ModalBlur",!1),c.selectedTab=new s.a("notifications"),c.isDemoUser=new s.a(!1),c}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"hasUnreadGlobalNotifications",{get:function(){return this.globalNotificationService.hasUnreadGlobalNotifications()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numberOfUnreadGlobalNotificationLable",{get:function(){var e=this;return this.globalNotificationService.getNoOfUnreadGlobalNotification().pipe(Object(c.a)((function(t){return e.translateService.get("TOOLTIPS.NOTIFICATION.NEW_NOTIFICATIONS",{noOfNewNotifications:t})})))},enumerable:!1,configurable:!0}),t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.ngOnInit=function(){var e=this;if(o.Jb.track("notification.panel.load"),this.container&&this.containerInner){var t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t)}this.subs.push(this.userLocator.getUserData().pipe(Object(l.a)((function(e){return!!e&&e.status===d.A.DEMO}))).subscribe((function(t){return e.isDemoUser.next(t)})))},t.prototype.closeWindow=function(){var e=this;if(this.container&&this.containerInner){var t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)}},t.prototype.markAllAsRead=function(){var e=this;this.globalNotificationService.getUnreadNotificationIds().pipe(Object(u.a)(1),Object(c.a)((function(t){return e.commandService.dispatch(i.a.markGlobalNotificationRead,{notificationIds:t})}))).subscribe()},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(p.gc(o.fb),p.gc(o.Hb),p.gc(a.a),p.gc(o.B),p.gc(d.x),p.gc(h.e))},t.\u0275cmp=p.ac({type:t,selectors:[["global-notification"]],viewQuery:function(e,t){var n;(1&e&&(p.kd(v,!0),p.kd(_,!0)),2&e)&&(p.Mc(n=p.vc())&&(t.container=n.first),p.Mc(n=p.vc())&&(t.containerInner=n.first))},features:[p.Pb],decls:5,vars:7,consts:[[1,"fx-cover","modal-window-container","global-notification-container",3,"click"],["window",""],["class","modal-window-inner",3,"demo-user",4,"ngIf"],[1,"modal-window-inner"],["windowInner",""],["class","modal-window-heading",4,"ngIf"],["class","modal-window-content",4,"ngIf"],[1,"modal-window-heading"],[1,"global-notification-heading","body"],[1,"btn-small","nu-btn-icon","lib-browser-close-btn","global-notification-button-container"],["class","btn-small nu-btn-icon lib-browser-close-btn","tooltip","","placement","bottom",3,"trackAction","click",4,"ngIf"],[1,"global-notification-button-container"],["tooltip","","placement","bottom",1,"btn-small","nu-btn-icon","lib-browser-close-btn",3,"trackAction","click"],["translate","",1,"tooltip-content"],[1,"nu-icon","nu-icon-med","nu-ic-settings"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-settings"],[1,"nu-icon","nu-icon-med","nu-ic-notification-tick-double"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notification-tick-double"],[1,"btn-small","nu-btn-icon","lib-browser-close-btn","global-notification-notifications-button",3,"trackAction","click"],[1,"nu-icon","nu-icon-med","nu-ic-arrow-left"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-arrow-left"],["translate","",1,"global-notification-heading-settings","heading"],[1,"modal-window-content"],[1,"global-notification-tabs-content"],["class","global-notification-tab-item",4,"ngIf"],[1,"global-notification-tab-item"]],template:function(e,t){1&e&&(p.mc(0,"div",0,1),p.uc("click",(function(e){return t.closeOnOverlayClick(e)})),p.zc(2,"async"),p.dd(3,T,7,9,"div",2),p.zc(4,"async"),p.lc()),2&e&&(p.Yb("demo-user",p.Ac(2,3,t.isDemoUser)),p.Sb(3),p.Dc("ngIf",p.Ac(4,5,t.selectedTab)))},directives:[f.t,m.a,g.a,h.a,b.a],pipes:[f.b],styles:['.nu-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.modal-window-inner.demo-user[_ngcontent-%COMP%]{top:0;height:100%}.modal-window-inner[_ngcontent-%COMP%]{box-shadow:0 12px 20px rgba(0,0,0,.15),0 6px 6px rgba(0,0,0,.1);padding:0;width:264px;height:100%;background:#fff;box-sizing:border-box;top:0;display:flex;flex-direction:column}.global-notification-tabs-content[_ngcontent-%COMP%]{height:calc(100% - 53px)}.global-notification-tab-item[_ngcontent-%COMP%], .modal-window-content[_ngcontent-%COMP%]{height:100%}.modal-window-heading[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.modal-window-heading[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:-.5rem;position:unset;top:0;right:0;background-color:transparent}.global-notification-heading[_ngcontent-%COMP%]{font-weight:500;color:#354b53;width:70%}.global-notification-heading-settings[_ngcontent-%COMP%]{color:#04263d;font-weight:500}.global-notification-container.demo-user[_ngcontent-%COMP%]:after, .global-notification-container.demo-user[_ngcontent-%COMP%]:before{content:"";display:block;width:0;height:0;position:absolute;border-style:solid}.global-notification-container.demo-user[_ngcontent-%COMP%]:after, .global-notification-container.demo-user[_ngcontent-%COMP%]:before{top:4rem;right:3.5rem;border-color:transparent transparent #fff;border-width:.25rem}.global-notification-container[_ngcontent-%COMP%]:after, .global-notification-container[_ngcontent-%COMP%]:before{content:"";display:block;width:0;height:0;position:absolute;border-style:solid}.global-notification-container[_ngcontent-%COMP%]:after, .global-notification-container[_ngcontent-%COMP%]:before{top:2.5rem;right:3.5rem;border-color:transparent transparent #fff;border-width:0}.global-notification-container[_ngcontent-%COMP%]   .global-notification-container-full-width[_ngcontent-%COMP%]{width:100%}.global-notification-button-container[_ngcontent-%COMP%]{width:15%;background-color:transparent}'],changeDetection:0}),t}(o.mb)},"8wi9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("9WnA"),o=(r=a)&&r.__esModule?r:{default:r};var s=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conditions=(0,o.default)(t),this.event=(0,o.default)(n),this.priority=(0,o.default)(r),this.name=(0,o.default)(i),this.result=null}return i(e,[{key:"setResult",value:function(e){this.result=e}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return e?JSON.stringify(t):t}}]),e}();t.default=s},"90bW":function(e,t,n){var r=n("oFOz"),i=n("sfKy"),a=n("7B5I");t.AND=function(){for(var e=i.flatten(arguments),t=r.value,n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===r.value&&(t=!0),e[n]||(t=!1))}return t},t.CHOOSE=function(){if(arguments.length<2)return r.na;var e=arguments[0];return e<1||e>254||arguments.length<e+1?r.value:arguments[e]},t.FALSE=function(){return!1},t.IF=function(e,t,n){return e instanceof Error?e:(null==(t=!(arguments.length>=2)||t)&&(t=0),null==(n=3===arguments.length&&n)&&(n=0),e?t:n)},t.IFS=function(){for(var e=0;e<arguments.length/2;e++)if(arguments[2*e])return arguments[2*e+1];return r.na},t.IFERROR=function(e,t){return a.ISERROR(e)?t:e},t.IFNA=function(e,t){return e===r.na?t:e},t.NOT=function(e){return"string"==typeof e?r.value:e instanceof Error?e:!e},t.OR=function(){for(var e=i.flatten(arguments),t=r.value,n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===r.value&&(t=!1),e[n]&&(t=!0))}return t},t.TRUE=function(){return!0},t.XOR=function(){for(var e=i.flatten(arguments),t=r.value,n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===r.value&&(t=0),e[n]&&t++)}return t===r.value?t:!!(1&Math.floor(Math.abs(t)))},t.SWITCH=function(){var e;if(arguments.length>0){var t=arguments[0],n=arguments.length-1,i=Math.floor(n/2),a=!1,o=n%2!=0,s=n%2==0?null:arguments[arguments.length-1];if(i)for(var c=0;c<i;c++)if(t===arguments[2*c+1]){e=arguments[2*c+2],a=!0;break}a||(e=o?s:r.na)}else e=r.value;return e}},"9WnA":function(e,t,n){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(s){t=function(){}}try{n=Set}catch(s){n=function(){}}try{r=Promise}catch(s){r=function(){}}function i(a,s,c,l,u){"object"==typeof s&&(c=s.depth,l=s.prototype,u=s.includeNonEnumerable,s=s.circular);var d=[],p=[],h="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===c&&(c=1/0),function a(c,f){if(null===c)return null;if(0===f)return c;var m,g;if("object"!=typeof c)return c;if(e(c,t))m=new t;else if(e(c,n))m=new n;else if(e(c,r))m=new r((function(e,t){c.then((function(t){e(a(t,f-1))}),(function(e){t(a(e,f-1))}))}));else if(i.__isArray(c))m=[];else if(i.__isRegExp(c))m=new RegExp(c.source,o(c)),c.lastIndex&&(m.lastIndex=c.lastIndex);else if(i.__isDate(c))m=new Date(c.getTime());else{if(h&&Buffer.isBuffer(c))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(c.length):new Buffer(c.length),c.copy(m),m;e(c,Error)?m=Object.create(c):void 0===l?(g=Object.getPrototypeOf(c),m=Object.create(g)):(m=Object.create(l),g=l)}if(s){var b=d.indexOf(c);if(-1!=b)return p[b];d.push(c),p.push(m)}for(var v in e(c,t)&&c.forEach((function(e,t){var n=a(t,f-1),r=a(e,f-1);m.set(n,r)})),e(c,n)&&c.forEach((function(e){var t=a(e,f-1);m.add(t)})),c){var _;g&&(_=Object.getOwnPropertyDescriptor(g,v)),_&&null==_.set||(m[v]=a(c[v],f-1))}if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(c);for(v=0;v<y.length;v++){var O=y[v];(!(E=Object.getOwnPropertyDescriptor(c,O))||E.enumerable||u)&&(m[O]=a(c[O],f-1),E.enumerable||Object.defineProperty(m,O,{enumerable:!1}))}}if(u){var x=Object.getOwnPropertyNames(c);for(v=0;v<x.length;v++){var E,k=x[v];(E=Object.getOwnPropertyDescriptor(c,k))&&E.enumerable||(m[k]=a(c[k],f-1),Object.defineProperty(m,k,{enumerable:!1}))}}return m}(a,c)}function a(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=a,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},i.__getRegExpFlags=o,i}();e.exports&&(e.exports=r)},"9pEM":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("nIj0"),a=n("NNJu"),o=n("Zuf/"),s=n("C05f"),c=n("EM62"),l=n("29Wa"),u=n("Cd2c"),d=n("2kYt"),p=n("s2Ay");function h(e,t){if(1&e&&(c.mc(0,"div",14),c.fd(1),c.lc()),2&e){var n=c.yc();c.Sb(1),c.hd(" ",n.selectedRule.errors.invalidRule.error.message," ")}}function f(e,t){if(1&e){var n=c.nc();c.mc(0,"tr"),c.mc(1,"td",15),c.fd(2),c.lc(),c.mc(3,"td"),c.mc(4,"button",16),c.uc("click",(function(){c.Qc(n);var e=t.index;return c.yc().startEditing(e)})),c.fd(5),c.zc(6,"translate"),c.lc(),c.lc(),c.mc(7,"td"),c.mc(8,"button",17),c.uc("click",(function(){c.Qc(n);var e=t.index;return c.yc().removeRule(e)})),c.fd(9),c.zc(10,"translate"),c.lc(),c.lc(),c.lc()}if(2&e){var r=t.$implicit;c.Sb(2),c.gd(r.name),c.Sb(3),c.gd(c.Ac(6,3,"SHAPE_DATA.TABS.RULES.ACTION_UPDATE")),c.Sb(4),c.gd(c.Ac(10,5,"SHAPE_DATA.TABS.RULES.ACTION_REMOVE"))}}var m=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.componentFactoryResolver=t,i.injector=n,i.fb=r,i.rulesObs=new s.a([]),i.editing=new s.a(!1),i.editingIndex=-1,i}return Object(r.e)(t,e),t.prototype.startAdding=function(){this.selectedRule.reset(),this.editing.next(!0)},t.prototype.startEditing=function(e){var t=this.rulesObs.value[e];this.selectedRule.patchValue({name:t.name,conditions:JSON.stringify(t.conditions),event:JSON.stringify(t.event)}),this.editingIndex=e,this.editing.next(!0)},t.prototype.removeRule=function(e){var t=this.rulesObs.value;t.splice(e,1),this.rulesObs.next(t),this.onChange(t)},t.prototype.handleSaveClick=function(){if(!this.selectedRule.invalid){var e=this.selectedRule.value,t=JSON.parse(e.conditions),n=JSON.parse(e.event),i={name:e.name,conditions:t,event:n};this.editingIndex>-1?this.updateRule(this.editingIndex,i):this.addNewRule(Object(r.a)(Object(r.a)({},i),{priority:1})),this.editingIndex=-1,this.editing.next(!1),this.onChange(this.rulesObs.value)}},t.prototype.cancelEditing=function(){this.editing.next(!1),this.editingIndex=-1},t.prototype.updateRule=function(e,t){var n=this.rulesObs.value;n.splice(e,1,Object.assign({},n[e],t)),this.rulesObs.next(n)},t.prototype.addNewRule=function(e){this.rulesObs.next(this.rulesObs.value.concat([e]))},t.prototype.onTabUpdate=function(){this.rules&&this.rulesObs.next(this.rules?this.rules.slice():[])},t.prototype.ngOnInit=function(){this.selectedRule=this.fb.group({name:this.fb.control("",i.G.required),conditions:this.fb.control("",i.G.required),event:this.fb.control("",i.G.required)},{validators:function(e){var t=Object(r.a)({},e.value);if(!t.conditions||"null"===t.conditions)return{invalidRule:{error:"Conditions should be defined"}};if(!t.event||"null"===t.event)return{invalidRule:{error:"Event should be defined"}};try{t.conditions=JSON.parse(t.conditions),t.event=JSON.parse(t.event),new o.Rule(t)}catch(n){return{invalidRule:{error:n}}}return null},updateOn:"submit"}),this.rules&&this.rules.length>0&&this.rulesObs.next(this.rules.slice())},t.\u0275fac=function(e){return new(e||t)(c.gc(c.m),c.gc(c.C),c.gc(i.g))},t.\u0275cmp=c.ac({type:t,selectors:[["rules-renderer"]],inputs:{rules:"rules",onChange:"onChange"},features:[c.Pb],decls:34,vars:26,consts:[[1,"rules-container"],[1,"btn-primary","btn-small",3,"hidden","click"],[1,"add-rule",3,"hidden"],[1,"form-data-source",3,"formGroup","ngSubmit"],["appearance","standard",1,"example-full-width"],["formControlName","name","matInput",""],["formControlName","conditions","matInput",""],["formControlName","event","matInput",""],["class","cross-validation-error-message alert alert-danger",4,"ngIf"],["type","submit",1,"btn-primary","btn-small"],["type","button",1,"btn-secondary","btn-small",3,"click"],[1,"rule-list"],[2,"width","100%","margin","10px"],[4,"ngFor","ngForOf"],[1,"cross-validation-error-message","alert","alert-danger"],[2,"width","60%"],[1,"btn-primary","btn-small",3,"click"],[1,"btn-warning","btn-small",3,"click"]],template:function(e,t){1&e&&(c.mc(0,"div",0),c.mc(1,"button",1),c.uc("click",(function(){return t.startAdding()})),c.zc(2,"async"),c.fd(3,"Add Rule"),c.lc(),c.mc(4,"div",2),c.zc(5,"async"),c.mc(6,"form",3),c.uc("ngSubmit",(function(){return t.handleSaveClick()})),c.mc(7,"mat-form-field",4),c.mc(8,"mat-label"),c.fd(9),c.zc(10,"translate"),c.lc(),c.hc(11,"input",5),c.lc(),c.mc(12,"mat-form-field",4),c.mc(13,"mat-label"),c.fd(14),c.zc(15,"translate"),c.lc(),c.hc(16,"textarea",6),c.lc(),c.mc(17,"mat-form-field",4),c.mc(18,"mat-label"),c.fd(19),c.zc(20,"translate"),c.lc(),c.hc(21,"textarea",7),c.lc(),c.dd(22,h,2,1,"div",8),c.mc(23,"button",9),c.fd(24),c.zc(25,"translate"),c.lc(),c.mc(26,"button",10),c.uc("click",(function(){return t.cancelEditing()})),c.fd(27),c.zc(28,"translate"),c.lc(),c.lc(),c.lc(),c.mc(29,"div",11),c.mc(30,"table",12),c.mc(31,"tbody"),c.dd(32,f,11,7,"tr",13),c.zc(33,"async"),c.lc(),c.lc(),c.lc(),c.lc()),2&e&&(c.Sb(1),c.Dc("hidden",c.Ac(2,10,t.editing)),c.Sb(3),c.Dc("hidden",!c.Ac(5,12,t.editing)),c.Sb(2),c.Dc("formGroup",t.selectedRule),c.Sb(3),c.gd(c.Ac(10,14,"SHAPE_DATA.TABS.RULES.LABELS.NAME")),c.Sb(5),c.gd(c.Ac(15,16,"SHAPE_DATA.TABS.RULES.LABELS.CONDITIONS")),c.Sb(5),c.gd(c.Ac(20,18,"SHAPE_DATA.TABS.RULES.LABELS.EVENT")),c.Sb(3),c.Dc("ngIf",(null==t.selectedRule.errors?null:t.selectedRule.errors.invalidRule)&&(t.selectedRule.touched||t.selectedRule.dirty)),c.Sb(2),c.gd(c.Ac(25,20,"SHAPE_DATA.TABS.RULES.ACTION_SAVE")),c.Sb(3),c.gd(c.Ac(28,22,"SHAPE_DATA.TABS.RULES.ACTION_CANCEL")),c.Sb(5),c.Dc("ngForOf",c.Ac(33,24,t.rulesObs)))},directives:[i.I,i.t,i.k,l.c,l.g,i.d,u.b,i.s,i.j,d.t,d.s],pipes:[d.b,p.d],styles:["[_nghost-%COMP%]  .ql-editor{min-height:500px}"],changeDetection:0}),t}(a.k)},AM7v:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("5xGT"),a=n("g6G6"),o=n("KTx3"),s=n("xVbo"),c=n("8j5Y"),l=n("YtkY"),u=n("Wg7D"),d=n("Wpmq"),p=n("LLEj"),h=n("c7W3"),f=n("EM62"),m=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.commandService=t,i.vToDcoordinate=n,i.state=r,i.svgPathId="freehand-svg-path",i.pointsBufferLength=4,i.svgPoints=[],i.svgPointsTemporary=[],i.svgPointsBuffer=[],i.isDrawing=!1,i.throttleTime=5,i.isStraightLine=!1,i}return Object(r.e)(t,e),t.getAveragePoint=function(e,t,n){for(var r=t.length,i=0,a=0,o=0,s=e;s<r;s++){o++;var c=t[s];i+=c.x,a+=c.y}return{x:i/o,y:a/o}},Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:this.state.get("MouseControlState"),tail:null,type:"svg",viewingArea:"canvas"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,r){var i=this;this.resetValues();var o=e.prototype.initialize.call(this,t,n,r),l=this.getFreeHandMouseEvents().pipe(Object(s.a)((function(e){return i.isDrawing&&i.isStopDraw(e)})),Object(c.a)((function(){i.updateDiagramShape(!1),i.resetValues()})));return Object(a.a)(o,l,this.startFreeHand())},t.prototype.resetValues=function(){this.isDrawing=!1,this.isStraightLine=!1,this.throttleTime=5,this.shiftAngle=void 0,this.svgPoints=[],this.svgPointsBuffer=[],this.svgPointsTemporary=[];var e=document.getElementById(this.svgPathId);e&&e.setAttributeNS(null,"d",""),this.state.set("CurrentFreeHandShape",!1)},t.prototype.isStopDraw=function(e){var t=this.getViewportBounds(),n=t.left,r=t.top,i=n+t.width,a=r+t.height;return!!(e.type.includes("up")||e.clientX<=n||e.clientX>=i||e.clientY<=r||e.clientY>=a)},t.prototype.getAllSVGPoint=function(){return Object(r.j)(this.svgPoints,this.svgPointsTemporary)},t.prototype.getFreeHandMouseEvents=function(){var e=this,t=document.getElementById("free-hand-container");return Object(a.a)(Object(o.a)(t,"mousedown",{capture:!0}),Object(o.a)(t,"mousemove",{capture:!0}),Object(o.a)(t,"pressmove",{capture:!0}),Object(o.a)(t,"pressup",{capture:!0}),Object(o.a)(t,"mouseup",{capture:!0})).pipe(Object(l.a)((function(e){return e})),Object(c.a)((function(t){"mousedown"!==t.type||e.isDrawing||(e.isDrawing=!0,e.startPosition={x:t.clientX,y:t.clientY},e.addPointToPath(t,!1)),!e.isStraightLine&&t.shiftKey?e.throttleTime=1e3:t.shiftKey||(e.throttleTime=5,e.shiftAngle=void 0),e.isStraightLine=t.shiftKey})))},t.prototype.startFreeHand=function(){var e=this;return this.getFreeHandMouseEvents().pipe(Object(s.a)((function(t){return e.isDrawing&&!e.isStopDraw(t)})),Object(u.a)(this.throttleTime),Object(l.a)((function(t){return e.addPointToPath(t,!0)})))},t.prototype.addPointToPath=function(e,n){var r=document.getElementById("freehand-svg"),i=document.getElementById(this.svgPathId),a=r.createSVGPoint(),o=this.getMousePoint(e);a.x=o.x,a.y=o.y;var s=a.matrixTransform(r.getScreenCTM().inverse());this.svgPointsBuffer.push(s),this.svgPointsBuffer.length>this.pointsBufferLength&&this.svgPointsBuffer.shift(),0===this.svgPoints.length&&this.svgPoints.push(s);var c=t.getAveragePoint(0,this.svgPointsBuffer,this.pointsBufferLength);if(c){var l=r.createSVGPoint();l.x=c.x,l.y=c.y,this.svgPoints.push(l),this.svgPointsTemporary=[];for(var u=1;u<this.svgPointsBuffer.length;u+=1){var d=t.getAveragePoint(u,this.svgPointsBuffer,this.pointsBufferLength),p=r.createSVGPoint();p.x=d.x,p.y=d.y,this.svgPointsTemporary.push(p)}}i.setAttributeNS(null,"d",this.convertPointsToSvg(this.svgPoints)),this.updateDiagramShape(n)},t.prototype.getMousePoint=function(e){var t=e.clientX,n=e.clientY,r=this.getViewportBounds();this.isStopDraw(e)&&!e.type.includes("up")&&(t=t<=r.left+10?r.left:r.left+r.width,n=n<=r.top+10?r.top:r.top+r.height);var i={x:t,y:n};if(!this.isStraightLine)return i;var a=t-this.startPosition.x,o=n-this.startPosition.y;if(this.shiftAngle||t===this.startPosition.x||(this.shiftAngle=Math.atan(o/a)*(180/Math.PI)),Math.abs(this.shiftAngle)<30)i.y=this.startPosition.y;else if(Math.abs(this.shiftAngle)<60){var s=Math.sign(this.shiftAngle),c=Math.PI/180*45;i.y=this.startPosition.y+s*a*Math.tan(c)}else i.x=this.startPosition.x;return i},t.prototype.convertPointsToSvg=function(e,t){t=t||[0,0];for(var n="",r=0;r<e.length;r++){var i=0===r?"M":"L";e[r].x+=t[0],e[r].y+=t[1],n+=i+e[r].x+" "+e[r].y+" "}return n},t.prototype.getViewportBounds=function(){return document.querySelector(".diagram-viewport").getBoundingClientRect()},t.prototype.updateDiagramShape=function(e){var t=this,n=[],i=[];this.getAllSVGPoint().forEach((function(e){var r=e.x,a=e.y;n.push(t.vToDcoordinate.x(r)),i.push(t.vToDcoordinate.y(a))}));var a=Math.abs(Math.max.apply(Math,Object(r.j)(n))-Math.min.apply(Math,Object(r.j)(n))),o=Math.abs(Math.max.apply(Math,Object(r.j)(i))-Math.min.apply(Math,Object(r.j)(i))),s=Math.min.apply(Math,Object(r.j)(n)),c=Math.min.apply(Math,Object(r.j)(i)),l=this.translate(-s,-c),u=e?"preview":"dispatch";this.commandService[u](h.a.addFreehandShape,{svg:l,shapeStart:{x:s,y:c},bounds:{width:a,height:o},shapeId:this.state.get("CurrentFreeHandShape")})},t.prototype.translate=function(e,t){var n=this,r=document.getElementById("free-hand-container").innerHTML,i=this.getAllSVGPoint().map((function(e){return{x:n.vToDcoordinate.x(e.x),y:n.vToDcoordinate.y(e.y)}})),a=this.convertPointsToSvg(i,[e,t]),o=r.indexOf(" d")+3,s=o+r.slice(o).indexOf(">")-1;return r.slice(0,o+1)+a+r.slice(s)},t.\u0275fac=function(e){return new(e||t)(f.qc(i.B),f.qc(d.a),f.qc(i.Hb))},t.\u0275prov=f.cc({token:t,factory:t.\u0275fac}),t}(p.a)},AaYA:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("19Zn"),i=n("ZTXN"),a=n("C05f"),o=n("6Oco"),s=n("EM62"),c=n("s2Ay"),l=n("2kYt"),u=["container"];function d(e,t){if(1&e){var n=s.nc();s.mc(0,"div",6),s.mc(1,"div",7),s.mc(2,"div",8),s.mc(3,"div",9),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-top-left")})),s.lc(),s.mc(4,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-top-center")})),s.lc(),s.mc(5,"div",11),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-top-right")})),s.lc(),s.lc(),s.lc(),s.mc(6,"div",12),s.mc(7,"div",8),s.mc(8,"div",9),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-left-top")})),s.lc(),s.mc(9,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-left-center")})),s.lc(),s.mc(10,"div",11),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-left-bottom")})),s.lc(),s.lc(),s.mc(11,"div",13),s.mc(12,"div",14),s.mc(13,"div",9),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-top-left")})),s.lc(),s.mc(14,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-center-left")})),s.lc(),s.mc(15,"div",11),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-bottom-left")})),s.lc(),s.lc(),s.mc(16,"div",15),s.mc(17,"div",9),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-top-center")})),s.lc(),s.mc(18,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-center-center")})),s.lc(),s.mc(19,"div",11),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-bottom-center")})),s.lc(),s.lc(),s.mc(20,"div",16),s.mc(21,"div",9),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-top-right")})),s.lc(),s.mc(22,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-center-right")})),s.lc(),s.mc(23,"div",11),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("in-bottom-right")})),s.lc(),s.lc(),s.lc(),s.mc(24,"div",17),s.mc(25,"div",9),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-right-top")})),s.lc(),s.mc(26,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-right-center")})),s.lc(),s.mc(27,"div",11),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-right-bottom")})),s.lc(),s.lc(),s.lc(),s.mc(28,"div",18),s.mc(29,"div",8),s.mc(30,"div",9),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-bottom-left")})),s.lc(),s.mc(31,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-bottom-center")})),s.lc(),s.mc(32,"div",11),s.uc("click",(function(){return s.Qc(n),s.yc().handleClick("ex-bottom-right")})),s.lc(),s.lc(),s.lc(),s.lc()}if(2&e){var r=t.ngIf;s.Sb(3),s.Yb("selected","ex-top-left"===r),s.Sb(1),s.Yb("selected","ex-top-center"===r),s.Sb(1),s.Yb("selected","ex-top-right"===r),s.Sb(3),s.Yb("selected","ex-left-top"===r),s.Sb(1),s.Yb("selected","ex-left-center"===r),s.Sb(1),s.Yb("selected","ex-left-bottom"===r),s.Sb(3),s.Yb("selected","in-top-left"===r),s.Sb(1),s.Yb("selected","in-center-left"===r),s.Sb(1),s.Yb("selected","in-bottom-left"===r),s.Sb(2),s.Yb("selected","in-top-center"===r),s.Sb(1),s.Yb("selected","in-center-center"===r),s.Sb(1),s.Yb("selected","in-bottom-center"===r),s.Sb(2),s.Yb("selected","in-top-right"===r),s.Sb(1),s.Yb("selected","in-center-right"===r),s.Sb(1),s.Yb("selected","in-bottom-right"===r),s.Sb(2),s.Yb("selected","ex-right-top"===r),s.Sb(1),s.Yb("selected","ex-right-center"===r),s.Sb(1),s.Yb("selected","ex-right-bottom"===r),s.Sb(3),s.Yb("selected","ex-bottom-left"===r),s.Sb(1),s.Yb("selected","ex-bottom-center"===r),s.Sb(1),s.Yb("selected","ex-bottom-right"===r)}}var p=function(){function e(){this._change=new i.a,this.selectedElement=new a.a("none")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerElement",{get:function(){return this.container?this.container.nativeElement:void 0},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.selectedElement.next(r.H.getTextPositionString(e)),this._data=e,e.transform&&this.setRotation(e.transform)},e.prototype.setProperties=function(e){},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(o.b)()},e.prototype.handleClick=function(e){this._change.next(this.getDataPositionData(e))},e.prototype.setRotation=function(e){var t=e.angle;this.containerElement&&(e.scaleX>0&&e.scaleY<0&&0===t&&(t=180),t>=0&&t<45?this.containerElement.style.transform="rotate(0)":t>=45&&t<90||t>=90&&t<135?this.containerElement.style.transform="rotate(90deg)":t>=135&&t<=180?this.containerElement.style.transform="rotate(180deg)":t<=0&&t>-45?this.containerElement.style.transform="rotate(0)":t<=-45&&t>-90||t<=-90&&t>-135?this.containerElement.style.transform="rotate(-90deg)":t<=-135&&t>=-180&&(this.containerElement.style.transform="rotate(-180deg)"))},e.prototype.getDataPositionData=function(e){return"ex-top-left"===e?{xType:"fixed-start",x:0,yType:"fixed-start",y:-1,alignX:-1,alignY:1,wordWrap:!1}:"ex-top-center"===e?{xType:"relative",x:.5,yType:"fixed-start",y:-1,alignX:0,alignY:1,wordWrap:!1}:"ex-top-right"===e?{xType:"fixed-end",x:0,yType:"fixed-start",y:-1,alignX:1,alignY:1,wordWrap:!1}:"in-top-left"===e?{xType:"fixed-start",x:1,yType:"fixed-start",y:1,alignX:-1,alignY:-1,wordWrap:!0}:"in-top-center"===e?{xType:"relative",x:.5,yType:"fixed-start",y:1,alignX:0,alignY:-1,wordWrap:!0}:"in-top-right"===e?{xType:"fixed-end",x:1,yType:"fixed-start",y:1,alignX:1,alignY:-1,wordWrap:!0}:"in-center-left"===e?{xType:"fixed-start",x:1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!0}:"in-center-center"===e?{xType:"relative",x:.5,yType:"relative",y:.5,alignX:0,alignY:0,wordWrap:!0}:"in-center-right"===e?{xType:"fixed-end",x:1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!0}:"in-bottom-left"===e?{xType:"fixed-start",x:1,yType:"fixed-end",y:1,alignX:-1,alignY:1,wordWrap:!0}:"in-bottom-center"===e?{xType:"relative",x:.5,yType:"fixed-end",y:1,alignX:0,alignY:1,wordWrap:!0}:"in-bottom-right"===e?{xType:"fixed-end",x:1,yType:"fixed-end",y:1,alignX:1,alignY:1,wordWrap:!0}:"ex-bottom-left"===e?{xType:"fixed-start",x:0,yType:"fixed-end",y:-1,alignX:-1,alignY:-1,wordWrap:!1}:"ex-bottom-center"===e?{xType:"relative",x:.5,yType:"fixed-end",y:-1,alignX:0,alignY:-1,wordWrap:!1}:"ex-bottom-right"===e?{xType:"fixed-end",x:0,yType:"fixed-end",y:-1,alignX:1,alignY:-1,wordWrap:!1}:"ex-left-top"===e?{xType:"fixed-start",x:-1,yType:"fixed-start",y:0,alignX:1,alignY:-1,wordWrap:!1}:"ex-right-top"===e?{xType:"fixed-end",x:-1,yType:"fixed-start",y:0,alignX:-1,alignY:-1,wordWrap:!1}:"ex-left-center"===e?{xType:"fixed-start",x:-1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!1}:"ex-right-center"===e?{xType:"fixed-end",x:-1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!1}:"ex-left-bottom"===e?{xType:"fixed-start",x:-1,yType:"fixed-end",y:0,alignX:1,alignY:1,wordWrap:!1}:"ex-right-bottom"===e?{xType:"fixed-end",x:-1,yType:"fixed-end",y:0,alignX:-1,alignY:1,wordWrap:!1}:void 0},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.ac({type:e,selectors:[["text-position-control"]],viewQuery:function(e,t){var n;(1&e&&s.kd(u,!0),2&e)&&(s.Mc(n=s.vc())&&(t.container=n.first))},decls:8,vars:3,consts:[[1,"txt-position-lbl","fx-margin-bottom-5"],["translate","",1,"caption"],[1,"text-position-control-container"],["container",""],["src","./assets/images/text-position-control.svg",1,"text-position-control-grid"],["class","text-position-control",4,"ngIf"],[1,"text-position-control"],[1,"row-1"],[1,"column-1"],[1,"tile1",3,"click"],[1,"tile2",3,"click"],[1,"tile3",3,"click"],[1,"row-2"],[1,"column-2"],[1,"column-2-1"],[1,"column-2-2"],[1,"column-2-3"],[1,"column-3"],[1,"row-3"]],template:function(e,t){1&e&&(s.mc(0,"div",0),s.mc(1,"label",1),s.fd(2,"LABELS.TEXT_POSITION"),s.lc(),s.lc(),s.mc(3,"div",2,3),s.hc(5,"img",4),s.dd(6,d,33,42,"div",5),s.zc(7,"async"),s.lc()),2&e&&(s.Sb(6),s.Dc("ngIf",s.Ac(7,1,t.selectedElement)))},directives:[c.a,l.t],pipes:[l.b],styles:[".text-position-control-container[_ngcontent-%COMP%]{width:100px;height:100px;position:relative}.text-position-control[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;z-index:1;left:0;top:0}.text-position-control[_ngcontent-%COMP%]   [class*=tile][_ngcontent-%COMP%]{width:15.5px;height:15.5px;cursor:pointer}.text-position-control[_ngcontent-%COMP%]   [class*=tile][_ngcontent-%COMP%]:hover{background-color:#f1f8fd}.text-position-control[_ngcontent-%COMP%]   [class*=tile].selected[_ngcontent-%COMP%]{background-color:#d5e8f4}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]{padding-left:1.125rem;padding-right:1.125rem}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%]{margin-right:0}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]{display:flex}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%]{margin-bottom:.5rem}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]{padding:calc(.25rem - 1px) .375rem}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-3[_ngcontent-%COMP%]{display:inline-block;margin-right:calc(.25rem + 1px)}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-3[_ngcontent-%COMP%]{margin-right:0}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%]{margin-bottom:calc(.25rem + 1px)}"],changeDetection:0}),e}()},"Aq/p":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeEvents=t.ShapeCommands=void 0,function(e){e.shapeTouchSubscribe="shape:touch:subscribe",e.shapeSelectSubscribe="shape:select:subscribe"}(t.ShapeCommands||(t.ShapeCommands={})),function(e){e.shapeTouch="shape:touch",e.shapeSelect="shape:select"}(t.ShapeEvents||(t.ShapeEvents={}))},"Ax/4":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("5xGT"),i=n("6Oco"),a=n("X0jn"),o=n("nsO7"),s=n("aYRE"),c=n("nWGD"),l=n("J+dc"),u=n("8j5Y"),d=n("EM62"),p=function(){function e(e,t,n,r){this.state=e,this.commandService=t,this.taskManager=n,this.taskLocator=r}return Object.defineProperty(e.prototype,"name",{get:function(){return"TaskBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["data","texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){this.changeModel=e;var n=e.__sakota__.getChanges();return Object(o.isEmpty)(n)||"Execute"!==t||(this.processTitleChanges(e,n,!0),this.processDataItemRemove(e,n),this.processDataChanges(e,n,!0),this.processDataChanges(e,n,!1),this.processLabelChanges(e,n,!0),this.processShapeAdded(e,n)),i.a},e.prototype.setRoleBoundsTaskId=function(e,t){var n=Object(o.filter)(e,(function(e){return e.roleBound&&e.systemType!==a.x.Role&&e.label===t.label}));if(n.length>0)n.forEach((function(e){return e.roleId=t.id}));else{var r=Object(o.filter)(e,(function(e){return e.roleBound&&e.systemType===a.x.Role&&e.id!==t.id})),i=void 0;if(r.length>0){var s=Object(o.map)(r,(function(e){return e.label}));i=Object(o.filter)(e,(function(e){return e.roleBound&&e.systemType!==a.x.Role&&-1===s.indexOf(e.label)}))}else i=Object(o.filter)(e,(function(e){return e.roleBound&&e.systemType!==a.x.Role}));i&&i.length>0&&i.forEach((function(e){e.roleId=t.id}))}},e.prototype.processTitleChanges=function(t,n,r){var i=this,s=r?n.$set:n.$unset,c=function(n){e.regexText.lastIndex=0;var r=e.regexText.exec(n);if(!r)return"continue";var s=r[1],c=r[2],l=t.shapes[s];if(!l)return"continue";var u=l.texts[c];if(!u||!u.primary||!u.plainText.length)return"continue";if(l.taskMap&&Object.keys(l.taskMap).length>0)return Object.values(l.taskMap).forEach((function(e){return i.taskManager.updateTaskTitle(e,u.plainText)})),"continue";if(l.dataSetId){var d=t.dataDefs[l.dataSetId];if(!d)return"continue";Object(o.filter)(d,(function(e){return e.systemType===a.x.Role})).forEach((function(e){var t=i.getTaskId(l,e);t&&i.taskManager.updateTaskTitle(t,u.plainText)}))}};for(var l in s)c(l)},e.prototype.processDataItemRemove=function(t,n){var r;if(n.$unset)for(var i in n.$unset){e.regexDataItem.lastIndex=0;var o=e.regexDataItem.exec(i);if(o){var s=o[1],c=o[2],l=t.shapes[s];if(l){var u=l.dataSetId,d=null===(r=t.__sakota__.getTarget())||void 0===r?void 0:r.dataDefs[u];if(d){var p=d[c];if(p&&p.roleBound)if(p.systemType===a.x.Role){var h=this.getTaskId(l,p);h&&this.removeTask(h,l,p.id)}else if(p.roleId&&!n.$unset["shapes."+s+".data."+p.roleId]){var f=d[p.roleId];f&&this.getTaskId(l,f)&&this.taskManager.updateTask(this.getTaskId(l,f),void 0,p.systemType)}}}}}},e.prototype.processLabelChanges=function(t,n,r){var i=r?n.$set:n.$unset,s=function(n){e.regexDataDefLabel.lastIndex=0;var r=e.regexDataDefLabel.exec(n);if(!r)return"continue";var i=r[1],s=r[2],c=t.dataDefs[i];if(!c)return"continue";var l=c[s];if(!l)return"continue";if(!l.roleBound)return"continue";var u=Object(o.filter)(c,(function(e){return e.systemType===a.x.Role&&e.id!==s&&e.label===l.label}));u&&u.length>0?l.roleId=u[0].id:delete l.roleId};for(var c in i)s(c)},e.prototype.processShapeAdded=function(t,n){var i=this,s=n.$set,c=function(n){var c=e.regexShapeAdded.exec(n);if(!c)return"continue";var l=s[n];if(!l.data)return"continue";var u=c[1],d=t.shapes[u];if(l.eData)return"continue";var p=t.getDataDef(u);Object.keys(d.data).forEach((function(e){var n=p[e];if(n&&n.roleBound){var s=n,c=d.data[s.id].value;if(s.systemType===a.x.Role&&i.hasRoleUsers(c)){var l=r.rb.taskId();i.addTask(l,s.id,t,d,Object(o.map)(c.people,(function(e){return{userId:e.id}})),p),l&&(i.setTaskId(d,s.id,l),i.setRoleBoundsTaskId(p,s))}}}))};for(var l in s)c(l)},e.prototype.processDataChanges=function(t,n,r){var i=r?n.$set:n.$unset,s=function(i){e.regexDataItemVal.lastIndex=0;var s=e.regexDataItemVal.exec(i);if(!s)return"continue";var l=s[1],u=s[2],d=t.shapes[l];if(d.isConnector())return"continue";var p=t.getDataDef(l),h=p[u];if(h&&h.roleBound){var f=t.getDataItem(l,u);if(f.systemType===a.x.Role)c.doTaskChanges(t,d,p,f,n,r);else if(f.roleId&&p[f.roleId]&&c.hasRoleUsers(d.data[f.roleId].value))c.doTaskChanges(t,d,p,f,n,r);else{var m=c.getRoleFields(p,d),g=void 0;if(m&&m.length)if(1===m.length)g=m[0].id;else{var b=Object(o.find)(m,(function(e){return e.label===f.label}));if(b)g=b.id;else{var v=Object(o.filter)(p,(function(e){return e.roleBound&&e.systemType===f.systemType}));v&&1===v.length&&(g=m[0].id)}}g&&(h.roleId=g,c.doTaskChanges(t,d,p,f,n,r))}}},c=this;for(var l in i)s(l)},e.prototype.getRoleFields=function(e,t){return Object(o.filter)(e,(function(e){return e.systemType===a.x.Role}))},e.prototype.doTaskChanges=function(e,t,n,i,s,c){var d=this,p=t.data[i.id].value;if(this.getTaskId(t,i)&&i.systemType===a.x.Role)if(c&&this.hasRoleUsers(p))this.taskLocator.getTask(this.getTaskId(t,i)).pipe(Object(l.a)(1),Object(u.a)((function(e){d.taskManager.updateTask(d.getTaskId(t,i),p,i.systemType)}))).subscribe();else{var h=this.getTaskId(t,i);this.removeTask(h,t,i.id),delete t.taskMap[i.id]}else if(i.roleId){var f=n[i.roleId];f&&this.getTaskId(t,f)&&this.taskManager.updateTask(this.getTaskId(t,f),p,i.systemType)}else if(i.systemType===a.x.Role&&this.hasRoleUsers(p)&&c){h=r.rb.taskId();this.addTask(h,i.id,e,t,Object(o.map)(p.people,(function(e){return{userId:e.id}})),n),h&&(this.setTaskId(t,i.id,h),this.setRoleBoundsTaskId(n,i))}},e.prototype.addTask=function(e,t,n,r,i,a){var o=this.taskManager.addTask(e,t,n,r,i,a);return this.setTaskId(r,t,e),o.id},e.prototype.removeTask=function(e,t,n){t.taskMap&&(delete t.taskMap[n],0===Object.keys(t.taskMap).length&&delete t.taskMap),this.taskManager.removeTask(e)},e.prototype.hasRoleUsers=function(e){return!!(e&&e.people&&e.people.length>0)},e.prototype.setTaskId=function(e,t,n){e.taskMap||(e.taskMap={}),e.taskMap[t]=n},e.prototype.getTaskId=function(e,t){return t.taskId&&(this.setTaskId(e,t.id,t.taskId),delete t.taskId),e.taskMap&&e.taskMap[t.id]},e.regexDataItemVal=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.regexDataDefLabel=/dataDefs\.([^\.]+)\.([^\.]+)\.label/g,e.regexDataItem=/shapes\.([^\.]+)\.data\.([^\.]+)$/g,e.regexShapeAdded=/shapes\.([^\.]+)$/,e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)(d.qc(r.Hb),d.qc(r.B),d.qc(s.a),d.qc(c.a))},e.\u0275prov=d.cc({token:e,factory:e.\u0275fac}),e}()},B1sc:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=n("xEF+"),s=n("g5wR").states,c=function(){function e(t,n,r){(0,i.default)(this,e),this._grammar=t,this._state="expectOperand",this._tree=null,this._exprStr=n||"",this._relative=!1,this._stopMap=r||{}}return(0,a.default)(e,[{key:"addToken",value:function(e){if("complete"===this._state)throw new Error("Cannot add a new token to a completed Parser");var t=s[this._state],n=this._exprStr;if(this._exprStr+=e.raw,t.subHandler){this._subParser||this._startSubExpression(n);var r=this._subParser.addToken(e);if(r){if(this._endSubExpression(),this._parentStop)return r;this._state=r}}else{if(!t.tokenTypes[e.type]){if(this._stopMap[e.type])return this._stopMap[e.type];throw new Error("Token ".concat(e.raw," (").concat(e.type,") unexpected in expression: ").concat(this._exprStr))}var i=t.tokenTypes[e.type],a=o[e.type];i.handler&&(a=i.handler),a&&a.call(this,e),i.toState&&(this._state=i.toState)}return!1}},{key:"addTokens",value:function(e){e.forEach(this.addToken,this)}},{key:"complete",value:function(){if(this._cursor&&!s[this._state].completable)throw new Error("Unexpected end of expression: ".concat(this._exprStr));return this._subParser&&this._endSubExpression(),this._state="complete",this._cursor?this._tree:null}},{key:"isRelative",value:function(){return this._relative}},{key:"_endSubExpression",value:function(){s[this._state].subHandler.call(this,this._subParser.complete()),this._subParser=null}},{key:"_placeAtCursor",value:function(e){this._cursor?(this._cursor.right=e,this._setParent(e,this._cursor)):this._tree=e,this._cursor=e}},{key:"_placeBeforeCursor",value:function(e){this._cursor=this._cursor._parent,this._placeAtCursor(e)}},{key:"_setParent",value:function(e,t){Object.defineProperty(e,"_parent",{value:t,writable:!0})}},{key:"_startSubExpression",value:function(t){var n=s[this._state].endStates;n||(this._parentStop=!0,n=this._stopMap),this._subParser=new e(this._grammar,t,n)}}]),e}();e.exports=c},B82N:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("0jHB"),i=n("XWWj"),a=n("J+dc"),o=n("xVbo"),s=n("TLy2"),c=n("YtkY"),l=(n("yZNT"),n("C05f")),u=n("GoAz"),d=n("nsO7"),p=n("EM62"),h=function(){function e(e){this.definitionLocator=e,this.allDefs=new l.a(null),this.type="shape",this.loadAllDefs()}return e.prototype.search=function(e,t){return this.allDefs.pipe(Object(a.a)(1),Object(o.a)((function(e){return!!e})),Object(s.a)((function(n){return Object(u.a)(Object(i.goAsync)(e,n,t))})),Object(c.a)((function(e){var t=[];return e.forEach((function(e){t.push({id:e.obj.defId,version:e.obj.version,type:"shape",score:e.score})})),t})))},e.prototype.loadAllDefs=function(){var e=this;this.definitionLocator.getDefs().pipe(Object(a.a)(1),Object(c.a)((function(e){return e.defs.filter((function(e){return("connector"!==e.type||"edata"!==e.type)&&(!e.hasOwnProperty("isSearchable")||e.isSearchable)})).map((function(e){var t=Object(d.clone)(e);return t.tags="string"==typeof e.tags?e.tags:(e.tags||[]).join(" "),t.description=e.description||"",t}))}))).subscribe((function(t){e.allDefs.next(t)}))},e.\u0275fac=function(t){return new(t||e)(p.qc(r.a))},e.\u0275prov=p.cc({token:e,factory:e.\u0275fac}),e}()},"BL7/":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("Jzy8"),i=n("W9bu"),a=n("X0jn"),o=(n("NNJu"),n("5xGT")),s=n("C05f"),c=n("g6G6"),l=n("6Oco"),u=n("KTx3"),d=n("TLy2"),p=n("8j5Y"),h=n("xVbo"),f=n("c7W3"),m=n("r3/A"),g=n("w1VY"),b=n("EM62"),v=n("2kYt"),_=n("Wrqg"),y=n("s2Ay"),O=["textInput"],x=["container"];function E(e,t){if(1&e){var n=b.nc();b.mc(0,"div",13),b.mc(1,"a",14),b.uc("blur",(function(){return b.Qc(n),b.yc(2).focusTextEditor()}))("click",(function(e){return b.Qc(n),b.yc(2).navigate(e)})),b.fd(2),b.lc(),b.lc()}if(2&e){var r=t.ngIf;b.Sb(1),b.Ec("href",r,b.Tc),b.Sb(1),b.gd(r)}}function k(e,t){if(1&e){var n=b.nc();b.mc(0,"div",6),b.dd(1,E,3,2,"div",7),b.zc(2,"async"),b.mc(3,"button",8),b.uc("click",(function(){return b.Qc(n),b.yc().onEditBtnClick()})),b.xc(),b.mc(4,"svg",9),b.hc(5,"use",10),b.lc(),b.lc(),b.wc(),b.mc(6,"button",11),b.uc("click",(function(){return b.Qc(n),b.yc().removeLink()})),b.xc(),b.mc(7,"svg",9),b.hc(8,"use",12),b.lc(),b.lc(),b.lc()}if(2&e){var r=b.yc();b.Sb(1),b.Dc("ngIf",b.Ac(2,1,r.hyperlinkValue))}}function C(e,t){if(1&e){var n=b.nc();b.mc(0,"div"),b.mc(1,"text-input",15,16),b.uc("updateText",(function(){return b.Qc(n),b.yc().handleInputChange()}))("keydown",(function(e){return b.Qc(n),b.yc().handleKeydown(e)}))("blur",(function(){return b.Qc(n),b.yc().focusTextEditor()})),b.zc(3,"translate"),b.zc(4,"async"),b.lc(),b.lc()}if(2&e){var r=b.yc();b.Sb(1),b.Ec("placeholder",b.Ac(3,2,"LABELS.ADD_LINK_AND_ENTER")),b.Dc("value",b.Ac(4,4,r.hyperlinkValue))}}function w(e,t){1&e&&(b.mc(0,"div",17),b.fd(1,"LABELS.PRESS_ESCAPE_TO_CANCEL"),b.lc())}var S=function(){function e(e,t,n,r){this.linkService=e,this.commandService=t,this.coordinate=n,this.state=r,this.toolbarGap=2,this.subs=[],this.editorState=new s.a("view"),this.hyperlinkValue=new s.a("")}return Object.defineProperty(e.prototype,"containerElement",{get:function(){return this.container.nativeElement},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.containerElement.style.display="none",this.subs.push(this.state.changes("HyperlinkEditState").pipe(Object(d.a)((function(t){return t.open?(e.stateContext=t.stateContext,e.editorState.next(t.state||"view"),e.hyperlinkValue.next(t.link),e.containerElement.style.display="block",e.textInput&&e.textInput.focus(),e.position(),Object(c.a)(e.onEscape().pipe(Object(p.a)((function(){return e.closeEditor()}))),e.listenToViewportChanges().pipe(Object(p.a)((function(){return e.position()}))))):(e.containerElement.style.display="none",Object(l.b)())}))).subscribe())},e.prototype.onEditBtnClick=function(){o.Jb.track("hyperlinkEditor.edit.click"),this.editorState.next("edit")},e.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.handleKeydown=function(e){e.keyCode===a.k.Enter?(e.preventDefault(),this.applyLink()):e.keyCode===a.k.Escape&&this.closeEditor()},e.prototype.handleInputChange=function(){this.containerElement.classList.contains("invalid-url")&&this.containerElement.classList.remove("invalid-url")},e.prototype.focusTextEditor=function(){this.commandService.dispatch(f.a.applyTextEditorStyles,{styles:{},takeFocus:!0,stateContext:this.stateContext})},e.prototype.navigate=function(e){e.preventDefault(),this.linkService.navigate(r.I.fromUrl(this.hyperlinkValue.value))},e.prototype.position=function(){var e=this.state.get("HyperlinkEditState").stateContext,t=this.state.get("TextEditorState-"+e),n=this.containerElement.getBoundingClientRect();if(t.selection){var r=this.coordinate.width(t.selection.width||1),i=this.coordinate.x(t.selection.x),a=this.coordinate.y(t.selection.y+t.selection.height+this.toolbarGap),o=t.editorBounds.x+(i+r/2)-n.width/2,s=t.editorBounds.y+(a+this.toolbarGap);this.containerElement.style.top=s+"px",this.containerElement.style.left=o+"px"}},e.prototype.onEscape=function(){return Object(u.a)(window,"keydown").pipe(Object(h.a)((function(e){return e.keyCode===a.k.Escape})))},e.prototype.closeEditor=function(){this.hyperlinkValue.next(""),this.commandService.dispatch(f.a.openHyperlinkEditor,{open:!1}),this.focusTextEditor()},e.prototype.removeLink=function(){o.Jb.track("hyperlinkEditor.unlink.click"),this.commandService.dispatch(f.a.applyTextEditorStyles,{styles:{link:null,color:a.b.color,underline:!1},stateContext:this.stateContext}),this.closeEditor()},e.prototype.applyLink=function(){if(this.textInput&&this.textInput.value){var e=encodeURI(this.textInput.value);if(m(e)||(e="https://"+e),!m(e))return void this.containerElement.classList.add("invalid-url");this.commandService.dispatch(f.a.applyTextEditorStyles,{styles:{link:e,color:"rgb(94, 156, 211)",underline:!0},stateContext:this.stateContext})}this.closeEditor()},e.prototype.listenToViewportChanges=function(){return Object(c.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel"))},e.\u0275fac=function(t){return new(t||e)(b.gc(i.a),b.gc(o.B),b.gc(g.a),b.gc(o.Hb))},e.\u0275cmp=b.ac({type:e,selectors:[["hyperlink-editor"]],viewQuery:function(e,t){var n;(1&e&&(b.kd(O,!0),b.kd(x,!0)),2&e)&&(b.Mc(n=b.vc())&&(t.textInput=n.first),b.Mc(n=b.vc())&&(t.container=n.first))},decls:6,vars:3,consts:[["data-keep-text-open","true",1,"hyperlink-editor-container"],["container",""],[1,"hyperlink-editor-inner-container"],["class","fx-height-inherit fx-center-vertical",4,"ngIf"],[4,"ngIf"],["class","hyperlink-escape-lable","translate","",4,"ngIf"],[1,"fx-height-inherit","fx-center-vertical"],["class","fx-flex-expand fx-ellipsis",4,"ngIf"],[1,"hyperlink-edit-btn","nu-btn-small","nu-btn-icon","lib-browser-close-btn","fx-no-padding",3,"click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-edit"],[1,"hyperlink-remove-btn","nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-trash-thin"],[1,"fx-flex-expand","fx-ellipsis"],["target","_blank",1,"hyperlink-label","fx-ellipsis","primary",3,"href","blur","click"],["autoFocus","true","emitForInputChange","true",1,"hyperlink-input",3,"placeholder","value","updateText","keydown","blur"],["textInput",""],["translate","",1,"hyperlink-escape-lable"]],template:function(e,t){1&e&&(b.mc(0,"div",0,1),b.mc(2,"div",2),b.dd(3,k,9,3,"div",3),b.dd(4,C,5,6,"div",4),b.lc(),b.dd(5,w,2,0,"div",5),b.lc()),2&e&&(b.Sb(3),b.Dc("ngIf","view"===t.editorState.value),b.Sb(1),b.Dc("ngIf","edit"===t.editorState.value),b.Sb(1),b.Dc("ngIf","edit"===t.editorState.value))},directives:[v.t,_.a,y.a],pipes:[v.b,y.d],styles:[".hyperlink-editor-inner-container[_ngcontent-%COMP%]{position:relative;width:320px;height:50px;margin:8px;background:#fff;border:1px solid #dcdcdc;box-sizing:border-box;border-radius:3px;z-index:2}.hyperlink-editor-container[_ngcontent-%COMP%]{position:absolute}.hyperlink-label[_ngcontent-%COMP%]{padding:15px 45px 15px 15px}.hyperlink-input[_ngcontent-%COMP%]{float:left;width:302px;margin:8px}.hyperlink-input[_ngcontent-%COMP%]  input{margin:0!important}.hyperlink-editor-container.invalid-url[_ngcontent-%COMP%]   .hyperlink-input[_ngcontent-%COMP%]  input{border:1px solid #ffbaba}.hyperlink-remove-btn[_ngcontent-%COMP%]{padding-left:0}.hyperlink-escape-lable[_ngcontent-%COMP%]{text-align:center;font-size:12px;line-height:15px}"],changeDetection:0}),e}()},BQCR:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5xGT"),i=n("SBw3"),a=n("ROBh"),o=n("QoSw"),s=n("YtkY"),c=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return t.data.forEach((function(e){e.itemIcon=e.buttonIcon})),Object(a.a)({value:t.data,validation:n.data.validation})},e.prototype.isEnabled=function(e){var t=this.state.get("EditingText");return t.textId?this.ll.forCurrent(!0).getShapeOnce(t.shapeId).pipe(Object(s.a)((function(e){var n=e.texts[t.textId];return!(!n||!n.isAlignable())}))):Object(a.a)(!1)},e.prototype.getApplyData=function(e,t){return Object(a.a)({styles:{align:t.value},takeFocus:t.takeFocus,stateContext:t.stateContext})},e.\u0275fac=function(t){return new(t||e)(c.qc(o.a),c.qc(r.Hb),c.qc(i.a))},e.\u0275prov=c.cc({token:e,factory:e.\u0275fac}),e}()},BQpn:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=n("nsO7"),a=n("ROBh"),o=n("P4Xx"),s=n("fB16"),c=n("5xGT"),l=n("EM62"),u=n("SBw3"),d=n("QoSw"),p=n("TLy2"),h=n("YtkY"),f=function(e){function t(t,n,r,i,a){var o=e.call(this,n,r,a)||this;return o.state=t,o.ll=i,o}return Object(r.e)(t,e),t.prototype.getContextMenuItemsId=function(e){var t=this;return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(p.a)((function(n){var r=t.state.get("Selected");if("canvasRightClick"===e.type)return Object(a.a)(n.getContextMenuItems());var i=e.relatedShape.name;return r.includes(i)?t.getShapeMenuItems(r):Object(a.a)(n.getContextMenuItems())})))},t.prototype.getShapeMenuItems=function(e){var t,n=this;return 1===e.length?t=this.getMenuItemsForSingleShape(e[0]):e.length>1&&(t=this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(p.a)((function(t){return t.sameType(e)?n.getMenuItemsForMultiShapeSameType(e):n.getMenuItemsForMultiShape(e)})))),t.pipe(Object(p.a)((function(e){var t;return t=e.map((function(e){return n.isFeatureEnabled(e)})),o.a.apply(void 0,Object(r.j)(t)).pipe(Object(h.a)((function(t){return e.filter((function(e,n){return t[n]}))})))})))},t.prototype.isFeatureEnabled=function(e){var t=this.featureList.getFeature(e);if(t.transformer){var n=this.injector.get(t.transformer);if(n.isEnabled)return n.isEnabled(t.id)}return Object(a.a)(!0)},t.prototype.getMenuItemsForSingleShape=function(e){return this.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(h.a)((function(e){return e.getContextMenuItems()})))},t.prototype.getMenuItemsForMultiShapeSameType=function(e){var t=this;return o.a.apply(void 0,Object(r.j)(e.map((function(e){return t.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(h.a)((function(e){return e.getContextMenuForSameType()})))})))).pipe(Object(h.a)((function(e){return e.reduce((function(e,t){return Object(i.intersection)(e,t)}))})))},t.prototype.getMenuItemsForMultiShape=function(e){var t=this;return o.a.apply(void 0,Object(r.j)(e.map((function(e){return t.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(h.a)((function(e){return e.getContextMenuForMultipleTypes()})))})))).pipe(Object(h.a)((function(e){return e.reduce((function(e,t){return Object(i.intersection)(e,t)}))})))},t.\u0275fac=function(e){return new(e||t)(l.qc(c.Hb),l.qc(l.C),l.qc(c.B),l.qc(d.a),l.qc(u.a))},t.\u0275prov=l.cc({token:t,factory:t.\u0275fac}),t}(s.a)},C3qL:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("ROBh"),a=n("nsO7"),o=n("5xGT"),s=n("EM62"),c=function(){function e(e){this.state=e,this.fillColorLabel="Fill Color ",this.lineColorLabel="Line Color "}return e.prototype.getFeatureData=function(e,t){var n=this.getDataKeys(t),a=[];return n.forEach((function(e){var n=t[e];n.locked||a.push(Object(r.a)(Object(r.a)({},n),{id:e}))})),a.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:0})),Object(i.a)(this.setLabels(a))},e.prototype.getApplyData=function(e,t){var n={},r=Object(a.cloneDeep)(t.item),o=r.id;return delete r.id,r.style.fillColor&&(r.style.fillColor=t.change.value),r.style.lineColor&&(r.style.lineColor=t.change.value),n[o]=r,Object(i.a)({styleDefinition:n})},e.prototype.getDataKeys=function(e){var t=Object.keys(e),n=this.state.get("InnerShapeSelection"),r=Object(a.flatten)(Object.keys(n).map((function(e){return n[e]})));if(r.length>0){if((t=Object(a.intersection)(t,r)).length!==r.length&&t.push("commonStyles"),t.length>1){var i=t.every((function(t,n,r){return 0===n||e[t].style.fillColor===e[r[n-1]].style.fillColor})),o=t.every((function(t,n,r){return 0===n||e[t].style.lineColor===e[r[n-1]].style.lineColor}));i&&o?t=[t[0]]:i?(e[t[0]].label="diffLine",t=[t[0]]):o?(e[t[0]].label="diffFill",t=[t[0]]):(e[t[0]].label="diffBoth",t=[t[0]])}}else{if(Object.keys(e).find((function(e){return e.includes("commonStyles")})))return Object.keys(e).filter((function(e){return e.includes("commonStyles")}));t=Object.keys(e)}return t},e.prototype.setLabels=function(e){var t=this,n=1,i=1,a=[];return e.forEach((function(o){if(o.label)if(o.label.includes("diff")){var s=o.label.includes("diffLine")||o.label.includes("diffBoth"),c=o.label.includes("diffFill")||o.label.includes("diffBoth");a.push(Object(r.a)(Object(r.a)({},o),{id:o.id+(c?"difffill":"fill"),style:{fillColor:o.style.fillColor},label:t.fillColorLabel}),Object(r.a)(Object(r.a)({},o),{id:o.id+(s?"diffline":"line"),style:{lineColor:o.style.lineColor},label:t.lineColorLabel})),e=e.filter((function(e){return e!==o}))}else o.label.startsWith(t.fillColorLabel+n)&&(n+=1),o.label.startsWith(t.lineColorLabel+i)&&(i+=1);else if(o.style.fillColor&&o.style.lineColor){var l=1===e.length&&0===a.length;a.push(Object(r.a)(Object(r.a)({},o),{id:o.id+"fill",style:{fillColor:o.style.fillColor},label:t.fillColorLabel+(l?"":n)}),Object(r.a)(Object(r.a)({},o),{id:o.id+"line",style:{lineColor:o.style.lineColor},label:t.lineColorLabel+(l?"":i)})),n+=1,i+=1,e=e.filter((function(e){return e!==o}))}else o.style.fillColor?(o.label=t.fillColorLabel+n,n+=1):o.style.lineColor&&(o.label=t.lineColorLabel+i,i+=1)})),e.push.apply(e,Object(r.j)(a)),e},e.\u0275fac=function(t){return new(t||e)(s.qc(o.Hb))},e.\u0275prov=s.cc({token:e,factory:e.\u0275fac}),e}()},CNgt:function(e,t,n){"use strict";var r,i;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),function(e){e.CATEGORY="category",e.PROJECT="project"}(r||(r={})),function(e){e.FULL_SCREEN="full_screen",e.SIDE_SCREEN="side_screen",e.NO_SCREEN="no_screen"}(i||(i={}))},CdCz:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("5vYS"),a=n("5xGT"),o=n("19Zn"),s=n("nsO7"),c=n("6Oco"),l=n("EM62"),u=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ConnectorLookupValueBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){if(t!==a.A.EXECUTE)return c.a;var n=e.__sakota__.getChanges();if(!Object(s.isEmpty)(n)){var r=e.__sakota__.getTarget(),l=Object(o.L)(n);if(l.shapes)for(var u in l.shapes){if(!e.shapes[u]&&r.shapes[u]instanceof i.a)(p=r.shapes[u]).defId===o.s.defId&&this.removeLookupValue(p,e);else if(e.shapes[u]instanceof i.a){var d=l.shapes[u];if(d.$set){var p=e.shapes[u];if(d.$set.defId){var h=p.__sakota__.getTarget(),f=p.defId,m=h.defId;f===o.s.defId?this.addLookupValue(p,e):m===o.s.defId&&this.removeLookupValue(h,e)}else if(d.$set.handshake&&p.defId===o.s.defId){h=p.__sakota__.getTarget();this.addLookupValue(p,e),this.removeLookupValue(h,e)}}}}}return c.a},e.prototype.addLookupValue=function(e,t){var n=e.getFromEndpoint(t).shape,i=e.getToEndpoint(t).shape,a=n.data.hasOwnProperty(e.handshake[0])?n:i,o=(a===n?i:n).entityId,s=a.data[e.handshake[0]].value;-1===s.indexOf(o)&&(t.shapes[a.id].data[e.handshake[0]].value=Object(r.j)(s,[o]))},e.prototype.removeLookupValue=function(e,t){var n=e.getFromEndpoint(t).shape,r=e.getToEndpoint(t).shape,i=n.data.hasOwnProperty(e.handshake[0])?n:r;if(t.shapes[i.id]){var a=(i===n?r:n).entityId,o=i.data[e.handshake[0]].value,s=o.indexOf(a);if(s>-1){var c=o.slice();c.splice(s,1),t.shapes[i.id].data[e.handshake[0]].value=c}}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.cc({token:e,factory:e.\u0275fac}),e}()},CrNP:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("D57K"),i=n("5xGT"),a=n("X0jn"),o=n("nsO7"),s=n("C05f"),c=n("ROBh"),l=n("HM3f"),u=n("xVbo"),d=n("YtkY"),p=n("Ohay"),h=n("TLy2"),f=n("8j5Y"),m=n("QoSw"),g=n("diDk"),b=n("c7W3"),v=n("iim9"),_=n("EM62"),y=function(){function e(e,t,n,r){this.state=e,this.dll=t,this.command=n,this.ell=r,this.defaultRecentStickerList=[{weight:1,defId:"creately.material-icons.thumb_up_twotone_2"},{weight:1,defId:"creately.material-icons.favorite_twotone_2"},{weight:1,defId:"creately.material-icons.star_twotone_2"},{weight:1,defId:"creately.material-icons.help_twotone_2"},{weight:1,defId:"creately.material-icons.lightbulb_outline_twotone_2"},{weight:1,defId:"creately.material-icons.done_twotone_2"}],this.rowListLimit=6,this.subs=[],this.shapeListFromDiagram=[],this.recentShapeStream=new s.a([]),this.init()}return e.prototype.getShapes=function(){return this.recentShapeStream},e.prototype.getStickers=function(){return Object(c.a)(this.defaultRecentStickerList)},e.prototype.getDatabaseShapes=function(){var e=this;return this.state.changes("CurrentLibraries").pipe(Object(u.a)((function(e){return!!e})),Object(d.a)((function(e){return e.filter((function(e){return e.id.includes("custom-database-")}))})),Object(p.a)((function(t,n){return e.compareLibs(t,n)})),Object(h.a)((function(t){var n=[];return t.forEach((function(t){var i=t.id;if(i.includes(v.b)){var a=i.split(v.b)[1];n.push(e.ell.getEData(a).pipe(Object(h.a)((function(e){return e.getEDataModel()})),Object(p.a)((function(t,n){return e.comparedEntityIds(t.getActiveCustomEntityDefIds(),n.getActiveCustomEntityDefIds())})),Object(d.a)((function(t){return t.getActiveCustomEntityDefs().map((function(t){var n,i,o=t.defaultShape||{defId:"creately.basic.rectangle",version:3};return{id:t.id,name:t.name,data:e.getShapeDataItems(t.dataItems),defId:o.defId,drawCode:o.drawCode,version:o.version,entityDefId:t.id,style:null===(i=null==o?void 0:o.style)||void 0===i?void 0:i.shape,typeStyle:Object(r.a)(Object(r.a)({},o.style),{defaultShapeContext:o.defaultShapeContext}),textStyle:o.texts,shapeContext:o.defaultShapeContext,eData:(n={},n[a]=null,n)}}))}))))}})),Object(l.b)([n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return[].concat.apply([],Object(r.j)(e))}])})))},e.prototype.init=function(){var e=this,t=this.state.get("CurrentUser");this.subs.push(this.dll.forCurrentObserver(!1).pipe(Object(d.a)((function(e){return e.getDiagramOnce()})),Object(h.a)((function(n){return n.pipe(Object(d.a)((function(e){return e.getRecentShapes(t)})),Object(d.a)((function(t){return e.prepareRecentShapeList(t)})))}))).subscribe(),this.state.changes("LastAddedShape").pipe(Object(u.a)((function(t){return e.isDefIdInShapeGroup(t)})),Object(f.a)((function(t){return e.addShapeToRecent(t)}))).subscribe())},e.prototype.isDefIdInShapeGroup=function(e){if(e){var t=e.split(".")[1];if(e.startsWith("creately.icons")||e.startsWith("creately.material-icons"))return!1;if(e.startsWith("creately.basic.frame"))return!1;if(t.includes("aws")||t.includes("archimate")||t.includes("gcp")||t.includes("azure")||t.includes("kubernetes"))return!1}return!0},e.prototype.addShapeToRecent=function(e){if(e){var t=Object(o.findIndex)(this.shapeListFromDiagram,(function(t){return t.defId===e}));-1===t?this.shapeListFromDiagram.push({defId:e,weight:1,added:Date.now()}):this.shapeListFromDiagram[t].weight++;var n=Object(o.orderBy)(this.shapeListFromDiagram,"weight","desc").slice(0,this.rowListLimit),i=Object(o.orderBy)(this.shapeListFromDiagram,"added","desc").slice(0,2*this.rowListLimit).filter((function(e){return!n.includes(e)})).slice(0,this.rowListLimit);this.recentShapeStream.next(Object(r.j)(n,i)),this.updateRecentShapesToDiagram()}},e.prototype.updateRecentShapesToDiagram=function(){this.shapeListFromDiagram.length&&this.command.dispatch(b.a.updateRecentShapes,{shapes:this.shapeListFromDiagram})},e.prototype.prepareRecentShapeList=function(e){if(e.length){this.shapeListFromDiagram=e;var t=Object(o.orderBy)(e,"weight","desc").slice(0,this.rowListLimit),n=Object(o.orderBy)(e,"added","desc").slice(0,2*this.rowListLimit).filter((function(e){return!t.includes(e)})).slice(0,this.rowListLimit);this.recentShapeStream.next(Object(r.j)(t,n))}},e.prototype.comparedEntityIds=function(e,t){return!e&&!t||!(!e||!t||e.length!==t.length)&&(e.every((function(e){return t.includes(e)}))&&t.every((function(t){return e.includes(t)})))},e.prototype.compareLibs=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!==t.length)return!1;var n=t.map((function(e){return e.id}));if(e.every((function(e){return n.includes(e.id)}))){var r=e.map((function(e){return e.id}));return n.every((function(e){return r.includes(e)}))}return!1},e.prototype.getShapeDataItems=function(e){var t=Object.assign({},e);for(var n in t){var i=t[n];if(i.type===a.c.LOOKUP)t[n]=Object(r.a)(Object(r.a)({},i),{value:[]});else if(i.systemType===a.x.Role){i.taskId;var o=Object(r.i)(i,["taskId"]);t[n]=Object(r.a)(Object(r.a)({},o),{value:{source:{id:"collabs",name:"Role"},people:[]}})}else i.roleBound&&(t[n]=Object(r.a)(Object(r.a)({},i),{value:""}))}return t},e.\u0275fac=function(t){return new(t||e)(_.qc(i.Hb),_.qc(m.a),_.qc(i.B),_.qc(g.a))},e.\u0275prov=_.cc({token:e,factory:e.\u0275fac}),e}()},Cupj:function(e,t,n){},Di8k:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),l=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(n){var i,a,o=t.state.get("Selected"),s=!1;try{for(var c=Object(r.k)(o),l=c.next();!l.done;l=c.next()){var u=l.value;if(!n.shapes[u].showBumps){s=!1;break}s=!0}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return"showConnectorBumps"===e?!s:"hideConnectorBumps"===e&&s})))},e.prototype.getFeatureData=function(e,t){void 0===t&&(t={});var n=void 0===t.selection||t.selection;return"showConnectorBumps"===e?Object(o.a)({showLineBumps:!0,selection:n}):Object(o.a)({showLineBumps:!1,selection:n})},e.prototype.getApplyData=function(e,t){return Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(l.qc(s.a),l.qc(a.Hb),l.qc(i.a))},e.\u0275prov=l.cc({token:e,factory:e.\u0275fac}),e}()},Dnwm:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("X0jn"),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(n!==i.t.Connector)throw new Error("ConnectorDisplayView cannot be created with "+n+" shape type.");return r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"isShapeView",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnectorView",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getCursor=function(e){return{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t}(n("deqJ").a),o=n("5xGT"),s=n("19Zn"),c=function(e){function t(t){return e.call(this,t)||this}return Object(r.e)(t,e),t.prototype.update=function(t,n,r){if(e.prototype.update.call(this,t,n),r){var i=void 0;i=void 0!==t.width?new o.ub(0,0,t.width,t.height):this.getTextBounds(t.value),this.position(r,i),this.updateHitArea(t,i)}this.updateViewCache(t,n)},t.prototype.position=function(e,t){this.x=e.x-t.width/2,this.y=e.y-t.height/2},t}(n("wOpJ").a),l=n("h1tj"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textMaskPadding=3,t.minLineThickness=20,t}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeView",{get:function(){return this.shape},set:function(e){this.shape=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitArea",{get:function(){if(this._hitArea)return this._hitArea.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this.shape.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskPadding",{get:function(){return 250},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){this.container=new a(this.id,this.model.type),this.shape=new l.Shape,this.container.convertToCursorDrawable(this.shape),this.shape.name=this.id,this._textMask=new l.Shape,this.shape.mask=this._textMask,this.container.addChild(this.shape)},t.prototype.beginDraw=function(){this.beginDrawHitArea(),this.updateTextsMask(),e.prototype.beginDraw.call(this)},t.prototype.beginDrawHitArea=function(){this._hitArea||(this._hitArea=new l.Shape,this.shape.hitArea=this._hitArea),this.hitArea.clear(),this.hitArea.setStrokeStyle(this.minLineThickness,"round").beginStroke("#F00")},t.prototype.endDraw=function(){e.prototype.endDraw.call(this),this.hitArea&&this.hitArea.endStroke()},t.prototype.addText=function(e){var t=new c(e);this.container.addChild(t),this._texts.push(t)},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.updateTextsMask=function(){var e=this;if(this._texts){this._textMask.graphics.clear(),this._textMask.graphics.beginFill("#F00"),this._texts.forEach((function(t){var n=e.model.texts[t.name],r=new o.ub(0,0,n.width,n.height);if(0!==r.width&&0!==r.height&&n.plainText){var i=s.H.getRectangleOnConnector(e.model,n,new o.ub(r.x,r.y,r.width,r.height)).pad(e.textMaskPadding);e.drawRect(e._textMask.graphics,i.x,i.y,i.width,i.height)}}));var t=this.model.bounds.pad(this.maskPadding);this.drawRect(this._textMask.graphics,t.x+t.width,t.y,-t.width,t.height),this._textMask.graphics.endFill()}},t.prototype.drawRect=function(e,t,n,r,i){e.moveTo(t,n),e.lineTo(t+r,n),e.lineTo(t+r,n+i),e.lineTo(t,n+i),e.lineTo(t,n)},t}(s.f)},Ei0d:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("YSjj"),i=n("nsO7"),a=n("1OKj"),o=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new a.Jexl,this._instance.addFunctions(Object(i.pickBy)(r,(function(e){return"function"==typeof e}))),this._instance.addTransform("DATE",(function(e){return e?new Date(e):null})),this._instance.addTransform("DATE_ARRAY",(function(e){if(!Array.isArray(e))throw new Error("Input is not an array");return e.map((function(e){return e?new Date(e):null}))})),this._instance.addTransform("BOOL_ARRAY",(function(e){if(!Array.isArray(e))throw new Error("Input is not an array");return e.map((function(e){return Boolean(e)}))})),this._instance.addTransform("TAGS",(function(e,t){return Array.isArray(e)?e.map((function(e){return e[t]})):[]})),this._instance.addFunction("CONTAINS",(function(e,t){return e.includes(t)}))),this._instance},enumerable:!1,configurable:!0}),e.evaluate=function(e,t){return this.instance.evalSync(e,t)},e._instance=null,e}()},FeJI:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("XVEb"),a=n("0KrK"),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},Fuvo:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("D57K"),i=function(e){function t(n,r){void 0===r&&(r=[]);var i=e.call(this)||this;return Object.setPrototypeOf(i,t.prototype),i.message=n,i.name="CSVImportValidationError",i.errors=r,i}return Object(r.e)(t,e),t}(Error)},Fvkh:function(e,t,n){"use strict";t.__esModule=!0;var r=n("XVEb"),i=void 0;try{}catch(s){}function a(e,t,n){if(r.isArray(e)){for(var i=[],a=0,o=e.length;a<o;a++)i.push(t.wrap(e[a],n));return i}return"boolean"==typeof e||"number"==typeof e?e+"":e}function o(e){this.srcFile=e,this.source=[]}i||((i=function(e,t,n,r){this.src="",r&&this.add(r)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),o.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each((function(t){e.add(["  ",t,"\n"])})),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new i(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof i?e:(e=a(e,this,t),new i(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];Object.keys(e).forEach((function(r){var i=a(e[r],t);"undefined"!==i&&n.push([t.quotedString(r),":",i])}));var r=this.generateList(n);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),n=0,r=e.length;n<r;n++)n&&t.add(","),t.add(a(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=o,e.exports=t.default},"G3/p":function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("D57K"),i=n("qlkn"),a=n("Wwqo"),o=n("5xGT"),s=n("X0jn"),c=n("19Zn"),l=n("nsO7"),u=n("47ST"),d=n("i9xl"),p=n("qZtG"),h=n("HsO4"),f=n("TLy2"),m=n("TaSY"),g=n("8j5Y"),b=n("7SLS"),v=n("nKku"),_=n("Xpu5"),y=n("B5wR"),O=n("/jjY"),x=n("Fuvo"),E=n("EM62"),k=function(){function e(e,t){this.commandSvc=e,this.cyclrSvc=t,this.batchSize=1e3}return e.prototype.importData=function(e,t){var n=this,i=t.eDefId,a=t.ignoreMappingErrors;if(!e.customEntityDefs.hasOwnProperty(i)){var s="Custom entity definition not found. defId: '"+i+"'";return Object(u.a)(new x.a(s))}var c=e.customEntityDefs[i];return Object(h.a)(this.getEntities(c,t)).pipe(Object(f.a)((function(t){var i=t.entities,s=t.errors;if(!a&&s.length>0)return o.cb.warning("aborting the import. validation errors: ",s),Object(u.a)(new x.a("mappings error",s));if(0===i.length)return o.cb.warning("aborting the import. no data to import"),Object(u.a)(new x.a("no data to import",s));o.cb.info("Importing entities...");var h=Object(l.chunk)(i,n.batchSize).map((function(t){return Object(d.a)((function(){return n.commandSvc.dispatch(_.a.importEntities,e.id,{entities:t,entityDef:c})}))}));return p.a.apply(void 0,Object(r.j)(h)).pipe(Object(m.a)(),Object(g.a)((function(){return o.cb.info("Finished importing entities")})),Object(b.a)({entities:i,errors:s}))})))},e.prototype.getRows=function(e,t,n,i){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(r){return[2,this.cyclrSvc.fetchPost({dataSource:a.a.GoogleSheets,method:"listRows",params:{startRow:e,endRow:t,spreadsheetId:n,sheetName:i}})]}))}))},e.prototype.getEntities=function(e,t){return Object(r.c)(this,void 0,void 0,(function(){var n,i,l,u,d,p,h,f,m,g,b,_,x,E,k,C,w,S,I,T,A,P,M,D,j,R,L,N;return Object(r.f)(this,(function(B){switch(B.label){case 0:n=t.mappings,i=t.eDefId,l=t.ignoreMappingErrors,u={},d="A".charCodeAt(0);try{for(p=Object(r.k)(n),h=p.next();!h.done;h=p.next()){if(f=h.value,m=f.columnIndex,j=f.dataItemId,(g=m.charCodeAt(0)-d)<0||g>25)throw new Error("invalid column. column index: "+m);if(!e.dataItems[j])throw new Error("Data item with id '"+j+"' not found");b=e.dataItems[j],_=b.type,x=b.options,u[j]={columnIndex:m,parse:v.a.getParser(e.dataItems[j].type),validator:c.j.instance.create(Object(r.a)(Object(r.a)({},e.dataItems[j]),{validationRules:{},typeParams:_===s.c.OPTION_LIST?{options:x}:{}}))}}}catch(U){L={error:U}}finally{try{h&&!h.done&&(N=p.return)&&N.call(p)}finally{if(L)throw L.error}}E=[],k=[],C=2,w=[],S=[],B.label=1;case 1:return[4,this.getRows(C,C+999,t.spreadsheetId,t.sheet.title)];case 2:S=B.sent(),w=w.concat(S),C+=1e3,B.label=3;case 3:if(1e3===S.length)return[3,1];B.label=4;case 4:for(I=0;I<w.length;I++){for(P in T=w[I],(A=new O.a(o.rb.entityId(),i)).defId=y.a.customEdataDefId,A.data={},A.shapes={},A.dataSource={domain:a.a.GoogleSheets,data:{dataSourceId:T[t.rowIdentifierField],rowNumber:T.RowNumber}},e.dataItems)A.data[P]=e.dataItems[P].default;for(j in M=null,D=!0,u)if(u[j].parse?A.data[j]=u[j].parse(T[u[j].columnIndex]):A.data[j]=T[u[j].columnIndex],R=u[j].validator,M=R.validate(A.data[j])){if(k.push({rowIndex:I,columnIndex:u[j].columnIndex,parsedValue:A.data[j],value:T[u[j].columnIndex],error:M}),!l)return[2,{entities:E,errors:k}];delete A.data[j]}else D=!1;D||E.push(A)}return[2,{entities:E,errors:k}]}}))}))},e.\u0275fac=function(t){return new(t||e)(E.qc(o.B),E.qc(i.a))},e.\u0275prov=E.cc({token:e,factory:e.\u0275fac}),e}()},GR9c:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,n){return(s=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,i(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,e)})(e)}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t),n.d(t,"JSONPath",(function(){return b}));var h=Object.prototype.hasOwnProperty;function f(e,t){return(e=e.slice()).push(t),e}function m(e,t){return(t=t.slice()).unshift(e),t}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=o(),function(){var e,r=i(t);if(n){var a=i(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return l(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,t.value=e,t.name="NewError",t}return s}(c(Error));function b(e,t,n,i,a){if(!(this instanceof b))try{return new b(e,t,n,i,a)}catch(l){if(!l.avoidNew)throw l;return l.value}"string"==typeof e&&(a=i,i=n,n=t,t=e,e=null);var o=e&&"object"===r(e);if(e=e||{},this.json=e.json||n,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!h.call(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||i||null,this.otherTypeCallback=e.otherTypeCallback||a||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){var s={path:o?e.path:t};o?"json"in e&&(s.json=e.json):s.json=n;var c=this.evaluate(s);if(!c||"object"!==r(c))throw new g(c);return c}}b.prototype.evaluate=function(e,t,n,i){var a=this,o=this.parent,s=this.parentProperty,c=this.flatten,l=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=i||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"===r(e)&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!h.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');t=e.json,c=h.call(e,"flatten")?e.flatten:c,this.currResultType=h.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=h.call(e,"sandbox")?e.sandbox:this.currSandbox,l=h.call(e,"wrap")?e.wrap:l,this.currPreventEval=h.call(e,"preventEval")?e.preventEval:this.currPreventEval,n=h.call(e,"callback")?e.callback:n,this.currOtherTypeCallback=h.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,o=h.call(e,"parent")?e.parent:o,s=h.call(e,"parentProperty")?e.parentProperty:s,e=e.path}if(o=o||null,s=s||null,Array.isArray(e)&&(e=b.toPathString(e)),(e||""===e)&&t){var u=b.toPathArray(e);"$"===u[0]&&u.length>1&&u.shift(),this._hasParentSelector=null;var d=this._trace(u,t,["$"],o,s,n).filter((function(e){return e&&!e.isParentSelector}));return d.length?l||1!==d.length||d[0].hasArrExpr?d.reduce((function(e,t){var n=a._getPreferredOutput(t);return c&&Array.isArray(n)?e=e.concat(n):e.push(n),e}),[]):this._getPreferredOutput(d[0]):l?[]:void 0}},b.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":var n=Array.isArray(e.path)?e.path:b.toPathArray(e.path);return e.pointer=b.toPointer(n),e.path="string"==typeof e.path?e.path:b.toPathString(e.path),e;case"value":case"parent":case"parentProperty":return e[t];case"path":return b.toPathString(e[t]);case"pointer":return b.toPointer(e.path);default:throw new TypeError("Unknown result type")}},b.prototype._handleCallback=function(e,t,n){if(t){var r=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:b.toPathString(e.path),t(r,n,e)}},b.prototype._trace=function(e,t,n,i,a,o,s,c){var l,u=this;if(!e.length)return l={path:n,value:t,parent:i,parentProperty:a,hasArrExpr:s},this._handleCallback(l,o,"value"),l;var p=e[0],g=e.slice(1),b=[];function v(e){Array.isArray(e)?e.forEach((function(e){b.push(e)})):b.push(e)}if(("string"!=typeof p||c)&&t&&h.call(t,p))v(this._trace(g,t[p],f(n,p),t,p,o,s));else if("*"===p)this._walk(p,g,t,n,i,a,o,(function(e,t,n,r,i,a,o,s){v(u._trace(m(e,n),r,i,a,o,s,!0,!0))}));else if(".."===p)v(this._trace(g,t,n,i,a,o,s)),this._walk(p,g,t,n,i,a,o,(function(e,t,n,i,a,o,s,c){"object"===r(i[e])&&v(u._trace(m(t,n),i[e],f(a,e),i,e,c,!0))}));else{if("^"===p)return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:g,isParentSelector:!0};if("~"===p)return l={path:f(n,p),value:a,parent:i,parentProperty:null},this._handleCallback(l,o,"property"),l;if("$"===p)v(this._trace(g,t,n,null,null,o,s));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(p))v(this._slice(p,g,t,n,i,a,o));else if(0===p.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(p,g,t,n,i,a,o,(function(e,t,n,r,i,a,o,s){u._eval(t.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),r[e],e,i,a,o)&&v(u._trace(m(e,n),r,i,a,o,s,!0))}))}else if("("===p[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");v(this._trace(m(this._eval(p,t,n[n.length-1],n.slice(0,-1),i,a),g),t,n,i,a,o,s))}else if("@"===p[0]){var _=!1,y=p.slice(1,-2);switch(y){case"scalar":t&&["object","function"].includes(r(t))||(_=!0);break;case"boolean":case"string":case"undefined":case"function":r(t)===y&&(_=!0);break;case"integer":!Number.isFinite(t)||t%1||(_=!0);break;case"number":Number.isFinite(t)&&(_=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(_=!0);break;case"object":t&&r(t)===y&&(_=!0);break;case"array":Array.isArray(t)&&(_=!0);break;case"other":_=this.currOtherTypeCallback(t,n,i,a);break;case"null":null===t&&(_=!0);break;default:throw new TypeError("Unknown value type "+y)}if(_)return l={path:n,value:t,parent:i,parentProperty:a},this._handleCallback(l,o,"value"),l}else if("`"===p[0]&&t&&h.call(t,p.slice(1))){var O=p.slice(1);v(this._trace(g,t[O],f(n,O),t,O,o,s,!0))}else if(p.includes(",")){var x,E=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(p.split(","));try{for(E.s();!(x=E.n()).done;){var k=x.value;v(this._trace(m(k,g),t,n,i,a,o,!0))}}catch(A){E.e(A)}finally{E.f()}}else!c&&t&&h.call(t,p)&&v(this._trace(g,t[p],f(n,p),t,p,o,s,!0))}if(this._hasParentSelector)for(var C=0;C<b.length;C++){var w=b[C];if(w&&w.isParentSelector){var S=this._trace(w.expr,t,w.path,i,a,o,s);if(Array.isArray(S)){b[C]=S[0];for(var I=S.length,T=1;T<I;T++)C++,b.splice(C,0,S[T])}else b[C]=S}}return b},b.prototype._walk=function(e,t,n,i,a,o,s,c){if(Array.isArray(n))for(var l=n.length,u=0;u<l;u++)c(u,e,t,n,i,a,o,s);else n&&"object"===r(n)&&Object.keys(n).forEach((function(r){c(r,e,t,n,i,a,o,s)}))},b.prototype._slice=function(e,t,n,r,i,a,o){if(Array.isArray(n)){var s=n.length,c=e.split(":"),l=c[2]&&Number.parseInt(c[2])||1,u=c[0]&&Number.parseInt(c[0])||0,d=c[1]&&Number.parseInt(c[1])||s;u=u<0?Math.max(0,u+s):Math.min(s,u),d=d<0?Math.max(0,d+s):Math.min(s,d);for(var p=[],h=u;h<d;h+=l){this._trace(m(h,t),n,r,i,a,o,!0).forEach((function(e){p.push(e)}))}return p}},b.prototype._eval=function(e,t,n,r,i,a){e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=a,e=e.replace(/@parentProperty/g,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=i,e=e.replace(/@parent/g,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=n,e=e.replace(/@property/g,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=b.toPathString(r.concat([n])),e=e.replace(/@path/g,"_$_path")),e.includes("@root")&&(this.currSandbox._$_root=this.json,e=e.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(e)&&(this.currSandbox._$_v=t,e=e.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(e,this.currSandbox)}catch(o){throw console.log(o),new Error("jsonPath: "+o.message+": "+e)}},b.cache={},b.toPathString=function(e){for(var t=e,n=t.length,r="$",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[i])||(r+=/^[\*0-9]+$/.test(t[i])?"["+t[i]+"]":"['"+t[i]+"']");return r},b.toPointer=function(e){for(var t=e,n=t.length,r="",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[i])||(r+="/"+t[i].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return r},b.toPathArray=function(e){var t=b.cache;if(t[e])return t[e].concat();var n=[],r=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,(function(e,t){return"[#"+(n.push(t)-1)+"]"})).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,(function(e,t){return"['"+t.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"})).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,(function(e,t){return";"+t.split("").join(";")+";"})).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map((function(e){var t=e.match(/#([0-9]+)/);return t&&t[1]?n[t[1]]:e}));return t[e]=r,t[e].concat()};b.prototype.vm={runInNewContext:function(e,t){var n=Object.keys(t),r=[];!function(e,t,n){for(var r=e.length,i=0;i<r;i++)n(e[i])&&t.push(e.splice(i--,1)[0])}(n,r,(function(e){return"function"==typeof t[e]}));var i=n.map((function(e,n){return t[e]}));e=r.reduce((function(e,n){var r=t[n].toString();return/function/.test(r)||(r="function "+r),"var "+n+"="+r+";"+e}),"")+e,/(["'])use strict\1/.test(e)||n.includes("arguments")||(e="var arguments = undefined;"+e);var a=(e=e.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),o=a>-1?e.slice(0,a+1)+" return "+e.slice(a+1):" return "+e;return s(Function,u(n).concat([o])).apply(void 0,u(i))}}},Gf1k:function(e,t,n){var r;r=function(e){e.version="1.0.2";var t=Math;function n(e,t){for(var n=0,r=0;n<e.length;++n)r=t*r+e[n];return r}function r(e,t,n,r,i){if(0===t)return n;if(1===t)return r;for(var a=2/e,o=r,s=1;s<t;++s)o=r*s*a+i*n,n=r,r=o;return o}function i(e,t,n,i,a){return function(n,o){if(i){if(0===n)return 1==i?-1/0:1/0;if(n<0)return NaN}return 0===o?e(n):1===o?t(n):o<0?NaN:r(n,o|=0,e(n),t(n),a)}}var a,o,s,c,l,u,d,p,h,f,m,g,b,v=function(){var e=.636619772,i=[57568490574,-13362590354,651619640.7,-11214424.18,77392.33017,-184.9052456].reverse(),a=[57568490411,1029532985,9494680.718,59272.64853,267.8532712,1].reverse(),o=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse(),s=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34935152e-8].reverse();function c(r){var c=0,l=0,u=0,d=r*r;if(r<8)c=(l=n(i,d))/(u=n(a,d));else{var p=r-.785398164;l=n(o,d=64/d),u=n(s,d),c=t.sqrt(e/r)*(t.cos(p)*l-t.sin(p)*u*8/r)}return c}var l=[72362614232,-7895059235,242396853.1,-2972611.439,15704.4826,-30.16036606].reverse(),u=[144725228442,2300535178,18583304.74,99447.43394,376.9991397,1].reverse(),d=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse(),p=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse();function h(r){var i=0,a=0,o=0,s=r*r,c=t.abs(r)-2.356194491;return Math.abs(r)<8?i=(a=r*n(l,s))/(o=n(u,s)):(a=n(d,s=64/s),o=n(p,s),i=t.sqrt(e/t.abs(r))*(t.cos(c)*a-t.sin(c)*o*8/t.abs(r)),r<0&&(i=-i)),i}return function e(n,i){if(i=Math.round(i),!isFinite(n))return isNaN(n)?n:0;if(i<0)return(i%2?-1:1)*e(n,-i);if(n<0)return(i%2?-1:1)*e(-n,i);if(0===i)return c(n);if(1===i)return h(n);if(0===n)return 0;var a=0;if(n>i)a=r(n,i,c(n),h(n),-1);else{for(var o=!1,s=0,l=0,u=1,d=0,p=2/n,f=2*t.floor((i+t.floor(t.sqrt(40*i)))/2);f>0;f--)d=f*p*u-s,s=u,u=d,t.abs(u)>1e10&&(u*=1e-10,s*=1e-10,a*=1e-10,l*=1e-10),o&&(l+=u),o=!o,f==i&&(a=s);a/=l=2*l-u}return a}}(),_=(a=.636619772,o=[-2957821389,7062834065,-512359803.6,10879881.29,-86327.92757,228.4622733].reverse(),s=[40076544269,745249964.8,7189466.438,47447.2647,226.1030244,1].reverse(),c=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse(),l=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34945152e-8].reverse(),u=[-4900604943e3,127527439e4,-51534381390,734926455.1,-4237922.726,8511.937935].reverse(),d=[249958057e5,424441966400,3733650367,22459040.02,102042.605,354.9632885,1].reverse(),p=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse(),h=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse(),i((function(e){var r=0,i=0,u=0,d=e*e,p=e-.785398164;return e<8?r=(i=n(o,d))/(u=n(s,d))+a*v(e,0)*t.log(e):(i=n(c,d=64/d),u=n(l,d),r=t.sqrt(a/e)*(t.sin(p)*i+t.cos(p)*u*8/e)),r}),(function(e){var r=0,i=0,o=0,s=e*e,c=e-2.356194491;return e<8?r=(i=e*n(u,s))/(o=n(d,s))+a*(v(e,1)*t.log(e)-1/e):(i=n(p,s=64/s),o=n(h,s),r=t.sqrt(a/e)*(t.sin(c)*i+t.cos(c)*o*8/e)),r}),0,1,-1)),y=(f=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),m=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse(),g=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),b=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse(),function e(r,i){if(0===(i=Math.round(i)))return function(e){return e<=3.75?n(f,e*e/14.0625):t.exp(t.abs(e))/t.sqrt(t.abs(e))*n(m,3.75/t.abs(e))}(r);if(1===i)return function(e){return e<3.75?e*n(g,e*e/14.0625):(e<0?-1:1)*t.exp(t.abs(e))/t.sqrt(t.abs(e))*n(b,3.75/t.abs(e))}(r);if(i<0)return NaN;if(0===t.abs(r))return 0;if(r==1/0)return 1/0;var a,o=0,s=2/t.abs(r),c=0,l=1,u=0;for(a=2*t.round((i+t.round(t.sqrt(40*i)))/2);a>0;a--)u=a*s*l+c,c=l,l=u,t.abs(l)>1e10&&(l*=1e-10,c*=1e-10,o*=1e-10),a==i&&(o=c);return o*=e(r,0)/l,r<0&&i%2?-o:o}),O=function(){var e=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),r=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse(),a=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),o=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();return i((function(i){return i<=2?-t.log(i/2)*y(i,0)+n(e,i*i/4):t.exp(-i)/t.sqrt(i)*n(r,2/i)}),(function(e){return e<=2?t.log(e/2)*y(e,1)+1/e*n(a,e*e/4):t.exp(-e)/t.sqrt(e)*n(o,2/e)}),0,2,1)}();e.besselj=v,e.bessely=_,e.besseli=y,e.besselk=O},"undefined"==typeof DO_NOT_EXPORT_BESSEL?r(t):r({})},Gjo4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("XLk1"),a=n("NNJu"),o=n("EM62"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return c(e||t)},t.\u0275cmp=o.ac({type:t,selectors:[["toolbar-dropdown-input"]],features:[o.Rb([{provide:a.i,useExisting:Object(o.lb)((function(){return t}))}]),o.Pb],decls:3,vars:1,consts:[[1,"toolbar-dd-input-container"],[1,"toolbar-dd-input-button","body--lg","btn-icon","btn-free-size",3,"value","focusout","input"],["inputElement",""]],template:function(e,t){1&e&&(o.mc(0,"a",0),o.mc(1,"input",1,2),o.uc("focusout",(function(e){return t.handleChange(e.target.value,!0)}))("input",(function(e){return t.handleChange(e.target.value,!1)})),o.lc(),o.lc()),2&e&&(o.Sb(1),o.Dc("value",t.inputValue))},styles:[".toolbar-dd-input-container[_ngcontent-%COMP%]{margin-left:.625rem;display:flex;height:45px;align-items:center}.toolbar-dd-input-button[_ngcontent-%COMP%]{padding-left:.25rem;background:url(/assets/images/decoratives/dropdown-arrow.svg) no-repeat 100%;background-size:8px;width:40px;color:#354b53!important}"],changeDetection:0}),t}(i.a),c=o.oc(s)},I2sK:function(e,t,n){var r=n("K1iM"),i=n("VtSi");e.exports=function(){function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){return i(t[o][1][e]||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var a=!1,o=0;o<r.length;o++)i(r[o]);return i}return e}()({1:[function(e,t,n){var r=e("./utils"),i=function(){"use strict";var e=r.stringToArray,t=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],i=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],a=["Thousand","Million","Billion","Trillion"];function o(e,r){return function e(r,o,s){var c="";if(r<=19)c=(o?" and ":"")+(s?n[r]:t[r]);else if(r<100){var l=Math.floor(r/10),u=r%10;c=(o?" and ":"")+i[l-2],u>0?c+="-"+e(u,!1,s):s&&(c=c.substring(0,c.length-1)+"ieth")}else if(r<1e3){var d=Math.floor(r/100),p=r%100;c=(o?", ":"")+t[d]+" Hundred",p>0?c+=e(p,!0,s):s&&(c+="th")}else{var h=Math.floor(Math.log10(r)/3);h>a.length&&(h=a.length);var f=Math.pow(10,3*h),m=Math.floor(r/f),g=r-m*f;c=(o?", ":"")+e(m,!1,!1)+" "+a[h-1],g>0?c+=e(g,!0,s):s&&(c+="th")}return c}(e,!1,r)}var s={};function c(e){var t=e.split(/,\s|\sand\s|[\s\\-]/).map((function(e){return s[e]})),n=[0];return t.forEach((function(e){if(e<100){var t=n.pop();t>=1e3&&(n.push(t),t=0),n.push(t+e)}else n.push(n.pop()*e)})),n.reduce((function(e,t){return e+t}),0)}t.forEach((function(e,t){s[e.toLowerCase()]=t})),n.forEach((function(e,t){s[e.toLowerCase()]=t})),i.forEach((function(e,t){var n=e.toLowerCase();s[n]=10*(t+2),s[n.substring(0,e.length-1)+"ieth"]=s[n]})),s.hundredth=100,a.forEach((function(e,t){var n=e.toLowerCase(),r=Math.pow(10,3*(t+1));s[n]=r,s[n+"th"]=r}));var l=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],u={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function d(e){for(var t=0;t<l.length;t++){var n=l[t];if(e>=n[0])return n[1]+d(e-n[0])}return""}function p(e){for(var t=0,n=1,r=e.length-1;r>=0;r--){var i=e[r],a=u[i];a<n?t-=a:(n=a,t+=a)}return t}function h(e,t){for(var n=[],r=t.charCodeAt(0);e>0;)n.unshift(String.fromCharCode((e-1)%26+r)),e=Math.floor((e-1)/26);return n.join("")}function f(e,t){for(var n=t.charCodeAt(0),r=0,i=0;i<e.length;i++)r+=(e.charCodeAt(e.length-i-1)-n+1)*Math.pow(26,i);return r}function m(e,t){if(void 0!==e)return v(e=Math.floor(e),y(t))}var g={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},b={UPPER:"upper",LOWER:"lower",TITLE:"title"};function v(t,n){var r,i=t<0;switch(t=Math.abs(t),n.primary){case g.LETTERS:r=h(t,n.case===b.UPPER?"A":"a");break;case g.ROMAN:r=d(t),n.case===b.UPPER&&(r=r.toUpperCase());break;case g.WORDS:r=o(t,n.ordinal),n.case===b.UPPER?r=r.toUpperCase():n.case===b.LOWER&&(r=r.toLowerCase());break;case g.DECIMAL:r=""+t;var a=n.mandatoryDigits-r.length;if(a>0){var s=new Array(a+1).join("0");r=s+r}if(48!==n.zeroCode&&(r=e(r).map((function(e){return String.fromCodePoint(e.codePointAt(0)+n.zeroCode-48)})).join("")),n.regular)for(var c=Math.floor((r.length-1)/n.groupingSeparators.position);c>0;c--){var l=r.length-c*n.groupingSeparators.position;r=r.substr(0,l)+n.groupingSeparators.character+r.substr(l)}else n.groupingSeparators.reverse().forEach((function(e){var t=r.length-e.position;r=r.substr(0,t)+e.character+r.substr(t)}));if(n.ordinal){var u={1:"st",2:"nd",3:"rd"}[r[r.length-1]];(!u||r.length>1&&"1"===r[r.length-2])&&(u="th"),r+=u}break;case g.SEQUENCE:throw{code:"D3130",value:n.token}}return i&&(r="-"+r),r}var _=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function y(t){var n,r={type:"integer",primary:g.DECIMAL,case:b.LOWER,ordinal:!1},i=t.lastIndexOf(";");switch(-1===i?n=t:(n=t.substring(0,i),"o"===t.substring(i+1)[0]&&(r.ordinal=!0)),n){case"A":r.case=b.UPPER;case"a":r.primary=g.LETTERS;break;case"I":r.case=b.UPPER;case"i":r.primary=g.ROMAN;break;case"W":r.case=b.UPPER,r.primary=g.WORDS;break;case"Ww":r.case=b.TITLE,r.primary=g.WORDS;break;case"w":r.primary=g.WORDS;break;default:var a=null,o=0,s=0,c=[],l=0;if(e(n).map((function(e){return e.codePointAt(0)})).reverse().forEach((function(e){for(var t=!1,n=0;n<_.length;n++){var r=_[n];if(e>=r&&e<=r+9){if(t=!0,o++,l++,null===a)a=r;else if(r!==a)throw{code:"D3131"};break}}t||(35===e?(l++,s++):c.push({position:l,character:String.fromCodePoint(e)}))})),o>0){r.primary=g.DECIMAL,r.zeroCode=a,r.mandatoryDigits=o,r.optionalDigits=s;var u=function(e){if(0===e.length)return 0;for(var t=e[0].character,n=1;n<e.length;n++)if(e[n].character!==t)return 0;for(var r=e.map((function(e){return e.position})),i=function e(t,n){return 0===n?t:e(n,t%n)},a=r.reduce(i),o=1;o<=r.length;o++)if(-1===r.indexOf(o*a))return 0;return a}(c);u>0?(r.regular=!0,r.groupingSeparators={position:u,character:c[0].character}):(r.regular=!1,r.groupingSeparators=c)}else r.primary=g.SEQUENCE,r.token=n}return r}var O={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function x(e){for(var t=[],n={type:"datetime",parts:t},r=function(n,r){if(r>n){var i=e.substring(n,r);i=i.split("]]").join("]"),t.push({type:"literal",value:i})}},i=0,a=0;a<e.length;){if("["===e.charAt(a)){if("["===e.charAt(a+1)){r(i,a),t.push({type:"literal",value:"["}),i=a+=2;continue}if(r(i,a),i=a,-1===(a=e.indexOf("]",i)))throw{code:"D3135"};var o,s=e.substring(i+1,a),c={type:"marker",component:(s=s.split(/\s+/).join("")).charAt(0)},l=s.lastIndexOf(",");if(-1!==l){var u=s.substring(l+1),d=u.indexOf("-"),p=void 0,h=void 0,f=function(e){return void 0===e||"*"===e?void 0:parseInt(e)};-1===d?p=u:(p=u.substring(0,d),h=u.substring(d+1));var m={min:f(p),max:f(h)};c.width=m,o=s.substring(1,l)}else o=s.substring(1);if(1===o.length)c.presentation1=o;else if(o.length>1){var g=o.charAt(o.length-1);-1!=="atco".indexOf(g)?(c.presentation2=g,"o"===g&&(c.ordinal=!0),c.presentation1=o.substring(0,o.length-1)):c.presentation1=o}else c.presentation1=O[c.component];if(void 0===c.presentation1)throw{code:"D3132",value:c.component};if("n"===c.presentation1[0])c.names=b.LOWER;else if("N"===c.presentation1[0])"n"===c.presentation1[1]?c.names=b.TITLE:c.names=b.UPPER;else if(-1!=="YMDdFWwXxHhmsf".indexOf(c.component)){var v=c.presentation1;if(c.presentation2&&(v+=";"+c.presentation2),c.integerFormat=y(v),c.width&&void 0!==c.width.min&&c.integerFormat.mandatoryDigits<c.width.min&&(c.integerFormat.mandatoryDigits=c.width.min),-1!=="YMD".indexOf(c.component))if(c.n=-1,c.width&&void 0!==c.width.max)c.n=c.width.max,c.integerFormat.mandatoryDigits=c.n;else{var _=c.integerFormat.mandatoryDigits+c.integerFormat.optionalDigits;_>=2&&(c.n=_)}}"Z"!==c.component&&"z"!==c.component||(c.integerFormat=y(c.presentation1)),t.push(c),i=a+1}a++}return r(i,a),n}var E=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],k=["January","February","March","April","May","June","July","August","September","October","November","December"],C=864e5,w=function(e){var t=Date.UTC(e.year,e.month),n=new Date(t).getUTCDay();return 0===n&&(n=7),n>4?t+(8-n)*C:t-(n-1)*C},S=function e(t,n){return{year:t,month:n,nextMonth:function(){return 11===n?e(t+1,0):e(t,n+1)},previousMonth:function(){return 0===n?e(t-1,11):e(t,n-1)},nextYear:function(){return e(t+1,n)},previousYear:function(){return e(t-1,n)}}},I=function(e,t){return(t-e)/(7*C)+1},T=function(e,t){var n;switch(t){case"Y":n=e.getUTCFullYear();break;case"M":n=e.getUTCMonth()+1;break;case"D":n=e.getUTCDate();break;case"d":n=(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())-Date.UTC(e.getUTCFullYear(),0))/C+1;break;case"F":0===(n=e.getUTCDay())&&(n=7);break;case"W":var r=S(e.getUTCFullYear(),0),i=w(r),a=Date.UTC(r.year,e.getUTCMonth(),e.getUTCDate()),o=I(i,a);if(o>52)a>=w(r.nextYear())&&(o=1);else if(o<1){var s=w(r.previousYear());o=I(s,a)}n=Math.floor(o);break;case"w":var c=S(e.getUTCFullYear(),e.getUTCMonth()),l=w(c),u=Date.UTC(c.year,c.month,e.getUTCDate()),d=I(l,u);if(d>4)u>=w(c.nextMonth())&&(d=1);else if(d<1){var p=w(c.previousMonth());d=I(p,u)}n=Math.floor(d);break;case"X":var h=S(e.getUTCFullYear(),0),f=w(h),m=w(h.nextYear()),g=e.getTime();n=g<f?h.year-1:g>=m?h.year+1:h.year;break;case"x":var b=S(e.getUTCFullYear(),e.getUTCMonth()),v=w(b),_=b.nextMonth(),y=w(_),O=e.getTime();n=O<v?b.previousMonth().month+1:O>=y?_.month+1:b.month+1;break;case"H":n=e.getUTCHours();break;case"h":n=e.getUTCHours(),0==(n%=12)&&(n=12);break;case"P":n=e.getUTCHours()>=12?"pm":"am";break;case"m":n=e.getUTCMinutes();break;case"s":n=e.getUTCSeconds();break;case"f":n=e.getUTCMilliseconds();break;case"Z":case"z":break;case"C":case"E":n="ISO"}return n},A=null;function P(e,t,n){var r=0,i=0;if(void 0!==n){var a=parseInt(n);r=Math.floor(a/100),i=a%100}var o,s=function(e,t){var n=T(e,t.component);if(-1!=="YMDdFWwXxHhms".indexOf(t.component))if("Y"===t.component&&-1!==t.n&&(n%=Math.pow(10,t.n)),t.names){if("M"===t.component||"x"===t.component)n=k[n-1];else{if("F"!==t.component)throw{code:"D3133",value:t.component};n=E[n]}t.names===b.UPPER?n=n.toUpperCase():t.names===b.LOWER&&(n=n.toLowerCase()),t.width&&n.length>t.width.max&&(n=n.substring(0,t.width.max))}else n=v(n,t.integerFormat);else if("f"===t.component)n=v(n,t.integerFormat);else if("Z"===t.component||"z"===t.component){var a=100*r+i;if(t.integerFormat.regular)n=v(a,t.integerFormat);else{var o=t.integerFormat.mandatoryDigits;if(1===o||2===o)n=v(r,t.integerFormat),0!==i&&(n+=":"+m(i,"00"));else{if(3!==o&&4!==o)throw{code:"D3134",value:o};n=v(a,t.integerFormat)}}a>=0&&(n="+"+n),"z"===t.component&&(n="GMT"+n),0===a&&"t"===t.presentation2&&(n="Z")}return n};void 0===t?(null===A&&(A=x("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),o=A):o=x(t);var c=new Date(e+60*(60*r+i)*1e3),l="";return o.parts.forEach((function(e){"literal"===e.type?l+=e.value:l+=s(c,e)})),l}function M(e){var t={};if("datetime"===e.type)t.type="datetime",t.parts=e.parts.map((function(e){var t={};if("literal"===e.type)t.regex=e.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if("Z"===e.component||"z"===e.component){var n;Array.isArray(e.integerFormat.groupingSeparators)||(n=e.integerFormat.groupingSeparators),t.regex="","z"===e.component&&(t.regex="GMT"),t.regex+="[-+][0-9]+",n&&(t.regex+=n.character+"[0-9]+"),t.parse=function(t){"z"===e.component&&(t=t.substring(3));var r=0,i=0;return n?(r=Number.parseInt(t.substring(0,t.indexOf(n.character))),i=Number.parseInt(t.substring(t.indexOf(n.character)+1))):t.length-1<=2?r=Number.parseInt(t):(r=Number.parseInt(t.substring(0,3)),i=Number.parseInt(t.substring(3))),60*r+i}}else if(e.integerFormat)e.integerFormat.n=e.n,t=M(e.integerFormat);else{t.regex="[a-zA-Z]+";var r={};if("M"===e.component||"x"===e.component)k.forEach((function(t,n){e.width&&e.width.max?r[t.substring(0,e.width.max)]=n+1:r[t]=n+1}));else if("F"===e.component)E.forEach((function(t,n){n>0&&(e.width&&e.width.max?r[t.substring(0,e.width.max)]=n:r[t]=n)}));else{if("P"!==e.component)throw{code:"D3133",value:e.component};r={am:0,AM:0,pm:1,PM:1}}t.parse=function(e){return r[e]}}return t.component=e.component,t}));else{t.type="integer";var n,r=e.case===b.UPPER;switch(n=e.n&&e.n>0?0===e.optionalDigits?"{".concat(e.n,"}"):"{".concat(e.n-e.optionalDigits,",").concat(e.n,"}"):"+",e.primary){case g.LETTERS:t.regex=r?"[A-Z]+":"[a-z]+",t.parse=function(e){return f(e,r?"A":"a")};break;case g.ROMAN:t.regex=r?"[MDCLXVI]+":"[mdclxvi]+",t.parse=function(e){return p(r?e:e.toUpperCase())};break;case g.WORDS:t.regex="(?:"+Object.keys(s).concat("and","[\\-, ]").join("|")+")+",t.parse=function(e){return c(e.toLowerCase())};break;case g.DECIMAL:t.regex="[0-9]".concat(n),e.ordinal&&(t.regex+="(?:th|st|nd|rd)"),t.parse=function(t){var n=t;return e.ordinal&&(n=t.substring(0,t.length-2)),e.regular?n=n.split(",").join(""):e.groupingSeparators.forEach((function(e){n=n.split(e.character).join("")})),48!==e.zeroCode&&(n=n.split("").map((function(t){return String.fromCodePoint(t.codePointAt(0)-e.zeroCode+48)})).join("")),parseInt(n)};break;case g.SEQUENCE:throw{code:"D3130",value:e.token}}}return t}function D(e,t){if(void 0!==e)return M(y(t)).parse(e)}function j(e,t){var n=M(x(t)),r="^"+n.parts.map((function(e){return"("+e.regex+")"})).join("")+"$",i=new RegExp(r,"i").exec(e);if(null!==i){for(var a=161,o=130,s=84,c=72,l=23,u=47,d={},p=1;p<i.length;p++){var h=n.parts[p-1];h.parse&&(d[h.component]=h.parse(i[p]))}if(0===Object.getOwnPropertyNames(d).length)return;var f=0,m=function(e){f<<=1,f+=e?1:0},g=function(e){return!(~e&f||!(e&f))};"YXMxWwdD".split("").forEach((function(e){return m(d[e])}));var b=!g(a)&&g(o),v=g(s),_=!v&&g(c);f=0,"PHhmsf".split("").forEach((function(e){return m(d[e])}));var y=!g(l)&&g(u),O=(b?"YD":v?"XxwF":_?"XWF":"YMD")+(y?"Phmsf":"Hmsf"),E=this.environment.timestamp,k=!1,C=!1;if(O.split("").forEach((function(e){if(void 0===d[e])k?(d[e]=-1!=="MDd".indexOf(e)?1:0,C=!0):d[e]=T(E,e);else if(k=!0,C)throw{code:"D3136"}})),d.M>0?d.M-=1:d.M=0,b){var w=Date.UTC(d.Y,0),S=1e3*(d.d-1)*60*60*24,I=new Date(w+S);d.M=I.getUTCMonth(),d.D=I.getUTCDate()}if(v)throw{code:"D3136"};if(_)throw{code:"D3136"};y&&(d.H=12===d.h?0:d.h,1===d.P&&(d.H+=12));var A=Date.UTC(d.Y,d.M,d.D,d.H,d.m,d.s,d.f);return(d.Z||d.z)&&(A-=60*(d.Z||d.z)*1e3),A}}var R=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function L(e,t){if(void 0!==e){if(void 0===t){if(!R.test(e))throw{stack:(new Error).stack,code:"D3110",value:e};return Date.parse(e)}return j.call(this,e,t)}}function N(e,t,n){if(void 0!==e)return P.call(this,e,t,n)}return{formatInteger:m,parseInteger:D,fromMillis:N,toMillis:L}}();t.exports=i},{"./utils":6}],2:[function(e,t,n){(function(n){(function(){var r=e("./utils"),a=function(){"use strict";var e=i.mark(F),t=i.mark(q),a=i.mark(W),o=i.mark(H),s=i.mark(Q),c=i.mark(de),l=i.mark(pe),u=i.mark(he),d=i.mark(me),p=i.mark(Ee),h=i.mark(Se),f=i.mark(Ae),m=r.isNumeric,g=r.isArrayOfStrings,b=r.isArrayOfNumbers,v=r.createSequence,_=r.isSequence,y=r.isFunction,O=r.isLambda,x=r.isIterable,E=r.getFunctionArity,k=r.isDeepEqual,C=r.stringToArray;function w(e){if(void 0!==e){var t=0;return e.forEach((function(e){t+=e})),t}}function S(e){return void 0===e?0:e.length}function I(e){if(void 0!==e&&0!==e.length)return Math.max.apply(Math,e)}function T(e){if(void 0!==e&&0!==e.length)return Math.min.apply(Math,e)}function A(e){if(void 0!==e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),t/e.length}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0!==e){var n;if("string"==typeof e)n=e;else if(y(e))n="";else{if("number"==typeof e&&!isFinite(e))throw{code:"D3001",value:e,stack:(new Error).stack};var r=t?2:0;Array.isArray(e)&&e.outerWrapper&&(e=e[0]),n=JSON.stringify(e,(function(e,t){return null!=t&&t.toPrecision&&m(t)?Number(t.toPrecision(15)):t&&y(t)?"":t}),r)}return n}}function M(e,t,n){if(void 0!==e){var r=C(e),i=r.length;if(i+t<0&&(t=0),void 0!==n){if(n<=0)return"";var a=t>=0?t+n:i+t+n;return r.slice(t,a).join("")}return r.slice(t).join("")}}function D(e,t){if(void 0!==e){var n=e.indexOf(t);return n>-1?e.substr(0,n):e}}function j(e,t){if(void 0!==e){var n=e.indexOf(t);return n>-1?e.substr(n+t.length):e}}function R(e){if(void 0!==e)return e.toLowerCase()}function L(e){if(void 0!==e)return e.toUpperCase()}function N(e){if(void 0!==e)return C(e).length}function B(e){if(void 0!==e){var t=e.replace(/[ \t\n\r]+/gm," ");return" "===t.charAt(0)&&(t=t.substring(1))," "===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}}function U(e,t,n){if(void 0!==e){var r;void 0!==n&&0!==n.length||(n=" ");var i=Math.abs(t)-N(e);if(i>0){var a=new Array(i+1).join(n);n.length>1&&(a=M(a,0,i)),r=t>0?e+a:a+e}else r=e;return r}}function F(t,n){var r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.apply(this,[n]),!x(r)){e.next=4;break}return e.delegateYield(r,"t0",3);case 3:r=e.t0;case 4:if(!r||"number"==typeof r.start||"number"===r.end||Array.isArray(r.groups)||y(r.next)){e.next=6;break}throw{code:"T1010",stack:(new Error).stack};case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}function q(e,n){var r,a;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:if("string"!=typeof n){t.next=6;break}r=-1!==e.indexOf(n),t.next=9;break;case 6:return t.delegateYield(F(n,e),"t0",7);case 7:a=t.t0,r=void 0!==a;case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)}function W(e,t,n){var r,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:if(!(n<0)){i.next=4;break}throw{stack:(new Error).stack,value:n,code:"D3040",index:3};case 4:if(r=v(),!(void 0===n||n>0)){i.next=17;break}return o=0,i.delegateYield(F(t,e),"t0",8);case 8:if(void 0===(s=i.t0)){i.next=17;break}case 10:if(void 0===s||!(void 0===n||o<n)){i.next=17;break}return r.push({match:s.match,index:s.start,groups:s.groups}),i.delegateYield(F(s.next),"t1",13);case 13:s=i.t1,o++,i.next=10;break;case 17:return i.abrupt("return",r);case 18:case"end":return i.stop()}}),a)}function H(e,t,n,r){var a,s,c,l,u,d,p,h;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:if(a=this,""!==t){i.next=5;break}throw{code:"D3010",stack:(new Error).stack,value:t,index:2};case 5:if(!(r<0)){i.next=7;break}throw{code:"D3011",stack:(new Error).stack,value:r,index:4};case 7:if(s="string"==typeof n?function(e){for(var t="",r=0,i=n.indexOf("$",r);-1!==i&&r<n.length;){t+=n.substring(r,i),r=i+1;var a=n.charAt(r);if("$"===a)t+="$",r++;else if("0"===a)t+=e.match,r++;else{var o;if(o=0===e.groups.length?1:Math.floor(Math.log(e.groups.length)*Math.LOG10E)+1,i=parseInt(n.substring(r,r+o),10),o>1&&i>e.groups.length&&(i=parseInt(n.substring(r,r+o-1),10)),isNaN(i))t+="$";else{if(e.groups.length>0){var s=e.groups[i-1];void 0!==s&&(t+=s)}r+=i.toString().length}}i=n.indexOf("$",r)}return t+=n.substring(r)}:n,c="",l=0,!(void 0===r||r>0)){i.next=44;break}if(u=0,"string"!=typeof t){i.next=18;break}for(d=e.indexOf(t,l);-1!==d&&(void 0===r||u<r);)c+=e.substring(l,d),c+=n,l=d+t.length,u++,d=e.indexOf(t,l);c+=e.substring(l),i.next=42;break;case 18:return i.delegateYield(F(t,e),"t0",19);case 19:if(void 0===(p=i.t0)){i.next=41;break}case 21:if(void 0===p||!(void 0===r||u<r)){i.next=38;break}if(c+=e.substring(l,p.start),h=s.apply(a,[p]),!x(h)){i.next=27;break}return i.delegateYield(h,"t1",26);case 26:h=i.t1;case 27:if("string"!=typeof h){i.next=31;break}c+=h,i.next=32;break;case 31:throw{code:"D3012",stack:(new Error).stack,value:h};case 32:return l=p.start+p.match.length,u++,i.delegateYield(F(p.next),"t2",35);case 35:p=i.t2,i.next=21;break;case 38:c+=e.substring(l),i.next=42;break;case 41:c=e;case 42:i.next=45;break;case 44:c=e;case 45:return i.abrupt("return",c);case 46:case"end":return i.stop()}}),o,this)}function K(e){if(void 0!==e)return("undefined"!=typeof window?window.btoa:function(e){return new n.Buffer.from(e,"binary").toString("base64")})(e)}function z(e){if(void 0!==e)return("undefined"!=typeof window?window.atob:function(e){return new n.Buffer.from(e,"base64").toString("binary")})(e)}function V(e){if(void 0!==e){var t;try{t=encodeURIComponent(e)}catch(n){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrlComponent"}}return t}}function G(e){if(void 0!==e){var t;try{t=encodeURI(e)}catch(n){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrl"}}return t}}function Y(e){if(void 0!==e){var t;try{t=decodeURIComponent(e)}catch(n){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrlComponent"}}return t}}function X(e){if(void 0!==e){var t;try{t=decodeURI(e)}catch(n){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrl"}}return t}}function Q(e,t,n){var r,a,o,c;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:if(!(n<0)){i.next=4;break}throw{code:"D3020",stack:(new Error).stack,value:n,index:3};case 4:if(r=[],!(void 0===n||n>0)){i.next=27;break}if("string"!=typeof t){i.next=10;break}r=e.split(t,n),i.next=27;break;case 10:return a=0,i.delegateYield(F(t,e),"t0",12);case 12:if(void 0===(o=i.t0)){i.next=26;break}c=0;case 15:if(void 0===o||!(void 0===n||a<n)){i.next=23;break}return r.push(e.substring(c,o.start)),c=o.end,i.delegateYield(F(o.next),"t1",19);case 19:o=i.t1,a++,i.next=15;break;case 23:(void 0===n||a<n)&&r.push(e.substring(c)),i.next=27;break;case 26:r.push(e);case 27:return i.abrupt("return",r);case 28:case"end":return i.stop()}}),s)}function J(e,t){if(void 0!==e)return void 0===t&&(t=""),e.join(t)}function $(e,t,n){if(void 0!==e){var r={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"};void 0!==n&&Object.keys(n).forEach((function(e){r[e]=n[e]}));for(var i=[],a=r["zero-digit"].charCodeAt(0),o=a;o<a+10;o++)i.push(String.fromCharCode(o));var s=i.concat([r["decimal-separator"],r["exponent-separator"],r["grouping-separator"],r.digit,r["pattern-separator"]]),c=t.split(r["pattern-separator"]);if(c.length>2)throw{code:"D3080",stack:(new Error).stack};var l=function(e){var t,n,i,a,o=function(){for(var t,n=0;n<e.length;n++)if(t=e.charAt(n),-1!==s.indexOf(t)&&t!==r["exponent-separator"])return e.substring(0,n)}(),c=function(){for(var t,n=e.length-1;n>=0;n--)if(t=e.charAt(n),-1!==s.indexOf(t)&&t!==r["exponent-separator"])return e.substring(n+1)}(),l=e.substring(o.length,e.length-c.length),u=e.indexOf(r["exponent-separator"],o.length);-1===u||u>e.length-c.length?(t=l,n=void 0):(t=l.substring(0,u),n=l.substring(u+1));var d=t.indexOf(r["decimal-separator"]);return-1===d?(i=t,a=c):(i=t.substring(0,d),a=t.substring(d+1)),{prefix:o,suffix:c,activePart:l,mantissaPart:t,exponentPart:n,integerPart:i,fractionalPart:a,subpicture:e}},u=function(e){var t,n,a=e.subpicture,o=a.indexOf(r["decimal-separator"]);o!==a.lastIndexOf(r["decimal-separator"])&&(t="D3081"),a.indexOf(r.percent)!==a.lastIndexOf(r.percent)&&(t="D3082"),a.indexOf(r["per-mille"])!==a.lastIndexOf(r["per-mille"])&&(t="D3083"),-1!==a.indexOf(r.percent)&&-1!==a.indexOf(r["per-mille"])&&(t="D3084");var c=!1;for(n=0;n<e.mantissaPart.length;n++){var l=e.mantissaPart.charAt(n);if(-1!==i.indexOf(l)||l===r.digit){c=!0;break}}c||(t="D3085"),-1!==e.activePart.split("").map((function(e){return-1===s.indexOf(e)?"p":"a"})).join("").indexOf("p")&&(t="D3086"),-1!==o?a.charAt(o-1)!==r["grouping-separator"]&&a.charAt(o+1)!==r["grouping-separator"]||(t="D3087"):e.integerPart.charAt(e.integerPart.length-1)===r["grouping-separator"]&&(t="D3088"),-1!==a.indexOf(r["grouping-separator"]+r["grouping-separator"])&&(t="D3089");var u=e.integerPart.indexOf(r.digit);-1!==u&&e.integerPart.substring(0,u).split("").filter((function(e){return i.indexOf(e)>-1})).length>0&&(t="D3090"),-1!==(u=e.fractionalPart.lastIndexOf(r.digit))&&e.fractionalPart.substring(u).split("").filter((function(e){return i.indexOf(e)>-1})).length>0&&(t="D3091");var d="string"==typeof e.exponentPart;if(d&&e.exponentPart.length>0&&(-1!==a.indexOf(r.percent)||-1!==a.indexOf(r["per-mille"]))&&(t="D3092"),d&&(0===e.exponentPart.length||e.exponentPart.split("").filter((function(e){return-1===i.indexOf(e)})).length>0)&&(t="D3093"),t)throw{code:t,stack:(new Error).stack}},d=function(e){var t=function(t,n){for(var a=[],o=t.indexOf(r["grouping-separator"]);-1!==o;){var s=(n?t.substring(0,o):t.substring(o)).split("").filter((function(e){return-1!==i.indexOf(e)||e===r.digit})).length;a.push(s),o=e.integerPart.indexOf(r["grouping-separator"],o+1)}return a},n=t(e.integerPart),a=function(e){if(0===e.length)return 0;for(var t=function e(t,n){return 0===n?t:e(n,t%n)},n=e.reduce(t),r=1;r<=e.length;r++)if(-1===e.indexOf(r*n))return 0;return n}(n),o=t(e.fractionalPart,!0),s=e.integerPart.split("").filter((function(e){return-1!==i.indexOf(e)})).length,c=s,l=e.fractionalPart.split(""),u=l.filter((function(e){return-1!==i.indexOf(e)})).length,d=l.filter((function(e){return-1!==i.indexOf(e)||e===r.digit})).length,p="string"==typeof e.exponentPart;0===s&&0===d&&(p?(u=1,d=1):s=1),p&&0===s&&-1!==e.integerPart.indexOf(r.digit)&&(s=1),0===s&&0===u&&(u=1);var h=0;return p&&(h=e.exponentPart.split("").filter((function(e){return-1!==i.indexOf(e)})).length),{integerPartGroupingPositions:n,regularGrouping:a,minimumIntegerPartSize:s,scalingFactor:c,prefix:e.prefix,fractionalPartGroupingPositions:o,minimumFactionalPartSize:u,maximumFactionalPartSize:d,minimumExponentSize:h,suffix:e.suffix,picture:e.subpicture}},p=c.map(l);p.forEach(u);var h,f,m,g,b=p.map(d),v=r["minus-sign"],_=r["zero-digit"],y=r["decimal-separator"],O=r["grouping-separator"];if(1===b.length&&(b.push(JSON.parse(JSON.stringify(b[0]))),b[1].prefix=v+b[1].prefix),f=-1!==(h=e>=0?b[0]:b[1]).picture.indexOf(r.percent)?100*e:-1!==h.picture.indexOf(r["per-mille"])?1e3*e:e,0===h.minimumExponentSize)m=f;else{var x=Math.pow(10,h.scalingFactor),E=Math.pow(10,h.scalingFactor-1);for(m=f,g=0;m<E;)m*=10,g-=1;for(;m>x;)m/=10,g+=1}var k=function(e,t){var n=Math.abs(e).toFixed(t);return"0"!==_&&(n=n.split("").map((function(e){return e>="0"&&e<="9"?i[e.charCodeAt(0)-48]:e})).join("")),n},C=k(ie(m,h.maximumFactionalPartSize),h.maximumFactionalPartSize),w=C.indexOf(".");for(-1===w?C+=y:C=C.replace(".",y);C.charAt(0)===_;)C=C.substring(1);for(;C.charAt(C.length-1)===_;)C=C.substring(0,C.length-1);w=C.indexOf(y);var S=h.minimumIntegerPartSize-w,I=h.minimumFactionalPartSize-(C.length-w-1);if(C=(S>0?new Array(S+1).join(_):"")+C,C+=I>0?new Array(I+1).join(_):"",w=C.indexOf(y),h.regularGrouping>0)for(var T=Math.floor((w-1)/h.regularGrouping),A=1;A<=T;A++)C=[C.slice(0,w-A*h.regularGrouping),O,C.slice(w-A*h.regularGrouping)].join("");else h.integerPartGroupingPositions.forEach((function(e){C=[C.slice(0,w-e),O,C.slice(w-e)].join(""),w++}));if(w=C.indexOf(y),h.fractionalPartGroupingPositions.forEach((function(e){C=[C.slice(0,e+w+1),O,C.slice(e+w+1)].join("")})),w=C.indexOf(y),-1!==h.picture.indexOf(y)&&w!==C.length-1||(C=C.substring(0,C.length-1)),void 0!==g){var P=k(g,0);(S=h.minimumExponentSize-P.length)>0&&(P=new Array(S+1).join(_)+P),C=C+r["exponent-separator"]+(g<0?v:"")+P}return C=h.prefix+C+h.suffix}}function Z(e,t){if(void 0!==e){if(e=ie(e),(t=void 0===t?10:ie(t))<2||t>36)throw{code:"D3100",stack:(new Error).stack,value:t};return e.toString(t)}}function ee(e){var t;if(void 0!==e){if("number"==typeof e)t=e;else if("string"==typeof e&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(e)&&!isNaN(parseFloat(e))&&isFinite(e))t=parseFloat(e);else if(!0===e)t=1;else{if(!1!==e)throw{code:"D3030",value:e,stack:(new Error).stack,index:1};t=0}return t}}function te(e){if(void 0!==e)return Math.abs(e)}function ne(e){if(void 0!==e)return Math.floor(e)}function re(e){if(void 0!==e)return Math.ceil(e)}function ie(e,t){var n;if(void 0!==e){if(t){var r=e.toString().split("e");e=+(r[0]+"e"+(r[1]?+r[1]+t:t))}var i=(n=Math.round(e))-e;return.5===Math.abs(i)&&1===Math.abs(n%2)&&(n-=1),t&&(r=n.toString().split("e"),n=+(r[0]+"e"+(r[1]?+r[1]-t:-t))),Object.is(n,-0)&&(n=0),n}}function ae(e){if(void 0!==e){if(e<0)throw{stack:(new Error).stack,code:"D3060",index:1,value:e};return Math.sqrt(e)}}function oe(e,t){var n;if(void 0!==e){if(n=Math.pow(e,t),!isFinite(n))throw{stack:(new Error).stack,code:"D3061",index:1,value:e,exp:t};return n}}function se(){return Math.random()}function ce(e){if(void 0!==e){var t=!1;return Array.isArray(e)?1===e.length?t=ce(e[0]):e.length>1&&(t=e.filter((function(e){return ce(e)})).length>0):"string"==typeof e?e.length>0&&(t=!0):m(e)?0!==e&&(t=!0):null!==e&&"object"==typeof e?Object.keys(e).length>0&&(t=!0):"boolean"==typeof e&&!0===e&&(t=!0),t}}function le(e){if(void 0!==e)return!ce(e)}function ue(e,t,n,r){var i=[t],a=E(e);return a>=2&&i.push(n),a>=3&&i.push(r),i}function de(e,t){var n,r,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:n=v(),r=0;case 4:if(!(r<e.length)){i.next=12;break}return a=ue(t,e[r],r,e),i.delegateYield(t.apply(this,a),"t0",7);case 7:void 0!==(o=i.t0)&&n.push(o);case 9:r++,i.next=4;break;case 12:return i.abrupt("return",n);case 13:case"end":return i.stop()}}),c,this)}function pe(e,t){var n,r,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:n=v(),r=0;case 4:if(!(r<e.length)){i.next=13;break}return a=e[r],o=ue(t,a,r,e),i.delegateYield(t.apply(this,o),"t0",8);case 8:ce(i.t0)&&n.push(a);case 10:r++,i.next=4;break;case 13:return i.abrupt("return",n);case 14:case"end":return i.stop()}}),l,this)}function he(e,t){var n,r,a,o,s,c,l;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:n=!1,a=0;case 4:if(!(a<e.length)){i.next=22;break}if(o=e[a],s=!0,void 0===t){i.next=12;break}return c=ue(t,o,a,e),i.delegateYield(t.apply(this,c),"t0",10);case 10:l=i.t0,s=ce(l);case 12:if(!s){i.next=19;break}if(n){i.next=18;break}r=o,n=!0,i.next=19;break;case 18:throw{stack:(new Error).stack,code:"D3138",index:a};case 19:a++,i.next=4;break;case 22:if(n){i.next=24;break}throw{stack:(new Error).stack,code:"D3139"};case 24:return i.abrupt("return",r);case 25:case"end":return i.stop()}}),u,this)}function fe(){for(var e=[],t=Array.prototype.slice.call(arguments),n=Math.min.apply(Math,t.map((function(e){return Array.isArray(e)?e.length:0}))),r=0;r<n;r++){var i=t.map((function(e){return e[r]}));e.push(i)}return e}function me(e,t,n){var r,a,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:if(!((a=E(t))<2)){i.next=5;break}throw{stack:(new Error).stack,code:"D3050",index:1};case 5:void 0===n&&e.length>0?(r=e[0],o=1):(r=n,o=0);case 6:if(!(o<e.length)){i.next=15;break}return s=[r,e[o]],a>=3&&s.push(o),a>=4&&s.push(e),i.delegateYield(t.apply(this,s),"t0",11);case 11:r=i.t0,o++,i.next=6;break;case 15:return i.abrupt("return",r);case 16:case"end":return i.stop()}}),d,this)}function ge(e){var t=v();if(Array.isArray(e)){var n={};e.forEach((function(e){ge(e).forEach((function(e){n[e]=!0}))})),t=ge(n)}else null===e||"object"!=typeof e||O(e)||Object.keys(e).forEach((function(e){return t.push(e)}));return t}function be(e,t){var n;if(Array.isArray(e)){n=v();for(var r=0;r<e.length;r++){var i=be(e[r],t);void 0!==i&&(Array.isArray(i)?i.forEach((function(e){return n.push(e)})):n.push(i))}}else null!==e&&"object"==typeof e&&(n=e[t]);return n}function ve(e,t){return void 0===e?t:void 0===t?e:(Array.isArray(e)||(e=v(e)),Array.isArray(t)||(t=[t]),e.concat(t))}function _e(e){return void 0!==e}function ye(e){var t=v();if(Array.isArray(e))e.forEach((function(e){t=ve(t,ye(e))}));else if(null===e||"object"!=typeof e||O(e))t=e;else for(var n in e){var r={};r[n]=e[n],t.push(r)}return t}function Oe(e){if(void 0!==e){var t={};return e.forEach((function(e){for(var n in e)t[n]=e[n]})),t}}function xe(e){if(void 0!==e){if(e.length<=1)return e;for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[t-r-1]=e[r];return n}}function Ee(e,t){var n,r,a,o;return i.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n=v(),s.t0=i.keys(e);case 2:if((s.t1=s.t0()).done){s.next=10;break}return r=s.t1.value,a=ue(t,e[r],r,e),s.delegateYield(t.apply(this,a),"t2",6);case 6:void 0!==(o=s.t2)&&n.push(o),s.next=2;break;case 10:return s.abrupt("return",n);case 11:case"end":return s.stop()}}),p,this)}function ke(e){throw{code:"D3137",stack:(new Error).stack,message:e||"$error() function evaluated"}}function Ce(e,t){if(!e)throw{code:"D3141",stack:(new Error).stack,message:t||"$assert() statement failed"}}function we(e){if(void 0!==e)return null===e?"null":m(e)?"number":"string"==typeof e?"string":"boolean"==typeof e?"boolean":Array.isArray(e)?"array":y(e)?"function":"object"}function Se(e,t){var n,r,a,o;return i.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(void 0!==e){s.next=2;break}return s.abrupt("return",void 0);case 2:if(!(e.length<=1)){s.next=4;break}return s.abrupt("return",e);case 4:if(void 0!==t){s.next=10;break}if(b(e)||g(e)){s.next=7;break}throw{stack:(new Error).stack,code:"D3070",index:1};case 7:n=i.mark((function e(t,n){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t>n);case 1:case"end":return e.stop()}}),e)})),s.next=11;break;case 10:n=t;case 11:return r=i.mark((function e(t,r){var a,o;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.mark((function e(t,r,a){return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==r.length){i.next=4;break}Array.prototype.push.apply(t,a),i.next=16;break;case 4:if(0!==a.length){i.next=8;break}Array.prototype.push.apply(t,r),i.next=16;break;case 8:return i.delegateYield(n(r[0],a[0]),"t0",9);case 9:if(!i.t0){i.next=14;break}return t.push(a[0]),i.delegateYield(e(t,r,a.slice(1)),"t1",12);case 12:i.next=16;break;case 14:return t.push(r[0]),i.delegateYield(e(t,r.slice(1),a),"t2",16);case 16:case"end":return i.stop()}}),e)})),o=[],e.delegateYield(a(o,t,r),"t0",3);case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})),a=i.mark((function e(t){var n,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(Array.isArray(t)&&!(t.length<=1)){i.next=4;break}return i.abrupt("return",t);case 4:return n=Math.floor(t.length/2),a=t.slice(0,n),o=t.slice(n),i.delegateYield(e(a),"t0",8);case 8:return a=i.t0,i.delegateYield(e(o),"t1",10);case 10:return o=i.t1,i.delegateYield(r(a,o),"t2",12);case 12:return i.abrupt("return",i.t2);case 13:case"end":return i.stop()}}),e)})),s.delegateYield(a(e),"t0",14);case 14:return o=s.t0,s.abrupt("return",o);case 16:case"end":return s.stop()}}),h)}function Ie(e){if(void 0!==e){if(e.length<=1)return e;for(var t=new Array(e.length),n=0;n<e.length;n++){var r=Math.floor(Math.random()*(n+1));n!==r&&(t[n]=t[r]),t[r]=e[n]}return t}}function Te(e){if(void 0!==e){if(!Array.isArray(e)||e.length<=1)return e;for(var t=_(e)?v():[],n=0;n<e.length;n++){for(var r=e[n],i=!1,a=0;a<t.length;a++)if(k(r,t[a])){i=!0;break}i||t.push(r)}return t}}function Ae(e,t){var n,r,a,o;return i.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n={},s.t0=i.keys(e);case 2:if((s.t1=s.t0()).done){s.next=11;break}return r=s.t1.value,a=e[r],o=ue(t,a,r,e),s.delegateYield(t.apply(this,o),"t2",7);case 7:ce(s.t2)&&(n[r]=a),s.next=2;break;case 11:return 0===Object.keys(n).length&&(n=void 0),s.abrupt("return",n);case 13:case"end":return s.stop()}}),f,this)}return{sum:w,count:S,max:I,min:T,average:A,string:P,substring:M,substringBefore:D,substringAfter:j,lowercase:R,uppercase:L,length:N,trim:B,pad:U,match:W,contains:q,replace:H,split:Q,join:J,formatNumber:$,formatBase:Z,number:ee,floor:ne,ceil:re,round:ie,abs:te,sqrt:ae,power:oe,random:se,boolean:ce,not:le,map:de,zip:fe,filter:pe,single:he,foldLeft:me,sift:Ae,keys:ge,lookup:be,append:ve,exists:_e,spread:ye,merge:Oe,reverse:xe,each:Ee,error:ke,assert:Ce,type:we,sort:Se,shuffle:Ie,distinct:Te,base64encode:K,base64decode:z,encodeUrlComponent:V,encodeUrl:G,decodeUrlComponent:Y,decodeUrl:X}}();t.exports=a}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":6}],3:[function(e,t,n){var r=e("./datetime"),a=e("./functions"),o=e("./utils"),s=e("./parser"),c=e("./signature"),l=function(){"use strict";var e=i.mark(U),t=i.mark(F),n=i.mark(W),l=i.mark(H),u=i.mark(K),d=i.mark(z),p=i.mark(V),h=i.mark(G),f=i.mark(ie),m=i.mark(se),g=i.mark(ue),b=i.mark(de),v=i.mark(pe),_=i.mark(me),y=i.mark(ve),O=i.mark(_e),x=i.mark(ye),E=i.mark(Oe),k=i.mark(Ee),C=i.mark(Ce),w=i.mark(Ie),S=i.mark(Pe),I=o.isNumeric,T=o.isArrayOfStrings,A=o.isArrayOfNumbers,P=o.createSequence,M=o.isSequence,D=o.isFunction,j=o.isLambda,R=o.isIterable,L=o.getFunctionArity,N=o.isDeepEqual,B=De(null);function U(t,n,r){var a,o,s,c;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=r.lookup("__evaluate_entry"))&&o(t,n,r),e.t0=t.type,e.next="path"===e.t0?5:"binary"===e.t0?8:"unary"===e.t0?11:"name"===e.t0?14:"string"===e.t0||"number"===e.t0||"value"===e.t0?16:"wildcard"===e.t0?18:"descendant"===e.t0?20:"parent"===e.t0?22:"condition"===e.t0?24:"block"===e.t0?27:"bind"===e.t0?30:"regex"===e.t0?33:"function"===e.t0?35:"variable"===e.t0?38:"lambda"===e.t0?40:"partial"===e.t0?42:"apply"===e.t0?45:"transform"===e.t0?48:50;break;case 5:return e.delegateYield(F(t,n,r),"t1",6);case 6:return a=e.t1,e.abrupt("break",50);case 8:return e.delegateYield(V(t,n,r),"t2",9);case 9:return a=e.t2,e.abrupt("break",50);case 11:return e.delegateYield(G(t,n,r),"t3",12);case 12:return a=e.t3,e.abrupt("break",50);case 14:return a=Y(t,n,r),e.abrupt("break",50);case 16:return a=X(t,n,r),e.abrupt("break",50);case 18:return a=Q(t,n,r),e.abrupt("break",50);case 20:return a=$(t,n,r),e.abrupt("break",50);case 22:return a=r.lookup(t.slot.label),e.abrupt("break",50);case 24:return e.delegateYield(de(t,n,r),"t4",25);case 25:return a=e.t4,e.abrupt("break",50);case 27:return e.delegateYield(pe(t,n,r),"t5",28);case 28:return a=e.t5,e.abrupt("break",50);case 30:return e.delegateYield(ue(t,n,r),"t6",31);case 31:return a=e.t6,e.abrupt("break",50);case 33:return a=he(t,n,r),e.abrupt("break",50);case 35:return e.delegateYield(_e(t,n,r),"t7",36);case 36:return a=e.t7,e.abrupt("break",50);case 38:return a=fe(t,n,r),e.abrupt("break",50);case 40:return a=xe(t,n,r),e.abrupt("break",50);case 42:return e.delegateYield(Ee(t,n,r),"t8",43);case 43:return a=e.t8,e.abrupt("break",50);case 45:return e.delegateYield(ve(t,n,r),"t9",46);case 46:return a=e.t9,e.abrupt("break",50);case 48:return a=ge(t,n,r),e.abrupt("break",50);case 50:if(!r.async||null!=a&&"function"==typeof a.then||(a=Promise.resolve(a)),!r.async||"function"!=typeof a.then||!t.nextFunction||"function"!=typeof a[t.nextFunction]){e.next=54;break}e.next=57;break;case 54:return e.next=56,a;case 56:a=e.sent;case 57:if(!Object.prototype.hasOwnProperty.call(t,"predicate")){e.next=65;break}s=0;case 59:if(!(s<t.predicate.length)){e.next=65;break}return e.delegateYield(z(t.predicate[s].expr,a,r),"t10",61);case 61:a=e.t10;case 62:s++,e.next=59;break;case 65:if("path"===t.type||!Object.prototype.hasOwnProperty.call(t,"group")){e.next=68;break}return e.delegateYield(se(t.group,a,r),"t11",67);case 67:a=e.t11;case 68:return(c=r.lookup("__evaluate_exit"))&&c(t,n,r,a),a&&M(a)&&!a.tupleStream&&(t.keepArray&&(a.keepSingleton=!0),0===a.length?a=void 0:1===a.length&&(a=a.keepSingleton?a:a[0])),e.abrupt("return",a);case 72:case"end":return e.stop()}}),e)}function F(e,n,r){var a,o,s,c,l,u;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Array.isArray(n)&&"variable"!==e.steps[0].type?n:P(n),s=!1,c=void 0,l=0;case 4:if(!(l<e.steps.length)){t.next=25;break}if((u=e.steps[l]).tuple&&(s=!0),0!==l||!u.consarray){t.next=12;break}return t.delegateYield(U(u,a,r),"t0",9);case 9:o=t.t0,t.next=19;break;case 12:if(!s){t.next=17;break}return t.delegateYield(K(u,a,c,r),"t1",14);case 14:c=t.t1,t.next=19;break;case 17:return t.delegateYield(W(u,a,r,l===e.steps.length-1),"t2",18);case 18:o=t.t2;case 19:if(s||void 0!==o&&0!==o.length){t.next=21;break}return t.abrupt("break",25);case 21:void 0===u.focus&&(a=o);case 22:l++,t.next=4;break;case 25:if(s)if(e.tuple)o=c;else for(o=P(),l=0;l<c.length;l++)o.push(c[l]["@"]);if(e.keepSingletonArray&&(Array.isArray(o)&&o.cons&&!o.sequence&&(o=P(o)),o.keepSingleton=!0),!e.hasOwnProperty("group")){t.next=30;break}return t.delegateYield(se(e.group,s?c:o,r),"t3",29);case 29:o=t.t3;case 30:return t.abrupt("return",o);case 31:case"end":return t.stop()}}),t)}function q(e,t){var n=De(e);for(var r in t)n.bind(r,t[r]);return n}function W(e,t,r,a){var o,s,c,l,u;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("sort"!==e.type){n.next=7;break}return n.delegateYield(me(e,t,r),"t0",2);case 2:if(o=n.t0,!e.stages){n.next=6;break}return n.delegateYield(H(e.stages,o,r),"t1",5);case 5:o=n.t1;case 6:return n.abrupt("return",o);case 7:o=P(),s=0;case 9:if(!(s<t.length)){n.next=24;break}return n.delegateYield(U(e,t[s],r),"t2",11);case 11:if(c=n.t2,!e.stages){n.next=20;break}l=0;case 14:if(!(l<e.stages.length)){n.next=20;break}return n.delegateYield(z(e.stages[l].expr,c,r),"t3",16);case 16:c=n.t3;case 17:l++,n.next=14;break;case 20:void 0!==c&&o.push(c);case 21:s++,n.next=9;break;case 24:return u=P(),a&&1===o.length&&Array.isArray(o[0])&&!M(o[0])?u=o[0]:o.forEach((function(e){!Array.isArray(e)||e.cons?u.push(e):e.forEach((function(e){return u.push(e)}))})),n.abrupt("return",u);case 27:case"end":return n.stop()}}),n)}function H(e,t,n){var r,a,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=t,a=0;case 2:if(!(a<e.length)){i.next=15;break}o=e[a],i.t0=o.type,i.next="filter"===i.t0?7:"index"===i.t0?10:12;break;case 7:return i.delegateYield(z(o.expr,r,n),"t1",8);case 8:return r=i.t1,i.abrupt("break",12);case 10:for(s=0;s<r.length;s++)r[s][o.value]=s;return i.abrupt("break",12);case 12:a++,i.next=2;break;case 15:return i.abrupt("return",r);case 16:case"end":return i.stop()}}),l)}function K(e,t,n,r){var a,o,s,c,l,d,p,h;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("sort"!==e.type){i.next=15;break}if(!n){i.next=6;break}return i.delegateYield(me(e,n,r),"t0",3);case 3:a=i.t0,i.next=11;break;case 6:return i.delegateYield(me(e,t,r),"t1",7);case 7:for(o=i.t1,(a=P()).tupleStream=!0,s=0;s<o.length;s++)(c={"@":o[s]})[e.index]=s,a.push(c);case 11:if(!e.stages){i.next=14;break}return i.delegateYield(H(e.stages,a,r),"t2",13);case 13:a=i.t2;case 14:return i.abrupt("return",a);case 15:(a=P()).tupleStream=!0,l=r,void 0===n&&(n=t.map((function(e){return{"@":e}}))),d=0;case 20:if(!(d<n.length)){i.next=28;break}return l=q(r,n[d]),i.delegateYield(U(e,n[d]["@"],l),"t3",23);case 23:if(void 0!==(p=i.t3))for(Array.isArray(p)||(p=[p]),h=0;h<p.length;h++)c={},Object.assign(c,n[d]),p.tupleStream?Object.assign(c,p[h]):(e.focus?(c[e.focus]=p[h],c["@"]=n[d]["@"]):c["@"]=p[h],e.index&&(c[e.index]=h),e.ancestor&&(c[e.ancestor.label]=n[d]["@"])),a.push(c);case 25:d++,i.next=20;break;case 28:if(!e.stages){i.next=31;break}return i.delegateYield(H(e.stages,a,r),"t4",30);case 30:a=i.t4;case 31:return i.abrupt("return",a);case 32:case"end":return i.stop()}}),u)}function z(e,t,n){var r,o,s,c,l,u;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=P(),t&&t.tupleStream&&(r.tupleStream=!0),Array.isArray(t)||(t=P(t)),"number"!==e.type){i.next=10;break}(o=Math.floor(e.value))<0&&(o=t.length+o),void 0!==(s=t[o])&&(Array.isArray(s)?r=s:r.push(s)),i.next=23;break;case 10:o=0;case 11:if(!(o<t.length)){i.next=23;break}return s=t[o],c=s,l=n,t.tupleStream&&(c=s["@"],l=q(n,s)),i.delegateYield(U(e,c,l),"t0",17);case 17:u=i.t0,I(u)&&(u=[u]),A(u)?u.forEach((function(e){var n=Math.floor(e);n<0&&(n=t.length+n),n===o&&r.push(s)})):a.boolean(u)&&r.push(s);case 20:o++,i.next=11;break;case 23:return i.abrupt("return",r);case 24:case"end":return i.stop()}}),d)}function V(e,t,n){var r,a,o,s,c;return i.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.delegateYield(U(e.lhs,t,n),"t0",1);case 1:if(a=l.t0,o=e.value,s=i.mark((function r(){return i.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(U(e.rhs,t,n),"t0",1);case 1:return r.abrupt("return",r.t0);case 2:case"end":return r.stop()}}),r)})),"and"!==o&&"or"!==o){l.next=15;break}return l.prev=5,l.delegateYield(ie(a,s,o),"t1",7);case 7:return l.abrupt("return",l.t1);case 10:throw l.prev=10,l.t2=l.catch(5),l.t2.position=e.position,l.t2.token=o,l.t2;case 15:return l.delegateYield(s(),"t3",16);case 16:c=l.t3,l.prev=17,l.t4=o,l.next="+"===l.t4||"-"===l.t4||"*"===l.t4||"/"===l.t4||"%"===l.t4?21:"="===l.t4||"!="===l.t4?23:"<"===l.t4||"<="===l.t4||">"===l.t4||">="===l.t4?25:"&"===l.t4?27:".."===l.t4?29:"in"===l.t4?31:33;break;case 21:return r=ee(a,c,o),l.abrupt("break",33);case 23:return r=te(a,c,o),l.abrupt("break",33);case 25:return r=ne(a,c,o),l.abrupt("break",33);case 27:return r=oe(a,c),l.abrupt("break",33);case 29:return r=le(a,c),l.abrupt("break",33);case 31:return r=re(a,c),l.abrupt("break",33);case 33:l.next=40;break;case 35:throw l.prev=35,l.t5=l.catch(17),l.t5.position=e.position,l.t5.token=o,l.t5;case 40:return l.abrupt("return",r);case 41:case"end":return l.stop()}}),p,null,[[5,10],[17,35]])}function G(e,t,n){var r,o,s,c;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.t0=e.value,i.next="-"===i.t0?3:"["===i.t0?15:"{"===i.t0?27:30;break;case 3:return i.delegateYield(U(e.expression,t,n),"t1",4);case 4:if(void 0!==(r=i.t1)){i.next=9;break}r=void 0,i.next=14;break;case 9:if(!I(r)){i.next=13;break}r=-r,i.next=14;break;case 13:throw{code:"D1002",stack:(new Error).stack,position:e.position,token:e.value,value:r};case 14:return i.abrupt("break",30);case 15:r=[],o=0;case 17:if(!(o<e.expressions.length)){i.next=25;break}return s=e.expressions[o],i.delegateYield(U(s,t,n),"t2",20);case 20:void 0!==(c=i.t2)&&("["===s.value?r.push(c):r=a.append(r,c));case 22:o++,i.next=17;break;case 25:return e.consarray&&Object.defineProperty(r,"cons",{enumerable:!1,configurable:!1,value:!0}),i.abrupt("break",30);case 27:return i.delegateYield(se(e,t,n),"t3",28);case 28:return r=i.t3,i.abrupt("break",30);case 30:return i.abrupt("return",r);case 31:case"end":return i.stop()}}),h)}function Y(e,t,n){return a.lookup(t,e.value)}function X(e){return e.value}function Q(e,t){var n=P();return Array.isArray(t)&&t.outerWrapper&&t.length>0&&(t=t[0]),null!==t&&"object"==typeof t&&Object.keys(t).forEach((function(e){var r=t[e];Array.isArray(r)?(r=J(r),n=a.append(n,r)):n.push(r)})),n}function J(e,t){return void 0===t&&(t=[]),Array.isArray(e)?e.forEach((function(e){J(e,t)})):t.push(e),t}function $(e,t){var n,r=P();return void 0!==t&&(Z(t,r),n=1===r.length?r[0]:r),n}function Z(e,t){Array.isArray(e)||t.push(e),Array.isArray(e)?e.forEach((function(e){Z(e,t)})):null!==e&&"object"==typeof e&&Object.keys(e).forEach((function(n){Z(e[n],t)}))}function ee(e,t,n){var r;if(void 0!==e&&!I(e))throw{code:"T2001",stack:(new Error).stack,value:e};if(void 0!==t&&!I(t))throw{code:"T2002",stack:(new Error).stack,value:t};if(void 0===e||void 0===t)return r;switch(n){case"+":r=e+t;break;case"-":r=e-t;break;case"*":r=e*t;break;case"/":r=e/t;break;case"%":r=e%t}return r}function te(e,t,n){var r;if(void 0===e||void 0===t)return!1;switch(n){case"=":r=N(e,t);break;case"!=":r=!N(e,t)}return r}function ne(e,t,n){var r,i=typeof e,a=typeof t;if("undefined"!==i&&"string"!==i&&"number"!==i||"undefined"!==a&&"string"!==a&&"number"!==a)throw{code:"T2010",stack:(new Error).stack,value:"string"!==i&&"number"!==i?e:t};if("undefined"!==i&&"undefined"!==a){if(i!==a)throw{code:"T2009",stack:(new Error).stack,value:e,value2:t};switch(n){case"<":r=e<t;break;case"<=":r=e<=t;break;case">":r=e>t;break;case">=":r=e>=t}return r}}function re(e,t){var n=!1;if(void 0===e||void 0===t)return!1;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++)if(t[r]===e){n=!0;break}return n}function ie(e,t,n){var r,a;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=ae(e),i.t0=n,i.next="and"===i.t0?4:"or"===i.t0?12:20;break;case 4:if(i.t1=a,!i.t1){i.next=10;break}return i.t2=ae,i.delegateYield(t(),"t3",8);case 8:i.t4=i.t3,i.t1=(0,i.t2)(i.t4);case 10:return r=i.t1,i.abrupt("break",20);case 12:if(i.t5=a,i.t5){i.next=18;break}return i.t6=ae,i.delegateYield(t(),"t7",16);case 16:i.t8=i.t7,i.t5=(0,i.t6)(i.t8);case 18:return r=i.t5,i.abrupt("break",20);case 20:return i.abrupt("return",r);case 21:case"end":return i.stop()}}),f)}function ae(e){var t=a.boolean(e);return void 0!==t&&t}function oe(e,t){var n="",r="";return void 0!==e&&(n=a.string(e)),void 0!==t&&(r=a.string(t)),n.concat(r)}function se(e,t,n){var r,o,s,c,l,u,d,p,h,f,g,b,v;return i.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:r={},o={},s=!(!t||!t.tupleStream),Array.isArray(t)||(t=P(t)),0===t.length&&t.push(void 0),c=0;case 6:if(!(c<t.length)){m.next=31;break}l=t[c],u=s?q(n,l):n,d=0;case 10:if(!(d<e.lhs.length)){m.next=28;break}return p=e.lhs[d],m.delegateYield(U(p[0],s?l["@"]:l,u),"t0",13);case 13:if("string"==typeof(h=m.t0)||void 0===h){m.next=16;break}throw{code:"T1003",stack:(new Error).stack,position:e.position,value:h};case 16:if(void 0===h){m.next=25;break}if(f={data:l,exprIndex:d},!o.hasOwnProperty(h)){m.next=24;break}if(o[h].exprIndex===d){m.next=21;break}throw{code:"D1009",stack:(new Error).stack,position:e.position,value:h};case 21:o[h].data=a.append(o[h].data,l),m.next=25;break;case 24:o[h]=f;case 25:d++,m.next=10;break;case 28:c++,m.next=6;break;case 31:m.t1=i.keys(o);case 32:if((m.t2=m.t1()).done){m.next=43;break}return h=m.t2.value,f=o[h],g=f.data,u=n,s&&(b=ce(f.data),g=b["@"],delete b["@"],u=q(n,b)),m.delegateYield(U(e.lhs[f.exprIndex][1],g,u),"t3",39);case 39:void 0!==(v=m.t3)&&(r[h]=v),m.next=32;break;case 43:return m.abrupt("return",r);case 44:case"end":return m.stop()}}),m)}function ce(e){if(!Array.isArray(e))return e;var t={};Object.assign(t,e[0]);for(var n=1;n<e.length;n++)for(var r in e[n])t[r]=a.append(t[r],e[n][r]);return t}function le(e,t){var n;if(void 0!==e&&!Number.isInteger(e))throw{code:"T2003",stack:(new Error).stack,value:e};if(void 0!==t&&!Number.isInteger(t))throw{code:"T2004",stack:(new Error).stack,value:t};if(void 0===e||void 0===t)return n;if(e>t)return n;var r=t-e+1;if(r>1e7)throw{code:"D2014",stack:(new Error).stack,value:r};n=new Array(r);for(var i=e,a=0;i<=t;i++,a++)n[a]=i;return n.sequence=!0,n}function ue(e,t,n){var r;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(U(e.rhs,t,n),"t0",1);case 1:return r=i.t0,n.bind(e.lhs.value,r),i.abrupt("return",r);case 4:case"end":return i.stop()}}),g)}function de(e,t,n){var r,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(U(e.condition,t,n),"t0",1);case 1:if(o=i.t0,!a.boolean(o)){i.next=7;break}return i.delegateYield(U(e.then,t,n),"t1",4);case 4:r=i.t1,i.next=10;break;case 7:if(void 0===e.else){i.next=10;break}return i.delegateYield(U(e.else,t,n),"t2",9);case 9:r=i.t2;case 10:return i.abrupt("return",r);case 11:case"end":return i.stop()}}),b)}function pe(e,t,n){var r,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=De(n),o=0;case 2:if(!(o<e.expressions.length)){i.next=8;break}return i.delegateYield(U(e.expressions[o],t,a),"t0",4);case 4:r=i.t0;case 5:o++,i.next=2;break;case 8:return i.abrupt("return",r);case 9:case"end":return i.stop()}}),v)}function he(e){var t=new Le.RegexEngine(e.value);return function n(r,i){var a;t.lastIndex=i||0;var o=t.exec(r);if(null!==o){if(a={match:o[0],start:o.index,end:o.index+o[0].length,groups:[]},o.length>1)for(var s=1;s<o.length;s++)a.groups.push(o[s]);a.next=function(){if(!(t.lastIndex>=r.length)){var i=n(r,t.lastIndex);if(i&&""===i.match)throw{code:"D1004",stack:(new Error).stack,position:e.position,value:e.value.source};return i}}}return a}}function fe(e,t,n){return""===e.value?t&&t.outerWrapper?t[0]:t:n.lookup(e.value)}function me(e,t,n){var r,o,s,c,l;return i.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return o=t,s=!!t.tupleStream,c=i.mark((function t(r,a){var o,c,l,u,d,p,h,f,m;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=0,c=0;case 2:if(!(0===o&&c<e.terms.length)){t.next=35;break}return l=e.terms[c],u=r,d=n,s&&(u=r["@"],d=q(n,r)),t.delegateYield(U(l.expression,u,d),"t0",8);case 8:return p=t.t0,u=a,d=n,s&&(u=a["@"],d=q(n,a)),t.delegateYield(U(l.expression,u,d),"t1",13);case 13:if(h=t.t1,m=typeof h,"undefined"!=(f=typeof p)){t.next=19;break}return o="undefined"===m?0:1,t.abrupt("continue",32);case 19:if("undefined"!==m){t.next=22;break}return o=-1,t.abrupt("continue",32);case 22:if(!("string"!==f&&"number"!==f||"string"!==m&&"number"!==m)){t.next=24;break}throw{code:"T2008",stack:(new Error).stack,position:e.position,value:"string"!==f&&"number"!==f?p:h};case 24:if(f===m){t.next=26;break}throw{code:"T2007",stack:(new Error).stack,position:e.position,value:p,value2:h};case 26:if(p!==h){t.next=30;break}return t.abrupt("continue",32);case 30:o=p<h?-1:1;case 31:!0===l.descending&&(o=-o);case 32:c++,t.next=2;break;case 35:return t.abrupt("return",1===o);case 36:case"end":return t.stop()}}),t)})),l={environment:n,input:t},u.delegateYield(a.sort.apply(l,[o,c]),"t0",5);case 5:return r=u.t0,u.abrupt("return",r);case 7:case"end":return u.stop()}}),_)}function ge(e,t,n){return Ae(i.mark((function t(r){var a,o,s,c,l,u,d,p,h,f,m;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==r){t.next=2;break}return t.abrupt("return",void 0);case 2:if(a=n.lookup("clone"),D(a)){t.next=5;break}throw{code:"T2013",stack:(new Error).stack,position:e.position};case 5:return t.delegateYield(ye(a,[r],null,n),"t0",6);case 6:return o=t.t0,t.delegateYield(U(e.pattern,o,n),"t1",8);case 8:if(void 0===(s=t.t1)){t.next=33;break}Array.isArray(s)||(s=[s]),c=0;case 12:if(!(c<s.length)){t.next=33;break}return l=s[c],t.delegateYield(U(e.update,l,n),"t2",15);case 15:if(u=t.t2,"undefined"==(d=typeof u)){t.next=21;break}if("object"===d&&null!==u&&!Array.isArray(u)){t.next=20;break}throw{code:"T2011",stack:(new Error).stack,position:e.update.position,value:u};case 20:for(p in u)l[p]=u[p];case 21:if(void 0===e.delete){t.next=30;break}return t.delegateYield(U(e.delete,l,n),"t3",23);case 23:if(void 0===(h=t.t3)){t.next=30;break}if(f=h,Array.isArray(h)||(h=[h]),T(h)){t.next=29;break}throw{code:"T2012",stack:(new Error).stack,position:e.delete.position,value:f};case 29:for(m=0;m<h.length;m++)"object"==typeof l&&null!==l&&delete l[h[m]];case 30:c++,t.next=12;break;case 33:return t.abrupt("return",o);case 34:case"end":return t.stop()}}),t)})),"<(oa):o>")}var be=s("function($f, $g) { function($x){ $g($f($x)) } }");function ve(e,t,n){var r,a,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(U(e.lhs,t,n),"t0",1);case 1:if(a=i.t0,"function"!==e.rhs.type){i.next=7;break}return i.delegateYield(_e(e.rhs,t,n,{context:a}),"t1",4);case 4:r=i.t1,i.next=20;break;case 7:return i.delegateYield(U(e.rhs,t,n),"t2",8);case 8:if(o=i.t2,D(o)){i.next=11;break}throw{code:"T2006",stack:(new Error).stack,position:e.position,value:o};case 11:if(!D(a)){i.next=18;break}return i.delegateYield(U(be,null,n),"t3",13);case 13:return s=i.t3,i.delegateYield(ye(s,[a,o],null,n),"t4",15);case 15:r=i.t4,i.next=20;break;case 18:return i.delegateYield(ye(o,[a],null,n),"t5",19);case 19:r=i.t5;case 20:return i.abrupt("return",r);case 21:case"end":return i.stop()}}),y)}function _e(e,t,n,r){var a,o,s,c,l,u;return i.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.delegateYield(U(e.procedure,t,n),"t0",1);case 1:if(void 0!==(o=d.t0)||"path"!==e.procedure.type||!n.lookup(e.procedure.steps[0].value)){d.next=4;break}throw{code:"T1005",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};case 4:s=[],void 0!==r&&s.push(r.context),c=i.mark((function r(){var a,o;return i.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(U(e.arguments[l],t,n),"t0",1);case 1:a=r.t0,D(a)?((o=i.mark((function e(){var t,r,o,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,r=new Array(t),o=0;o<t;o++)r[o]=s[o];return e.delegateYield(ye(a,r,null,n),"t0",2);case 2:return e.abrupt("return",e.t0);case 3:case"end":return e.stop()}}),e)}))).arity=L(a),s.push(o)):s.push(a);case 3:case"end":return r.stop()}}),r)})),l=0;case 8:if(!(l<e.arguments.length)){d.next=13;break}return d.delegateYield(c(),"t1",10);case 10:l++,d.next=8;break;case 13:return u="path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value,d.prev=14,"object"==typeof o&&(o.token=u,o.position=e.position),d.delegateYield(ye(o,s,t,n),"t2",17);case 17:a=d.t2,d.next=25;break;case 20:throw d.prev=20,d.t3=d.catch(14),d.t3.position||(d.t3.position=e.position),d.t3.token||(d.t3.token=u),d.t3;case 25:return d.abrupt("return",a);case 26:case"end":return d.stop()}}),O,null,[[14,20]])}function ye(e,t,n,r){var a,o,s,c;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(Oe(e,t,n,r),"t0",1);case 1:a=i.t0;case 2:if(!j(a)||!0!==a.thunk){i.next=21;break}return i.delegateYield(U(a.body.procedure,a.input,a.environment),"t1",4);case 4:o=i.t1,"variable"===a.body.procedure.type&&(o.token=a.body.procedure.value),o.position=a.body.procedure.position,s=[],c=0;case 9:if(!(c<a.body.arguments.length)){i.next=17;break}return i.t2=s,i.delegateYield(U(a.body.arguments[c],a.input,a.environment),"t3",12);case 12:i.t4=i.t3,i.t2.push.call(i.t2,i.t4);case 14:c++,i.next=9;break;case 17:return i.delegateYield(Oe(o,s,n,r),"t5",18);case 18:a=i.t5,i.next=2;break;case 21:return i.abrupt("return",a);case 22:case"end":return i.stop()}}),x)}function Oe(e,t,n,r){var a,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,o=t,e&&(o=ke(e.signature,t,n)),!j(e)){i.next=8;break}return i.delegateYield(Ce(e,o),"t0",5);case 5:a=i.t0,i.next=24;break;case 8:if(!e||!0!==e._jsonata_function){i.next=16;break}if(s={environment:r,input:n},a=e.implementation.apply(s,o),!R(a)){i.next=14;break}return i.delegateYield(a,"t1",13);case 13:a=i.t1;case 14:i.next=24;break;case 16:if("function"!=typeof e){i.next=23;break}if(a=e.apply(n,o),!R(a)){i.next=21;break}return i.delegateYield(a,"t2",20);case 20:a=i.t2;case 21:i.next=24;break;case 23:throw{code:"T1006",stack:(new Error).stack};case 24:i.next=30;break;case 26:throw i.prev=26,i.t3=i.catch(0),e&&(void 0===i.t3.token&&void 0!==e.token&&(i.t3.token=e.token),i.t3.position=e.position),i.t3;case 30:return i.abrupt("return",a);case 31:case"end":return i.stop()}}),E,null,[[0,26]])}function xe(e,t,n){var r={_jsonata_lambda:!0,input:t,environment:n,arguments:e.arguments,signature:e.signature,body:e.body};return!0===e.thunk&&(r.thunk=!0),r.apply=i.mark((function e(n,a){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ye(r,a,t,n.environment),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e)})),r}function Ee(e,t,n){var r,a,o,s,c;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=[],o=0;case 2:if(!(o<e.arguments.length)){i.next=15;break}if("operator"!==(s=e.arguments[o]).type||"?"!==s.value){i.next=8;break}a.push(s),i.next=12;break;case 8:return i.t0=a,i.delegateYield(U(s,t,n),"t1",10);case 10:i.t2=i.t1,i.t0.push.call(i.t0,i.t2);case 12:o++,i.next=2;break;case 15:return i.delegateYield(U(e.procedure,t,n),"t3",16);case 16:if(void 0!==(c=i.t3)||"path"!==e.procedure.type||!n.lookup(e.procedure.steps[0].value)){i.next=19;break}throw{code:"T1007",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};case 19:if(!j(c)){i.next=23;break}r=we(c,a),i.next=32;break;case 23:if(!c||!0!==c._jsonata_function){i.next=27;break}r=Se(c.implementation,a),i.next=32;break;case 27:if("function"!=typeof c){i.next=31;break}r=Se(c,a),i.next=32;break;case 31:throw{code:"T1008",stack:(new Error).stack,position:e.position,token:"path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value};case 32:return i.abrupt("return",r);case 33:case"end":return i.stop()}}),k)}function ke(e,t,n){return void 0===e?t:e.validate(t,n)}function Ce(e,t){var n,r;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=De(e.environment),e.arguments.forEach((function(e,n){r.bind(e.value,t[n])})),"function"!=typeof e.body){i.next=7;break}return i.delegateYield(Ie(e.body,r),"t0",4);case 4:n=i.t0,i.next=9;break;case 7:return i.delegateYield(U(e.body,e.input,r),"t1",8);case 8:n=i.t1;case 9:return i.abrupt("return",n);case 10:case"end":return i.stop()}}),C)}function we(e,t){var n=De(e.environment),r=[];return e.arguments.forEach((function(e,i){var a=t[i];a&&"operator"===a.type&&"?"===a.value?r.push(e):n.bind(e.value,a)})),{_jsonata_lambda:!0,input:e.input,environment:n,arguments:r,body:e.body}}function Se(e,t){var n=Te(e),r="function("+(n=n.map((function(e){return"$"+e.trim()}))).join(", ")+"){ _ }",i=s(r);return i.body=e,we(i,t)}function Ie(e,t){var n,r,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=Te(e),r=n.map((function(e){return t.lookup(e.trim())})),a={environment:t},o=e.apply(a,r),!R(o)){i.next=7;break}return i.delegateYield(o,"t0",6);case 6:o=i.t0;case 7:return i.abrupt("return",o);case 8:case"end":return i.stop()}}),w)}function Te(e){var t=e.toString();return/\(([^)]*)\)/.exec(t)[1].split(",")}function Ae(e,t){var n={_jsonata_function:!0,implementation:e};return void 0!==t&&(n.signature=c(t)),n}function Pe(e,t){var n,r,a;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:n=this.input,void 0!==t&&(n=t,Array.isArray(n)&&!M(n)&&((n=P(n)).outerWrapper=!0)),i.prev=4,r=s(e,!1),i.next=12;break;case 8:throw i.prev=8,i.t0=i.catch(4),Re(i.t0),{stack:(new Error).stack,code:"D3120",value:i.t0.message,error:i.t0};case 12:return i.prev=12,i.delegateYield(U(r,n,this.environment),"t1",14);case 14:a=i.t1,i.next=21;break;case 17:throw i.prev=17,i.t2=i.catch(12),Re(i.t2),{stack:(new Error).stack,code:"D3121",value:i.t2.message,error:i.t2};case 21:return i.abrupt("return",a);case 22:case"end":return i.stop()}}),S,this,[[4,8],[12,17]])}function Me(e){if(void 0!==e)return JSON.parse(a.string(e))}function De(e){var t={};return{bind:function(e,n){t[e]=n},lookup:function(n){var r;return t.hasOwnProperty(n)?r=t[n]:e&&(r=e.lookup(n)),r},timestamp:e?e.timestamp:null,async:!!e&&e.async,global:e?e.global:{ancestry:[null]}}}B.bind("sum",Ae(a.sum,"<a<n>:n>")),B.bind("count",Ae(a.count,"<a:n>")),B.bind("max",Ae(a.max,"<a<n>:n>")),B.bind("min",Ae(a.min,"<a<n>:n>")),B.bind("average",Ae(a.average,"<a<n>:n>")),B.bind("string",Ae(a.string,"<x-b?:s>")),B.bind("substring",Ae(a.substring,"<s-nn?:s>")),B.bind("substringBefore",Ae(a.substringBefore,"<s-s:s>")),B.bind("substringAfter",Ae(a.substringAfter,"<s-s:s>")),B.bind("lowercase",Ae(a.lowercase,"<s-:s>")),B.bind("uppercase",Ae(a.uppercase,"<s-:s>")),B.bind("length",Ae(a.length,"<s-:n>")),B.bind("trim",Ae(a.trim,"<s-:s>")),B.bind("pad",Ae(a.pad,"<s-ns?:s>")),B.bind("match",Ae(a.match,"<s-f<s:o>n?:a<o>>")),B.bind("contains",Ae(a.contains,"<s-(sf):b>")),B.bind("replace",Ae(a.replace,"<s-(sf)(sf)n?:s>")),B.bind("split",Ae(a.split,"<s-(sf)n?:a<s>>")),B.bind("join",Ae(a.join,"<a<s>s?:s>")),B.bind("formatNumber",Ae(a.formatNumber,"<n-so?:s>")),B.bind("formatBase",Ae(a.formatBase,"<n-n?:s>")),B.bind("formatInteger",Ae(r.formatInteger,"<n-s:s>")),B.bind("parseInteger",Ae(r.parseInteger,"<s-s:n>")),B.bind("number",Ae(a.number,"<(nsb)-:n>")),B.bind("floor",Ae(a.floor,"<n-:n>")),B.bind("ceil",Ae(a.ceil,"<n-:n>")),B.bind("round",Ae(a.round,"<n-n?:n>")),B.bind("abs",Ae(a.abs,"<n-:n>")),B.bind("sqrt",Ae(a.sqrt,"<n-:n>")),B.bind("power",Ae(a.power,"<n-n:n>")),B.bind("random",Ae(a.random,"<:n>")),B.bind("boolean",Ae(a.boolean,"<x-:b>")),B.bind("not",Ae(a.not,"<x-:b>")),B.bind("map",Ae(a.map,"<af>")),B.bind("zip",Ae(a.zip,"<a+>")),B.bind("filter",Ae(a.filter,"<af>")),B.bind("single",Ae(a.single,"<af?>")),B.bind("reduce",Ae(a.foldLeft,"<afj?:j>")),B.bind("sift",Ae(a.sift,"<o-f?:o>")),B.bind("keys",Ae(a.keys,"<x-:a<s>>")),B.bind("lookup",Ae(a.lookup,"<x-s:x>")),B.bind("append",Ae(a.append,"<xx:a>")),B.bind("exists",Ae(a.exists,"<x:b>")),B.bind("spread",Ae(a.spread,"<x-:a<o>>")),B.bind("merge",Ae(a.merge,"<a<o>:o>")),B.bind("reverse",Ae(a.reverse,"<a:a>")),B.bind("each",Ae(a.each,"<o-f:a>")),B.bind("error",Ae(a.error,"<s?:x>")),B.bind("assert",Ae(a.assert,"<bs?:x>")),B.bind("type",Ae(a.type,"<x:s>")),B.bind("sort",Ae(a.sort,"<af?:a>")),B.bind("shuffle",Ae(a.shuffle,"<a:a>")),B.bind("distinct",Ae(a.distinct,"<x:x>")),B.bind("base64encode",Ae(a.base64encode,"<s-:s>")),B.bind("base64decode",Ae(a.base64decode,"<s-:s>")),B.bind("encodeUrlComponent",Ae(a.encodeUrlComponent,"<s-:s>")),B.bind("encodeUrl",Ae(a.encodeUrl,"<s-:s>")),B.bind("decodeUrlComponent",Ae(a.decodeUrlComponent,"<s-:s>")),B.bind("decodeUrl",Ae(a.decodeUrl,"<s-:s>")),B.bind("eval",Ae(Pe,"<sx?:x>")),B.bind("toMillis",Ae(r.toMillis,"<s-s?:n>")),B.bind("fromMillis",Ae(r.fromMillis,"<n-s?s?:s>")),B.bind("clone",Ae(Me,"<(oa)-:o>"));var je={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function Re(e){var t=je[e.code];if(void 0!==t){var n=t.replace(/\{\{\{([^}]+)}}}/g,(function(){return e[arguments[1]]}));n=n.replace(/\{\{([^}]+)}}/g,(function(){return JSON.stringify(e[arguments[1]])})),e.message=n}}function Le(e,t){var n,i;try{n=s(e,t&&t.recover),i=n.errors,delete n.errors}catch(c){throw Re(c),c}var a=De(B),o=new Date;return a.bind("now",Ae((function(e,t){return r.fromMillis(o.getTime(),e,t)}),"<s?s?:s>")),a.bind("millis",Ae((function(){return o.getTime()}),"<:n>")),t&&t.RegexEngine?Le.RegexEngine=t.RegexEngine:Le.RegexEngine=RegExp,{evaluate:function(e,t,r){if(void 0!==i){var s={code:"S0500",position:0};throw Re(s),s}var c,l,u;if(void 0!==t)for(var d in c=De(a),t)c.bind(d,t[d]);else c=a;if(c.bind("$",e),o=new Date,c.timestamp=o,Array.isArray(e)&&!M(e)&&((e=P(e)).outerWrapper=!0),"function"==typeof r){c.async=!0;var p=function(e){Re(e),r(e,null)},h=function e(t){(l=u.next(t)).done?r(null,l.value):l.value.then(e).catch(p)};u=U(n,e,c),(l=u.next()).value.then(h).catch(p)}else try{for(u=U(n,e,c),l=u.next();!l.done;)l=u.next(l.value);return l.value}catch(s){throw Re(s),s}},assign:function(e,t){a.bind(e,t)},registerFunction:function(e,t,n){var r=Ae(t,n);a.bind(e,r)},ast:function(){return n},errors:function(){return i}}}return Le.parser=s,Le}();t.exports=l},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(e,t,n){var r=e("./signature"),i=function(){"use strict";var e={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},n=function(n){var r=0,i=n.length,a=function(e,t){return{type:e,value:t,position:r}},o=function(){for(var e,t,a=r,o=0;r<i;){var s=n.charAt(r);if("/"===s&&"\\"!==n.charAt(r-1)&&0===o){if(""===(e=n.substring(a,r)))throw{code:"S0301",stack:(new Error).stack,position:r};for(r++,s=n.charAt(r),a=r;"i"===s||"m"===s;)r++,s=n.charAt(r);return t=n.substring(a,r)+"g",new RegExp(e,t)}"("!==s&&"["!==s&&"{"!==s||"\\"===n.charAt(r-1)||o++,")"!==s&&"]"!==s&&"}"!==s||"\\"===n.charAt(r-1)||o--,r++}throw{code:"S0302",stack:(new Error).stack,position:r}};return function s(c){if(r>=i)return null;for(var l=n.charAt(r);r<i&&" \t\n\r\v".indexOf(l)>-1;)r++,l=n.charAt(r);if("/"===l&&"*"===n.charAt(r+1)){var u=r;for(r+=2,l=n.charAt(r);"*"!==l||"/"!==n.charAt(r+1);)if(l=n.charAt(++r),r>=i)throw{code:"S0106",stack:(new Error).stack,position:u};return r+=2,l=n.charAt(r),s(c)}if(!0!==c&&"/"===l)return r++,a("regex",o());if("."===l&&"."===n.charAt(r+1))return r+=2,a("operator","..");if(":"===l&&"="===n.charAt(r+1))return r+=2,a("operator",":=");if("!"===l&&"="===n.charAt(r+1))return r+=2,a("operator","!=");if(">"===l&&"="===n.charAt(r+1))return r+=2,a("operator",">=");if("<"===l&&"="===n.charAt(r+1))return r+=2,a("operator","<=");if("*"===l&&"*"===n.charAt(r+1))return r+=2,a("operator","**");if("~"===l&&">"===n.charAt(r+1))return r+=2,a("operator","~>");if(Object.prototype.hasOwnProperty.call(e,l))return r++,a("operator",l);if('"'===l||"'"===l){var d=l;r++;for(var p="";r<i;){if("\\"===(l=n.charAt(r)))if(r++,l=n.charAt(r),Object.prototype.hasOwnProperty.call(t,l))p+=t[l];else{if("u"!==l)throw{code:"S0103",stack:(new Error).stack,position:r,token:l};var h=n.substr(r+1,4);if(!/^[0-9a-fA-F]+$/.test(h))throw{code:"S0104",stack:(new Error).stack,position:r};var f=parseInt(h,16);p+=String.fromCharCode(f),r+=4}else{if(l===d)return r++,a("string",p);p+=l}r++}throw{code:"S0101",stack:(new Error).stack,position:r}}var m,g=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/.exec(n.substring(r));if(null!==g){var b=parseFloat(g[0]);if(!isNaN(b)&&isFinite(b))return r+=g[0].length,a("number",b);throw{code:"S0102",stack:(new Error).stack,position:r,token:g[0]}}if("`"===l){r++;var v=n.indexOf("`",r);if(-1!==v)return m=n.substring(r,v),r=v+1,a("name",m);throw r=i,{code:"S0105",stack:(new Error).stack,position:r}}for(var _,y=r;;)if(_=n.charAt(y),y===i||" \t\n\r\v".indexOf(_)>-1||Object.prototype.hasOwnProperty.call(e,_)){if("$"===n.charAt(r))return m=n.substring(r+1,y),r=y,a("variable",m);switch(m=n.substring(r,y),r=y,m){case"or":case"in":case"and":return a("operator",m);case"true":return a("value",!0);case"false":return a("value",!1);case"null":return a("value",null);default:return r===i&&""===m?null:a("name",m)}}else y++}};return function(t,i){var a,o,s={},c=[],l=function(){var e=[];"(end)"!==a.id&&e.push({type:a.type,value:a.value,position:a.position});for(var t=o();null!==t;)e.push(t),t=o();return e},u={nud:function(){var e={code:"S0211",token:this.value,position:this.position};if(i)return e.remaining=l(),e.type="error",c.push(e),e;throw e.stack=(new Error).stack,e}},d=function(e,t){var n=s[e];return t=t||0,n?t>=n.lbp&&(n.lbp=t):((n=Object.create(u)).id=n.value=e,n.lbp=t,s[e]=n),n},p=function(e){if(i){e.remaining=l(),c.push(e);var t=s["(error)"];return(a=Object.create(t)).error=e,a.type="(error)",a}throw e.stack=(new Error).stack,e},h=function(e,n){if(e&&a.id!==e){var r={code:"(end)"===a.id?"S0203":"S0202",position:a.position,token:a.value,value:e};return p(r)}var i=o(n);if(null===i)return(a=s["(end)"]).position=t.length,a;var c,l=i.value,u=i.type;switch(u){case"name":case"variable":c=s["(name)"];break;case"operator":if(!(c=s[l]))return p({code:"S0204",stack:(new Error).stack,position:i.position,token:l});break;case"string":case"number":case"value":c=s["(literal)"];break;case"regex":u="regex",c=s["(regex)"];break;default:return p({code:"S0205",stack:(new Error).stack,position:i.position,token:l})}return(a=Object.create(c)).value=l,a.type=u,a.position=i.position,a},f=function(e){var t,n=a;for(h(null,!0),t=n.nud();e<a.lbp;)n=a,h(),t=n.led(t);return t},m=function(e){d(e,0).nud=function(){return this}},g=function(t,n,r){var i=n||e[t],a=d(t,i);return a.led=r||function(e){return this.lhs=e,this.rhs=f(i),this.type="binary",this},a},b=function(e,t,n){var r=d(e,t);return r.led=n,r},v=function(e,t){var n=d(e);return n.nud=t||function(){return this.expression=f(70),this.type="unary",this},n};m("(end)"),m("(name)"),m("(literal)"),m("(regex)"),d(":"),d(";"),d(","),d(")"),d("]"),d("}"),d(".."),g("."),g("+"),g("-"),g("*"),g("/"),g("%"),g("="),g("<"),g(">"),g("!="),g("<="),g(">="),g("&"),g("and"),g("or"),g("in"),m("and"),m("or"),m("in"),v("-"),g("~>"),b("(error)",10,(function(e){return this.lhs=e,this.error=a.error,this.remaining=l(),this.type="error",this})),v("*",(function(){return this.type="wildcard",this})),v("**",(function(){return this.type="descendant",this})),v("%",(function(){return this.type="parent",this})),g("(",e["("],(function(e){if(this.procedure=e,this.type="function",this.arguments=[],")"!==a.id)for(;"operator"===a.type&&"?"===a.id?(this.type="partial",this.arguments.push(a),h("?")):this.arguments.push(f(0)),","===a.id;)h(",");if(h(")",!0),"name"===e.type&&("function"===e.value||"\u03bb"===e.value)){if(this.arguments.forEach((function(e,t){if("variable"!==e.type)return p({code:"S0208",stack:(new Error).stack,position:e.position,token:e.value,value:t+1})})),this.type="lambda","<"===a.id){for(var t=a.position,n=1,i="<";n>0&&"{"!==a.id&&"(end)"!==a.id;){var o=h();">"===o.id?n--:"<"===o.id&&n++,i+=o.value}h(">");try{this.signature=r(i)}catch(T){return T.position=t+T.offset,p(T)}}h("{"),this.body=f(0),h("}")}return this})),v("(",(function(){for(var e=[];")"!==a.id&&(e.push(f(0)),";"===a.id);)h(";");return h(")",!0),this.type="block",this.expressions=e,this})),v("[",(function(){var e=[];if("]"!==a.id)for(;;){var t=f(0);if(".."===a.id){var n={type:"binary",value:"..",position:a.position,lhs:t};h(".."),n.rhs=f(0),t=n}if(e.push(t),","!==a.id)break;h(",")}return h("]",!0),this.expressions=e,this.type="unary",this})),g("[",e["["],(function(t){if("]"===a.id){for(var n=t;n&&"binary"===n.type&&"["===n.value;)n=n.lhs;return n.keepArray=!0,h("]"),t}return this.lhs=t,this.rhs=f(e["]"]),this.type="binary",h("]",!0),this})),g("^",e["^"],(function(e){h("(");for(var t=[];;){var n={descending:!1};if("<"===a.id?h("<"):">"===a.id&&(n.descending=!0,h(">")),n.expression=f(0),t.push(n),","!==a.id)break;h(",")}return h(")"),this.lhs=e,this.rhs=t,this.type="binary",this}));var _=function(e){var t=[];if("}"!==a.id)for(;;){var n=f(0);h(":");var r=f(0);if(t.push([n,r]),","!==a.id)break;h(",")}return h("}",!0),void 0===e?(this.lhs=t,this.type="unary"):(this.lhs=e,this.rhs=t,this.type="binary"),this};v("{",_),g("{",e["{"],_),b(":=",e[":="],(function(t){return"variable"!==t.type?p({code:"S0212",stack:(new Error).stack,position:t.position,token:t.value}):(this.lhs=t,this.rhs=f(e[":="]-1),this.type="binary",this)})),g("@",e["@"],(function(t){return this.lhs=t,this.rhs=f(e["@"]),"variable"!==this.rhs.type?p({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)})),g("#",e["#"],(function(t){return this.lhs=t,this.rhs=f(e["#"]),"variable"!==this.rhs.type?p({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)})),g("?",e["?"],(function(e){return this.type="condition",this.condition=e,this.then=f(0),":"===a.id&&(h(":"),this.else=f(0)),this})),v("|",(function(){return this.type="transform",this.pattern=f(0),h("|"),this.update=f(0),","===a.id&&(h(","),this.delete=f(0)),h("|"),this}));var y=function e(t){var n;if("function"!==t.type||t.predicate)if("condition"===t.type)t.then=e(t.then),void 0!==t.else&&(t.else=e(t.else)),n=t;else if("block"===t.type){var r=t.expressions.length;r>0&&(t.expressions[r-1]=e(t.expressions[r-1])),n=t}else n=t;else{var i={type:"lambda",thunk:!0,arguments:[],position:t.position};i.body=t,n=i}return n},O=0,x=0,E=[],k=function e(t,n){switch(t.type){case"name":case"wildcard":n.level--,0===n.level&&(void 0===t.ancestor||(E[n.index].slot.label=t.ancestor.label),t.ancestor=n,t.tuple=!0);break;case"parent":n.level++;break;case"block":t.expressions.length>0&&(t.tuple=!0,n=e(t.expressions[t.expressions.length-1],n));break;case"path":t.tuple=!0;var r=t.steps.length-1;for(n=e(t.steps[r--],n);n.level>0&&r>=0;)n=e(t.steps[r--],n);break;default:throw{code:"S0217",token:t.type,position:t.position}}return n},C=function(e,t){if(void 0!==t.seekingParent||"parent"===t.type){var n=void 0!==t.seekingParent?t.seekingParent:[];"parent"===t.type&&n.push(t.slot),void 0===e.seekingParent?e.seekingParent=n:Array.prototype.push.apply(e.seekingParent,n)}},w=function(e){var t=e.steps.length-1,n=e.steps[t],r=void 0!==n.seekingParent?n.seekingParent:[];"parent"===n.type&&r.push(n.slot);for(var i=0;i<r.length;i++){var a=r[i];for(t=e.steps.length-2;a.level>0;){if(t<0){void 0===e.seekingParent?e.seekingParent=[a]:e.seekingParent.push(a);break}for(var o=e.steps[t--];t>=0&&o.focus&&e.steps[t].focus;)o=e.steps[t--];a=k(o,a)}}},S=function e(t){var n;switch(t.type){case"binary":switch(t.value){case".":var r=e(t.lhs);n="path"===r.type?r:{type:"path",steps:[r]},"parent"===r.type&&(n.seekingParent=[r.slot]);var a=e(t.rhs);"function"===a.type&&"path"===a.procedure.type&&1===a.procedure.steps.length&&"name"===a.procedure.steps[0].type&&"function"===n.steps[n.steps.length-1].type&&(n.steps[n.steps.length-1].nextFunction=a.procedure.steps[0].value),"path"===a.type?Array.prototype.push.apply(n.steps,a.steps):(void 0!==a.predicate&&(a.stages=a.predicate,delete a.predicate),n.steps.push(a)),n.steps.filter((function(e){if("number"===e.type||"value"===e.type)throw{code:"S0213",stack:(new Error).stack,position:e.position,value:e.value};return"string"===e.type})).forEach((function(e){e.type="name"})),n.steps.filter((function(e){return!0===e.keepArray})).length>0&&(n.keepSingletonArray=!0);var o=n.steps[0];"unary"===o.type&&"["===o.value&&(o.consarray=!0);var s=n.steps[n.steps.length-1];"unary"===s.type&&"["===s.value&&(s.consarray=!0),w(n);break;case"[":var l=n=e(t.lhs),u="predicate";if("path"===n.type&&(l=n.steps[n.steps.length-1],u="stages"),void 0!==l.group)throw{code:"S0209",stack:(new Error).stack,position:t.position};void 0===l[u]&&(l[u]=[]);var d=e(t.rhs);void 0!==d.seekingParent&&(d.seekingParent.forEach((function(e){1===e.level?k(l,e):e.level--})),C(l,d)),l[u].push({type:"filter",expr:d,position:t.position});break;case"{":if(void 0!==(n=e(t.lhs)).group)throw{code:"S0210",stack:(new Error).stack,position:t.position};n.group={lhs:t.rhs.map((function(t){return[e(t[0]),e(t[1])]})),position:t.position};break;case"^":"path"!==(n=e(t.lhs)).type&&(n={type:"path",steps:[n]});var p={type:"sort",position:t.position};p.terms=t.rhs.map((function(t){var n=e(t.expression);return C(p,n),{descending:t.descending,expression:n}})),n.steps.push(p),w(n);break;case":=":(n={type:"bind",value:t.value,position:t.position}).lhs=e(t.lhs),n.rhs=e(t.rhs),C(n,n.rhs);break;case"@":if(n=e(t.lhs),l=n,"path"===n.type&&(l=n.steps[n.steps.length-1]),void 0!==l.stages||void 0!==l.predicate)throw{code:"S0215",stack:(new Error).stack,position:t.position};if("sort"===l.type)throw{code:"S0216",stack:(new Error).stack,position:t.position};t.keepArray&&(l.keepArray=!0),l.focus=t.rhs.value,l.tuple=!0;break;case"#":n=e(t.lhs),l=n,"path"===n.type?l=n.steps[n.steps.length-1]:(n={type:"path",steps:[n]},void 0!==l.predicate&&(l.stages=l.predicate,delete l.predicate)),void 0===l.stages?l.index=t.rhs.value:l.stages.push({type:"index",value:t.rhs.value,position:t.position}),l.tuple=!0;break;case"~>":(n={type:"apply",value:t.value,position:t.position}).lhs=e(t.lhs),n.rhs=e(t.rhs);break;default:(n={type:t.type,value:t.value,position:t.position}).lhs=e(t.lhs),n.rhs=e(t.rhs),C(n,n.lhs),C(n,n.rhs)}break;case"unary":n={type:t.type,value:t.value,position:t.position},"["===t.value?n.expressions=t.expressions.map((function(t){var r=e(t);return C(n,r),r})):"{"===t.value?n.lhs=t.lhs.map((function(t){var r=e(t[0]);C(n,r);var i=e(t[1]);return C(n,i),[r,i]})):(n.expression=e(t.expression),"-"===t.value&&"number"===n.expression.type?(n=n.expression).value=-n.value:C(n,n.expression));break;case"function":case"partial":(n={type:t.type,name:t.name,value:t.value,position:t.position}).arguments=t.arguments.map((function(t){var r=e(t);return C(n,r),r})),n.procedure=e(t.procedure);break;case"lambda":n={type:t.type,arguments:t.arguments,signature:t.signature,position:t.position};var h=e(t.body);n.body=y(h);break;case"condition":(n={type:t.type,position:t.position}).condition=e(t.condition),C(n,n.condition),n.then=e(t.then),C(n,n.then),void 0!==t.else&&(n.else=e(t.else),C(n,n.else));break;case"transform":(n={type:t.type,position:t.position}).pattern=e(t.pattern),n.update=e(t.update),void 0!==t.delete&&(n.delete=e(t.delete));break;case"block":(n={type:t.type,position:t.position}).expressions=t.expressions.map((function(t){var r=e(t);return C(n,r),(r.consarray||"path"===r.type&&r.steps[0].consarray)&&(n.consarray=!0),r}));break;case"name":n={type:"path",steps:[t]},t.keepArray&&(n.keepSingletonArray=!0);break;case"parent":n={type:"parent",slot:{label:"!"+O++,level:1,index:x++}},E.push(n);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":n=t;break;case"operator":if("and"===t.value||"or"===t.value||"in"===t.value)t.type="name",n=e(t);else{if("?"!==t.value)throw{code:"S0201",stack:(new Error).stack,position:t.position,token:t.value};n=t}break;case"error":n=t,t.lhs&&(n=e(t.lhs));break;default:var f="S0206";"(end)"===t.id&&(f="S0207");var m={code:f,position:t.position,token:t.value};if(i)return c.push(m),{type:"error",error:m};throw m.stack=(new Error).stack,m}return t.keepArray&&(n.keepArray=!0),n};o=n(t),h();var I=f(0);if("(end)"!==a.id){var T={code:"S0201",position:a.position,token:a.value};p(T)}if("parent"===(I=S(I)).type||void 0!==I.seekingParent)throw{code:"S0217",token:I.type,position:I.position};return c.length>0&&(I.errors=c),I}}();t.exports=i},{"./signature":5}],5:[function(e,t,n){var r=e("./utils"),i=function(){"use strict";var e={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function t(t){for(var n=1,i=[],a={},o=a;n<t.length;){var s=t.charAt(n);if(":"===s)break;var c=function(){i.push(a),o=a,a={}},l=function(e,t,n,r){for(var i=1,a=t;a<e.length;)if(a++,(s=e.charAt(a))===r){if(0==--i)break}else s===n&&i++;return a};switch(s){case"s":case"n":case"b":case"l":case"o":a.regex="["+s+"m]",a.type=s,c();break;case"a":a.regex="[asnblfom]",a.type=s,a.array=!0,c();break;case"f":a.regex="f",a.type=s,c();break;case"j":a.regex="[asnblom]",a.type=s,c();break;case"x":a.regex="[asnblfom]",a.type=s,c();break;case"-":o.context=!0,o.contextRegex=new RegExp(o.regex),o.regex+="?";break;case"?":case"+":o.regex+=s;break;case"(":var u=l(t,n,"(",")"),d=t.substring(n+1,u);if(-1!==d.indexOf("<"))throw{code:"S0402",stack:(new Error).stack,value:d,offset:n};a.regex="["+d+"m]",a.type="("+d+")",n=u,c();break;case"<":if("a"!==o.type&&"f"!==o.type)throw{code:"S0401",stack:(new Error).stack,value:o.type,offset:n};var p=l(t,n,"<",">");o.subtype=t.substring(n+1,p),n=p}n++}var h="^"+i.map((function(e){return"("+e.regex+")"})).join("")+"$",f=new RegExp(h),m=function(e){var t;if(r.isFunction(e))t="f";else switch(typeof e){case"string":t="s";break;case"number":t="n";break;case"boolean":t="b";break;case"object":t=null===e?"l":Array.isArray(e)?"a":"o";break;case"undefined":default:t="m"}return t},g=function(e,t){for(var n="^",r=0,a=0;a<i.length;a++){n+=i[a].regex;var o=t.match(n);if(null===o)throw{code:"T0410",stack:(new Error).stack,value:e[r],index:r+1};r=o[0].length}throw{code:"T0410",stack:(new Error).stack,value:e[r],index:r+1}};return{definition:t,validate:function(t,n){var r="";t.forEach((function(e){r+=m(e)}));var a=f.exec(r);if(a){var o=[],s=0;return i.forEach((function(r,i){var c=t[s],l=a[i+1];if(""===l)if(r.context&&r.contextRegex){var u=m(n);if(!r.contextRegex.test(u))throw{code:"T0411",stack:(new Error).stack,value:n,index:s+1};o.push(n)}else o.push(c),s++;else l.split("").forEach((function(n){if("a"===r.type){if("m"===n)c=void 0;else{c=t[s];var i=!0;if(void 0!==r.subtype)if("a"!==n&&l!==r.subtype)i=!1;else if("a"===n&&c.length>0){var a=m(c[0]);i=a===r.subtype.charAt(0)&&0===c.filter((function(e){return m(e)!==a})).length}if(!i)throw{code:"T0412",stack:(new Error).stack,value:c,index:s+1,type:e[r.subtype]};"a"!==n&&(c=[c])}o.push(c),s++}else o.push(c),s++}))})),o}g(t,r)}}}return t}();t.exports=i},{"./utils":6}],6:[function(e,t,n){var i=function(){"use strict";function e(e){var t=!1;if("number"==typeof e&&(t=!isNaN(e))&&!isFinite(e))throw{code:"D1001",value:e,stack:(new Error).stack};return t}function t(e){var t=!1;return Array.isArray(e)&&(t=0===e.filter((function(e){return"string"!=typeof e})).length),t}function n(t){var n=!1;return Array.isArray(t)&&(n=0===t.filter((function(t){return!e(t)})).length),n}function i(){var e=[];return e.sequence=!0,1===arguments.length&&e.push(arguments[0]),e}function a(e){return!0===e.sequence&&Array.isArray(e)}function o(e){return e&&(!0===e._jsonata_function||!0===e._jsonata_lambda)||"function"==typeof e}function s(e){return"number"==typeof e.arity?e.arity:"function"==typeof e.implementation?e.implementation.length:"number"==typeof e.length?e.length:e.arguments.length}function c(e){return e&&!0===e._jsonata_lambda}var l=("function"==typeof Symbol?Symbol:{}).iterator||"@@iterator";function u(e){return"object"==typeof e&&null!==e&&l in e&&"next"in e&&"function"==typeof e.next}function d(e,t){if(e===t)return!0;if("object"==typeof e&&"object"==typeof t&&null!==e&&null!==t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!d(e[n],t[n]))return!1;return!0}var r=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(r.length!==i.length)return!1;for(r=r.sort(),i=i.sort(),n=0;n<r.length;n++)if(r[n]!==i[n])return!1;for(n=0;n<r.length;n++){var a=r[n];if(!d(e[a],t[a]))return!1}return!0}return!1}function p(e){var t,n=[],i=r(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a)}}catch(o){i.e(o)}finally{i.f()}return n}return{isNumeric:e,isArrayOfStrings:t,isArrayOfNumbers:n,createSequence:i,isSequence:a,isFunction:o,isLambda:c,isIterable:u,getFunctionArity:s,isDeepEqual:d,stringToArray:p}}();t.exports=i},{}]},{},[3])(3)},IGGJ:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},IGWl:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("ZTXN"),i=n("C05f"),a=n("6Oco"),o=(n("Cupj"),n("EM62")),s=n("jHi0"),c=n("2kYt"),l=function(){function e(){this._change=new r.a,this.iconSource=new i.a(""),this.activeClass=new i.a(!1)}return Object.defineProperty(e.prototype,"tooltipValue",{get:function(){return this._props?this._props.tooltip:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this._props.icon&&this.iconSource.next("./assets/icons/symbol-defs.svg#"+this._props.icon),this._data&&(this._data.value?this.activeClass.next(!0):this.activeClass.next(!1))},e.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.ac({type:e,selectors:[["icon-button"]],decls:8,vars:9,consts:[["tooltip","","placement","top",1,"icon-button-container","fx-center-all",3,"deactivated"],[3,"click"],[1,"nu-icon","btn-icon"],[1,"tooltip-content"]],template:function(e,t){1&e&&(o.mc(0,"div",0),o.mc(1,"div",1),o.uc("click",(function(){return t._change.next(t._data)})),o.xc(),o.mc(2,"svg",2),o.zc(3,"async"),o.hc(4,"use"),o.zc(5,"async"),o.lc(),o.lc(),o.wc(),o.mc(6,"span",3),o.fd(7),o.lc(),o.lc()),2&e&&(o.Dc("deactivated",!t.tooltipValue),o.Sb(2),o.Yb("active",o.Ac(3,5,t.activeClass)),o.Sb(2),o.Tb("href",o.Ac(5,7,t.iconSource),null,"xlink"),o.Sb(3),o.gd(t.tooltipValue))},directives:[s.a],pipes:[c.b],encapsulation:2,changeDetection:0}),e}()},INYq:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var a=i(n("T9/7")),o=r(n("VTm5")),s=r(n("0KrK")),c=i(n("XVEb")),l=i(n("mG+b")),u=r(n("lCA4"));function d(){var e=new a.HandlebarsEnvironment;return c.extend(e,a),e.SafeString=o.default,e.Exception=s.default,e.Utils=c,e.escapeExpression=c.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e}var p=d();p.create=d,u.default(p),p.default=p,t.default=p,e.exports=t.default},It4u:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});t.UndefinedFactError=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.code="UNDEFINED_FACT",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}()},J8oI:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("SBw3"),i=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(i.a)({value:t.value,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){return Object(i.a)({styles:{color:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(a.qc(r.a))},e.\u0275prov=a.cc({token:e,factory:e.\u0275fac}),e}()},JPqQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("D57K"),i=n("5xGT"),a=n("xVbo"),o=n("Ohay"),s=n("TLy2"),c=n("8j5Y"),l=n("nsO7"),u=n("Jzy8"),d=n("c7W3"),p=n("QoSw"),h=n("ZTXN"),f=n("g6G6"),m=n("X0jn"),g=n("gCml"),b=n("EM62"),v=function(){function e(e,t,n){this.state=e,this.dll=t,this.commandService=n,this.matchedItems={},this.ruleMap={},this.subs=[],this.filterActions=new h.a}return e.prototype.initialize=function(){var e=this.listenToDiagramChange().subscribe();this.subs.push(e)},e.prototype.addRule=function(e){var t={};t[e.id]=e,this.commandService.dispatch(d.a.updateDisplayRules,{addUpdate:t})},e.prototype.deleteRule=function(e){this.commandService.dispatch(d.a.updateDisplayRules,{remove:[e.id]})},e.prototype.evalRules=function(e,t,n){var r=this;if(this.ruleMap[e]&&this.ruleMap[e].length>0){var i=this.ruleMap[e];i.sort((function(e,t){return e.priorityScore-t.priorityScore})),i.forEach((function(i){i.isActive&&r.runRuleForShape(e,t,i,n)}))}},e.prototype.applyRulesForDiagram=function(e,t){var n=this,r=Object.keys(this.ruleMap);t.map((function(t){return e.shapes[t]})).forEach((function(e){n.resetShape(e.id),Object.keys(e.data).map((function(t){r.includes(t)&&n.evalRules(t,e,e.data[t].value)}))}))},e.prototype.listenToDiagramChange=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(a.a)((function(e){return Boolean(e)})),Object(o.a)(),Object(s.a)((function(t){return e.onDiagramChange(t)})))},e.prototype.listenToRuleChanges=function(e){var t=this;return e.getDiagramRuleChanges().pipe(Object(s.a)((function(){return e.getDiagramOnce()})),Object(c.a)((function(e){t.ruleMap={},t.buildRuleMap(Object.values(e.rules)),t.applyRulesForDiagram(e,Object.keys(e.shapes))})))},e.prototype.listenToShapeAddAndSwitch=function(e){var t=this;return e.getDiagramChanges().pipe(Object(c.a)((function(e){if("init"!==e.source&&e.split&&e.split.shapes){var n=Object.keys(e.split.shapes).filter((function(t){return i.gb.hasChanges(e.split.shapes[t],"defId")}));n.length>0&&t.applyRulesForDiagram(e.model,n)}})))},e.prototype.onDiagramChange=function(e){var t=this;return this.dll.forCurrentObserver(!1).pipe(Object(s.a)((function(e){return e.getDiagramOnce().pipe(Object(s.a)((function(n){return t.ruleMap={},t.matchedItems={},t.buildRuleMap(Object.values(n.rules)),Object(f.a)(t.state.changes("DiagramLoadComplete").pipe(Object(a.a)((function(e){return e})),Object(c.a)((function(){t.applyRulesForDiagram(n,Object.keys(n.shapes))}))),t.listenToRuleChanges(e),t.listenToShapeAddAndSwitch(e))})))})))},e.prototype.runRuleForShape=function(e,t,n,r){this.isShapeMatching(e,n,t)?(this.matchedItems[t.id]=n.id,this.doActionForShape(n,t)):this.matchedItems[t.id]&&this.resetShape(t.id)},e.prototype.isShapeMatching=function(e,t,n){if(n.data[e]){var r=n.data[e].value;switch(t.comparison){case u.G.Equals:if(r){if(Object(l.isString)(r))return Object(l.isEqual)(r.toLowerCase(),t.value.toLowerCase());if(NaN!==r&&NaN!==Number(t.value))return Object(l.isEqual)(Number(r),Number(t.value))}break;case u.G.Contains:if(Object(l.isString)(r)&&r.toLowerCase().indexOf(t.value.toLowerCase())>-1)return!0;if(Array.isArray(r))return r.some((function(e){return Object(l.isString)(e)&&e===t.value||Object.values(e).includes(t.value)}));if(r.people&&Array.isArray(r.people))return r.people.some((function(e){return e.email===t.value}));break;case u.G.GreaterThan:if(!Object(l.isString)(r)&&NaN!==Number(r)&&NaN!==Number(t.value))return Number(r)>Number(t.value);break;case u.G.LesserThan:if(!Object(l.isString)(r)&&NaN!==Number(r)&&NaN!==Number(t.value))return Number(r)<Number(t.value);break;case u.G.IsTrue:return!0===r;case u.G.IsFalse:return!1===r}return!1}},e.prototype.doActionForShape=function(e,t){var n,r,i;switch(e.action){case u.F.Style:var a={shapeId:t.id,style:{fillStyle:m.h.Solid,fillColor:(null===(n=e.actionData)||void 0===n?void 0:n.fillColor)||t.style.fillColor,lineColor:(null===(r=e.actionData)||void 0===r?void 0:r.lineColor)||t.style.lineColor,lineThickness:Number(null===(i=e.actionData)||void 0===i?void 0:i.lineThickness)||t.style.lineThickness}};this.filterActions.next(a)}},e.prototype.resetShape=function(e){var t={shapeId:e};this.filterActions.next(t),delete this.matchedItems[e]},e.prototype.buildRuleMap=function(e){var t=this;e&&e.length>0&&e.forEach((function(e){e.targets.map((function(e){return e.dataItemId})).forEach((function(n){t.ruleMap[n]=t.ruleMap[n]?Object(r.j)(t.ruleMap[n],[e]):[e]}))}))},e.prototype.buildRuleMapOnDataDefChange=function(e){var t,n,i=this;this.ruleMap={};var a=e.dataDefs,o=e.rules,s={};for(var c in a)Object(r.a)(s,a[c]);for(var l=Object.values(s),u={},d=0;d<l.length;d++){var p=l[d],h=p.label&&p.label.length>0?p.label:p.id;if(null===(t=p.visibility)||void 0===t?void 0:t.some((function(e){return"editor"===e.type}))){p.systemType&&-1===h.indexOf(p.systemType.toString())&&(h+=" ("+p.systemType+")");var f=h+"."+p.type;u[f]||(u[f]={id:h,label:h,diList:[],type:p.type}),p.type&&g.a.supportedDITypes.includes(p.type)&&(null===(n=u[f])||void 0===n||n.diList.push({id:p.id}))}}var m=Object.values(o);m.forEach((function(e){var t,n=e.targets[0];if(n){e.targets=[];var r=s[n.dataItemId],a=r.label+"."+r.type;null===(t=u[a])||void 0===t||t.diList.forEach((function(t){e.targets.push({dataItemId:t.id})}))}i.addRule(e)})),this.buildRuleMap(m)},e.\u0275fac=function(t){return new(t||e)(b.qc(i.Hb),b.qc(p.a),b.qc(i.B))},e.\u0275prov=b.cc({token:e,factory:e.\u0275fac}),e}()},Jk8n:function(e,t,n){"use strict";t.__esModule=!0;var r=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,r,i,a,o){var s=a.length-1;switch(i){case 1:return a[s-1];case 2:this.$=r.prepareProgram(a[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=a[s];break;case 9:this.$={type:"CommentStatement",value:r.stripComment(a[s]),strip:r.stripFlags(a[s],a[s]),loc:r.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:a[s],value:a[s],loc:r.locInfo(this._$)};break;case 11:this.$=r.prepareRawBlock(a[s-2],a[s-1],a[s],this._$);break;case 12:this.$={path:a[s-3],params:a[s-2],hash:a[s-1]};break;case 13:this.$=r.prepareBlock(a[s-3],a[s-2],a[s-1],a[s],!1,this._$);break;case 14:this.$=r.prepareBlock(a[s-3],a[s-2],a[s-1],a[s],!0,this._$);break;case 15:this.$={open:a[s-5],path:a[s-4],params:a[s-3],hash:a[s-2],blockParams:a[s-1],strip:r.stripFlags(a[s-5],a[s])};break;case 16:case 17:this.$={path:a[s-4],params:a[s-3],hash:a[s-2],blockParams:a[s-1],strip:r.stripFlags(a[s-5],a[s])};break;case 18:this.$={strip:r.stripFlags(a[s-1],a[s-1]),program:a[s]};break;case 19:var c=r.prepareBlock(a[s-2],a[s-1],a[s],a[s],!1,this._$),l=r.prepareProgram([c],a[s-1].loc);l.chained=!0,this.$={strip:a[s-2].strip,program:l,chain:!0};break;case 20:this.$=a[s];break;case 21:this.$={path:a[s-1],strip:r.stripFlags(a[s-2],a[s])};break;case 22:case 23:this.$=r.prepareMustache(a[s-3],a[s-2],a[s-1],a[s-4],r.stripFlags(a[s-4],a[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:a[s-3],params:a[s-2],hash:a[s-1],indent:"",strip:r.stripFlags(a[s-4],a[s]),loc:r.locInfo(this._$)};break;case 25:this.$=r.preparePartialBlock(a[s-2],a[s-1],a[s],this._$);break;case 26:this.$={path:a[s-3],params:a[s-2],hash:a[s-1],strip:r.stripFlags(a[s-4],a[s])};break;case 27:case 28:this.$=a[s];break;case 29:this.$={type:"SubExpression",path:a[s-3],params:a[s-2],hash:a[s-1],loc:r.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:a[s],loc:r.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:r.id(a[s-2]),value:a[s],loc:r.locInfo(this._$)};break;case 32:this.$=r.id(a[s-1]);break;case 33:case 34:this.$=a[s];break;case 35:this.$={type:"StringLiteral",value:a[s],original:a[s],loc:r.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(a[s]),original:Number(a[s]),loc:r.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===a[s],original:"true"===a[s],loc:r.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)};break;case 40:case 41:this.$=a[s];break;case 42:this.$=r.preparePath(!0,a[s],this._$);break;case 43:this.$=r.preparePath(!1,a[s],this._$);break;case 44:a[s-2].push({part:r.id(a[s]),original:a[s],separator:a[s-1]}),this.$=a[s-2];break;case 45:this.$=[{part:r.id(a[s]),original:a[s]}];break;case 46:this.$=[];break;case 47:a[s-1].push(a[s]);break;case 48:this.$=[];break;case 49:a[s-1].push(a[s]);break;case 50:this.$=[];break;case 51:a[s-1].push(a[s]);break;case 58:this.$=[];break;case 59:a[s-1].push(a[s]);break;case 64:this.$=[];break;case 65:a[s-1].push(a[s]);break;case 70:this.$=[];break;case 71:a[s-1].push(a[s]);break;case 78:this.$=[];break;case 79:a[s-1].push(a[s]);break;case 82:this.$=[];break;case 83:a[s-1].push(a[s]);break;case 86:this.$=[];break;case 87:a[s-1].push(a[s]);break;case 90:this.$=[];break;case 91:a[s-1].push(a[s]);break;case 94:this.$=[];break;case 95:a[s-1].push(a[s]);break;case 98:this.$=[a[s]];break;case 99:a[s-1].push(a[s]);break;case 100:this.$=[a[s]];break;case 101:a[s-1].push(a[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],a=this.table,o="",s=0,c=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;i.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,h,f,m,g,b,v,_,y,O,x={};;){if(f=n[n.length-1],this.defaultActions[f]?m=this.defaultActions[f]:(null==p&&(O=void 0,"number"!=typeof(O=t.lexer.lex()||1)&&(O=t.symbols_[O]||O),p=O),m=a[f]&&a[f][p]),void 0===m||!m.length||!m[0]){var E="";if(!l){for(b in y=[],a[f])this.terminals_[b]&&b>2&&y.push("'"+this.terminals_[b]+"'");E=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+y.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:y})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+p);switch(m[0]){case 1:n.push(p),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(m[1]),p=null,h?(p=h,h=null):(c=this.lexer.yyleng,o=this.lexer.yytext,s=this.lexer.yylineno,u=this.lexer.yylloc,l>0&&l--);break;case 2:if(v=this.productions_[m[1]][1],x.$=r[r.length-v],x._$={first_line:i[i.length-(v||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(v||1)].first_column,last_column:i[i.length-1].last_column},d&&(x._$.range=[i[i.length-(v||1)].range[0],i[i.length-1].range[1]]),void 0!==(g=this.performAction.call(x,o,c,s,this.yy,m[1],r,i)))return g;v&&(n=n.slice(0,-1*v*2),r=r.slice(0,-1*v),i=i.slice(0,-1*v)),n.push(this.productions_[m[1]][0]),r.push(x.$),i.push(x._$),_=a[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length&&(!(n=this._input.match(this.rules[a[o]]))||t&&!(n[0].length>t[0].length)||(t=n,r=o,this.options.flex));o++);return t?((i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t.default=r,e.exports=t.default},K07p:function(e,t,n){var r=n("1NHC"),i=n("eQvJ"),a=n("ipv5"),o=n("Pj1F");function s(e,t){if(t)for(var n in t)e[n]=t[n];return e}t.BETADIST=i.BETA.DIST,t.BETAINV=i.BETA.INV,t.BINOMDIST=i.BINOM.DIST,t.CEILING=t.ISOCEILING=s(r.CEILING.MATH,r.CEILING),t.CEILINGMATH=r.CEILING.MATH,t.CEILINGPRECISE=r.CEILING.PRECISE,t.CHIDIST=i.CHISQ.DIST,t.CHIDISTRT=i.CHISQ.DIST.RT,t.CHIINV=i.CHISQ.INV,t.CHIINVRT=i.CHISQ.INV.RT,t.CHITEST=i.CHISQ.TEST,t.CONFIDENCE=s(i.CONFIDENCE.NORM,i.CONFIDENCE),t.COVAR=i.COVARIANCE.P,t.COVARIANCEP=i.COVARIANCE.P,t.COVARIANCES=i.COVARIANCE.S,t.CRITBINOM=i.BINOM.INV,t.EXPONDIST=i.EXPON.DIST,t.ERFCPRECISE=a.ERFC.PRECISE,t.ERFPRECISE=a.ERF.PRECISE,t.FDIST=i.F.DIST,t.FDISTRT=i.F.DIST.RT,t.FINVRT=i.F.INV.RT,t.FINV=i.F.INV,t.FLOOR=s(r.FLOOR.MATH,r.FLOOR),t.FLOORMATH=r.FLOOR.MATH,t.FLOORPRECISE=r.FLOOR.PRECISE,t.FTEST=i.F.TEST,t.GAMMADIST=i.GAMMA.DIST,t.GAMMAINV=i.GAMMA.INV,t.GAMMALNPRECISE=i.GAMMALN.PRECISE,t.HYPGEOMDIST=i.HYPGEOM.DIST,t.LOGINV=i.LOGNORM.INV,t.LOGNORMINV=i.LOGNORM.INV,t.LOGNORMDIST=i.LOGNORM.DIST,t.MODE=s(i.MODE.SNGL,i.MODE),t.MODEMULT=i.MODE.MULT,t.MODESNGL=i.MODE.SNGL,t.NEGBINOMDIST=i.NEGBINOM.DIST,t.NETWORKDAYSINTL=o.NETWORKDAYS.INTL,t.NORMDIST=i.NORM.DIST,t.NORMINV=i.NORM.INV,t.NORMSDIST=i.NORM.S.DIST,t.NORMSINV=i.NORM.S.INV,t.PERCENTILE=s(i.PERCENTILE.EXC,i.PERCENTILE),t.PERCENTILEEXC=i.PERCENTILE.EXC,t.PERCENTILEINC=i.PERCENTILE.INC,t.PERCENTRANK=s(i.PERCENTRANK.INC,i.PERCENTRANK),t.PERCENTRANKEXC=i.PERCENTRANK.EXC,t.PERCENTRANKINC=i.PERCENTRANK.INC,t.POISSON=s(i.POISSON.DIST,i.POISSON),t.POISSONDIST=i.POISSON.DIST,t.QUARTILE=s(i.QUARTILE.INC,i.QUARTILE),t.QUARTILEEXC=i.QUARTILE.EXC,t.QUARTILEINC=i.QUARTILE.INC,t.RANK=s(i.RANK.EQ,i.RANK),t.RANKAVG=i.RANK.AVG,t.RANKEQ=i.RANK.EQ,t.SKEWP=i.SKEW.P,t.STDEV=s(i.STDEV.S,i.STDEV),t.STDEVP=i.STDEV.P,t.STDEVS=i.STDEV.S,t.TDIST=i.T.DIST,t.TDISTRT=i.T.DIST.RT,t.TINV=i.T.INV,t.TTEST=i.T.TEST,t.VAR=s(i.VAR.S,i.VAR),t.VARP=i.VAR.P,t.VARS=i.VAR.S,t.WEIBULL=s(i.WEIBULL.DIST,i.WEIBULL),t.WEIBULLDIST=i.WEIBULL.DIST,t.WORKDAYINTL=o.WORKDAY.INTL,t.ZTEST=i.Z.TEST},K5wl:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D57K"),i=n("gZOS"),a=n("5xGT"),o=n("X0jn"),s=n("nsO7"),c=n("19Zn"),l=n("jW3f"),u=n("2DR2"),d=n("QoSw"),p=n("PC6z"),h=n("x77O"),f=n("+1jB"),m=n("EM62"),g=function(){function e(e,t,n,r){this.modelChangeUtils=e,this.state=t,this.ll=n,this.commandService=r}return e.prototype.syncEdataChanges=function(e,t){var n=this;t.forEach((function(t){e.filter((function(e){return t.eData.find((function(t){return t===e.id}))})).forEach((function(e){var r=e.__sakota__.getChanges(),i=Object(p.b)(r);i.edata&&n.edataModelDataDefChanged(t,e,i.edata),i.entities&&Object.keys(i.entities).forEach((function(r){var a=e.entities[r];if(a){var o=Object.keys(a.shapes&&a.shapes[t.id]||{}),s=i.entities[r];if(o.length>0){if(s.$set){var c=[];if(s.$set.data)c=Object.keys(s.$set.data);else if(Object.keys(s.$set).filter((function(e){return/data/.test(e)})).length)c=Object.keys(s.$set).filter((function(e){return/data/.test(e)}));else if(Object.keys(s.$set).some((function(e){return/shapes./.test(e)}))){var l=Object.keys(s.$set).filter((function(e){return/shapes./.test(e)})),u=l.map((function(e){if(3===e.split(".").length)return e.substr(e.lastIndexOf(".")+1)}));return u[0]||(u=Object.keys(s.$set[l[0]])),void n.copyAllEntityValuesToShapes(t,u,a,e)}var d=[];c.forEach((function(t){var r;if(s.$set.data&&void 0!==s.$set.data[t]&&null!==s.$set.data[t]){r=t;var i=n.getEntityDataDef(e,a.id,r);d.push({path:r,value:s.$set.data[t],def:i})}else if(void 0!==s.$set[t]&&null!==s.$set[t]){r=t.replace("data.","");i=n.getEntityDataDef(e,a.id,r);d.push({path:r,value:s.$set[t],def:i})}}));var p=a.getDef?a.getDef():void 0;p&&n.modelChangeUtils.syncEDataChanges(t,{shapeIds:o,set:d,entityDef:p})}if(s.$unset){c=[];if(s.$unset.data)c=Object.keys(s.$unset.data);else if(Object.keys(s.$unset).filter((function(e){return/data/.test(e)})).length)c=Object.keys(s.$unset).filter((function(e){return/data/.test(e)}));else if(Object.keys(s.$unset).filter((function(e){return/shapes./.test(e)})).length)return;var h=c.map((function(e){return{path:e.replace("data.",""),value:void 0}}));n.modelChangeUtils.syncEDataChanges(t,{shapeIds:o,set:h,entityDef:a.getDef()})}}s.$unset&&!0!==s.$unset&&n.removeInvalidLookupConnectors(t,a,s)}}))}))}))},e.prototype.buildEDataChanges=function(e,t,n){var a,s,c,u,d,p;void 0===n&&(n=!1);var f=e.__sakota__.getChanges();if(f.$set){var m=n?/customEntityDefs\.([^\.]+)$/:/customEntityDefs\.([^\.]+)\.dataItems$/,g=Object.keys(f.$set).filter((function(e){return m.test(e)})),b={};t.forEach((function(e){b[e.id]=i.Sakota.create(e)})),b[e.id]=e;var v=function(t){var r=t.split(".")[1],i=n?f.$set[t].dataItems:f.$set[t];Object.values(i).filter((function(e){return e.type===o.c.LOOKUP})).filter((function(t){return t.options.eDataId!==e.id})).forEach((function(t){var n=t.options,i=n.eDataId,a=n.eDefId,o=n.isMirrorField;if(!(void 0!==o&&o)){var s={entityDefId:a,lookupField:t,lookupOptions:{eDataModel:e,eDefId:r}},c=new l.a(null);c.changeModel=b[i],c.data=s,c.resourceId=i,c.prepareData()}}))};try{for(var _=Object(r.k)(g),y=_.next();!y.done;y=_.next()){v(y.value)}}catch(P){a={error:P}}finally{try{y&&!y.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}var O={},x={},E=!1,k=function(t){var r=n?f.$set[t].dataItems:f.$set[t],i=t.split(".")[1],a=n?{}:e.__sakota__.getTarget().customEntityDefs[i].dataItems;Object.keys(r).forEach((function(e){var t=r[e];t.type===o.c.FORMULA&&(a[e]&&t.options.parsedExpression===a[e].options.parsedExpression||(E=!0,x[e]=r[e]))}))};try{for(var C=Object(r.k)(g),w=C.next();!w.done;w=C.next()){k(w.value)}}catch(M){c={error:M}}finally{try{w&&!w.done&&(u=C.return)&&u.call(C)}finally{if(c)throw c.error}}var S=function(t){var r=n?f.$set[t].dataItems:f.$set[t],i=t.split(".")[1];e.getEntitiesByDefId(i).forEach((function(e){for(var t in r)void 0===e.data[t]&&(e.data[t]=r[t].default);E&&(O[e.id]=x)}))};try{for(var I=Object(r.k)(g),T=I.next();!T.done;T=I.next()){S(T.value)}}catch(D){d={error:D}}finally{try{T&&!T.done&&(p=I.return)&&p.call(I)}finally{if(d)throw d.error}}var A=Object.values(b);return E&&h.a.updateFormulaFields(O,e,A),h.a.buildEDataChanges(A),A}},e.prototype.copyAllEntityValuesToShapes=function(e,t,n,r){var i=[];for(var a in n.data){var o=this.getEntityDataDef(r,n.id,a);i.push({path:a,value:n.data[a],def:o})}this.modelChangeUtils.syncEDataChanges(e,{shapeIds:t,set:i,entityDef:n.getDef()})},e.prototype.getEntityDataDef=function(e,t,n){if(e){var r=e.getDataItemLevel(n,t),i=Object(s.cloneDeep)(r[1]);return i&&(i.level=r[0]),i}},e.prototype.edataModelDataDefChanged=function(e,t,n){for(var r in n.$set){if(l=/customEntityDefs\.([^\.]+)$/.exec(r)){var i=l[1],a=n.$set[r].dataItems;for(var o in e.dataDefs[i]={},a)o!==u.a&&(e.dataDefs[i][o]=a[o])}}for(var r in n.$unset){if(l=/customEntityDefs\.([^\.]+)\.dataItems\.([^\.]+)$/.exec(r)){i=l[1],o=l[2];delete e.dataDefs[i][o]}}for(var r in n.$unset){(l=/dataDefs\.([^\.]+)\.([^\.]+)$/.exec(r))?(delete e.dataDefs[l[1]][l[2]],0===Object.keys(e.dataDefs[l[1]]).length&&delete e.dataDefs[l[1]]):/dataDefs\.([^\.]+)$/.test(r)&&delete e.dataDefs[r.split(".")[1]]}for(var r in n.$set){if(l=/dataDefs\.([^\.]+)\.([^\.]+)/.exec(r))3===r.split(".").length?e.dataDefs[l[1]][l[2]]=n.$set[r]:Object.assign(e.dataDefs[l[1]][l[2]],t.dataDefs[l[1]][l[2]]);else if(/dataDefs\.([^\.]+)$/.test(r)){var s=r.split(".")[1];e.dataDefs[s]=n.$set[r]}}for(var r in n.$set){if(l=/customEntityDefs\.([^\.]+)\.editable$/.exec(r)){var c=n.$set[r];for(var o in e.dataDefs[l[1]])e.dataDefs[l[1]][o].optional=!0,e.dataDefs[l[1]][o].removeable=c,e.dataDefs[l[1]][o].labelEditable=c}}for(var r in n.$set){var l;if(l=/customEntityDefs\.([^\.]+)\.dataItems\.([^\.]+)\.label$/.exec(r)){c=n.$set[r];e.dataDefs[l[1]][l[2]].optional=!0,e.dataDefs[l[1]][l[2]].label=c}}},e.prototype.removeInvalidLookupConnectors=function(e,t,n){var r=Object.keys(n.$unset).filter((function(e){return/links/.test(e)}));if(r.length>0){var i=t.__sakota__.getTarget();r.forEach((function(t){var n=i.links[t.split(".").pop()];if(n&&n.type===o.f.LOOKUP&&n.connectors&&n.connectors[e.id]){var r=Object.keys(n.connectors[e.id])[0];if(r){var a=n.handshake,s=n.shapeId,l=n.entityId,u=n.eDataId,d=e.getMatchingLookupConnectors(a,s,l,u);if(0===d.length){var p=e.shapes[r];p&&p.defId===c.s.defId&&d.push(p)}d.forEach((function(t){delete e.shapes[t.id]}))}}}))}},e.\u0275fac=function(t){return new(t||e)(m.qc(f.a),m.qc(a.Hb),m.qc(d.a),m.qc(a.B))},e.\u0275prov=m.cc({token:e,factory:e.\u0275fac}),e}()},KFbB:function(e,t,n){var r=n("oFOz"),i=n("eQvJ"),a=n("1NHC"),o=n("sfKy"),s=n("39iF");function c(e){var t=[];return o.arrayEach(e,(function(e){e&&t.push(e)})),t}function l(e,t){for(var n={},r=1;r<e[0].length;++r)n[r]=!0;var i=t[0].length;for(r=1;r<t.length;++r)t[r].length>i&&(i=t[r].length);for(var a=1;a<e.length;++a)for(var o=1;o<e[a].length;++o){for(var c=!1,l=!1,u=0;u<t.length;++u){var d=t[u];if(!(d.length<i)){var p=d[0];if(e[a][0]===p){l=!0;for(var h=1;h<d.length;++h){if(!c)if(void 0===d[h]||"*"===d[h])c=!0;else{var f=s.parse(d[h]+""),m=[s.createToken(e[a][o],s.TOKEN_TYPE_LITERAL)].concat(f);c=s.compute(m)}}}}}l&&(n[o]=n[o]&&c)}for(var g=[],b=0;b<e[0].length;++b)n[b]&&g.push(b-1);return g}t.FINDFIELD=function(e,t){var n=null;return o.arrayEach(e,(function(e,r){if(e[0]===t)return n=r,!1})),null==n?r.value:n},t.DAVERAGE=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var c=t.FINDFIELD(e,n);s=o.rest(e[c])}else s=o.rest(e[n]);var u=0;return o.arrayEach(a,(function(e){u+=s[e]})),0===a.length?r.div0:u/a.length},t.DCOUNT=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var d=[];return o.arrayEach(s,(function(e){d.push(c[e])})),i.COUNT(d)},t.DCOUNTA=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var d=[];return o.arrayEach(s,(function(e){d.push(c[e])})),i.COUNTA(d)},t.DGET=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var c=t.FINDFIELD(e,n);s=o.rest(e[c])}else s=o.rest(e[n]);return 0===a.length?r.value:a.length>1?r.num:s[a[0]]},t.DMAX=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var c=t.FINDFIELD(e,n);s=o.rest(e[c])}else s=o.rest(e[n]);var u=s[a[0]];return o.arrayEach(a,(function(e){u<s[e]&&(u=s[e])})),u},t.DMIN=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var c=t.FINDFIELD(e,n);s=o.rest(e[c])}else s=o.rest(e[n]);var u=s[a[0]];return o.arrayEach(a,(function(e){u>s[e]&&(u=s[e])})),u},t.DPRODUCT=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);s=o.rest(e[u])}else s=o.rest(e[n]);var d=[];o.arrayEach(a,(function(e){d.push(s[e])})),d=c(d);var p=1;return o.arrayEach(d,(function(e){p*=e})),p},t.DSTDEV=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),u=[];if("string"==typeof n){var d=t.FINDFIELD(e,n);u=o.rest(e[d])}else u=o.rest(e[n]);var p=[];return o.arrayEach(s,(function(e){p.push(u[e])})),p=c(p),i.STDEV.S(p)},t.DSTDEVP=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),u=[];if("string"==typeof n){var d=t.FINDFIELD(e,n);u=o.rest(e[d])}else u=o.rest(e[n]);var p=[];return o.arrayEach(s,(function(e){p.push(u[e])})),p=c(p),i.STDEV.P(p)},t.DSUM=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,i),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var d=[];return o.arrayEach(s,(function(e){d.push(c[e])})),a.SUM(d)},t.DVAR=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var d=[];return o.arrayEach(s,(function(e){d.push(c[e])})),i.VAR.S(d)},t.DVARP=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var d=[];return o.arrayEach(s,(function(e){d.push(c[e])})),i.VAR.P(d)}},KI7O:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("NNJu"),a=n("5xGT"),o=n("w1VY"),s=n("QoSw"),c=n("EM62"),l=n("C05f"),u=n("2DR2"),d=n("gGM1"),p=["container"],h=["styles"],f=["dateItemsRenderer"],m=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.dtov=r,o.ll=i,o.state=a,o.dItems=new l.a({}),o.subs=[],o.tiptapDocParent=document.querySelector("tiptap-documents-manager"),o}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){this.dItems.next(this.dataItems)},t.prototype.onTabUpdate=function(){this.dItems.next(this.dataItems),this.dateItemsRenderer.dataItems=this.dataItems,this.dateItemsRenderer.onTabUpdate()},t.prototype.mountTiptapDoc=function(){var e,t,n='tiptap-editor-component[id="'+this.diagramId+'"].notes';this.state.set("TiptapDocument",{diagramId:this.diagramId,shapeId:this.shapeId,parentName:this.parentName});var r=null===(e=this.container)||void 0===e?void 0:e.nativeElement;if(r&&(this.tiptapDoc=document.querySelector(n),this.tiptapDoc)){r.appendChild(this.tiptapDoc);var i=this.tiptapDoc.querySelector('div[data-type="tiptap-child-editor-node"][shapeid="'+this.shapeId+'"]');if(i){var a=i.getBoundingClientRect();i.style.minHeight=window.innerHeight-a.top+"px"}(null===(t=this.styles)||void 0===t?void 0:t.nativeElement).innerHTML="<style>\n                    "+n+' div[data-type="tiptap-child-editor-node"]{display: none}\n                    '+this.parentName+" "+n+' div[data-type="tiptap-child-editor-node"][shapeid="'+this.shapeId+'"]{ display:block }\n                </style>'}},t.prototype.ngAfterViewInit=function(){this.mountTiptapDoc()},t.prototype.ngOnDestroy=function(){this.unMountTiptap(),this.clearSubs()},t.prototype.unMountTiptap=function(){this.state.set("TextEditorState-notes",{}),this.tiptapDocParent&&this.tiptapDoc&&this.tiptapDoc.parentElement.isSameNode(this.container.nativeElement)&&this.tiptapDocParent.appendChild(this.tiptapDoc)},t.prototype.clearSubs=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(c.gc(c.m),c.gc(c.C),c.gc(o.a),c.gc(s.a),c.gc(a.Hb))},t.\u0275cmp=c.ac({type:t,selectors:[["shape-notes"]],viewQuery:function(e,t){var n;(1&e&&(c.kd(p,!0,c.r),c.kd(h,!0,c.r),c.kd(f,!0,u.b)),2&e)&&(c.Mc(n=c.vc())&&(t.container=n.first),c.Mc(n=c.vc())&&(t.styles=n.first),c.Mc(n=c.vc())&&(t.dateItemsRenderer=n.first))},features:[c.Pb],decls:8,vars:10,consts:[[3,"diagramId","shapeId","dataItems","onChange"],["taskSummary",""],[3,"onChange","dataItems","shape","diagramId","context","showInNotes"],["dateItemsRenderer",""],[1,"shape-notes-container"],["container",""],["styles",""]],template:function(e,t){1&e&&(c.hc(0,"task-summary-view",0,1),c.hc(2,"data-items-renderer",2,3),c.hc(4,"div",4,5),c.hc(6,"div",null,6)),2&e&&(c.Dc("diagramId",t.diagramId)("shapeId",t.shapeId)("dataItems",t.dItems)("onChange",t.onChange),c.Sb(2),c.Dc("onChange",t.onChange)("dataItems",t.dataItems)("shape",t.shape)("diagramId",t.diagramId)("context",t.context)("showInNotes",!0))},directives:[d.a,u.b],styles:[""],changeDetection:0}),t}(i.k)},KOB3:function(e,t,n){var r,i,a;i=[],void 0===(a="function"==typeof(r=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=n&&/blob:/i.test((t.location||{}).protocol),i={},a=0,o={parse:function(n,r){var s=(r=r||{}).dynamicTyping||!1;if(O(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!O(r.transform)&&r.transform,r.worker&&o.WORKERS_SUPPORTED){var c=function(){if(!o.WORKERS_SUPPORTED)return!1;var n,r,s=(n=t.URL||t.webkitURL||null,r=e.toString(),o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),c=new t.Worker(s);return c.onmessage=g,c.id=a++,i[c.id]=c}();return c.userStep=r.step,c.userChunk=r.chunk,c.userComplete=r.complete,c.userError=r.error,r.step=O(r.step),r.chunk=O(r.chunk),r.complete=O(r.complete),r.error=O(r.error),delete r.worker,void c.postMessage({input:n,config:r,workerId:c.id})}var h=null;return o.NODE_STREAM_INPUT,"string"==typeof n?h=r.download?new l(r):new d(r):!0===n.readable&&O(n.read)&&O(n.on)?h=new p(r):(t.File&&n instanceof File||n instanceof Object)&&(h=new u(r)),h.stream(n)},unparse:function(e,t){var n=!1,r=!0,i=",",a="\r\n",s='"',c=s+s,l=!1,u=null,d=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(l=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(c=t.escapeChar+s),"boolean"==typeof t.escapeFormulae&&(d=t.escapeFormulae)}}();var p=new RegExp(f(s),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,l);if("object"==typeof e[0])return h(u||Object.keys(e[0]),e,l)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),h(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function h(e,t,n){var o="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var s=Array.isArray(e)&&0<e.length,c=!Array.isArray(t[0]);if(s&&r){for(var l=0;l<e.length;l++)0<l&&(o+=i),o+=m(e[l],l);0<t.length&&(o+=a)}for(var u=0;u<t.length;u++){var d=s?e.length:t[u].length,p=!1,h=s?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!s&&(p="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&s){for(var f=[],g=0;g<d;g++){var b=c?e[g]:g;f.push(t[u][b])}p=""===f.join("").trim()}if(!p){for(var v=0;v<d;v++){0<v&&!h&&(o+=i);var _=s&&c?e[v]:v;o+=m(t[u][_],v)}u<t.length-1&&(!n||0<d&&!h)&&(o+=a)}}return o}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===d&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var r=e.toString().replace(p,c);return"boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(r,o.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?s+r+s:r}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!n&&!!t.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=m,o.ParserHandle=h,o.NetworkStreamer=l,o.FileStreamer=u,o.StringStreamer=d,o.ReadableStreamStreamer=p,t.jQuery){var s=t.jQuery;s.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:s.extend({},n)})})),i(),this;function i(){if(0!==r.length){var t,n,i,c,l=r[0];if(O(e.before)){var u=e.before(l.file,l.inputElem);if("object"==typeof u){if("abort"===u.action)return t="AbortError",n=l.file,i=l.inputElem,c=u.reason,void(O(e.error)&&e.error({name:t},n,i,c));if("skip"===u.action)return void a();"object"==typeof u.config&&(l.instanceConfig=s.extend(l.instanceConfig,u.config))}else if("skip"===u)return void a()}var d=l.instanceConfig.complete;l.instanceConfig.complete=function(e){O(d)&&d(e,l.file,l.inputElem),a()},o.parse(l.file,l.instanceConfig)}else O(e.complete)&&e.complete()}function a(){r.splice(0,1),i()}}}function c(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new h(t),(this._handle.streamer=this)._config=t}).call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&O(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var s=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var c=s.meta.cursor;this._finished||(this._partialLine=a.substring(c-this._baseIndex),this._baseIndex=c),s&&s.data&&(this._rowCount+=s.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:s,workerId:o.WORKER_ID,finished:l});else if(O(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!l||!O(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(e){O(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function l(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),c.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=y(this._chunkLoaded,this),t.onerror=y(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function u(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),c.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=y(this._chunkLoaded,this),t.onerror=y(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,i)}var a=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;c.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function p(e){c.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=y((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=y((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=y((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=y((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function h(e){var t,n,r,i=Math.pow(2,53),a=-i,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,l=this,u=0,d=0,p=!1,h=!1,g=[],b={data:[],errors:[],meta:{}};if(O(e.step)){var v=e.step;e.step=function(t){if(b=t,E())x();else{if(x(),0===b.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(b.data=b.data[0],v(b,l))}}}function y(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function x(){if(b&&r&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var t=0;t<b.data.length;t++)y(b.data[t])&&b.data.splice(t--,1);return E()&&function(){if(b)if(Array.isArray(b.data[0])){for(var t=0;E()&&t<b.data.length;t++)b.data[t].forEach(n);b.data.splice(0,1)}else b.data.forEach(n);function n(t,n){O(e.transformHeader)&&(t=e.transformHeader(t,n)),g.push(t)}}(),function(){if(!b||!e.header&&!e.dynamicTyping&&!e.transform)return b;function t(t,n){var r,i=e.header?{}:[];for(r=0;r<t.length;r++){var a=r,o=t[r];e.header&&(a=r>=g.length?"__parsed_extra":g[r]),e.transform&&(o=e.transform(o,a)),o=k(a,o),"__parsed_extra"===a?(i[a]=i[a]||[],i[a].push(o)):i[a]=o}return e.header&&(r>g.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+r,d+n):r<g.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+r,d+n)),i}var n=1;return!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(t),n=b.data.length):b.data=t(b.data,0),e.header&&b.meta&&(b.meta.fields=g),d+=n,b}()}function E(){return e.header&&0===g.length}function k(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(s.test(e)){var t=parseFloat(e);if(a<t&&t<i)return!0}return!1}(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n;var r}function C(e,t,n,r){var i={type:e,code:t,message:n};void 0!==r&&(i.row=r),b.errors.push(i)}this.parse=function(i,a,s){var c=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(f(t)+"([^]*?)"+f(t),"gm"),r=(e=e.replace(n,"")).split("\r"),i=e.split("\n"),a=1<i.length&&i[0].length<r[0].length;if(1===r.length||a)return"\n";for(var o=0,s=0;s<r.length;s++)"\n"===r[s][0]&&o++;return o>=r.length/2?"\r\n":"\r"}(i,c)),r=!1,e.delimiter)O(e.delimiter)&&(e.delimiter=e.delimiter(i),b.meta.delimiter=e.delimiter);else{var l=function(t,n,r,i,a){var s,c,l,u;a=a||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var d=0;d<a.length;d++){var p=a[d],h=0,f=0,g=0;l=void 0;for(var b=new m({comments:i,delimiter:p,newline:n,preview:10}).parse(t),v=0;v<b.data.length;v++)if(r&&y(b.data[v]))g++;else{var _=b.data[v].length;f+=_,void 0!==l?0<_&&(h+=Math.abs(_-l),l=_):l=_}0<b.data.length&&(f/=b.data.length-g),(void 0===c||h<=c)&&(void 0===u||u<f)&&1.99<f&&(c=h,s=p,u=f)}return{successful:!!(e.delimiter=s),bestDelimiter:s}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);l.successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=o.DefaultDelimiter),b.meta.delimiter=e.delimiter}var u=_(e);return e.preview&&e.header&&u.preview++,t=i,n=new m(u),b=n.parse(t,a,s),x(),p?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),t=O(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(p=!1,l.streamer.parseChunk(t,!0)):setTimeout(l.resume,3)},this.aborted=function(){return h},this.abort=function(){h=!0,n.abort(),b.meta.aborted=!0,O(e.complete)&&e.complete(b),t=""}}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,n=(e=e||{}).delimiter,r=e.newline,i=e.comments,a=e.step,s=e.preview,c=e.fastMode,l=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(l=e.escapeChar),("string"!=typeof n||-1<o.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,d=!1;this.parse=function(e,o,p){if("string"!=typeof e)throw new Error("Input must be a string");var h=e.length,m=n.length,g=r.length,b=i.length,v=O(a),_=[],y=[],x=[],E=u=0;if(!e)return L();if(c||!1!==c&&-1===e.indexOf(t)){for(var k=e.split(r),C=0;C<k.length;C++){if(x=k[C],u+=x.length,C!==k.length-1)u+=r.length;else if(p)return L();if(!i||x.substring(0,b)!==i){if(v){if(_=[],M(x.split(n)),N(),d)return L()}else M(x.split(n));if(s&&s<=C)return _=_.slice(0,s),L(!0)}}return L()}for(var w=e.indexOf(n,u),S=e.indexOf(r,u),I=new RegExp(f(l)+f(t),"g"),T=e.indexOf(t,u);;)if(e[u]!==t)if(i&&0===x.length&&e.substring(u,u+b)===i){if(-1===S)return L();u=S+g,S=e.indexOf(r,u),w=e.indexOf(n,u)}else if(-1!==w&&(w<S||-1===S))x.push(e.substring(u,w)),u=w+m,w=e.indexOf(n,u);else{if(-1===S)break;if(x.push(e.substring(u,S)),R(S+g),v&&(N(),d))return L();if(s&&_.length>=s)return L(!0)}else for(T=u,u++;;){if(-1===(T=e.indexOf(t,T+1)))return p||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:u}),j();if(T===h-1)return j(e.substring(u,T).replace(I,t));if(t!==l||e[T+1]!==l){if(t===l||0===T||e[T-1]!==l){-1!==w&&w<T+1&&(w=e.indexOf(n,T+1)),-1!==S&&S<T+1&&(S=e.indexOf(r,T+1));var A=D(-1===S?w:Math.min(w,S));if(e[T+1+A]===n){x.push(e.substring(u,T).replace(I,t)),e[u=T+1+A+m]!==t&&(T=e.indexOf(t,u)),w=e.indexOf(n,u),S=e.indexOf(r,u);break}var P=D(S);if(e.substring(T+1+P,T+1+P+g)===r){if(x.push(e.substring(u,T).replace(I,t)),R(T+1+P+g),w=e.indexOf(n,u),T=e.indexOf(t,u),v&&(N(),d))return L();if(s&&_.length>=s)return L(!0);break}y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:u}),T++}}else T++}return j();function M(e){_.push(e),E=u}function D(t){var n=0;if(-1!==t){var r=e.substring(T+1,t);r&&""===r.trim()&&(n=r.length)}return n}function j(t){return p||(void 0===t&&(t=e.substring(u)),x.push(t),u=h,M(x),v&&N()),L()}function R(t){u=t,M(x),x=[],S=e.indexOf(r,u)}function L(e){return{data:_,errors:y,meta:{delimiter:n,linebreak:r,aborted:d,truncated:!!e,cursor:E+(o||0)}}}function N(){a(L()),_=[],y=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return u}}function g(e){var t=e.data,n=i[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){r=!0,b(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(O(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:t.results.data[o],errors:t.results.errors,meta:t.results.meta},a),!r);o++);delete t.results}else O(n.userChunk)&&(n.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!r&&b(t.workerId,t.results)}function b(e,t){var n=i[e];O(n.userComplete)&&n.userComplete(t),n.terminate(),delete i[e]}function v(){throw new Error("Not implemented.")}function _(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=_(e[n]);return t}function y(e,t){return function(){e.apply(t,arguments)}}function O(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===o.WORKER_ID&&n&&(o.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:o.WORKER_ID,results:o.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=o.parse(n.input,n.config);r&&t.postMessage({workerId:o.WORKER_ID,results:r,finished:!0})}}),(l.prototype=Object.create(c.prototype)).constructor=l,(u.prototype=Object.create(c.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(p.prototype=Object.create(c.prototype)).constructor=p,o})?r.apply(t,i):r)||(e.exports=a)},Kz6v:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("6Oco"),i=n("5xGT"),a=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextParserBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set&&t===i.A.EXECUTE)return this.applyTextToData(e,n),Object(r.b)()},e.prototype.getTextWithRowId=function(e){for(var t,n=[],r=0,i=!0,a=0;a<e.length;a++){var o=e[a];i?(n[r]={rowId:t&&t===o.rowId?"__N":o.rowId||"__N",text:o.text},o.text.endsWith("\n")?(t=n[r].rowId,r++):i=!1):(n[r].text+=o.text,o.text.endsWith("\n")&&(t=n[r].rowId,i=!0,r++))}return n},e.prototype.applyTextToData=function(t,n){var r=function(r){e.regexText.lastIndex=0;var a=e.regexText.exec(r);if(!a)return"continue";var o=a[1],s=a[2],c=t.shapes[o];c.data||(c.data={});var l=c.getTextParser(s);if(!l)return{value:void 0};var u=i.getTextWithRowId(n.$set[r]).map((function(e){return"creately.uml.class"===c.defId?{rowId:e.rowId,parseResult:l.parse(e.text)}:l.parse(e.text)}));c.updateDataItem&&c.updateDataItem(c,s,u)},i=this;for(var a in n.$set){var o=r(a);if("object"==typeof o)return o.value}},e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e}()},L8TE:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("V4YE"),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function s(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],i=e[t-2];return r?"ContentStatement"===r.type?(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function c(e,t,n){void 0===t&&(t=-1);var r=e[t+1],i=e[t+2];return r?"ContentStatement"===r.type?(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function l(e,t,n){var r=e[null==t?0:t+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var i=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}}function u(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var i=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}}o.prototype=new a.default,o.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=e.body,i=0,a=r.length;i<a;i++){var o=r[i],d=this.accept(o);if(d){var p=s(r,i,n),h=c(r,i,n),f=d.openStandalone&&p,m=d.closeStandalone&&h,g=d.inlineStandalone&&p&&h;d.close&&l(r,i,!0),d.open&&u(r,i,!0),t&&g&&(l(r,i),u(r,i)&&"PartialStatement"===o.type&&(o.indent=/([ \t]+$)/.exec(r[i-1].original)[1])),t&&f&&(l((o.program||o.inverse).body),u(r,i)),t&&m&&(l(r,i),u((o.inverse||o.program).body))}}return e},o.prototype.BlockStatement=o.prototype.DecoratorBlock=o.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,i=n;if(n&&n.chained)for(r=n.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var a={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:c(t.body),closeStandalone:s((r||t).body)};if(e.openStrip.close&&l(t.body,null,!0),n){var o=e.inverseStrip;o.open&&u(t.body,null,!0),o.close&&l(r.body,null,!0),e.closeStrip.open&&u(i.body,null,!0),!this.options.ignoreStandalone&&s(t.body)&&c(r.body)&&(u(t.body),l(r.body))}else e.closeStrip.open&&u(t.body,null,!0);return a},o.prototype.Decorator=o.prototype.MustacheStatement=function(e){return e.strip},o.prototype.PartialStatement=o.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=o,e.exports=t.default},"LA+B":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("NNJu"),a=n("EM62"),o=n("jHi0"),s=n("2kYt"),c=n("g5Ym");function l(e,t){if(1&e&&a.hc(0,"static-image",3),2&e){var n=a.yc();a.Dc("enableHover",!0)("type",n.item.itemIcon.type)("value",n.item.itemIcon.value)("width",n.item.itemIcon.width||20)("height",n.item.itemIcon.height||20)}}var u=function(e){function t(t){return e.call(this,t)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.gc(a.r))},t.\u0275cmp=a.ac({type:t,selectors:[["toolbar-grid-dropdown-item"]],features:[a.Rb([{provide:i.j,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:4,vars:3,consts:[["tooltip","","placement","top",1,"btn-list-item","fx-padding-4",3,"deactivated"],[1,"tooltip-content"],[3,"enableHover","type","value","width","height",4,"ngIf"],[3,"enableHover","type","value","width","height"]],template:function(e,t){1&e&&(a.mc(0,"a",0),a.mc(1,"span",1),a.fd(2),a.lc(),a.dd(3,l,1,5,"static-image",2),a.lc()),2&e&&(a.Dc("deactivated",!t.item.tooltip),a.Sb(2),a.gd(t.item.tooltip),a.Sb(1),a.Dc("ngIf",t.item.itemIcon))},directives:[o.a,s.t,c.a],encapsulation:2,changeDetection:0}),t}(i.j)},LC7v:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("hSRu"),a=n("EM62"),o=n("2kYt"),s=n("pYIu"),c=n("XwbL"),l=n("uXwy");function u(e,t){if(1&e&&(a.mc(0,"label",5),a.fd(1),a.lc()),2&e){var n=a.yc();a.Sb(1),a.hd(" ",null==n.props?null:n.props.label," ")}}function d(e,t){if(1&e&&a.hc(0,"sidebar-list-dropdown-item",6),2&e){var n=t.$implicit;a.Dc("item",n)}}var p=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=a.ac({type:t,selectors:[["sidebar-list-dropdown"]],features:[a.Pb],decls:8,vars:13,consts:[["class","caption",4,"ngIf"],[1,"dropdown-item",3,"settings","direction"],["dd",""],["ddbutton","",3,"items"],["dditem","",3,"item",4,"ngFor","ngForOf"],[1,"caption"],["dditem","",3,"item"]],template:function(e,t){if(1&e&&(a.mc(0,"div"),a.dd(1,u,2,1,"label",0),a.mc(2,"abs-dropdown",1,2),a.hc(4,"sidebar-dropdown-button",3),a.zc(5,"async"),a.dd(6,d,1,1,"sidebar-list-dropdown-item",4),a.zc(7,"async"),a.lc(),a.lc()),2&e){var n,r;a.Vb(t.dropdownType),a.Sb(1),a.Dc("ngIf",null==t.props?null:t.props.label),a.Sb(1),a.Ec("direction",null==t.props?null:t.props.dropdownDirection),a.Dc("settings",a.Hc(12,p)),a.Sb(2),a.Dc("items",null==(n=a.Ac(5,8,t._data))?null:n.value),a.Sb(2),a.Dc("ngForOf",null==(r=a.Ac(7,10,t._data))?null:r.value)}},directives:[o.t,s.a,c.a,o.s,l.a],pipes:[o.b],styles:["sidebar-list-dropdown-item[_ngcontent-%COMP%]{display:block}sidebar-list-dropdown-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.dropdown-item[_ngcontent-%COMP%]  .abs-dropdown-inner, .dropdown-item[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:100%;max-width:100%}"],changeDetection:0}),t}(i.a),f=a.oc(h)},LDpk:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("0KrK"),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},"Lk+x":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("uWBd"),a=n("5vYS"),o=n("5xGT"),s=n("W0Mc"),c=n("nsO7"),l=n("6Oco"),u=n("ZtqW"),d=n("X0jn"),p=n("EM62"),h=function(){function e(e,t,n){this.state=e,this.pathingSvc=t,this.reconnectSvc=n}return Object.defineProperty(e.prototype,"name",{get:function(){return"ConnectorReconnectBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX","scaleY","x","y","angle","gluepoints"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set)return this.shapeChange(e,n,t),Object(l.b)()},e.prototype.reconnect=function(e,t,n,r){var i=this;u.a.getConnectedConnectors(e,t.id).forEach((function(t){var a=t.connector.path;if(n===o.A.EXECUTE){var s=i.state.get("PreviewChanges");s&&s.$set&&s.$set["shapes."+t.connector.id+".path"]&&(a=s.$set["shapes."+t.connector.id+".path"])}var c=[a[t.connector.getFromEndpoint(e).id],a[t.connector.getToEndpoint(e).id]];i.reconnectShape(t.connector.id,c,e,n,r).forEach((function(e){return i.replaceOrPush(c,e)})),i.editConnectorPoint(e,t.connector.id,c),i.updateConnectorBumps(e,t.connector.id,n),i.updateConnectorBumpsForAboveConnectors(e,t.connector,n)}))},e.prototype.editConnectorPoint=function(e,t,n){var r=e.shapes[t],i=this.pathingSvc.repath(r.id,e,n,!1),o=a.a.createPathFromPoints(i);Object(c.isEqual)(r.path,o)||(r.path=o)},e.prototype.updateConnectorBumps=function(e,t,n){if(n===o.A.EXECUTE){var r=e.shapes[t];if(r.showBumps){var i=this.pathingSvc.setBumps(r.id,e,null,null),s=a.a.createPathFromPoints(i);Object(c.isEqual)(r.path,s)||(r.path=s)}}},e.prototype.shapeChange=function(t,n,r){var i=new Set;for(var a in n.$set){e.regexShape.lastIndex=0;var o=e.regexShape.exec(a);if(o){var s=o[1],c=t.shapes[s];if(!c.isConnector()){if(!i.has(s)){var l=this.getChangedConnectorId(n);this.reconnect(t,c,r,l)}i.add(s)}}}},e.prototype.getChangedConnectorId=function(t){for(var n in t.$set){e.regexConnectorPath.lastIndex=0;var r=e.regexConnectorPath.exec(n);if(r)return r[1]}return null},e.prototype.updateConnectorBumpsForAboveConnectors=function(e,t,n){var i,a;if(n===o.A.EXECUTE){var s=Object.keys(e.shapes).map((function(t){return e.shapes[t]})).filter((function(e){return e.type===d.t.Connector&&t.zIndex<e.zIndex}));try{for(var c=Object(r.k)(s),l=c.next();!l.done;l=c.next()){var u=l.value;this.updateConnectorBumps(e,u.id,n)}}catch(p){i={error:p}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}},e.prototype.reconnectShape=function(e,t,n,r,i){var a=this,s=this.getEndpoints(e,t,n),c=this.state.get("CustomGluePoint");return r===o.A.EXECUTE&&c&&c.shapeId&&s.forEach((function(t){(1===s.length||i&&e===i&&t.shapeId===c.shapeId)&&(t.shapeId=c.shapeId,t.gluepointId=c.gluepoint.id,t.gluepointLocked=!0,a.state.set("CustomGluePoint",{}))})),this.reconnectSvc.reconnect(e,n,s)},e.prototype.getEndpoints=function(e,t,n){var r=n.shapes[e].getPoints(),i=[r[0].id,Object(c.last)(r).id];return t.filter((function(e){return i.indexOf(e.id)>=0}))},e.prototype.replaceOrPush=function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n?e.splice(n,1,t):e.push(t)},e.regexShape=/shapes\.([^\.]+)(?!\.text)(?!\.defaultTextFormat)(?!\.style)\./g,e.regexConnectorPath=/shapes\.([^\.]+)(\.path)/g,e.\u0275fac=function(t){return new(t||e)(p.qc(o.Hb),p.qc(i.a),p.qc(s.a))},e.\u0275prov=p.cc({token:e,factory:e.\u0275fac}),e}()},ML8A:function(e,t,n){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}},Mb5J:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("NNJu"),a=n("EM62"),o=n("2kYt"),s=n("g5Ym");function c(e,t){if(1&e&&a.hc(0,"static-image",5),2&e){var n=a.yc();a.Dc("enableHover",!0)("type",n.item.itemIcon.type)("value",n.item.itemIcon.value)("width",70)("height",20)}}function l(e,t){if(1&e&&(a.mc(0,"span",7),a.fd(1),a.lc()),2&e){var n=a.yc(2);a.Sb(1),a.gd(n.item.subLabel)}}function u(e,t){if(1&e&&(a.mc(0,"span",6),a.fd(1),a.dd(2,l,2,1,"span",4),a.lc()),2&e){var n=a.yc();a.Sb(1),a.hd(" ",n.item.label," "),a.Sb(1),a.Dc("ngIf",n.item.subLabel)}}function d(e,t){if(1&e&&(a.mc(0,"span",7),a.fd(1),a.lc()),2&e){var n=a.yc();a.Sb(1),a.gd(n.item.subLabel)}}var p=function(e){function t(t){return e.call(this,t)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.gc(a.r))},t.\u0275cmp=a.ac({type:t,selectors:[["toolbar-list-dropdown-item"]],features:[a.Rb([{provide:i.j,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:5,vars:7,consts:[["tabindex","-1",1,"toolbar-dd-item-container","abs-dropdown-item","fx-center-all"],[1,"btn-list-item","btn-free-size","fx-span-width","fx-flex","fx-align-center"],[3,"enableHover","type","value","width","height",4,"ngIf"],["class","toolbar-dd-item-label body",4,"ngIf"],["class","toolbar-dd-item-sublabel",4,"ngIf"],[3,"enableHover","type","value","width","height"],[1,"toolbar-dd-item-label","body"],[1,"toolbar-dd-item-sublabel"]],template:function(e,t){1&e&&(a.mc(0,"li",0),a.mc(1,"div",1),a.dd(2,c,1,5,"static-image",2),a.dd(3,u,3,2,"span",3),a.dd(4,d,2,1,"span",4),a.lc(),a.lc()),2&e&&(a.Yb("has-icons",t.item.itemIcon&&t.item.label),a.Sb(1),a.Yb("active",t.selected),a.Sb(1),a.Dc("ngIf",t.item.itemIcon),a.Sb(1),a.Dc("ngIf",t.item.label),a.Sb(1),a.Dc("ngIf",t.item.subLabel))},directives:[o.t,s.a],styles:[".toolbar-dd-item-container.has-icons[_ngcontent-%COMP%]  .static-image-container{margin-right:.25rem;height:30px}.toolbar-dd-item-sublabel[_ngcontent-%COMP%]{padding-left:1rem;color:#354b53;float:right}"],changeDetection:0}),t}(i.j)},MtdZ:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Compiler=c,t.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var r=n.parse(e,t),a=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(a,t)},t.compile=function(e,t,n){void 0===t&&(t={});if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=a.extend({},t))||(t.data=!0);t.compat&&(t.useDepths=!0);var r=void 0;function o(){var r=n.parse(e,t),i=(new n.Compiler).compile(r,t),a=(new n.JavaScriptCompiler).compile(i,t,void 0,!0);return n.template(a)}function s(e,t){return r||(r=o()),r.call(this,e,t)}return s._setup=function(e){return r||(r=o()),r._setup(e)},s._child=function(e,t,n,i){return r||(r=o()),r._child(e,t,n,i)},s};var i=r(n("0KrK")),a=n("XVEb"),o=r(n("QSAZ")),s=[].slice;function c(){}function l(e,t){if(e===t)return!0;if(a.isArray(e)&&a.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;return!0}}function u(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}c.prototype={compiler:c,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||!l(r.args,i.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=a.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new i.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,r=0;r<n;r++)this.accept(t[r]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){u(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var r=this.classifySexpr(e);"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),r=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,r.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new i.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,a="SubExpression"===e.name.type;a&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var o=e.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",a,r,o),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){u(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,i=r.parts[0],a=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",i,a)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),a=e.path,s=a.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",r.length,s);else{if(this.options.knownHelpersOnly)throw new i.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);a.strict=!0,a.falsy=!0,this.accept(a),this.opcode("invokeHelper",r.length,a.original,o.default.helpers.simpleId(a))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=o.default.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,r=t.length;for(this.opcode("pushHash");n<r;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:s.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=o.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&o.default.helpers.helperExpression(e),i=!n&&(r||t);if(i&&!r){var a=e.path.parts[0],s=this.options;s.knownHelpers[a]?r=!0:s.knownHelpersOnly&&(i=!1)}return r?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||o.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),i},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var r=this.options.blockParams[t],i=r&&a.indexOf(r,e);if(r&&i>=0)return[t,i]}}}},Neki:function(e,t,n){"use strict";n.r(t),n.d(t,"RouteMatcher",(function(){return Of})),n.d(t,"baseRoutes",(function(){return xf})),n.d(t,"BaseModule",(function(){return Ef})),n.d(t,"playerFactory",(function(){return kf}));var r=n("D57K"),i=n("m/OR"),a=n("2kYt"),o=n("nIj0"),s=n("ulve"),c=n("S17y"),l=n("mFH5"),u=n("gcUQ"),d=n("3Uyd"),p=n("29Wa"),h=n("R7+U"),f=n("TMvu"),m=n("bFHC"),g=n("Cd2c"),b=n("sEIs"),v=n("/YfA"),_=n("kjSZ"),y=n("s2Ay"),O=n("C5+t"),x=n("5xGT"),E=n("NNJu"),k=n("EM62"),C=function(){function e(){}return e.\u0275mod=k.ec({type:e}),e.\u0275inj=k.dc({factory:function(t){return new(t||e)},imports:[[a.c,E.n]]}),e}(),w=n("+COk"),S=n("TLy2"),I=n("8j5Y"),T=n("C05f"),A=n("KTx3"),P=n("D1Hy"),M=n("Rk7q"),D=n("24h1"),j=n("jHi0"),R=n("crdX"),L=n("HY3P"),N=["helpButton"];function B(e,t){if(1&e){var n=k.nc();k.mc(0,"div",16),k.mc(1,"media-card",17),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc(3).trackVideoOpen(e)})),k.lc(),k.lc()}if(2&e){var r=t.$implicit;k.Sb(1),k.Dc("card",r)}}function U(e,t){if(1&e){var n=k.nc();k.mc(0,"media-card",17),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc(3).trackVideoOpen(e)})),k.lc()}if(2&e){var r=t.$implicit;k.Dc("card",r)}}function F(e,t){if(1&e&&(k.mc(0,"div",12),k.mc(1,"perfect-scrollbar"),k.dd(2,B,2,1,"div",13),k.mc(3,"div",14),k.dd(4,U,1,1,"media-card",15),k.lc(),k.lc(),k.lc()),2&e){var n=k.yc(2);k.Sb(2),k.Dc("ngForOf",n.largeVideos),k.Sb(2),k.Dc("ngForOf",n.smallVideos)}}function q(e,t){if(1&e&&(k.mc(0,"div",9),k.mc(1,"div",10),k.Bc(2),k.lc(),k.dd(3,F,5,2,"div",11),k.zc(4,"async"),k.mc(5,"div",10),k.Bc(6,1),k.lc(),k.lc()),2&e){var n=k.yc();k.Sb(3),k.Dc("ngIf",k.Ac(4,1,n.showVideos))}}var W=[[["","search",""]],[["","helpbuttons",""]]],H=["[search]","[helpbuttons]"],K=function(){function e(e,t,n,r){this.elRef=e,this.change=t,this.state=n,this.translate=r,this.showing=new T.a(!1),this.showVideos=new T.a(!0)}return Object.defineProperty(e.prototype,"largeVideos",{get:function(){return M.a.filter((function(e){return"large"===e.size}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"smallVideos",{get:function(){return M.a.filter((function(e){return"small"===e.size}))},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;Object(A.a)(this.helpButtonElem.nativeElement,"click").pipe(Object(S.a)((function(){return e.showing.value?e.closeWidget():e.showWidget()}))).subscribe()},e.prototype.closeWidget=function(){var e=this;return this.hideAnimation(this.elRef.nativeElement.firstElementChild.children[0]).start().pipe(Object(I.a)({complete:function(){return e.showing.next(!1)}}))},e.prototype.closeOpenIconClick=function(){this.showing.value?P.a.track("helpWidget.icon.click",{value1:"close"}):P.a.track("helpWidget.icon.click",{value1:"open"})},e.prototype.trackVideoOpen=function(e){P.a.track("helpWidget.videos.videoTile.click",{value1Type:"mediaTitle",value1:e.name})},e.prototype.showWidget=function(){return this.state.set("FloatingMedia",{open:!1}),this.showing.next(!0),this.change.detectChanges(),this.showAnimation(this.elRef.nativeElement.firstElementChild.children[0]).start()},e.prototype.showAnimation=function(e){var t=new w.a({from:{transform:"translateY(30px)",opacity:"0"},to:{transform:"translateY(0)",opacity:"1"},transitionProperty:"transform, opacity",duration:100,easing:"linear"});return t.element=e,t},e.prototype.hideAnimation=function(e){var t=new w.a({from:{transform:"translateY(0)",opacity:"1"},to:{transform:"translateY(30px)",opacity:"0"},transitionProperty:"transform, opacity",duration:100,easing:"linear"});return t.element=e,t},e.\u0275fac=function(t){return new(t||e)(k.gc(k.r),k.gc(k.j),k.gc(D.a),k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["help-widget"]],viewQuery:function(e,t){var n;(1&e&&k.kd(N,!0),2&e)&&(k.Mc(n=k.vc())&&(t.helpButtonElem=n.first))},inputs:{heading:"heading"},ngContentSelectors:H,decls:14,vars:14,consts:[[1,"help-widget-container","fx-pointer-events-auto"],["class","help-widget-cards-container",4,"ngIf"],["tooltip","","placement","top",1,"help-widget-button","fx-button","fx-round","btn-primary",3,"click"],["helpButton",""],[1,"nu-icon","nu-icon-help","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-help"],[1,"nu-icon","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"tooltip-content"],[1,"help-widget-cards-container"],[1,"help-widget-cards"],["class","help-videos",4,"ngIf"],[1,"help-videos"],["class","large-video-cards",4,"ngFor","ngForOf"],[1,"small-video-cards"],[3,"card","click",4,"ngFor","ngForOf"],[1,"large-video-cards"],[3,"card","click"]],template:function(e,t){1&e&&(k.Cc(W),k.mc(0,"div",0),k.dd(1,q,7,3,"div",1),k.zc(2,"async"),k.mc(3,"button",2,3),k.uc("click",(function(){return t.closeOpenIconClick()})),k.xc(),k.mc(5,"svg",4),k.zc(6,"async"),k.hc(7,"use",5),k.lc(),k.mc(8,"svg",6),k.zc(9,"async"),k.hc(10,"use",7),k.lc(),k.wc(),k.mc(11,"div",8),k.fd(12),k.zc(13,"async"),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(1),k.Dc("ngIf",k.Ac(2,6,t.showing)),k.Sb(4),k.Yb("show",!k.Ac(6,8,t.showing)),k.Sb(3),k.Yb("show",k.Ac(9,10,t.showing)),k.Sb(4),k.hd(" ",k.Ac(13,12,t.translate.get("TOOLTIPS.HELP"))," "))},directives:[a.t,j.a,R.b,a.s,L.a],pipes:[a.b],styles:[".help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card{border:1px solid #f1f8fd;padding:1.25rem;margin-bottom:1.25rem;box-shadow:0 1px 4px rgba(0,0,0,.2),0 1px 2px rgba(0,0,0,.1);border-radius:.25rem}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card h2{font-size:1rem}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card-btn{font-size:.875rem;height:40px}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card-text{line-height:1.25rem}.help-widget-button[_ngcontent-%COMP%]{box-shadow:0 1px 4px rgba(0,0,0,.2),0 1px 2px rgba(0,0,0,.1);height:48px;width:48px}.help-widget-button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{height:0;width:0;transition:transform .3s linear;transform:scale(0)}.help-widget-button[_ngcontent-%COMP%]   .nu-icon.show[_ngcontent-%COMP%], .help-widget-button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px;transform:scale(2)}.help-widget-button[_ngcontent-%COMP%]   .nu-icon-help.show[_ngcontent-%COMP%], .help-widget-button[_ngcontent-%COMP%]   .nu-icon-help[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1);stroke-width:1.5}.help-widget-container[_ngcontent-%COMP%]{z-index:2;display:flex;align-items:flex-end;flex-direction:column;position:relative}.help-widget-cards-container[_ngcontent-%COMP%]{padding:1rem;opacity:0;box-shadow:0 1px 4px rgba(0,0,0,.2),0 1px 2px rgba(0,0,0,.1);transition-property:transform,opacity;width:290px;background-color:#fff;border-radius:.5rem;overflow:auto;transform:translateY(30px);position:absolute;bottom:55px}.help-widget-header[_ngcontent-%COMP%]{color:#fff}.help-widget-header-msg[_ngcontent-%COMP%]{color:#04263d;font-size:1.125rem;padding-top:4%}.help-videos[_ngcontent-%COMP%]{flex:1;flex-direction:column}.help-videos[_ngcontent-%COMP%], .help-videos[_ngcontent-%COMP%]  perfect-scrollbar{max-height:45vh}.large-video-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column}.large-video-cards[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.small-video-cards[_ngcontent-%COMP%]{margin-top:1rem;display:inline-flex;flex-wrap:wrap;gap:1rem}.small-video-cards[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}"],changeDetection:0}),e}(),z=n("lNpM"),V=function(){function e(e){this.translate=e,this.openChatWidget=new k.t,this.contactUsUrl=z.a.get("ZENDESK_CONTACT_US_URL")}return e.prototype.openChat=function(){P.a.track("helpwidget.buttons.contact.click"),this.openChatWidget.next(!0)},e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["help-card-contact-us"]],outputs:{openChatWidget:"openChatWidget"},decls:11,vars:9,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"contact-us-container","fx-margin-bottom-20","fx-margin-top-20"],[1,"help-widget-card-text","grey"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin",3,"click"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"h2",1),k.fd(2),k.zc(3,"async"),k.lc(),k.mc(4,"div",2),k.mc(5,"p",3),k.fd(6),k.zc(7,"async"),k.lc(),k.lc(),k.mc(8,"button",4),k.uc("click",(function(){return t.openChat()})),k.fd(9),k.zc(10,"async"),k.lc(),k.lc()),2&e&&(k.Sb(2),k.gd(k.Ac(3,3,t.translate.get("HELP.START_CONVERSATION"))),k.Sb(4),k.hd(" ",k.Ac(7,5,t.translate.get("HELP.WE_GET_BACK"))," "),k.Sb(3),k.gd(k.Ac(10,7,t.translate.get("HELP.NEW_CONVERSATION"))))},pipes:[a.b],encapsulation:2,changeDetection:0}),e}(),G=["*"],Y=function(){function e(e){this.translate=e}return e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["help-card-faq"]],ngContentSelectors:G,decls:10,vars:6,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"links-container","fx-margin-bottom-20","fx-margin-top-20"],["href","https://support.creately.com/hc/en-us/sections/360000105656-FAQ","target","_blank"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin"]],template:function(e,t){1&e&&(k.Cc(),k.mc(0,"div",0),k.mc(1,"h2",1),k.fd(2),k.zc(3,"async"),k.lc(),k.mc(4,"div",2),k.Bc(5),k.lc(),k.mc(6,"a",3),k.mc(7,"button",4),k.fd(8),k.zc(9,"async"),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(2),k.gd(k.Ac(3,2,t.translate.get("HELP.HAVE_QUESTION"))),k.Sb(6),k.gd(k.Ac(9,4,t.translate.get("HELP.SEE_FAQ"))))},pipes:[a.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:2rem;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:1.25rem}"],changeDetection:0}),e}(),X=["*"],Q=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.ac({type:e,selectors:[["help-card-feature-request"]],ngContentSelectors:X,decls:8,vars:0,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"links-container","fx-margin-bottom-20","fx-margin-top-20"],["href","https://support.creately.com/hc/en-us/community/topics/360000014675-Feature-Requests-Creately-Next-","target","_blank"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin"]],template:function(e,t){1&e&&(k.Cc(),k.mc(0,"div",0),k.mc(1,"h2",1),k.fd(2,"Need a feature?"),k.lc(),k.mc(3,"div",2),k.Bc(4),k.lc(),k.mc(5,"a",3),k.mc(6,"button",4),k.fd(7,"Request a Feature"),k.lc(),k.lc(),k.lc())},styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:2rem;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:1.25rem}"],changeDetection:0}),e}(),J=n("g6G6"),$=["welcomeMsgcontainer"],Z=["welcomeMsgPanel"],ee=function(){function e(){this.closeMessage=new k.t,this.animSub=[]}return e.prototype.ngOnInit=function(){var e=Object(J.a)(this.fadeContainer("0","1").start(),this.slidePanel("translate3d(100%, 0, 0)","translate3d(0, 0, 0)").start()).subscribe();this.animSub.push(e)},e.prototype.closeWelcomeMsg=function(){var e=this,t=Object(J.a)(this.fadeContainer("1","0").start(),this.slidePanel("translate3d(0, 0, 0)","translate3d(100%, 0, 0)").start()).subscribe({complete:function(){return e.closeMessage.next(!0)}});this.animSub.push(t)},e.prototype.ngOnDestroy=function(){for(;this.animSub.length>0;)this.animSub.pop().unsubscribe()},e.prototype.fadeContainer=function(e,t){var n=new w.a({from:{opacity:e},to:{opacity:t},transitionProperty:"opacity",duration:200,easing:"ease-in-out"});return n.element=this.container.nativeElement,n},e.prototype.slidePanel=function(e,t){var n=new w.a({from:{transform:e},to:{transform:t},transitionProperty:"transform",duration:200,easing:"ease-out"});return n.element=this.panel.nativeElement,n},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.ac({type:e,selectors:[["welcome-message"]],viewQuery:function(e,t){var n;(1&e&&(k.kd($,!0),k.kd(Z,!0)),2&e)&&(k.Mc(n=k.vc())&&(t.container=n.first),k.Mc(n=k.vc())&&(t.panel=n.first))},outputs:{closeMessage:"closeMessage"},decls:25,vars:0,consts:[[1,"welcome-container","modal-window-container","fx-cover"],["welcomeMsgcontainer",""],[1,"welcome-inner","modal-window-right"],["welcomeMsgPanel",""],[1,"modal-window-close"],[1,"fx-button","fx-icon",3,"click"],[1,"nu-icon","nu-ic-close","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"welcome-message"],[1,"fx-margin-bottom-20","fx-center","white"],[1,"welcome-paras","fx-margin-bottom-20"],["href","https://support.creately.com/hc/en-us/sections/360000105656-FAQ","target","_blank",1,"white"],["href","https://creately1538999318.zendesk.com/hc/en-us/requests/new?app=proton&product=creately_next","target","_blank",1,"white"],[1,"welcome-image","fx-margin-bottom-20"]],template:function(e,t){1&e&&(k.mc(0,"div",0,1),k.mc(2,"div",2,3),k.mc(4,"div",4),k.mc(5,"button",5),k.uc("click",(function(){return t.closeWelcomeMsg()})),k.xc(),k.mc(6,"svg",6),k.hc(7,"use",7),k.lc(),k.lc(),k.lc(),k.wc(),k.mc(8,"div",8),k.mc(9,"h1",9),k.fd(10,"Thanks for Trying the Beta!"),k.lc(),k.mc(11,"div",10),k.mc(12,"p"),k.fd(13," We are very excited to let you in on our brand new, next generation Creately app. We built everything from scratch to bring you the best experience in diagramming. "),k.lc(),k.mc(14,"p"),k.fd(15," While you might find the new app much better in many ways, it is important to note that this is still in it\u2019s infant stage. We are working hard to bring you more features and diagram types, and we will keep updating as we have more. "),k.lc(),k.mc(16,"p"),k.fd(17," If you have questions check out the "),k.mc(18,"a",11),k.fd(19,"FAQ"),k.lc(),k.fd(20," or "),k.mc(21,"a",12),k.fd(22,"talk to us"),k.lc(),k.fd(23,". "),k.lc(),k.lc(),k.hc(24,"div",13),k.lc(),k.lc(),k.lc())},styles:[".welcome-container[_ngcontent-%COMP%]{top:0;right:0}.welcome-container[_ngcontent-%COMP%]   .fx-button.fx-icon[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#fff}.welcome-inner[_ngcontent-%COMP%]{width:650px;background-color:#f6aa00}.welcome-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}.welcome-message[_ngcontent-%COMP%]{color:#fff;line-height:25px;padding:0 50px;display:flex;flex-direction:column;align-items:center;justify-content:center;height:calc(100% - 48px)}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px}.welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff}.welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.welcome-image[_ngcontent-%COMP%]{max-height:370px;min-height:200px;background:url(/d/welcome-artwork.df09f261cd38e49449a3.svg) 50% no-repeat;background-size:contain;flex:1;width:100%}"],changeDetection:0}),e}();function te(e,t){if(1&e){var n=k.nc();k.xc(),k.wc(),k.mc(0,"div",5),k.mc(1,"h3",6),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc().openFeatureLink(e.title,e.link)})),k.fd(2),k.lc(),k.mc(3,"label",7),k.fd(4),k.lc(),k.mc(5,"p"),k.fd(6),k.lc(),k.mc(7,"a",8),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc().openFeatureLink(e.id,e.link)})),k.fd(8),k.zc(9,"async"),k.lc(),k.lc()}if(2&e){var r=t.$implicit,i=k.yc();k.Sb(2),k.gd(r.title),k.Sb(2),k.gd(r.date),k.Sb(2),k.gd(r.previewText),k.Sb(2),k.gd(k.Ac(9,4,i.translate.get("HELP.LEARN_MORE")))}}var ne=function(){function e(e){this.translate=e,this.data=[]}return Object.defineProperty(e.prototype,"translatedData",{get:function(){var e=this;return this.data.map((function(t){return t.title=e.translate.instant(t.title),t.date=e.translate.instant(t.date),t.previewText=e.translate.instant(t.previewText),t}))},enumerable:!1,configurable:!0}),e.prototype.openFeatureLink=function(e,t){window.open(t,"_blank"),P.a.track("helpwidget.feature.article.click",{value1Type:"articleName",value1:e})},e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["feature-update-card"]],inputs:{data:"data"},decls:7,vars:4,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10","fx-center-vertical"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-present"],["class","feature-update-item-container",4,"ngFor","ngForOf"],[1,"feature-update-item-container"],[1,"nu-text-primary","nu-text-bold",3,"click"],[1,"nu-text-small","grey"],[1,"primary",3,"click"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"h2",1),k.xc(),k.mc(2,"svg",2),k.hc(3,"use",3),k.lc(),k.fd(4),k.zc(5,"async"),k.lc(),k.dd(6,te,10,6,"div",4),k.lc()),2&e&&(k.Sb(4),k.hd(" ",k.Ac(5,2,t.translate.get("HELP.WHATS_NEW"))," "),k.Sb(2),k.Dc("ngForOf",t.translatedData))},directives:[a.s],pipes:[a.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:2rem;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:1.25rem}.feature-update-item-container[_ngcontent-%COMP%]{line-height:20px;margin-bottom:20px}.feature-update-item-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{cursor:pointer}.feature-update-item-container[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),e}();function re(e,t){if(1&e){var n=k.nc();k.mc(0,"button",3),k.uc("click",(function(){return k.Qc(n),k.yc().emitButtonClicked("contact")})),k.mc(1,"span",4),k.xc(),k.mc(2,"svg",5),k.hc(3,"use",7),k.lc(),k.lc(),k.fd(4),k.zc(5,"async"),k.lc()}if(2&e){var r=k.yc();k.Sb(4),k.hd(" ",k.Ac(5,1,r.translate.get("HELP.SUPPORT"))," ")}}var ie=function(){function e(e){this.translate=e,this.buttonClicked=new k.t,this.showSupportButton=!1}return e.prototype.emitButtonClicked=function(e){this.buttonClicked.next(e)},e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["help-buttons-card"]],inputs:{showSupportButton:"showSupportButton"},outputs:{buttonClicked:"buttonClicked"},decls:9,vars:4,consts:[[1,"help-buttons-container"],[1,"help-buttons-bottom"],["class","btn-list-item btn-small fx-center-all",3,"click",4,"ngIf"],[1,"btn-list-item","btn-small","fx-center-all",3,"click"],[1,"help-button-icon"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-help-center"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-comment"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.dd(2,re,6,3,"button",2),k.mc(3,"button",3),k.uc("click",(function(){return t.emitButtonClicked("search")})),k.mc(4,"span",4),k.xc(),k.mc(5,"svg",5),k.hc(6,"use",6),k.lc(),k.lc(),k.fd(7),k.zc(8,"async"),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(2),k.Dc("ngIf",t.showSupportButton),k.Sb(5),k.hd(" ",k.Ac(8,2,t.translate.get("HELP.HELP_CENTER"))," "))},directives:[a.t],pipes:[a.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:2rem;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:1.25rem}.help-buttons-container[_ngcontent-%COMP%]{margin-top:1rem;justify-content:space-between}.help-buttons-top[_ngcontent-%COMP%]{padding-bottom:1.5rem}.help-buttons-bottom[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:flex-start}.help-button-med[_ngcontent-%COMP%]{padding:.5rem 0;background-color:#fff;width:258px;height:40px}.help-button-icon[_ngcontent-%COMP%]{padding-right:.5rem}"],changeDetection:0}),e}(),ae=function(){function e(e){this.translate=e,this.buttonClicked=new k.t}return Object.defineProperty(e.prototype,"iconURL",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this.icon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translatedLabel",{get:function(){return this.translate.instant(this.label)},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["help-link-button"]],inputs:{label:"label",value:"value",icon:"icon"},outputs:{buttonClicked:"buttonClicked"},decls:7,vars:2,consts:[[1,"help-link-button-container","help-widget-card","white",3,"click"],[1,"nu-icon","nu-icon-med"],[1,"help-link-button-arrow","nu-icon","grey","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thin"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.uc("click",(function(){return t.buttonClicked.next(!0)})),k.xc(),k.mc(1,"svg",1),k.hc(2,"use"),k.lc(),k.wc(),k.mc(3,"a"),k.fd(4),k.lc(),k.xc(),k.mc(5,"svg",2),k.hc(6,"use",3),k.lc(),k.lc()),2&e&&(k.Sb(2),k.Tb("href",t.iconURL,null,"xlink"),k.Sb(2),k.gd(t.translatedLabel))},styles:[".help-link-button-container[_ngcontent-%COMP%]{padding-right:50px;cursor:pointer;display:flex;align-items:center;position:relative}.help-link-button-container[_ngcontent-%COMP%]:hover, .help-link-button-container[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#61a15e}.help-link-button-container[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:10px}.help-link-button-arrow[_ngcontent-%COMP%]{position:absolute;right:10px}"],changeDetection:0}),e}(),oe=n("Wrqg"),se=function(){return["Enter"]},ce=function(){function e(e){this.translate=e,this.submitSearchText=new k.t,this.changeHelpSearch=new k.t}return e.prototype.submitHelpSearch=function(e){P.a.track("helpWidget.search.term.submit",{value1:e}),this.submitSearchText.next(e)},e.prototype.updateHelpSearch=function(e){this.changeHelpSearch.next(e)},e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["help-article-search"]],outputs:{submitSearchText:"submitSearchText",changeHelpSearch:"changeHelpSearch"},decls:4,vars:4,consts:[[1,"help-search-container"],["icon","search-large","placeholder","Search help documents",1,"help-search",3,"showClearButton","submitOnCode","emitForInputChange","updateText","submit"],["textInput",""]],template:function(e,t){1&e&&(k.mc(0,"div"),k.mc(1,"div",0),k.mc(2,"text-input",1,2),k.uc("updateText",(function(e){return t.updateHelpSearch(e)}))("submit",(function(e){return t.submitHelpSearch(e)})),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(2),k.Dc("showClearButton",!0)("submitOnCode",k.Hc(3,se))("emitForInputChange",!0))},directives:[oe.a],styles:[".help-search-container[_ngcontent-%COMP%]{flex-grow:1}.help-search[_ngcontent-%COMP%]{padding:.5rem 0;display:flex;flex-direction:column}.help-search[_ngcontent-%COMP%]  input{height:44px!important}.help-search[_ngcontent-%COMP%]  .text-input-icon{top:12px!important}.help-search[_ngcontent-%COMP%]  .text-input-clear-btn{top:18px!important}"],changeDetection:0}),e}();function le(e,t){if(1&e&&(k.mc(0,"div",4),k.mc(1,"div",5),k.fd(2),k.zc(3,"async"),k.lc(),k.mc(4,"span",6),k.fd(5),k.zc(6,"async"),k.lc(),k.lc()),2&e){var n=k.yc();k.Sb(2),k.id("",k.Ac(3,3,n.translate.get("HELP.HELP_RESULT_DEFAULT_ERROR_MAIN"))," \u201c",n.helpSearchText,"\u201d"),k.Sb(3),k.gd(k.Ac(6,5,n.translate.get("HELP.HELP_RESULT_DEFAULT_ERROR_SUB")))}}function ue(e,t){if(1&e){var n=k.nc();k.mc(0,"li"),k.mc(1,"button",7),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc().onArticleClick(e.title)})),k.mc(2,"span",8),k.xc(),k.mc(3,"svg",9),k.hc(4,"use",10),k.lc(),k.lc(),k.fd(5),k.lc(),k.wc(),k.hc(6,"hr",11),k.lc()}if(2&e){var r=t.$implicit;k.Sb(1),k.Ec("href",r.url),k.Sb(4),k.hd(" ",r.title," ")}}var de=function(){function e(e){this.translate=e,this.searchResult=[]}return e.prototype.onArticleClick=function(e){P.a.track("helpWidget.feature.article.click",{value1:e})},e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["help-search-result"]],inputs:{searchResult:"searchResult",helpSearchText:"helpSearchText",isDefaultSearchResult:"isDefaultSearchResult"},decls:4,vars:2,consts:[[1,"help-search-result-main"],["class","help-search-result-default-msg",4,"ngIf"],[1,"help-search-result-list"],[4,"ngFor","ngForOf"],[1,"help-search-result-default-msg"],[1,"help-search-result-default-msg-main","body","body--lg"],[1,"help-search-result-default-msg-sub","body"],["target","_blank",1,"help-serach-result-link","body","btn-list-item",3,"href","click"],[1,"help-search-resul-icon"],[1,"nu-icon","nu-icon-small"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notepad"],[1,"help-search-result-line"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.dd(1,le,7,7,"div",1),k.mc(2,"ul",2),k.dd(3,ue,7,2,"li",3),k.lc(),k.lc()),2&e&&(k.Sb(1),k.Dc("ngIf",t.isDefaultSearchResult),k.Sb(2),k.Dc("ngForOf",t.searchResult))},directives:[a.t,a.s],pipes:[a.b],styles:[".help-search-result-main[_ngcontent-%COMP%]{padding-top:1rem}.help-search-result-list[_ngcontent-%COMP%]{list-style-type:none}.help-search-result-line[_ngcontent-%COMP%]{margin:.25rem 0;border:1px solid rgba(202,204,206,.5);left:0;right:0}.help-serach-result-link[_ngcontent-%COMP%]{color:#4b5356;width:100%;text-align:left;padding:.5rem}.help-serach-result-link[_ngcontent-%COMP%]:hover{color:#04263d}.help-search-resul-icon[_ngcontent-%COMP%]{padding-right:.5rem}.help-search-result-default-msg[_ngcontent-%COMP%]{padding-bottom:1.5rem;text-align:center}.help-search-result-default-msg-main[_ngcontent-%COMP%]{padding-bottom:.125rem}.help-search-result-default-msg-sub[_ngcontent-%COMP%]{color:rgba(75,83,86,.8)}.help-search-result-line-default[_ngcontent-%COMP%]{border:1px solid rgba(202,204,206,.5);left:0;right:0}"],changeDetection:0}),e}(),pe=n("X0jn"),he=n("Jzy8"),fe=n("19Zn"),me=n("4y1S"),ge=n("Nh1y"),be=n.n(ge),ve=n("yEyH"),_e=n("A7ZO"),ye=n("54H5"),Oe=n("XRvk"),xe=n("XfZi"),Ee=n("lP4r"),ke=n("Ax/4"),Ce=n("6T0K"),we=n("Kz6v"),Se=n("CSUU"),Ie=n("kUiX"),Te=n("ROBh"),Ae=n("c7W3"),Pe=n("7SLS"),Me=n("4e/d"),De=n("Bbfy"),je=function(){function e(e,t,n){this.commandService=e,this.notifierController=t,this.translate=n,this.maxFileSize=5e6,this.notificationMessages=new De.a(this.translate)}return e.getAllowedTypes=function(){return["image/png","image/jpeg","image/jpg","image/gif","image/bmp","image/x-icon","image/svg+xml"]},e.prototype.detect=function(t){if(t){var n=e.getAllowedTypes();for(var r in n)if(t.type===n[r])return this.validate(t)}return Object(Te.a)(!1)},e.prototype.trigger=function(e,t){if(e){var n=[],r=t?t.position:null;return n.push(e),t&&t.upload?this.commandService.dispatch(Ae.a.importImageAndUpload,void 0,{files:n,position:r}).pipe(Object(Pe.a)(!0),Object(Me.a)((function(){return Object(Te.a)(!1)}))):this.commandService.dispatch(Ae.a.importImage,void 0,{files:n,position:r}).pipe(Object(Pe.a)(!0),Object(Me.a)((function(){return Object(Te.a)(!1)})))}return Object(Te.a)(!1)},e.prototype.validate=function(e){if(e){if(e.size<=this.maxFileSize)return Object(Te.a)(!0);var t=this.notificationMessages.getNotificationMessage(De.b.IMAGE_IMPORT_SIZE_EXCEEDED);this.notifierController.show(De.b.IMAGE_IMPORT_SIZE_EXCEEDED,t.component,t.type,t.options,t.collapsed)}return Object(Te.a)(!1)},e.\u0275fac=function(t){return new(t||e)(k.qc(x.B),k.qc(x.jb),k.qc(y.e))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),Re=n("mQR/"),Le=n("1PcF"),Ne=n("BpNY"),Be=n("uWBd"),Ue=n("W0Mc"),Fe=n("9KTM"),qe=n("2zxM"),We=n("13fK"),He=n("zFpY"),Ke=n("SBjo"),ze=n("C3qL"),Ve=n("aSB4"),Ge=n("euU2"),Ye=n("QWbt"),Xe=function(){function e(){this._textStyles=[],this.createTextStyles()}return e.prototype.createTextStyles=function(){this._textStyles=[{size:10},{size:13},{size:10,bold:!0},{size:13,bold:!0},{size:10,font:"open_sansitalic"},{size:13,font:"open_sansitalic"},{size:10,font:"courier_prime"},{size:10,font:"lt-hairline",bold:!0},{size:22,font:"champagne"},{size:13,font:"indie"},{size:18,font:"indie"},{size:12,font:"open_sanscondensed"},{size:14,font:"open_sanscondensed"},{size:10,font:"playfair"},{size:12,font:"bree"},{size:13,font:"bree"},{size:18,font:"bebas"},{size:10,font:"montserrat"},{size:10,font:"raleway"},{size:12,font:"spartan"},{size:12,font:"droid_serifregular"},{size:12,font:"abhaya_libreregular"},{size:12,font:"gandhi_serifregular"}]},e.prototype.getTextStyles=function(){return this._textStyles},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),Qe=n("u7ZA"),Je=n("Di8k"),$e=n("OOUj"),Ze=n("BQpn"),et=n("oK6n"),tt=n("aSzn"),nt=n("AM7v"),rt=n("CrNP"),it=n("xcrX"),at=n("nzws"),ot=n("B82N"),st=(n("kWt5"),function(){function e(){}return e.prototype.shapeTransform=function(e,t){var n=e.minBounds;if(e.isContainer&&!n&&(n={width:20,height:20}),!n||!n.width&&!n.height)return t;var r=e.isFlippable("H"),i=e.isFlippable("V");return t.scaleX=this.limitScale(r,e.defaultBounds.width,n.width,e.scaleX,t.scaleX),t.scaleY=this.limitScale(i,e.defaultBounds.height,n.height,e.scaleY,t.scaleY),t},e.prototype.limitScale=function(e,t,n,r,i){if(n>0){var a=n/t,o=!e||i.value>-a;r>0&&i.value<a&&o&&(1!==i.high&&i.value+i.high>a?(i.value=i.value+i.high,i.low=i.value-a):(i.value=a,i.low=0)),r<0&&i.value<a&&o&&(i.value=-a),1!==i.low&&i.value-i.low<a&&(i.low=0)}return i},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}()),ct=n("qT6J"),lt=n("LZHD"),ut=n("umwn"),dt=n("bL7E"),pt=n("6qzS"),ht=n("ZC55"),ft=n("AaYA"),mt=n("ZZOX"),gt=n("qonV"),bt=n("xVbo"),vt=n("mWib"),_t=n("wkcE"),yt=n("7zx0"),Ot=n("BwBJ"),xt=n("J+dc"),Et=n("Ohay"),kt=n("vz8n"),Ct=n("nsO7"),wt=function(){function e(e,t,n,r,i){var a=this;this.state=e,this.pluginReg=t,this.user=n,this.collabLocator=r,this.realtimeService=i,this.startConnectionDelay=5e3,this.userStatus={},this.handleIncomingMessages=function(e){if(e&&"object"==typeof e){var t=e,n=t.event,r=t.data,i=a.currentConference.value&&a.currentConference.value.room?a.currentConference.value.room:void 0;n===kt.ConferenceEvents.conferenceConnectionSuccess?a.onConferenceConnected():n===kt.ConferenceEvents.conferenceDisconected?a.onConferenceDisconnected(i,r):n===kt.ConferenceEvents.conferenceError?a.onConferenceError(i,r):n===kt.ConferenceEvents.conferenceUserListChanged?a.onUserListChange(r):x.cb.error("Unhandled Conference Event",n)}},this.currentConference=new T.a(void 0),this.userCount=new T.a(1),this.listenToConnectionStart()}return Object.defineProperty(e.prototype,"manifestUrl",{get:function(){return this.axionManifestUrl||(this.axionManifestUrl=x.m.get("PLUGIN_AXION_MANIFEST")),this.axionManifestUrl},enumerable:!1,configurable:!0}),e.prototype.startConference=function(){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(e){switch(e.label){case 0:return[4,this.pluginReg.load(this.manifestUrl)];case 1:return e.sent(),0===this.userCount.value&&this.userCount.next(1),this.messageSub=this.pluginReg.recieveMessages(this.axionManifestUrl).subscribe(this.handleIncomingMessages),this.pluginReg.sendMessage(kt.ConferenceCommands.conferenceStart,{room:this.state.get("CurrentDiagram")},this.axionManifestUrl),this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"connecting"}),[2]}}))}))},e.prototype.stopConference=function(e){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(t){return this.messageSub.unsubscribe(),this.messageSub=void 0,this.pluginReg.sendMessage(kt.ConferenceCommands.conferenceStop,{room:this.currentConference.value.room},this.axionManifestUrl),e?this.currentConference.next(void 0):this.currentConference.next({room:this.currentConference.value.room,status:"disconnected"}),this.updateUserCount(),this.pluginReg.unload(this.axionManifestUrl),[2]}))}))},e.prototype.listenToConnectionStart=function(){var e=this;this.state.changes("RealtimeConnectionStatus").pipe(Object(bt.a)((function(e){return e===yt.a.ONLINE})),Object(Ot.a)(this.startConnectionDelay),Object(xt.a)(1)).subscribe((function(t){e.start()}))},e.prototype.start=function(){this.listenToConferenceChanges(),this.listenToRealtimeChannel(),this.listenToCollabChanges(),this.listenToDocumentChanges()},e.prototype.switch=function(){this.currentConference.value&&("joined"===this.currentConference.value.status&&this.stopConference(!0),this.currentConference.next(void 0)),this.annouceJoin()},e.prototype.annouceJoin=function(){x.cb.debug("Conference Service - announcing join."),this.realtimeService.set(e.KEY_CONFERENCE_STATUS,e.CONFERENCE_ANNOUNCE)},e.prototype.listenToDocumentChanges=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(bt.a)((function(e){return Boolean(e)})),Object(Et.a)(),Object(I.a)((function(t){return e.switch()}))).subscribe()},e.prototype.listenToConferenceChanges=function(){var t=this;return this.currentConference.pipe(Object(bt.a)((function(e){return!!e})),Object(Et.a)(),Object(I.a)((function(n){t.realtimeService.set(e.KEY_CONFERENCE_STATUS,n.status)}))).subscribe()},e.prototype.listenToRealtimeChannel=function(){var t=this;return this.realtimeService.get(e.KEY_CONFERENCE_STATUS).pipe(Object(Et.a)(),Object(I.a)((function(n){n.value===e.CONFERENCE_ANNOUNCE?t.currentConference.value&&"joined"===t.currentConference.value.status&&t.realtimeService.set(e.KEY_CONFERENCE_STATUS,"joined"):t.updateConferenceStatus(n.userId,n.value)}))).subscribe()},e.prototype.listenToCollabChanges=function(){var t=this;return this.collabLocator.getCollabs().pipe(Object(Et.a)((function(e,t){return Object(Ct.filter)(e,(function(e){return e.online})).length===Object(Ct.filter)(t,(function(e){return e.online})).length}))).subscribe((function(n){t.removeDisconnectedPeers(n),t.currentConference.value&&"joined"===t.currentConference.value.status&&t.realtimeService.set(e.KEY_CONFERENCE_STATUS,"joined")}))},e.prototype.removeDisconnectedPeers=function(e){var t=this,n=Object(Ct.map)(Object(Ct.filter)(e,(function(e){return!e.online})),"id"),r=!1;Object(Ct.each)(n,(function(e){t.userStatus[e]&&(t.userStatus[e]="disconected",r=!0)})),r&&this.currentConference.value&&"joined"!==this.currentConference.value.status&&!Object(Ct.find)(this.userStatus,(function(e){return"joined"===e}))&&this.currentConference.next(void 0),this.updateUserCount()},e.prototype.updateConferenceStatus=function(e,t){t&&(this.userStatus[e]=t),"joined"===t?this.currentConference.value&&"disconnected"!==this.currentConference.value.status||this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"active"}):"disconnected"!==t&&"error"!==t||!this.currentConference.value||"active"!==this.currentConference.value.status||Object(Ct.find)(this.userStatus,(function(e){return"joined"===e}))||this.currentConference.next(void 0),this.updateUserCount()},e.prototype.updateUserCount=function(){if(!this.currentConference.value||"joined"!==this.currentConference.value.status){var e=Object(Ct.filter)(this.userStatus,(function(e){return"joined"===e}));this.userCount.next(e.length),this.applyConferenceLimit()}},e.prototype.applyConferenceLimit=function(){this.currentConference.value&&"active"===this.currentConference.value.status&&this.userCount.value>e.MAX_CALLERS&&this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"full"})},e.prototype.onConferenceConnected=function(){var e=this;this.user.getUserData().pipe(Object(bt.a)((function(e){return!!e})),Object(xt.a)(1)).subscribe((function(t){e.pluginReg.sendMessage(kt.ConferenceCommands.conferenceStart,{room:e.state.get("CurrentDiagram"),name:t.fullName},e.axionManifestUrl),e.currentConference.next({room:e.state.get("CurrentDiagram"),status:"joined"})}))},e.prototype.onConferenceDisconnected=function(e,t){e&&e===t.room&&this.currentConference.next({room:e,status:"disconnected"})},e.prototype.onConferenceError=function(e,t){e&&e===t.room&&this.currentConference.next({room:e,status:"error"})},e.prototype.onUserListChange=function(e){e&&e.activeCount&&(this.userCount.next(e.activeCount),this.applyConferenceLimit())},e.KEY_CONFERENCE_STATUS="KEY_CONFERENCE_STATUS",e.CONFERENCE_ANNOUNCE="CONFERENCE_ANNOUNCE",e.MAX_CALLERS=4,e.\u0275fac=function(t){return new(t||e)(k.qc(x.Hb),k.qc(gt.a),k.qc(me.x),k.qc(_t.a),k.qc(yt.b))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),St=["container"],It=["bottomPanelContainer"],Tt=function(){function e(e,t,n,r){this.pluginReg=e,this.state=t,this.conference=n,this.browserWindow=r,this.videoTileSizeSmallWidth=170,this.videoTileSizeSmallHeight=100,this.videoTileSizeLargeHeight=200,this.resizeThrottle=1e3,this.subs=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this.manifest._url},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this,t=this.pluginReg.burrowMainIframe(this.manifest._url);this.container.nativeElement.appendChild(t);var n=Object(J.a)(this.listenToViewportChanges(),this.conference.userCount.asObservable()).pipe(Object(I.a)((function(){e.updateVideoStripWidth()}))).subscribe();this.subs.push(n)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.updateVideoStripWidth=function(){var e=this.conference.userCount.value,t=this.bottomPanelContainer.nativeElement.offsetWidth,n=this.container.nativeElement.getElementsByTagName("iframe"),r=e*this.videoTileSizeSmallWidth;n[0].style.width=r>t?t+"px":r+"px"},e.prototype.updateVideoStripHeight=function(){},e.prototype.listenToViewportChanges=function(){return Object(J.a)(this.state.changes("LeftSidebarState").pipe(Object(bt.a)((function(e){return"opened"===e||"closed"===e}))),this.state.changes("RightSidebarPanel"),Object(A.a)(this.browserWindow,"resize").pipe(Object(vt.a)(this.resizeThrottle)))},e.\u0275fac=function(t){return new(t||e)(k.gc(gt.a),k.gc(x.Hb),k.gc(wt),k.gc("BrowserWindow"))},e.\u0275cmp=k.ac({type:e,selectors:[["bottom-panel"]],viewQuery:function(e,t){var n;(1&e&&(k.Xc(St,!0),k.kd(It,!0)),2&e)&&(k.Mc(n=k.vc())&&(t.container=n.first),k.Mc(n=k.vc())&&(t.bottomPanelContainer=n.first))},inputs:{manifest:"manifest"},decls:4,vars:0,consts:[[1,"bottom-panel-container","fx-pointer-events-auto"],["bottomPanelContainer",""],[1,"plugin-iframe-container"],["container",""]],template:function(e,t){1&e&&(k.mc(0,"div",0,1),k.hc(2,"div",2,3),k.lc())},styles:[".bottom-panel-container[_ngcontent-%COMP%]{height:90px;width:100%}.plugin-iframe-container[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e}(),At=n("QoSw"),Pt=n("HM3f"),Mt=n("YtkY"),Dt=n("oyCe"),jt=n("bV32");function Rt(e,t){1&e&&(k.xc(),k.wc(),k.hc(0,"div",9))}var Lt=function(e){return{"sp-action-btn-active":e}};function Nt(e,t){if(1&e){var n=k.nc();k.mc(0,"button",3),k.uc("click",(function(){return k.Qc(n),k.yc().openCommentsPanel()})),k.zc(1,"async"),k.xc(),k.mc(2,"svg",4),k.hc(3,"use",5),k.lc(),k.dd(4,Rt,1,0,"div",6),k.zc(5,"async"),k.wc(),k.mc(6,"div",7),k.mc(7,"span",8),k.fd(8,"TOOLTIPS.COMMENTS"),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Dc("ngClass",k.Ic(6,Lt,"comments"===k.Ac(1,2,r.toggledButton))),k.Sb(4),k.Dc("ngIf",k.Ac(5,4,r.IsNewCommentsAvailable))}}var Bt=function(e){return{"secondary-active":e}};function Ut(e,t){if(1&e){var n=k.nc();k.mc(0,"button",3),k.uc("click",(function(){return k.Qc(n),k.yc().openShapePropertiesPanel()})),k.zc(1,"async"),k.xc(),k.mc(2,"svg",10),k.zc(3,"async"),k.hc(4,"use",11),k.lc(),k.wc(),k.mc(5,"div",7),k.mc(6,"span",8),k.fd(7,"TOOLTIPS.SHAPE_PROPERTIES"),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Dc("ngClass",k.Ic(6,Lt,"prop"===k.Ac(1,2,r.toggledButton))),k.Sb(2),k.Dc("ngClass",k.Ic(8,Bt,"prop"===k.Ac(3,4,r.toggledButton)))}}function Ft(e,t){if(1&e){var n=k.nc();k.mc(0,"button",12),k.uc("click",(function(){return k.Qc(n),k.yc().openShapeDataPanel()})),k.zc(1,"async"),k.xc(),k.mc(2,"svg",10),k.zc(3,"async"),k.hc(4,"use",13),k.lc(),k.wc(),k.mc(5,"div",7),k.mc(6,"span",8),k.fd(7,"TOOLTIPS.SHAPE_DATA"),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Dc("ngClass",k.Ic(6,Lt,"data"===k.Ac(1,2,r.toggledButton))),k.Sb(2),k.Dc("ngClass",k.Ic(8,Bt,"data"===k.Ac(3,4,r.toggledButton)))}}var qt=function(e,t,n){return{"sp-action-container":e,"sp-action-container-opened":t,"sp-action-container-closed":n}},Wt=function(){function e(e,t,n){this.state=e,this.ll=t,this.ul=n,this.isDemoMode=!1,this.subs=[],this.isSelected=new T.a(!1),this.shouldShowDataOption=new T.a(!1),this.shouldShowPropOption=new T.a(!1),this.shouldShowCommentOption=new T.a(!0),this.toggledButton=new T.a(""),this.handleDemoUser()}return Object.defineProperty(e.prototype,"IsNewCommentsAvailable",{get:function(){return this.state.changes("NewCommentsIndicator")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldShowOption",{get:function(){return Object(Pt.b)([this.shouldShowDataOption,this.shouldShowPropOption,this.shouldShowCommentOption]).pipe(Object(Mt.a)((function(e){var t=Object(r.h)(e,3),n=t[0],i=t[1],a=t[2];return n||i||a})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.listenToShapeSelection().subscribe()),this.subs.push(this.listentToButtonToggle().subscribe()),this.subs.push(this.listenToRightPanelChanges().subscribe()),this.subs.push(this.keepOneSidebarOpenOnTiptapStateChange().subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.openShapePropertiesPanel=function(){"prop"===this.toggledButton.value?this.removeToggle():this.toggledButton.next("prop")},e.prototype.openShapeDataPanel=function(){"data"===this.toggledButton.value?this.removeToggle():this.toggledButton.next("data")},e.prototype.openCommentsPanel=function(){"comments"===this.toggledButton.value?this.removeToggle():this.toggledButton.next("comments")},e.prototype.handleDemoUser=function(){var e=this;this.ul.getUserDataAfterUserSubscriptionStarted().pipe(Object(bt.a)((function(e){return!!e})),Object(xt.a)(1),Object(bt.a)((function(e){return e.status===me.A.DEMO})),Object(I.a)((function(){return e.isDemoMode=!0}))).subscribe()},e.prototype.removeToggle=function(){this.toggledButton.next(""),this.closeRightSidebar()},e.prototype.listenToShapeSelection=function(){var e=this;return this.state.changes("Selected").pipe(Object(Mt.a)((function(t){return t&&0!==t.length?e.toggledButton.value||(e.closeRightSidebar(),e.isSelected.next(!0)):(e.shouldShowPropOption.next(!1),e.shouldShowDataOption.next(!1),"comments"!==e.toggledButton.value&&e.removeToggle()),t})),Object(S.a)((function(t){return e.isShapeArrayContainsConnector(t).pipe(Object(I.a)((function(n){e.shouldShowPropOption.next(!0),n||t.length>1?e.shouldShowDataOption.next(!1):e.shouldShowDataOption.next(!0)})))})))},e.prototype.keepOneSidebarOpenOnTiptapStateChange=function(){var e=this;return this.state.changes("TiptapDocument").pipe(Object(I.a)((function(t){"task-panel"===(null==t?void 0:t.parentName)?e.removeToggle():e.state.set("CurrentSidebarTask","")})))},e.prototype.closeRightSidebar=function(){this.state.get("OpenRightSidebar")!==E.r.None&&this.state.set("OpenRightSidebar",E.r.None)},e.prototype.isShapeArrayContainsConnector=function(e){var t=this,n=e.map((function(e){return t.locator.getShapeModel(e)}));return Pt.b.apply(void 0,Object(r.j)(n)).pipe(Object(vt.a)(100),Object(Mt.a)((function(e){return!(Dt.a.sameType(e)&&!e[0].isConnector())})))},e.prototype.listentToButtonToggle=function(){var e=this;return this.toggledButton.pipe(Object(I.a)((function(t){"prop"===t?e.state.set("OpenRightSidebar","shapePanel"):"data"===t?e.state.set("OpenRightSidebar","shapeData"):"comments"===t&&e.state.set("OpenRightSidebar","diagramcomments")})))},e.prototype.listenToRightPanelChanges=function(){var e=this;return this.state.changes("OpenRightSidebar").pipe(Object(I.a)((function(t){"diagraminfo"===t?e.shouldShowCommentOption.next(!1):(Object(Ot.a)(1e3),e.shouldShowCommentOption.next(!0))})))},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(At.a),k.gc(me.x))},e.\u0275cmp=k.ac({type:e,selectors:[["shape-properties-action"]],decls:10,vars:22,consts:[[3,"ngClass"],["class","btn-icon btn-small fx-center-all fx-pointer-events-auto fx-padding-4","tooltip","","placement","bottom",3,"ngClass","click",4,"ngIf"],["tooltip-tour-step","shape-data","class","btn-icon btn-small fx-center-all fx-pointer-events-auto fx-padding-4","tooltip","","placement","bottom",3,"ngClass","click",4,"ngIf"],["tooltip","","placement","bottom",1,"btn-icon","btn-small","fx-center-all","fx-pointer-events-auto","fx-padding-4",3,"ngClass","click"],[1,"nu-icon","sp-action-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-comment"],["class","sp-new-comment-indicator",4,"ngIf"],[1,"tooltip-content"],["translate","",1,"tooltip-content"],[1,"sp-new-comment-indicator"],[1,"nu-icon","sp-action-icon",3,"ngClass"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-shape-properties"],["tooltip-tour-step","shape-data","tooltip","","placement","bottom",1,"btn-icon","btn-small","fx-center-all","fx-pointer-events-auto","fx-padding-4",3,"ngClass","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-shape-data"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.zc(1,"async"),k.zc(2,"async"),k.zc(3,"async"),k.dd(4,Nt,9,8,"button",1),k.zc(5,"async"),k.dd(6,Ut,8,10,"button",1),k.zc(7,"async"),k.dd(8,Ft,8,10,"button",2),k.zc(9,"async"),k.lc()),2&e&&(k.Yb("demo-mode",t.isDemoMode),k.Dc("ngClass",k.Kc(18,qt,k.Ac(1,6,t.shouldShowOption),""!==k.Ac(2,8,t.toggledButton),""===k.Ac(3,10,t.toggledButton))),k.Sb(4),k.Dc("ngIf",k.Ac(5,12,t.shouldShowCommentOption)),k.Sb(2),k.Dc("ngIf",k.Ac(7,14,t.shouldShowPropOption)),k.Sb(2),k.Dc("ngIf",k.Ac(9,16,t.shouldShowDataOption)))},directives:[a.q,a.t,j.a,y.a,jt.a],pipes:[a.b],styles:[".sp-action-container[_ngcontent-%COMP%]{padding-left:.25rem;padding-right:.25rem;position:fixed;right:.625rem;top:1rem;display:flex;align-items:center;gap:.375rem;height:50px;background-color:#fff;border-radius:4px;cursor:pointer;z-index:3}.sp-action-container.demo-mode[_ngcontent-%COMP%]{margin-top:30px}.sp-action-container-closed[_ngcontent-%COMP%]{box-shadow:0 4px 16px rgba(0,0,0,.05),0 2px 6px rgba(0,0,0,.05),0 1px 2px rgba(0,0,0,.05)}.sp-action-container-opened[_ngcontent-%COMP%]{box-shadow:transparent;border:1px solid #caccce}.sp-action-icon[_ngcontent-%COMP%]{padding-top:.125rem;padding-bottom:.125rem}.sp-action-btn-active[_ngcontent-%COMP%]{background-color:#d5e8f4!important}.sp-new-comment-indicator[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#f36c67;border-radius:100%;margin-left:-12px;margin-top:-12px}"]}),e}(),Ht=n("5Jpj"),Kt=n("I4UX"),zt=n("yZNT"),Vt=n("fNjA"),Gt=n("yBHx"),Yt=n("Hd+h"),Xt=n("7n9Q"),Qt=n("pWGo"),Jt=n("2aGL"),$t=n("No4x"),Zt=n("emwj"),en=n("/YKq"),tn=n("BL7/"),nn=n("r3/A");function rn(e,t){if(1&e){var n=k.nc();k.mc(0,"div",13),k.mc(1,"a",14),k.uc("blur",(function(){return k.Qc(n),k.yc(2).closeEditor()}))("click",(function(e){return k.Qc(n),k.yc(2).navigate(e)})),k.fd(2),k.lc(),k.lc()}if(2&e){var r=t.ngIf;k.Sb(1),k.Ec("href",r,k.Tc),k.Sb(1),k.gd(r)}}function an(e,t){if(1&e){var n=k.nc();k.mc(0,"div",6),k.dd(1,rn,3,2,"div",7),k.zc(2,"async"),k.mc(3,"button",8),k.uc("click",(function(){return k.Qc(n),k.yc().onEditBtnClick()})),k.xc(),k.mc(4,"svg",9),k.hc(5,"use",10),k.lc(),k.lc(),k.wc(),k.mc(6,"button",11),k.uc("click",(function(){return k.Qc(n),k.yc().removeLink()})),k.xc(),k.mc(7,"svg",9),k.hc(8,"use",12),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Sb(1),k.Dc("ngIf",k.Ac(2,1,r.hyperlinkValue))}}function on(e,t){if(1&e){var n=k.nc();k.mc(0,"div"),k.mc(1,"text-input",15,16),k.uc("updateText",(function(){return k.Qc(n),k.yc().handleInputChange()}))("keydown",(function(e){return k.Qc(n),k.yc().handleKeydown(e)}))("blur",(function(){return k.Qc(n),k.yc().closeEditor()})),k.zc(3,"translate"),k.zc(4,"async"),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Sb(1),k.Ec("placeholder",k.Ac(3,2,"LABELS.ADD_LINK_AND_ENTER")),k.Dc("value",k.Ac(4,4,r.hyperlinkValue))}}function sn(e,t){1&e&&(k.mc(0,"div",17),k.fd(1,"LABELS.PRESS_ESCAPE_TO_CANCEL"),k.lc())}var cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.prototype.ngAfterViewInit=function(){var e=this;this.containerElement.style.display="none",this.subs.push(this.onEscape().pipe(Object(I.a)((function(){return e.closeEditor()}))).subscribe())},t.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},t.prototype.open=function(){this.openEditor()},t.prototype.closeEditor=function(){this.hyperlinkValue.next(""),this.containerElement.style.display="none"},t.prototype.openEditor=function(){var e=this.editor.getAttributes("link").href;e?this.editorState.next("view"):this.editorState.next("edit"),this.hyperlinkValue.next(e),this.containerElement.style.display="block",this.textInput&&this.textInput.focus(),this.position()},t.prototype.applyLink=function(){if(this.textInput&&this.textInput.value){var e=encodeURI(this.textInput.value);if(nn(e)||(e="https://"+e),!nn(e))return void this.containerElement.classList.add("invalid-url");var t=e;if(null===t)return;if(""===t)return void this.editor.chain().focus().extendMarkRange("link").unsetLink().run();this.editor.chain().focus().extendMarkRange("link").setUnderline().setColor("blue").setLink({href:t}).run()}this.closeEditor()},t.prototype.position=function(){if(this.editor&&this.containerElement){var e=this.editor,t=e.state,n=e.view,r=this.containerElement,i=this.editor.view.dom;r.style.display="block";var a=t.selection.$anchor,o=t.selection.$head,s=n.coordsAtPos(a.pos),c=n.coordsAtPos(o.pos),l=Math.min(s.left,c.left),u=Math.max(s.right,c.right),d=Math.min(s.top,c.top),p=i.getBoundingClientRect(),h=r.getBoundingClientRect(),f=l+(u-l)/2-h.width/2-p.x,m=d-h.height-p.y+90;r.style.transform="translate3d("+Math.min(Math.max(f,0),p.width-h.width)+"px, "+m+"px, 0px)"}},t.prototype.removeLink=function(){this.editor.chain().focus().extendMarkRange("link").unsetLink().unsetUnderline().unsetColor().run(),this.closeEditor()},t.\u0275fac=function(e){return ln(e||t)},t.\u0275cmp=k.ac({type:t,selectors:[["tiptap-hyperlink-editor"]],inputs:{editor:"editor"},features:[k.Pb],decls:6,vars:3,consts:[["data-keep-text-open","true",1,"hyperlink-editor-container"],["container",""],[1,"hyperlink-editor-inner-container"],["class","fx-height-inherit fx-center-vertical",4,"ngIf"],[4,"ngIf"],["class","hyperlink-escape-lable","translate","",4,"ngIf"],[1,"fx-height-inherit","fx-center-vertical"],["class","fx-flex-expand fx-ellipsis",4,"ngIf"],[1,"hyperlink-edit-btn","nu-btn-small","nu-btn-icon","lib-browser-close-btn","fx-no-padding",3,"click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-edit"],[1,"hyperlink-remove-btn","nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-trash-thin"],[1,"fx-flex-expand","fx-ellipsis"],["target","_blank",1,"hyperlink-label","fx-ellipsis","primary",3,"href","blur","click"],["autoFocus","true","emitForInputChange","true",1,"hyperlink-input",3,"placeholder","value","updateText","keydown","blur"],["textInput",""],["translate","",1,"hyperlink-escape-lable"]],template:function(e,t){1&e&&(k.mc(0,"div",0,1),k.mc(2,"div",2),k.dd(3,an,9,3,"div",3),k.dd(4,on,5,6,"div",4),k.lc(),k.dd(5,sn,2,0,"div",5),k.lc()),2&e&&(k.Sb(3),k.Dc("ngIf","view"===t.editorState.value),k.Sb(1),k.Dc("ngIf","edit"===t.editorState.value),k.Sb(1),k.Dc("ngIf","edit"===t.editorState.value))},directives:[a.t,oe.a,y.a],pipes:[a.b,y.d],styles:[".hyperlink-editor-inner-container[_ngcontent-%COMP%]{position:relative;width:320px;height:50px;margin:8px;background:#fff;border:1px solid #dcdcdc;box-sizing:border-box;border-radius:3px;z-index:2}.hyperlink-editor-container[_ngcontent-%COMP%]{position:absolute;z-index:2}.hyperlink-label[_ngcontent-%COMP%]{padding:15px 45px 15px 15px}.hyperlink-input[_ngcontent-%COMP%]{float:left;width:302px;margin:8px}.hyperlink-input[_ngcontent-%COMP%]  input{margin:0!important}.hyperlink-editor-container.invalid-url[_ngcontent-%COMP%]   .hyperlink-input[_ngcontent-%COMP%]  input{border:1px solid #ffbaba}.hyperlink-remove-btn[_ngcontent-%COMP%]{padding-left:0}.hyperlink-escape-lable[_ngcontent-%COMP%]{text-align:center;font-size:12px;line-height:15px}"],changeDetection:0}),t}(tn.a),ln=k.oc(cn),un=n("vdZD"),dn=n("X5Q9"),pn=n("0fSw"),hn=n("ZTXN"),fn=function(){function e(){}return e.getSidePosition=function(t){return e.sidePositions[t]},e.sidePositions={topleft:{x:0,y:0},topcenter:{x:.5,y:0},topright:{x:1,y:0},bottomleft:{x:0,y:1},bottomcenter:{x:.5,y:1},bottomright:{x:1,y:1},leftcenter:{x:0,y:.5},rightcenter:{x:1,y:.5},center:{x:.5,y:.5}},e}(),mn=["secondaryItemContainer"],gn=["itemContainer"];function bn(e,t){}function vn(e,t){}var _n=function(e){function t(t,n,r,i){var a=e.call(this,t,n)||this;return a.componentFactoryResolver=t,a.injector=n,a.elementRef=r,a.manager=i,a.secondaryLevelVisibility=new T.a(!1),a.showing=!1,a.showMoreOptions=new T.a(!1),a.element=r.nativeElement,a.element.style.position="absolute",a.items={},a.changeSubs={},a.subs=[],a._change=new hn.a,a.resetOperations(),a.hideToolbar(),a}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemIds",{get:function(){return Object.keys(this.items)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowing",{get:function(){return this.isShowing},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.manager.register(this),this.subs.push(Object(J.a)(Object(A.a)(document,"mousedown")).subscribe((function(){e.showMoreOptions.value&&e.hideMoreOptions()})))},t.prototype.show=function(){var e=this;return this.showing?this.apply():this.apply().pipe(Object(Mt.a)((function(){return e.showToolbar()})))},t.prototype.hide=function(){return this.showing&&this.hideToolbar(),Object(Te.a)({})},t.prototype.addItem=function(e,t,n,r,i,a){void 0===a&&(a="primary");var o=this.makeComponent(t);r&&o.instance.setProperties(r),o.instance.id=e,o.instance.setData(n),o.instance.apply(),void 0===i&&(i=Object.keys(this.items).length+Object.keys(this.operations.add).length),this.operations.add[i]={itemRef:o,level:a}},t.prototype.addListItem=function(e,t,n,r,i,a){var o=this.makeComponent(t);r&&o.instance.setProperties(r),o.instance.id=e,o.instance.setData(n),o.instance.select(i),o.instance.apply(),void 0===a&&(a=Object.keys(this.items).length+Object.keys(this.operations.add).length),this.operations.add[a]={itemRef:o}},t.prototype.removeItem=function(e){this.items[e]&&this.operations.remove.push(e)},t.prototype.updateItem=function(e,t,n){var r=this.items[e];r&&(n&&r.instance.setProperties(n),r.instance.setData(t),this.operations.update.push(e))},t.prototype.updateListItem=function(e,t,n,r){var i=this.items[e];if(i){var a=i.instance;n&&i.instance.setProperties(n),a.setData(t),a.select(r),this.operations.update.push(e)}},t.prototype.position=function(e,t){void 0===t&&(t="center"),this.operations.position={point:e,side:t}},t.prototype.getItem=function(e){if(this.items){var t=this.items[e];if(t)return t.instance}},t.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.changeSubs).forEach((function(t){e.changeSubs[t].unsubscribe()})),this.subs.forEach((function(e){return e.unsubscribe()})),this._change.complete(),this.changeSubs=null,this.subs=null,this.items=null,this.operations=null},t.prototype.isFocused=function(){return this.element.contains(document.activeElement)},t.prototype.toggleMoreOptions=function(){this.showMoreOptions.next(!this.showMoreOptions.value)},t.prototype.hideMoreOptions=function(){this.showMoreOptions.next(!1)},t.prototype.showToolbar=function(){this.items&&this.itemIds.length&&(this.element.style.display="inline-block",this.showing=!0)},t.prototype.hideToolbar=function(){this.element.style.display="none",this.showing=!1,this.showMoreOptions.next(!1)},t.prototype.apply=function(){var e=this,t=this.getPendingOperations();return t.length>0?J.a.apply(void 0,Object(r.j)(t)).pipe(Object(I.a)({complete:function(){e.updateToolbarPosition(),e.resetOperations(),e.handleSecondaryLevelVisibility()}})):(this.updateToolbarPosition(),this.resetOperations(),Object(Te.a)({}))},t.prototype.handleSecondaryLevelVisibility=function(){this.secondaryItemContainer.length>0?this.secondaryLevelVisibility.next(!0):this.secondaryLevelVisibility.next(!1)},t.prototype.insertToolbarItem=function(e,t,n){return this.items[e.instance.id]||(this.items[e.instance.id]=e,this.subscribeToItemChange(e.instance),"secondary"===n?this.insert(this.secondaryItemContainer,e):this.insert(this.itemContainer,e,t),e.changeDetectorRef.detectChanges()),Object(Te.a)({})},t.prototype.removeToolbarItem=function(e){var t=this.items[e];return t&&(this.unsubscribeFromItemChange(e),this.remove(this.itemContainer,t),this.remove(this.secondaryItemContainer,t),delete this.items[e]),Object(Te.a)({})},t.prototype.updateToolbarItem=function(e){var t=this.items[e];return t&&t.instance.apply(),Object(Te.a)({})},t.prototype.updateToolbarPosition=function(){if(this.operations.position&&this.operations.position.point){var e=this.operations.position,t=e.point,n=e.side,r=this.element.getBoundingClientRect(),i=fn.getSidePosition(n);this.element.style.left=t.x-r.width*i.x+"px",this.element.style.top=t.y-r.height*i.y+"px"}},t.prototype.resetOperations=function(){this.operations={add:{},remove:[],update:[]}},t.prototype.subscribeToItemChange=function(e){var t=this,n=e.change.subscribe((function(n){return t._change.next({id:e.id,data:n})}));this.changeSubs[e.id]=n},t.prototype.unsubscribeFromItemChange=function(e){this.changeSubs[e]&&(this.changeSubs[e].unsubscribe(),delete this.changeSubs[e])},t.prototype.getAddItemAnimation=function(e){var t=new E.e({});return t.element=e.location.nativeElement,t},t.prototype.getRemoveItemAnimation=function(e){var t=new E.e({});return t.element=e.location.nativeElement,t},t.prototype.getPendingOperations=function(){var e=this,t=[];if(this.operations.remove.length>0&&(t=t.concat(this.operations.remove.map((function(t){return e.removeToolbarItem(t)})))),Object.keys(this.operations.add).length>0)for(var n in this.operations.add)t.push(this.insertToolbarItem(this.operations.add[n].itemRef,Number(n),this.operations.add[n].level));return this.operations.update.length>0&&(t=t.concat(this.operations.update.map((function(t){return e.updateToolbarItem(t)})))),t},t.\u0275fac=function(e){return new(e||t)(k.gc(k.m),k.gc(k.C),k.gc(k.r),k.gc(pn.a))},t.\u0275cmp=k.ac({type:t,selectors:[["floating-toolbar"]],viewQuery:function(e,t){var n;(1&e&&(k.kd(mn,!0,k.hb),k.kd(gn,!0,k.hb)),2&e)&&(k.Mc(n=k.vc())&&(t.secondaryItemContainer=n.first),k.Mc(n=k.vc())&&(t.itemContainer=n.first))},inputs:{id:"id"},outputs:{change:"change"},features:[k.Pb],decls:13,vars:8,consts:[["data-keep-text-open","true","tooltip-tour-step","floating-tools,plus-create",1,"ftb-container"],["class","ftb-container-inner"],["itemContainer",""],["tabindex","0",1,"ftb-more-dd-btn","btn-icon",3,"click"],[1,"btn-small","nu-btn-icon"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],[1,"dropdown-items-container"],["class","ftb-more-dd-placeholder"],["secondaryItemContainer",""]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.hc(1,"div"),k.dd(2,bn,0,0,"ng-template",1,2,k.ed),k.mc(4,"div",3),k.uc("click",(function(){return t.toggleMoreOptions()})),k.zc(5,"async"),k.mc(6,"button",4),k.xc(),k.mc(7,"svg",5),k.hc(8,"use",6),k.lc(),k.lc(),k.wc(),k.mc(9,"div",7),k.zc(10,"async"),k.dd(11,vn,0,0,"ng-template",8,9,k.ed),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(4),k.Yb("hidden",!k.Ac(5,4,t.secondaryLevelVisibility)),k.Sb(5),k.Yb("open-dd",k.Ac(10,6,t.showMoreOptions)))},styles:[".nu-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.abs-dropdown-container[_ngcontent-%COMP%]{background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.abs-dropdown-items-container[_ngcontent-%COMP%]  .ps-content{padding:.5rem!important}.abs-dropdown-items-container[_ngcontent-%COMP%]{font-size:.875rem;width:-webkit-max-content;width:-moz-max-content;width:max-content;height:-webkit-max-content;height:-moz-max-content;height:max-content;border-radius:6px;background-color:#fff;overflow:hidden;box-shadow:0 4px 9px -2px rgba(39,41,50,.12);min-width:104px}.abs-dropdown-inner-wrapper[_ngcontent-%COMP%]{position:relative}.abs-dropdown-inner[_ngcontent-%COMP%]{position:absolute;z-index:10}.abs-dropdown-inner[_ngcontent-%COMP%]:not(.right){left:0}.abs-dropdown-inner.right[_ngcontent-%COMP%]{right:0}@media only screen and (max-height:736px){.abs-dropdown-inner.down[_ngcontent-%COMP%], .abs-dropdown-inner.up[_ngcontent-%COMP%]{bottom:unset!important;top:0!important}}@-webkit-keyframes showingAnimationDown{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@keyframes showingAnimationDown{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes showingAnimationUp{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}@keyframes showingAnimationUp{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}.ftb-container[_ngcontent-%COMP%]{padding:.375rem;border:1px solid #caccce;height:45px;background-color:#fff;border-radius:6px;box-shadow:0 4px 9px -2px rgba(39,41,50,.12);display:flex;align-items:center;gap:.25rem}.ftb-container[_ngcontent-%COMP%]  .ftb-item, .ftb-container[_ngcontent-%COMP%]  .icon-button-container{margin-left:.375rem;text-align:center;padding:.25rem 0}.ftb-container[_ngcontent-%COMP%]  .ftb-item button, .ftb-container[_ngcontent-%COMP%]  .icon-button-container button{padding:0;background:transparent}.ftb-container[_ngcontent-%COMP%]  .ftb-item svg, .ftb-container[_ngcontent-%COMP%]  .icon-button-container svg{color:#354b53}.ftb-container[_ngcontent-%COMP%]  .ftb-item.ftb-item-text{line-height:2.5rem;width:auto}.ftb-container[_ngcontent-%COMP%]  .ftb-item .nu-btn-icon{padding:0;width:inherit}.ftb-container[_ngcontent-%COMP%]  .ftb-item .ftb-item-dropdown-arrow{width:0;height:0;border-color:transparent #caccce #caccce transparent;border-style:solid;border-width:4px;position:absolute;bottom:10px;right:1px}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .nu-btn-icon[_ngcontent-%COMP%]{padding-left:0;padding-right:0;margin-top:-.5rem;background:transparent}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .dropdown-items-container[_ngcontent-%COMP%]{padding:.625rem;position:absolute;background:#fff;width:-webkit-max-content;width:-moz-max-content;width:max-content;border-radius:6px;box-shadow:0 4px 9px -2px rgba(39,41,50,.12);z-index:10;display:none}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .dropdown-items-container.open-dd[_ngcontent-%COMP%], .ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .open-dd[_ngcontent-%COMP%]   .dropdown-items-container[_ngcontent-%COMP%]{-webkit-animation:showingAnimationDown .3s;animation:showingAnimationDown .3s;display:block}.ftb-container[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]{z-index:2}"],changeDetection:0}),t}(E.k),yn=n("IGWl"),On=n("myrl"),xn=n("y0dT"),En=function(){function e(e){this.state=e,this.isEditor=this.state.changes("InterfaceControlState").pipe(Object(Mt.a)((function(e){return"edit"===e})))}return e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb))},e.\u0275cmp=k.ac({type:e,selectors:[["temp-fake-features-panel"]],decls:38,vars:4,consts:[["placement","left","tooltip",""],["disabled","",1,"nu-btn-med","nu-btn-icon","fake-sidebar-button"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notes"],[1,"coming-soon-tooltip-container","tooltip-content"],[1,"coming-soon-header"],["translate","",1,"tooltip-header"],["translate","",1,"coming-soon-header-ribbon"],["translate","",1,"coming-soon-feature-text"],["placement","left","tooltip","",1,"fake-hidable-btn"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-theme"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-layout"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"button",1),k.xc(),k.mc(2,"svg",2),k.hc(3,"use",3),k.lc(),k.lc(),k.wc(),k.mc(4,"div",4),k.mc(5,"div",5),k.mc(6,"span",6),k.fd(7,"FAKE_TOOLTIPS.NOTES"),k.lc(),k.mc(8,"div",7),k.fd(9,"LABELS.COMING_SOON"),k.lc(),k.lc(),k.mc(10,"div",8),k.fd(11,"FAKE_TOOLTIPS.NOTES_DESC"),k.lc(),k.lc(),k.lc(),k.mc(12,"div"),k.zc(13,"async"),k.mc(14,"div",9),k.mc(15,"button",1),k.xc(),k.mc(16,"svg",2),k.hc(17,"use",10),k.lc(),k.lc(),k.wc(),k.mc(18,"div",4),k.mc(19,"div",5),k.mc(20,"span",6),k.fd(21,"FAKE_TOOLTIPS.THEME"),k.lc(),k.mc(22,"div",7),k.fd(23,"LABELS.COMING_SOON"),k.lc(),k.lc(),k.mc(24,"div",8),k.fd(25,"FAKE_TOOLTIPS.THEME_DESC"),k.lc(),k.lc(),k.lc(),k.mc(26,"div",9),k.mc(27,"button",1),k.xc(),k.mc(28,"svg",2),k.hc(29,"use",11),k.lc(),k.lc(),k.wc(),k.mc(30,"div",4),k.mc(31,"div",5),k.mc(32,"span",6),k.fd(33,"FAKE_TOOLTIPS.LAYOUT"),k.lc(),k.mc(34,"div",7),k.fd(35,"LABELS.COMING_SOON"),k.lc(),k.lc(),k.mc(36,"div",8),k.fd(37,"FAKE_TOOLTIPS.LAYOUT_DESC"),k.lc(),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(12),k.Yb("hide-fake-btns",!k.Ac(13,2,t.isEditor)))},directives:[j.a,y.a],pipes:[a.b],styles:[".fake-sidebar-button[_ngcontent-%COMP%]{display:block;margin-right:5px}.fake-hidable-btn[_ngcontent-%COMP%], .fake-sidebar-button[_ngcontent-%COMP%]{height:33px;margin-bottom:15px;transition-property:transform,height,margin-bottom;transition-duration:.3s;transition-timing-function:ease-in-out}.fake-hidable-btn[_ngcontent-%COMP%]{transform:scale(1)}.hide-fake-btns[_ngcontent-%COMP%]   .fake-hidable-btn[_ngcontent-%COMP%]{transform:scale(0);height:0;margin-bottom:0}"],changeDetection:0}),e}(),kn=n("U8K0"),Cn=n("Lmsv"),wn=function(){function e(){this.name="PluginAuthResponsibility"}return e.prototype.checkState=function(e){return Object(Te.a)(me.b.AUTHENTICATED)},e.prototype.nextResponsibility=function(e){return[]},e.prototype.result=function(e){return{type:"complete"}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),Sn=n("hX56"),In=n("GoAz"),Tn=function(){function e(e){this.data=e,this.name="PluginDocumentResponsibility"}return e.prototype.checkState=function(e){if(!e.states.diagramRequired)return Object(Te.a)(!0);var t=this.data.getModelStore(Dt.a);return Object(In.a)(t.removeChanges({modelId:e.input.resourceId})).pipe(Object(Pe.a)(!1))},e.prototype.nextResponsibility=function(e){return e.states.diagramRequired?["PluginAuthResponsibility"]:[]},e.prototype.result=function(e){return e.states.diagramRequired?{type:"command",action:"LoadDocument",wait:!e.states.PluginDocumentResponsibility,commandParams:{rid:e.input.resourceId,data:{}}}:{type:"complete"}},e.\u0275fac=function(t){return new(t||e)(k.qc(Sn.b))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),An=n("iPbu"),Pn=n("SBw3");function Mn(e,t){if(1&e&&(k.mc(0,"div",4),k.mc(1,"span",5),k.fd(2),k.lc(),k.mc(3,"span",6),k.fd(4),k.lc(),k.lc()),2&e){var n=t.$implicit;k.Sb(2),k.gd(n.label),k.Sb(2),k.gd(n.shortcutText)}}function Dn(e,t){1&e&&(k.mc(0,"div",4),k.mc(1,"span",7),k.fd(2,"BASE_FEATURE.CANCEL_ACTION"),k.lc(),k.mc(3,"span",6),k.fd(4,"Esc"),k.lc(),k.lc())}var jn=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.ac({type:e,selectors:[["shortcut-window-section"]],inputs:{sectionList:"sectionList"},decls:5,vars:3,consts:[["translate","",1,"sw-col-heading","caption"],[1,"sw-col-inner"],["class","sw-col-item caption",4,"ngFor","ngForOf"],["class","sw-col-item caption",4,"ngIf"],[1,"sw-col-item","caption"],[1,"sw-col-item-label"],[1,"sw-col-item-value"],["translate","",1,"sw-col-item-label"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.fd(1),k.lc(),k.mc(2,"div",1),k.dd(3,Mn,5,2,"div",2),k.dd(4,Dn,5,0,"div",3),k.lc()),2&e&&(k.Sb(1),k.gd(t.sectionList.title),k.Sb(2),k.Dc("ngForOf",t.sectionList.items),k.Sb(1),k.Dc("ngIf","BASE_FEATURE.EDITING"==t.sectionList.title))},directives:[y.a,a.s,a.t],styles:[".sw-inner[_ngcontent-%COMP%]{padding:3rem;z-index:10;white-space:nowrap;background-color:#fff;border-radius:.25rem;color:#272932;position:relative}.sw-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:2rem}.sw-inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:-1.5rem;position:absolute;right:.25rem}.sw-col-heading[_ngcontent-%COMP%]{margin-bottom:2rem;color:#88a1aa;text-transform:capitalize}.sw-col[_ngcontent-%COMP%]{margin-right:5rem;display:inline-block}.sw-col[_ngcontent-%COMP%]:last-of-type{margin-right:0}.sw-col-inner[_ngcontent-%COMP%]{display:table}.sw-col-item[_ngcontent-%COMP%]{line-height:1rem;display:table-row;height:20px}.sw-col-item-label[_ngcontent-%COMP%], .sw-col-item-value[_ngcontent-%COMP%]{padding-bottom:.5rem;display:table-cell}.sw-col-item-value[_ngcontent-%COMP%]{padding-left:1.5rem}.sw-close-btn[_ngcontent-%COMP%]{position:absolute;top:.625rem;right:.25rem}.shortcut-window[_ngcontent-%COMP%]{z-index:1000;background-color:rgba(0,0,0,.25)}.shortcut-window-heading[_ngcontent-%COMP%]{display:flex;text-align:left}"],changeDetection:0}),e}(),Rn=function(){function e(e,t,n){this.featureList=e,this.translate=t,this.commandService=n,this.shortcutSections={"BASE_FEATURE.EDITING":["cutShapes","copyShapes","pasteShapes","selectAll","remove","duplicateShapes","duplicateShapesAndMove","bringToFront","sendToBack","sendBackward","bringForward","openHyperlinkEditor","drawLine","addText","changeSnapState"],"BASE_FEATURE.CANVAS":["zoomIn","zoomOut","actualSize","zoomFit","undo","redo","switchToPanMouseControlState","addComment","freeHandPen","freeHandHighlighter"],"BASE_FEATURE.SELECTION":["keyboardSelectionMove","keyboardSelectionScale","aspectRatioDragScale"]}}return e.prototype.getSection=function(e){var t=this.getCustomItems();return t.push.apply(t,Object(r.j)(this.featureList.features)),{title:e,items:this.shortcutSections[e].map((function(e){return t.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e}))}},e.prototype.openShortcutWindow=function(){this.commandService.dispatch(Nn.showShortcutWindow,{show:!0})},e.prototype.closeShortcutWindow=function(){this.commandService.dispatch(Nn.showShortcutWindow,{show:!1})},e.prototype.getCustomItems=function(){return[{id:"aspectRatioDragScale",label:this.translate.instant("BASE_FEATURE.SCALE"),shortcutText:"Shift + Resize"},{id:"duplicateShapesAndMove",label:this.translate.instant("BASE_FEATURE.DUPLICATE"),shortcutText:"Alt + Drag"}]},e.\u0275fac=function(t){return new(t||e)(k.gc(Pn.a),k.gc(y.e),k.gc(x.B))},e.\u0275cmp=k.ac({type:e,selectors:[["shortcut-window"]],decls:14,vars:3,consts:[[1,"fx-cover","fx-center-all","shortcut-window","fx-center-without-flex"],[1,"sw-inner"],[1,"shortcut-window-heading"],["translate","",1,"body","body--lg","body--bold"],[1,"btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"sw-col"],[3,"sectionList"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.mc(2,"div",2),k.mc(3,"h1",3),k.fd(4,"BASE_FEATURE.SHORTCUTS"),k.lc(),k.mc(5,"button",4),k.uc("click",(function(){return t.closeShortcutWindow()})),k.xc(),k.mc(6,"svg",5),k.hc(7,"use",6),k.lc(),k.lc(),k.lc(),k.wc(),k.mc(8,"div",7),k.hc(9,"shortcut-window-section",8),k.lc(),k.mc(10,"div",7),k.hc(11,"shortcut-window-section",8),k.lc(),k.mc(12,"div",7),k.hc(13,"shortcut-window-section",8),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(9),k.Dc("sectionList",t.getSection("BASE_FEATURE.EDITING")),k.Sb(2),k.Dc("sectionList",t.getSection("BASE_FEATURE.CANVAS")),k.Sb(2),k.Dc("sectionList",t.getSection("BASE_FEATURE.SELECTION")))},directives:[y.a,jn],styles:[".sw-inner[_ngcontent-%COMP%]{padding:3rem;z-index:10;white-space:nowrap;background-color:#fff;border-radius:.25rem;color:#272932;position:relative}.sw-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:2rem}.sw-inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:-1.5rem;position:absolute;right:.25rem}.sw-col-heading[_ngcontent-%COMP%]{margin-bottom:2rem;color:#88a1aa;text-transform:capitalize}.sw-col[_ngcontent-%COMP%]{margin-right:5rem;display:inline-block}.sw-col[_ngcontent-%COMP%]:last-of-type{margin-right:0}.sw-col-inner[_ngcontent-%COMP%]{display:table}.sw-col-item[_ngcontent-%COMP%]{line-height:1rem;display:table-row;height:20px}.sw-col-item-label[_ngcontent-%COMP%], .sw-col-item-value[_ngcontent-%COMP%]{padding-bottom:.5rem;display:table-cell}.sw-col-item-value[_ngcontent-%COMP%]{padding-left:1.5rem}.sw-close-btn[_ngcontent-%COMP%]{position:absolute;top:.625rem;right:.25rem}.shortcut-window[_ngcontent-%COMP%]{z-index:1000;background-color:rgba(0,0,0,.25)}.shortcut-window-heading[_ngcontent-%COMP%]{display:flex;text-align:left}"],changeDetection:0}),e}(),Ln=function(e){function t(t){var n=e.call(this)||this;return n.modalCtrl=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.data.show?this.modalCtrl.show(Rn,void 0,!1):this.modalCtrl.hide(),!0},t.\u0275fac=function(e){return new(e||t)(k.qc(x.fb))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(x.v)(),Object(r.g)("design:paramtypes",[x.fb])],t)}(x.b);Object.defineProperty(Ln,"name",{value:"ShowShortcutWindow"});var Nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.register=function(e){e.map(t.showShortcutWindow).add(Ln)},t.showShortcutWindow=new t("ShowShortcutWindow"),t}(x.y),Bn=n("vg1f"),Un=function(){function e(e,t,n){this.loader=e,this.commandService=t,this.state=n,this.intervalDuration=6e4,this.isJobRunning=!1,this.listenToConnectionChanges()}return Object.defineProperty(e.prototype,"isOffline",{get:function(){return!window.navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.start=function(){var e=this;if(!this.isJobRunning&&!this.isOffline){this.isJobRunning=!0;var t=function(){setTimeout((function(){return Object(r.c)(e,void 0,void 0,(function(){return Object(r.f)(this,(function(e){switch(e.label){case 0:return[4,this.syncResource()];case 1:return e.sent()&&!this.isOffline?t():this.isJobRunning=!1,[2]}}))}))}),e.intervalDuration)};t()}},e.prototype.listenToConnectionChanges=function(){var e=this;this.state.changes(O.c).pipe(Object(bt.a)((function(e){return e===O.c.ONLINE})),Object(I.a)((function(){return e.start()}))).subscribe()},e.prototype.syncResource=function(){var e=this;return this.loader.getPendingUploadResources().pipe(Object(xt.a)(1),Object(Mt.a)((function(t){if(t.length>0){for(var n=0;n<t.length&&!t[n].id.startsWith(x.m.get("CUSTOM_IMAGE_BASE_URL"));)e.loader.setResourceStatus(t[n].id,pe.s.Uploaded),n++;var r=t[n];return r&&r.id.startsWith(x.m.get("CUSTOM_IMAGE_BASE_URL"))&&(r.status?e.uploadResource(r):e.fetchResource(r.id).then((function(t){200===t.status?e.loader.setResourceStatus(r.id,pe.s.Uploaded):e.uploadResource(r)}))),!0}return!1}))).toPromise()},e.prototype.fetchResource=function(e){return fetch(e,{method:"HEAD"})},e.prototype.uploadResource=function(e){var t=this.getInputForUpload(e);return this.commandService.dispatch(Ae.a.uploadImage,t)},e.prototype.getInputForUpload=function(e){var t=e.id.split("/").pop(),n=e.data.match(/[^:]\w+\/[\w-+\d.]+(?=;|,)/)[0];return{hash:t,data:e.data,name:"resource",type:n,extension:void 0}},e.\u0275fac=function(t){return new(t||e)(k.qc(x.xb),k.qc(x.B),k.qc(x.Hb))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),Fn=n("3vL/"),qn=n("ioBB"),Wn=n("tqrN"),Hn=n("pi4j"),Kn=n("Lk+x"),zn=n("STWM"),Vn=n("3AeD"),Gn=n("iRGy"),Yn=n("+ETr"),Xn=n("xpZS"),Qn=n("8a+/"),Jn=n("1U5y"),$n=n("wf7V"),Zn=n("izw+"),er=n("k0Sg"),tr=n("zsv6"),nr=n("cOhl"),rr=n("/6pf"),ir=n("dFmy"),ar=n("pt/I"),or=function(){function e(e){this.state=e}return e.prototype.point=function(t){var n=this.state.get("SnapData");return void 0!==n.tx&&Math.abs(t.x.value-n.tx)<e.delta&&(t.x.value=n.tx),void 0!==n.ty&&Math.abs(t.y.value-n.ty)<e.delta&&(t.y.value=n.ty),t},e.delta=5,e.\u0275fac=function(t){return new(t||e)(k.qc(x.Hb))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),sr=function(){function e(e){this.state=e}return e.prototype.point=function(t){var n=this.state.get("SnapData");return void 0!==n.left&&Math.abs(t.x.value-n.left)<e.delta&&(t.x.value=n.left),void 0!==n.right&&Math.abs(t.x.value-n.right)<e.delta&&(t.x.value=n.right),void 0!==n.top&&Math.abs(t.y.value-n.top)<e.delta&&(t.y.value=n.top),void 0!==n.bottom&&Math.abs(t.y.value-n.bottom)<e.delta&&(t.y.value=n.bottom),t},e.delta=5,e.\u0275fac=function(t){return new(t||e)(k.qc(x.Hb))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),cr=n("fRR/"),lr=n("/g0E"),ur=n("x77O"),dr=n("+1jB"),pr=n("K5wl"),hr=n("TQyE"),fr=n("jQTg"),mr=n("Yr08"),gr=n("6Qp7"),br=n("u1Zh"),vr=n("r0H0"),_r=n("F1CX"),yr=n("kMe2"),Or=n("Q9lH"),xr=n("JfMT"),Er=n("m4FO"),kr=n("Xh2D"),Cr=n("XLk1"),wr=n("QCJn"),Sr=n("LC7v"),Ir=n("tG6W"),Tr=n("Gjo4"),Ar=n("LA+B"),Pr=n("s9Xn"),Mr=n("sKtG"),Dr=n("Mb5J"),jr=n("PGgW"),Rr=n("eIBf"),Lr=n("vRBZ"),Nr=n("yhNa"),Br=n("iesc"),Ur=n("6Oco"),Fr=n("wqq/"),qr=n("TaSY"),Wr=n("ljsB"),Hr=n("xnGY"),Kr=n("qMyy"),zr=n("3QsU"),Vr=n("yn08"),Gr=n("QWoK"),Yr=n("RTAa"),Xr=n("uG58"),Qr=n("s1Pg"),Jr=n("K0+f"),$r=function(){return{event:"conversion.payment-failed.banner.click"}};function Zr(e,t){if(1&e){var n=k.nc();k.mc(0,"div",1),k.mc(1,"div",2),k.mc(2,"div",3),k.xc(),k.mc(3,"svg",4),k.hc(4,"use",5),k.lc(),k.lc(),k.wc(),k.mc(5,"div",6),k.mc(6,"span"),k.fd(7),k.zc(8,"async"),k.lc(),k.mc(9,"span"),k.fd(10),k.zc(11,"async"),k.lc(),k.mc(12,"span"),k.fd(13),k.zc(14,"async"),k.lc(),k.mc(15,"span"),k.fd(16),k.zc(17,"async"),k.lc(),k.mc(18,"button",7),k.uc("click",(function(){return k.Qc(n),k.yc().showBillingPage()})),k.fd(19),k.zc(20,"async"),k.lc(),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Sb(7),k.hd(" ",k.Ac(8,6,r.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART1_SUB1"))," "),k.Sb(3),k.hd(" ",k.Ac(11,8,r.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART1_SUB2"))," "),k.Sb(3),k.hd(" ",k.Ac(14,10,r.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART1_SUB3"))," "),k.Sb(3),k.hd(" ",k.Ac(17,12,r.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART2"))," "),k.Sb(2),k.Dc("trackAction",k.Hc(16,$r)),k.Sb(1),k.hd(" ",k.Ac(20,14,r.translate.get("PAYMENT_FAILED_MESSAGES.BUTTONS"))," ")}}var ei=function(){function e(e,t){this.modalController=e,this.translate=t,this.showPaymentFailedMessage=!1}return e.prototype.showBillingPage=function(){this.modalController.show(Qr.a,{inputs:{page:"billing"}})},e.\u0275fac=function(t){return new(t||e)(k.gc(x.fb),k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["payment-failed-message"]],inputs:{showPaymentFailedMessage:"showPaymentFailedMessage"},decls:1,vars:1,consts:[["class","payment-failed-container fx-pointer-events-auto",4,"ngIf"],[1,"payment-failed-container","fx-pointer-events-auto"],[1,"payment-failed-inner","fx-center-vertical"],[1,"payment-failed-icon"],[1,"nu-icon","nu-icon-small","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-su-error"],[1,"payment-failed-text","body"],[1,"payment-failed-auth-link","btn-link",3,"trackAction","click"]],template:function(e,t){1&e&&k.dd(0,Zr,21,17,"div",0),2&e&&k.Dc("ngIf",t.showPaymentFailedMessage)},directives:[a.t,Jr.a],pipes:[a.b],styles:[".payment-failed-container[_ngcontent-%COMP%]{padding:.25rem;color:#510606;min-height:32px;position:relative;top:0;width:100%;display:flex;align-items:center;z-index:2;background-color:#ffb5b5}.payment-failed-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:1rem}.payment-failed-inner[_ngcontent-%COMP%]{height:100%;width:100%}.payment-failed-icon[_ngcontent-%COMP%]{margin-right:.625rem}.payment-failed-auth-link[_ngcontent-%COMP%]{background-color:transparent}"],changeDetection:0}),e}(),ti=n("4Kso"),ni=n("UFl8"),ri=n("3p4X"),ii=n("3mST"),ai=n("w1VY"),oi=n("Qki8"),si=["ripple"],ci=function(e,t,n){return{left:e,top:t,visibility:n}},li=function(){function e(e,t){this.toursvc=e,this.state=t,this.radius=16,this.subs=[]}return e.prototype.ngOnInit=function(){this.setRipplePosition(),this.rippleHidden=this.anchor.rippleHidden,this.subs.push(this.listenToCurrentStepChanges().subscribe())},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.handleRippleClick=function(){x.Jb.track("onboarding.tooltip.click",{value1:this.anchor.stepId}),this.toursvc.showTooltip(this.anchor.stepId)},e.prototype.updateRipple=function(){var e,t=this.anchor.element.getBoundingClientRect(),n=this.toursvc.tooltipData.value[this.anchor.stepId];this.previousBoundingBox?Object(Ct.isEqual)(this.previousBoundingBox,t)||(this.previousBoundingBox=t,this.setRipplePosition(),n.canvasElement):this.previousBoundingBox=t;var r=this.toursvc.tooltipData.value[this.anchor.stepId].preventOverlapping||[],i=document.getElementsByTagName("header-layout")[0],a=document.getElementsByClassName("sidebar")[0],o=document.getElementsByClassName("left-sidebar-container")[0],s=document.getElementsByTagName("diagram-toolbar")[0],c=document.getElementsByTagName("floating-panel-container")[0],l=document.getElementsByClassName("modal-window-inner")[0],u=null===(e=document.getElementsByTagName("shortcut-window")[0])||void 0===e?void 0:e.children[0],d=document.querySelector(" div.left-sidebar-user > abs-dropdown > div > div.abs-dropdown-inner-wrapper > div > ul"),p=document.getElementsByClassName("help-widget-cards-container")[0],h=document.getElementsByClassName("floating-card")[0],f=document.getElementsByClassName("sp-action-container")[0];this.isOverlappingElement(i)&&r.includes(oi.a.HEADER)||this.isOverlappingElement(o)&&r.includes(oi.a.LEFTSIDEBAR)||this.isOverlappingElement(a)&&r.includes(oi.a.RIGHTSIDEBAR)||this.isOverlappingElement(l)&&r.includes(oi.a.MODALWINDOW)||this.isOverlappingElement(s)&&r.includes(oi.a.DIAGRAMTOOLBAR)||this.isOverlappingElement(c)&&r.includes(oi.a.FLOATINGPANEL)||this.isOverlappingElement(d)&&r.includes(oi.a.USERMENU)||this.isOverlappingElement(f)&&r.includes(oi.a.SHAPEPROPACTIONS)||this.isOverlappingElement(u)||this.isOverlappingElement(p)||this.isOverlappingElement(h)?this.rippleHidden=!0:this.rippleHidden=!1},e.prototype.listenToCurrentStepChanges=function(){var e=this;return this.toursvc.currentStep.pipe(Object(S.a)((function(){return e.toursvc.currentStepVisible})),Object(I.a)((function(t){e.setRipplePosition(),e.toursvc.currentStep.value&&(e.rippleHidden=!t)})))},e.prototype.setRipplePosition=function(){var e,t,n,r,i=null===(e=this.toursvc)||void 0===e?void 0:e.tooltipData.value[this.anchor.stepId];if(void 0!==i&&0!==i.level)if("floating-tools"!==i.stepId&&"plus-create"!==i.stepId){var a=this.anchor.element.getBoundingClientRect();a.right+280>=window.innerWidth?this.left=a.left:this.left=a.right-this.radius,this.top=a.top,(null===(t=i.positionOverride)||void 0===t?void 0:t.left)&&(this.left+=i.positionOverride.left),(null===(n=i.positionOverride)||void 0===n?void 0:n.top)&&(this.top+=i.positionOverride.top),i.stepId===(null===(r=this.toursvc.currentStep.value)||void 0===r?void 0:r.stepId)&&i.tooltipPositionOverride&&(this.left+=i.tooltipPositionOverride.left||0,this.top+=i.tooltipPositionOverride.top||0)}else this.setFloatingToolbarRipple()},e.prototype.setFloatingToolbarRipple=function(){var e,t=document.querySelector("#contextual-toolbar");this.top=t.getBoundingClientRect().top,this.left=t.getBoundingClientRect().right-this.radius;var n=" none"!==t.getAttribute("style").split(";")[1].split(":")[1],r=""!==this.state.get("CurrentSidebarTask"),i=(null===(e=this.toursvc.currentStep.value)||void 0===e?void 0:e.stepId)===this.anchor.stepId;if(n){if(r)return void(this.rippleHidden=!0);if(this.toursvc.currentStep.value&&!i)return void(this.rippleHidden=!0);this.rippleHidden=!1}else this.rippleHidden=!0},e.prototype.isOverlappingElement=function(e){var t,n,r=null===(n=null===(t=this.rippleElement)||void 0===t?void 0:t.nativeElement)||void 0===n?void 0:n.getBoundingClientRect();if(e&&r){var i=e.getBoundingClientRect();return r.x>=i.left-40&&r.x<=i.right+40&&r.y>=i.top-40&&r.y<=i.bottom+40}},e.\u0275fac=function(t){return new(t||e)(k.gc(Gr.a),k.gc(x.Hb))},e.\u0275cmp=k.ac({type:e,selectors:[["tooltip-tour-ripple"]],viewQuery:function(e,t){var n;(1&e&&k.kd(si,!0),2&e)&&(k.Mc(n=k.vc())&&(t.rippleElement=n.first))},inputs:{anchor:"anchor",timer:"timer"},decls:3,vars:5,consts:[[1,"lds-ripple",3,"ngStyle","click"],["ripple",""]],template:function(e,t){1&e&&(k.mc(0,"div",0,1),k.uc("click",(function(){return t.handleRippleClick()})),k.hc(2,"div"),k.lc()),2&e&&k.Dc("ngStyle",k.Kc(1,ci,t.left+"px",t.top+"px",t.rippleHidden?"hidden":"visible"))},directives:[a.w],styles:['.lds-ripple[_ngcontent-%COMP%]{display:inline-block;position:absolute;cursor:pointer;width:32px;height:32px;transition:all}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border-radius:50%;margin:0 5px;position:relative;background-color:rgba(42,82,94,.5);transform:translateY(8px);-webkit-animation:fadeIn 3s;animation:fadeIn 3s}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background-color:inherit;border-radius:50%;z-index:-1;-webkit-animation:ripple 2s cubic-bezier(0,.2,.8,1) infinite;animation:ripple 2s cubic-bezier(0,.2,.8,1) infinite}@-webkit-keyframes ripple{0%{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(3)}}@keyframes ripple{0%{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(3)}}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}']}),e}(),ui=function(e,t){return{"tooltip-arrow-left":e,"tooltip-arrow-right":t}};function di(e,t){if(1&e&&k.hc(0,"div",17),2&e){var n=k.yc();k.Dc("ngClass",k.Jc(1,ui,"left"==n.placement,"right"==n.placement))}}var pi=function(e,t){return{width:e,height:t}};function hi(e,t){if(1&e&&(k.xc(),k.wc(),k.mc(0,"div",18),k.hc(1,"video",19),k.lc()),2&e){var n=k.yc();k.Sb(1),k.Dc("src",n.animationBase+n.step.animationURL,k.Tc)("loop",!n.step.playOnce)("ngStyle",k.Jc(3,pi,n.isRootLevel?"560px":"280px",n.isRootLevel?"318.5":"161px"))}}function fi(e,t){if(1&e&&(k.hc(0,"div",20),k.zc(1,"translate")),2&e){var n=k.yc();k.Dc("innerHTML",k.Ac(1,1,n.step.tooltip),k.Rc)}}var mi=function(e){return{visibility:e}};function gi(e,t){if(1&e){var n=k.nc();k.mc(0,"button",21),k.uc("click",(function(){return k.Qc(n),k.yc().handleShowPrev()})),k.mc(1,"span",22),k.fd(2,"TOOLTIP_TOUR.BUTTONS.PREVIOUS"),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Dc("disabled",!r.hasPrev&&!r.hasInnerSteps),k.Sb(1),k.Dc("ngStyle",k.Ic(2,mi,r.isHidden?"hidden":r.hasPrev?"visible":"hidden"))}}function bi(e,t){if(1&e){var n=k.nc();k.mc(0,"button",23),k.uc("click",(function(){return k.Qc(n),k.yc().handleSkip()})),k.mc(1,"span",24),k.fd(2,"TOOLTIP_TOUR.BUTTONS.SKIP"),k.lc(),k.lc()}}var vi=function(e){return{"tooltip-tour-viewed":e}};function _i(e,t){if(1&e&&k.hc(0,"div",27),2&e){var n=t.$implicit,r=k.yc(2);k.Dc("ngClass",k.Ic(1,vi,r.step.stepId===n.stepId||r.isStepViewed(n.stepId)))}}function yi(e,t){if(1&e&&(k.mc(0,"div",25),k.dd(1,_i,1,3,"div",26),k.lc()),2&e){var n=k.yc();k.Sb(1),k.Dc("ngForOf",n.currentTourSteps)}}function Oi(e,t){if(1&e){var n=k.nc();k.mc(0,"button",23),k.uc("click",(function(){return k.Qc(n),k.yc().handleShowNext()})),k.mc(1,"span",24),k.fd(2,"TOOLTIP_TOUR.BUTTONS.NEXT"),k.lc(),k.lc()}}function xi(e,t){1&e&&(k.mc(0,"span",24),k.fd(1,"TOOLTIP_TOUR.BUTTONS.FINISH"),k.lc())}function Ei(e,t){1&e&&(k.mc(0,"span",24),k.fd(1,"TOOLTIP_TOUR.BUTTONS.OK"),k.lc())}function ki(e,t){if(1&e){var n=k.nc();k.mc(0,"button",23),k.uc("click",(function(){return k.Qc(n),k.yc().handleFinish()})),k.dd(1,xi,2,0,"span",28),k.dd(2,Ei,2,0,"span",28),k.lc()}if(2&e){var r=k.yc();k.Sb(1),k.Dc("ngIf",r.currentTourSteps.length>1),k.Sb(1),k.Dc("ngIf",1===r.currentTourSteps.length)}}function Ci(e,t){if(1&e){var n=k.nc();k.mc(0,"button",23),k.uc("click",(function(){return k.Qc(n),k.yc().handleShowNext()})),k.mc(1,"span",24),k.fd(2,"TOOLTIP_TOUR.BUTTONS.NEXT"),k.lc(),k.lc()}}function wi(e,t){if(1&e){var n=k.nc();k.mc(0,"button",29),k.uc("click",(function(){return k.Qc(n),k.yc().handleShowNext()})),k.mc(1,"span",24),k.fd(2,"TOOLTIP_TOUR.BUTTONS.SHOW_ME"),k.lc(),k.lc()}}var Si=function(e,t,n){return{left:e,top:t,visibility:n}},Ii=function(e,t,n){return{top:e,width:t,height:n}},Ti=function(e){return{"level-zero-text":e}},Ai=function(){function e(e,t,n){this.state=e,this.tourSvc=t,this.translate=n,this.currentTourSteps=[],this.bodyDisplacement=0,this.width=280,this.height=0,this.placement=E.u.left,this.isHidden=!0,this.isRootLevel=!1,this.subs=[],this.animationBase=x.m.get("TOOLTIP_STATIC_BASE_URL")}return e.prototype.ngOnInit=function(){this.subs.push()},e.prototype.ngOnChanges=function(e){this.hasNext=!!this.step.nextStepId&&!this.step.learnMoreStep&&this.nextStepPrequisitesAvailable(),this.hasPrev=!!this.step.prevStepId,this.hasInnerSteps=!!this.step.learnMoreStep&&this.nextStepPrequisitesAvailable(this.step.learnMoreStep),this.hasLinkedArticle=!!this.step.learnMoreArticle,this.showFinish=!this.nextStepPrequisitesAvailable()&&!this.nextStepPrequisitesAvailable(this.step.learnMoreStep)||!this.step.nextStepId&&!this.step.learnMoreStep,this.currentTourSteps=this.tourSvc.currentTourSteps.value,this.isHidden=!this.tourSvc.currentStepVisible.value,this.isRootLevel=0===this.step.level,this.calculatePosition()},e.prototype.closeTooltip=function(e){this.isRootLevel&&this.tourSvc.userClosedRootTour.next(!0),this.tourSvc.currentStep.next(null),this.tourSvc.markStepAsViewed(this.step.stepId),e||this.sendTrackerEventsOnClick("close"),this.unsub()},e.prototype.handleShowPrev=function(){0!==this.step.level&&(this.isHidden=!0),this.tourSvc.currentStepVisible.next(!1),this.tourSvc.markStepAsViewed(this.step.stepId),this.tourSvc.showTooltip(this.step.prevStepId),this.sendTrackerEventsOnClick("previous")},e.prototype.handleShowNext=function(){0!==this.step.level&&(this.isHidden=!0),this.tourSvc.currentStepVisible.next(!1),this.tourSvc.markStepAsViewed(this.step.stepId),this.tourSvc.showTooltip(this.step.nextStepId||this.step.learnMoreStep),this.isRootLevel?this.sendTrackerEventsOnClick("next"):this.sendTrackerEventsOnClick(this.step.learnMoreStep?"learn more":"next")},e.prototype.handleSkip=function(){this.step.nextStepId?this.tourSvc.showTooltip(this.step.nextStepId):this.closeTooltip(),this.sendTrackerEventsOnClick("skip")},e.prototype.handleFinish=function(){this.state.set(Vr.e,Vr.e.noAutomation),this.closeTooltip(!0),this.sendTrackerEventsOnClick("complete",!0)},e.prototype.isStepViewed=function(e){var t=Object.keys(this.tourSvc.tooltipData.value),n=t.indexOf(this.step.stepId),r=t.indexOf(e);return this.tourSvc.tooltipData.value[e].viewed&&n>r},e.prototype.estimateContainerHeight=function(){var e=160;return this.isRootLevel&&(e=500),this.step.animationURL&&(e+=161),this.step.tooltip&&(e+=100),e},e.prototype.calculatePosition=function(){var e,t,n,r,i;"floating-tools"!==this.step.stepId&&"plus-create"!==this.step.stepId||(i=document.querySelector("#contextual-toolbar").getBoundingClientRect(),this.step.anchor.top=i.top,this.step.anchor.right=i.right,this.step.anchor.left=i.left,this.step.anchor.bottom=i.bottom);this.step.useOwnOverrides||(this.step.positionOverride=this.tourSvc.tooltipData.value[this.step.anchor.stepId].positionOverride,this.step.bodyDisplacementOverride=this.tourSvc.tooltipData.value[this.step.anchor.stepId].bodyDisplacementOverride),i||(i=this.step.anchor.element.getBoundingClientRect()),i.right+this.width>window.innerWidth?(this.left=i.left-this.width,this.placement=E.u.right):(this.left=i.right,this.placement=E.u.left);var a=this.estimateContainerHeight(),o=i.top+a>window.innerHeight-8;this.top=i.top,o?(this.bodyDisplacement=-(a+i.top+20-window.innerHeight),this.step.stepId.match("data")&&(this.bodyDisplacement-=40)):this.bodyDisplacement=-Math.min(20,i.top),this.step.bodyDisplacementOverride&&(this.bodyDisplacement+=this.step.bodyDisplacementOverride),(null===(e=this.step.positionOverride)||void 0===e?void 0:e.top)&&(this.top=this.top+this.step.positionOverride.top),(null===(t=this.step.positionOverride)||void 0===t?void 0:t.left)&&(this.left=this.left+this.step.positionOverride.left),(null===(n=this.step.tooltipPositionOverride)||void 0===n?void 0:n.top)&&(this.top=this.top+this.step.tooltipPositionOverride.top),(null===(r=this.step.tooltipPositionOverride)||void 0===r?void 0:r.left)&&(this.left=this.left+this.step.tooltipPositionOverride.left),0===this.step.level&&(this.width=560,this.height=500,this.left=(window.innerWidth-this.width)/2,this.top=(window.innerHeight-this.height)/2,this.bodyDisplacement=0)},e.prototype.unsub=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},e.prototype.sendTrackerEventsOnClick=function(e,t){1===this.step.level?x.Jb.track("onboarding.tooltip.intro.click",{value1:e,value2:this.translate.instant(this.step.title)}):0!==this.step.level?x.Jb.track("onboarding.tooltip.next.click",{value1:e,value2:this.translate.instant(this.step.title)}):t?x.Jb.track("tour.button."+e):x.Jb.track("tour.button."+e,{value1:this.translate.instant(this.step.title)})},e.prototype.nextStepPrequisitesAvailable=function(e){var t=this.tourSvc.tooltipData.value[e||this.step.nextStepId];return!!t&&this.tourSvc.areRequiredFeaturesAvailable(t)},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(Gr.a),k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["tooltip-tour-step"]],inputs:{step:"step"},features:[k.Qb],decls:22,vars:29,consts:[[1,"tooltip-tour-step-container",3,"ngStyle"],["class","tooltip-arrow",3,"ngClass",4,"ngIf"],[1,"tooltip-tour-body",3,"ngStyle"],[1,"tooltip-close-btn-container"],[1,"btn-small","nu-btn-icon",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-tooltip-close"],["class","tooltip-animation-container",4,"ngIf"],[1,"body","body--lg","body--bold","step-title-container",3,"innerHTML"],[1,"tooltip-card-text","body",3,"ngClass","innerHTML"],["class","tooltip-tip caption",3,"innerHTML",4,"ngIf"],[1,"tooltip-footer"],[1,"tooltip-footer-inner","body"],["class","tooltip-btn body body--bold",3,"disabled","click",4,"ngIf"],["class","tooltip-btn body body--bold",3,"click",4,"ngIf"],["class","tooltip-tour-steps",4,"ngIf"],["class","btn-primary btn-small",3,"click",4,"ngIf"],[1,"tooltip-arrow",3,"ngClass"],[1,"tooltip-animation-container"],["autoplay","","poster","./assets/tooltip-tour/tooltip-loading.gif","preload","auto",1,"tooltip-animation",3,"src","loop","ngStyle"],[1,"tooltip-tip","caption",3,"innerHTML"],[1,"tooltip-btn","body","body--bold",3,"disabled","click"],["translate","",3,"ngStyle"],[1,"tooltip-btn","body","body--bold",3,"click"],["translate",""],[1,"tooltip-tour-steps"],["class","tooltip-tour-dot",3,"ngClass",4,"ngFor","ngForOf"],[1,"tooltip-tour-dot",3,"ngClass"],["translate","",4,"ngIf"],[1,"btn-primary","btn-small",3,"click"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.dd(1,di,1,4,"div",1),k.mc(2,"div",2),k.mc(3,"div",3),k.mc(4,"button",4),k.uc("click",(function(){return t.closeTooltip()})),k.xc(),k.mc(5,"svg",5),k.hc(6,"use",6),k.lc(),k.lc(),k.lc(),k.dd(7,hi,2,6,"div",7),k.wc(),k.hc(8,"div",8),k.zc(9,"translate"),k.hc(10,"div",9),k.zc(11,"translate"),k.dd(12,fi,2,3,"div",10),k.mc(13,"div",11),k.mc(14,"div",12),k.dd(15,gi,3,4,"button",13),k.dd(16,bi,3,0,"button",14),k.dd(17,yi,2,1,"div",15),k.dd(18,Oi,3,0,"button",14),k.dd(19,ki,3,2,"button",14),k.dd(20,Ci,3,0,"button",14),k.dd(21,wi,3,0,"button",16),k.lc(),k.lc(),k.lc(),k.lc()),2&e&&(k.Dc("ngStyle",k.Kc(19,Si,t.left+"px",t.top+"px",t.isHidden?"hidden":"visible")),k.Sb(1),k.Dc("ngIf",!t.isRootLevel),k.Sb(1),k.Dc("ngStyle",k.Kc(23,Ii,t.bodyDisplacement+"px",t.width+"px",t.height?t.height+"px":"auto")),k.Sb(5),k.Dc("ngIf",t.step.animationURL),k.Sb(1),k.Dc("innerHTML",k.Ac(9,15,t.step.title),k.Rc),k.Sb(2),k.Dc("ngClass",k.Ic(27,Ti,t.isRootLevel))("innerHTML",k.Ac(11,17,t.step.description),k.Rc),k.Sb(2),k.Dc("ngIf",t.step.tooltip),k.Sb(3),k.Dc("ngIf",!t.hasInnerSteps),k.Sb(1),k.Dc("ngIf",t.hasInnerSteps),k.Sb(1),k.Dc("ngIf",t.currentTourSteps.length>1),k.Sb(1),k.Dc("ngIf",t.hasNext),k.Sb(1),k.Dc("ngIf",t.showFinish),k.Sb(1),k.Dc("ngIf",t.hasInnerSteps),k.Sb(1),k.Dc("ngIf",t.hasLinkedArticle))},directives:[a.w,a.t,a.q,y.a,a.s],pipes:[y.d],styles:[".tooltip-tour-step-container[_ngcontent-%COMP%]{padding:.5rem;position:absolute;-webkit-animation:fadeIn .5s;animation:fadeIn .5s}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{height:0;position:absolute;width:0;left:0;color:#fff;box-shadow:0 6px 10px rgba(0,0,0,.15),0 2px 3px rgba(0,0,0,.1);z-index:1001}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-arrow-left[_ngcontent-%COMP%]{width:0;height:0;border-top:8px solid transparent;border-bottom:8px solid transparent;border-right:8px solid #fff}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-arrow-right[_ngcontent-%COMP%]{width:0;height:0;left:288px;border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:8px solid #fff}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]{padding:2.5rem 1rem 1rem;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;border-radius:.5rem;background-color:#fff;box-shadow:0 6px 10px rgba(0,0,0,.15),0 2px 3px rgba(0,0,0,.1);z-index:1000}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .step-title-container[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#04263d}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-card-text[_ngcontent-%COMP%]{text-align:center;color:#04263d}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-tip[_ngcontent-%COMP%]{padding:.875rem;margin-top:.5rem;margin-bottom:.5rem;text-align:center;line-height:140%;border-radius:.25rem;background-color:#fafafc;color:#88a1aa}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-close-btn-container[_ngcontent-%COMP%]{position:absolute;top:9px;right:-9px;display:flex;flex-direction:row;justify-content:flex-end;height:32px;width:100%;z-index:1001}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-close-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-animation-container[_ngcontent-%COMP%]{margin-top:-2.75rem;position:relative;z-index:1000;max-height:318px;overflow-y:hidden}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-animation-container[_ngcontent-%COMP%]   .tooltip-animation[_ngcontent-%COMP%]{width:280px;padding:4px}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]{padding-top:1.5rem;display:flex;flex-direction:row;justify-content:space-between;align-items:flex-end;width:100%;bottom:0;flex-grow:1}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]   .tooltip-footer-inner[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem .75rem;cursor:pointer;background:none;display:flex;align-items:center;text-align:center;justify-content:center;line-height:140%;height:31px;gap:10px}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]   .tooltip-btn[_ngcontent-%COMP%]{color:#1381cd}.tooltip-tour-steps[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2px}.tooltip-tour-steps[_ngcontent-%COMP%]   .tooltip-tour-dot[_ngcontent-%COMP%]{background-color:#caccce;border-radius:50%;width:5px;height:5px}.tooltip-tour-steps[_ngcontent-%COMP%]   .tooltip-tour-viewed[_ngcontent-%COMP%]{background-color:#0c5e96}.level-zero-text[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"]}),e}();function Pi(e,t){if(1&e&&k.hc(0,"tooltip-tour-step",6),2&e){var n=k.yc();k.Dc("step",n.currentStep)}}function Mi(e,t){if(1&e&&(k.mc(0,"div",null,8),k.hc(2,"tooltip-tour-ripple",9),k.lc()),2&e){var n=t.$implicit,r=k.yc(2);k.Sb(2),k.Dc("anchor",n)("timer",r.animTimer)}}function Di(e,t){if(1&e&&(k.mc(0,"div"),k.dd(1,Mi,3,2,"div",7),k.zc(2,"async"),k.lc()),2&e){var n=k.yc();k.Sb(1),k.Dc("ngForOf",k.Ac(2,1,n.ripples))}}var ji=function(e){return{"backdrop-visible":e}},Ri=function(){function e(e,t,n,r){this.tourSvc=e,this.states=t,this.dll=n,this.d2vCoords=r,this.subs=[],this.ripples=new T.a([]),this.forceHideRipples=new T.a(!1),this.animTimer=Object(ri.a)(2500)}return e.prototype.ngOnInit=function(){this.subs.push(this.listenToAnchorElementChanges(),this.listenToTooltipLevelChanges(),this.listenToTooltipDataChanges(),this.listenToCurrentStepChanges(),this.listenToLSBExpansionChanges().subscribe(),this.listenToFloatingActionPanelChanges().subscribe(),this.listenToDiagramChanges().subscribe(),this.listenToShapeSelections().subscribe(),this.listenToTaskCountChanges().subscribe(),this.listenToCanvasChanges().subscribe(),this.listenToUserChanges().subscribe(),this.periodicallyUpdateRipples().subscribe())},e.prototype.ngOnDestroy=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},e.prototype.listenToAnchorElementChanges=function(){var e=this;return this.tourSvc.stepAnchorElementMap.pipe(Object(Mt.a)((function(t){e.prepareRipples(t)}))).subscribe()},e.prototype.listenToTooltipLevelChanges=function(){var e=this;return this.tourSvc.currentTooltipLevel.pipe(Object(Mt.a)((function(){e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)}))).subscribe()},e.prototype.listenToTooltipDataChanges=function(){var e=this;return this.tourSvc.tooltipData.pipe(Object(Mt.a)((function(){e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)}))).subscribe()},e.prototype.listenToCurrentStepChanges=function(){var e=this;return this.tourSvc.currentStep.pipe(Object(I.a)((function(t){t?(e.currentStep=t,e.ripples.next([]),e.showSingleRipple(t.stepId)):(e.currentStep=null,e.prepareRipples(e.tourSvc.stepAnchorElementMap.value))}))).subscribe()},e.prototype.prepareRipples=function(e){var t=this;if(!this.currentStep){var n=[];this.ripples.next([]),e.forEach((function(e){var r=t.tourSvc.tooltipData.value[e.stepId];r.viewed=t.tourSvc.tooltipStatus[r.stepId]||r.viewed,r.level!==t.tourSvc.currentTooltipLevel.value||0===r.level||r.viewed||t.tourSvc.areRequiredFeaturesAvailable(r,!0)&&n.push(e)})),this.ripples.next(n)}},e.prototype.showSingleRipple=function(e){var t=this.tourSvc.tooltipData.value[e],n=this.tourSvc.getAnchor(t),r=this.tourSvc.tooltipData.value[e].level;t&&0!==r&&this.ripples.next([n])},e.prototype.hideTooltips=function(){this.tourSvc.currentStep.next(null)},e.prototype.listenToLSBExpansionChanges=function(){var e=this;return this.states.changes("SelectedLeftPanel").pipe(Object(I.a)((function(t){if("folders"!==t){if("none"!==t){var n=e.tourSvc.stepAnchorElementMap.value.get("left-sidebar");n.rippleHidden=!(!n||"none"===t),e.tourSvc.updateElement(new k.r(n.element),"fab")}e.forceHideRipples.next(!1)}})))},e.prototype.listenToFloatingActionPanelChanges=function(){var e=this;return this.states.changes("SelectedFloatingPanel").pipe(Object(I.a)((function(t){var n=e.tourSvc.stepAnchorElementMap.value.get("fab");"quick-toolbar"===t?n&&(n.rippleHidden=!1,e.tourSvc.updateElement(new k.r(n.element),"fab")):n&&(n.rippleHidden=!0,e.tourSvc.updateElement(new k.r(n.element),"fab")),e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)})))},e.prototype.listenToShapeSelections=function(){var e=this;return this.states.changes("Selected").pipe(Object(I.a)((function(t){var n=e.tourSvc.stepAnchorElementMap.value.get("data");n&&t.length?(n.rippleHidden=!1,e.tourSvc.updateElement(new k.r(n.element),"data")):n&&(n.rippleHidden=!0,e.tourSvc.updateElement(new k.r(n.element),"data")),e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)})))},e.prototype.listenToDiagramChanges=function(){var e=this;return this.states.changes("CurrentDiagram").pipe(Object(bt.a)((function(e){return!Boolean(e)})),Object(Et.a)(),Object(I.a)((function(){e.forceHideRipples.next(!0)})))},e.prototype.listenToTaskCountChanges=function(){var e=this,t=this.tourSvc.taskCount.value;return this.tourSvc.taskCount.pipe(Object(ii.a)(2),Object(I.a)((function(n){var r=!0!==e.tourSvc.tooltipStatus["lsb-3.1"]&&null!==t;n&&r&&e.tourSvc.showTooltip("lsb-3",!0),t=n})))},e.prototype.listenToCanvasChanges=function(){return this.states.changes("DiagramPanNonAuto").pipe(Object(I.a)((function(){})))},e.prototype.listenToUserChanges=function(){var e=this;return this.states.changes("CurrentUser").pipe(Object(I.a)((function(t){""===t?e.forceHideRipples.next(!0):e.forceHideRipples.next(!1)})))},e.prototype.periodicallyUpdateRipples=function(){var e=this;return Object(ri.a)(100).pipe(Object(I.a)((function(){e.rippleElements.forEach((function(e){e.updateRipple()})),e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)})))},e.\u0275fac=function(t){return new(t||e)(k.gc(Gr.a),k.gc(x.Hb),k.gc(At.a),k.gc(ai.a))},e.\u0275cmp=k.ac({type:e,selectors:[["tooltip-tour-overlay"]],viewQuery:function(e,t){var n;(1&e&&k.kd(li,!0),2&e)&&(k.Mc(n=k.vc())&&(t.rippleElements=n))},decls:7,vars:7,consts:[[1,"tooltip-tour-overlay"],["overlay",""],[3,"step",4,"ngIf"],["tooltip-tour-step","root,root-1,root-2,root-3,root-4"],[4,"ngIf"],[3,"ngClass"],[3,"step"],[4,"ngFor","ngForOf"],["ripple",""],[3,"anchor","timer"]],template:function(e,t){1&e&&(k.mc(0,"div",0,1),k.dd(2,Pi,1,1,"tooltip-tour-step",2),k.hc(3,"div",3),k.dd(4,Di,3,3,"div",4),k.zc(5,"async"),k.hc(6,"div",5),k.lc()),2&e&&(k.Sb(2),k.Dc("ngIf",t.currentStep),k.Sb(2),k.Dc("ngIf",!k.Ac(5,3,t.forceHideRipples)),k.Sb(2),k.Dc("ngClass",k.Ic(5,ji,t.currentStep)))},directives:[a.t,jt.a,a.q,Ai,a.s,li],pipes:[a.b],styles:[".tooltip-tour-overlay[_ngcontent-%COMP%]{z-index:1004;position:absolute}@media only screen and (max-width:568px){.tooltip-tour-overlay[_ngcontent-%COMP%]{display:none}}.backdrop-visible[_ngcontent-%COMP%]{width:100vw;height:100vh;background:rgba(202,204,206,.35)}.tooltip-tour-overlay-canvas-anchor[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),e}(),Li=n("xejr"),Ni=n("sXdR"),Bi=n("lu3Q"),Ui=n("i9xl"),Fi=n("qZtG"),qi=n("9WAt"),Wi=n("IdLP"),Hi=n("2m+3"),Ki=n("h1tj"),zi=n("kuMc"),Vi=function(e){function t(t,n){var r=e.call(this,t)||this;return r.boundsLocator=n,r._zoom=1,r._panX=r.x,r._panY=r.y,Ki.Touch.enable(r),r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"zoom",{get:function(){return this._zoom},set:function(e){this._zoom=e,this.setCanvasScale()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panX",{get:function(){return this._panX},set:function(e){this._panX=e,this.setCanvasPan()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panY",{get:function(){return this._panY},set:function(e){this._panY=e,this.setCanvasPan()},enumerable:!1,configurable:!0}),t.prototype.getMouseX=function(){return this.mouseX/window.devicePixelRatio},t.prototype.getMouseY=function(){return this.mouseY/window.devicePixelRatio},t.prototype.setupStage=function(){var e=this;this.snapToPixelEnabled=!0,this.screenRatioChange=Object(A.a)(Ki.Ticker,"tick").pipe(Object(bt.a)((function(e){return!e.paused})),Object(Mt.a)((function(){return window.devicePixelRatio})),Object(Et.a)()),this.screenSizeChange=this.getScreenSizeChanges(),this.screenSizeChange.subscribe((function(){return e.updateCanvasSize()})),this.captureMouseEventOnRetinaScreen().subscribe((function(t){return e.updateStagePosition(t)}))},t.prototype.getScreenSizeChanges=function(){return Object(J.a)(this.screenRatioChange,Object(A.a)(window,"resize"))},t.prototype.captureMouseEventOnRetinaScreen=function(){var e=this;return this.screenRatioChange.pipe(Object(bt.a)((function(e){return 1!==e})),Object(S.a)((function(){return Object(J.a)(Object(A.a)(e,"mousedown",{capture:!0}),Object(A.a)(e,"pressmove",{capture:!0}),Object(A.a)(e,"pressup",{capture:!0}),Object(A.a)(e,"stagemousedown"),Object(A.a)(e,"stagemousemove"),Object(A.a)(e,"stagemouseup")).pipe(Object(zi.a)(e.screenRatioChange.pipe(Object(bt.a)((function(e){return 1===e})))))})),Object(Mt.a)((function(e){return e})))},t.prototype.updateStagePosition=function(e){e.stageX=e.stageX/window.devicePixelRatio,e.stageY=e.stageY/window.devicePixelRatio},t.prototype.updateCanvasSize=function(){var e=this.canvas,t=e.width!==e.offsetWidth*window.devicePixelRatio,n=e.height!==e.offsetHeight*window.devicePixelRatio;t&&(e.width=e.offsetWidth*window.devicePixelRatio),n&&(e.height=e.offsetHeight*window.devicePixelRatio),this.setCanvasScale(),this.setCanvasPan(),this.update()},t.prototype.setCanvasScale=function(){this.scaleX=window.devicePixelRatio*this._zoom,this.scaleY=window.devicePixelRatio*this._zoom},t.prototype.setCanvasPan=function(){this.x=this._panX*window.devicePixelRatio,this.y=this._panY*window.devicePixelRatio},t.prototype._getObjectsUnderPoint=function(e,t,n,r,i,a){if(this.boundsLocator){var o=this.globalToLocal(e,t),s=this.boundsLocator.searchShapes(o.x-10,o.x+10,o.y-10,o.y+10),c=this.children.filter((function(e){return s.find((function(t){return t.id===e.name}))}));return this._getObjectsUnderPointOriginal(e,t,n,r,i,a,c)}return this._getObjectsUnderPointOriginal(e,t,n,r,i,a,this.children)},t.prototype._getObjectsUnderPointOriginal=function(e,t,n,r,i,a,o){if(!(a=a||0)&&!this._testMask(this,e,t))return null;var s,c=Ki.DisplayObject._hitTestContext;i=i||r&&this._hasMouseEventListener();for(var l=o.length-1;l>=0;l--){var u=o[l],d=u.hitArea;if(u.visible&&(d||u.isVisible())&&(!r||u.mouseEnabled)&&(d||this._testMask(u,e,t)))if(!d&&u instanceof Ki.Container){var p=u._getObjectsUnderPoint(e,t,n,r,i,a+1,o);if(!n&&p)return r&&!this.mouseChildren?this:p}else{if(r&&!i&&!u._hasMouseEventListener())continue;var h=u.getConcatenatedDisplayProps(u._props);if(s=h.matrix,d&&(s.appendMatrix(d.getMatrix(d._props.matrix)),h.alpha=d.alpha),c.globalAlpha=h.alpha,c.setTransform(s.a,s.b,s.c,s.d,s.tx-e,s.ty-t),(d||u).draw(c),!this._testHit(c))continue;if(c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,2,2),!n)return r&&!this.mouseChildren?this:u;n.push(u)}}return null},t}(Ki.Stage),Gi=function(){function e(e,t){this.gridService=e,this.state=t,this.dotSize=3,this.maxDotSize=8,this.minDotSize=1.5,this.dotColor="#E8E8EB",this.backgroundColor="#FAFAFC",this.minZoomLevel=.2,this.dotsSpacing=20,this.buffer=100,this._changed=!1}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return"grid-area-canvas"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),e.prototype.updateCanvas=function(){this.canvas.update()},e.prototype.clearChanges=function(){this._changed=!1},e.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new Vi(this.canvasId),this._canvas.setupStage(),this._grid=new Ki.Shape,this._canvas.addChild(this._grid),this.getAllChanges().subscribe((function(){var t=e.state.get("DiagramZoomLevel")||1,n=e.state.get("DiagramPan")||{x:0,y:0};e.drawGrid(t,n)}))},e.prototype.getAllChanges=function(){return Object(J.a)(this.state.changes("DiagramViewPort"),this.state.changes("DiagramZoomLevel"),this.state.changes("DiagramPan"),this.gridService.showGrid)},e.prototype.getCanvasBounds=function(){var e=this.canvas.canvas.getBoundingClientRect();return x.ub.fromClientRect(e)},e.prototype.drawGrid=function(e,t){this._canvas.panX=t.x,this._canvas.panY=t.y,this._grid.graphics.clear(),this.drawBackground(t),this.gridService.showGrid.value&&this.drawDottedGrid(e,t),this._changed=!0},e.prototype.drawDottedGrid=function(e,t){var n,i,a,o;if(!(e<this.minZoomLevel)){var s=this.getCornerPoints(t),c=s.topLeft,l=s.bottomRight,u=this.getGridLines(c.x,l.x,e),d=this.getGridLines(c.y,l.y,e),p=c.y;try{for(var h=Object(r.k)(d),f=h.next();!f.done;f=h.next()){if((_=f.value)%this.dotsSpacing){p=_*e;break}}}catch(O){n={error:O}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}var m=this.dotsSpacing*e,g=Math.max(this.minDotSize,Math.min(this.dotSize*e,this.maxDotSize));try{for(var b=Object(r.k)(u),v=b.next();!v.done;v=b.next()){var _;if((_=v.value)%this.dotsSpacing){var y=_*e;this.drawDottedLine({x:y,y:p},{x:y,y:l.y},m,g)}}}catch(x){a={error:x}}finally{try{v&&!v.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}}},e.prototype.drawHorizontalGridLines=function(e,t){var n,i,a=this.getCornerPoints(t),o=a.topLeft,s=a.bottomRight,c=this.getGridLines(o.y,s.y,e);try{for(var l=Object(r.k)(c),u=l.next();!u.done;u=l.next()){var d=u.value,p=d*e;this.drawLine({x:o.x,y:p},{x:s.x,y:p},this.gridService.isOnGridMajor(d))}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}},e.prototype.drawVerticalGridLines=function(e,t){var n,i,a=this.getCornerPoints(t),o=a.topLeft,s=a.bottomRight,c=this.getGridLines(o.x,s.x,e);try{for(var l=Object(r.k)(c),u=l.next();!u.done;u=l.next()){var d=u.value,p=d*e;this.drawLine({x:p,y:o.y},{x:p,y:s.y},this.gridService.isOnGridMajor(d))}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}},e.prototype.drawLine=function(e,t,n){void 0===n&&(n=!1),this._grid.graphics.setStrokeStyle(n?1:.5),this._grid.graphics.beginStroke(n?"#E8E8E8":"#F0F0F0"),this._grid.graphics.moveTo(e.x,e.y),this._grid.graphics.lineTo(t.x,t.y),this._grid.graphics.endStroke()},e.prototype.drawDottedLine=function(e,t,n,r){this._grid.graphics.setStrokeStyle(r,"round"),this._grid.graphics.setStrokeDash([0,n]),this._grid.graphics.beginStroke(this.dotColor),this._grid.graphics.moveTo(e.x,e.y),this._grid.graphics.lineTo(t.x,t.y),this._grid.graphics.endStroke()},e.prototype.drawBackground=function(e){var t=this.getCornerPoints(e),n=t.topLeft,r=t.bottomRight;this._grid.graphics.beginFill(this.backgroundColor),this._grid.graphics.drawRect(n.x,n.y,r.x-n.x,r.y-n.y),this._grid.graphics.endFill()},e.prototype.getCornerPoints=function(e){var t=this.getCanvasBounds();return{topLeft:{x:t.x-e.x-this.buffer,y:t.y-e.y-this.buffer},bottomRight:{x:t.x-e.x+t.width+this.buffer,y:t.y-e.y+t.height+this.buffer}}},e.prototype.getGridLines=function(e,t,n){return this.gridService.getGridLines(e/n,t/n)},e.\u0275fac=function(t){return new(t||e)(k.gc("GridService"),k.gc(x.Hb))},e.\u0275cmp=k.ac({type:e,selectors:[["grid-area"]],decls:1,vars:1,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&k.hc(0,"canvas",0),2&e&&k.Ec("id",t.canvasId)},encapsulation:2,changeDetection:0}),e}(),Yi=n("j6ZJ"),Xi=n("+AVE"),Qi=n("rYDR"),Ji=function(e){function t(t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0);var a=e.call(this,t,r,i)||this;return a.child=n,a}return Object(r.e)(t,e),t}(Ki.Event),$i=n("Dnwm"),Zi=function(e){function t(t){var n=e.call(this,t)||this;return n.model=t,n.horizontalTextPadding=10,n}return Object(r.e)(t,e),t.prototype.update=function(t,n,r,i){if(e.prototype.update.call(this,t,n),r){var a=i?i.scaleX:1;this.lineWidth=Math.abs(t.hitArea?t.hitArea.width:r.width*a)-2*pe.y,t.width>this.lineWidth&&(this.lineWidth=t.width);var o=void 0;o=void 0!==t.width?new x.ub(0,0,t.width,t.height):t.wordWrap?this.getTextBounds(t.value,t.hitArea?t.hitArea.width:r.width):this.getTextBounds(t.value),this.position(t.position,t.alignX,t.alignY,o,r,i),this.updateHitArea(t,o)}this.updateViewCache(t,n)},t.prototype.position=function(e,t,n,r,i,a){var o={width:this.lineWidth,height:r.height},s=fe.H.getPointOnShape(e,i,a),c=fe.H.getPointOnText(o,t,n,a);this.regX=c.x,this.regY=c.y,this.x=s.x,this.y=s.y,this.applyTransform(a)},t.prototype.applyTransform=function(e){e&&(this.rotation=fe.H.getTextAngle(e),this.rotation=this.rotation+this.model.angle)},t}(n("wOpJ").a),ea=n("cs9O"),ta=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.model=t,r.shapeId=n,r}return Object(r.e)(t,e),t.prototype.update=function(e,t,n,r){if(this.change=t,this.bounds=n,n){this.updateViewCache(e,this.change),this.model=e,this.transfrom=r,e.html?(this.html=e.html,this.lineWidth=e.width):(this.html="",this.lineWidth=0),this.updatePos();var i={x:0,y:0,width:e.width,height:e.height};this.updateHitArea(e,i)}},t.prototype.updatePos=function(){var e=this;if(this.bounds){var t=this.transfrom?this.transfrom.scaleX:1;this.lineWidth=Math.abs(this.model.hitArea?this.model.hitArea.width:this.bounds.width*t)-2*pe.y,this.model.width>this.lineWidth&&(this.lineWidth=this.model.width),this.cachedBounds?this.position(this.model.position,this.model.alignX,this.model.alignY,this.cachedBounds,this.bounds,this.transfrom):this.getShapeTextBounds().subscribe((function(t){e.position(e.model.position,e.model.alignX,e.model.alignY,t,e.bounds,e.transfrom)}))}},t.prototype.position=function(e,t,n,r,i,a){var o=fe.H.getPointOnShape(e,i,a),s=fe.H.getPointOnText(r,t,n,a);this.regX=s.x,this.regY=s.y,this.x=o.x,this.y=o.y,this.applyTransform(a)},t.prototype.applyTransform=function(e){e&&(this.rotation=fe.H.getTextAngle(e),this.rotation=this.rotation+this.model.angle)},t}(Yi.a),na=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.container=this.getContainer(this.id,this.model.type),this.imageElem=this.getImageElement(),this.imageElem.crossOrigin="anonymous",this.imageElem.onload=function(){return e.onImageLoad()},this.imageElem.onerror=function(t){return e.onImageLoadFailure(t)},this.imageElem.src=this._imageSource,this.image=this.getBitmap(this.imageElem),this.container.addChild(this.image)},t.prototype.render=function(t){var n=this;if(null==t?void 0:t.$set){var r=/texts\.([^\.]+)\.rendering$/;Object.keys(t.$set||{}).filter((function(e){return r.test(e)})).forEach((function(e){var t=e.split(".")[1],r=n._texts.find((function(e){return e.name===t}));n.removeText(r)}))}e.prototype.render.call(this,t),this.scaleWidth(this.model.drawWidth/this.imageElem.width),this.scaleHeight(this.model.drawHeight/this.imageElem.height),this.image.setBounds(0,0,this.imageElem.width,this.imageElem.height)},t.prototype.onImageLoad=function(){this.render(),this.container&&this.container.stage?this.container.stage.update():x.cb.warning("Image on loading failed due to unknown error. Either container or stage is null.")},t.prototype.onImageLoadFailure=function(e){x.cb.error("Image loading failed for shape "+this.model.id)},t.prototype.addText=function(e){if("tiptapCanvas"===e.rendering){var t=new ta(e,this.model.id);this.container.addChild(t),this._texts.push(t)}else{t=new Zi(e);this.container.addChild(t),this._texts.push(t)}},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.move=function(e,t){this.image.x=e,this.image.y=t},t.prototype.scaleHeight=function(e){this.image.scaleY=e},t.prototype.scaleWidth=function(e){this.image.scaleX=e},t.prototype.rotate=function(e){this.image.rotation=e},t.prototype.getImageElement=function(){return new Image},t.prototype.getBitmap=function(e){return new Ki.Bitmap(this.imageElem)},t.prototype.getContainer=function(e,t){return new ea.a(e,t)},t}(fe.q),ra=function(){function e(e){this.imageModel=e,this.fileAtInit=this.imageModel.file}return Object.defineProperty(e.prototype,"name",{get:function(){return this.imageModel.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this.fileAtInit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderedImage",{get:function(){return this.bitmap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageOutline",{get:function(){return this.bitmapMask},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){var e=this,t=this.getImageElement();t.crossOrigin="anonymous",t.onload=function(){return e.onImageReady()},t.onerror=function(){return e.onImageError()},t.src=this.getImageUrl(),this.bitmap=this.getBitmapShape(t),this.bitmap.name=this.imageModel.id,this.setImageStoke()},e.prototype.update=function(e,t,n,r){var i=this;this.deferredUpdate=function(){return i.update(e,t,n,r)},this.imageModel=e;var a=this.bitmap.getBounds();if(a&&(this.resizeChild(n,a,this.imageModel,this.bitmap,r),this.positionChild(n,a,this.imageModel,this.bitmap,r),0===this.bitmap.cacheID&&this.bitmap.cache(0,0,a.width,a.height),this.bitmap.updateCache(),this.imageModel.mask)){this.bitmapMask||(this.bitmapMask=new Ki.Shape,"square"===this.imageModel.mask.type?this.bitmapMask.graphics.f("rgba(255, 0, 0, 0.5)").dr(0,0,100,100):"roundedsquare"===this.imageModel.mask.type?this.bitmapMask.graphics.f("rgba(255, 0, 0, 0.5)").drawRoundRect(0,0,100,100,5):this.bitmapMask.graphics.f("rgba(255, 0, 0, 1)").dc(50,50,50),this.bitmapMask.setBounds(0,0,100,100)),this.bitmap.mask=this.bitmapMask;var o=this.bitmapMask.getBounds();this.setImageStoke(),this.resizeChild(n,o,this.imageModel.mask,this.bitmapMask,r),this.positionChild(n,o,this.imageModel.mask,this.bitmapMask,r)}},e.prototype.destroy=function(){},e.prototype.setImageStoke=function(){this.imageModel.mask&&this.imageModel.mask.stroke&&(this.bitmapMask||(this.bitmapMask=new Ki.Shape),this.bitmapMask.graphics.clear(),this.imageModel.mask.stroke.size>0&&this.bitmapMask.graphics.setStrokeStyle(this.imageModel.mask.stroke.size).s(this.imageModel.mask.stroke.color),"square"===this.imageModel.mask.type?this.bitmapMask.graphics.dr(0,0,100,100):"roundedsquare"===this.imageModel.mask.type?this.bitmapMask.graphics.drawRoundRect(0,0,100,100,5):this.bitmapMask.graphics.dc(50,50,50),this.bitmapMask.setBounds(0,0,100,100))},e.prototype.getImageUrl=function(){return this.imageModel.fileType&&"url"===this.imageModel.fileType?this.fileAtInit:this.imageModel.fileType&&"shapesassets"===this.imageModel.fileType?"./assets/images/shapes-assets/"+this.fileAtInit:x.m.get("CUSTOM_IMAGE_BASE_URL")+this.fileAtInit},e.prototype.onImageReady=function(){this.deferredUpdate&&(this.deferredUpdate(),this.deferredUpdate=null),this.bitmap.stage&&this.bitmap.stage.update()},e.prototype.onImageError=function(){},e.prototype.getImageElement=function(){return new Image},e.prototype.getBitmapShape=function(e){return new Ki.Bitmap(e)},e.prototype.resizeChild=function(e,t,n,r,i){n.w&&n.h?(r.scaleX=this.getExpectedScaleX(e,t,n,i),r.scaleY=this.getExpectedScaleY(e,t,n,i)):n.w?(r.scaleX=this.getExpectedScaleX(e,t,n,i),r.scaleY=r.scaleX):n.h?(r.scaleY=this.getExpectedScaleY(e,t,n,i),r.scaleX=r.scaleY):(r.scaleX=1,r.scaleY=1)},e.prototype.getExpectedScaleX=function(e,t,n,r){return"fixed"===n.w.type?n.w.value/t.width:"relative"===n.w.type?e.width*r.scaleX*n.w.value/t.width:(x.cb.error("ShapeImageView: invalid shape image (or mask) width type"),1)},e.prototype.getExpectedScaleY=function(e,t,n,r){return"fixed"===n.h.type?n.h.value/t.height:"relative"===n.h.type?e.height*r.scaleY*n.h.value/t.height:(x.cb.error("ShapeImageView: invalid shape image (or mask) height type"),1)},e.prototype.positionChild=function(e,t,n,r,i){var a=x.nb.onRect({x:n.x||{type:"relative",value:0},y:n.y||{type:"relative",value:0}},e,i),o={x:0,y:0};"l"===n.alignX||("r"===n.alignX?o.x=t.width:o.x=t.width/2),"t"===n.alignY||("b"===n.alignY?o.y=t.height:o.y=t.height/2),r.regX=o.x,r.regY=o.y,r.x=a.x,r.y=a.y,r.rotation=i.angle},e}(),ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this.shape.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this.shadowShape.graphics},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){this.container=new ea.a(this.id,this.model.type),this.shape=new Ki.Shape,this.container.convertToCursorDrawable(this.shape),this.shape.name=this.id,this.shadowShape=new Ki.Shape,this.model.style.shadow?(this.shadowShape.shadow=new Ki.Shadow(this.model.style.shadow.color,this.model.style.shadow.offsetX,this.model.style.shadow.offsetY,this.model.style.shadow.blur),this.container.addChild(this.shadowShape,this.shape)):this.container.addChild(this.shape)},t.prototype.render=function(t){var n=this;if(null==t?void 0:t.$set){var r=/texts\.([^\.]+)\.rendering$/;Object.keys(t.$set||{}).filter((function(e){return r.test(e)})).forEach((function(e){var t=e.split(".")[1],r=n._texts.find((function(e){return e.name===t}));r&&n.removeText(r)}))}if(e.prototype.render.call(this,t),this.model.transformSettings.scaleRender===pe.B.redraw)this.shape.setBounds(0,0,this.model.drawWidth,this.model.drawHeight),this.shadowShape.setBounds(0,0,this.model.drawWidth,this.model.drawHeight);else{var i=this.model.defaultBounds;this.shape.setBounds(i.x,i.y,i.width,i.height),this.shadowShape.setBounds(i.x,i.y,i.width,i.height)}},t.prototype.addText=function(e){if(!e.displayableTextId)if("tiptapCanvas"===e.rendering){var t=new ta(e,this.model.id);this.container.addChild(t),this._texts.push(t)}else{t=new Zi(e);this.container.addChild(t),this._texts.push(t)}},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.addImage=function(e){var t=new ra(e);t.initialize(),this._images.push(t),this.container.addChild(t.renderedImage),t.imageOutline&&this.container.addChild(t.imageOutline)},t.prototype.move=function(e,t){this.shape.x=e,this.shape.y=t,this.shadowShape.x=e,this.shadowShape.y=t},t.prototype.scaleHeight=function(e){this.shape.scaleY=e,this.shadowShape.scaleY=e},t.prototype.scaleWidth=function(e){this.shape.scaleX=e,this.shadowShape.scaleX=e},t.prototype.rotate=function(e){this.shape.rotation=e,this.shadowShape.rotation=e},t}(fe.z),aa=n("W9bu"),oa=n("JPqQ"),sa=function(e){function t(t,n,r,i,a,o,s,c){var l=e.call(this,i)||this;return l.link=t,l.ll=n,l.commandService=r,l.state=i,l.logger=a,l.shapesBoundsLocator=o,l.drs=s,l.postMessage=c,l.renderedShapes=[],l._changed=!1,l.fitToScreenPadding=30,l.changes={},l.handleZIndexChange=Object(Ct.debounce)(l.handleZIndexChange.bind(l),100),Yi.a.state=l.state,l.state.initialize("ShapeViews",l.renderedShapes),l}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"canvasId",{get:function(){return"diagram-draw-area"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){var e=this;return i.a.initialized.pipe(Object(S.a)((function(t){return t===e.state.get("CurrentDiagram")?e.ll.forCurrentObserver(!0):Qi.a})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeViewType",{get:function(){return ia},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageViewType",{get:function(){return na},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectorViewType",{get:function(){return $i.a},enumerable:!1,configurable:!0}),t.prototype.updateCanvas=function(){var t;for(var n in this.changes){var r=this.changes[n],i=r.shape,a=r.modifier;1===this.renderedShapes.length&&(null===(t=null==a?void 0:a.$set)||void 0===t?void 0:t.defId)&&this.setActiveShapes();try{e.prototype.render.call(this,i,a)}catch(o){console.log("Diagram view error: ",o)}this.changeTextVisibility(this.state.get("EditingText"))}this.changes={},this.canvas.update()},t.prototype.ngOnDestroy=function(){for(;this._subs.length>0;)this._subs.pop().unsubscribe()},t.prototype.clearChanges=function(){this._changed=!1},t.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new Vi(this.canvasId,this.shapesBoundsLocator),this._canvas.setupStage(),this._canvas.enableMouseOver(5),this._subs.push(this.loadFonts().pipe(Object(S.a)((function(){return e.populateDiagram()}))).subscribe(),this.state.changes("UpdateDiagramCanvas").subscribe((function(t){t&&e.markChanged()}))),this.state.set("DiagramPan",new x.lb(this._canvas.panX,this._canvas.panY)),this.state.changes("DiagramPan").subscribe((function(t){return e.pan(t)})),this.state.set("DiagramZoomLevel",1),this.state.changes("DiagramZoomLevel").subscribe((function(t){return e.zoom(t)})),this._subs.push(this.fitToScreen()),this._subs.push(this.listenToFilterChange()),this.commandService.dispatch(Ae.a.migrateToNewRegionType),this.commandService.preview(Ae.a.diagramContainersReLayout),this.initSetActiveShapes(),this.postMessage.sendToParent("document:visible",{documentId:this.state.get("CurrentDiagram")})},t.prototype.initSetActiveShapes=function(){var e=this;this._subs.push(this.state.changes("DiagramLoadComplete").pipe(Object(bt.a)((function(e){return!!e})),Object(S.a)((function(){return e.state.changes("ActiveShapes").pipe(Object(Et.a)(Ct.isEqual))}))).subscribe((function(t){e.setActiveShapes()})))},t.prototype.setActiveShapes=function(){var e=this;this.canvas.removeAllChildren(),this.renderedShapes.filter((function(t){return e.state.get("ActiveShapes").includes(t.name)})).forEach((function(t){return e.canvas.addChild(t)})),this.markChanged()},t.prototype.pan=function(e){this._canvas.panX=e.x,this._canvas.panY=e.y,this.markChanged()},t.prototype.zoom=function(e){this._canvas.zoom=e,this.markChanged()},t.prototype.fitToScreen=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(Et.a)(Ct.isEqual),Object(S.a)((function(){var t=e.state.get("FocusTarget")||{};return t.shapeId?(e.link.navigateToShape(t.shapeId),e.state.set("FocusTarget",{}),e.state.set("Selected",[t.shapeId]),Object(Te.a)(null)):t.groupId?(e.link.navigateToGroup(t.groupId),e.state.set("FocusTarget",{}),Object(Te.a)(null)):e.state.changes("DiagramViewPort").pipe(Object(bt.a)((function(e){return!!e})),Object(xt.a)(1),Object(S.a)((function(){return Object(Te.a)(!0)})))}))).subscribe((function(t){t&&e.commandService.dispatch(Wr.a.zoomAndPanDiagram)}))},t.prototype.loadDiagramFonts=function(){var e=this;return this.locator.pipe(Object(S.a)((function(e){return e.getCurrentShapes()})),Object(S.a)((function(t){var n,i,a,o,s=[],c=new fe.G;try{for(var l=Object(r.k)(t),u=l.next();!u.done;u=l.next()){var d=u.value;if(d.hasAnyText)for(var p in d.texts){var h=d.texts[p],f=c.extractFonts(h.content);try{for(var m=(a=void 0,Object(r.k)(f)),g=m.next();!g.done;g=m.next()){var b=g.value;-1===s.indexOf(b)&&s.push(b)}}catch(v){a={error:v}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}}}}catch(_){n={error:_}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return e.loadFonts(s)})))},t.prototype.getZoomToViewPortLevel=function(e,t){var n=e.width-t.width,r=e.height-t.height,i=1;return n/t.width<r/t.height&&r>0?i=t.height/e.height:n>0&&(i=t.width/e.width),i},t.prototype.render=function(e,t){if(this.changes[e.id]){var n=this.changes[e.id].modifier;this.changes[e.id]={shape:e,modifier:(r=n,i=t,{$set:Object.assign({},null==r?void 0:r.$set,null==i?void 0:i.$set),$unset:Object.assign({},null==r?void 0:r.$unset,null==i?void 0:i.$unset)})}}else this.changes[e.id]={shape:e,modifier:t};var r,i;this.markChanged()},t.prototype.addShape=function(t){e.prototype.addShape.call(this,t),this.renderedShapes.push(t.renderedShape),this.handleZIndexChange(t.id),this.state.get("DiagramLoadComplete")&&this._canvas.dispatchEvent(new Ji("newChildAdded",t.renderedShape)),this._canvas.dispatchEvent(new Ji("childAdded",t.renderedShape))},t.prototype.removeShape=function(t){e.prototype.removeShape.call(this,t);var n=this.renderedShapes.findIndex((function(e){return e.name===t}));this._canvas.dispatchEvent(new Ji("childRemoved",this.renderedShapes[n])),this.renderedShapes.splice(n,1);var r=this._canvas.getChildByName(t);r&&this._canvas.removeChild(r),this.markChanged()},t.prototype.handleZIndexChange=function(e,t){var n=this;void 0===t&&(t=100),this.renderedShapes&&this.renderedShapes.length>1&&this.locator.pipe(Object(S.a)((function(e){return e.getDiagramOnce()})),Object(Ot.a)(t)).subscribe((function(e){var t,i,a=[],o=e.getShapesOrderedByIndex();try{for(var s=Object(r.k)(o),c=s.next();!c.done;c=s.next()){var l=c.value,u=n.getShapeViews()[l.id];u&&a.push(u.renderedShape)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}n.renderedShapes=a,n.state.set("ShapeViews",n.renderedShapes),n.setActiveShapes()}))},t.prototype.changeTextVisibility=function(e){if(e&&e.open&&e.shapeId&&e.textId){var t=(this.getShapeViews()||{})[e.shapeId];if(t){var n=e.textId;this.locator.pipe(Object(S.a)((function(t){return t.getShapeOnce(e.shapeId)})),Object(bt.a)((function(e){return!!e})),Object(Mt.a)((function(t){var r=t.texts[e.textId];r&&(n=r.displayableTextId?r.displayableTextId:n)}))).subscribe((function(){var e=t.getTextView(n);e&&(e.visible=!1)}))}}},t.prototype.loadFonts=function(e){var t=this;if(e||(e=Object.keys(pe.C)),e&&0===e.length)return Ur.a;var n=Promise.all(e.map((function(e){return new Xi(e).load()}))).catch((function(e){t.logger.warning("Failed to load some fonts:",e.message)}));return Object(In.a)(n)},t.prototype.listenToFilterChange=function(){var e=this;return this.drs.filterActions.pipe(Object(Mt.a)((function(t){var n=e.getShapeViews();if(n[t.shapeId])return n[t.shapeId].dynamicStyle=t.style,!0})),Object(bt.a)((function(e){return!!e})),Object(vt.a)(100),Object(I.a)((function(){return e.markChanged()}))).subscribe()},t.prototype.markChanged=function(){this._changed=!0},t.\u0275fac=function(e){return new(e||t)(k.gc(aa.a),k.gc(At.a),k.gc(x.B),k.gc(x.Hb),k.gc(x.cb),k.gc(Qn.a),k.gc(oa.a),k.gc(x.ob))},t.\u0275cmp=k.ac({type:t,selectors:[["diagram-view"]],features:[k.Pb],decls:1,vars:1,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&k.hc(0,"canvas",0),2&e&&k.Ec("id",t.canvasId)},encapsulation:2,changeDetection:0}),t}(fe.m),ca=function(){function e(e,t,n){this.state=e,this.injector=t,this.commandService=n,this._changed=!1,this.handlerList=new Map,this.subs=[]}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return"interaction-area-canvas"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),e.prototype.updateCanvas=function(){this.canvas.update()},e.prototype.clearChanges=function(){this._changed=!1},e.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new Vi(this.canvasId),this._canvas.setupStage(),this._canvas.enableMouseOver(Ki.Ticker.framerate),this.state.initialize("InteractionCanvas",this._canvas);var t=this.state.changes("IndicatorHandlerList").pipe(Object(S.a)((function(t){return e.state.changes("PanZoomState").pipe(Object(Mt.a)((function(e){if("started"===e){var n=Array.from(t).filter((function(e){return!e.removeForPanZoom}));return new Set(Object(r.j)(n))}return t})))}))).subscribe((function(t){e.createIndocatorHandlers(t),Array.from(t).reverse().forEach((function(t,n){var r=e.handlerList.get(t).container;e.canvas.setChildIndex(r,n)}))}));this.subs.push(t)},e.prototype.ngOnDestroy=function(){for(this.state.remove("InteractionCanvas");this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.createIndocatorHandlers=function(e){var t,n,i,a;try{for(var o=Object(r.k)(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.handlerList.has(c)||this.addHandler(c)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}try{for(var l=Object(r.k)(this.handlerList),u=l.next();!u.done;u=l.next()){var d=Object(r.h)(u.value,2);c=d[0],d[1];e.has(c)||this.removeHandler(c)}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},e.prototype.createHandler=function(e){return k.C.create(this.getProviders(e),this.injector).get(e)},e.prototype.addHandler=function(e){var t=this,n=this.createHandler(e);n.indicatorLayer=this._canvas,this.canvas.addChild(n.container),n.add().subscribe((function(e){return t.addIndicator(e,n.container)})),n.remove().subscribe((function(e){return t.removeIndicator(e,n.container)})),n.change().subscribe((function(){return t._changed=!0})),n.initialize(),this.handlerList.set(e,n)},e.prototype.removeHandler=function(e){var t=this.handlerList.get(e);this.canvas.removeChild(t.container),this._changed=!0,t.destroy(),this.handlerList.delete(e)},e.prototype.addIndicator=function(e,t){t.addChild(e),this._changed=!0},e.prototype.removeIndicator=function(e,t){t.removeChild(e),this._changed=!0},e.prototype.getProviders=function(e){return[{provide:e,useClass:e,deps:Reflect.getMetadata("design:paramtypes",e)||[]}]},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(k.C),k.gc(x.B))},e.\u0275cmp=k.ac({type:e,selectors:[["interaction-area"]],decls:1,vars:2,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&k.hc(0,"canvas",0),2&e&&(k.Ec("id",t.canvasId),k.Tb("data-testid",t.canvasId))},encapsulation:2,changeDetection:0}),e}(),la=n("LaGA"),ua=function(){function e(){}return e.FRAME_RATE_COUNT=0,e}(),da=n("0Woy"),pa=function(){function e(e){this.state=e,this.svgNS="http://www.w3.org/2000/svg",this.containerId="free-hand-container",this.svgId="freehand-svg",this.svgPathId="freehand-svg-path",this.subs=[]}return Object.defineProperty(e.prototype,"isFreeHandMode",{get:function(){return this.state.changes("MouseControlState").pipe(Object(S.a)((function(e){return e===Vr.b.Pen||e===Vr.b.Highlighter?Object(Te.a)(!0):Object(Te.a)(!1)})))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.showSvgContainer().subscribe(),this.updateSvgViewBox().subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getViewportBounds=function(){return document.querySelector(".diagram-viewport").getBoundingClientRect()},e.prototype.updateSvgViewBox=function(){var e=this;return this.state.changes("DiagramViewPort").pipe(Object(bt.a)((function(t){var n=e.state.get("MouseControlState");return!!t&&(n===Vr.b.Pen||n===Vr.b.Highlighter)})),Object(I.a)((function(t){var n=(t=e.getViewportBounds()).width,r=t.height,i=t.x,a=t.y,o=document.getElementById(e.containerId),s="margin-left: "+i+"px; margin-top: "+a+"px; margin-right: "+t.right+"px;";o.setAttribute("style",s);var c=document.getElementById(e.svgId);c.setAttributeNS(null,"viewBox",i+" "+a+" "+n+" "+r),c.setAttributeNS(null,"width",n.toString()),c.setAttributeNS(null,"height",r.toString())})))},e.prototype.showSvgContainer=function(){var e=this;return this.state.changes("MouseControlState").pipe(Object(da.a)(),Object(S.a)((function(t){var n=document.getElementById(e.containerId),r=[Vr.b.Highlighter,Vr.b.Pen],i=t[1],a=t[0];if(!r.includes(a)&&r.includes(i)){if(0===n.childNodes.length){var o=e.getViewportBounds(),s=o.width,c=o.height,l=o.x,u=o.y,d="margin-left: "+l+"px; margin-top: "+u+"px; margin-right: "+o.right+"px;";n.setAttribute("style",d);var p=document.createElementNS(e.svgNS,"svg");p.setAttributeNS(null,"id",e.svgId),p.setAttributeNS(null,"viewBox",l+" "+u+" "+s+" "+c),p.setAttributeNS(null,"width",s.toString()),p.setAttributeNS(null,"height",c.toString()),p.setAttributeNS(null,"fill","none");var h=document.createElementNS(e.svgNS,"path");h.setAttributeNS(null,"id",e.svgPathId),h.setAttributeNS(null,"stroke-linecap","round"),h.setAttributeNS(null,"stroke-width","0"),h.setAttributeNS(null,"stroke","#00FFFFFF"),p.appendChild(h),n.appendChild(p)}return Object(Te.a)(!0)}return n.childNodes.forEach((function(e){return e.remove()})),Object(Te.a)(!1)})))},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb))},e.\u0275cmp=k.ac({type:e,selectors:[["free-hand-container"]],decls:2,vars:4,consts:[["id","free-hand-container",1,"fx-pointer-events-auto","fhSvgContainer"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.zc(1,"async"),k.lc()),2&e&&k.Yb("position",k.Ac(1,2,t.isFreeHandMode))},pipes:[a.b],styles:[".fhSvgContainer[_ngcontent-%COMP%]{z-index:1;flex:1}.position[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),e}(),ha=n("eRmX"),fa=n("Wpmq"),ma=["searchPanel"],ga=function(e){function t(t,n,r,i,a,o,s){var c=e.call(this,t,n,r,i)||this;return c.componentFactoryResolver=t,c.injector=n,c.elementRef=r,c.manager=i,c.state=a,c.diagToViewPort=o,c.viewPortToDiagram=s,c.alignTop=!1,c.toolbarGap=20,c.toolbar1stItemPos=110,c.toolbarHeight=256,c._actionEmitter=new hn.a,c}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"actionEmitter",{get:function(){return this._actionEmitter},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.manager.register(this)},t.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.changeSubs).forEach((function(t){e.changeSubs[t].unsubscribe()})),this._change.complete(),this.changeSubs=null},t.prototype.ngAfterViewInit=function(){var e=this;this.changeSubs.pstState=this.state.changes("PlusCreateToolbarState").pipe(Object(I.a)((function(t){t.show?e.showToolbar():e.hideToolbar()}))).subscribe(),this.changeSubs.searchEmitter=this.searchPanel.actionEmitter.pipe(Object(I.a)((function(t){e._actionEmitter.next({defId:t.defId,connect:!0,version:t.version,def:t}),e.hideToolbar()}))).subscribe(),this.changeSubs.closedSub=this.searchPanel.isOpen.subscribe((function(t){t||e.hideToolbar()}))},t.prototype.preparePanel=function(e){this.shapeModel=e,this.searchPanel.resetPanel(this.shapeModel,!1)},t.prototype.showAndPosition=function(e,t){var n=this;return this.shapeModel=e,this.showing?this.applyActions(t):(this.showToolbar(),this.applyActions(t).pipe(Object(Mt.a)((function(){return n.showToolbar()}))))},t.prototype.getCurrentRelativePosition=function(){return this.relativePosition},t.prototype.getRelativePosition=function(e){var t=Math.round(this.shapeModel.angle/90),n=["top","right","bottom","left"];if(0!==t){var r=n.indexOf(e)+t;return r>=n.length&&(r%=n.length),r<0&&(r=n.length+r),n[r]}return e},t.prototype.applyActions=function(e){return this.updatePosition(e),Ur.a},t.prototype.updatePosition=function(e){this.alignTop="top"===e;var t=this.getRelativePosition(e);this.relativePosition=t;var n=this.getToolbarPosition(t),r=this.getToolbarSide(t),i=this.element.getBoundingClientRect(),a=fn.getSidePosition(r);this.element.style.left=n.x-i.width*a.x+"px",this.element.style.top=this.getPositionBasedOnScreenBound(n.y+i.height*a.y,t)+"px"},t.prototype.getToolbarSide=function(e){switch(e){case"left":return"topright";case"right":return"topleft";case"top":return"bottomcenter";case"bottom":return"topcenter"}},t.prototype.getRelativeBoundingBoxForRotatedShape=function(e,t,n){var r=n>=0?n:180-Math.abs(n);90!==r&&180!==r||(r=0);var i=x.ub.from(e).transform(t),a=Math.abs(Math.sin(r)),o=Math.abs(Math.cos(r)),s=i.width*o+i.height*a,c=i.width*a+i.height*o,l=i.y+i.height/2-Math.abs(c/2),u=i.x+i.width/2-Math.abs(s/2);return new x.ub(u,l,s,c)},t.prototype.getToolbarPosition=function(e){var t=this.getRelativeBoundingBoxForRotatedShape(this.shapeModel.defaultBounds,this.shapeModel.transform,this.shapeModel.angle);switch(e){case"left":t.x+=this.toolbarGap/2,t.y-=this.relativeGapForFirstItem(t.height);break;case"right":t.x+=1.75*this.toolbarGap+t.width,t.y-=this.relativeGapForFirstItem(t.height);break;case"top":t.x+=t.width/2+.75*this.toolbarGap,t.y-=this.toolbarHeight-1.5*this.toolbarGap;break;case"bottom":t.x+=t.width/2+.75*this.toolbarGap,t.y+=t.height+.75*this.toolbarGap}return t},t.prototype.getPositionBasedOnScreenBound=function(e,t){var n=this.state.get("DiagramViewPort"),r=10,i=n.top+r,a=n.top+n.height-r,o=e+this.toolbarHeight+r,s=e;return i>e?(s=i+r,"top"===t&&(s+=50)):a<o&&(s=a-(this.toolbarHeight+20)),s},t.prototype.relativeGapForFirstItem=function(e){return this.toolbar1stItemPos-e/2},t.prototype.showToolbar=function(){this.element.style.display="block",this.element.style.visibility="visible",this.showing=!0,this.searchPanel.alignTop=this.alignTop,this.searchPanel.resetPanel(this.shapeModel)},t.prototype.hideToolbar=function(){this.element.style.display="block",this.element.style.visibility="hidden",this.showing=!1},t.\u0275fac=function(e){return new(e||t)(k.gc(k.m),k.gc(k.C),k.gc(k.r),k.gc(pn.a),k.gc(x.Hb),k.gc(ai.a),k.gc(fa.a))},t.\u0275cmp=k.ac({type:t,selectors:[["plus-create-toolbar"]],viewQuery:function(e,t){var n;(1&e&&k.kd(ma,!0),2&e)&&(k.Mc(n=k.vc())&&(t.searchPanel=n.first))},inputs:{id:"id"},features:[k.Pb],decls:3,vars:2,consts:[["data-keep-text-open","true",1,"ftb-container"],["searchPanel",""]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.hc(1,"quick-shape-search",null,1),k.lc()),2&e&&k.Yb("top",t.alignTop)},styles:[".ftb-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-direction:column;align-content:flex-start;justify-content:flex-start;width:234px!important;max-width:234px!important;height:0;overflow:hidden}.ftb-container.top[_ngcontent-%COMP%]{flex-direction:column-reverse}.search-box[_ngcontent-%COMP%]{height:30px}[_nghost-%COMP%]{z-index:2}"],changeDetection:0}),t}(_n),ba=n("3+4Q"),va=n("e4iD"),_a=n("nT0V"),ya=n("rwb9"),Oa=["commentThreadItem"];function xa(e,t){if(1&e&&(k.hc(0,"comment-thread-item",5,6),k.zc(2,"async")),2&e){var n=t.$implicit,r=k.yc(2);k.Dc("comment",n.comment)("commenter",n.commenter)("showControls",!k.Ac(2,3,r.readonly))}}function Ea(e,t){if(1&e&&(k.mc(0,"div",3),k.dd(1,xa,3,5,"comment-thread-item",4),k.zc(2,"async"),k.lc()),2&e){var n=k.yc();k.Sb(1),k.Dc("ngForOf",k.Ac(2,2,n.commentsWithCollabs))("ngForTrackBy",n.getCommentId)}}function ka(e,t){if(1&e&&k.hc(0,"user-image",12),2&e){var n=t.ngIf;k.Dc("hasImage",n.hasImage)("imagePath",n.image)("userColor",n.displayColor)("userInitials",n.initial)("userRegistered",n.isRegistered)("userOnlineStatus",!0)}}var Ca=function(){return["Enter"]};function wa(e,t){if(1&e){var n=k.nc();k.mc(0,"div",7),k.mc(1,"div",8),k.dd(2,ka,1,6,"user-image",9),k.zc(3,"async"),k.lc(),k.mc(4,"div",10),k.mc(5,"text-input",11),k.uc("submit",(function(e){return k.Qc(n),k.yc().submit.next(e)})),k.zc(6,"translate"),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Sb(2),k.Dc("ngIf",k.Ac(3,7,r.userMdl)),k.Sb(3),k.Ec("placeholder",k.Ac(6,9,"PLACEHOLDERS.COMMENT")),k.Dc("clearOnSubmit",!0)("submitOnCode",k.Hc(11,Ca))("submitOnBlur",!1)("multiLined",!0)("autoFocus",!0)}}var Sa=function(){function e(e,t){this.collabLocator=e,this.state=t,this.readonly=new T.a(!1),this._comments=new T.a([]),this.submit=new hn.a,this.subs=[]}return Object.defineProperty(e.prototype,"comments",{get:function(){return this._comments.value},set:function(e){this._comments.next(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=this.state.get("CurrentUser");this.commentsWithCollabs=this._comments.pipe(Object(I.a)((function(t){var n=t.filter((function(e){return!e.parentId&&!!e.resolved}));e.readonly.next(!!n.length)})),Object(S.a)((function(t){return Object(Pt.b)(t.map((function(t){return e.collabLocator.getCollabs().pipe(Object(Mt.a)((function(e){var n=e.find((function(e){return e.id===t.userId}));return{comment:t,commenter:n}})))})))})),Object(I.a)((function(){return setTimeout((function(){e.scrollToBottom()}),300)}))),this.userMdl=this.collabLocator.getCollabs().pipe(Object(Mt.a)((function(e){return e.filter((function(e){return e.id===t}))[0]}))),this.subs.push(Object(A.a)(window,"keydown").pipe(Object(bt.a)((function(e){return e.keyCode===pe.k.Escape})),Object(I.a)((function(){var t=e.state.get("CommentThreadData");if(!t||!t.parentSelector){var n=e.commentThreadItems&&e.commentThreadItems.filter((function(e){return e.isEditMode.value}));n&&!n.length&&(x.Jb.track("right.comment.cancel",{value1Type:"trigger",value1:"esc"}),e.state.set("CommentThreadData",{}))}}))).subscribe())},e.prototype.getCommentId=function(e,t){return t.id},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.scrollToBottom=function(){this.scrollRef&&this.scrollRef.directiveRef&&this.scrollRef.directiveRef.scrollToBottom()},e.\u0275fac=function(t){return new(t||e)(k.gc(_t.a),k.gc(x.Hb))},e.\u0275cmp=k.ac({type:e,selectors:[["comment-thread-container"]],viewQuery:function(e,t){var n;(1&e&&(k.Xc(R.b,!0),k.kd(Oa,!0)),2&e)&&(k.Mc(n=k.vc())&&(t.scrollRef=n.first),k.Mc(n=k.vc())&&(t.commentThreadItems=n))},inputs:{comments:"comments"},outputs:{submit:"submit"},decls:5,vars:4,consts:[[1,"comment-thread-container"],["class","comment-thread-items-area",4,"ngIf"],["class","comment-thread-input",4,"ngIf"],[1,"comment-thread-items-area"],[3,"comment","commenter","showControls",4,"ngFor","ngForOf","ngForTrackBy"],[3,"comment","commenter","showControls"],["commentThreadItem",""],[1,"comment-thread-input"],[1,"comment-thread-input-user"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],[1,"comment-thread-input-box"],[1,"caption",3,"placeholder","clearOnSubmit","submitOnCode","submitOnBlur","multiLined","autoFocus","submit"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"perfect-scrollbar"),k.dd(2,Ea,3,4,"div",1),k.lc(),k.dd(3,wa,7,12,"div",2),k.zc(4,"async"),k.lc()),2&e&&(k.Sb(2),k.Dc("ngIf",t.comments.length>0),k.Sb(1),k.Dc("ngIf",!k.Ac(4,2,t.readonly)))},directives:[R.b,a.t,a.s,_a.a,oe.a,ya.a],pipes:[a.b,y.d],styles:[".nu-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.comment-thread-container[_ngcontent-%COMP%]{position:absolute;z-index:2;background:#fff;box-shadow:0 6px 10px rgba(0,0,0,.15),0 2px 3px rgba(0,0,0,.1);border-radius:6px;width:320px;transform:translate(30px,-50%);padding:.5rem}.comment-thread-container[_ngcontent-%COMP%]   text-input[_ngcontent-%COMP%]  .text-input-multilined{margin:0;background-color:#f1f4fa;border:none}.comment-thread-items-area[_ngcontent-%COMP%]{max-height:500px}.comment-thread-input[_ngcontent-%COMP%]{display:flex;align-items:center}.comment-thread-input-box[_ngcontent-%COMP%]{flex:1;padding-left:.25rem}"],changeDetection:0}),e}();function Ia(e,t){if(1&e){var n=k.nc();k.mc(0,"div",1),k.zc(1,"async"),k.mc(2,"comment-thread-container",2),k.uc("submit",(function(e){return k.Qc(n),k.yc().addComment(e)})),k.zc(3,"async"),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Yc(k.Ac(1,3,r.styleset)),k.Sb(2),k.Dc("comments",k.Ac(3,5,r.comments))}}var Ta=function(){function e(e,t,n,r,i,a,o){this.ll=e,this.states=t,this.sanitizer=n,this.datastore=r,this.commandService=i,this.diagToViewport=a,this.elementRef=o,this.defaulParentSelector=".diagram-area-wrapper",this.subs=[],this.visibility=new T.a(!1),this.comments=new T.a([]),this.styleset=new T.a(this.sanitizer.bypassSecurityTrustStyle(""))}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.states.changes("CommentThreadData").pipe(Object(bt.a)((function(e){return Boolean(e)})),Object(S.a)((function(t){return Object(J.a)(e.updateVisibility(t),e.attachToParent(t),e.updatePosition(t),e.updateComments(t))}))).subscribe())},e.prototype.ngOnDestroy=function(){var e,t;try{for(var n=Object(r.k)(this.subs),i=n.next();!i.done;i=n.next()){i.value.unsubscribe(),this.subs=[]}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.addComment=function(e){var t=this.states.get("CommentThreadData");t.threadId||this.visibility.next(!1),e&&(x.Jb.track("comments.new_comment_added.onenter"),this.commandService.dispatch(Kr.a.addComment,{comment:{id:x.rb.commentId(),comment:e,parentId:t.threadId,shapeId:t.shapeId,locOnDiagram:t.position}}))},e.prototype.attachToParent=function(e){var t=this.elementRef.nativeElement,n=document.querySelector(e.parentSelector||this.defaulParentSelector);return n&&n.appendChild(t),Object(Ur.b)()},e.prototype.updateVisibility=function(e){return this.visibility.next(!!e.visible),Object(Ur.b)()},e.prototype.updatePosition=function(e){var t=this;if(!e.visible)return Object(Ur.b)();if(e.parentSelector)return Object(Ur.b)();if(e.threadId){var n=Object(r.h)(e.comments,1)[0];return n.shapeId?this.locator.getShapeOnce(n.shapeId).pipe(Object(S.a)((function(e){return e?t.syncWithShapePosition(n.shapeId,n.locOnShape):t.syncWithDiagramPosition(n.locOnDiagram)}))):this.syncWithDiagramPosition(n.locOnDiagram)}return e.shapeId?this.locator.getShapeOnce(e.shapeId).pipe(Object(S.a)((function(n){if(n.isConnector())return t.syncWithDiagramPosition(e.position);var r=n.getPositionOnShape(e.position);return t.syncWithShapePosition(e.shapeId,r)}))):this.syncWithDiagramPosition(e.position)},e.prototype.updateComments=function(e){var t=this;if(e.comments&&e.comments[0]){var n=Object(r.h)(e.comments,1)[0];return Object(Pt.b)(this.datastore.findOne(ba.a,{id:n.id}),this.datastore.find(ba.a,{parentId:n.id},{sort:{added:1}})).pipe(Object(I.a)((function(e){var n=Object(r.h)(e,2),i=n[0],a=n[1];t.comments.next(Object(r.j)([i],a))})))}return this.comments.next([]),Object(Ur.b)()},e.prototype.syncWithDiagramPosition=function(e){var t=this;return this.updateOnViewportChange((function(){var n=t.diagToViewport.x(e.x),r=t.diagToViewport.y(e.y);return t.updatePositionStyles(n,r),Object(Ur.b)()}))},e.prototype.syncWithShapePosition=function(e,t){var n=this;return this.updateOnViewportChange((function(){return n.locator.getShapeModel(e).pipe(Object(I.a)((function(e){var r=x.nb.onRect(t,e.defaultBounds,e.transform),i=n.diagToViewport.x(r.x),a=n.diagToViewport.y(r.y);n.updatePositionStyles(i,a)})))}))},e.prototype.updatePositionStyles=function(e,t){this.styleset.next(this.sanitizer.bypassSecurityTrustStyle("transform: translate("+e+"px, "+t+"px)"))},e.prototype.updateOnViewportChange=function(e){return Object(J.a)(this.states.changes("DiagramPan"),this.states.changes("DiagramZoomLevel")).pipe(Object(S.a)((function(){return e()})))},e.\u0275fac=function(t){return new(t||e)(k.gc(At.a),k.gc(x.Hb),k.gc(va.b),k.gc(Sn.b),k.gc(x.B),k.gc(ai.a),k.gc(k.r))},e.\u0275cmp=k.ac({type:e,selectors:[["comment-thread-view"]],decls:2,vars:3,consts:[["class","comment-thread-view",3,"style",4,"ngIf"],[1,"comment-thread-view"],[3,"comments","submit"]],template:function(e,t){1&e&&(k.dd(0,Ia,4,7,"div",0),k.zc(1,"async")),2&e&&k.Dc("ngIf",k.Ac(1,1,t.visibility))},directives:[a.t,Sa],pipes:[a.b],styles:[".comment-thread-view[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:1000}"],changeDetection:0}),e}(),Aa=["wrapper"],Pa=function(){function e(e,t,n,r,i,a,o){this.state=e,this.injector=t,this.ll=n,this.loader=r,this.cursorGen=i,this.resources=a,this.elementRef=o,this.changeDebounceTime=3e4,this.panZoomDebounceTime=120,Ki.Ticker.timingMode=Ki.Ticker.RAF,this.subs=[],this.compSubs=[]}return e.prototype.ngAfterViewInit=function(){var e=this;this.interactionLayer.canvas.nextStage=this.diagramView.canvas,this.diagramView.canvas.nextStage=this.gridArea.canvas,this.state.initialize("DiagramPanNonAuto",{}),this.compSubs.push(this.getPanZoomState().subscribe((function(t){return e.state.set("PanZoomState",t)})),this.state.changes("CurrentDiagram").subscribe((function(){return e.initViewComponents()})),Object(A.a)(this.wrapper.nativeElement,"scroll").subscribe((function(){0!==e.wrapper.nativeElement.scrollTop&&(e.wrapper.nativeElement.scrollTop=0),0!==e.wrapper.nativeElement.scrollLeft&&(e.wrapper.nativeElement.scrollLeft=0)}))),Ki.Ticker.addEventListener("tick",(function(t){return e.tick(t)})),this.initSvgGenerator()},e.prototype.ngOnDestroy=function(){for(this.state.remove("DiagramCanvas"),this.clearSubscriptions();this.compSubs.length>0;)this.compSubs.pop().unsubscribe()},e.prototype.getPanZoomState=function(){var e=Object(J.a)(this.state.changes("DiagramPanNonAuto"),this.state.changes("DiagramZoomLevel")).pipe(Object(ii.a)(1)),t="stopped";return Object(J.a)(e.pipe(Object(vt.a)(this.panZoomDebounceTime),Object(Mt.a)((function(){return t="stopped"}))),e.pipe(Object(Ni.lodashThrottle)(this.panZoomDebounceTime-20),Object(Mt.a)((function(){return"started"!==t&&(t="started"),t})))).pipe(Object(Et.a)())},e.prototype.initViewComponents=function(){var e=this;this.clearSubscriptions(),this.subs.push(this.createInteractionHandler().subscribe());var t=document.querySelector(".diagram-viewport");this.state.set("DiagramViewPort",new x.ub(t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)),this.subs.push(this.observeBounds(t,300).subscribe((function(t){return e.updateViewPort(t)}))),this.state.initialize("GridAreaCanvas",this.gridArea.canvas),this.state.initialize("DiagramCanvas",this.diagramView.canvas)},e.prototype.initSvgGenerator=function(){var e=this,t=this.ll.forCurrentObserver(!1),n=t.pipe(Object(S.a)((function(e){return e.getDiagramModel()})),Object(vt.a)(this.changeDebounceTime),Object(S.a)((function(){var n=e.createDiagramSVGView(t),r=n.populateDiagram().pipe(Object(qi.a)()),i=Object(Ui.a)((function(){return n.toSvg().pipe(Object(xt.a)(1))}));return Object(Fi.a)(r,i)}))).subscribe((function(t){var n=x.m.get("DIAGRAM_SVG_BASE_URL")+e.state.get("CurrentDiagram");e.loader.store(n,t,pe.s.Uploaded)}));this.subs.push(n)},e.prototype.createDiagramSVGView=function(e){return new fe.n(e,this.resources,this.state,!0)},e.prototype.clearSubscriptions=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.observeBounds=function(e,t){var n=this;return Wi.a.create((function(t){var i=n.createResizeObserver((function(n){var i,a;try{for(var o=Object(r.k)(n),s=o.next();!s.done;s=o.next()){var c=s.value;if(c.target===e){var l=x.ub.fromClientRect(c.target.getBoundingClientRect());t.next(l)}}}catch(u){i={error:u}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}));return i.observe(e),function(){i.disconnect()}})).pipe(Object(vt.a)(t))},e.prototype.createResizeObserver=function(e){return new la.default(e)},e.prototype.createInteractionHandler=function(){var e,t=this;return this.state.changes("CurrentInteractionHandler").pipe(Object(S.a)((function(n){return e&&e.destroy(),e=n.injector.get(n.type),Object(J.a)(e.initialize(t.diagramView.canvas,t.interactionLayer.canvas,t.gridArea.canvas),e.getCursor().pipe(Object(I.a)((function(e){return t.updateCursor(e)}))))})))},e.prototype.updateCursor=function(e){var t;return t="css"===e.type?e.cursor:"cur"===e.type?this.cursorGen.getCursorIcon(e):this.cursorGen.getCursorCSS(e),"app"===e.viewingArea?document.body.style.cursor=t:document.body.style.cursor="default",requestAnimationFrame((function(){})),this.elementRef.nativeElement.style.cursor=t},e.prototype.tick=function(e){e.paused||(this.updateCanvas(this.diagramView),this.updateCanvas(this.interactionLayer),this.updateCanvas(this.gridArea),x.P.get("DEBUG_FRAME_RATE")&&ua.FRAME_RATE_COUNT++)},e.prototype.updateCanvas=function(e){e.hasChanges&&(e.updateCanvas(),e.clearChanges())},e.prototype.updateViewPort=function(e){var t=this.state.get("DiagramViewPort");t.width===e.width&&t.height===e.height&&t.x===e.x&&t.y===e.y||(t.width=e.width,t.height=e.height,t.x=e.x,t.y=e.y,this.state.set("DiagramViewPort",t))},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(k.C),k.gc(At.a),k.gc(x.yb),k.gc(Bi.a),k.gc(x.W),k.gc(k.r))},e.\u0275cmp=k.ac({type:e,selectors:[["diagram-area"]],viewQuery:function(e,t){var n;(1&e&&(k.kd(sa,!0),k.kd(ca,!0),k.kd(Gi,!0),k.kd(pa,!0),k.kd(Aa,!0)),2&e)&&(k.Mc(n=k.vc())&&(t.diagramView=n.first),k.Mc(n=k.vc())&&(t.interactionLayer=n.first),k.Mc(n=k.vc())&&(t.gridArea=n.first),k.Mc(n=k.vc())&&(t.freeHandContainer=n.first),k.Mc(n=k.vc())&&(t.wrapper=n.first))},features:[k.Rb([x.yb])],decls:16,vars:0,consts:[[1,"diagram-area-wrapper","fx-cover"],["wrapper",""],["name","dashboard-canvas-message"],["name","shape-text-editor"],["name","tiptap-docs"],["name","tiptap-docs-shape-text"],["name","shape-data-viewer"],["name","shapelink-editor"],["id","contextual-toolbar"],["id","shape-text-toolbar"],["id","plus-create-toolbar"]],template:function(e,t){1&e&&(k.mc(0,"div",0,1),k.hc(2,"router-outlet",2),k.hc(3,"grid-area"),k.hc(4,"diagram-view"),k.hc(5,"interaction-area"),k.hc(6,"free-hand-container"),k.hc(7,"router-outlet",3),k.hc(8,"router-outlet",4),k.hc(9,"router-outlet",5),k.hc(10,"router-outlet",6),k.hc(11,"router-outlet",7),k.hc(12,"floating-toolbar",8),k.hc(13,"floating-toolbar",9),k.hc(14,"plus-create-toolbar",10),k.hc(15,"comment-thread-view"),k.lc())},directives:[b.i,Gi,sa,ca,pa,_n,ga,Ta],encapsulation:2,changeDetection:0}),e}(),Ma=n("8lHc"),Da=n("7ntQ"),ja=n("P1E4"),Ra=n("xeB5"),La=n("iV8b"),Na=n("B/3P"),Ba=n("40+6"),Ua=n("ej19"),Fa=n("fqe/"),qa=n("VVrU"),Wa=n("qeMm");function Ha(e,t){if(1&e&&k.hc(0,"collab-list-item",8),2&e){var n=t.$implicit;k.Dc("collab",n)}}var Ka=function(){return{event:"dialog.share.user.role.change"}},za=function(e){function t(t,n,r,i,a,o,s,c){var l=e.call(this,a)||this;return l.ll=t,l.collabLocator=n,l.commandService=r,l.userLocator=i,l.modalController=a,l.planPermManager=o,l.translate=s,l.stateService=c,l.subs=[],l.openCollabSettings=new k.t,l.title=s.instant("SHARE.HEADING"),l.collabs=n.getCollabsSortedIgnoringOnline(),l.isVerifiedUser=new T.a(!1),l.isTeamUser=new T.a(!1),l.subs.push(l.checkUserEmailIsVerified().subscribe(),l.planPermManager.isTeamUser().subscribe((function(e){return l.isTeamUser.next(e)}))),l.teamName=s.instant("SHARE.ORGANIZATION"),l}return Object(r.e)(t,e),t.prototype.getPrivacyText=function(){var e=this,t=this.getTeamName().subscribe((function(t){e.teamName=""===t?e.translate.instant("SHARE.ORGANIZATION"):t}));return this.subs.push(t),this.getPrivacyLevel().pipe(Object(Mt.a)((function(t){switch(t.level){case 0:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.SPECIFIC_USERS");case 1:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT")+e.teamName+" "+e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT_LINK");case 2:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT")+e.teamName;case 3:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_LINK");case 4:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.PUBLIC")}})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.getTeamName=function(){return this.userLocator.getUserData().pipe(Object(bt.a)((function(e){return!!e})),Object(xt.a)(1),Object(Mt.a)((function(e){return e.team?e.team.organizationName:null})))},t.prototype.getPrivacyLevel=function(){return this.ll.forCurrentObserver(!1).pipe(Object(S.a)((function(e){return e.getDiagramModel().pipe(Object(xt.a)(1),Object(Mt.a)((function(e){return e.privacy})))})))},t.prototype.removeCollaborator=function(e){this.commandService.dispatch(Kr.a.removeDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabIds:[e]})},t.prototype.addCollaborators=function(e){var t=this;this.collabLocator.getCollabs().pipe(Object(xt.a)(1),Object(Mt.a)((function(n){e.forEach((function(t){var r=n.find((function(e){return e.email===t.email}));r&&(e=e.filter((function(e){return e.email!==r.email})))})),e.length>0&&t.dispatchAddCollabsCommand(e)}))).subscribe()},t.prototype.dispatchAddCollabsCommand=function(e){var t=this;this.commandService.dispatch(Kr.a.addDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabs:e}).subscribe({error:function(e){t.handleDiagramPermissionError(e)}})},t.prototype.handleDiagramPermissionError=function(e){if(1618===e.code)this.showShareUpgradeDialog();else{if(1620!==e.code)throw e;this.subs.push(this.showAddCollaboratorError().subscribe())}},t.prototype.showAddCollaboratorError=function(){var e=this;return this.collabLocator.getCollabs().pipe(Object(xt.a)(1),Object(S.a)((function(t){var n=t.find((function(e){return e.role===he.g.OWNER}));return e.userLocator.getUserInfo(n.id).pipe(Object(I.a)((function(t){var n=Object(r.a)(Object(r.a)({},Na.a[pe.r.DIAGRAM_COLLABORATOR_ADD_EDITORS]),{descriptionParams:{ownerName:t.fullName},buttons:[{type:"ok",text:"BUTTONS.OK",clickHandler:e.hideModal.bind(e)}],hideCancelButton:!0});throw new me.i("Adding diagram collaborator permission is denied for collaborator",n)})))})))},t.prototype.hideModal=function(){return this.modalController.hide()},t.prototype.changeCollabRole=function(e){this.commandService.dispatch(Kr.a.changeDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabs:[{id:e.userId,role:e.role}]})},t.prototype.showShareUpgradeDialog=function(){var e={id:pe.r.DIAGRAM_ADD_EDITORS,iframeType:me.s.Share,buttons:[{type:"action",clickHandler:function(){},visibility:"hidden"},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.stateService.get("ApplicationIsEmbedded"),environment:this.stateService.get("PluginApp")},descriptionParams:{errorMessage:this.isTeamUser.value?me.r.limitedTeamSharing:me.r.limitedToPubliclyViewableWorkspaces}};this.modalController.show(me.t,{inputs:{dialogData:e}})},t.prototype.checkUserEmailIsVerified=function(){var e=this;return this.userLocator.getUserData().pipe(Object(bt.a)((function(e){return!!e})),Object(I.a)((function(t){t.emailToConfirm?e.isVerifiedUser.next(!1):e.isVerifiedUser.next(!0)})))},t.\u0275fac=function(e){return new(e||t)(k.gc(At.a),k.gc(_t.a),k.gc(x.B),k.gc(me.x),k.gc(x.fb),k.gc(me.l),k.gc(y.e),k.gc(x.Hb))},t.\u0275cmp=k.ac({type:t,selectors:[["diagram-share-window"]],inputs:{authDialog:"authDialog"},outputs:{openCollabSettings:"openCollabSettings"},features:[k.Pb],decls:14,vars:12,consts:[[1,"diagram-share-tab-container"],[1,"collaborator-setting"],["translate","",1,"body"],["translate","",1,"btn-link","body",3,"trackAction","click"],[1,"collaborator-list-container"],[3,"collab",4,"ngFor","ngForOf"],[1,"collaborator-invite-form"],[3,"authDialog","verifiedUser"],[3,"collab"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.mc(2,"span",2),k.fd(3),k.zc(4,"async"),k.lc(),k.mc(5,"div",3),k.uc("click",(function(){return t.openCollabSettings.next(!0)})),k.fd(6,"SHARE.PRIVACY_CHANGE"),k.lc(),k.lc(),k.mc(7,"div",4),k.mc(8,"perfect-scrollbar"),k.dd(9,Ha,1,1,"collab-list-item",5),k.zc(10,"async"),k.lc(),k.lc(),k.mc(11,"div",6),k.hc(12,"collab-invite-form",7),k.zc(13,"async"),k.lc(),k.lc()),2&e&&(k.Sb(3),k.gd(k.Ac(4,5,t.getPrivacyText())),k.Sb(2),k.Dc("trackAction",k.Hc(11,Ka)),k.Sb(4),k.Dc("ngForOf",k.Ac(10,7,t.collabs)),k.Sb(3),k.Dc("authDialog",t.authDialog)("verifiedUser",k.Ac(13,9,t.isVerifiedUser)))},directives:[y.a,Jr.a,R.b,a.s,qa.a,Wa.a],pipes:[a.b],styles:[".collab-list[_ngcontent-%COMP%]{color:#fff;margin:0 auto;max-height:calc(100% - 60px);width:100%}.diagram-share-tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.collaborator-list-container[_ngcontent-%COMP%]{padding-top:1.25rem;flex:1;overflow:auto}.collaborator-setting[_ngcontent-%COMP%]{padding:1.25rem;background-color:#f1f4fa;border-radius:.25rem;display:flex;align-items:center}.collaborator-setting[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:2rem;flex:1;color:#354b53}"],changeDetection:0}),t}(he.f),Va=n("Mo46");function Ga(e,t){if(1&e){var n=k.nc();k.mc(0,"collab-privacy-item",1),k.uc("privacyChange",(function(e){return k.Qc(n),k.yc().privacyChange.next(e)}))("privacyRoleChanged",(function(e){return k.Qc(n),k.yc().selectedRole.next(e)})),k.zc(1,"async"),k.lc()}if(2&e){var r=t.$implicit,i=k.yc();k.Dc("name",i.collabPrivacyItem)("disabled",!1)("checked",r.level===i.currentPrivacy.level)("privacyInfo",r)("role",k.Ac(1,5,i.selectedRole))}}var Ya=function(e){function t(t,n,r,i){var a=e.call(this,t,i)||this;return a.userLocator=t,a.ll=n,a.collabLocator=r,a.translate=i,a}return Object(r.e)(t,e),t.prototype.getPrivacyDetails=function(e){var t=this,n=this.translate.instant("SHARE.ORGANIZATION");e.team&&(n=""===e.team.organizationName?this.translate.instant("SHARE.ORGANIZATION"):e.team.organizationName);var r={title:this.translate.instant("SHARE.PUBLIC"),description:this.translate.instant("SHARE.PUBLIC_DESC_VIEW"),level:me.m.PUBLIC},i={title:this.translate.instant("SHARE.ANYONE_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")},level:me.m.ANYONE_WITH_LINK},a={title:this.translate.instant("SHARE.ANYONE_AT")+" "+n,description:{edit:this.translate.instant("SHARE.ANYONE_AT")+" "+n+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_AT")+" "+n+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_VIEW")},level:me.m.ANYONE_IN_TEAM},o={title:this.translate.instant("SHARE.ANYONE_AT")+" "+n+" "+this.translate.instant("SHARE.ANYONE_AT_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")},level:me.m.ANYONE_IN_TEAM_WITH_LINK},s={title:this.translate.instant("SHARE.SPECIFIC_USERS"),description:this.translate.instant("SHARE.SPECIFIC_USERS_DESC"),level:me.m.SPECIFIC};return this.collabLocator.getCollabs().pipe(Object(xt.a)(1),Object(Mt.a)((function(n){return t.isInTeam(e,n)?[r,i,a,o,s]:[r,i,s]})))},t.\u0275fac=function(e){return new(e||t)(k.gc(me.x),k.gc(At.a),k.gc(_t.a),k.gc(y.e))},t.\u0275cmp=k.ac({type:t,selectors:[["diagram-privacy-form"]],viewQuery:function(e,n){var r;(1&e&&k.kd(t,!0),2&e)&&(k.Mc(r=k.vc())&&(n.diagramPrivacyForm=r.first))},features:[k.Pb],decls:2,vars:3,consts:[[3,"name","disabled","checked","privacyInfo","role","privacyChange","privacyRoleChanged",4,"ngFor","ngForOf"],[3,"name","disabled","checked","privacyInfo","role","privacyChange","privacyRoleChanged"]],template:function(e,t){1&e&&(k.dd(0,Ga,2,7,"collab-privacy-item",0),k.zc(1,"async")),2&e&&k.Dc("ngForOf",k.Ac(1,1,t.privacyTypes))},directives:[a.s,Va.a],pipes:[a.b],encapsulation:2,changeDetection:0}),t}(he.d),Xa=function(e){function t(t,n,r,i,a,o){var s=e.call(this)||this;return s.commandService=t,s.planPermManager=n,s.translate=r,s.stateService=i,s.modalController=a,s.dataStore=o,s.sub=[],s.privacy=s.getPrivacy(),s.isDemoUser=new T.a(!1),s.isTeamUser=new T.a(!1),s}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){var e=this;this.subscriptions.push(this.planPermManager.isDemoUser().subscribe((function(t){return e.isDemoUser.next(t)})),this.planPermManager.isTeamUser().subscribe((function(t){return e.isTeamUser.next(t)})))},t.prototype.getPrivacy=function(){var e=this;return this.stateService.changes("CurrentDiagram").pipe(Object(bt.a)((function(e){return e&&"start"!==e})),Object(S.a)((function(t){return e.dataStore.findOneRaw(Dt.a,{id:t})})),Object(Mt.a)((function(e){return e.privacy})))},t.prototype.changePrivacy=function(e){this.planPermManager.check([pe.r.DIAGRAM_CREATE_PUBLIC])||this.planPermManager.check([pe.r.DIAGRAM_CREATE])||this.planPermManager.check([pe.r.DIAGRAM_CREATE_PRIVATE])?this.commandService.dispatch(Kr.a.changeDiagramPrivacy,{diagramId:this.stateService.get("CurrentDiagram"),privacy:e}):this.isDemoUser.value?this.authDialog():this.showShareUpgradeDialog()},t.prototype.showShareUpgradeDialog=function(){var e={id:pe.r.DIAGRAM_CREATE_PRIVATE_NONE,iframeType:me.s.Share,buttons:[{type:"action",clickHandler:function(){},visibility:"hidden"},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.stateService.get("ApplicationIsEmbedded"),environment:this.stateService.get("PluginApp")},descriptionParams:{errorMessage:this.isTeamUser.value?me.r.limitedTeamSharing:me.r.limitedToPubliclyViewableWorkspaces}};this.modalController.show(me.t,{inputs:{dialogData:e}})},t.\u0275fac=function(e){return new(e||t)(k.gc(x.B),k.gc(me.l),k.gc(y.e),k.gc(x.Hb),k.gc(x.fb),k.gc(Sn.b))},t.\u0275cmp=k.ac({type:t,selectors:[["diagram-collab-settings"]],inputs:{authDialog:"authDialog"},features:[k.Pb],decls:4,vars:3,consts:[[1,"collab-permission-container","fx-margin-bottom-30"],[3,"currentPrivacy"],["privacyForm",""]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.hc(1,"diagram-privacy-form",1,2),k.zc(3,"async"),k.lc()),2&e&&(k.Sb(1),k.Dc("currentPrivacy",k.Ac(3,1,t.privacy)))},directives:[Ya],pipes:[a.b],styles:[""],changeDetection:0}),t}(he.e),Qa=n("GIU+"),Ja=n("xEGh");function $a(e,t){if(1&e){var n=k.nc();k.mc(0,"button",11),k.uc("click",(function(){return k.Qc(n),k.yc(3).showResetConfirmationDialog()})),k.fd(1,"Reset"),k.lc()}}var Za=function(){return{event:"dialog.share.embed.link.copy"}};function eo(e,t){if(1&e){var n=k.nc();k.mc(0,"div",6),k.mc(1,"div",7),k.hc(2,"text-input",8),k.zc(3,"async"),k.lc(),k.mc(4,"button",9),k.uc("click",(function(){return k.Qc(n),k.yc(2).copyEmbedText()})),k.fd(5,"Copy"),k.lc(),k.dd(6,$a,2,0,"button",10),k.zc(7,"async"),k.lc()}if(2&e){var r=k.yc(2);k.Sb(2),k.Dc("value",k.Ac(3,4,r.embedUrl))("readonly",!0),k.Sb(2),k.Dc("trackAction",k.Hc(8,Za)),k.Sb(2),k.Dc("ngIf",k.Ac(7,6,r.isShowResetButton))}}function to(e,t){1&e&&k.hc(0,"loading-bubbles",12)}function no(e,t){if(1&e&&(k.mc(0,"div",2),k.mc(1,"p",3),k.fd(2,"Attach the workspace as an image."),k.lc(),k.dd(3,eo,8,9,"div",4),k.zc(4,"async"),k.dd(5,to,1,0,"ng-template",null,5,k.ed),k.lc()),2&e){var n=k.Nc(6),r=k.yc();k.Sb(3),k.Dc("ngIf",k.Ac(4,2,r.isLoaded))("ngIfElse",n)}}function ro(e,t){1&e&&k.hc(0,"loading-bubbles",12)}var io=function(){function e(e,t,n,r,i,a){this.ll=e,this.commandService=t,this.dialogBoxController=n,this.state=r,this.notifierController=i,this.translate=a,this.embedUrl=new T.a(""),this.isLoaded=new T.a(!0),this.isEmbedUrlLoaded=new T.a(!1),this.isShowResetButton=new T.a(!0),this.startEmbedImageNotificationId="EMBED_IMAGE_TEXT_COPIED",this.subs=[],this.notificationMessages=new De.a(this.translate)}return e.prototype.ngOnInit=function(){this.generateEmbedImageUrl()},e.prototype.copyEmbedText=function(){var e=this;return Qa.writeText(this.embedUrl.value).then((function(){return e.showEmbedImageNotification()})).catch((function(){return e.copyTextViaFallback(e.embedUrl.value),e.showEmbedImageNotification(),Promise.resolve()}))},e.prototype.copyTextViaFallback=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},e.prototype.resetToken=function(){var e=this,t=this.state.get("CurrentDiagram");x.Jb.track("dialog.share.embed.reset"),this.isLoaded.next(!1);var n=this.dispatchResetEmbedImageToken(t).subscribe({next:function(t){var n='<img src="'+t.data.documentResetEmbed+'&type=svg">';e.embedUrl.next(n)},complete:function(){e.isLoaded.next(!0)}});this.subs.push(n)},e.prototype.dispatchFetchEmbedURL=function(e){return this.commandService.dispatch(Kr.a.fetchEmbedImageUrl,{resourceId:e}).pipe(Object(qr.a)(),Object(Mt.a)((function(e){return e&&e.resultData[0]?JSON.parse(e.resultData[0]):null})))},e.prototype.dispatchResetEmbedImageToken=function(e){return this.commandService.dispatch(Kr.a.resetEmbedImageToken,{resourceId:e}).pipe(Object(qr.a)(),Object(Mt.a)((function(e){return e&&e.resultData[0]?JSON.parse(e.resultData[0]):null})))},e.prototype.showResetConfirmationDialog=function(){var e=this,t={id:"share-diagram-embed-image-reset",heading:"DIALOG_BOX.RESET_EMBED_IMAGE.HEADING",description:"DIALOG_BOX.RESET_EMBED_IMAGE.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RESET_EMBED_IMAGE",clickHandler:function(){return e.resetToken()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){}}]};this.dialogBoxController.showDialog(t)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getPrivacyLevel=function(){return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(xt.a)(1),Object(Mt.a)((function(e){return e.privacy})))},e.prototype.generateEmbedImageUrl=function(){var e=this;this.isEmbedUrlLoaded.next(!1);var t=this.state.get("CurrentDiagram"),n=this.getPrivacyLevel().pipe(Object(S.a)((function(n){return 4===n.level?(e.embedUrl.next('<img src="'+x.m.get("EMBED_ENDPOINT_URL")+"/"+t+'?type=svg">'),e.setResetButtonVisiblity(!1),Object(Te.a)()):(e.setResetButtonVisiblity(!0),e.dispatchFetchEmbedURL(t).pipe(Object(I.a)((function(t){var n='<img src="'+t.data.document.image.svg+'">';e.embedUrl.next(n)}))))}))).subscribe({complete:function(){e.isEmbedUrlLoaded.next(!0)}});this.subs.push(n)},e.prototype.showEmbedImageNotification=function(){var e=this.notificationMessages.getNotificationMessage(De.b.EMBED_IMAGE_TEXT_COPIED);this.notifierController.show(De.b.EMBED_IMAGE_TEXT_COPIED,e.component,e.type,e.options,e.collapsed)},e.prototype.setResetButtonVisiblity=function(e){this.isShowResetButton.value!==e&&this.isShowResetButton.next(e)},e.\u0275fac=function(t){return new(t||e)(k.gc(At.a),k.gc(x.B),k.gc(x.M),k.gc(x.Hb),k.gc(x.jb),k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["embed-tab"]],inputs:{diagramID:"diagramID"},decls:4,vars:4,consts:[["class","embed-tab-container",4,"ngIf","ngIfElse"],["loadingContainer",""],[1,"embed-tab-container"],[1,"embed-tab-heading"],["class","embed-tab-copy",4,"ngIf","ngIfElse"],["loading",""],[1,"embed-tab-copy"],[1,"embed-tab-text"],[1,"hyperlink-input",3,"value","readonly"],[1,"btn-medium","btn-primary",3,"trackAction","click"],["class","btn-medium btn-primary",3,"click",4,"ngIf"],[1,"btn-medium","btn-primary",3,"click"],["color","secondary",1,"fx-margin-top-10"]],template:function(e,t){if(1&e&&(k.dd(0,no,7,4,"div",0),k.zc(1,"async"),k.dd(2,ro,1,0,"ng-template",null,1,k.ed)),2&e){var n=k.Nc(3);k.Dc("ngIf",k.Ac(1,2,t.isEmbedUrlLoaded))("ngIfElse",n)}},directives:[a.t,oe.a,Jr.a,Ja.a],pipes:[a.b],styles:[".embed-tab-copy[_ngcontent-%COMP%]{display:flex;align-items:center}.embed-tab-copy[_ngcontent-%COMP%]   .btn-medium[_ngcontent-%COMP%]{margin-left:.25rem;margin-top:.25rem;height:32px}.embed-tab-heading[_ngcontent-%COMP%]{color:#354b53}.embed-tab-text[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),e}(),ao=n("x+xc"),oo=["window"],so=["windowInner"],co=["shareFrame"];function lo(e,t){if(1&e){var n=k.nc();k.mc(0,"div",19),k.mc(1,"diagram-share-window",20),k.uc("openCollabSettings",(function(){return k.Qc(n),k.yc(4).selectedTab.next("collab-settings")})),k.lc(),k.lc()}if(2&e){var r=k.yc(4);k.Sb(1),k.Dc("authDialog",r.authDialog)}}function uo(e,t){if(1&e&&(k.mc(0,"div",19),k.hc(1,"diagram-collab-settings",21),k.lc()),2&e){var n=k.yc(4);k.Sb(1),k.Dc("authDialog",n.authDialog)}}function po(e,t){1&e&&(k.mc(0,"div",19),k.hc(1,"embed-tab"),k.lc())}var ho=function(){return{event:"dialog.share.tab.embed.click"}};function fo(e,t){if(1&e){var n=k.nc();k.xc(),k.wc(),k.mc(0,"div",13),k.mc(1,"div",14),k.mc(2,"a",15),k.uc("click",(function(){return k.Qc(n),k.yc(3).selectedTab.next("collaborators")})),k.fd(3,"SHARE.TAB_COLLAB"),k.lc(),k.mc(4,"a",15),k.uc("click",(function(){return k.Qc(n),k.yc(3).selectedTab.next("collab-settings")})),k.fd(5,"SHARE.TAB_COLLAB_SETTINGS"),k.lc(),k.mc(6,"a",16),k.uc("click",(function(){return k.Qc(n),k.yc(3).selectedTab.next("embed")})),k.fd(7,"SHARE.TAB_EMBED"),k.lc(),k.lc(),k.mc(8,"div",17),k.dd(9,lo,2,1,"div",18),k.dd(10,uo,2,1,"div",18),k.dd(11,po,2,0,"div",18),k.lc(),k.lc()}if(2&e){var r=t.ngIf;k.Sb(2),k.Yb("active","collaborators"===r),k.Sb(2),k.Yb("active","collab-settings"===r),k.Sb(2),k.Yb("active","embed"===r),k.Dc("trackAction",k.Hc(10,ho)),k.Sb(3),k.Dc("ngIf","collaborators"===r),k.Sb(1),k.Dc("ngIf","collab-settings"===r),k.Sb(1),k.Dc("ngIf","embed"===r)}}function mo(e,t){if(1&e){var n=k.nc();k.mc(0,"div",5,6),k.mc(2,"div",7),k.mc(3,"h1",8),k.fd(4,"SHARE.HEADING"),k.lc(),k.mc(5,"button",9),k.uc("click",(function(){return k.Qc(n),k.yc(2).closeWindow()})),k.xc(),k.mc(6,"svg",10),k.hc(7,"use",11),k.lc(),k.lc(),k.lc(),k.dd(8,fo,12,11,"div",12),k.zc(9,"async"),k.lc()}if(2&e){var r=k.yc(2);k.Sb(8),k.Dc("ngIf",k.Ac(9,1,r.selectedTab))}}function go(e,t){if(1&e&&(k.mc(0,"div",22),k.hc(1,"iframe",23,24),k.zc(3,"safe"),k.lc()),2&e){var n=k.yc().ngIf,r=k.yc();k.Sb(1),k.Dc("src",k.Ac(3,1,r.getSourceIframeUrl(n)),k.Sc)}}function bo(e,t){if(1&e){var n=k.nc();k.mc(0,"div",1,2),k.uc("click",(function(e){return k.Qc(n),k.yc().closeOnOverlayClick(e)})),k.dd(2,mo,10,3,"div",3),k.dd(3,go,4,3,"div",4),k.lc()}if(2&e){var r=t.ngIf,i=k.yc();k.Yb("modal-window-container",!i.isExternalDocument(r))("modal-window-container-no-bg",i.isExternalDocument(r)),k.Sb(2),k.Dc("ngIf",!i.isExternalDocument(r)),k.Sb(1),k.Dc("ngIf",i.isExternalDocument(r))}}var vo=function(e){function t(t,n,r,i,a,o){var s=e.call(this)||this;return s.modalController=t,s.ll=n,s.pm=r,s.auth=i,s.commandService=a,s.stateService=o,s.subs=[],s.selectedTab=new T.a("collaborators"),s.diagramModel=s.ll.forCurrent(!1).getDiagramOnce().pipe(Object(I.a)((function(e){s.isExternalDocument(e)&&s.stateService.set("ModalBlur",!1)}))),s.subs.push(s.listenToConnectionChanges().subscribe()),s}return Object(r.e)(t,e),t.prototype.isExternalDocument=function(e){return Boolean(e.source&&"creately"!==e.source.type)},t.prototype.getSourceIframeUrl=function(e){return x.m.sourceConfig[e.source.type].shareUrl},t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.ngOnInit=function(){var e=this;if(this.container&&this.containerInner){var t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t)}var n=this.pm.recv().subscribe((function(t){return e.handleIncomingMessages(t)}));this.subs.push(n)},t.prototype.closeWindow=function(){var e=this;if(this.container&&this.containerInner){var t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)}},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.listenToConnectionChanges=function(){var e=this;return this.stateService.changes(O.c).pipe(Object(I.a)((function(t){t!==O.c.ONLINE&&e.modalController.hide()})))},t.prototype.handleIncomingMessages=function(e){if(e&&"object"==typeof e){var t=e,n=t.source,r=t.event,i=t.data;"api/source/gdrive"===n&&("ready"===r&&this.handleShareFrameReady(i),"close"===r&&this.handleShareFrameClose(i))}},t.prototype.handleShareFrameReady=function(e){var t=this;this.diagramModel.subscribe((function(e){var n=e.source.fileId,r=t.auth.token,i=t.shareFrame.nativeElement;t.pm.sendToWindow("share",{fileId:n,token:r},i.contentWindow)}))},t.prototype.handleShareFrameClose=function(e){this.modalController.hide()},t.\u0275fac=function(e){return new(e||t)(k.gc(x.fb),k.gc(At.a),k.gc(x.ob),k.gc(Fa.a),k.gc(x.B),k.gc(x.Hb))},t.\u0275cmp=k.ac({type:t,selectors:[["share-window"]],viewQuery:function(e,t){var n;(1&e&&(k.kd(oo,!0),k.kd(so,!0),k.kd(co,!0)),2&e)&&(k.Mc(n=k.vc())&&(t.container=n.first),k.Mc(n=k.vc())&&(t.containerInner=n.first),k.Mc(n=k.vc())&&(t.shareFrame=n.first))},inputs:{authDialog:"authDialog"},features:[k.Pb],decls:2,vars:3,consts:[["class","fx-cover fx-center-all",3,"modal-window-container","modal-window-container-no-bg","click",4,"ngIf"],[1,"fx-cover","fx-center-all",3,"click"],["window",""],["class","modal-window-inner",4,"ngIf"],["class","fx-cover",4,"ngIf"],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["translate","",1,"title","title--md","title--bold"],[1,"btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],["class","modal-window-content",4,"ngIf"],[1,"modal-window-content"],[1,"share-tabs-header"],["translate","",3,"click"],["translate","",3,"trackAction","click"],[1,"share-tabs-content"],["class","share-tab-item",4,"ngIf"],[1,"share-tab-item"],[3,"authDialog","openCollabSettings"],[3,"authDialog"],[1,"fx-cover"],[1,"share-iframe",3,"src"],["shareFrame",""]],template:function(e,t){1&e&&(k.dd(0,bo,4,6,"div",0),k.zc(1,"async")),2&e&&k.Dc("ngIf",k.Ac(1,1,t.diagramModel))},directives:[a.t,y.a,Jr.a,za,Xa,io],pipes:[a.b,ao.b],styles:[".share-tabs-header[_ngcontent-%COMP%]{margin-bottom:1.25rem;padding:.625rem 1.25rem .5rem;border-bottom:1px solid #caccce}.share-tabs-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-bottom:.375rem;margin-right:1.75rem;border-bottom:.125rem solid transparent}.share-tabs-header[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:.125rem solid #08436b;color:#08436b}.share-tabs-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0c5e96}.modal-window-inner[_ngcontent-%COMP%]{padding:0;width:600px;height:475px}.share-tabs-content[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem;padding-bottom:1.25rem;height:calc(100% - 54px)}.share-tab-item[_ngcontent-%COMP%]{height:100%}  .modal-window-content{height:calc(100% - 65px)}.modal-window-heading[_ngcontent-%COMP%]{padding-top:1.5rem}.modal-window-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem;color:#354b53}.share-iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border:none}"],changeDetection:0}),t}(E.p),_o=n("dfHf"),yo=n("uDTp"),Oo=n("uIWG"),xo=n("thzy"),Eo=n("pYIu"),ko=n("TdEb"),Co=n("pVzg"),wo=n("MjP4"),So=function(){function e(e,t,n,r){this.state=e,this.ll=t,this.resources=n,this.translate=r,this.maxClientExportWidthOrHeight=6e3,this.maxServerExportWidth=32e3}return e.prototype.prepareSvgData=function(){var e=this.ll.forCurrentObserver(!0),t=this.createDiagramSVGView(e);return e.pipe(Object(xt.a)(1),Object(S.a)((function(e){return e.getDiagramOnce()})),Object(S.a)((function(e){return Object(Fi.a)(Object(Ui.a)((function(){return t.populateDiagram()})),Object(Ui.a)((function(){return t.toSvg().pipe(Object(xt.a)(1),Object(Mt.a)((function(t){return{svg:t,name:e.name,id:e.id}})))})))})))},e.prototype.getPngBlob=function(e,t){var n=this;return this.ll.forCurrent(e).getDiagramOnce().pipe(Object(S.a)((function(e){var r=0===n.state.get("Selected").length||t?e.getBounds():e.getBounds(n.state.get("Selected")),i=r.width+40,a=r.height+40;if(n.isDiagramExceededMaxClientExport(i,a))return n.fetchDiagramFromServer("png",2*i).pipe(Object(Mt.a)((function(t){return{name:e.name,blob:t}})));var o=n.state.get("Selected"),s=n.state.get("ShapeViews"),c=n.state.get("DiagramCanvas");c.removeAllChildren(),s.filter((function(e){return!!Object(Ct.isEmpty)(o)||o.includes(e.name)})).forEach((function(e){e.visible=!0,c.addChild(e)})),c.cache(r.x-20,r.y-20,i,a,2);var l=c.getCacheDataURL();c.uncache();var u=n.state.get("ActiveShapes");return c.removeAllChildren(),s.filter((function(e){return u.includes(e.name)})).forEach((function(e){e.visible=!0,c.addChild(e)})),c.update(),Object(Te.a)({name:e.name,blob:l})})),Object(Mt.a)((function(e){return{content:e.blob,name:e.name+".png",type:"image/png",format:"blob"}})))},e.prototype.isDiagramExceededMaxClientExport=function(e,t){return e>this.maxClientExportWidthOrHeight||t>this.maxClientExportWidthOrHeight},e.prototype.createDiagramSVGView=function(e){return new fe.n(e,this.resources,this.state)},e.prototype.fetchDiagramFromServer=function(e,t){var n=Math.min(this.maxServerExportWidth,Math.round(t));return this.prepareSvgData().pipe(Object(S.a)((function(t){return Object(In.a)(fetch(x.m.get("SVG_TO_RASTER_URL"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({type:e,width:n,svg:t.svg,id:t.id})}))})),Object(S.a)((function(e){return Object(In.a)(e.blob())})))},e.\u0275fac=function(t){return new(t||e)(k.qc(x.Hb),k.qc(At.a),k.qc(x.W),k.qc(y.e))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),Io=function(){return{event:"header.right.exit.click"}},To=function(){function e(e,t,n){this.state=e,this.postMessage=t,this.diagramExportService=n}return e.prototype.confirmAndClose=function(){var e=this;if("confluence"===this.state.get("PluginApp")){this.state.set("LoadingIndicatorState",{main:!0,description:"Generating Diagram Image..."}),this.diagramExportService.getPngBlob(!0,!0).subscribe((function(t){var n=t;e.postMessage.sendToParent("document:close",{documentId:e.state.get("CurrentDiagram"),dataUrl:n.content})}))}else this.redirectToUrl(wo.a.get().exitUrl)},e.prototype.redirectToUrl=function(e){window.location=e},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(x.ob),k.gc(So))},e.\u0275cmp=k.ac({type:e,selectors:[["close-document-button"]],decls:6,vars:2,consts:[["tooltip","","placement","bottom",1,"ic-btn-close","nu-btn-med","nu-btn-icon",3,"trackAction","click"],[1,"fx-center-all"],[1,"nu-icon","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-icon-exit"],["translate","",1,"tooltip-content"]],template:function(e,t){1&e&&(k.mc(0,"button",0),k.uc("click",(function(){return t.confirmAndClose()})),k.mc(1,"span",1),k.xc(),k.mc(2,"svg",2),k.hc(3,"use",3),k.lc(),k.lc(),k.wc(),k.mc(4,"span",4),k.fd(5,"TOOLTIPS.CLOSE"),k.lc(),k.lc()),2&e&&k.Dc("trackAction",k.Hc(1,Io))},directives:[j.a,Jr.a,y.a],styles:[".nu-btn-med[_ngcontent-%COMP%] { margin-top: 10px; padding-right: 0; height: 30px; }"],changeDetection:0}),e}(),Ao=["diagramNameToolTip"],Po=["callButtonTooltip"],Mo=["diagramAppStatusToolTip"],Do=["header"];function jo(e,t){1&e&&k.hc(0,"payment-failed-message")}function Ro(e,t){1&e&&(k.mc(0,"div",25),k.mc(1,"div"),k.mc(2,"span",26),k.fd(3,"HEADER_MENU.DIAGRAM_VIEW_MODE"),k.lc(),k.lc(),k.lc())}function Lo(e,t){if(1&e&&(k.mc(0,"div",27),k.hc(1,"nu-badge",28),k.zc(2,"async"),k.zc(3,"async"),k.zc(4,"async"),k.zc(5,"async"),k.lc()),2&e){var n=k.yc(3);k.Sb(1),k.Dc("badgeText",k.Ac(2,4,n.documentStatus).label)("bgColor",k.Ac(3,6,n.documentStatus).bgColor)("textColor",k.Ac(4,8,n.documentStatus).textColor)("expanded",k.Ac(5,10,n.headerExpanded))}}var No=function(){return{event:"header.left.diagramName.click"}},Bo=function(){return["InterfaceControlState","view"]};function Uo(e,t){if(1&e){var n=k.nc();k.kc(0),k.mc(1,"div",17),k.mc(2,"div"),k.mc(3,"div",18),k.zc(4,"async"),k.zc(5,"async"),k.zc(6,"async"),k.mc(7,"editable-label",19),k.uc("changedText",(function(e){return k.Qc(n),k.yc(2).renameDiagram(e)}))("click",(function(e){return k.Qc(n),k.yc(2).selectDiagramName(e)}))("focusout",(function(){return k.Qc(n),k.yc(2).diagramNameClicked=!1})),k.zc(8,"async"),k.lc(),k.mc(9,"span",20),k.fd(10,"TOOLTIPS.RENAME_DIAGRAM"),k.lc(),k.mc(11,"div",21,22),k.mc(13,"span",20),k.fd(14,"TOOLTIPS.REQUIRED_RENAME"),k.lc(),k.lc(),k.lc(),k.dd(15,Ro,4,0,"div",23),k.lc(),k.dd(16,Lo,6,12,"div",24),k.zc(17,"async"),k.lc(),k.jc()}if(2&e){var r=t.ngIf,i=k.yc(2);k.Sb(3),k.Yb("header-disabled",!k.Ac(4,9,i.userHasEditPermission)||"view"===k.Ac(5,11,i.uiState))("move-down","view"===k.Ac(6,13,i.uiState)),k.Sb(4),k.Ec("value",null==r?null:r.name),k.Dc("trackAction",k.Hc(19,No))("readonly","view"===k.Ac(8,15,i.uiState)),k.Sb(8),k.Dc("ifState",k.Hc(20,Bo)),k.Sb(1),k.Dc("ngIf","none"!==k.Ac(17,17,i.documentStatus).id)}}var Fo=function(){return{event:"header.demo.signup.click"}};function qo(e,t){if(1&e){var n=k.nc();k.mc(0,"button",29),k.uc("click",(function(){return k.Qc(n),k.yc(2).showAuthDialog()})),k.mc(1,"span",30),k.fd(2,"LABELS.SIGNUP"),k.lc(),k.mc(3,"div",31),k.mc(4,"span",32),k.fd(5,"TOOLTIPS.SIGNUP"),k.lc(),k.hc(6,"br"),k.mc(7,"p",33),k.fd(8," TOOLTIPS.SIGNUP_DESC "),k.lc(),k.lc(),k.lc()}2&e&&k.Dc("trackAction",k.Hc(1,Fo))}var Wo=function(){return{event:"header.right.upgrade.click"}};function Ho(e,t){if(1&e){var n=k.nc();k.mc(0,"button",34),k.uc("click",(function(){return k.Qc(n),k.yc(2).openUpgradePage()})),k.xc(),k.mc(1,"svg",35),k.hc(2,"use",36),k.lc(),k.wc(),k.mc(3,"span",30),k.fd(4,"LABELS.UPGRADE"),k.lc(),k.mc(5,"div",31),k.mc(6,"span",32),k.fd(7,"TOOLTIPS.UPGRADE"),k.lc(),k.hc(8,"br"),k.mc(9,"p",33),k.fd(10," TOOLTIPS.UPGRADE_DESC "),k.lc(),k.lc(),k.lc()}2&e&&k.Dc("trackAction",k.Hc(1,Wo))}function Ko(e,t){if(1&e){var n=k.nc();k.xc(),k.wc(),k.mc(0,"simple-dropdown-item",43),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc(3).export(e.id)})),k.zc(1,"async"),k.mc(2,"div",44),k.mc(3,"span",45),k.zc(4,"async"),k.fd(5),k.lc(),k.lc(),k.lc()}if(2&e){var r=t.$implicit,i=k.yc(3);k.Yb("disabled",(k.Ac(1,6,i.appConnectionStatus),!1)),k.Dc("item",r),k.Sb(3),k.Yb("disabled",0===k.Ac(4,8,i.appConnectionStatus)&&!r.offline),k.Sb(2),k.gd(r.label)}}var zo=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0,multiselectable:!1}};function Vo(e,t){if(1&e&&(k.mc(0,"abs-dropdown",37,38),k.mc(2,"simple-dropdown-button",39),k.zc(3,"async"),k.mc(4,"span",30),k.fd(5,"LABELS.EXPORT"),k.lc(),k.xc(),k.mc(6,"svg",40),k.hc(7,"use",41),k.lc(),k.lc(),k.dd(8,Ko,6,10,"simple-dropdown-item",42),k.lc()),2&e){var n=k.yc(2);k.Dc("settings",k.Hc(5,zo)),k.Sb(2),k.Dc("items",k.Ac(3,3,n.documentDropdownItems)),k.Sb(6),k.Dc("ngForOf",n.exportTypes)}}function Go(e,t){if(1&e&&(k.mc(0,"p",51),k.fd(1),k.zc(2,"async"),k.lc()),2&e){var n=k.yc(4);k.Sb(1),k.gd(k.Ac(2,1,n.tooltipDescription))}}var Yo=function(){return{event:"header.right.share.click"}};function Xo(e,t){if(1&e){var n=k.nc();k.mc(0,"button",47),k.uc("click",(function(){return k.Qc(n),k.yc(3).openShareWindow()})),k.zc(1,"async"),k.xc(),k.mc(2,"svg",48),k.hc(3,"use"),k.zc(4,"async"),k.lc(),k.wc(),k.mc(5,"span",30),k.fd(6,"LABELS.SHARE"),k.lc(),k.mc(7,"span",31),k.mc(8,"p",49),k.fd(9),k.zc(10,"async"),k.lc(),k.dd(11,Go,3,3,"p",50),k.zc(12,"async"),k.lc(),k.lc()}if(2&e){var r=k.yc(3);k.Dc("disabled",0===k.Ac(1,5,r.appConnectionStatus))("trackAction",k.Hc(13,Yo)),k.Sb(3),k.Tb("href","./assets/icons/symbol-defs.svg#nu-ic-"+k.Ac(4,7,r.shareButtonIcon),null,"xlink"),k.Sb(6),k.gd(k.Ac(10,9,r.tooltipHeading)),k.Sb(2),k.Dc("ngIf",""!==k.Ac(12,11,r.tooltipDescription))}}var Qo=function(){return["InterfaceControlState","edit"]};function Jo(e,t){1&e&&(k.kc(0),k.dd(1,Xo,13,14,"button",46),k.jc()),2&e&&(k.Sb(1),k.Dc("ifState",k.Hc(1,Qo)))}function $o(e,t){if(1&e&&k.hc(0,"ng-lottie",54),2&e){var n=k.yc(3);k.Dc("options",n.conferenceOnGoingCallConfig)}}function Zo(e,t){if(1&e&&k.hc(0,"ng-lottie",54),2&e){var n=k.yc(3);k.Dc("options",n.conferenceInComingCallConfig)}}function es(e,t){if(1&e&&(k.mc(0,"div",52),k.dd(1,$o,1,1,"ng-lottie",53),k.zc(2,"async"),k.dd(3,Zo,1,1,"ng-lottie",53),k.zc(4,"async"),k.lc()),2&e){var n=k.yc(2);k.Sb(1),k.Dc("ngIf","joined"===k.Ac(2,2,n.conferenceStatus)),k.Sb(2),k.Dc("ngIf","active"===k.Ac(4,4,n.conferenceStatus))}}function ts(e,t){1&e&&(k.mc(0,"label",30),k.fd(1,"LABELS.SAVE"),k.lc())}function ns(e,t){1&e&&(k.mc(0,"label",30),k.fd(1,"LABELS.SAVING"),k.lc())}var rs=function(){return{event:"header.right.save.click"}};function is(e,t){if(1&e){var n=k.nc();k.mc(0,"button",66),k.uc("click",(function(){return k.Qc(n),k.yc(6).openSaveDialog()})),k.zc(1,"async"),k.dd(2,ts,2,0,"label",67),k.zc(3,"async"),k.dd(4,ns,2,0,"label",67),k.zc(5,"async"),k.mc(6,"span",20),k.fd(7,"TOOLTIPS.SAVE"),k.lc(),k.lc()}if(2&e){var r=k.yc(6);k.Dc("disabled",k.Ac(1,4,r.isSaveInProgress))("trackAction",k.Hc(10,rs)),k.Sb(2),k.Dc("ngIf",!k.Ac(3,6,r.isSaveInProgress)),k.Sb(2),k.Dc("ngIf",k.Ac(5,8,r.isSaveInProgress))}}function as(e,t){1&e&&(k.kc(0),k.dd(1,is,8,11,"button",65),k.jc()),2&e&&(k.Sb(1),k.Dc("ifState",k.Hc(1,Qo)))}var os=function(){return["ApplicationIsEmbedded",!1]};function ss(e,t){1&e&&(k.kc(0),k.dd(1,as,2,2,"ng-container",63),k.hc(2,"close-document-button",64),k.jc()),2&e&&(k.Sb(1),k.Dc("ifState",k.Hc(1,os)))}function cs(e,t){if(1&e&&(k.mc(0,"div",44),k.mc(1,"span",45),k.zc(2,"async"),k.fd(3),k.lc(),k.lc()),2&e){var n=k.yc().$implicit,r=k.yc(4);k.Sb(1),k.Yb("disabled",0===k.Ac(2,3,r.appConnectionStatus)&&!n.offline),k.Sb(2),k.gd(n.label)}}function ls(e,t){if(1&e){var n=k.nc();k.mc(0,"simple-dropdown-item",43),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc(4).export(e.id)})),k.zc(1,"async"),k.dd(2,cs,4,5,"div",68),k.lc()}if(2&e){var r=t.$implicit,i=k.yc(4);k.Yb("disabled",(k.Ac(1,4,i.appConnectionStatus),!1)),k.Dc("item",r),k.Sb(2),k.Dc("ngIf",i.canExportWorkspace)}}function us(e,t){if(1&e&&(k.xc(),k.mc(0,"svg",72),k.hc(1,"use"),k.lc()),2&e){var n=k.yc(2).$implicit;k.Sb(1),k.Tb("href",n.icon,null,"xlink")}}function ds(e,t){if(1&e&&(k.mc(0,"div",44),k.zc(1,"async"),k.mc(2,"span",45),k.fd(3),k.lc(),k.dd(4,us,2,1,"svg",71),k.lc()),2&e){var n=k.yc().$implicit,r=k.yc(4);k.Yb("disabled",0===k.Ac(1,4,r.appConnectionStatus)&&!n.isAvailableOffline||!n.isEnabled),k.Sb(3),k.gd(n.label),k.Sb(1),k.Dc("ngIf",n.icon)}}function ps(e,t){1&e&&k.hc(0,"div",73)}function hs(e,t){if(1&e){var n=k.nc();k.mc(0,"simple-dropdown-item",43),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc(4).openSelectedItem(e.id)})),k.dd(1,ds,5,6,"div",69),k.dd(2,ps,1,0,"div",70),k.lc()}if(2&e){var r=t.$implicit;k.Dc("item",r),k.Sb(1),k.Dc("ngIf",!r.isSeparator&&!r.hasSubMenu),k.Sb(1),k.Dc("ngIf",r.isSeparator)}}function fs(e,t){if(1&e&&(k.kc(0),k.mc(1,"div",55),k.hc(2,"user-strip",56),k.zc(3,"async"),k.lc(),k.dd(4,ss,3,2,"ng-container",16),k.mc(5,"abs-dropdown",57,38),k.mc(7,"simple-dropdown-button",58),k.zc(8,"async"),k.xc(),k.mc(9,"svg",59),k.hc(10,"use",60),k.lc(),k.lc(),k.wc(),k.mc(11,"div",61),k.dd(12,ls,3,6,"simple-dropdown-item",42),k.lc(),k.dd(13,hs,3,3,"simple-dropdown-item",62),k.zc(14,"async"),k.lc(),k.jc()),2&e){var n=k.yc(3);k.Sb(2),k.Dc("limitCount",3)("showActiveOnly",!1)("userHasEditPermission",k.Ac(3,8,n.userHasEditPermission)),k.Sb(2),k.Dc("ifMode","plugin"),k.Sb(1),k.Dc("settings",k.Hc(14,zo)),k.Sb(2),k.Dc("items",k.Ac(8,10,n.documentDropdownItems)),k.Sb(5),k.Dc("ngForOf",n.exportTypes),k.Sb(1),k.Dc("ngForOf",k.Ac(14,12,n.documentDropdownItems))}}function ms(e,t){if(1&e&&(k.kc(0),k.dd(1,fs,15,15,"ng-container",0),k.zc(2,"async"),k.jc()),2&e){var n=k.yc(2);k.Sb(1),k.Dc("ngIf",k.Ac(2,1,n.headerExpanded))}}function gs(e,t){if(1&e){var n=k.nc();k.xc(),k.wc(),k.mc(0,"div",6),k.uc("mouseenter",(function(){return k.Qc(n),k.yc().expandAll()}))("mouseleave",(function(){return k.Qc(n),k.yc().collapseAll()})),k.mc(1,"div",7),k.dd(2,Uo,18,21,"ng-container",0),k.zc(3,"async"),k.lc(),k.mc(4,"div",8),k.dd(5,qo,9,2,"button",9),k.zc(6,"async"),k.dd(7,Ho,11,2,"button",10),k.zc(8,"async"),k.dd(9,Vo,9,6,"abs-dropdown",11),k.dd(10,Jo,2,2,"ng-container",0),k.kc(11),k.mc(12,"div"),k.zc(13,"async"),k.mc(14,"user-strip",12),k.uc("selected",(function(e){return k.Qc(n),k.yc().followUser(e)})),k.zc(15,"async"),k.zc(16,"async"),k.lc(),k.lc(),k.dd(17,es,5,6,"div",13),k.zc(18,"async"),k.jc(),k.lc(),k.mc(19,"div",14,15),k.dd(21,ms,3,3,"ng-container",16),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Sb(2),k.Dc("ngIf",k.Ac(3,13,r.diagram)),k.Sb(3),k.Dc("ngIf",k.Ac(6,15,r.isDemoUser)),k.Sb(2),k.Dc("ngIf",k.Ac(8,17,r.isFreeUser)),k.Sb(2),k.Dc("ngIf",r.canExportWorkspace),k.Sb(1),k.Dc("ngIf",r.canShareWorkspace),k.Sb(2),k.Vb(k.Ac(13,19,r.headerExpanded)?"header-collabs-active":"header-collabs-disabled"),k.Sb(2),k.Dc("limitCount",3)("showActiveOnly",!0)("userHasEditPermission",k.Ac(15,21,r.userHasEditPermission))("shouldShowToolTip",k.Ac(16,23,r.headerExpanded)),k.Sb(3),k.Dc("ngIf",!k.Ac(18,25,r.headerExpanded)),k.Sb(4),k.Dc("ifMode","default")}}var bs=function(e){return{"header--shifted":e}},vs=function(){function e(e,t,n,r,i,a,o,s,c,l,u,d,p,h,f,m,g,b,v){var _=this;this.state=e,this.route=t,this.commandService=n,this.titleService=r,this.ll=i,this.translate=a,this.conference=o,this.planPermManager=s,this.documentStatusSvc=c,this.modalController=l,this.userLocator=u,this.router=d,this.notifierController=p,this.documentManage=h,this.dialogBoxController=f,this.collabLocator=m,this.authService=g,this.postMessage=b,this.followUserService=v,this.showPaymentFailedMessage=!1,this.diagramNameClicked=!1,this.showToolTipDelay=2e3,this.hideToolTipDelay=1e3,this.saveDialogDelay=500,this.subs=[],this.diagram=this.state.changes("CurrentDiagram").pipe(Object(S.a)((function(e){return _.ll.forDiagram(e,!1).getDiagramModel().pipe(Object(Da.a)())}))),this.subs.push(this.ll.forCurrentObserver(!1).pipe(Object(S.a)((function(e){return e.getDiagramName().pipe(Object(I.a)((function(e){var t;t=e&&e.length>0?e+" - Creately":"Creately",_.titleService.setTitle(t)})))}))).subscribe()),this.roleObs=new T.a(he.g.REVIEWER),this.userHasEditPermission=new T.a(!1),this.subs.push(this.ll.forCurrentObserver(!1).pipe(Object(xt.a)(1),Object(S.a)((function(e){return e.getDiagramName().pipe(Object(S.a)((function(e){return _.userHasEditPermission.pipe(Object(bt.a)((function(e){return e})),Object(xt.a)(1),Object(S.a)((function(t){return"Untitled Workspace"===e&&t?_.showDiagramNameTooltip():(_.hideDiagramNameTooltip(),Ur.a)})))})))}))).subscribe()),this.subs.push(this.tooltipTourAutomation().subscribe()),this.documentStatus=new T.a(this.documentStatusSvc.getDocumentStatus("none")),this.documentDropdownItems=new T.a(null),this.headerExpanded=new T.a(!1),this.isSaveInProgress=new T.a(!1),this.shareButtonIcon=new T.a(""),this.tooltipHeading=new T.a(""),this.tooltipDescription=new T.a(""),this.isDemoUser=new T.a(!1),this.isFreeUser=new T.a(!1),this.isFreeUserSuspended=!1,this.maxWidth=460,this.tooltipCollapseAllOverride=!1}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(S.a)((function(e){return""===e||"start"===e?Object(Te.a)(!1):Object(Te.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLeftSidebarVisible",{get:function(){return this.state.changes("LeftSidebarVisibility")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appStatusIndicatorInfo",{get:function(){var e=this;return this.state.changes(O.c).pipe(Object(Mt.a)((function(t){return t===O.c.OFFLINE?{icon:"offline",tooltip:{heading:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.HEADING"),description:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.DESCRIPTION")}}:{icon:"online",tooltip:{heading:e.translate.instant("TOOLTIPS.ONLINE.ONLINE_HEADER_INDICATOR.HEADING"),description:e.translate.instant("TOOLTIPS.ONLINE.ONLINE_HEADER_INDICATOR.DESCRIPTION")}}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conferenceButtonTooltip",{get:function(){var e=this;return this.conference.currentConference.pipe(Object(Mt.a)((function(t){return t?"connecting"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_CONNECTING"),description:""}:"active"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.JOIN_CALL"),description:""}:"joined"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.END_CALL"),description:""}:"full"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_FULL.HEADING"),description:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_FULL.DESC")}:{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.START_CALL"),description:""}:{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.START_CALL"),description:""}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conferenceStatus",{get:function(){return this.conference.currentConference.pipe(Object(Mt.a)((function(e){return e&&"disconnected"!==e.status?e.status:"unstarted"})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmbeddedInTeams",{get:function(){return this.state.get("ApplicationIsEmbedded")&&"msteams"===this.state.get("PluginApp")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmbeddedMode",{get:function(){return this.state.get("ApplicationIsEmbedded")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uiState",{get:function(){return this.state.changes("InterfaceControlState")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(O.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableCalls",{get:function(){return!this.state.get("PluginApp")&&"default"===x.m.get("APP_MODE")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportTypes",{get:function(){var e=[{id:"png",label:"LABELS.EXPORT_OPTIONS.PNG",offline:!0},{id:"svg",label:"LABELS.EXPORT_OPTIONS.SVG",offline:!0},{id:"jpeg",label:"LABELS.EXPORT_OPTIONS.JPEG",offline:!0},{id:"csv",label:"LABELS.EXPORT_OPTIONS.CSV",offline:!0}];return"plugin"!==x.m.get("APP_MODE")&&e.push({id:"pdf",label:"LABELS.EXPORT_OPTIONS.PDF",offline:!1}),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsNewCommentsAvailable",{get:function(){return this.state.changes("NewCommentsIndicator")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canShareWorkspace",{get:function(){return"plugin"!==x.m.get("APP_MODE")&&!this.state.get("ApplicationIsEmbedded")||!(!this.state.get("ApplicationIsEmbedded")||"msteams"!==this.state.get("PluginApp"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canExportWorkspace",{get:function(){var e=window.matchMedia("only screen and (max-width: 586px)").matches;return("plugin"!==x.m.get("APP_MODE")||!this.state.get("ApplicationIsEmbedded"))&&(!e||!this.state.get("ApplicationIsEmbedded")||"msteams"!==this.state.get("PluginApp"))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.prepareConferenceCallAnimations(),this.prepareAllPossibleDocumentDropdownItems(),this.subs.push(this.conference.currentConference.pipe(Object(bt.a)((function(e){return e&&"active"===e.status})),Object(I.a)((function(){e.callButtonTooltip.show()})),Object(Ot.a)(this.hideToolTipDelay),Object(I.a)((function(){e.callButtonTooltip.hide()}))).subscribe()),this.subs.push(this.state.changes("CurrentDiagram").pipe(Object(Et.a)(),Object(S.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(S.a)((function(e){return e.getDiagramModel()})),Object(bt.a)((function(e){return null!==e})),Object(Mt.a)((function(t){return e.documentStatusSvc.getDocumentStatus(t.status)})))}))).subscribe((function(t){e.documentStatus.next(t)}))),this.subs.push(this.getTeamName().subscribe((function(t){return e.teamName=t})),this.listenToInterfaceAndPermissionChanges().subscribe(),this.listenToPermissionChange().subscribe(),this.updatePrivacy().subscribe(),this.planPermManager.isDemoUser().subscribe((function(t){return e.isDemoUser.next(t)})),this.userLocator.isUserPaused().pipe(Object(Et.a)(),Object(I.a)((function(t){return e.isUserPaused=t}))).subscribe(),this.planPermManager.isFreeUser().subscribe((function(t){return e.isFreeUser.next(t)})),this.checkIsUserSuspended(),this.listenToShowAuthDialog())},e.prototype.export=function(e){var t=this;switch(x.Jb.track("header.right.export.click",{value1Type:"type",value1:e}),e){case"png":if(this.isDemoUser.value)this.showAuthDialog();else if(this.planPermManager.check([pe.r.DIAGRAM_EXPORT_AS_PNG])){var n=+localStorage.getItem("upgradpopeskipcount");this.isFreeUser.value&&n>0?this.showExportUpgradeDialog(Kr.a.exportAsPng,pe.r.DIAGRAM_EXPORT_AS_PNG):(this.commandService.dispatch(Kr.a.exportAsPng),localStorage.setItem("upgradpopeskipcount",(n+1).toString()))}else this.showExportUpgradeDialog(Kr.a.exportAsPng,pe.r.DIAGRAM_EXPORT_AS_PNG);break;case"jpeg":if(this.isDemoUser.value)this.showAuthDialog();else if(this.planPermManager.check([pe.r.DIAGRAM_EXPORT_AS_JPEG])){n=+localStorage.getItem("upgradpopeskipcount");this.isFreeUser.value&&n>0?this.showExportUpgradeDialog(Kr.a.exportAsJpeg,pe.r.DIAGRAM_EXPORT_AS_JPEG):(this.commandService.dispatch(Kr.a.exportAsJpeg),localStorage.setItem("upgradpopeskipcount",(n+1).toString()))}else this.showExportUpgradeDialog(Kr.a.exportAsJpeg,pe.r.DIAGRAM_EXPORT_AS_JPEG);break;case"svg":this.planPermManager.check([pe.r.DIAGRAM_EXPORT_AS_SVG])?this.isUserPaused?this.showUserPauseWarningDialogBox():this.commandService.dispatch(Kr.a.exportAsSvg):this.modalController.show(me.t,{inputs:{dialogData:{id:pe.r.DIAGRAM_EXPORT_AS_SVG,iframeType:me.s.Export,buttons:[{type:"action",clickHandler:function(){},visibility:"disabled"},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}}}});break;case"csv":this.commandService.dispatch(Kr.a.exportAsCsv);break;case"xmi":this.commandService.dispatch(Kr.a.exportAsXmi);break;case"java":this.commandService.dispatch(Kr.a.exportAsCode,{type:"java"});break;case"mysql":this.commandService.dispatch(Kr.a.exportAsCode,{type:"mysql"});break;case"pdf":this.planPermManager.check([pe.r.DIAGRAM_EXPORT_AS_PDF])?this.isUserPaused?this.showUserPauseWarningDialogBox():this.subs.push(this.commandService.dispatch(Kr.a.exportAsPdf).pipe(Object(I.a)({complete:function(){return t.modalController.hide()}})).subscribe()):this.modalController.show(me.t,{inputs:{dialogData:{id:pe.r.DIAGRAM_EXPORT_AS_PDF,iframeType:me.s.Export,buttons:[{type:"action",clickHandler:function(){},visibility:"disabled"},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}}}})}},e.prototype.showAuthDialog=function(){var e=this,t=this.state.get("CurrentUser");this.userLocator.getUserData().pipe(Object(xt.a)(1),Object(S.a)((function(t){var n=t.email.includes(t.id)?{}:{email:t.email};return e.authService.showSignUp(n)}))).subscribe({complete:function(){e.handleDemoUserSignIn(e.state.get("CurrentUser")!==t)},error:function(){}})},e.prototype.prepareAllPossibleDocumentDropdownItems=function(){this.documentItems=[{id:"move-diagram",label:"HEADER_MENU.MOVE_DIAGRAM",isAvailableOffline:!1,modeAvailability:"edit",isAvailableInEmebedd:!1,isEnabled:!0,isRoleBased:!0,role:0},{id:"duplicate-diagram",label:"HEADER_MENU.DUPLICATE_DIAGRAM",isAvailableOffline:!1,modeAvailability:"both",isAvailableInEmebedd:!1,isEnabled:!0,isRoleBased:!0,role:5},{id:"archive-diagram",label:"HEADER_MENU.ARCHIVE_DIAGRAM",isAvailableOffline:!0,modeAvailability:"hidden",isAvailableInEmebedd:!0,isEnabled:!0,isRoleBased:!0,role:0},{id:"delete-diagram",label:"HEADER_MENU.DELETE_DIAGRAM",isAvailableOffline:!1,modeAvailability:"edit",isAvailableInEmebedd:!1,isEnabled:!0,isRoleBased:!0,role:0},{isSeparator:!0,modeAvailability:"edit",isAvailableInEmebedd:!1},{id:"diagram-view-mode",label:"HEADER_MENU.DIAGRAM_VIEW_MODE",isAvailableOffline:!0,modeAvailability:"edit",isAvailableInEmebedd:!1,isEnabled:!0},{id:"diagram-edit-mode",label:"HEADER_MENU.DIAGRAM_EDIT_MODE",isAvailableOffline:!0,modeAvailability:"view",isAvailableInEmebedd:!1,isEnabled:!0},{id:"diagram-offline",label:"HEADER_MENU.OFFLINE",isAvailableOffline:!1,modeAvailability:"hidden",isAvailableInEmebedd:!0,isEnabled:!0},{id:"workspace-prefs",label:"HEADER_MENU.PREFERENCES",isAvailableOffline:!0,modeAvailability:"both",isAvailableInEmebedd:!0,isEnabled:!0}]},e.prototype.openCommentPanel=function(){"diagramcomments"===this.state.get("RightSidebarPanel")?this.state.set("OpenRightSidebar",E.r.None):this.state.set("OpenRightSidebar","diagramcomments")},e.prototype.openSelectedItem=function(e){switch(e){case"workspace-prefs":this.state.set("OpenRightSidebar","diagraminfo");break;case"move-diagram":this.moveDiagram();break;case"diagram-view-mode":this.goToView();break;case"diagram-edit-mode":this.goToEdit();break;case"duplicate-diagram":this.duplicateDiagram();break;case"delete-diagram":this.showDeleteConfimationDialog()}},e.prototype.openShareWindow=function(){var e=this;this.state.get("CurrentUser")&&(this.isFreeUser.value?this.showUpgradeDialog("ShareUpgradeDialog",me.s.Share,(function(){return e.modalController.show(vo)}),!0):this.modalController.show(vo,{inputs:{authDialog:function(){return e.showAuthDialog()}}}))},e.prototype.openUpgradePage=function(){this.isFreeUserSuspended?this.modalController.show(me.f):this.state.get("ApplicationIsEmbedded")&&"msteams"===this.state.get("PluginApp")?this.postMessage.sendToParent("feature:upgrade",{}):window.open(x.m.get("PLAN_PAGE_URL"),"_blank")},e.prototype.openSaveDialog=function(){var e=this;this.isSaveInProgress.next(!0);var t=this.commandService.dispatch(ja.a.saveDocument),n=Object(Ma.a)(this.saveDialogDelay);Object(Pt.b)(t,n).subscribe({error:function(t){x.cb.error(t),e.isSaveInProgress.next(!1)},complete:function(){e.isSaveInProgress.next(!1)}})},e.prototype.followUser=function(e){if(e===this.state.get("CurrentUser"))x.Jb.track("header.collaborator.spotlightme.click"),this.followUserService.toggleSpotlight();else{var t=this.state.get("FollowUser"),n=t.userId||t;x.Jb.track("header.collaborator.select.click"),n===e?this.state.set("FollowUser","__NONE__"):this.state.set("FollowUser",{userId:e,local:!0})}},e.prototype.expandAll=function(){this.headerExpanded.next(!0);var e=this.expansionAnimation(!0).start().subscribe();this.subs.push(e)},e.prototype.collapseAll=function(){var e=this;if(!this.tooltipCollapseAllOverride){var t=this.expansionAnimation(!1).start().pipe(Object(I.a)({complete:function(){e.headerExpanded.next(!1)}})).subscribe();this.subs.push(t)}},e.prototype.renameDiagram=function(e){x.Jb.track("header.left.diagramName.change"),this.commandService.dispatch(Ae.a.renameDiagram,this.state.get("CurrentDiagram"),{name:e})},e.prototype.actionConference=function(){if(this.conference.currentConference.value&&["joined","connecting","error"].indexOf(this.conference.currentConference.value.status)>-1)this.conference.stopConference();else if(!this.conference.currentConference.value||"full"!==this.conference.currentConference.value.status){if(!this.planPermManager.check([pe.r.CREATELY_VIDEO_CONFERENCE]))throw new me.i("Joining video conference permission is denied",Na.a[pe.r.CREATELY_VIDEO_CONFERENCE]);this.conference.startConference()}},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.selectDiagramName=function(e){if(!this.diagramNameClicked){window.getSelection().removeAllRanges();var t=document.createRange();t.selectNodeContents(e.target),window.getSelection().addRange(t),e.target.focus()}this.diagramNameClicked=!this.diagramNameClicked},e.prototype.showLeftSidebar=function(){this.state.set("LeftSidebarVisibility",!this.state.get("LeftSidebarVisibility"))},e.prototype.goToEdit=function(){var e=this;this.state.set("HistoryPreviewMode",!1),this.subs.push(this.userLocator.isUserPaused().pipe(Object(xt.a)(1),Object(I.a)((function(t){t&&e.showUserPauseWarningDialogBox()}))).subscribe()),this.state.set("previousMode","view"),this.router.navigate(["../",this.state.get("CurrentDiagram"),"edit"])},e.prototype.goToView=function(){this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])},e.prototype.expansionAnimation=function(e){var t={opacity:0,maxWidth:0,transform:"translateX(-"+this.maxWidth+"px)"},n={opacity:1,maxWidth:this.maxWidth+"px",transform:"translateX(0px)"},r=new x.l({from:e?t:n,to:e?n:t,transitionProperty:"opacity, max-width, transform",easing:"ease-in-out",duration:200});return r.element=this.header.nativeElement,r},e.prototype.handleDemoUserSignIn=function(e){window.gravity.client.getCurrentUserPlan().startsWith("free")?(this.modalController.show(me.h,{inputs:{page:me.g.Plans}}),e&&this.commandService.dispatch(Kr.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe()):e&&this.commandService.dispatch(Kr.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe()},e.prototype.checkIsUserSuspended=function(){var e=this;return this.userLocator.getUserData().pipe(Object(bt.a)((function(e){return!!e&&e.suspended&&e.usageExceeded})),Object(I.a)((function(){return e.isFreeUserSuspended=!0}))).subscribe()},e.prototype.reload=function(){window.location.reload()},e.prototype.getTeamName=function(){return this.userLocator.getUserData().pipe(Object(bt.a)((function(e){return!!e})),Object(xt.a)(1),Object(Mt.a)((function(e){return e.team?e.team.organizationName:null})))},e.prototype.updatePrivacy=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(S.a)((function(t){return e.ll.forDiagram(t,!1).getDiagramModel()})),Object(bt.a)((function(e){return!!e})),Object(I.a)({next:function(t){if(t&&t.privacy&&e.privacy!==t.privacy){e.privacy=t.privacy;var n=e.getPrivacyInfo(e.privacy.level),r=e.getPrivacyDescription(n.description,e.privacy.role);e.shareButtonIcon.next(n.icon),e.tooltipHeading.next(n.heading),e.tooltipDescription.next(r)}}}))},e.prototype.getPrivacyInfo=function(e){switch(e){case me.m.SPECIFIC:return{icon:"user",heading:this.translate.instant("SHARE.SPECIFIC_USERS"),description:{edit:this.translate.instant("SHARE.SPECIFIC_USERS_DESC"),view:this.translate.instant("SHARE.SPECIFIC_USERS_DESC")}};case me.m.ANYONE_IN_TEAM_WITH_LINK:return{icon:"company-link",heading:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")}};case me.m.ANYONE_IN_TEAM:return{icon:"company",heading:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName,description:{edit:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_VIEW")}};case me.m.ANYONE_WITH_LINK:return{icon:"user-link",heading:this.translate.instant("SHARE.ANYONE_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")}};case me.m.PUBLIC:return{icon:"globe",heading:this.translate.instant("SHARE.PUBLIC"),description:{edit:this.translate.instant("SHARE.PUBLIC_DESC_VIEW"),view:this.translate.instant("SHARE.PUBLIC_DESC_VIEW")}}}},e.prototype.getPrivacyDescription=function(e,t){switch(t){case he.g.EDITOR:return e.edit;case he.g.REVIEWER:return e.view}},e.prototype.moveDiagram=function(){var e=this;this.diagram.pipe(Object(xt.a)(1),Object(I.a)((function(t){e.modalController.show(Ua.a,{inputs:{diagramIds:[t.id],name:t.name,sourceProjectId:t.project}})}))).subscribe()},e.prototype.showDiagramNameTooltip=function(){var e=this;return Object(Te.a)({}).pipe(Object(Ot.a)(this.showToolTipDelay),Object(bt.a)((function(t){return!!e.diagramNameToolTip})),Object(I.a)((function(){return e.diagramNameToolTip.show()})),Object(Ot.a)(this.hideToolTipDelay),Object(bt.a)((function(t){return!!e.diagramNameToolTip})),Object(I.a)((function(){return e.diagramNameToolTip.hide()})))},e.prototype.hideDiagramNameTooltip=function(){this.diagramNameToolTip&&this.diagramNameToolTip.hide()},e.prototype.listenToShowAuthDialog=function(){var e=this;return this.state.changes("showAuthDialog").pipe(Object(I.a)((function(t){t&&(e.state.set("showAuthDialog",!1),e.showAuthDialog())}))).subscribe()},e.prototype.showDeleteConfimationDialog=function(){var e=this;this.diagram.pipe(Object(xt.a)(1),Object(I.a)((function(t){e.documentManage.showDiagramDeleteConfimationDialog(t.id,!1)}))).subscribe()},e.prototype.showExportUpgradeDialog=function(e,t){var n=this,r={id:t,iframeType:me.s.Export,buttons:[{type:"action",clickHandler:function(){n.commandService.dispatch(e)}},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};this.modalController.show(me.t,{inputs:{dialogData:r}})},e.prototype.showUpgradeDialog=function(e,t,n,r){void 0===n&&(n=function(){}),void 0===r&&(r=!1);var i={id:e,iframeType:t,buttons:[{type:"action",clickHandler:n,visibility:r?"enable":"disabled"},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};this.modalController.show(me.t,{inputs:{dialogData:i}})},e.prototype.duplicateDiagram=function(){var e=this;this.diagram.pipe(Object(xt.a)(1),Object(I.a)((function(t){e.documentManage.duplicateDiagram(t.id)}))).subscribe()},e.prototype.listenToInterfaceAndPermissionChanges=function(){var e=this;return Object(Pt.b)([this.state.changes("InterfaceControlState"),this.roleObs]).pipe(Object(Et.a)((function(e,t){return e[0]===t[0]&&e[1]===t[1]})),Object(I.a)((function(){var t=e.state.get("InterfaceControlState"),n=e.documentItems.filter((function(n){if(e.state.get("ApplicationIsEmbedded")&&!n.isAvailableInEmebedd){if("msteams"===e.state.get("PluginApp")&&["diagram-view-mode","diagram-edit-mode"].includes(n.id)){var r=!n.isRoleBased||e.roleObs.value<=n.role;return(n.modeAvailability===t||"both"===n.modeAvailability)&&r}return!1}var i=!n.isRoleBased||e.roleObs.value<=n.role;return(n.modeAvailability===t||"both"===n.modeAvailability)&&i}));e.documentDropdownItems.next(n)})))},e.prototype.showUserPauseWarningDialogBox=function(){var e=this,t={id:"account-paused-renew",heading:"DIALOG_BOX.ACCOUNT_PAUSED.HEADING",description:"DIALOG_BOX.ACCOUNT_PAUSED.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RENEW",clickHandler:function(){return e.showTeamPortal()}}]};this.modalController.show(me.q,{inputs:{dialogData:t}})},e.prototype.showTeamPortal=function(){this.modalController.show(me.n)},e.prototype.prepareConferenceCallAnimations=function(){this.conferenceOnGoingCallConfig={autoplay:!0,loop:!0,path:"./assets/anim/conference/call_ongoing.json"},this.conferenceInComingCallConfig={autoplay:!0,loop:10,path:"./assets/anim/conference/call_incoming.json"}},e.prototype.listenToPermissionChange=function(){var e=this;return this.diagram.pipe(Object(bt.a)((function(e){return!!e})),Object(S.a)((function(t){return e.collabLocator.getCollabsSortedIgnoringOnline(t.id).pipe(Object(S.a)((function(t){var n=t.find((function(t){return t.id===e.state.get("CurrentUser")}));return e.getPrivacyLevel().pipe(Object(Mt.a)((function(t){if(t&&t.level>=3||void 0!==n&&n.roleSortOrderWithoutOnline<he.E.UNREG_EDITOR){var r=!!n&&n.isRegistered&&[he.g.OWNER,he.g.EDITOR].includes(n.role);e.roleObs.next(n?n.role:t.role),e.userHasEditPermission.next(r)}return[]})))})))})))},e.prototype.getPrivacyLevel=function(){return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(xt.a)(1),Object(Mt.a)((function(e){return e.privacy})))},e.prototype.tooltipTourAutomation=function(){var e=this;return this.state.changes("TooltipAutomateState").pipe(Object(I.a)((function(t){t===Vr.e.expandHeader?(e.tooltipCollapseAllOverride=!0,e.expandAll()):t===Vr.e.collapseHeader&&(e.tooltipCollapseAllOverride=!1,e.collapseAll())})))},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(b.a),k.gc(x.B),k.gc(va.c),k.gc(At.a),k.gc(y.e),k.gc(wt),k.gc(me.l),k.gc(La.a),k.gc(x.fb),k.gc(me.x),k.gc(b.d),k.gc(x.jb),k.gc(Ra.a),k.gc(x.M),k.gc(_t.a),k.gc(me.a),k.gc(x.ob),k.gc(Ba.a))},e.\u0275cmp=k.ac({type:e,selectors:[["header-layout"]],viewQuery:function(e,t){var n;(1&e&&(k.kd(Ao,!0,E.t),k.kd(Po,!0,E.t),k.kd(Mo,!0,E.t),k.kd(Do,!0,k.r)),2&e)&&(k.Mc(n=k.vc())&&(t.diagramNameToolTip=n.first),k.Mc(n=k.vc())&&(t.callButtonTooltip=n.first),k.Mc(n=k.vc())&&(t.diagramAppStatusToolTip=n.first),k.Mc(n=k.vc())&&(t.header=n.first))},inputs:{showPaymentFailedMessage:"showPaymentFailedMessage"},features:[k.Rb([E.t,E.f])],decls:9,vars:13,consts:[[4,"ngIf"],[1,"header","fx-pointer-events-auto",3,"ngClass"],[1,"header-hamburger","white","btn-icon",3,"click"],[1,"nu-icon","nu-ic-floating-menu"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-floating-menu"],["class","header-main white",3,"mouseenter","mouseleave",4,"ngIf"],[1,"header-main","white",3,"mouseenter","mouseleave"],[1,"header-titles-container"],[1,"header-menu-container"],["class","btn-primary btn-medium header-signup body","data-testid","singup-button","placement","bottom","tooltip","",3,"trackAction","click",4,"ngIf"],["class","header-action-btns-upgrade btn-medium btn-primary body","data-testid","upgrade-button","placement","bottom","tooltip","",3,"trackAction","click",4,"ngIf"],["class","export-drop-down",3,"settings",4,"ngIf"],[3,"limitCount","showActiveOnly","userHasEditPermission","shouldShowToolTip","selected"],["class","collab-call",4,"ngIf"],[1,"header-expandable-section"],["header",""],[4,"ifMode"],[1,"fx-center-vertical"],["tooltip","","placement","bottom",1,"header-document-title-label"],[3,"trackAction","value","readonly","changedText","click","focusout"],["translate","",1,"tooltip-content"],["tooltip","","openOnHover","false","placement","bottom"],["diagramNameToolTip",""],["class","header-view-mode-container fx-center-vertical",4,"ifState"],["class","status-badge",4,"ngIf"],[1,"header-view-mode-container","fx-center-vertical"],["translate","",1,"header-view-mode-label","overline"],[1,"status-badge"],[3,"badgeText","bgColor","textColor","expanded"],["data-testid","singup-button","placement","bottom","tooltip","",1,"btn-primary","btn-medium","header-signup","body",3,"trackAction","click"],["translate",""],[1,"tooltip-content"],["translate","",1,"tooltip-header"],["translate","",1,"header-upgrade-desc","tooltip-body"],["data-testid","upgrade-button","placement","bottom","tooltip","",1,"header-action-btns-upgrade","btn-medium","btn-primary","body",3,"trackAction","click"],[1,"nu-icon","nu-icon-xsmall","nu-ic-premium-crown"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-premium-crown"],[1,"export-drop-down",3,"settings"],["dropdownMenu",""],["ddbutton","",1,"btn-medium","btn-secondary","export-btn",3,"items"],[1,"nu-icon","dropdown-arrow"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-fill"],["dditem","",3,"item","disabled","click",4,"ngFor","ngForOf"],["dditem","",3,"item","click"],[1,"header-dropdown-item"],["translate","",1,"body"],["class","btn-medium btn-primary header-share-button body","data-testid","share-button","placement","bottom","tooltip","",3,"disabled","trackAction","click",4,"ifState"],["data-testid","share-button","placement","bottom","tooltip","",1,"btn-medium","btn-primary","header-share-button","body",3,"disabled","trackAction","click"],[1,"nu-icon","nu-icon-small","nu-ic-share","share","white","header-icon"],[1,"tooltip-header"],["class","tooltip-body",4,"ngIf"],[1,"tooltip-body"],[1,"collab-call"],["class","conference-anim",3,"options",4,"ngIf"],[1,"conference-anim",3,"options"],[1,"header-collabs-offline"],[3,"limitCount","showActiveOnly","userHasEditPermission"],["alignment","left",1,"header-dropdown-menu",3,"settings"],["ddbutton","",3,"items"],[1,"nu-icon","nu-icon-med","fx-margin-left-10"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],[1,"only-mobile"],["dditem","",3,"item","click",4,"ngFor","ngForOf"],[4,"ifState"],[1,"fx-left"],["class","header-action-btns-save btn-small nu-btn-icon-text btn-primary fx-left","placement","bottom","tooltip","",3,"disabled","trackAction","click",4,"ifState"],["placement","bottom","tooltip","",1,"header-action-btns-save","btn-small","nu-btn-icon-text","btn-primary","fx-left",3,"disabled","trackAction","click"],["translate","",4,"ngIf"],["class","header-dropdown-item",4,"ngIf"],["class","header-dropdown-item",3,"disabled",4,"ngIf"],["class","separator-line",4,"ngIf"],["class","dropdown-item-icon light-nv-blue",4,"ngIf"],[1,"dropdown-item-icon","light-nv-blue"],[1,"separator-line"]],template:function(e,t){1&e&&(k.dd(0,jo,1,0,"payment-failed-message",0),k.mc(1,"div",1),k.zc(2,"async"),k.mc(3,"div",2),k.uc("click",(function(){return t.showLeftSidebar()})),k.zc(4,"async"),k.xc(),k.mc(5,"svg",3),k.hc(6,"use",4),k.lc(),k.lc(),k.dd(7,gs,22,27,"div",5),k.zc(8,"async"),k.lc()),2&e&&(k.Dc("ngIf",t.showPaymentFailedMessage),k.Sb(1),k.Dc("ngClass",k.Ic(11,bs,t.isEmbeddedInTeams&&!k.Ac(2,5,t.isLeftSidebarVisible))),k.Sb(2),k.Yb("hidden",k.Ac(4,7,t.isLeftSidebarVisible)||t.isEmbeddedMode&&!t.isEmbeddedInTeams),k.Sb(4),k.Dc("ngIf",k.Ac(8,9,t.appDisabledState)))},directives:[a.t,a.q,ei,_o.a,yo.a,j.a,Oo.a,Jr.a,y.a,ti.a,xo.a,Eo.a,ko.a,a.s,Co.a,ve.b,To],pipes:[a.b],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.header[_ngcontent-%COMP%]{display:flex;align-items:stretch}.header--shifted[_ngcontent-%COMP%], .header-hamburger[_ngcontent-%COMP%]{margin-left:1.5rem}.header-hamburger[_ngcontent-%COMP%]{box-shadow:0 1px 4px rgba(0,0,0,.2),0 1px 2px rgba(0,0,0,.1);background-color:#fff!important;width:50px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:.25rem}.header-hamburger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:.125rem}@media only screen and (max-width:568px){.header-hamburger[_ngcontent-%COMP%]{display:none}}.header-main[_ngcontent-%COMP%]{box-shadow:0 1px 4px rgba(0,0,0,.2),0 1px 2px rgba(0,0,0,.1);padding:.375rem 1rem;margin-left:1rem;display:inline-flex;align-items:center;border-radius:6px;height:50px}.header-expandable-section[_ngcontent-%COMP%]{display:inline-flex;align-items:center;width:auto;transition:all;z-index:0}.fx-center-vertical[_ngcontent-%COMP%]{height:50px}.header-document-title-label[_ngcontent-%COMP%]{margin-right:1.25rem;width:230px}.header-document-title-label[_ngcontent-%COMP%]  .editable-label{width:230px;text-overflow:ellipsis;font-size:1rem}.header-document-title-label[_ngcontent-%COMP%]  .editable-label::selection{background:#d5e8f4}.header-document-title-label[_ngcontent-%COMP%]  .editable-label::-moz-selection{background:#d5e8f4}.header-document-title-label.move-down[_ngcontent-%COMP%]{padding-top:.875rem}.header-disabled[_ngcontent-%COMP%]{pointer-events:none}.header-menu-container[_ngcontent-%COMP%], .header-titles-container[_ngcontent-%COMP%]{display:flex;background-color:#fff;z-index:1}.header-menu-container[_ngcontent-%COMP%]{align-items:center}@media only screen and (max-width:568px){.header-menu-container[_ngcontent-%COMP%]{display:none}}.header-collabs-offline[_ngcontent-%COMP%]{margin-top:.125rem}@media only screen and (max-width:568px){.header-collabs-offline[_ngcontent-%COMP%]{display:none}}.header-collabs-disabled[_ngcontent-%COMP%]{margin-top:.125rem;pointer-events:none}@media only screen and (max-width:568px){.header-collabs-disabled[_ngcontent-%COMP%]{display:none}}.header-collabs-active[_ngcontent-%COMP%]{margin-top:.125rem}@media only screen and (max-width:568px){.header-collabs-active[_ngcontent-%COMP%]{display:none}}.header-bulb[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#04263d}.header-secondary-title[_ngcontent-%COMP%]{padding-left:1px}.header-app-status-indicator[_ngcontent-%COMP%]{height:11px;margin-left:-.375rem}.header-drive-icon[_ngcontent-%COMP%]{margin-right:.375rem}.header-call-btn[_ngcontent-%COMP%]{padding:0;border-radius:100%;border:#fff;width:20px;height:20px;background-color:transparent}.call-btn-container[_ngcontent-%COMP%]{margin-right:.625rem;margin-left:.625rem;padding:.375rem .5rem;border:.5px solid #95a8af;border-radius:6px;flex-direction:row;align-items:center;width:40px;height:36px}.spinner-container[_ngcontent-%COMP%]{margin-top:-5px}.call-button-tooltip[_ngcontent-%COMP%]{min-width:90px}.status-badge[_ngcontent-%COMP%]{margin-right:.625rem;margin-left:.25rem}.hidden[_ngcontent-%COMP%]{display:none}.conference-anim[_ngcontent-%COMP%]{opacity:1;margin-left:-15px;margin-right:-15px;width:80px;height:80px;display:inline-block;align-items:center}.start-call[_ngcontent-%COMP%]{height:25px;width:25px}.end-call-div[_ngcontent-%COMP%]{position:relative}.joined-call-icon[_ngcontent-%COMP%]{opacity:1;position:absolute}.end-call-icon[_ngcontent-%COMP%]{opacity:0;position:absolute;display:inline-block}.end-call-div[_ngcontent-%COMP%]:hover   .end-call-icon[_ngcontent-%COMP%]{opacity:1}.end-call-div[_ngcontent-%COMP%]:hover   .joined-call-icon[_ngcontent-%COMP%]{opacity:0}.end-call[_ngcontent-%COMP%]{margin-top:.75rem;margin-left:.75rem;width:45px;height:45px}.export-drop-down[_ngcontent-%COMP%]{margin-left:.5rem;position:relative}.header-dropdown-item.only-mobile[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:568px){.header-dropdown-item.only-mobile[_ngcontent-%COMP%]{display:block}}.separator-line[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem;width:auto;border:1px solid #f1f4fa}.dropdown-item-icon[_ngcontent-%COMP%]{margin-top:.125rem;height:10px;width:10px;float:right}.dropdown-arrow[_ngcontent-%COMP%]{margin-left:.125rem;transform:rotate(90deg);fill:#04263d;width:14px}.export-btn[_ngcontent-%COMP%]{padding-left:1rem;width:90px;display:flex;align-items:center}.header-view-mode-container[_ngcontent-%COMP%]{padding:0 .5rem;margin:0 .5rem;display:flex;flex-direction:row;align-items:center;position:static;width:73px;height:15px;left:0;top:0;background:#64767d;border-radius:14px 14px 2px 2px;flex:none;order:0;flex-grow:0}.header-view-mode-label[_ngcontent-%COMP%]{color:#fff}.header-dropdown-menu[_ngcontent-%COMP%]{position:relative}.header-share-button[_ngcontent-%COMP%]{line-height:1.25rem;margin-left:.5rem;margin-right:.5rem;padding-left:.5rem;min-width:90px}.header-action-btns-upgrade[_ngcontent-%COMP%]{line-height:1.25rem;margin-left:.5rem;min-width:109px}.header-signup[_ngcontent-%COMP%]{line-height:1.25rem;min-width:80px}.nu-ic-premium-crown[_ngcontent-%COMP%]{margin-right:.5rem}.nu-ic-share[_ngcontent-%COMP%]{margin-right:.25rem}.header-icon[_ngcontent-%COMP%]{margin-top:-.125rem}"],changeDetection:0}),e}(),_s=function(){function e(e,t){this.modalController=e,this.translate=t}return e.prototype.showClosePage=function(){this.modalController.show(Qr.a,{inputs:{page:"close"}})},e.\u0275fac=function(t){return new(t||e)(k.gc(x.fb),k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["account-pause-message"]],decls:14,vars:6,consts:[[1,"account-pause-container","fx-pointer-events-auto"],[1,"account-pause-inner","fx-center-vertical"],[1,"account-pause-icon"],[1,"nu-icon","nu-icon-med","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-danger-fill"],[1,"account-pause-text"],[1,"account-pause-auth-link","white",3,"click"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.mc(2,"div",2),k.xc(),k.mc(3,"svg",3),k.hc(4,"use",4),k.lc(),k.lc(),k.wc(),k.mc(5,"div",5),k.mc(6,"span"),k.fd(7),k.zc(8,"async"),k.lc(),k.mc(9,"span"),k.mc(10,"b"),k.mc(11,"a",6),k.uc("click",(function(){return t.showClosePage()})),k.fd(12),k.zc(13,"async"),k.lc(),k.lc(),k.lc(),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(7),k.hd(" ",k.Ac(8,2,t.translate.get("ACCOUNT_PAUSED_MESSAGES.HEADER_MSG_PART1_SUB1"))," "),k.Sb(5),k.gd(k.Ac(13,4,t.translate.get("ACCOUNT_PAUSED_MESSAGES.BUTTONS"))))},pipes:[a.b],styles:[".account-pause-container[_ngcontent-%COMP%]{color:#510606;height:32px;position:absolute;width:100%;top:0;z-index:1;background-color:#fde3e3;display:flex;flex-direction:row;align-items:center;padding:2px 16px 2px 8px;gap:10px;font-style:normal;font-weight:400;font-size:14px;line-height:24px}.account-pause-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-weight:500;color:#1381cd;padding-left:16px}.account-pause-inner[_ngcontent-%COMP%]{height:100%}.account-pause-icon[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.account-pause-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:8.5px}"],changeDetection:0}),e}(),ys=n("09KV");function Os(e,t){1&e&&(k.mc(0,"span"),k.fd(1),k.zc(2,"translate"),k.lc()),2&e&&(k.Sb(1),k.hd(" ",k.Ac(2,1,"HISTORY_PREVIEW_MESSAGES.HEADER_MSG_LATEST")," "))}function xs(e,t){1&e&&(k.fd(0),k.zc(1,"translate")),2&e&&k.hd(" ",k.Ac(1,1,"HISTORY_PREVIEW_MESSAGES.HEADER_MSG_OLDER")," ")}var Es=function(){function e(e){this.state=e,this.latestVersion=this.state.changes("CurrentSnapshot").pipe(Object(Mt.a)((function(e){return"__CURRENT__"===e})))}return e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb))},e.\u0275cmp=k.ac({type:e,selectors:[["history-preview-message"]],decls:10,vars:4,consts:[[1,"history-preview-message-container","primary"],["data-testid","signup-banner",1,"history-preview-message-inner","fx-center-vertical"],[1,"history-preview-message-icon"],[1,"nu-icon","nu-icon-small","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],[1,"history-preview-message-text","body"],[4,"ngIf","ngIfElse"],["elseMessage",""]],template:function(e,t){if(1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.mc(2,"div",2),k.xc(),k.mc(3,"svg",3),k.hc(4,"use",4),k.lc(),k.lc(),k.wc(),k.mc(5,"div",5),k.dd(6,Os,3,3,"span",6),k.zc(7,"async"),k.dd(8,xs,2,3,"ng-template",null,7,k.ed),k.lc(),k.lc(),k.lc()),2&e){var n=k.Nc(9);k.Sb(6),k.Dc("ngIf",k.Ac(7,2,t.latestVersion))("ngIfElse",n)}},directives:[a.t],pipes:[a.b,y.d],styles:[".history-preview-message-container[_ngcontent-%COMP%]{color:#fff;height:30px;top:0;width:100%;z-index:1}.history-preview-message-inner[_ngcontent-%COMP%]{height:100%}.history-preview-message-icon[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem}"],changeDetection:0}),e}(),ks=n("DL1I");function Cs(e,t){if(1&e){var n=k.nc();k.mc(0,"li",6),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc(2).onPenTypeChange(e)})),k.mc(1,"div"),k.xc(),k.mc(2,"svg",7),k.hc(3,"use",8),k.lc(),k.mc(4,"svg",9),k.hc(5,"use"),k.lc(),k.lc(),k.lc()}if(2&e){var r=t.$implicit,i=k.yc(2);k.Sb(1),k.Yb("not-selected",!(null!=r&&r.selected)),k.Sb(4),k.Tb("href",i.getIconHref(r),null,"xlink")}}function ws(e,t){if(1&e&&(k.mc(0,"div"),k.mc(1,"ul",4),k.dd(2,Cs,6,3,"li",5),k.lc(),k.lc()),2&e){var n=t.ngIf;k.Sb(2),k.Dc("ngForOf",n)}}function Ss(e,t){if(1&e){var n=k.nc();k.mc(0,"toolbar-shape-style-dropdown-item",12),k.uc("changed",(function(e){return k.Qc(n),k.yc(2).onColorChange(e)})),k.lc()}if(2&e){var r=t.$implicit;k.Dc("item",r)("isSelected",null==r?null:r.selected)}}function Is(e,t){if(1&e&&(k.mc(0,"div",10),k.mc(1,"ul",4),k.dd(2,Ss,1,2,"toolbar-shape-style-dropdown-item",11),k.lc(),k.lc()),2&e){var n=t.ngIf;k.Sb(2),k.Dc("ngForOf",n)}}var Ts=function(){function e(e,t){this.state=e,this.cs=t,this.colors=new T.a(null),this.penTypes=new T.a(null),this.prepareDropdown()}return e.prototype.close=function(){this.cs.dispatch(Kr.a.changeMouseControlState,{state:Vr.b.Normal})},e.prototype.onKeydown=function(e){"Escape"===e.key&&this.close()},e.prototype.onPenTypeChange=function(e){x.Jb.track("toolbar.freehand.lineType.change",{value1Type:"lineType",value1:e.id});var t=this.getPenTypes(),n=t.findIndex((function(t){return t.id===e.id}));t[n].selected=!0;var i=this.state.get("FreeHandLastUsedItem");this.state.set("FreeHandLastUsedItem",{state:i.state,styles:Object(r.a)(Object(r.a)({},i.styles),e.styles)}),this.penTypes.next(t)},e.prototype.onColorChange=function(e){var t=this.getColors(),n=t.findIndex((function(t){return t.id===e}));if(n>-1){var i=t[n];i.selected=!0;var a=this.state.get("FreeHandLastUsedItem");x.Jb.track("toolbar.freehand.color.change",{value1Type:"colorName",value1:e,value2Type:"colorCode",value2:i.fillColor}),this.state.set("FreeHandLastUsedItem",{state:a.state,styles:Object(r.a)(Object(r.a)({},a.styles),{stroke:i.fillColor})})}this.colors.next(t)},e.prototype.getIconHref=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e.itemIcon.value},e.prototype.prepareDropdown=function(){var e=this.state.get("FreeHandLastUsedItem").styles,t=this.getPenTypes();t.forEach((function(t){Object.keys(t.styles).every((function(n){return t.styles[n]===e[n]}))&&(t.selected=!0)}));var n=this.getColors();n.forEach((function(t){t.fillColor===e.stroke&&(t.selected=!0)})),this.colors.next(n),this.penTypes.next(t)},e.prototype.getPenTypes=function(){return[{id:"pencil",itemIcon:{type:"svg",value:"pencil-line"},tooltip:"Pencil",styles:{"stroke-width":2,"stroke-dasharray":"0, 0"}},{id:"pen",itemIcon:{type:"svg",value:"pen-line"},value:"connectors.bundle.js#ConnectorStraight",tooltip:"Pen",styles:{"stroke-width":4,"stroke-dasharray":"0, 0"}},{id:"pencil-dotted",itemIcon:{type:"svg",value:"pencil-dotted"},tooltip:"Pencil Dotted Line",styles:{"stroke-width":2,"stroke-dasharray":"5, 5"}},{id:"pen-dotted",itemIcon:{type:"svg",value:"pen-dotted"},tooltip:"Pen Dotted Line",styles:{"stroke-width":4,"stroke-dasharray":"10, 5"}}]},e.prototype.getColors=function(){return[Object(r.a)({id:"white"},new ks.a(2,"#CACECC",[0,0],1,"#FFFFFF",pe.h.Solid,void 0,1,"#FFFFFF")),Object(r.a)({id:"grey"},new ks.a(2,"#FFFFFF",[0,0],1,"#8F8F8F",pe.h.Solid,void 0,1,"#8F8F8F")),Object(r.a)({id:"matterhorn"},new ks.a(2,"#FFFFFF",[0,0],1,"#4E4C4C",pe.h.Solid,void 0,1,"#4E4C4C")),Object(r.a)({id:"black"},new ks.a(2,"#FFFFFF",[0,0],1,"#000000",pe.h.Solid,void 0,1,"#000000")),Object(r.a)({id:"burnt-crimson"},new ks.a(2,"#FFFFFF",[0,0],1,"#612425",pe.h.Solid,void 0,1,"#612425")),Object(r.a)({id:"sea-buckthorn"},new ks.a(2,"#FFFFFF",[0,0],1,"#EB9052",pe.h.Solid,void 0,1,"#EB9052")),Object(r.a)({id:"matisse"},new ks.a(2,"#FFFFFF",[0,0],1,"#416178",pe.h.Solid,void 0,1,"#416178")),Object(r.a)({id:"killarney"},new ks.a(2,"#FFFFFF",[0,0],1,"#527D50",pe.h.Solid,void 0,1,"#527D50")),Object(r.a)({id:"night-shade"},new ks.a(2,"#FFFFFF",[0,0],1,"#A03349",pe.h.Solid,void 0,1,"#A03349")),Object(r.a)({id:"cream-can"},new ks.a(2,"#FFFFFF",[0,0],1,"#EFBB4D",pe.h.Solid,void 0,1,"#EFBB4D")),Object(r.a)({id:"seagull"},new ks.a(2,"#FFFFFF",[0,0],1,"#6AAFCC",pe.h.Solid,void 0,1,"#6AAFCC")),Object(r.a)({id:"green-smoke"},new ks.a(2,"#FFFFFF",[0,0],1,"#9EAB5D",pe.h.Solid,void 0,1,"#9EAB5D")),Object(r.a)({id:"alizarin"},new ks.a(2,"#FFFFFF",[0,0],1,"#D82837",pe.h.Solid,void 0,1,"#D82837")),Object(r.a)({id:"orchid"},new ks.a(2,"#FFFFFF",[0,0],1,"#AD67C3",pe.h.Solid,void 0,1,"#AD67C3")),Object(r.a)({id:"cornflower-blue"},new ks.a(2,"#FFFFFF",[0,0],1,"#6D88F0",pe.h.Solid,void 0,1,"#6D88F0"))]},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(x.B))},e.\u0275cmp=k.ac({type:e,selectors:[["free-hand-toolbar"]],decls:6,vars:6,consts:[[1,"fx-pointer-events-auto","fht-dd-container"],[4,"ngIf"],[1,"separator"],["class","fht-dd-styles-container",4,"ngIf"],[1,"abs-dropdown-items-container"],["tabindex","-1","class","abs-dropdown-item fx-center-all",3,"click",4,"ngFor","ngForOf"],["tabindex","-1",1,"abs-dropdown-item","fx-center-all",3,"click"],[1,"nu-icon","dropdown-item-select-tick"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],[1,"nu-icon","light-nv-blue","nu-icon-width"],[1,"fht-dd-styles-container"],[3,"item","isSelected","changed",4,"ngFor","ngForOf"],[3,"item","isSelected","changed"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.dd(1,ws,3,1,"div",1),k.zc(2,"async"),k.hc(3,"div",2),k.dd(4,Is,3,1,"div",3),k.zc(5,"async"),k.lc()),2&e&&(k.Sb(1),k.Dc("ngIf",k.Ac(2,2,t.penTypes)),k.Sb(3),k.Dc("ngIf",k.Ac(5,4,t.colors)))},directives:[a.t,a.s,un.a],pipes:[a.b],styles:[".fht-dd-container[_ngcontent-%COMP%]{box-shadow:0 6px 10px rgba(0,0,0,.15),0 2px 3px rgba(0,0,0,.1);background-color:#fff;border-radius:.5rem;margin-left:22.5rem;bottom:1.25rem;border-width:1px;position:absolute;z-index:2;display:inline-block}.fht-dd-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.not-selected[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{color:transparent}.not-selected[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#d5e8f4}.fht-dd-styles-container[_ngcontent-%COMP%]{display:block;width:130px;align-items:normal;flex-wrap:wrap;padding:.625rem}.fht-dd-styles-container[_ngcontent-%COMP%]  .tss-dd-item-container{display:inline-block}.separator[_ngcontent-%COMP%]{height:1px;width:100%;background:#f1f4fa;margin:.25rem 0 .5rem}.nu-icon-width[_ngcontent-%COMP%]{width:80px!important}"],changeDetection:0}),e}();function As(e,t){if(1&e){var n=k.nc();k.mc(0,"div",2),k.xc(),k.mc(1,"svg",3),k.hc(2,"use",4),k.lc(),k.wc(),k.mc(3,"span",5),k.fd(4," STORAGE_EXCEEDED.STORAGE_LIMIT "),k.lc(),k.mc(5,"button",6),k.uc("click",(function(){return k.Qc(n),k.yc().showPlanPage()})),k.fd(6,"STORAGE_EXCEEDED.CLICK_HERE"),k.lc(),k.lc()}}function Ps(e,t){if(1&e){var n=k.nc();k.mc(0,"div",2),k.xc(),k.mc(1,"svg",7),k.hc(2,"use",4),k.lc(),k.wc(),k.mc(3,"span",5),k.mc(4,"b",5),k.fd(5,"STORAGE_EXCEEDED.ACCOUNT_PAUSED "),k.lc(),k.fd(6,"STORAGE_EXCEEDED.UPGRATE"),k.lc(),k.mc(7,"button",6),k.uc("click",(function(){return k.Qc(n),k.yc().showPlanPage()})),k.fd(8,"STORAGE_EXCEEDED.CLICK_HERE"),k.lc(),k.lc()}}var Ms=function(){function e(e,t,n){this.state=e,this.translateService=t,this.modalController=n,this.isFreePause=!1}return e.prototype.ngOnInit=function(){this.isFreePause?x.Jb.track("conversion.banner.upgrade.load",{value1:"LP After Paused",value2:"Your free usage limit of Creately has exceeded and your account is paused."}):x.Jb.track("conversion.banner.upgrade.load",{value1:"LP 3-Day Warning",value2:"Your storage limit has exceeded."})},e.prototype.showPlanPage=function(){this.isFreePause?(this.modalController.show(me.f),x.Jb.track("conversion.banner.upgrade.click",{value1:"LP After Paused"})):(this.modalController.show(me.h,{inputs:{page:me.g.Plans}}),x.Jb.track("conversion.banner.upgrade.click",{value1:"LP 3-Day Warning"}))},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(y.e),k.gc(x.fb))},e.\u0275cmp=k.ac({type:e,selectors:[["storage-exceeded-banner"]],inputs:{isFreePause:"isFreePause"},decls:3,vars:2,consts:[[1,"email-verification-banner-container","fx-pointer-events-auto"],["class","email-verification-banner warning body",4,"ngIf"],[1,"email-verification-banner","warning","body"],[1,"nu-icon","nu-icon-small","fx-margin-top-5","fx-margin-bottom-5"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-su-warning"],["translate",""],["translate","",1,"btn-link","body","body--bold",3,"click"],[1,"nu-icon","nu-ic-small","fx-margin-right-5","fx-margin-top-5","fx-margin-bottom-5"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.dd(1,As,7,0,"div",1),k.dd(2,Ps,9,0,"div",1),k.lc()),2&e&&(k.Sb(1),k.Dc("ngIf",!t.isFreePause),k.Sb(1),k.Dc("ngIf",t.isFreePause))},directives:[a.t,y.a],styles:[".email-sent[_ngcontent-%COMP%]{background-color:#f2f9fe;border:1px solid #c3e5fa}.email-sent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#5425af}.warning[_ngcontent-%COMP%]{background-color:#fff2d7}.email-verification-banner[_ngcontent-%COMP%]{padding-left:.625rem;padding-right:.625rem;display:flex;align-items:center;width:100%;color:#382703}.email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;margin:0 0 0 1rem;background-color:transparent}.email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.email-verification-banner-container[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;z-index:3}.nu-icon[_ngcontent-%COMP%]{margin-bottom:.375rem;margin-right:.625rem}"],changeDetection:0}),e}(),Ds=function(){function e(e){this.modalController=e}return e.prototype.showEmailVerificationWindow=function(){window.gravity.api.requestConfirmation(),this.modalController.show(me.c)},e.\u0275fac=function(t){return new(t||e)(k.gc(x.fb))},e.\u0275cmp=k.ac({type:e,selectors:[["email-verification-banner"]],decls:8,vars:0,consts:[[1,"email-verification-banner-container","fx-pointer-events-auto"],["data-testid","email-validation-banner",1,"email-verification-banner","warning","body"],[1,"nu-icon","nu-icon-small","fx-margin-right-5"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-su-warning"],["translate",""],["translate","",1,"btn-medium","email-verification-banner-button","btn-link","body","body--bold",3,"click"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.xc(),k.mc(2,"svg",2),k.hc(3,"use",3),k.lc(),k.wc(),k.mc(4,"span",4),k.fd(5,"EMAIL_VERIFICATION_BANNER.PLEASE_VERIFY_YOUR_EMAIL"),k.lc(),k.mc(6,"button",5),k.uc("click",(function(){return t.showEmailVerificationWindow()})),k.fd(7,"EMAIL_VERIFICATION_BANNER.VERIFY"),k.lc(),k.lc(),k.lc())},directives:[y.a],styles:[".email-verification-banner[_ngcontent-%COMP%]{padding-left:.625rem;padding-right:.625rem;height:32px;background-color:#fff2d7;display:flex;align-items:center;width:100%;color:#382703}.email-verification-banner-container[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;z-index:3}.email-verification-banner-icon[_ngcontent-%COMP%]{width:20px;color:#e9a23b}.email-verification-banner-button[_ngcontent-%COMP%]{padding:0;margin:0 0 0 1rem;background-color:transparent;font-weight:500}.nu-icon[_ngcontent-%COMP%]{margin-right:.625rem}"],changeDetection:0}),e}(),js=function(){function e(e){this.translateService=e}return e.prototype.updateStatusAndReload=function(){localStorage.appReloadedForOffline=!0,this.appReload()},e.prototype.appReload=function(){window.location.reload()},e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["app-offline-reload-banner"]],decls:8,vars:0,consts:[[1,"app-offline-reload-banner-container","fx-pointer-events-auto"],["data-testid","app-offline-reload-banner",1,"app-offline-reload-banner","warning","body"],[1,"nu-icon","nu-icon-small","fx-margin-right-5","fx-margin-top-5","fx-margin-bottom-5"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-su-warning"],["translate","",1,""],["translate","",1,"app-offline-reload-banner-button","btn-link","body","body--bold",3,"click"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.xc(),k.mc(2,"svg",2),k.hc(3,"use",3),k.lc(),k.wc(),k.mc(4,"span",4),k.fd(5,"APP_OFFLINE_RELOAD_BANNER.TITLE"),k.lc(),k.mc(6,"button",5),k.uc("click",(function(){return t.updateStatusAndReload()})),k.fd(7,"APP_OFFLINE_RELOAD_BANNER.BUTTON"),k.lc(),k.lc(),k.lc())},directives:[y.a],styles:[".warning[_ngcontent-%COMP%]{background-color:#fff2d7}.app-offline-reload-banner[_ngcontent-%COMP%]{padding:.625rem;display:flex;align-items:center;width:100%;height:32px;color:#382703}.app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;margin:0 0 0 1rem;background-color:transparent}.app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.app-offline-reload-banner-container[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;z-index:3}.app-offline-reload-banner-button[_ngcontent-%COMP%]:hover{cursor:pointer}.nu-icon[_ngcontent-%COMP%]{margin-right:.625rem}"],changeDetection:0}),e}(),Rs=n("Wg7D"),Ls=n("NvYU"),Ns=n("1OUs"),Bs=["diagramAppStatusToolTip"];function Us(e,t){1&e&&(k.mc(0,"div"),k.mc(1,"span",14),k.hc(2,"img",15),k.mc(3,"span",16),k.mc(4,"p",17),k.fd(5,"TOOLTIPS.GOOGLE_DRIVE.HEADER_DRIVE_ICON.HEADING"),k.lc(),k.mc(6,"p",18),k.fd(7,"TOOLTIPS.GOOGLE_DRIVE.HEADER_DRIVE_ICON.DESCRIPTION"),k.lc(),k.lc(),k.lc(),k.lc())}function Fs(e,t){1&e&&(k.xc(),k.mc(0,"svg",25),k.hc(1,"use",26),k.lc())}function qs(e,t){1&e&&(k.xc(),k.mc(0,"svg",27),k.hc(1,"use",28),k.lc())}function Ws(e,t){1&e&&(k.xc(),k.mc(0,"svg",27),k.hc(1,"use",28),k.lc())}function Hs(e,t){if(1&e&&(k.mc(0,"p",29),k.fd(1),k.zc(2,"async"),k.lc()),2&e){var n=k.yc(4);k.Sb(1),k.gd(k.Ac(2,1,n.appStatusIndicatorInfo).tooltip.heading)}}function Ks(e,t){if(1&e&&(k.mc(0,"p",30),k.zc(1,"async"),k.fd(2),k.zc(3,"async"),k.lc()),2&e){var n=k.yc(4);k.Dc("ngClass",""===k.Ac(1,2,n.appStatusIndicatorInfo).tooltip.heading?"tooltip-content":"tooltip-body"),k.Sb(2),k.hd(" ",k.Ac(3,4,n.appStatusIndicatorInfo).tooltip.description,"")}}function zs(e,t){if(1&e){var n=k.nc();k.mc(0,"div"),k.mc(1,"span",19,20),k.uc("mouseenter",(function(){return k.Qc(n),k.yc(3).appStatusIconMouseState(!0)}))("mouseleave",(function(){return k.Qc(n),k.yc(3).appStatusIconMouseState(!1)})),k.mc(3,"span"),k.dd(4,Fs,2,0,"svg",21),k.zc(5,"async"),k.dd(6,qs,2,0,"svg",22),k.zc(7,"async"),k.dd(8,Ws,2,0,"svg",22),k.zc(9,"async"),k.lc(),k.mc(10,"span",16),k.dd(11,Hs,3,3,"p",23),k.zc(12,"async"),k.dd(13,Ks,4,6,"p",24),k.zc(14,"async"),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc(3);k.Sb(4),k.Dc("ngIf","offline"===k.Ac(5,5,r.appStatusIndicatorInfo).icon),k.Sb(2),k.Dc("ngIf","online"===k.Ac(7,7,r.appStatusIndicatorInfo).icon),k.Sb(2),k.Dc("ngIf","sync"===k.Ac(9,9,r.appStatusIndicatorInfo).icon),k.Sb(3),k.Dc("ngIf",""!==k.Ac(12,11,r.appStatusIndicatorInfo).tooltip.heading),k.Sb(2),k.Dc("ngIf",""!==k.Ac(14,13,r.appStatusIndicatorInfo).tooltip.description)}}function Vs(e,t){if(1&e&&(k.kc(0),k.dd(1,zs,15,15,"div",1),k.zc(2,"async"),k.jc()),2&e){var n=k.yc().ngIf,r=k.yc();k.Sb(1),k.Dc("ngIf",(!n.source||"creately"===n.source.type)&&k.Ac(2,1,r.appStatusIndicatorInfo))}}function Gs(e,t){if(1&e&&(k.kc(0),k.dd(1,Us,8,0,"div",1),k.dd(2,Vs,3,3,"ng-container",13),k.jc()),2&e){var n=t.ngIf;k.Sb(1),k.Dc("ngIf",n.source&&"gdrive"===n.source.type),k.Sb(1),k.Dc("ifMode","default")}}var Ys=function(){return["MouseControlState","normal","active"]},Xs=function(){return{event:"footer.select.click"}},Qs=function(){return["MouseControlState","pan","active"]},Js=function(){return{event:"footer.pan.click"}};function $s(e,t){if(1&e){var n=k.nc();k.mc(0,"div",31),k.mc(1,"div",32),k.mc(2,"button",33),k.uc("click",(function(){return k.Qc(n),k.yc().setMouseControlState("normal")})),k.xc(),k.mc(3,"svg",34),k.hc(4,"use",35),k.lc(),k.wc(),k.mc(5,"span",36),k.fd(6,"TOOLTIPS.NORMAL"),k.lc(),k.lc(),k.lc(),k.mc(7,"div",32),k.mc(8,"button",37),k.uc("click",(function(){return k.Qc(n),k.yc().setMouseControlState("pan")})),k.xc(),k.mc(9,"svg",34),k.hc(10,"use",38),k.lc(),k.wc(),k.mc(11,"div",16),k.mc(12,"span",39),k.fd(13,"TOOLTIPS.PAN"),k.lc(),k.mc(14,"span",40),k.fd(15,"Space + Drag"),k.lc(),k.lc(),k.lc(),k.lc(),k.lc()}2&e&&(k.Sb(2),k.Dc("ifStateClass",k.Hc(4,Ys))("trackAction",k.Hc(5,Xs)),k.Sb(6),k.Dc("ifStateClass",k.Hc(6,Qs))("trackAction",k.Hc(7,Js)))}function Zs(e,t){if(1&e){var n=k.nc();k.mc(0,"div",31),k.mc(1,"div",41),k.mc(2,"button",42),k.uc("click",(function(){return k.Qc(n),k.yc().undoRedo("undo")})),k.zc(3,"async"),k.xc(),k.mc(4,"svg",34),k.hc(5,"use",43),k.lc(),k.wc(),k.mc(6,"div",16),k.mc(7,"span",39),k.fd(8,"TOOLTIPS.UNDO"),k.lc(),k.mc(9,"span",40),k.fd(10),k.lc(),k.lc(),k.lc(),k.lc(),k.mc(11,"div",41),k.mc(12,"button",44),k.uc("click",(function(){return k.Qc(n),k.yc().undoRedo("redo")})),k.zc(13,"async"),k.xc(),k.mc(14,"svg",34),k.hc(15,"use",45),k.lc(),k.wc(),k.mc(16,"div",16),k.mc(17,"span",39),k.fd(18,"TOOLTIPS.REDO"),k.lc(),k.mc(19,"span",40),k.fd(20),k.lc(),k.lc(),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Sb(2),k.Dc("disabled",!k.Ac(3,4,r.sessionHistory.canUndo)),k.Sb(8),k.gd(r.featureList.getFeature("undo").shortcutText),k.Sb(2),k.Dc("disabled",!k.Ac(13,6,r.sessionHistory.canRedo)),k.Sb(8),k.gd(r.featureList.getFeature("redo").shortcutText)}}var ec=function(){return{event:"footer.zoom.out.click"}};function tc(e,t){if(1&e){var n=k.nc();k.mc(0,"button",46),k.uc("click",(function(){return k.Qc(n),k.yc().zoomOut()})),k.xc(),k.mc(1,"svg",47),k.hc(2,"use",48),k.lc(),k.wc(),k.mc(3,"div",16),k.mc(4,"span",39),k.fd(5,"TOOLTIPS.ZOOM_OUT"),k.lc(),k.mc(6,"span",40),k.fd(7),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Dc("trackAction",k.Hc(2,ec)),k.Sb(7),k.gd(r.featureList.getFeature("zoomOut").shortcutText)}}function nc(e,t){if(1&e){var n=k.nc();k.mc(0,"simple-dropdown-item",49),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc().updateZoomLevel(e.level)})),k.mc(1,"div",50),k.mc(2,"span",51),k.fd(3),k.lc(),k.mc(4,"span",52),k.fd(5),k.lc(),k.lc(),k.lc()}if(2&e){var r=t.$implicit;k.Dc("item",r),k.Sb(3),k.gd(r.label),k.Sb(2),k.gd(r.desc)}}var rc=function(){return{event:"footer.zoom.in.click"}};function ic(e,t){if(1&e){var n=k.nc();k.mc(0,"button",53),k.uc("click",(function(){return k.Qc(n),k.yc().zoomIn()})),k.xc(),k.mc(1,"svg",54),k.hc(2,"use",55),k.lc(),k.wc(),k.mc(3,"div",16),k.mc(4,"span",39),k.fd(5,"TOOLTIPS.ZOOM_IN"),k.lc(),k.mc(6,"span",40),k.fd(7),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Dc("trackAction",k.Hc(2,rc)),k.Sb(7),k.gd(r.featureList.getFeature("zoomIn").shortcutText)}}var ac=function(){return{event:"footer.keyboard-shortcut.click"}};function oc(e,t){if(1&e){var n=k.nc();k.mc(0,"button",56),k.uc("click",(function(){return k.Qc(n),k.yc().openShortcutWindow()})),k.xc(),k.mc(1,"svg",57),k.hc(2,"use",58),k.lc(),k.lc()}2&e&&k.Dc("trackAction",k.Hc(1,ac))}var sc=function(){return["InterfaceControlState","edit"]},cc=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0,multiselectable:!1}},lc=function(){function e(e,t,n,r,i,a){var o=this;this.commandService=e,this.state=t,this.sessionHistory=n,this.featureList=r,this.translate=i,this.ll=a,this.zoomLevels=[{label:"200%",level:2},{label:"100%",desc:this.featureList.getFeature("actualSize").shortcutText,level:1},{label:"50%",level:.5},{label:"10%",level:.1},{label:this.translate.instant("BASE_FEATURE.FIT_SIZE"),desc:this.featureList.getFeature("zoomFit").shortcutText,level:"fit"}],this.hideToolTipDelay=5e3,this.userCameFromOffline=!1,this.subs=[],this.showZoomButtons=new T.a(!1),this.zoomLevelLabel=this.state.changes("DiagramZoomLevel").pipe(Object(Mt.a)((function(e){return Math.floor(100*e)}))),this.diagram=this.state.changes("CurrentDiagram").pipe(Object(S.a)((function(e){return o.ll.forDiagram(e,!1).getDiagramModel().pipe(Object(Da.a)())}))),this.listenToAppStatusState()}return Object.defineProperty(e.prototype,"appStatusIndicatorInfo",{get:function(){var e=this;return this.state.changes(O.c).pipe(Object(Mt.a)((function(t){return t===O.c.OFFLINE?(e.userCameFromOffline=!0,{icon:"offline",tooltip:{heading:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.HEADING"),description:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.DESCRIPTION")}}):t!==O.c.ONLINE||e.userCameFromOffline?e.userCameFromOffline?{icon:"sync",tooltip:{heading:"",description:e.translate.instant("TOOLTIPS.SYNC.ONLINE_HEADER_INDICATOR.DESCRIPTION")}}:void 0:{icon:"online",tooltip:{heading:"",description:e.translate.instant("TOOLTIPS.ONLINE.ONLINE_HEADER_INDICATOR.DESCRIPTION")}}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canShowShortcuts",{get:function(){return!this.state.get("ApplicationIsEmbedded")||"msteams"===this.state.get("PluginApp")},enumerable:!1,configurable:!0}),e.prototype.appStatusIconMouseState=function(e){this.showAppStatusTTOnMouse=e},e.prototype.zoomIn=function(){this.commandService.dispatch(Wr.a.zoomDiagram,this.state.get("CurrentDiagram"),{delta:1.25,toCenter:!0})},e.prototype.zoomOut=function(){this.commandService.dispatch(Wr.a.zoomDiagram,this.state.get("CurrentDiagram"),{delta:.8,toCenter:!0})},e.prototype.updateZoomLevel=function(e){x.Jb.track("footer.zoom.combo.click",{value1Type:"level",value1:""+e}),"string"==typeof e&&"fit"===e?this.commandService.dispatch(Wr.a.zoomAndPanDiagram):this.commandService.dispatch(Wr.a.zoomDiagram,this.state.get("CurrentDiagram"),{level:e,toCenter:!0})},e.prototype.openShortcutWindow=function(){this.commandService.dispatch(Nn.showShortcutWindow,{show:!0})},e.prototype.closeShortcutWindow=function(){this.commandService.dispatch(Nn.showShortcutWindow,{show:!1})},e.prototype.showOrHideZoomButtons=function(e){this.showZoomButtons.next(e)},e.prototype.undoRedo=function(e){"undo"===e?(x.Jb.track("footer.undo.click"),this.commandService.dispatch(Ae.a.undoAction)):"redo"===e&&(x.Jb.track("footer.redo.click"),this.commandService.dispatch(Ae.a.redoAction))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.setMouseControlState=function(e){e!==this.state.get("MouseControlState")&&this.commandService.dispatch(Kr.a.changeMouseControlState,{state:e})},e.prototype.listenToAppStatusState=function(){var e=this;this.subs.push(this.state.changes("AppStatusIndicatorState").pipe(Object(bt.a)((function(e){return e&&e.open})),Object(Rs.a)(this.hideToolTipDelay),Object(I.a)((function(){return e.diagramAppStatusToolTip.show()})),Object(Ot.a)(this.hideToolTipDelay),Object(I.a)((function(){e.showAppStatusTTOnMouse||e.diagramAppStatusToolTip.hide(),e.state.set("AppStatusIndicatorState",{open:!1})}))).subscribe())},e.\u0275fac=function(t){return new(t||e)(k.gc(x.B),k.gc(x.Hb),k.gc(Fn.a),k.gc(Pn.a),k.gc(y.e),k.gc(At.a))},e.\u0275cmp=k.ac({type:e,selectors:[["diagram-toolbar"]],viewQuery:function(e,t){var n;(1&e&&k.kd(Bs,!0,E.t),2&e)&&(k.Mc(n=k.vc())&&(t.diagramAppStatusToolTip=n.first))},decls:20,vars:21,consts:[[1,"dt-container","fx-pointer-events-auto","fx-center-vertical"],[4,"ngIf"],["class","dt-block",4,"ifState"],[1,"dt-block","dt-zoom",3,"mouseenter","mouseleave"],["class","dt-zoomout nu-btn-icon dt-block-btn","data-testid","zoom-out-button","tooltip","",3,"trackAction","click",4,"ngIf"],[1,"dt-dropdown","dt-block-btn"],["data-testid","zoom-percentage","direction","bottom","alignment","right",3,"settings"],["dropdown",""],["ddbutton","",3,"items"],[1,"dt-dropdown-label","body","body--bold","fx-margin-bottom-10"],["dditem","",3,"item","click",4,"ngFor","ngForOf"],["class","dt-zoomin nu-btn-icon dt-block-btn","data-testid","zoom-in-button","tooltip","",3,"trackAction","click",4,"ngIf"],["class","dt-btn-shortcut btn-small nu-btn-icon dt-block-btn","data-testid","shortcut-button",3,"trackAction","click",4,"ngIf"],[4,"ifMode"],["tooltip","","placement","top",1,"tooltip-container"],["src","./assets/images/vendor-logos/gdrive.svg",1,"dt-gdrive-icon"],[1,"tooltip-content"],["translate","",1,"tooltip-header","body"],["translate","",1,"tooltip-body","body"],["tooltip","","placement","top",1,"tooltip-container","dt-app-status-icon",3,"mouseenter","mouseleave"],["diagramAppStatusToolTip",""],["class","dt-app-status-indicator nu-icon dark-orange",4,"ngIf"],["class","dt-app-status-indicator nu-icon",4,"ngIf"],["class","tooltip-header",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"dt-app-status-indicator","nu-icon","dark-orange"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-status-offline"],[1,"dt-app-status-indicator","nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-status-online"],[1,"tooltip-header"],[3,"ngClass"],[1,"dt-block"],[1,"dt-block-item"],["data-testid","select-button","tooltip","",1,"dt-select","btn-small","btn-icon","dt-block-btn",3,"ifStateClass","trackAction","click"],[1,"nu-icon","nu-ic-arrow"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-arrow"],["translate","",1,"tooltip-content"],["data-testid","pan-button","tooltip","",1,"btn-small","btn-icon","dt-block-btn",3,"ifStateClass","trackAction","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-move"],["translate","",1,"tooltip-label"],[1,"tooltip-shortcut"],["tooltip","",1,"dt-block-item"],["data-testid","undo-button",1,"dt-select","nu-btn-small","btn-icon","dt-block-btn","btn-small",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-undo"],["data-testid","redo-button","tooltip","",1,"btn-icon","dt-block-btn","btn-small",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-redo"],["data-testid","zoom-out-button","tooltip","",1,"dt-zoomout","nu-btn-icon","dt-block-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-substract","nu-ic-arrow"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-substract"],["dditem","",3,"item","click"],[1,"dt-dropdown-item-container","body"],[1,"dt-dropdown-item","fx-margin-right-8"],[1,"dt-dropdown-item-sub","body"],["data-testid","zoom-in-button","tooltip","",1,"dt-zoomin","nu-btn-icon","dt-block-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-plus","nu-ic-arrow"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["data-testid","shortcut-button",1,"dt-btn-shortcut","btn-small","nu-btn-icon","dt-block-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-keyboard","fx-margin-right-10"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-keyboard"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.hc(1,"notification-count"),k.dd(2,Gs,3,2,"ng-container",1),k.zc(3,"async"),k.dd(4,$s,16,8,"div",2),k.dd(5,Zs,21,8,"div",2),k.mc(6,"div",3),k.uc("mouseenter",(function(){return t.showOrHideZoomButtons(!0)}))("mouseleave",(function(){return t.showOrHideZoomButtons(!1)})),k.dd(7,tc,8,3,"button",4),k.zc(8,"async"),k.mc(9,"div",5),k.mc(10,"abs-dropdown",6,7),k.mc(12,"simple-dropdown-button",8),k.mc(13,"div",9),k.fd(14),k.zc(15,"async"),k.lc(),k.lc(),k.dd(16,nc,6,3,"simple-dropdown-item",10),k.lc(),k.lc(),k.dd(17,ic,8,3,"button",11),k.zc(18,"async"),k.lc(),k.dd(19,oc,3,2,"button",12),k.lc()),2&e&&(k.Sb(2),k.Dc("ngIf",k.Ac(3,10,t.diagram)),k.Sb(2),k.Dc("ifState",k.Hc(18,sc)),k.Sb(1),k.Dc("ifState",k.Hc(19,sc)),k.Sb(2),k.Dc("ngIf",k.Ac(8,12,t.showZoomButtons)),k.Sb(3),k.Dc("settings",k.Hc(20,cc)),k.Sb(2),k.Dc("items",t.zoomLevels),k.Sb(2),k.hd("",k.Ac(15,14,t.zoomLevelLabel),"%"),k.Sb(2),k.Dc("ngForOf",t.zoomLevels),k.Sb(1),k.Dc("ngIf",k.Ac(18,16,t.showZoomButtons)),k.Sb(2),k.Dc("ngIf",t.canShowShortcuts))},directives:[Ls.a,a.t,ti.a,Eo.a,ko.a,a.s,yo.a,j.a,y.a,a.q,Ns.a,Jr.a,Co.a],pipes:[a.b],styles:[".dt-block[_ngcontent-%COMP%]{box-shadow:0 1px 4px rgba(0,0,0,.2),0 1px 2px rgba(0,0,0,.1);height:28px;background-color:#fff;border-radius:6px}.dt-block[_ngcontent-%COMP%]:not(:first-child){margin-left:.625rem;min-width:56px}.dt-zoom[_ngcontent-%COMP%]{min-width:50px!important}.dt-dropdown[_ngcontent-%COMP%]{display:inline-block}.dt-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{margin-right:-2rem;margin-bottom:.625rem}.dt-dropdown-item[_ngcontent-%COMP%]{padding-left:.25rem}.dt-dropdown-item-sub[_ngcontent-%COMP%]{padding-right:.25rem;color:#88a1aa}.dt-dropdown-label[_ngcontent-%COMP%]{padding-left:.125rem;padding-right:.125rem;margin-left:.25rem;margin-right:.25rem;line-height:2rem;height:28px;text-align:center;width:40px;font-weight:700}.dt-block-btn[_ngcontent-%COMP%]{padding:0;margin:0 0 -.75rem;min-width:25px;height:100%;border-radius:6px;background:transparent}.dt-dropdown-item-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex-direction:row;align-items:center;justify-content:space-between;align-content:center;height:32px;font-weight:500}.dt-block-item[_ngcontent-%COMP%]{display:inline-block}.dt-btn-shortcut[_ngcontent-%COMP%]{margin-left:.625rem;margin-top:-.625rem;background:transparent}.dt-icon-container[_ngcontent-%COMP%]{margin-left:.625rem;display:flex;align-items:center}.nu-ic-plus[_ngcontent-%COMP%], .nu-ic-substract[_ngcontent-%COMP%]{height:28px;border-radius:6px}.dt-gdrive-icon[_ngcontent-%COMP%]{margin-top:.25rem;height:20px;width:20px}.dt-app-status-indicator[_ngcontent-%COMP%]{height:25px;width:25px}notification-count[_ngcontent-%COMP%]{display:flex;padding-right:5px;padding-bottom:5px}.dt-app-status-icon[_ngcontent-%COMP%]{padding-top:1rem;margin-top:.625rem}.nu-ic-arrow[_ngcontent-%COMP%]{width:28px;height:28px}"],changeDetection:0}),e}(),uc=["helpwidget"],dc=function(){function e(e,t,n,r,i){this.modalController=e,this.zendesk=t,this.commandService=n,this.planPermManager=r,this.tooltipSvc=i,this.DEFAULT_SEARCH_TEXT="Creately",this.subs=[],this.helpSearchQuery=new T.a(""),this.searchArticleResult=new T.a([]),this.isFreeOrDemoUser=new T.a(!0),this.isDefaultSearchResult=new T.a(!1)}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.handleHelpSearch().subscribe()),this.subs.push(this.planPermManager.isFreeOrDemoUser().subscribe((function(t){return e.isFreeOrDemoUser.next(t)})))},e.prototype.helpButtonAction=function(e){this.closeHelpWidget(),"contact"===e?(x.Jb.track("helpwidget.buttons.contact.click"),this.zendesk.open()):"search"===e?(x.Jb.track("helpwidget.buttons.zendeskHelpCenter.click"),this.zendesk.helpCenter()):"tooltip-reset"===e&&this.tooltipSvc.resetTooltipTour()},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.onHelpSearchChange=function(e){this.isDefaultSearchResult.next(!1),this.searchArticleResult.next([]),this.helpWidget.showVideos.next(""===e)},e.prototype.closeHelpWidget=function(){var e=this.helpWidget.closeWidget().subscribe();this.subs.push(e)},e.prototype.handleHelpSearch=function(){var e=this;return this.helpSearchQuery.pipe(Object(bt.a)((function(e){return""!==e})),Object(S.a)((function(t){return e.getHelpSearchResult(t,3)})),Object(I.a)((function(t){return t.length>0&&e.searchArticleResult.next(t),t})),Object(bt.a)((function(e){return 0===e.length})),Object(S.a)((function(){return e.getHelpSearchResult(e.DEFAULT_SEARCH_TEXT,2)})),Object(I.a)((function(t){e.searchArticleResult.next(t),e.isDefaultSearchResult.next(!0)})))},e.prototype.getHelpSearchResult=function(e,t){return this.commandService.dispatch(Kr.a.helpCenterArticles,{searchQuery:e,numberOfArticle:t}).pipe(Object(qr.a)(),Object(Mt.a)((function(e){return e&&e.resultData&&e.resultData[0]&&e.resultData[0].results?e.resultData[0].results.map((function(e){return{title:e.title,url:e.html_url}})):[]})))},e.\u0275fac=function(t){return new(t||e)(k.gc(x.fb),k.gc(me.C),k.gc(x.B),k.gc(me.l),k.gc(Gr.a))},e.\u0275cmp=k.ac({type:e,selectors:[["help-box"]],viewQuery:function(e,t){var n;(1&e&&k.Xc(uc,!0),2&e)&&(k.Mc(n=k.vc())&&(t.helpWidget=n.first))},decls:11,vars:12,consts:[["helpwidget",""],["search",""],[3,"submitSearchText","changeHelpSearch"],[3,"searchResult","helpSearchText","isDefaultSearchResult"],["helpbuttons",""],[3,"showSupportButton","buttonClicked"]],template:function(e,t){1&e&&(k.mc(0,"help-widget",null,0),k.mc(2,"div",1),k.mc(3,"help-article-search",2),k.uc("submitSearchText",(function(e){return t.helpSearchQuery.next(e)}))("changeHelpSearch",(function(e){return t.onHelpSearchChange(e)})),k.lc(),k.hc(4,"help-search-result",3),k.zc(5,"async"),k.zc(6,"async"),k.zc(7,"async"),k.lc(),k.mc(8,"div",4),k.mc(9,"help-buttons-card",5),k.uc("buttonClicked",(function(e){return t.helpButtonAction(e)})),k.zc(10,"async"),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(4),k.Dc("searchResult",k.Ac(5,4,t.searchArticleResult))("helpSearchText",k.Ac(6,6,t.helpSearchQuery))("isDefaultSearchResult",k.Ac(7,8,t.isDefaultSearchResult)),k.Sb(5),k.Dc("showSupportButton",!k.Ac(10,10,t.isFreeOrDemoUser)))},directives:[K,ce,de,ie],pipes:[a.b],encapsulation:2,changeDetection:0}),e}(),pc=["diagramNameToolTip"];function hc(e,t){1&e&&k.hc(0,"account-pause-message")}function fc(e,t){1&e&&k.hc(0,"plan-window")}function mc(e,t){1&e&&k.hc(0,"history-preview-message")}function gc(e,t){1&e&&k.hc(0,"global-search")}function bc(e,t){if(1&e&&(k.mc(0,"div",27),k.zc(1,"async"),k.hc(2,"router-outlet"),k.lc()),2&e){var n=k.yc();k.Yb("fx-hidden",!k.Ac(1,2,n.isLeftSidebarVisible))}}function vc(e,t){1&e&&k.hc(0,"free-hand-toolbar")}function _c(e,t){if(1&e&&(k.hc(0,"storage-exceeded-banner",28),k.zc(1,"async")),2&e){var n=k.yc();k.Dc("isFreePause",k.Ac(1,1,n.isFreeUserSuspended))}}function yc(e,t){1&e&&k.hc(0,"email-verification-banner",29)}function Oc(e,t){1&e&&k.hc(0,"app-offline-reload-banner",29)}function xc(e,t){if(1&e&&(k.kc(0),k.hc(1,"bottom-panel",30),k.jc()),2&e){var n=t.$implicit,r=k.yc();k.Sb(1),k.Yb("fx-hidden",r.selectedBottomPanelId!==n._url),k.Dc("manifest",n)}}function Ec(e,t){1&e&&k.hc(0,"diagram-toolbar")}function kc(e,t){1&e&&k.hc(0,"help-box")}var Cc=function(){return["ApplicationIsEmbedded",!1]};function wc(e,t){1&e&&(k.kc(0),k.dd(1,kc,1,0,"help-box",3),k.jc()),2&e&&(k.Sb(1),k.Dc("ifState",k.Hc(1,Cc)))}var Sc=function(){return["ShowPlanWindow",!0]},Ic=function(){return["HistoryPreviewMode",!0]},Tc=function(e){return{height:e}},Ac=function(){function e(e,t,n,r,i,a,o,s,c,l,u,d,p,h,f,m,g,b,v){var _=this;this.state=e,this.errorHandler=t,this.userLocator=n,this.mapper=r,this.viewContainerRef=i,this.menuController=a,this.modalController=o,this.notifierController=s,this.translate=c,this.commandService=l,this.errorReporter=u,this.modelSubManager=d,this.authService=p,this.dataStore=h,this.ll=f,this.appNavConfig=m,this.sharedState=g,this.tooltipTourSvc=b,this.diagramNavigation=v,this.viewportStyles=new T.a({}),this.demoFlowDelay=3e3,this.notificationMessages=new De.a(this.translate),this.registerCommands(),this.menuController.viewContainerRef=this.viewContainerRef,this.showDemoMessage=new T.a(!1),this.showPaymentFailedMessage=new T.a(!1),this.showFreeUserStorageExceededBanner=new T.a(!1),this.isFreeUserSuspended=new T.a(!1),this.showAppOfflineReloadBanner=new T.a(!1),this.showGlobalSearchWidget=new T.a(!1),this.isLeftSidebarVisible=new T.a(!1),this.subs=[],this.blurBackground=new T.a(!1),this.showEmailVerificationBanner=new T.a(!1),this.isUserPaused=new T.a(!1),this.subs.push(this.listenToModalBlurChanges()),this.subs.push(this.listenToFollowUser()),this.setDiagramStates(),this.manifests=this.state.changes("EnabledPlugins").pipe(Object(Mt.a)((function(e){return Object(Ct.filter)(e,(function(e){return e.panels&&Object(Ct.some)(e.panels,["position","bottom"])}))})),Object(I.a)((function(e){e.length>0&&(_.selectedBottomPanelId=e[0]._url)})),Object(Fr.a)(1))}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(S.a)((function(e){return""===e||"start"===e?Object(Te.a)(!1):Object(Te.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFreeHandMode",{get:function(){return this.state.changes("MouseControlState").pipe(Object(Mt.a)((function(e){return e===Vr.b.Pen||e===Vr.b.Highlighter})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logoutUrl",{get:function(){return x.m.get("COGNITO_LOGOUT_URL")+"?client_id="+x.m.get("COGNITO_CLIENT_ID")+"&logout_uri="+x.m.get("COGNITO_LOGOUT_REDIRECT_URL")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.subs.push(this.handleDemoUser(),this.handleGlobalSearchWidget(),this.showOfflineNotification(),this.showIdleUserModal(),this.listenToShowPlansTag(),this.showCopyPasteNotification(),this.showOnboarding(),this.handleCanceledSubscriptions(),this.handleTeamUserInvitation(),this.handleAppOfflineReloadNotification(),this.handleLeftSidebarVisibility(),this.handleFreeUserStorageExceededBanner(),this.handleEmailVerificationBanner(),this.loadGlobalNotifications(),this.handleTooltipTourInit(),this.handleUserPause(),this.showWhatsNewWindow())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.handleDemoUserSignIn=function(e){var t=this,n=window.gravity.client.getCurrentUserPlan();n.startsWith("free")?e&&this.commandService.dispatch(Kr.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe():e?this.commandService.dispatch(Kr.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe({error:function(e){t.navigateAfterSignIn()},complete:function(){t.navigateAfterSignIn()}}):n.startsWith("demo")?this.subs.push(this.listenToTemplateTags(!0)):this.navigateAfterSignIn()},e.prototype.isAnonymousUserInViewMode=function(){return this.state.get("InterfaceControlState")===Vr.a.View&&!this.authService.isAuthenticated},e.prototype.registerCommands=function(){Wr.a.register(this.mapper)},e.prototype.handleDemoUser=function(){var e=this,t=this.state.get("CurrentUser");return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(bt.a)((function(e){return!!e})),Object(I.a)((function(t){t.status!==me.A.DEMO&&e.listenToTemplateTags()})),Object(bt.a)((function(e){return e.status===me.A.DEMO})),Object(Ot.a)(this.demoFlowDelay),Object(xt.a)(1),Object(I.a)((function(){return e.showDemoMessage.next(!0)})),Object(I.a)((function(){return e.state.set("IsDemoMode",!0)})),Object(S.a)((function(n){return e.authService.showDemoAuthenticationFlow(n.email).pipe(Object(I.a)({complete:function(){e.handleDemoUserSignIn(e.state.get("CurrentUser")!==t)}}))}))).subscribe()},e.prototype.handleUserPause=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(Et.a)(),Object(I.a)((function(t){return e.isUserPaused.next(t)}))).subscribe()},e.prototype.handleTeamUserInvitation=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(bt.a)((function(e){return!!e&&e.status===me.A.TEAM_CONFIRM})),Object(xt.a)(1)).subscribe((function(){e.modalController.show(me.o)}))},e.prototype.handleEmailVerificationBanner=function(){var e=this;return this.userLocator.getUserData().pipe(Object(bt.a)((function(e){return!!e}))).subscribe((function(t){t.emailToConfirm&&t.status!==me.A.DEMO?e.showEmailVerificationBanner.next(!0):e.showEmailVerificationBanner.next(!1)}))},e.prototype.handleFreeUserStorageExceededBanner=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(bt.a)((function(e){return!!e&&e.usageExceeded})),Object(xt.a)(1)).subscribe((function(t){t.suspended&&(e.isFreeUserSuspended.next(!0),e.modalController.show(me.f)),e.showFreeUserStorageExceededBanner.next(!0)}))},e.prototype.handleGlobalSearchWidget=function(){var e=this;return this.state.changes("GlobalSearch").pipe(Object(bt.a)((function(e){return!!e&&!!e.state}))).subscribe((function(t){t.state===zr.c.OPEN?e.showGlobalSearchWidget.next(!0):e.showGlobalSearchWidget.next(!1)}))},e.prototype.handleCanceledSubscriptions=function(){var e=this;return this.dispatchFetchUserSubscriptionData().pipe(Object(bt.a)((function(e){return!!e})),Object(I.a)((function(t){t.paymentFailedCount>0&&e.showPaymentFailedMessage.next(!0),t.cancelled&&e.modelSubManager.stopAll(!1).subscribe({complete:function(){e.authService.logOut().subscribe({complete:function(){return e.redirect(e.logoutUrl)}})}})}))).subscribe()},e.prototype.redirect=function(e){window.location.replace(e)},e.prototype.dispatchFetchUserSubscriptionData=function(){return this.commandService.dispatch(Kr.a.fetchUserSubscriptionData).pipe(Object(qr.a)(),Object(Mt.a)((function(e){var t,n,r;if(e&&e.resultData[0]){var i=JSON.parse(e.resultData[0]);return null===(r=null===(n=null===(t=null==i?void 0:i.data)||void 0===t?void 0:t.user)||void 0===n?void 0:n.organization)||void 0===r?void 0:r.subscription}return null})))},e.prototype.listenToModalBlurChanges=function(){var e=this;return this.state.changes("ModalBlur").subscribe((function(t){t?e.blurBackground.next(!0):e.blurBackground.next(!1)}))},e.prototype.listenToFollowUser=function(){var e=this;return this.state.changes("FollowUser").pipe(Object(Mt.a)((function(e){return"string"==typeof e?e:null==e?void 0:e.userId}))).subscribe((function(t){if("__NONE__"===t)e.viewportStyles.next({});else{var n=e.sharedState.getUser("Realtime",t);e.viewportStyles.next({border:"3px solid "+n.color})}}))},e.prototype.showOnboarding=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(bt.a)((function(t){if(!t||t.status===me.A.DEMO||!t.preferences)return!1;var n=t.preferences.onboarding_progress,r=t.preferences.onboarding_last_updated;return"complete"!==n&&(!(n&&n.startsWith("step")&&r)&&(!e.showInAppPlans||(e.modalController.show(me.h,{inputs:{page:me.g.Plans}}),!1)))})),Object(S.a)((function(){return e.dataStore.findOneLatest(he.j,{updatedBy:e.state.get("CurrentUser")},{sort:{lastUpdated:-1}})})),Object(xt.a)(1),Object(I.a)((function(t){return e.modalController.show(me.h,{inputs:{page:me.g.Onboarding,recentDiagramId:null==t?void 0:t.id}})}))).subscribe()},e.prototype.showOfflineNotification=function(){var e=this;return this.state.changes(O.c).pipe(Object(bt.a)((function(e){return e===O.c.OFFLINE||e===O.c.ONLINE})),Object(Et.a)()).subscribe((function(t){if(t===O.c.OFFLINE){var n=e.notificationMessages.getNotificationMessage(De.b.OFFLINE);e.notifierController.show(De.b.OFFLINE,n.component,n.type,n.options,n.collapsed)}else e.notifierController.hide(De.b.OFFLINE)}))},e.prototype.showIdleUserModal=function(){var e=this;return this.state.changes(O.c).pipe(Object(bt.a)((function(e){return e===O.c.SLEEP||e===O.c.ONLINE})),Object(Et.a)()).subscribe((function(t){if(t===O.c.SLEEP){e.state.set("SleepToggle",!0);var n=e.notificationMessages.getNotificationMessage(De.b.IDLE);e.notifierController.show(De.b.IDLE,n.component,n.type,n.options,n.collapsed),x.Jb.track("notification.warning.load")}else if(e.state.get("SleepToggle")){e.notifierController.hide(De.b.IDLE);var r={main:!0,description:"LABELS.AUTO_REFRESH_MESSAGE",subtext:"LABELS.AUTO_REFRESH_SUB_TEXT",logout:!0};e.state.set("DataLoadingIndicatorState",r),e.refreshUserWorkspace(),setTimeout((function(){r.main=!1,e.state.set("DataLoadingIndicatorState",r)}),2e3),e.state.set("SleepToggle",!1)}}))},e.prototype.refreshUserWorkspace=function(){var e=this,t=this.state.get("CurrentDiagram");if(!t||"start"===t)return null;this.modelSubManager.stop(t,!0).pipe(Object(xt.a)(1),Object(I.a)((function(){"view"===e.state.get("InterfaceControlState")?e.diagramNavigation.navigateToDiagram(t,"view"):e.diagramNavigation.navigateToDiagram(t,"edit")}))).subscribe()},e.prototype.showErrorNotification=function(){var e=this;return this.errorHandler.errorStream.pipe(Object(bt.a)((function(){return e.state.get(O.c)===O.c.ONLINE})),Object(I.a)((function(){var t=e.notificationMessages.getNotificationMessage(De.b.ERROR,e.sendErrorReport.bind(e));e.notifierController.hide(De.b.ERROR),e.notifierController.show(De.b.ERROR,t.component,t.type,t.options,t.collapsed)}))).subscribe()},e.prototype.sendErrorReport=function(){this.errorReporter.submitErrorReport("",!1),this.showErrorReportCompleteNotification()},e.prototype.showErrorReportCompleteNotification=function(){var e=this;setTimeout((function(){e.notifierController.hide(De.b.ERROR)}),0);var t=this.notificationMessages.getNotificationMessage(De.b.ERROR_REPORT_COMPLETE);this.notifierController.show(De.b.ERROR_REPORT_COMPLETE,t.component,t.type,t.options,t.collapsed)},e.prototype.showCopyPasteNotification=function(){var e=this;return this.state.changes("CopyPasteNotifier").pipe(Object(bt.a)((function(e){return!!e}))).subscribe((function(){var t=e.notificationMessages.getNotificationMessage(De.b.COPY_PASTE);e.notifierController.show(De.b.COPY_PASTE,t.component)}))},e.prototype.navigateAfterSignIn=function(){this.dataStore.remove(me.v,{id:this.state.get("CurrentUser")}).subscribe()},e.prototype.reload=function(){window.location.reload()},e.prototype.loadGlobalNotifications=function(){var e=this;return this.state.changes("CurrentUser").pipe(Object(bt.a)((function(e){return!!e})),Object(Et.a)(),Object(S.a)((function(){return e.commandService.dispatch(kn.a.getGlobalNotifications)}))).subscribe()},e.prototype.listenToShowPlansTag=function(){var e=this;return this.appNavConfig.listenToTag("post-sign-up").pipe(Object(I.a)((function(t){e.showInAppPlans="show"===t[0]&&"in-app-plans"===t[1]}))).subscribe()},e.prototype.showWhatsNewWindow=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(bt.a)((function(e){return!(!e||e.status===me.A.DEMO||!e.preferences)&&(!1!==e.preferences.show_in_app_whats_new&&!(e.preferences.whats_new_last_version>=x.m.get("APP_VERSION")))})),Object(xt.a)(1),Object(Mt.a)((function(t){return e.tooltipTourSvc.isUserTourTipCompleted(t,["root","root-1","root-2","root-3","root-4"])})),Object(I.a)((function(t){t&&e.modalController.show(me.B)}))).subscribe()},e.prototype.listenToTemplateTags=function(e){var t=this;return e?this.tooltipTourSvc.initialiseTooltipTour(!0):this.appNavConfig.listenToTag("template-modal").pipe(Object(Mt.a)((function(e){e!==Ur.a&&(t.state.set("ToggleTemplatesModal",!0),t.state.set("SelectedFloatingPanel","shapes"))}))).subscribe()},e.prototype.setDiagramStates=function(){this.state.set("ModalWindow",{show:!1})},e.prototype.handleAppOfflineReloadNotification=function(){var e=this;return this.state.changes(O.c).pipe(Object(bt.a)((function(e){return e===O.c.OFFLINE||e===O.c.ONLINE}))).subscribe((function(t){localStorage.appReadyForOffline&&!localStorage.appReloadedForOffline&&t===O.c.OFFLINE?e.showAppOfflineReloadBanner.next(!0):e.showAppOfflineReloadBanner.next(!1)}))},e.prototype.handleLeftSidebarVisibility=function(){var e=this;return this.state.changes("LeftSidebarVisibility").pipe(Object(I.a)((function(t){e.isLeftSidebarVisible.next(t)}))).subscribe()},e.prototype.handleTooltipTourInit=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(bt.a)((function(e){return(null==e?void 0:e.status)!==me.A.DEMO})),Object(Mt.a)((function(){return e.tooltipTourSvc.initialiseTooltipTour()}))).subscribe()},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(k.s),k.gc(me.x),k.gc(x.z),k.gc(k.hb),k.gc(Ze.a),k.gc(x.fb),k.gc(x.jb),k.gc(y.e),k.gc(x.B),k.gc(E.c),k.gc(Hr.d),k.gc(me.a),k.gc(Sn.b),k.gc(At.a),k.gc(x.o),k.gc(x.Gb),k.gc(Gr.a),k.gc(Yr.a))},e.\u0275cmp=k.ac({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;(1&e&&k.kd(pc,!0,E.t),2&e)&&(k.Mc(n=k.vc())&&(t.diagramNameToolTip=n.first))},features:[k.Rb([E.t])],decls:55,vars:55,consts:[[3,"demoSignIn"],[4,"ngIf"],[3,"showPaymentFailedMessage"],[4,"ifState"],[1,"container-fluid"],[1,"diagram-container","row",3,"ngStyle"],["name","hyperlink-editor"],[1,"col","fx-no-padding"],["name","weblinks-viewer"],[1,"fx-pointer-events-none","fx-center-vertical","fx-cover","diagram-inner-container"],["id","notes-text-toolbar"],["class","base-left-content-area",3,"fx-hidden",4,"ngIf"],[1,"base-right-content-area"],[1,"viewport-area"],[1,"base-right-diagram-area",3,"ngStyle"],[1,"diagram-viewport","fx-pointer-events-none","diagram-viewport-banner"],["class","banner-item",3,"isFreePause",4,"ngIf"],["class","banner-item",4,"ngIf"],[1,"diagram-viewport-floating-controls"],[1,"diagram-viewport-floating-controls-left-area"],["name","floating-panels"],[4,"ngFor","ngForOf"],[1,"diagram-viewport-floating-controls-right-area"],["name","floating-media-card"],[1,"diagram-viewport-floating-controls-right-area-2"],[4,"ifMode"],["name","right-pane"],[1,"base-left-content-area"],[1,"banner-item",3,"isFreePause"],[1,"banner-item"],[3,"manifest"]],template:function(e,t){1&e&&(k.mc(0,"demo-message",0),k.uc("demoSignIn",(function(e){return t.handleDemoUserSignIn(e)})),k.lc(),k.dd(1,hc,1,0,"account-pause-message",1),k.zc(2,"async"),k.zc(3,"async"),k.hc(4,"payment-failed-message",2),k.zc(5,"async"),k.dd(6,fc,1,0,"plan-window",3),k.dd(7,mc,1,0,"history-preview-message",3),k.hc(8,"app-notifier"),k.hc(9,"tooltip-tour-overlay"),k.hc(10,"modal-window-container"),k.mc(11,"div",4),k.zc(12,"async"),k.zc(13,"async"),k.zc(14,"async"),k.zc(15,"async"),k.dd(16,gc,1,0,"global-search",1),k.zc(17,"async"),k.mc(18,"div",5),k.zc(19,"async"),k.hc(20,"router-outlet",6),k.mc(21,"div",7),k.mc(22,"div"),k.hc(23,"router-outlet",8),k.lc(),k.hc(24,"diagram-area"),k.lc(),k.mc(25,"div",9),k.hc(26,"floating-toolbar",10),k.dd(27,bc,3,4,"div",11),k.mc(28,"div",12),k.mc(29,"div",13),k.hc(30,"header-layout"),k.hc(31,"shape-properties-action"),k.mc(32,"div",14),k.zc(33,"async"),k.dd(34,vc,1,0,"free-hand-toolbar",1),k.zc(35,"async"),k.mc(36,"div",15),k.dd(37,_c,2,3,"storage-exceeded-banner",16),k.zc(38,"async"),k.dd(39,yc,1,0,"email-verification-banner",17),k.zc(40,"async"),k.dd(41,Oc,1,0,"app-offline-reload-banner",17),k.zc(42,"async"),k.lc(),k.mc(43,"div",18),k.mc(44,"div",19),k.hc(45,"router-outlet",20),k.dd(46,xc,2,3,"ng-container",21),k.zc(47,"async"),k.lc(),k.mc(48,"div",22),k.hc(49,"router-outlet",23),k.mc(50,"div",24),k.dd(51,Ec,1,0,"diagram-toolbar",1),k.zc(52,"async"),k.dd(53,wc,2,2,"ng-container",25),k.lc(),k.lc(),k.lc(),k.lc(),k.lc(),k.lc(),k.hc(54,"router-outlet",26),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(1),k.Dc("ngIf",!k.Ac(2,19,t.showPaymentFailedMessage)&&k.Ac(3,21,t.isUserPaused)),k.Sb(3),k.Dc("showPaymentFailedMessage",k.Ac(5,23,t.showPaymentFailedMessage)),k.Sb(2),k.Dc("ifState",k.Hc(51,Sc)),k.Sb(1),k.Dc("ifState",k.Hc(52,Ic)),k.Sb(4),k.Yb("nu-overlay-blur",k.Ac(12,25,t.blurBackground))("demo-user",k.Ac(13,27,t.showDemoMessage)||k.Ac(14,29,t.isUserPaused)&&!k.Ac(15,31,t.showPaymentFailedMessage)),k.Sb(5),k.Dc("ngIf",k.Ac(17,33,t.showGlobalSearchWidget)),k.Sb(2),k.Dc("ngStyle",k.Ic(53,Tc,k.Ac(19,35,t.state.changes("HistoryPreviewMode"))?"calc( 100vh - 30px )":"100vh")),k.Sb(9),k.Dc("ngIf",!t.isAnonymousUserInViewMode()),k.Sb(5),k.Dc("ngStyle",k.Ac(33,37,t.viewportStyles)),k.Sb(2),k.Dc("ngIf",k.Ac(35,39,t.isFreeHandMode)),k.Sb(3),k.Dc("ngIf",k.Ac(38,41,t.showFreeUserStorageExceededBanner)),k.Sb(2),k.Dc("ngIf",k.Ac(40,43,t.showEmailVerificationBanner)),k.Sb(2),k.Dc("ngIf",k.Ac(42,45,t.showAppOfflineReloadBanner)),k.Sb(5),k.Dc("ngForOf",k.Ac(47,47,t.manifests)),k.Sb(5),k.Dc("ngIf",k.Ac(52,49,t.appDisabledState)),k.Sb(2),k.Dc("ifMode","default"))},directives:[Xr.a,a.t,ei,ti.a,ni.a,Ri,Li.a,a.w,b.i,Pa,_n,vs,Wt,a.s,yo.a,_s,ys.a,Es,zr.a,Ts,Ms,Ds,js,Tt,lc,dc],pipes:[a.b],styles:[".demo-user[_ngcontent-%COMP%]   .base-left-content-area[_ngcontent-%COMP%], .demo-user[_ngcontent-%COMP%]   .base-right-content-area[_ngcontent-%COMP%]{padding-top:2rem}.demo-user[_ngcontent-%COMP%]   .diagram-viewport-floating-controls[_ngcontent-%COMP%]{margin-bottom:-2.5rem;bottom:2.5rem}@supports (background:-webkit-canvas(squares)){.demo-user[_ngcontent-%COMP%]  .floating-panel-container{bottom:0}.demo-user[_ngcontent-%COMP%]   .diagram-viewport-floating-controls[_ngcontent-%COMP%]{align-items:flex-end}}.diagram-container[_ngcontent-%COMP%]{position:relative}.free-hand-view[_ngcontent-%COMP%]{position:absolute}.diagram-viewport[_ngcontent-%COMP%]{flex:1;height:100%;position:relative}.diagram-viewport-banner[_ngcontent-%COMP%]{margin-top:4rem;display:flex;justify-content:start;flex-direction:column}.diagram-viewport-banner[_ngcontent-%COMP%] > .banner-item[_ngcontent-%COMP%]{margin-top:.5rem}.base-left-content-area[_ngcontent-%COMP%]{height:100%}.base-right-content-area[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;position:relative}.base-right-diagram-area[_ngcontent-%COMP%]{display:flex;flex:1;position:relative}.base-disabled-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.4);z-index:3;width:calc(100% - 265px);right:0}header-layout[_ngcontent-%COMP%]{margin-top:1rem;margin-left:0;position:absolute;max-width:100%}bottom-panel[_ngcontent-%COMP%]{width:100%;overflow:hidden}.diagram-viewport-floating-controls[_ngcontent-%COMP%]{margin-top:0;margin-left:1rem;margin-right:1rem;padding-bottom:1rem;padding-right:2rem;display:flex;align-items:flex-end;-webkit-align-items:flex-end;width:calc(100%);position:absolute;height:100%}.diagram-viewport-floating-controls-left-area[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:right}.diagram-viewport-floating-controls-right-area[_ngcontent-%COMP%]{display:flex;flex-direction:column}.diagram-viewport-floating-controls-right-area-2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.viewport-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.container-fluid[_ngcontent-%COMP%]{transform:translateZ(0)}#notes-text-toolbar[_ngcontent-%COMP%]{z-index:10;pointer-events:auto}"],changeDetection:0}),e}(),Pc={cursors:{normal:'<svg xmlns="http://www.w3.org/2000/svg" width="8.85" height="16.12" ><polygon points="8.85 9.02 0 0 0 12.63 2.74 10.25 5.15 16.12 7.62 15.11 5.22 9.24 8.85 9.02"/></svg>',pan:'<svg xmlns="http://www.w3.org/2000/svg" data-ox="7.99" data-oy="8" width="15.99" height="16" ><title>cursors-tails</title><path d="M10.77,12.87l-2.55,3a.33.33,0,0,1-.45,0l-2.55-3c-.1-.12,0-.27.22-.27H7V10.74a1,1,0,0,1,2,0V12.6h1.55C10.75,12.6,10.87,12.75,10.77,12.87Z" style="fill:rgb(21,20,21)"/><path d="M10.55,3.39H9V5.54a1,1,0,0,1-2,0V3.39H5.44c-.2,0-.32-.14-.22-.26l2.55-3a.33.33,0,0,1,.45,0l2.55,3C10.87,3.25,10.75,3.39,10.55,3.39Z" style="fill:rgb(21,20,21)"/><path d="M15.91,8.22l-3,2.55c-.12.1-.27,0-.27-.22V9h-2a1,1,0,0,1,0-2h2V5.45c0-.2.15-.33.27-.23l3,2.55A.35.35,0,0,1,15.91,8.22Z" style="fill:rgb(21,20,21)"/><path d="M6.4,8a1,1,0,0,1-1,1h-2v1.55c0,.2-.15.32-.27.22l-3-2.55a.35.35,0,0,1,0-.45l3-2.55c.12-.1.27,0,.27.23V7h2A1,1,0,0,1,6.4,8Z" style="fill:rgb(21,20,21)"/></svg>',comment:"./assets/cursors/comment.svg",pen:'<svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" data-oy="19"><path d="M18.6431 11.8328C18.4431 11.6328 18.1431 11.6328 17.9431 11.8328L16.2431 13.4328C15.8431 11.5328 14.7431 8.83278 12.2431 6.43278C10.5431 4.83278 8.44307 3.73278 6.14307 3.13278L7.64307 1.63278C7.84307 1.43278 7.84307 1.13278 7.64307 0.932775C7.44307 0.732775 7.14307 0.732775 6.94307 0.832775L4.64307 3.13278L0.643066 17.8328C0.643066 18.0328 0.643066 18.2328 0.743066 18.4328L0.943066 18.7328L1.04307 18.8328C1.14307 18.9328 1.34307 18.9328 1.44307 18.9328C1.54307 18.9328 1.64307 18.9328 1.64307 18.9328L16.1431 14.9328L18.5431 12.5328C18.8431 12.3328 18.8431 12.0328 18.6431 11.8328ZM5.44307 3.93278C7.74307 4.43278 9.94307 5.53278 11.6431 7.13278C14.2431 9.53278 15.1431 12.3328 15.4431 14.0328L6.34307 16.5328C6.04307 15.4328 5.44307 14.7328 4.94307 14.2328C4.24307 13.6328 3.44307 13.3328 2.84307 13.2328L5.44307 3.93278ZM1.64307 17.9328L2.64307 14.2328C3.04307 14.3328 3.74307 14.5328 4.34307 15.0328C4.74307 15.3328 5.14307 15.9328 5.44307 16.8328L1.64307 17.9328Z" style="fill:rgb(4,38,61)"/></svg>',highlighter:'<svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" data-oy="20"><path d="M22.5499 11.7998C22.3499 11.5998 22.0499 11.5998 21.7499 11.7998L19.6499 13.8998L8.9499 2.7998L10.8499 0.999805C11.0499 0.799805 11.0499 0.499805 10.8499 0.199805C10.6499 -0.00019531 10.3499 -0.00019531 10.0499 0.199805L7.5499 2.5998L5.1499 11.3998L1.0499 15.4998C0.649897 15.8998 0.449897 16.4998 0.549897 16.9998C0.649897 17.3998 0.949898 17.7998 1.4499 17.8998L8.0499 19.6998C8.1499 19.6998 8.2499 19.6998 8.4499 19.6998C8.8499 19.6998 9.2499 19.4998 9.5499 19.1998L11.2499 17.4998L19.8499 15.0998L22.4499 12.4998C22.7499 12.2998 22.7499 11.9998 22.5499 11.7998ZM8.3499 3.6998L18.6499 14.3998L11.1499 16.4998L6.2499 11.4998L8.3499 3.6998ZM8.9499 18.4998C8.7499 18.6998 8.5499 18.6998 8.4499 18.6998L1.8499 16.8998C1.7499 16.8998 1.7499 16.7998 1.7499 16.7998C1.7499 16.6998 1.7499 16.4998 1.9499 16.2998L5.7499 12.4998L10.4499 17.1998L8.9499 18.4998Z" style="fill:rgb(4,38,61)/></svg>',rectangle:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke-linejoin="miter" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="1.5" stroke="rgb(0,0,0)" d="M2.25 3.25h19.5v17.5h-19.5v-17.5z"></path></svg>',card:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke-linejoin="miter" stroke-linecap="butt" stroke-miterlimit="4" stroke-width="1.5" stroke="rgb(0,0,0)" d="M4 3.75h16c1.795 0 3.25 1.455 3.25 3.25v10c0 1.795-1.455 3.25-3.25 3.25h-16c-1.795 0-3.25-1.455-3.25-3.25v-10c0-1.795 1.455-3.25 3.25-3.25z"></path><path fill="none" stroke-linejoin="miter" stroke-linecap="round" stroke-miterlimit="4" stroke-width="1.5" stroke="rgb(0,0,0)" d="M0.75 7.25h22.5"></path><path fill="none" stroke-linejoin="miter" stroke-linecap="round" stroke-miterlimit="4" stroke-width="1.5" stroke="rgb(0,0,0)" d="M4 12h8"></path><path fill="none" stroke-linejoin="miter" stroke-linecap="round" stroke-miterlimit="4" stroke-width="1.5" stroke="rgb(0,0,0)" d="M4.75 15.25h7.5"></path></svg>',stickynote:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M16 22l0.53 0.53c-0.141 0.141-0.332 0.22-0.53 0.22v-0.75zM22 16h0.75c0 0.199-0.079 0.39-0.22 0.53l-0.53-0.53zM4 21.25h12v1.5h-12v-1.5zM2.75 4v16h-1.5v-16h1.5zM20 2.75h-16v-1.5h16v1.5zM21.25 16v-12h1.5v12h-1.5zM22.53 16.53l-6 6-1.061-1.061 6-6 1.061 1.061zM18 15.25h4v1.5h-4l0-1.5zM15.25 22v-4h1.5v4h-1.5zM20 1.25c1.519 0 2.75 1.231 2.75 2.75h-1.5c0-0.69-0.56-1.25-1.25-1.25v-1.5zM1.25 4c0-1.519 1.231-2.75 2.75-2.75v1.5c-0.69 0-1.25 0.56-1.25 1.25h-1.5zM18 16.75c-0.69 0-1.25 0.56-1.25 1.25h-1.5c0-1.519 1.231-2.75 2.75-2.75l-0 1.5zM4 22.75c-1.519 0-2.75-1.231-2.75-2.75h1.5c0 0.69 0.56 1.25 1.25 1.25v1.5z"></path></svg>'},tails:{}},Mc=n("Fqp3"),Dc=n("Voii"),jc=n("aC2M"),Rc=n("xOLM"),Lc=function(e){function t(t,n){var r=e.call(this)||this;return r.state=t,r.collabLocator=n,r.OWNER_PLAN_ERROR="OWNER_PLAN_NOT_LOADED",r.currentUserIsOwner=!1,r.ownerHasPermission=!0,r.ownerIsOnline=!0,r.listenToCollabChanges().subscribe(),r}return Object(r.e)(t,e),t.prototype.getCollabsWithPermissions=function(){var e=this;return this.getCollabs().pipe(Object(Rc.a)((function(t){return t.pipe(Object(I.a)((function(t){if(t.message!==e.OWNER_PLAN_ERROR)throw t})),Object(xt.a)(3),Object(Ot.a)(1e3))})))},t.prototype.check=function(e){return!!this.currentUserIsOwner||("view"===this.state.get("InterfaceControlState")||(!!this.ownerHasPermission||!(!this.ownerIsOnline||this.ownerHasPermission)))},t.prototype.listenToCollabChanges=function(){var e=this;return this.getCollabsWithPermissions().pipe(Object(I.a)((function(t){var n=t.find((function(t){return t.role===he.g.OWNER&&t.id!==e.state.get("CurrentUser")}));if(n){e.currentUserIsOwner=!1;var r=n.plan.permissions[pe.r.COLLABORATE_OFFLINE];e.ownerHasPermission=r.allowed,e.ownerIsOnline=n.online}else e.currentUserIsOwner=!0})))},t.prototype.getCollabs=function(){var e=this;return Object(Pt.b)([this.state.changes("CurrentUser"),this.state.changes("CurrentDiagram"),this.state.changes("InterfaceControlState")]).pipe(Object(bt.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(S.a)((function(){return e.collabLocator.getCollabs()})),Object(I.a)((function(t){var n=t.find((function(t){return t.role===he.g.OWNER&&t.id!==e.state.get("CurrentUser")}));if(n&&!n.plan)throw new Error(e.OWNER_PLAN_ERROR)})))},t.\u0275fac=function(e){return new(e||t)(k.qc(x.Hb),k.qc(_t.a))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(me.e),Nc=n("iy5+"),Bc=n("CNgt"),Uc=function(e){function t(t,n,r,i,a,o,s,c,l,u,d,p,h,f,m,g,b){var v=e.call(this,t)||this;return v.state=t,v.initController=n,v.logger=r,v.keyBoardController=i,v.featureList=a,v.cursorGen=o,v.modelSubManager=s,v.router=c,v.routeManager=l,v.translate=u,v.userLocator=d,v.collabLocator=p,v.ll=h,v.planPermManager=f,v.modalController=m,v.collaborateOfflinePermHandler=g,v.appNavConfigInterpreter=b,v.isOfflineCollabDialogDisplayed=!1,v}return Object(r.e)(t,e),t.prototype.canDeactivate=function(e,t,n,r){return this.stopWatchingConnectionChanges(),this.stopWatchingCollabChanges(),this.state.set("SidebarControls",Nc.b.DISABLED),this.state.set("UpdateDiagramCanvas",!1),Object(Te.a)(!0)},t.prototype.checkUserPauseStatus=function(e){var t=this;return this.userLocator.isUserPaused().pipe(Object(Et.a)(),Object(Mt.a)((function(n){return!n||(!e.url.endsWith("edit")||(t.router.navigate(["../",t.state.get("CurrentDiagram"),"view"]),!1))})))},t.prototype.canActivate=function(e,t){var n=this;this.logger.debug("BaseRouteResolver resolution started"),this.setFocusTargetState(t.url);var r=e.paramMap.get("id"),i=this.getRouteAction(t.url);return this.state.set("LastDiagramAction",{diagramId:r,action:i}),this.runResolverSequence(t).pipe(Object(I.a)({complete:function(){return n.state.set("SidebarControls",Nc.b.ENABLED)}}))},t.prototype.resolve=function(e,t){return this.setDiagramStates(),this.registerFeatures(),this.keyBoardController.registerFeatures(),this.cursorGen.addCursors(Pc),this.removePreviousRouteFromHistory(t),this.state.set("DiagramLoaded",e.paramMap.get("id")),!0},t.prototype.canActivateForOutcome=function(e){var t=e.outcome,n=t.type,r=t.action;return"plugin"===x.m.get("APP_MODE")?"complete"===n:"complete"===n||!("command"!==n&&"commandEvent"!==n||"Authenticate"!==r||e.outcome.wait)},t.prototype.registerFeatures=function(){this.featureList.register({id:"showShorcutWindow",commandEvent:Nn.showShortcutWindow,label:this.translate.instant("BASE_FEATURE.SHORTCUTS"),shortcuts:[{keySequence:[pe.k.F1],action:"keydown"}],data:{show:!0},context:Mc.a.All}),this.featureList.register({id:"hideShorcutWindow",commandEvent:Nn.showShortcutWindow,label:this.translate.instant("BASE_FEATURE.SHORTCUTS"),shortcuts:[{keySequence:[pe.k.F1],action:"keyup"}],data:{show:!1},context:Mc.a.All}),this.featureList.register({id:"zoomIn",commandEvent:Wr.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ZOOM_IN"),shortcuts:[{keySequence:[pe.k.Meta,pe.k.Plus],action:"keydown",repeatOnKeyPress:100},{keySequence:[pe.k.Meta,pe.k.Add],action:"keydown",repeatOnKeyPress:100},{keySequence:[pe.k.Meta,pe.k.Plus_FF],action:"keydown",repeatOnKeyPress:100}],data:{delta:1.25,toCenter:!0},context:Mc.a.Canvas}),this.featureList.register({id:"zoomOut",commandEvent:Wr.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ZOOM_OUT"),shortcuts:[{keySequence:[pe.k.Meta,pe.k.Minus],action:"keydown",repeatOnKeyPress:100},{keySequence:[pe.k.Meta,pe.k.Subtract],action:"keydown",repeatOnKeyPress:100},{keySequence:[pe.k.Meta,pe.k.Minus_FF],action:"keydown",repeatOnKeyPress:100}],data:{delta:.8,toCenter:!0},context:Mc.a.Canvas}),this.featureList.register({id:"zoomFit",commandEvent:Wr.a.zoomAndPanDiagram,label:this.translate.instant("BASE_FEATURE.FIT_SIZE"),shortcuts:[{keySequence:[pe.k.Meta,pe.k.One],action:"keydown"}],data:{},context:Mc.a.Canvas}),this.featureList.register({id:"actualSize",commandEvent:Wr.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ACTUAL_SIZE"),shortcuts:[{keySequence:[pe.k.Meta,pe.k.Zero],action:"keydown"}],data:{level:1,toCenter:!0},context:Mc.a.Canvas}),this.featureList.register({id:"addComment",commandEvent:Kr.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.ADD_COMMENT"),shortcuts:[{keySequence:[pe.k.C],action:"keydown"}],data:{},attachKeyEventToData:!0,context:Mc.a.Canvas}),this.featureList.register({id:"freeHandPen",commandEvent:Kr.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.FREE_HAND_PEN"),shortcuts:[{keySequence:[pe.k.A],action:"keydown"}],data:{},attachKeyEventToData:!0,context:Mc.a.CanvasNotSelected}),this.featureList.register({id:"freeHandHighlighter",commandEvent:Kr.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.FREE_HAND_HIGHLIGHTER"),shortcuts:[{keySequence:[pe.k.H],action:"keydown"}],data:{},attachKeyEventToData:!0,context:Mc.a.CanvasNotSelected}),this.featureList.register({id:"documentSearch",commandEvent:Kr.a.openGlobalSearch,label:this.translate.instant("COMMANDS.DOCUMENT_SEARCH"),shortcuts:[{keySequence:[pe.k.Meta,pe.k.F]}],data:{scope:zr.b.DOCUMENT},attachKeyEventToData:!0,context:Mc.a.Canvas})},t.prototype.watchConnectionChanges=function(){this._connectionChangesSub||(this._connectionChangesSub=this.connectionChanges().subscribe())},t.prototype.stopWatchingConnectionChanges=function(){this._connectionChangesSub&&(this._connectionChangesSub.unsubscribe(),this._connectionChangesSub=null)},t.prototype.connectionChanges=function(){var e=this;return this.state.changes(O.c).pipe(Object(ii.a)(1),Object(S.a)((function(t){return e.onConnectionChange(t)})))},t.prototype.onConnectionChange=function(e){var t=this;return this.logger.debug("BaseRouteResolver onConnectionChange",e),e===O.c.OFFLINE||e===O.c.SLEEP?this.modelSubManager.stopAll(!1):e===O.c.ONLINE?this.modelSubManager.stop(this.state.get("CurrentDiagram"),!1).pipe(Object(S.a)((function(){return t.runConnectionChangeSequence()}))):Ur.a},t.prototype.runConnectionChangeSequence=function(){var e=this;return this.logger.debug("BaseRoute Connection Change sequence started"),this.startSequence().pipe(Object(I.a)({next:function(t){return e.logger.debug("BaseRoute Connection Change sequence status",t)},complete:function(){return e.logger.debug("BaseRoute Connection Change sequence completed.")}}))},t.prototype.watchCollabChanges=function(){this._collabChangesSub||(this._collabChangesSub=this.listenToCollabChanges().subscribe())},t.prototype.stopWatchingCollabChanges=function(){this._collabChangesSub&&(this._collabChangesSub.unsubscribe(),this._collabChangesSub=null)},t.prototype.watchOfflineCollabChanges=function(){var e=this;this._offlineCollabChangesSub||setTimeout((function(){e._offlineCollabChangesSub=e.listenToOfflineCollabChanges().subscribe()}),3e3)},t.prototype.listenToCollabChanges=function(){var e=this;return Object(Pt.b)([this.state.changes("CurrentUser"),this.state.changes("CurrentDiagram")]).pipe(Object(bt.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(S.a)((function(t){var n=Object(r.h)(t,2),i=n[0];n[1];return e.ll.forCurrentObserver(!1).pipe(Object(S.a)((function(e){return e.getDiagramOnce()})),Object(S.a)((function(t){return e.collabLocator.getCollabs(t.id).pipe(Object(da.a)()).pipe(Object(I.a)((function(n){var a=Object(r.h)(n,2),o=a[0],s=a[1];e.onCollabChange(i,t,o,s)})))})))})))},t.prototype.listenToOfflineCollabChanges=function(){var e=this;return this.collaborateOfflinePermHandler.getCollabsWithPermissions().pipe(Object(S.a)((function(t){if(!e.planPermManager.check([pe.r.COLLABORATE_OFFLINE])){var n=t.find((function(e){return e.role===he.g.OWNER}));return e.userLocator.getUserInfo(n.id).pipe(Object(I.a)((function(t){var n=Object(r.a)(Object(r.a)({},Na.a[pe.r.COLLABORATE_OFFLINE]),{descriptionParams:{ownerName:t.fullName},buttons:[{type:"ok",text:"BUTTONS.STAY_ON_DOCUMENT",clickHandler:e.redirectHandler.bind(e)}],hideCancelButton:!0,closeClickHandler:e.redirectHandler.bind(e)});e.isOfflineCollabDialogDisplayed||(e.isOfflineCollabDialogDisplayed=!0,e.modalController.show(me.q,{inputs:{dialogData:n}}))})))}return e.isOfflineCollabDialogDisplayed?(e.isOfflineCollabDialogDisplayed=!1,Object(Te.a)(e.modalController.hide())):Ur.a})))},t.prototype.redirectHandler=function(){this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])},t.prototype.onCollabChange=function(e,t,n,r){if(t.privacy.level===me.m.SPECIFIC&&r&&r.length>0){var i=n.find((function(t){return t.id===e})),a=r.find((function(t){return t.id===e}));(!a||i&&i.role!==a.role)&&this.routeManager.lastRoute.endsWith("edit")&&this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])}},t.prototype.setFocusTargetState=function(e){var t,n=e.split("/"),r=n[n.length-1];r.indexOf("?")>-1&&(r=r.substring(0,r.indexOf("?"))),"s"===n[n.length-2]&&r.length>0?t={shapeId:r}:"g"===n[n.length-2]&&r.length>0&&(t={groupId:r}),t&&this.state.set("FocusTarget",t)},t.prototype.removePreviousRouteFromHistory=function(e){var t=this.routeManager.lastRoute;t&&t.startsWith("/create?")&&this.routeManager.removeRouteFromHistory(e.url)},t.prototype.setDiagramStates=function(){this.state.set("Selected",[]),this.state.set("CurrentSidebarTask",""),this.state.set("InnerShapeSelection",{}),this.state.set("SnapData",{}),this.state.set("SnapToGuides",!1),this.state.set("ShowGuides",!1),this.state.set("ShapeSearchResults",{results:[],searchQuery:""}),this.state.set("ShapeSearchQuery",""),this.state.set("CommentThreadData",{}),this.state.set("WebLinkViewer",{open:!1}),this.state.get("FloatingMedia")||this.state.set("FloatingMedia",{open:!1}),this.state.set("ShapeDataViewer",{open:!1}),this.state.set("ShapelinkTarget",{}),this.state.set("ShowNewCommentsIndicator",!1),this.state.set("NewCommentsIndicator",!1),this.state.set("CopyPasteNotifier",!1),this.state.set("NewCommentsIndicator",!1),this.state.get("RightSidebarPanel")||this.state.set("RightSidebarPanel","none"),this.state.set("FollowUser","__NONE__"),this.state.set("SidebarControls",Nc.b.ENABLED),this.state.set("GlobalSearch",{}),this.state.set("GlobalSearchText",{}),this.state.set("HistoryPreviewMode",!1),"start"===this.state.get("CurrentDiagram")?(this.state.set("FolderPanelScreen",Bc.a.FULL_SCREEN),this.state.set("LeftSidebarVisibility",!0),this.state.set("SelectedLeftPanel","folders")):"template"===this.state.get("SelectedLeftPanel")?this.state.set("LeftSidebarVisibility",!0):(this.state.get("ApplicationIsEmbedded")||void 0===this.state.get("LeftSidebarVisibility"))&&this.state.set("LeftSidebarVisibility",!1),this.state.get("OpenRightSidebar")||this.state.set("OpenRightSidebar",E.r.None),this.state.set("SmartRulesEnabled",!1)},t.prototype.runResolverSequence=function(e){var t=this;return this.startSequence().pipe(Object(zi.a)(this.router.events.pipe(Object(bt.a)((function(e){return e instanceof b.b||e instanceof b.c})))),Object(bt.a)((function(e){return t.canActivateForOutcome(e)})),Object(xt.a)(1),Object(Mt.a)((function(e){t.logger.debug("BaseRouteResolver sequence status",e),t.setCurrentDiagram(e.input.resourceId),t.hideLoadingScreen(),t.logger.debug("BaseRouteResolver setting current diagram to "+e.input.resourceId)})),Object(I.a)({complete:function(){t.watchConnectionChanges(),t.watchCollabChanges(),t.watchOfflineCollabChanges(),t.logger.debug("BaseRouteResolver route resolution completed.")}}),Object(S.a)((function(){return t.state.get("CurrentUser")?t.checkUserPauseStatus(e):Object(Te.a)(!0)})))},t.prototype.startSequence=function(){var e=this.state.get("LastDiagramAction").diagramId,t=this.state.get("LastDiagramAction").action;t=this.appNavConfigInterpreter.receiveQueryParam(t);var n={};this.state.has("previousMode")&&(n.isUserSwitchViewToEdit="view"===this.state.get("previousMode"),this.state.remove("previousMode"));var r=new x.X(t,e,n);return this.initController.startSequence("RouteResponsibility",r)},t.\u0275fac=function(e){return new(e||t)(k.qc(x.Hb),k.qc(x.Y),k.qc(x.cb),k.qc(Bn.a),k.qc(Pn.a),k.qc(Bi.a),k.qc(Hr.d),k.qc(b.d),k.qc(jc.a),k.qc(y.e),k.qc(me.x),k.qc(_t.a),k.qc(At.a),k.qc(me.l),k.qc(x.fb),k.qc(Lc),k.qc(x.o))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(Dc.a),Fc=n("o9on"),qc=n("CDoB"),Wc=n("hh8i"),Hc=n("diDk"),Kc=n("Xpu5"),zc=n("S9z9"),Vc=n("0jHB"),Gc=n("P4Xx"),Yc=n("unyx"),Xc=n("LLEj"),Qc=n("gZOS"),Jc=n("B5wR"),$c=n("VaKY"),Zc=function(){function e(e,t,n,r,i,a,o,s,c,l,u,d,p,h,f,m,g){this.commands=e,this.ll=t,this.stateSvc=n,this.datastore=r,this.datasync=i,this.reporter=a,this.pluginReg=o,this.realtimeState=s,this.defLocator=c,this.random=l,this.ell=u,this.modelSubManager=d,this.loader=p,this.shapeBoundsLocator=h,this.followUserSvc=f,this.notifierController=m,this.tooltipTourService=g,this.frameCountsWithDuration=[],this.frameCountStartTime=0,this.autoDrowIntervals=[],this.autoShapeMoveIntervals=[]}return Object.defineProperty(e.prototype,"loki",{get:function(){return $c.Collection.loki},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){window.Debugger=this,window.Reporter=this.reporter,window.Flags=x.P,window.eDataRegistry=Jc.a.instance},e.prototype.initEData=function(){this.defLocator.getDefinition("creately.edata.uml").subscribe(),this.defLocator.getDefinition("creately.edata.bpm").subscribe()},e.prototype.runEDataSub=function(){var e=this.commands.dispatch(Kr.a.startEDataSubscription,{resourceId:this.stateSvc.get("CurrentDiagram")});console.log("--- START EDATASSS ",e)},e.prototype.runEDataProjectSub=function(){var e=this.commands.dispatch(he.u.getProjectEData,this.stateSvc.get("CurrentProject"),null);console.log("--- START EDATASSS ",e)},e.prototype.runCreateEData=function(){var e=this;this.commands.dispatch(ja.a.createEData,this.stateSvc.get("CurrentProject"),{id:this.random.diagramId(),defId:"creately.edata.uml"}).pipe(Object(qr.a)(),Object(S.a)((function(t){if(t&&t.resultData[0]&&t.resultData[0].model){var n=t.resultData[0].model;return e.commands.dispatch(Ae.a.addEDataModel,{eDataModelId:n.id})}return Ur.a}))).subscribe()},e.prototype.loadCustomPlugin=function(e){this.pluginReg.load(e)},e.prototype.logStorageChanges=function(e){void 0===e&&(e=!0),x.P.set("DEBUG_STORAGE_CHANGES",e)},e.prototype.logStateChanges=function(e){void 0===e&&(e=!0),x.P.set("DEBUG_STATE_CHANGES",e)},e.prototype.logAppTracking=function(e){void 0===e&&(e=!0),x.P.set("DEBUG_APP_TRACKING",e)},e.prototype.logCommandProgress=function(e){void 0===e&&(e=!0),x.P.set("DEBUG_COMMAND_PROGRESS",e)},e.prototype.logObserverCounts=function(e){void 0===e&&(e=!0),x.P.set("DEBUG_OBSERVER_COUNTS",e)},e.prototype.logSelectionChanges=function(){this.stateSvc.changes("Selected").subscribe((function(e){return console.log("Debugger: selection:",e)}))},e.prototype.getDiagramId=function(){return this.stateSvc.get("CurrentDiagram")},e.prototype.getSelection=function(){return this.stateSvc.get("Selected")},e.prototype.setSelection=function(e){return this.stateSvc.set("Selected",e)},e.prototype.getGridAreaCanvas=function(){return this.stateSvc.get("GridAreaCanvas")},e.prototype.getDiagramCanvas=function(){return this.stateSvc.get("DiagramCanvas")},e.prototype.getIndicatorCanvas=function(){return this.stateSvc.get("InteractionCanvas")},e.prototype.getDiagramFromDatabase=function(){this.datastore.findOneLatest(Dt.a,{id:this.getDiagramId()}).subscribe((function(e){return console.log("Debugger: diagram from database:",e)}))},e.prototype.getDiagramFromLocator=function(e){void 0===e&&(e=!0),this.ll.forCurrent(e).getDiagramOnce().subscribe((function(e){return console.log("Debugger: diagram from locator:",e)}))},e.prototype.getDiagramModelChanges=function(){this.datastore.getModelStore(Dt.a).findChanges({modelId:this.getDiagramId()}).pipe(Object(xt.a)(1)).subscribe((function(e){return console.log("Debugger: changes from database:",e)}))},e.prototype.addDiagramModelChanges=function(e){this.datasync.applyChanges(Dt.a,e).subscribe({complete:function(){return console.log("Debugger: changes added successfully")}})},e.prototype.connectPhoton=function(){},e.prototype.disconnectPhoton=function(){},e.prototype.enablePhotonPreviewSyncEmition=function(e){void 0===e&&(e=!0),x.P.set("DEBUG_PHOTON_PREVIEW_SYNC_EMIT",e)},e.prototype.enablePhotonPreviewSyncReceiver=function(e){void 0===e&&(e=!0),x.P.set("DEBUG_PHOTON_PREVIEW_SYNC_RECEIVE",e)},e.prototype.enablePhotonPointerMove=function(e){void 0===e&&(e=!0),x.P.set("DEBUG_PHOTON_POINTER_MOVE",e)},e.prototype.setRealtimePointerPosition=function(e,t){this.realtimeState.set("pointer",JSON.stringify([e,t]))},e.prototype.setRealtimePointerPositionRandomly=function(e,t,n,r,i){var a=this;void 0===e&&(e=200),void 0===t&&(t=5e3),void 0===n&&(n=500),void 0===r&&(r=250),void 0===i&&(i=100);var o=Date.now(),s=function(){var c=(Date.now()-o)%t/t,l=2*Math.PI*c,u=n+i*Math.cos(l),d=r+i*Math.sin(l);a.realtimeState.set("pointer",JSON.stringify([u,d])),setTimeout(s,e)};s()},e.prototype.dispatchCommandEvent=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.commands).dispatch.apply(e,Object(r.j)(t)).subscribe((function(e){return console.log("Debugger: "+t[0]+":",e)}))},e.prototype.previewCommandEvent=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.commands).preview.apply(e,Object(r.j)(t)).subscribe((function(e){return console.log("Debugger: "+t[0]+":",e)}))},e.prototype.createErrorReport=function(){return this.reporter.createErrorReport()},e.prototype.submitErrorReport=function(){this.reporter.submitErrorReport()},e.prototype.restoreDiagramData=function(e){var t=this.getDiagramId(),n=this.datastore.getModelStore(Dt.a);n.findOneRaw({id:t}).pipe(Object(xt.a)(1)).subscribe((function(t){n.collection.insert(Object(r.a)(Object(r.a)({},Object(Ct.cloneDeep)(e.diagram)),{id:t.id,lastChangeId:t.lastChangeId})),n.changeCollection.insert(e.changes.map((function(e){return Object(r.a)(Object(r.a)({},Object(Ct.cloneDeep)(e)),{modelId:t.id})})))}))},e.prototype.clearLocalData=function(){this.datastore.drop()},e.prototype.selectLikeSamal=function(e,t){var n=this;void 0===e&&(e=1e4),void 0===t&&(t=250),this.ll.forCurrent(!1).getDiagramOnce().subscribe((function(r){var i=Object.keys(r.shapes),a=Date.now(),o=function(){if(!(Date.now()>a+e)){var r=Math.floor(Math.random()*i.length),s=Object(Ct.sampleSize)(i,r);n.setSelection(s),setTimeout(o,t)}};o()}))},e.prototype.updateTexBounds=function(){this.dispatchCommandEvent("UpdateTextBounds")},e.prototype.startCanvasFPS=function(e){var t=this;void 0===e&&(e=2);var n=function(){if(x.P.get("DEBUG_FRAME_RATE")){if(0!==t.frameCountStartTime){var r=Date.now()-t.frameCountStartTime;t.frameCountsWithDuration.push({count:ua.FRAME_RATE_COUNT,duration:r})}t.frameCountStartTime=Date.now(),ua.FRAME_RATE_COUNT=0,setTimeout(n,1e3*e)}};x.P.set("DEBUG_FRAME_RATE",!0),0===this.frameCountsWithDuration.length&&(n(),console.log("Debugger: fps: Frame rate count started successfully."))},e.prototype.stopCanvasFPS=function(){x.P.set("DEBUG_FRAME_RATE",!1);var e=0,t=0;this.frameCountsWithDuration.forEach((function(n){e+=n.count,t+=n.duration/1e3,console.log("Debugger: fps: "+Math.round(n.count/(n.duration/1e3)))})),console.log("Debugger: average fps: "+Math.round(e/t)),ua.FRAME_RATE_COUNT=0,this.frameCountsWithDuration=[],this.frameCountStartTime=0},e.prototype.createCustomDB=function(e,t){var n=this;this.commands.dispatch(ja.a.createEData,this.stateSvc.get("CurrentProject"),{id:e,defId:"creately.edata.custom",name:t}).pipe(Object(qr.a)(),Object(S.a)((function(e){if(e&&e.resultData[0]&&e.resultData[0].model){var t=e.resultData[0].model;return n.commands.dispatch(Ae.a.addEDataModel,{eDataModelId:t.id})}throw new Error("Faild add the db to the diagram")})),Object(qr.a)(),Object(S.a)((function(){return n.modelSubManager.start(Wc.a,e)}))).subscribe()},e.prototype.createType=function(e,t){var n=this,r=this.stateSvc.get("Selected");1===r.length&&this.ell.getEDataModel(e).pipe(Object(S.a)((function(i){if(i){var a=x.rb.entityId();return n.commands.dispatch(Kc.a.updateEntityDefs,e,{shapeId:r,entityDefId:a,entityDefName:t})}throw new Error("No edata model found")}))).subscribe()},e.prototype.updateType=function(e){var t=this,n=this.stateSvc.get("Selected");1===n.length&&this.ll.forCurrent(!1).getShapeOnce(n).pipe(Object(I.a)((function(r){if(r.eData&&!Object(Ct.isEmpty)(r.eData)){var i=Object.keys(r.eData)[0];return t.commands.dispatch(Kc.a.updateEntityDefs,i,{shapeId:n,entityDefId:r.entityDefId,entityDefName:e})}}))).subscribe()},e.prototype.makeTypeEditable=function(e,t,n){this.commands.dispatch(Kc.a.switchTypeEditable,e,{editable:n,entityDefId:t})},e.prototype.removeType=function(e,t){this.commands.dispatch(Kc.a.updateEntityDefs,e,{entityDefId:t,action:"delete"})},e.prototype.renameType=function(e,t,n){this.commands.dispatch(Kc.a.updateEntityDefs,e,{entityDefId:t,entityDefName:n,action:"rename"})},e.prototype.showDropdowns=function(e){void 0===e&&(e="body");var t=document.querySelector("#showDropdownsTempStyle");t||((t=document.createElement("style")).id="showDropdownsTempStyle",document.head.appendChild(t)),t.textContent=e+" ul.abs-dropdown-items-container{ display: block !important }"},e.prototype.deleteEdata=function(e){var t=this;this.ell.getEDataModel(e).pipe(Object(S.a)((function(n){if(!n)return Object(Te.a)({});var i=n.getUsedDiagIds().map((function(n){return t.commands.dispatch(Ae.a.removeEdata,n,{eDataId:e}).pipe(Object(qr.a)())}));return Object(Gc.a)(Object(r.j)([Object(Te.a)({})],i))})),Object(S.a)((function(){return t.commands.dispatch(he.u.deleteEData,e,{modelType:Yc.b}).pipe(Object(qr.a)())}))).subscribe()},e.prototype.hideErrors=function(){x.P.set("DEBUG_ERROR_NOTIFICATIONS",!0)},e.prototype.showErrors=function(){x.P.set("DEBUG_ERROR_NOTIFICATIONS",!1)},e.prototype.setCanvasSensitivity=function(e,t){Xc.a.zoomSensitivity=e,Xc.a.panSensitivity=t},e.prototype.showFPSMeter=function(){var e=document.createElement("div");e.style.marginLeft="20px",e.style.display="inline",e.style.position="relative",e.style.marginLeft="8px",e.style.color="#383838",e.style.border="1px solid #b5b5b5",e.style.padding="3px 4px",e.style.top="14px",e.style.fontSize="10px",e.style.height="20px";var t=document.querySelector(".header-titles-container");t&&t.appendChild(e),Ki.Ticker.addEventListener("tick",(function(t){t.paused||(e.innerText=Math.round(Ki.Ticker.getMeasuredFPS())+" fps")}))},e.prototype.zoomPanRandom=function(){var e=this;setInterval((function(){e.commands.dispatch(Wr.a.zoomAndPanDiagram,{level:Math.random(),animate:!0,toCenter:!0})}),200)},e.prototype.dispatchDuplicateProject=function(e){var t=x.rb.projectId();this.commands.dispatch(he.u.duplicateProject,e,{id:t})},e.prototype.enableSmartRules=function(){this.stateSvc.set("SmartRulesEnabled",!0)},e.prototype.renderAllShapeViews=function(){var e=this;this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(I.a)((function(t){e.stateSvc.set("ActiveShapes",Object.keys(t.shapes))}))).subscribe()},e.prototype.startAutoDraw=function(e,t,n){var r=this;void 0===e&&(e=["general","grids-boards","flowchart","block","core"]),void 0===t&&(t=1e3),void 0===n&&(n=1e4);var i=setInterval((function(){var t=e[Math.floor(Math.random()*e.length)];r.loader.getLibrary(t).pipe(Object(Da.a)()).subscribe((function(e){var t,i=e.defs,a=i[Math.floor(Math.random()*i.length)].split("."),o=a.pop(),s=a.join("."),c=x.rb.shapeId();r.commands.dispatch(Ae.a.addDiagramShape,{shapes:(t={},t[c]={id:c,defId:s,version:o,x:Math.floor(Math.random()*n),y:Math.floor(Math.random()*n),type:"basic"},t)})}))}),t);this.autoDrowIntervals.push(i)},e.prototype.stopAutoDraw=function(){this.autoDrowIntervals.forEach((function(e){clearInterval(e)})),this.autoDrowIntervals=[]},e.prototype.startAutoShapeMove=function(e,t){var n=this;void 0===e&&(e=500),void 0===t&&(t=[]);var r=setInterval((function(){n.ll.forCurrent(!1).getDiagramOnce().subscribe((function(e){var r,i=Object.values(e.shapes).filter((function(e){return!t.includes(e.id)})).filter((function(e){return!e.isConnector()})).map((function(e){return e.id})),a=i[Math.floor(Math.random()*i.length)],o=e.shapes[a],s="shapes."+a+".x",c="shapes."+a+".y",l=o.x+50-Math.floor(100*Math.random()),u=o.y+50-Math.floor(100*Math.random());n.commands.dispatch(Ae.a.applyModifierDocument,{modifier:{$set:(r={},r[s]=l,r[c]=u,r)}})}))}),e);this.autoShapeMoveIntervals.push(r)},e.prototype.stopAutoShapeMove=function(){this.autoShapeMoveIntervals.forEach((function(e){clearInterval(e)})),this.autoShapeMoveIntervals=[]},e.prototype.getAvailableEdata=function(){this.ell.currentEDataModelsOnce().subscribe((function(e){e.forEach((function(e){console.group(e.id),console.log("Debugger: Edata Id",e.id),console.log("Debugger: Edata Def Id",e.defId),console.log("Debugger: Edata Def Name",e.name),console.groupEnd()}))}))},e.prototype.detachSelectedShapesFromEdata=function(e){var t=this.stateSvc.get("Selected"),n=this.getDiagramId();0!==t.length?(this.commands.dispatch(Ae.a.removeShapeFromEdata,n,{shapeIds:t}),this.commands.dispatch(Kc.a.deleteEntityShapes,e,{shapeIds:t,diagramId:n})):console.log("Debugger: No shapes selected")},e.prototype.fixBrokenEntities=function(e){var t=this;Object(Pt.b)(this.ll.forCurrent(!1).getDiagramOnce(),this.ell.getEData(e).pipe(Object(S.a)((function(e){return e.getEDataModelOnce()})))).pipe(Object(S.a)((function(e){var n=Object(r.h)(e,2),i=n[0],a=n[1];if(!i||!a)return Object(Te.a)({});var o=i.shapes,s=Qc.Sakota.create(a);Object.keys(o).forEach((function(e){var t=o[e];t.eDataId&&t.eDataId===s.id&&t.type!==pe.t.Connector&&(s.entities[t.entityId]&&(s.entities[t.entityId].shapes&&s.entities[t.entityId].shapes[i.id]||(s.entities[t.entityId].shapes||(s.entities[t.entityId].shapes={}),s.entities[t.entityId].shapes[i.id]={}),s.entities[t.entityId].shapes[i.id][e]=t.defId))}));var c=s.__sakota__.getChanges();return Object(Ct.isEmpty)(c)?void 0:t.commands.dispatch(Kc.a.applyModifierEData,a.id,{modifier:c,diagramId:i.id})}))).subscribe()},e.prototype.drawShapeBounds=function(){var e=this,t=this.stateSvc.get("DiagramCanvas"),n=new Ki.Shape;this.ll.forCurrent(!1).getDiagramModel().pipe(Object(Ot.a)(50)).subscribe((function(r){var i=e.shapeBoundsLocator.shapesTree.all();n.parent||t.addChild(n),n.graphics.clear(),i.forEach((function(e){n.graphics.setStrokeStyle(3).beginStroke("red").moveTo(e.x,e.y).lineTo(e.x+e.width,e.y).lineTo(e.x+e.width,e.y+e.height).lineTo(e.x,e.y+e.height).lineTo(e.x,e.y).endStroke()})),t.update()}))},e.prototype.notifyError=function(e){this.notifierController.show("Something-went-wrong.-notification",x.i,x.ib.Error,{inputs:{heading:"Something went wrong.",description:"Email change limit exceeded.",autoDismiss:!0}},e)},e.prototype.updateNotesSection=function(e,t,n){qc.a.updateDocument(e,t,n)},e.prototype.resetTooltipTour=function(){this.tooltipTourService.resetTooltipTour()},e.prototype.setConnectionStatus=function(e){"online"===e?this.stateSvc.set(O.c,O.c.ONLINE):"offline"===e?this.stateSvc.set(O.c,O.c.OFFLINE):"sleep"===e&&this.stateSvc.set(O.c,O.c.SLEEP)},e.prototype.markSelectionAsTemplates=function(e){void 0===e&&(e=!1);var t=this.stateSvc.get("CurrentUser");0!==Object(Ct.filter)(["C4A0C52C-4C0E-C4B2-B9D9-6833EE631D4B","A71A3132-CAEE-5029-4E0D-AAA721C15E72","PHPFC548-1E92-0A9B-C57C-39155950D0AD"],(function(e){return e===t})).length&&(e?this.commands.dispatch(Ae.a.markAsTemplateShape,{reset:!0}).subscribe():this.commands.dispatch(Ae.a.markAsTemplateShape,{shapeIds:this.stateSvc.get("Selected")}).subscribe())},e.prototype.getShapeCounts=function(){this.ll.forCurrent(!1).getDiagramOnce().subscribe((function(e){var t=Object.keys(e.shapes),n=Object(Ct.filter)(e.shapes,(function(e){return e.isTemplateShape}));console.log("Total Shape Count:",t.length," templateCount: ",n.length)}))},e.\u0275fac=function(t){return new(t||e)(k.qc(x.B),k.qc(At.a),k.qc(x.Hb),k.qc(Sn.b),k.qc(Sn.c),k.qc(zc.a),k.qc(gt.a),k.qc(yt.b),k.qc(Vc.a),k.qc(x.rb),k.qc(Hc.a),k.qc(Hr.d),k.qc(it.a),k.qc(Qn.a),k.qc(Ba.a),k.qc(x.jb),k.qc(Gr.a))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),el=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r)||this;return a.commandMapper=t,a.log=n,a.injector=r,a.dataStore=i,a}return Object(r.e)(t,e),t.prototype.execute=function(e,t,n){var r=this;return this.getChanges(e.toString()).pipe(Object(bt.a)((function(e){return!!e&&!!e.length})),Object(Mt.a)((function(e){return e.filter((function(e){return!!e}))})),Object(Mt.a)((function(e){return e.sort((function(e,t){return t.clientTime-e.clientTime}))})),Object(Mt.a)((function(e){var t=r.getModifierData(e),n=r.createEventData(e[0].event,e[0].ctx,t);return{commands:r.getCommandList(t),eventData:n}})),Object(S.a)((function(e){var t=e.commands,i=e.eventData;return r.processCommandList(t,i,void 0,n)})))},t.prototype.getChanges=function(e){var t=this,n=this.dataStore.getModelStore(he.j);return n.findChanges({"event.eventId":e}).pipe(Object(xt.a)(1),Object(S.a)((function(r){return Object(Ct.isEmpty)(r)?(n=t.dataStore.getModelStore(Yc.b)).findChanges({"event.eventId":e}).pipe(Object(xt.a)(1)):Object(Te.a)(r)})))},t.prototype.getModifierData=function(e){return e.map((function(e){return{command:e.command,modifier:e.modifier,reverter:e.reverter}}))},t.prototype.createEventData=function(e,t,n){return{eventId:x.rb.eventId(),eventName:e.eventName,originalEventId:e.eventId,scenario:this.scenario,ctx:t,modifierData:n}},t.prototype.getCommandList=function(e){var t=this,n=new x.Eb;return e.forEach((function(e){var r=t.commandMapper.getCommandByName(e.command);n.add(r)})),n},t.\u0275fac=function(e){return new(e||t)(k.qc(x.z),k.qc(x.cb),k.qc(k.C),k.qc(Sn.b))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(x.c),tl=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r,i)||this;return a.commandMapper=t,a.log=n,a.injector=r,a.dataStore=i,a}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"scenario",{get:function(){return x.A.REDO},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(k.qc(x.z),k.qc(x.cb),k.qc(k.C),k.qc(Sn.b))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(el),nl=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r,i)||this;return a.commandMapper=t,a.log=n,a.injector=r,a.dataStore=i,a}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"scenario",{get:function(){return x.A.UNDO},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(k.qc(x.z),k.qc(x.cb),k.qc(k.C),k.qc(Sn.b))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(el),rl=n("dKf+"),il=n("1JG0"),al=n("16Fa"),ol=n("EmgI"),sl=n("4t+C"),cl=n("zjfJ"),ll=n("8K1b"),ul=n("AqVP"),dl=n("fGyu"),pl=n("Czhu"),hl=n("9fIP"),fl=n("MMYH");function ml(e){return Array.isArray?Array.isArray(e):"[object Array]"===xl(e)}function gl(e){return"string"==typeof e}function bl(e){return"number"==typeof e}function vl(e){return!0===e||!1===e||function(e){return _l(e)&&null!==e}(e)&&"[object Boolean]"==xl(e)}function _l(e){return"object"==typeof e}function yl(e){return null!=e}function Ol(e){return!e.trim().length}function xl(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var El=function(e){return"Invalid value for key ".concat(e)},kl=function(e){return"Pattern length exceeds max of ".concat(e,".")},Cl=Object.prototype.hasOwnProperty,wl=function(){function e(t){var n=this;Object(hl.a)(this,e),this._keys=[],this._keyMap={};var r=0;t.forEach((function(e){var t=Sl(e);r+=t.weight,n._keys.push(t),n._keyMap[t.id]=t,r+=t.weight})),this._keys.forEach((function(e){e.weight/=r}))}return Object(fl.a)(e,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),e}();function Sl(e){var t=null,n=null,r=null,i=1;if(gl(e)||ml(e))r=e,t=Il(e),n=Tl(e);else{if(!Cl.call(e,"name"))throw new Error(function(e){return"Missing ".concat(e," property in key")}("name"));var a=e.name;if(r=a,Cl.call(e,"weight")&&(i=e.weight)<=0)throw new Error(function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")}(a));t=Il(a),n=Tl(a)}return{path:t,id:n,weight:i,src:r}}function Il(e){return ml(e)?e:e.split(".")}function Tl(e){return ml(e)?e.join("."):e}var Al={useExtendedSearch:!1,getFn:function(e,t){var n=[],r=!1;return function e(t,i,a){if(yl(t))if(i[a]){var o=t[i[a]];if(!yl(o))return;if(a===i.length-1&&(gl(o)||bl(o)||vl(o)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(o));else if(ml(o)){r=!0;for(var s=0,c=o.length;s<c;s+=1)e(o[s],i,a+1)}else i.length&&e(o,i,a+1)}else n.push(t)}(e,gl(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1},Pl=Object(pl.a)(Object(pl.a)(Object(pl.a)(Object(pl.a)({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),Al),Ml=/[^ ]+/g;function Dl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=new Map,n=Math.pow(10,e);return{get:function(e){var r=e.match(Ml).length;if(t.has(r))return t.get(r);var i=1/Math.sqrt(r),a=parseFloat(Math.round(i*n)/n);return t.set(r,a),a},clear:function(){t.clear()}}}var jl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getFn,r=void 0===n?Pl.getFn:n;Object(hl.a)(this,e),this.norm=Dl(3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}return Object(fl.a)(e,[{key:"setSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}},{key:"setIndexRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}},{key:"setKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=t,this._keysMap={},t.forEach((function(t,n){e._keysMap[t.id]=n}))}},{key:"create",value:function(){var e=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,gl(this.docs[0])?this.docs.forEach((function(t,n){e._addString(t,n)})):this.docs.forEach((function(t,n){e._addObject(t,n)})),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();gl(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){if(yl(e)&&!Ol(e)){var n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}}},{key:"_addObject",value:function(e,t){var n=this,r={i:t,$:{}};this.keys.forEach((function(t,i){var a=n.getFn(e,t.path);if(yl(a))if(ml(a))!function(){for(var e=[],t=[{nestedArrIndex:-1,value:a}];t.length;){var o=t.pop(),s=o.nestedArrIndex,c=o.value;if(yl(c))if(gl(c)&&!Ol(c)){var l={v:c,i:s,n:n.norm.get(c)};e.push(l)}else ml(c)&&c.forEach((function(e,n){t.push({nestedArrIndex:n,value:e})}))}r.$[i]=e}();else if(!Ol(a)){var o={v:a,n:n.norm.get(a)};r.$[i]=o}})),this.records.push(r)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),e}();function Rl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getFn,i=void 0===r?Pl.getFn:r,a=new jl({getFn:i});return a.setKeys(e.map(Sl)),a.setSources(t),a.create(),a}function Ll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.errors,r=void 0===n?0:n,i=t.currentLocation,a=void 0===i?0:i,o=t.expectedLocation,s=void 0===o?0:o,c=t.distance,l=void 0===c?Pl.distance:c,u=t.ignoreLocation,d=void 0===u?Pl.ignoreLocation:u,p=r/e.length;if(d)return p;var h=Math.abs(s-a);return l?p+h/l:h?1:p}function Nl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pl.minMatchCharLength,n=[],r=-1,i=-1,a=0,o=e.length;a<o;a+=1){var s=e[a];s&&-1===r?r=a:s||-1===r||((i=a-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}var Bl=32;function Ul(e){for(var t={},n=0,r=e.length;n<r;n+=1){var i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}var Fl=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.location,a=void 0===i?Pl.location:i,o=r.threshold,s=void 0===o?Pl.threshold:o,c=r.distance,l=void 0===c?Pl.distance:c,u=r.includeMatches,d=void 0===u?Pl.includeMatches:u,p=r.findAllMatches,h=void 0===p?Pl.findAllMatches:p,f=r.minMatchCharLength,m=void 0===f?Pl.minMatchCharLength:f,g=r.isCaseSensitive,b=void 0===g?Pl.isCaseSensitive:g,v=r.ignoreLocation,_=void 0===v?Pl.ignoreLocation:v;if(Object(hl.a)(this,e),this.options={location:a,threshold:s,distance:l,includeMatches:d,findAllMatches:h,minMatchCharLength:m,isCaseSensitive:b,ignoreLocation:_},this.pattern=b?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var y=function(e,t){n.chunks.push({pattern:e,alphabet:Ul(e),startIndex:t})},O=this.pattern.length;if(O>Bl){for(var x=0,E=O%Bl,k=O-E;x<k;)y(this.pattern.substr(x,Bl),x),x+=Bl;if(E){var C=O-Bl;y(this.pattern.substr(C),C)}}else y(this.pattern,0)}}return Object(fl.a)(e,[{key:"searchIn",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var i={isMatch:!0,score:0};return r&&(i.indices=[[0,e.length-1]]),i}var a=this.options,o=a.location,s=a.distance,c=a.threshold,l=a.findAllMatches,u=a.minMatchCharLength,d=a.ignoreLocation,p=[],h=0,f=!1;this.chunks.forEach((function(t){var n=t.pattern,i=t.alphabet,a=t.startIndex,m=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.location,a=void 0===i?Pl.location:i,o=r.distance,s=void 0===o?Pl.distance:o,c=r.threshold,l=void 0===c?Pl.threshold:c,u=r.findAllMatches,d=void 0===u?Pl.findAllMatches:u,p=r.minMatchCharLength,h=void 0===p?Pl.minMatchCharLength:p,f=r.includeMatches,m=void 0===f?Pl.includeMatches:f,g=r.ignoreLocation,b=void 0===g?Pl.ignoreLocation:g;if(t.length>Bl)throw new Error(kl(Bl));for(var v,_=t.length,y=e.length,O=Math.max(0,Math.min(a,y)),x=l,E=O,k=h>1||m,C=k?Array(y):[];(v=e.indexOf(t,E))>-1;){var w=Ll(t,{currentLocation:v,expectedLocation:O,distance:s,ignoreLocation:b});if(x=Math.min(w,x),E=v+_,k)for(var S=0;S<_;)C[v+S]=1,S+=1}E=-1;for(var I=[],T=1,A=_+y,P=1<<_-1,M=0;M<_;M+=1){for(var D=0,j=A;D<j;){Ll(t,{errors:M,currentLocation:O+j,expectedLocation:O,distance:s,ignoreLocation:b})<=x?D=j:A=j,j=Math.floor((A-D)/2+D)}A=j;var R=Math.max(1,O-j+1),L=d?y:Math.min(O+j,y)+_,N=Array(L+2);N[L+1]=(1<<M)-1;for(var B=L;B>=R;B-=1){var U=B-1,F=n[e.charAt(U)];if(k&&(C[U]=+!!F),N[B]=(N[B+1]<<1|1)&F,M&&(N[B]|=(I[B+1]|I[B])<<1|1|I[B+1]),N[B]&P&&(T=Ll(t,{errors:M,currentLocation:U,expectedLocation:O,distance:s,ignoreLocation:b}))<=x){if(x=T,(E=U)<=O)break;R=Math.max(1,2*O-E)}}if(Ll(t,{errors:M+1,currentLocation:O,expectedLocation:O,distance:s,ignoreLocation:b})>x)break;I=N}var q={isMatch:E>=0,score:Math.max(.001,T)};if(k){var W=Nl(C,h);W.length?m&&(q.indices=W):q.isMatch=!1}return q}(e,n,i,{location:o+a,distance:s,threshold:c,findAllMatches:l,minMatchCharLength:u,includeMatches:r,ignoreLocation:d}),g=m.isMatch,b=m.score,v=m.indices;g&&(f=!0),h+=b,g&&v&&(p=[].concat(Object(dl.a)(p),Object(dl.a)(v)))}));var m={isMatch:f,score:f?h/this.chunks.length:1};return f&&r&&(m.indices=p),m}}]),e}(),ql=function(){function e(t){Object(hl.a)(this,e),this.pattern=t}return Object(fl.a)(e,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(e){return Wl(e,this.multiRegex)}},{key:"isSingleMatch",value:function(e){return Wl(e,this.singleRegex)}}]),e}();function Wl(e,t){var n=e.match(t);return n?n[1]:null}var Hl=function(e){Object(ll.a)(n,e);var t=Object(ul.a)(n);function n(e){return Object(hl.a)(this,n),t.call(this,e)}return Object(fl.a)(n,[{key:"search",value:function(e){var t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),n}(ql),Kl=function(e){Object(ll.a)(n,e);var t=Object(ul.a)(n);function n(e){return Object(hl.a)(this,n),t.call(this,e)}return Object(fl.a)(n,[{key:"search",value:function(e){var t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),n}(ql),zl=function(e){Object(ll.a)(n,e);var t=Object(ul.a)(n);function n(e){return Object(hl.a)(this,n),t.call(this,e)}return Object(fl.a)(n,[{key:"search",value:function(e){var t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),n}(ql),Vl=function(e){Object(ll.a)(n,e);var t=Object(ul.a)(n);function n(e){return Object(hl.a)(this,n),t.call(this,e)}return Object(fl.a)(n,[{key:"search",value:function(e){var t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),n}(ql),Gl=function(e){Object(ll.a)(n,e);var t=Object(ul.a)(n);function n(e){return Object(hl.a)(this,n),t.call(this,e)}return Object(fl.a)(n,[{key:"search",value:function(e){var t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),n}(ql),Yl=function(e){Object(ll.a)(n,e);var t=Object(ul.a)(n);function n(e){return Object(hl.a)(this,n),t.call(this,e)}return Object(fl.a)(n,[{key:"search",value:function(e){var t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),n}(ql),Xl=function(e){Object(ll.a)(n,e);var t=Object(ul.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.location,o=void 0===a?Pl.location:a,s=i.threshold,c=void 0===s?Pl.threshold:s,l=i.distance,u=void 0===l?Pl.distance:l,d=i.includeMatches,p=void 0===d?Pl.includeMatches:d,h=i.findAllMatches,f=void 0===h?Pl.findAllMatches:h,m=i.minMatchCharLength,g=void 0===m?Pl.minMatchCharLength:m,b=i.isCaseSensitive,v=void 0===b?Pl.isCaseSensitive:b,_=i.ignoreLocation,y=void 0===_?Pl.ignoreLocation:_;return Object(hl.a)(this,n),(r=t.call(this,e))._bitapSearch=new Fl(e,{location:o,threshold:c,distance:u,includeMatches:p,findAllMatches:f,minMatchCharLength:g,isCaseSensitive:v,ignoreLocation:y}),r}return Object(fl.a)(n,[{key:"search",value:function(e){return this._bitapSearch.searchIn(e)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),n}(ql),Ql=function(e){Object(ll.a)(n,e);var t=Object(ul.a)(n);function n(e){return Object(hl.a)(this,n),t.call(this,e)}return Object(fl.a)(n,[{key:"search",value:function(e){for(var t,n=0,r=[],i=this.pattern.length;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,r.push([t,n-1]);var a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),n}(ql),Jl=[Hl,Ql,zl,Vl,Yl,Gl,Kl,Xl],$l=Jl.length,Zl=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function eu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((function(e){for(var n=e.trim().split(Zl).filter((function(e){return e&&!!e.trim()})),r=[],i=0,a=n.length;i<a;i+=1){for(var o=n[i],s=!1,c=-1;!s&&++c<$l;){var l=Jl[c],u=l.isMultiMatch(o);u&&(r.push(new l(u,t)),s=!0)}if(!s)for(c=-1;++c<$l;){var d=Jl[c],p=d.isSingleMatch(o);if(p){r.push(new d(p,t));break}}}return r}))}var tu=new Set([Xl.type,Ql.type]),nu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.isCaseSensitive,i=void 0===r?Pl.isCaseSensitive:r,a=n.includeMatches,o=void 0===a?Pl.includeMatches:a,s=n.minMatchCharLength,c=void 0===s?Pl.minMatchCharLength:s,l=n.ignoreLocation,u=void 0===l?Pl.ignoreLocation:l,d=n.findAllMatches,p=void 0===d?Pl.findAllMatches:d,h=n.location,f=void 0===h?Pl.location:h,m=n.threshold,g=void 0===m?Pl.threshold:m,b=n.distance,v=void 0===b?Pl.distance:b;Object(hl.a)(this,e),this.query=null,this.options={isCaseSensitive:i,includeMatches:o,minMatchCharLength:c,findAllMatches:p,ignoreLocation:u,location:f,threshold:g,distance:v},this.pattern=i?t:t.toLowerCase(),this.query=eu(this.pattern,this.options)}return Object(fl.a)(e,[{key:"searchIn",value:function(e){var t=this.query;if(!t)return{isMatch:!1,score:1};var n=this.options,r=n.includeMatches;e=n.isCaseSensitive?e:e.toLowerCase();for(var i=0,a=[],o=0,s=0,c=t.length;s<c;s+=1){var l=t[s];a.length=0,i=0;for(var u=0,d=l.length;u<d;u+=1){var p=l[u],h=p.search(e),f=h.isMatch,m=h.indices,g=h.score;if(!f){o=0,i=0,a.length=0;break}if(i+=1,o+=g,r){var b=p.constructor.type;tu.has(b)?a=[].concat(Object(dl.a)(a),Object(dl.a)(m)):a.push(m)}}if(i){var v={isMatch:!0,score:o/i};return r&&(v.indices=a),v}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(e,t){return t.useExtendedSearch}}]),e}(),ru=[];function iu(e,t){for(var n=0,r=ru.length;n<r;n+=1){var i=ru[n];if(i.condition(e,t))return new i(e,t)}return new Fl(e,t)}var au="$and",ou="$or",su="$path",cu="$val",lu=function(e){return!(!e[au]&&!e[ou])},uu=function(e){return!!e[su]},du=function(e){return!ml(e)&&_l(e)&&!lu(e)},pu=function(e){return Object(cl.a)({},au,Object.keys(e).map((function(t){return Object(cl.a)({},t,e[t])})))};function hu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.auto,i=void 0===r||r,a=function e(n){var r=Object.keys(n),a=uu(n);if(!a&&r.length>1&&!lu(n))return e(pu(n));if(du(n)){var o=a?n[su]:r[0],s=a?n[cu]:n[o];if(!gl(s))throw new Error(El(o));var c={keyId:Tl(o),pattern:s};return i&&(c.searcher=iu(s,t)),c}var l={children:[],operator:r[0]};return r.forEach((function(t){var r=n[t];ml(r)&&r.forEach((function(t){l.children.push(e(t))}))})),l};return lu(e)||(e=pu(e)),a(e)}function fu(e,t){var n=t.ignoreFieldNorm,r=void 0===n?Pl.ignoreFieldNorm:n;e.forEach((function(e){var t=1;e.matches.forEach((function(e){var n=e.key,i=e.norm,a=e.score,o=n?n.weight:null;t*=Math.pow(0===a&&o?Number.EPSILON:a,(o||1)*(r?1:i))})),e.score=t}))}function mu(e,t){var n=e.matches;t.matches=[],yl(n)&&n.forEach((function(e){if(yl(e.indices)&&e.indices.length){var n={indices:e.indices,value:e.value};e.key&&(n.key=e.key.src),e.idx>-1&&(n.refIndex=e.idx),t.matches.push(n)}}))}function gu(e,t){t.score=e.score}function bu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.includeMatches,i=void 0===r?Pl.includeMatches:r,a=n.includeScore,o=void 0===a?Pl.includeScore:a,s=[];return i&&s.push(mu),o&&s.push(gu),e.map((function(e){var n=e.idx,r={item:t[n],refIndex:n};return s.length&&s.forEach((function(t){t(e,r)})),r}))}var vu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;Object(hl.a)(this,e),this.options=Object(pl.a)(Object(pl.a)({},Pl),n),this.options.useExtendedSearch,this._keyStore=new wl(this.options.keys),this.setCollection(t,r)}return Object(fl.a)(e,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof jl))throw new Error("Incorrect 'index' type");this._myIndex=t||Rl(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(e){yl(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},t=[],n=0,r=this._docs.length;n<r;n+=1){var i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.limit,r=void 0===n?-1:n,i=this.options,a=i.includeMatches,o=i.includeScore,s=i.shouldSort,c=i.sortFn,l=i.ignoreFieldNorm,u=gl(e)?gl(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return fu(u,{ignoreFieldNorm:l}),s&&u.sort(c),bl(r)&&r>-1&&(u=u.slice(0,r)),bu(u,this._docs,{includeMatches:a,includeScore:o})}},{key:"_searchStringList",value:function(e){var t=iu(e,this.options),n=this._myIndex.records,r=[];return n.forEach((function(e){var n=e.v,i=e.i,a=e.n;if(yl(n)){var o=t.searchIn(n),s=o.isMatch,c=o.score,l=o.indices;s&&r.push({item:n,idx:i,matches:[{score:c,value:n,norm:a,indices:l}]})}})),r}},{key:"_searchLogical",value:function(e){var t=this,n=hu(e,this.options),r=this._myIndex.records,i={},a=[];return r.forEach((function(e){var r=e.$,o=e.i;if(yl(r)){var s=function e(n,r,i){if(!n.children){var a=n.keyId,o=n.searcher,s=t._findMatches({key:t._keyStore.get(a),value:t._myIndex.getValueForItemAtKeyId(r,a),searcher:o});return s&&s.length?[{idx:i,item:r,matches:s}]:[]}switch(n.operator){case au:for(var c=[],l=0,u=n.children.length;l<u;l+=1){var d=e(n.children[l],r,i);if(!d.length)return[];c.push.apply(c,Object(dl.a)(d))}return c;case ou:for(var p=[],h=0,f=n.children.length;h<f;h+=1){var m=e(n.children[h],r,i);if(m.length){p.push.apply(p,Object(dl.a)(m));break}}return p}}(n,r,o);s.length&&(i[o]||(i[o]={idx:o,item:r,matches:[]},a.push(i[o])),s.forEach((function(e){var t,n=e.matches;(t=i[o].matches).push.apply(t,Object(dl.a)(n))})))}})),a}},{key:"_searchObjectList",value:function(e){var t=this,n=iu(e,this.options),r=this._myIndex,i=r.keys,a=r.records,o=[];return a.forEach((function(e){var r=e.$,a=e.i;if(yl(r)){var s=[];i.forEach((function(e,i){s.push.apply(s,Object(dl.a)(t._findMatches({key:e,value:r[i],searcher:n})))})),s.length&&o.push({idx:a,item:r,matches:s})}})),o}},{key:"_findMatches",value:function(e){var t=e.key,n=e.value,r=e.searcher;if(!yl(n))return[];var i=[];if(ml(n))n.forEach((function(e){var n=e.v,a=e.i,o=e.n;if(yl(n)){var s=r.searchIn(n),c=s.isMatch,l=s.score,u=s.indices;c&&i.push({score:l,key:t,value:n,idx:a,norm:o,indices:u})}}));else{var a=n.v,o=n.n,s=r.searchIn(a),c=s.isMatch,l=s.score,u=s.indices;c&&i.push({score:l,key:t,value:a,norm:o,indices:u})}return i}}]),e}();vu.version="6.4.6",vu.createIndex=Rl,vu.parseIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getFn,r=void 0===n?Pl.getFn:n,i=e.keys,a=e.records,o=new jl({getFn:r});return o.setKeys(i),o.setIndexRecords(a),o},vu.config=Pl,vu.parseQuery=hu,function(){ru.push.apply(ru,arguments)}(nu);var _u=vu,yu=function(){function e(){}return e.prototype.prepareCollection=function(e,t,n){var r={includeScore:!0,shouldSort:!0,threshold:.4,ignoreFieldNorm:!0,ignoreLocation:!0,keys:t,useExtendedSearch:!0};if(n){var i=_u.parseIndex(n);this.fuseIndex=new _u(e,r,i)}else this.fuseIndex=new _u(e,r)},e.prototype.addCollection=function(e){var t=this;e.forEach((function(e){t.addDocument(e)}))},e.prototype.addDocument=function(e){this.fuseIndex.add(e)},e.prototype.removeDocument=function(e){this.fuseIndex.remove(e)},e.prototype.getIndexSize=function(){return this.fuseIndex?this.fuseIndex.getIndex().size():0},e.prototype.searchCollection=function(e,t){return this.fuseIndex?this.fuseIndex.search(e,t):[]},e}(),Ou=function(){function e(e,t,n,r,i){this.definitionLocator=e,this.datastore=t,this.ll=n,this.state=r,this.workerRegistry=i,this.fuseModel=new yu,this.dbDiagramInfoModel="rxdata.default.DiagramInfoModel",this.delayLoadingColection=3e3,this.type="document",this.workerRegistry.register("document-search","./document-search-web.worker"),this.documentSearchWorker=this.workerRegistry.fetch("document-search"),this.watchOnCollectionChanges(),this.listenToWorkerMessage(),this.isServiceWorkerSupported&&this.listenToWorkspaceCachingServiceWorker()}return Object.defineProperty(e.prototype,"isServiceWorkerSupported",{get:function(){return"serviceWorker"in navigator},enumerable:!1,configurable:!0}),e.prototype.search=function(e,t){var n=this.fuseModel.searchCollection(e,t);n=n.map((function(e){return e.item.score=e.score,e.item}));var r=this.sortItemsByProperty(n,["diagramId","score"]),i=this.bringGivenDiagramsToTop(r,this.state.get("CurrentDiagram"));return Object(Te.a)(i)},e.prototype.listenToWorkspaceCachingServiceWorker=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){"workspace-caching-completed"===t.data.message&&setTimeout((function(){e.loadAllCollections()}),e.delayLoadingColection)}))},e.prototype.listenToWorkerMessage=function(){var e=this;this.documentSearchWorker.onmessage=function(t){var n=t.data;"loaded-collection"===n.message?e.prepareFuseCollection(JSON.parse(n.fuse)):"remove-document"===n.message?e.removeFuseDocument(n.documentId):"add-collection"===n.message&&(e.fuseModel.getIndexSize()>0?e.addFuseCollection(n.collection):e.prepareFuseCollection({fuseIndex:null,collection:n.collection}))}},e.prototype.removeFuseDocument=function(e){this.fuseModel.removeDocument((function(t){return t.id===e}))},e.prototype.addFuseCollection=function(e){e.forEach((function(e){e.action=x.m.get("APP_URL")+"/diagram/"+e.diagramId+"/edit/shape/"+e.shapeId})),e&&e.length>0&&this.fuseModel.addCollection(e)},e.prototype.prepareFuseCollection=function(e){e&&(e.collection.forEach((function(e){e.action=x.m.get("APP_URL")+"/diagram/"+e.diagramId+"/edit/shape/"+e.shapeId})),this.fuseModel.prepareCollection(e.collection,["text"],e.fuseIndex))},e.prototype.loadAllCollections=function(){this.documentSearchWorker.postMessage({message:"start-load-collection",docs:$c.Collection.loki.getCollection(this.dbDiagramInfoModel).data,defs:this.definitionLocator.getCachedDefs()})},e.prototype.watchOnCollectionChanges=function(){var e=this;this.datastore.watch(Dt.a,{}).pipe(Object(I.a)((function(t){0===e.fuseModel.getIndexSize()&&e.loadAllCollections(),e.documentSearchWorker.postMessage({message:"update-collection-changes",collection:t,defs:e.definitionLocator.getCachedDefs()})}))).subscribe()},e.prototype.sortItemsByProperty=function(e,t,n){return void 0===n&&(n="~"),e.sort((function(e,r){var i=t.reduce((function(t,r){return t+n+e[r]}),""),a=t.reduce((function(e,t){return e+n+r[t]}),"");return i.localeCompare(a)}))},e.prototype.bringGivenDiagramsToTop=function(e,t){var n=e.filter((function(e){return e.diagramId===t})),i=e.filter((function(e){return e.diagramId!==t}));return Object(r.j)(n,i)},e.\u0275fac=function(t){return new(t||e)(k.qc(Vc.a),k.qc(Sn.b),k.qc(At.a),k.qc(x.Hb),k.qc(qn.a))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),xu=function(){function e(e,t){this.logger=e,this.dataStore=t,this.name="DiagramResponsibility"}return e.prototype.checkState=function(e){if(!e.states.diagramRequired)return Object(Te.a)(!0);this.logger.debug("DiagramResponsibility checkState");var t=this.dataStore.getModelStore(Dt.a),n={id:e.input.resourceId};return Object(Pt.b)(t.findOneRaw(n),t.findOneStatic(n)).pipe(Object(xt.a)(1),Object(Mt.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!(n&&i&&i.privacy)})))},e.prototype.nextResponsibility=function(e){return e.states.diagramRequired?["DiagramSubscriptionResponsibility"]:[]},e.prototype.result=function(e){if(!e.states.diagramRequired)return{type:"complete"}},e.\u0275fac=function(t){return new(t||e)(k.qc(x.cb),k.qc(Sn.b))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),Eu=function(){function e(e,t){this.logger=e,this.subManager=t,this.name="DiagramSubscriptionResponsibility"}return e.prototype.checkState=function(e){this.logger.debug("DiagramSubscriptionResponsibility checkState");var t=this.subManager.get(e.input.resourceId);return t?Object(Te.a)(t.currentStatus):Object(Te.a)({})},e.prototype.nextResponsibility=function(e){var t=this.getStates(e);if(t.diagramSubStarted||t.hasDiagram&&(!t.diagramSubErrored||!this.isPermOrAuthError(e)))return["PrivacyResponsibility"]},e.prototype.result=function(e){var t=this.getStates(e);return t.diagramSubErrored?this.getSubscriptionErrorOutcome(e,t):t.diagramSubStarted?void 0:{type:"commandEvent",action:t.isAuthenticated?Kr.a.startDiagramSubscriptionAndDeps:Kr.a.startDiagramSubscription,wait:!t.hasDiagram}},e.prototype.isPermissionError=function(e){var t=e.states.DiagramSubscriptionResponsibility.error;return!!t&&(1202===t.code||1203===t.code)},e.prototype.isAuthenticationError=function(e){var t=e.states.DiagramSubscriptionResponsibility.error;return!!t&&2201===t.code},e.prototype.isPermOrAuthError=function(e){return this.isPermissionError(e)||this.isAuthenticationError(e)},e.prototype.getStates=function(e){var t=e.states.DiagramSubscriptionResponsibility;return{diagramSubStarted:t&&t.subStatus===Hr.f.started,diagramSubErrored:t&&t.subStatus===Hr.f.errored,hasDiagram:!!e.states.DiagramResponsibility,isAuthenticated:0===e.states.AuthResponsibility}},e.prototype.getSubscriptionErrorOutcome=function(e,t){return this.isPermissionError(e)?{type:"route",action:e.input.resourceId+"/"+e.input.action+"-permission-error"}:this.isAuthenticationError(e)?t.isAuthenticated?{type:"commandEvent",action:Kr.a.startDiagramSubscriptionAndDeps,wait:!0}:{type:"command",action:"Authenticate",wait:!0}:t.hasDiagram?void 0:{type:"route",action:e.input.resourceId+"/diagram-error"}},e.\u0275fac=function(t){return new(t||e)(k.qc(x.cb),k.qc(Hr.d))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),ku=n("zd2y"),Cu=n("wx9+"),wu=n("F+Ww"),Su=n("i+Vu"),Iu=n("xYNC"),Tu=n("PIOu"),Au=n("ccLb"),Pu=n("TZl/"),Mu=function(e){function t(t,n,i){var a=e.call(this)||this;return a.state=t,a.ll=n,a.collabLocator=i,Object(Pt.b)([a.state.changes("CurrentUser"),a.state.changes("CurrentDiagram")]).pipe(Object(bt.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(S.a)((function(e){var t=Object(r.h)(e,2),n=(t[0],t[1]);return Object(J.a)(a.collabLocator.getCollabs(n).pipe(Object(Et.a)(Ct.isEqual),Object(I.a)((function(e){var t=e.find((function(e){return e.role===he.g.OWNER&&e.id!==a.state.get("CurrentUser")}));t&&t.plan?a.ownerUserPermModel=t.plan.permissions[pe.r.DIAGRAM_ADD_SHAPES]:a.ownerUserPermModel=null}))),a.ll.forCurrentObserver(!1).pipe(Object(S.a)((function(e){return e.getDiagramModel().pipe(Object(I.a)((function(e){a.shapeCount=Object.keys(Object(Ct.filter)(e.shapes,(function(e){return!e.isTemplateShape}))).length})))}))))}))).subscribe(),a}return Object(r.e)(t,e),t.prototype.check=function(e){return!!(e.allowed||this.ownerUserPermModel&&this.ownerUserPermModel.allowed)&&(!!(e.maxUsage<0||this.ownerUserPermModel&&this.ownerUserPermModel.maxUsage<0)||this.checkUseExceeded(e,this.ownerUserPermModel))},t.prototype.checkUseExceeded=function(e,t){return!!(e.maxUsage>0&&this.shapeCount<e.maxUsage||t&&t.maxUsage>0&&this.shapeCount<t.maxUsage)},t.\u0275fac=function(e){return new(e||t)(k.qc(x.Hb),k.qc(At.a),k.qc(_t.a))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(me.e),Du=function(e){function t(t,n){var i=e.call(this)||this;return i.state=t,i.ll=n,i.imageCount=0,Object(Pt.b)([i.state.changes("CurrentUser"),i.state.changes("CurrentDiagram")]).pipe(Object(bt.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(S.a)((function(){return i.ll.forCurrentObserver(!1).pipe(Object(S.a)((function(e){return e.getDiagramChanges()})),Object(S.a)((function(){return i.ll.forCurrentObserver(!1).pipe(Object(S.a)((function(e){return e.getDiagramOnce().pipe(Object(I.a)((function(e){i.imageCount=Object.values(e.shapes).filter((function(e){return e.type===pe.t.Image})).length})))})))})))}))).subscribe(),i}return Object(r.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&this.imageCount<e.maxUsage},t.\u0275fac=function(e){return new(e||t)(k.qc(x.Hb),k.qc(At.a))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(me.e),ju=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&localStorage.googleSearchedCount<=e.maxUsage},t.\u0275fac=function(e){return Ru(e||t)},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(me.e),Ru=k.oc(ju),Lu=function(e){function t(t){var n=e.call(this)||this;return n.injector=t,n}return Object(r.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&this.injector.get(wt).userCount.value<e.maxUsage},t.\u0275fac=function(e){return new(e||t)(k.qc(k.C))},t.\u0275prov=k.cc({token:t,factory:t.\u0275fac}),t}(me.e),Nu=n("35j0");function Bu(e,t){1&e&&(k.mc(0,"div",12),k.mc(1,"div",13),k.mc(2,"div",14),k.mc(3,"p",15),k.fd(4,"OFFLINE.PANEL.HEADING"),k.lc(),k.mc(5,"p",16),k.fd(6,"OFFLINE.PANEL.WEB_LINK_VIEWER"),k.lc(),k.lc(),k.lc(),k.lc())}function Uu(e,t){if(1&e){var n=k.nc();k.mc(0,"div",12),k.mc(1,"div",17),k.mc(2,"h2",18),k.fd(3,"WEBLINK.TITLE"),k.lc(),k.hc(4,"p",19),k.zc(5,"async"),k.mc(6,"div",20),k.mc(7,"button",21),k.uc("click",(function(){return k.Qc(n),k.yc(3).openLinkInNewWindow()})),k.mc(8,"label",22),k.fd(9,"WEBLINK.OPEN_LINK_BUTTON"),k.lc(),k.lc(),k.lc(),k.mc(10,"p",23),k.fd(11,"WEBLINK.WHITELIST_MSG"),k.lc(),k.mc(12,"p",23),k.fd(13,"WEBLINK.WHITELIST_EMAIL"),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc(3);k.Sb(4),k.Dc("innerHTML",k.Ac(5,1,r.getLinkMessage()),k.Rc)}}function Fu(e,t){if(1&e){var n=k.nc();k.mc(0,"div",12),k.mc(1,"div",17),k.mc(2,"h2",18),k.fd(3,"WEBLINK.TITLE_EMBEDDED"),k.lc(),k.hc(4,"p",19),k.zc(5,"async"),k.mc(6,"div",20),k.mc(7,"button",21),k.uc("click",(function(){return k.Qc(n),k.yc(3).openLinkInNewWindow()})),k.mc(8,"label",22),k.fd(9,"WEBLINK.OPEN_LINK_BUTTON"),k.lc(),k.lc(),k.lc(),k.mc(10,"p",23),k.fd(11,"WEBLINK.WHITELIST_MSG"),k.lc(),k.mc(12,"p",23),k.fd(13,"WEBLINK.WHITELIST_EMAIL"),k.lc(),k.lc(),k.lc()}if(2&e){var r=k.yc(3);k.Sb(4),k.Dc("innerHTML",k.Ac(5,1,r.getLinkMessage()),k.Rc)}}function qu(e,t){if(1&e&&k.hc(0,"iframe",24),2&e){var n=k.yc().ngIf;k.Dc("src",n.safeUrl,k.Sc)}}function Wu(e,t){if(1&e&&(k.mc(0,"div",25),k.mc(1,"div",26),k.mc(2,"a",27),k.fd(3),k.lc(),k.lc(),k.lc()),2&e){var n=k.yc().ngIf;k.Sb(2),k.Ec("href",n.url,k.Tc),k.Sb(1),k.gd(n.url)}}function Hu(e,t){if(1&e){var n=k.nc();k.mc(0,"div",3),k.mc(1,"div",4),k.mc(2,"div",5),k.dd(3,Bu,7,0,"div",6),k.zc(4,"async"),k.dd(5,Uu,14,3,"div",6),k.zc(6,"async"),k.zc(7,"async"),k.dd(8,Fu,14,3,"div",6),k.zc(9,"async"),k.zc(10,"async"),k.dd(11,qu,1,1,"iframe",7),k.zc(12,"async"),k.zc(13,"async"),k.dd(14,Wu,4,2,"div",8),k.zc(15,"async"),k.lc(),k.mc(16,"div",9),k.uc("click",(function(){return k.Qc(n),k.yc(2).hideComponentBox()})),k.xc(),k.mc(17,"svg",10),k.hc(18,"use",11),k.lc(),k.lc(),k.lc(),k.lc()}if(2&e){var r=t.ngIf,i=k.yc(2);k.Sb(3),k.Dc("ngIf",0===k.Ac(4,5,i.appConnectionStatus)),k.Sb(2),k.Dc("ngIf",0!==k.Ac(6,7,i.appConnectionStatus)&&!k.Ac(7,9,i.isLinkVerified)),k.Sb(3),k.Dc("ngIf",0!==k.Ac(9,11,i.appConnectionStatus)&&k.Ac(10,13,i.isLinkVerified)&&i.state.get("ApplicationIsEmbedded")),k.Sb(3),k.Dc("ngIf",k.Ac(12,15,i.isLinkVerified)&&0!==k.Ac(13,17,i.appConnectionStatus)&&!i.state.get("ApplicationIsEmbedded")),k.Sb(3),k.Dc("ngIf",k.Ac(15,19,i.isLinkVerified)&&!r.createlyMediaId&&!i.state.get("ApplicationIsEmbedded"))}}function Ku(e,t){if(1&e&&(k.mc(0,"div",1),k.dd(1,Hu,19,21,"div",2),k.zc(2,"async"),k.lc()),2&e){var n=k.yc();k.Sb(1),k.Dc("ngIf",k.Ac(2,1,n.viewerData))}}var zu=function(){function e(e,t,n){this.state=e,this.sanitizer=t,this.translateService=n,this.subs=[],this.showComponent=new T.a(!1),this.viewerData=new T.a({safeUrl:void 0,url:"",placeHolder:"",createlyMediaId:void 0}),this.isLinkVerified=new T.a(!1),this.initTime=Date.now()}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(O.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.state.changes("WebLinkViewer").pipe(Object(I.a)((function(t){t.open?(e.showComponent.next(!0),t.link=decodeURI(t.link),e.viewerData.next({safeUrl:e.sanitizer.bypassSecurityTrustResourceUrl(t.link),url:t.link,createlyMediaId:t.createlyMediaId})):e.showComponent.next(!1)})),Object(I.a)((function(){return e.checkLinkIsVerified()}))).subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getLinkMessage=function(){return this.translate("WEBLINK.LINK_DESC",{link:this.viewerData.value.url})},e.prototype.translate=function(e,t){return this.translateService.get(e,t).pipe(Object(xt.a)(1))},e.prototype.openLinkInNewWindow=function(){window.open(this.viewerData.value.url,"_blank")},e.prototype.hideComponentBox=function(){var e=this.state.get("WebLinkViewer");e.mediaName&&x.Jb.track("helpWidget.videos.window.close",{value1Type:"mediaTitle",value1:e.mediaName,value2Type:"durationsInMs",value2:(Date.now()-this.initTime).toString()}),this.state.set("WebLinkViewer",{open:!1})},e.prototype.checkLinkIsVerified=function(){return Object(r.c)(this,void 0,void 0,(function(){var e,t,n;return Object(r.f)(this,(function(r){switch(r.label){case 0:return(e=this.viewerData.value.url)?[4,fetch("./assets/security/whitelist.txt").then((function(e){return e.text()}))]:[2,void 0];case 1:return(t=r.sent())&&((n=this.extractDomain(e))&&t.includes(n)?this.isLinkVerified.next(!0):this.isLinkVerified.next(!1)),[2]}}))}))},e.prototype.extractDomain=function(e){var t,n;return(n=e.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n\?\=]+)/im))&&(n=(t=n[1]).match(/^[^\.]+\.(.+\..+)$/))&&(t=n[1]),t},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(va.b),k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["weblinks-viewer"]],decls:2,vars:3,consts:[["class","weblinks-viewer-overlay fx-cover fx-center-all",4,"ngIf"],[1,"weblinks-viewer-overlay","fx-cover","fx-center-all"],["class","weblinks-viewer-container",4,"ngIf"],[1,"weblinks-viewer-container"],[1,"weblinks-viewer-container-inner"],[1,"weblinks-viewer-content"],["class","weblinks-viewer-external-link-msg",4,"ngIf"],["allow","autoplay","allowfullscreen","",3,"src",4,"ngIf"],["class","wlv-footer",4,"ngIf"],[1,"weblinks-viewer-close-btn",3,"click"],[1,"nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close-2"],[1,"weblinks-viewer-external-link-msg"],[1,"fx-margin-top-30","fx-center-column"],[1,"weblink-viewer-offline-message","fx-margin-bottom-10"],["translate","",1,"navy-blue","nu-text-small","fx-margin-bottom-5","fx-center-all"],["translate","",1,"grey","nu-text-small"],[1,"weblinks-viewer-external-link-msg-inner"],["translate","",1,"fx-margin-bottom-5"],[1,"fx-margin-bottom-5",3,"innerHTML"],[1,"fx-margin-bottom-25","fx-span-width"],[1,"nu-btn-small","nu-btn-icon-text","primary","fx-center",3,"click"],["translate",""],["translate","",1,"nu-text-xsmall"],["allow","autoplay","allowfullscreen","",3,"src"],[1,"wlv-footer"],[1,"wlv-footer-left"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(k.dd(0,Ku,3,3,"div",0),k.zc(1,"async")),2&e&&k.Dc("ngIf",k.Ac(1,1,t.showComponent))},directives:[a.t,y.a],pipes:[a.b],styles:[".weblinks-viewer-overlay[_ngcontent-%COMP%]{z-index:1001;background-color:hsla(0,0%,40.8%,.8)}.weblinks-viewer-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column}.weblinks-viewer-container-inner[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:4px;display:flex;padding:32px 8px 8px}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  iframe{width:100%;height:inherit}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer{height:94px;background:#fff}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer-left{float:left;top:58px;left:24px;position:relative}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-nav{display:inline}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer-right{float:right;position:relative;top:60px;right:50px}.weblinks-viewer-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column;height:85vh;overflow:hidden}.weblinks-viewer-content-text[_ngcontent-%COMP%]{flex:1}.weblinks-viewer-button-container[_ngcontent-%COMP%]{text-align:right}.weblinks-viewer-close-btn[_ngcontent-%COMP%]{top:3px;right:5px;position:absolute;fill:rgba(98,104,106,.5)}.weblinks-viewer-close-btn[_ngcontent-%COMP%]:hover{cursor:pointer;fill:rgba(41,53,56,.7)}.weblinks-viewer-external-link-msg[_ngcontent-%COMP%]{background-color:#eceef2;height:80vh;position:relative;display:flex;align-items:center;justify-content:center}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]{display:inline-block;text-align:center;max-width:500px}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e7e7e}"],changeDetection:0}),e}(),Vu=n("elRR"),Gu=function(){function e(e,t,n){this.realtimeStates=e,this.dcs=t,this.state=n,this.peerMap={},this.previewChangeThrottle=200,this.subs=[]}return e.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("RealtimeConnectionStatus").pipe(Object(bt.a)((function(e){return e===yt.a.ONLINE})),Object(xt.a)(1),Object(S.a)((function(){return e.state.changes("CurrentDiagram").pipe(Object(S.a)((function(){return Object(J.a)(e.updateRealtimeStateChanges(),e.listenToRealtimeStates(),e.listenToRemovedPeers())})))}))).subscribe())},e.prototype.listenToRealtimeStates=function(){var t=this;return this.realtimeStates.get(e.KEY_PREVIEW_CHANGES).pipe(Object(I.a)((function(e){var n=t.state.get("FollowUser"),r=n.userId||n;if(x.P.get("DEBUG_PHOTON_PREVIEW_SYNC_RECEIVE")||e.userId===r){var i=e.peerId;t.peerMap[i]||(t.peerMap[i]=new hn.a,t.dcs.addPreviewStream(i,t.peerMap[e.peerId])),t.peerMap[i].next(JSON.parse(e.value))}})))},e.prototype.updateRealtimeStateChanges=function(){var t=this;return this.dcs.getPreviewChanges().pipe(Object(Ni.lodashThrottle)(this.previewChangeThrottle),Object(I.a)((function(n){x.P.get("DEBUG_PHOTON_PREVIEW_SYNC_EMIT")&&t.realtimeStates.set(e.KEY_PREVIEW_CHANGES,JSON.stringify(n))})))},e.prototype.listenToRemovedPeers=function(){var e=this;return this.realtimeStates.removedPeers().pipe(Object(I.a)((function(t){e.dcs.removePreviewStream(t),e.peerMap[t]&&(e.peerMap[t].complete(),delete e.peerMap[t])})))},e.KEY_PREVIEW_CHANGES="previewchanges",e.\u0275fac=function(t){return new(t||e)(k.qc(yt.b),k.qc(rl.a),k.qc(x.Hb))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),Yu=n("kgIF"),Xu=n("z3tU"),Qu=n("nWGD"),Ju=n("aYRE"),$u=n("3Rty"),Zu=n("u80+"),ed=n("c6sW");function td(e,t){if(1&e&&(k.mc(0,"a",7),k.mc(1,"button",8),k.mc(2,"span",9),k.fd(3),k.lc(),k.lc(),k.lc()),2&e){var n=k.yc();k.Dc("routerLink",n.buttonLink),k.Sb(3),k.gd(n.buttonCaption)}}function nd(e,t){if(1&e&&(k.mc(0,"a",10),k.mc(1,"button",8),k.mc(2,"span",9),k.fd(3),k.lc(),k.lc(),k.lc()),2&e){var n=k.yc();k.Dc("href",n.buttonLink,k.Tc),k.Sb(3),k.gd(n.buttonCaption)}}var rd=function(e){return{"background-image":e}},id=function(){function e(){}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_HEADING"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_DESCRIPTION"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_BUTTON"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return x.m.get("PLAN_PAGE_URL")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return"https://creately-google-drive-integration.s3.amazonaws.com/google-drive-success-img-large.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"light"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-white-200X80.svg"},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.ac({type:e,selectors:[["desktop-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],[1,"fullscreen-message"],["alt","Creately",1,"logo",3,"src"],["translate","",1,"title"],["translate","",1,"body","fx-margin-top-15"],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"btn-medium","btn-secondary","fullscreen-button"],["translate",""],["target","_blank",3,"href"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.hc(2,"img",2),k.mc(3,"h1",3),k.fd(4),k.lc(),k.mc(5,"p",4),k.fd(6),k.lc(),k.lc(),k.mc(7,"div"),k.dd(8,td,4,2,"a",5),k.dd(9,nd,4,2,"a",6),k.lc(),k.lc()),2&e&&(k.Yb("light","light"===t.screenColor)("hasImage",t.image),k.Dc("ngStyle",k.Ic(10,rd,"url("+t.image+")")),k.Sb(2),k.Dc("src",t.logo,k.Tc),k.Sb(2),k.gd(t.errorHeading),k.Sb(2),k.gd(t.errorMessage),k.Sb(2),k.Dc("ngIf",!t.externalLink),k.Sb(1),k.Dc("ngIf",t.externalLink))},directives:[a.w,y.a,a.t,b.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:1.25rem;flex-direction:column;background-color:#04263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#354b53;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:6rem}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{line-height:1.25rem;margin-top:3.5rem;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;margin-bottom:3rem;display:inline}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:1.25rem}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:3rem}"]}),e}();function ad(e,t){if(1&e&&(k.mc(0,"a",7),k.mc(1,"button",8),k.mc(2,"span",9),k.fd(3),k.lc(),k.lc(),k.lc()),2&e){var n=k.yc();k.Dc("routerLink",n.buttonLink),k.Sb(3),k.gd(n.buttonCaption)}}function od(e,t){if(1&e&&(k.mc(0,"a",10),k.mc(1,"button",8),k.mc(2,"span",9),k.fd(3),k.lc(),k.lc(),k.lc()),2&e){var n=k.yc();k.Dc("href",n.buttonLink,k.Tc),k.Sb(3),k.gd(n.buttonCaption)}}var sd=function(e){return{"background-image":e}},cd=function(){function e(e){this.env=e}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"LABELS.OOPS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.PERMISSION_ERROR_EDIT"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"BUTTONS.GOTO_DIAGRAMS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"dark"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-dark-200X80.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return this.env.isDesktop?"/redirect/manage/recent":"/start/dashboard"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!1},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(k.gc(x.F))},e.\u0275cmp=k.ac({type:e,selectors:[["edit-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],[1,"fullscreen-message"],["alt","Creately",1,"logo",3,"src"],["translate","",1,"title"],["translate","",1,"body","fx-margin-top-15"],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"btn-medium","btn-secondary","fullscreen-button"],["translate",""],["target","_blank",3,"href"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.hc(2,"img",2),k.mc(3,"h1",3),k.fd(4),k.lc(),k.mc(5,"p",4),k.fd(6),k.lc(),k.lc(),k.mc(7,"div"),k.dd(8,ad,4,2,"a",5),k.dd(9,od,4,2,"a",6),k.lc(),k.lc()),2&e&&(k.Yb("light","light"===t.screenColor)("hasImage",t.image),k.Dc("ngStyle",k.Ic(10,sd,"url("+t.image+")")),k.Sb(2),k.Dc("src",t.logo,k.Tc),k.Sb(2),k.gd(t.errorHeading),k.Sb(2),k.gd(t.errorMessage),k.Sb(2),k.Dc("ngIf",!t.externalLink),k.Sb(1),k.Dc("ngIf",t.externalLink))},directives:[a.w,y.a,a.t,b.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:1.25rem;flex-direction:column;background-color:#04263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#354b53;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:6rem}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{line-height:1.25rem;margin-top:3.5rem;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;margin-bottom:3rem;display:inline}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:1.25rem}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:3rem}"]}),e}();function ld(e,t){if(1&e&&(k.mc(0,"a",7),k.mc(1,"button",8),k.mc(2,"span",9),k.fd(3),k.lc(),k.lc(),k.lc()),2&e){var n=k.yc();k.Dc("routerLink",n.buttonLink),k.Sb(3),k.gd(n.buttonCaption)}}function ud(e,t){if(1&e&&(k.mc(0,"a",10),k.mc(1,"button",8),k.mc(2,"span",9),k.fd(3),k.lc(),k.lc(),k.lc()),2&e){var n=k.yc();k.Dc("href",n.buttonLink,k.Tc),k.Sb(3),k.gd(n.buttonCaption)}}var dd=function(e){return{"background-image":e}},pd=function(){function e(){}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"LABELS.OOPS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.PERMISSION_ERROR_VIEW"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"BUTTONS.GOTO_DIAGRAMS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"dark"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-dark-200X80.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return"/"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!1},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.ac({type:e,selectors:[["view-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],[1,"fullscreen-message"],["alt","Creately",1,"logo",3,"src"],["translate","",1,"title"],["translate","",1,"body","fx-margin-top-15"],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"btn-medium","btn-secondary","fullscreen-button"],["translate",""],["target","_blank",3,"href"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.hc(2,"img",2),k.mc(3,"h1",3),k.fd(4),k.lc(),k.mc(5,"p",4),k.fd(6),k.lc(),k.lc(),k.mc(7,"div"),k.dd(8,ld,4,2,"a",5),k.dd(9,ud,4,2,"a",6),k.lc(),k.lc()),2&e&&(k.Yb("light","light"===t.screenColor)("hasImage",t.image),k.Dc("ngStyle",k.Ic(10,dd,"url("+t.image+")")),k.Sb(2),k.Dc("src",t.logo,k.Tc),k.Sb(2),k.gd(t.errorHeading),k.Sb(2),k.gd(t.errorMessage),k.Sb(2),k.Dc("ngIf",!t.externalLink),k.Sb(1),k.Dc("ngIf",t.externalLink))},directives:[a.w,y.a,a.t,b.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:1.25rem;flex-direction:column;background-color:#04263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#354b53;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:6rem}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{line-height:1.25rem;margin-top:3.5rem;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;margin-bottom:3rem;display:inline}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:1.25rem}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:3rem}"]}),e}(),hd=n("7N9q");function fd(e,t){1&e&&(k.mc(0,"div",8),k.fd(1," GLOBAL_SEARCH.DOCUMENT_SEARCH_NO_RESULTS "),k.lc())}function md(e,t){1&e&&k.hc(0,"div",18)}function gd(e,t){if(1&e&&(k.mc(0,"div",15),k.dd(1,md,1,0,"div",16),k.mc(2,"p",17),k.fd(3),k.lc(),k.lc()),2&e){var n=k.yc(),r=n.first,i=n.$implicit;k.Sb(1),k.Dc("ngIf",!r),k.Sb(2),k.gd(i.title)}}function bd(e,t){if(1&e&&(k.mc(0,"div"),k.mc(1,"p",19),k.fd(2),k.lc(),k.lc()),2&e){var n=k.yc().$implicit;k.Sb(2),k.hd("",n.path,":")}}var vd=function(e){return{"document-item-selection":e}};function _d(e,t){if(1&e){var n=k.nc();k.mc(0,"div",9),k.dd(1,gd,4,2,"div",10),k.mc(2,"div",11),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc(2).itemClick(e.action)})),k.dd(3,bd,3,1,"div",12),k.mc(4,"p",13),k.hc(5,"span",14),k.lc(),k.lc(),k.lc()}if(2&e){var r=t.$implicit,i=t.index,a=k.yc(2);k.Sb(1),k.Dc("ngIf",a.shouldDisplayDiagramName(r)),k.Sb(1),k.Dc("ngClass",k.Ic(4,vd,i===a.selectedSearchResultsIndex)),k.Sb(1),k.Dc("ngIf",""!==r.path),k.Sb(2),k.Dc("innerHTML",r.text,k.Rc)}}var yd=function(){return{scrollYMarginOffset:1}};function Od(e,t){if(1&e&&(k.mc(0,"div",2),k.mc(1,"div",3),k.dd(2,fd,2,0,"div",4),k.lc(),k.mc(3,"perfect-scrollbar",5),k.mc(4,"div",6),k.dd(5,_d,6,6,"div",7),k.lc(),k.lc(),k.lc()),2&e){var n=t.ngIf;k.Sb(2),k.Dc("ngIf",0===n.length),k.Sb(1),k.Dc("config",k.Hc(3,yd)),k.Sb(2),k.Dc("ngForOf",n)}}var xd=function(){function e(e,t,n,r,i){this.searchService=e,this.state=t,this.linkService=n,this.translateService=r,this.ref=i,this.searchResults=new T.a([]),this.selectedSearchResultsIndex=-1,this.subs=[],this.lastDiagramId="",this.subs=[]}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.state.changes("GlobalSearchText").pipe(Object(S.a)((function(t){return t&&t.searchText?(e.resetSelectedItem(),e.doSearch(t.searchText)):Object(Te.a)({})}))).subscribe(),this.listenToArrowKeys().subscribe(),this.listenToEnterKey().subscribe())},e.prototype.shouldDisplayDiagramName=function(e){return e.diagramId!==this.lastDiagramId&&(this.lastDiagramId=e.diagramId,!0)},e.prototype.itemClick=function(e){this.selectedSearchResultsIndex=-1,this.panToShape(e)},e.prototype.panToShape=function(e){this.linkService.navigate(he.I.fromUrl(e))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.listenToArrowKeys=function(){var e=this;return Object(A.a)(window,"keydown").pipe(Object(bt.a)((function(e){return e.keyCode===pe.k.ArrowDown||e.keyCode===pe.k.ArrowUp})),Object(I.a)((function(t){-1===e.selectedSearchResultsIndex?e.searchResults.value.length>0&&e.selectedSearchResultsIndex++:t.keyCode===pe.k.ArrowDown?e.navigateToNextItem():t.keyCode===pe.k.ArrowUp&&e.navigateToPreviousItem(),e.ref.markForCheck();var n=e.searchResults.value[e.selectedSearchResultsIndex];n&&e.panToShape(n.action)})))},e.prototype.listenToEnterKey=function(){var e=this;return Object(A.a)(window,"keydown").pipe(Object(bt.a)((function(e){return e.keyCode===pe.k.Enter})),Object(I.a)((function(t){e.selectedSearchResultsIndex>-1&&e.state.set("GlobalSearch",{state:zr.c.CLOSE})})))},e.prototype.resetSelectedItem=function(){this.selectedSearchResultsIndex=-1,this.lastDiagramId=""},e.prototype.navigateToNextItem=function(){this.selectedSearchResultsIndex<this.searchResults.value.length-1&&this.selectedSearchResultsIndex++},e.prototype.navigateToPreviousItem=function(){this.selectedSearchResultsIndex>0&&this.selectedSearchResultsIndex--},e.prototype.doSearch=function(e){var t=this;return this.searchService.search(e,["document"],{keys:["text"],limit:10}).pipe(Object(I.a)((function(n){var r=JSON.parse(JSON.stringify(n)),i=t.adjustTextToFocus(r,e),a=t.highlightKeywordsInText(i,e),o=t.updateCurrentDiagramNames(a);t.searchResults.next(o)})))},e.prototype.updateCurrentDiagramNames=function(e){var t=this;return e=e.map((function(e){return e.diagramId===t.state.get("CurrentDiagram")&&(e.title=t.translateService.instant("LABELS.CURRENT_WORKSPACE")),e}))},e.prototype.adjustTextToFocus=function(e,t){var n=this;return e=e.map((function(e){return e.text=n.textAdjuster(e.text,t,7),e}))},e.prototype.textAdjuster=function(e,t,n){var r=e.indexOf(t);if(r>-1){var i=r+t.length,a=e.substring(i,e.length),o=e.substring(0,r).split(" "),s=o.length;if(s>n){for(var c=s-n,l="...",u=c=c>n?n:c;u>0;u--)l=l+o[s-u]+" ";e=l+" "+t+a}}return e},e.prototype.highlightKeywordsInText=function(e,t){var n=new RegExp(t,"gi");return e.map((function(e){return e.text=e.text.replace(n,"<span class='yellow'>"+t+"</span>"),e})),e},e.\u0275fac=function(t){return new(t||e)(k.gc(zt.a),k.gc(x.Hb),k.gc(aa.a),k.gc(y.e),k.gc(k.j))},e.\u0275cmp=k.ac({type:e,selectors:[["document-search"]],decls:3,vars:3,consts:[[1,"fx-pointer-events-auto"],["class","search-results-dropdown-results",4,"ngIf"],[1,"search-results-dropdown-results"],[1,"document-search-result-header"],["translate","","class","body",4,"ngIf"],[1,"search-result-scrollbar",3,"config"],[1,"search-result-content"],["class","search-result-shapes",4,"ngFor","ngForOf"],["translate","",1,"body"],[1,"search-result-shapes"],["class","document-search-title-container",4,"ngIf"],[1,"document-search-item-container","btn-free-size","btn-list-item",3,"ngClass","click"],[4,"ngIf"],[1,"document-line-item-text"],[3,"innerHTML"],[1,"document-search-title-container"],["class","separator-line",4,"ngIf"],[1,"document-search-title","caption","caption--bold"],[1,"separator-line"],[1,"document-line-item-path"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.dd(1,Od,6,4,"div",1),k.zc(2,"async"),k.lc()),2&e&&(k.Sb(1),k.Dc("ngIf",k.Ac(2,1,t.searchResults)))},directives:[a.t,R.b,a.s,y.a,a.q],pipes:[a.b],styles:[".document-line-item-text[_ngcontent-%COMP%]{display:block;align-items:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.document-line-item-text[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:.25rem}.document-line-item-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex:1}.document-line-item-text[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.document-line-item-path[_ngcontent-%COMP%]{padding-right:.25rem}.document-search-item-container[_ngcontent-%COMP%]{margin-top:.625rem;margin-bottom:.625rem;display:flex;flex-direction:row;justify-content:start}.separator-line[_ngcontent-%COMP%]{position:absolute;width:600px;height:0;margin-top:0;opacity:.6;border:1px solid #f1f4fa}.document-search-title[_ngcontent-%COMP%]{padding-top:.625rem;color:#354b53}.document-item-selection[_ngcontent-%COMP%]{background:rgba(81,192,170,.2);border-radius:.25rem;padding-top:.125rem;padding-bottom:.125rem}.document-search-title-container[_ngcontent-%COMP%]{padding-left:.25rem;padding-right:.25rem}.document-search-result-header[_ngcontent-%COMP%]{margin:.25rem}"],changeDetection:0}),e}(),Ed=n("T4Sa"),kd=n("61p6"),Cd=n("0itG"),wd=n("j1Bk"),Sd=n("UCH/"),Id=n("wvAw"),Td=n("tLVu"),Ad=n("2DR2"),Pd=n("pTJA"),Md=n("okSW"),Dd=n("XrO3"),jd=n("9pEM"),Rd=n("RrMq"),Ld=n("EePP"),Nd=["richTextAreaView"],Bd=["viewerContainer"],Ud=function(e){return{"fx-hidden":e}},Fd=function(e){return{tiptap:e}},qd=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.dtov=r,o.ll=i,o.state=a,o.subs=[],o.showComponent=new T.a(!1),o.activeEditor=new T.a(""),o}return Object(r.e)(t,e),t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.state.changes("ShapeDataViewer").pipe(Object(S.a)((function(t){return t.open?(e.showComponent.next(!0),t.shapeId?e.initComponent(t.shapeId):Object(Te.a)({})):(e.richTextAreaView.clear(),e.tipTapEditor=null,e.richTextEditorUIC=null,e.showComponent.next(!1),Object(Te.a)({}))}))).subscribe())},t.prototype.handlerMouseEnter=function(){var e=this.state.get("ShapeDataViewer").shapeId;this.state.set("ShapeDataViewer",{open:!0,shapeId:e,src:"viewer"})},t.prototype.handlerMouseLeave=function(){this.state.set("ShapeDataViewer",{open:!1,src:"viewer"})},t.prototype.initComponent=function(e){var t=this;return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(I.a)((function(n){var r=n.shapes[e];t.clearEditor();var i=r.getDataItems(n);i.description&&i.description.value&&"string"==typeof i.description.value?t.updateTiptapText(n,r):i&&i.dataitemsttings&&t.updateTextArea(n,r)})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.createTextArea=function(){var e=this.makeComponent(Or.a);this.richTextEditorUIC=e.instance,this.richTextEditorUIC.enableUploadOptions=!1,this.richTextEditorUIC.disableResizeOptions(),this.insert(this.richTextAreaView,e),e.changeDetectorRef.detectChanges()},t.prototype.createTiptapTextArea=function(){var e=this.makeComponent(en.a);this.tipTapEditor=e.instance,this.tipTapEditor.viewOnly=!0,this.tipTapEditor.diagramId=this.state.get("CurrentDiagram"),this.tipTapEditor.shapeIdSubject.next(this.state.get("ShapeDataViewer").shapeId),this.insert(this.richTextAreaView,e),e.changeDetectorRef.detectChanges()},t.prototype.updateTextArea=function(e,t){this.activeEditor.next("quill"),this.richTextEditorUIC||this.createTextArea(),this.richTextEditorUIC.quill.enable(!0);var n=t.getDataItems(e),r=Object(Ct.cloneDeep)(n.dataitemsttings);this.replaceValues(r,e,t),this.richTextEditorUIC.quill.setContents(r.value),this.richTextEditorUIC.quill.enable(!1);var i=t.bounds,a=this.viewerContainer.nativeElement;a.style.left=this.dtov.x(i.x+i.width)+"px",a.style.top=this.dtov.y(i.bottom-10)+"px"},t.prototype.updateTiptapText=function(e,t){this.activeEditor.next("tiptap"),this.tipTapEditor||this.createTiptapTextArea(),this.tipTapEditor.editor.commands.clearContent();var n=t.getDataItems(e);this.tipTapEditor.editor.commands.setContent(n.description.value);var r=t.bounds,i=this.viewerContainer.nativeElement;i.style.left=this.dtov.x(r.x+r.width)+"px",i.style.top=this.dtov.y(r.bottom-10)+"px"},t.prototype.clearEditor=function(){this.richTextEditorUIC&&this.richTextEditorUIC.quill.setContents([]),this.tipTapEditor&&this.tipTapEditor.editor.commands.clearContent()},t.prototype.replaceValues=function(e,t,n){var i,a;Object(Ct.values)(e.value.ops||[]).filter((function(e){return e.insert})).forEach((function(e){if("string"==typeof e.insert){var r=e.insert.replace(/({)?{{[^{}]*}}(?!})/g,(function(e,r,i){var o=e.replace(/{{/g,"").replace(/}}/g,""),s=n.getDataItems(t),c=Object(Ct.values)(s).find((function(e){return e.label===o}))||{};if(c.type===pe.c.BINARY)return c.value?"True":"False";if(c.type===pe.c.OPTION_LIST)return c.value;if(c.type===pe.c.STRING||c.type===pe.c.NUMBER)return c.value;if("users"===c.type)return((c.value||{}).people||[]).map((function(e){return e.fullName||e.email})).join(", ");if("tags"===c.type)return(c.value||[]).map((function(e){return e.name})).join(", ");if("date"===c.type&&c.value){var l=new Date(c.value);return l.getMonth()+1+"/"+l.getDate()+"/"+l.getFullYear()}return c.type===pe.c.STRING_HTML&&(a=c.value),""}));e.insert=r}})),e.value&&e.value.ops&&a&&(i=e.value.ops).push.apply(i,Object(r.j)(a.ops))},t.\u0275fac=function(e){return new(e||t)(k.gc(k.m),k.gc(k.C),k.gc(ai.a),k.gc(At.a),k.gc(x.Hb))},t.\u0275cmp=k.ac({type:t,selectors:[["shape-data-viewer"]],viewQuery:function(e,t){var n;(1&e&&(k.kd(Nd,!0,k.hb),k.kd(Bd,!0,k.r)),2&e)&&(k.Mc(n=k.vc())&&(t.richTextAreaView=n.first),k.Mc(n=k.vc())&&(t.viewerContainer=n.first))},features:[k.Pb],decls:9,vars:10,consts:[[1,"shape-data-viewer-container"],["viewerContainer",""],[3,"ngClass"],[3,"ngClass","mouseenter","mouseleave"],["richTextAreaView",""]],template:function(e,t){1&e&&(k.mc(0,"div",0,1),k.mc(2,"div",2),k.zc(3,"async"),k.mc(4,"div",3),k.uc("mouseenter",(function(){return t.handlerMouseEnter()}))("mouseleave",(function(){return t.handlerMouseLeave()})),k.zc(5,"async"),k.hc(6,"div",null,4),k.lc(),k.lc(),k.hc(8,"div"),k.lc()),2&e&&(k.Sb(2),k.Dc("ngClass",k.Ic(6,Ud,!k.Ac(3,2,t.showComponent))),k.Sb(2),k.Dc("ngClass",k.Ic(8,Fd,"tiptap"===k.Ac(5,4,t.activeEditor))))},directives:[a.q],pipes:[a.b],styles:[".shape-data-viewer-container[_ngcontent-%COMP%]{z-index:1000;position:relative;display:inline-block}.shape-data-viewer-container[_ngcontent-%COMP%]  .ql-container{position:absolute;display:inline-block;background-color:#fff;min-width:200px;max-width:500px;border-radius:4px;box-shadow:0 0 2px #8e8e8e;padding:12px}.shape-data-viewer-container[_ngcontent-%COMP%]  .ql-editor{max-height:400px;min-height:unset!important;padding-right:10px}.shape-data-viewer-container[_ngcontent-%COMP%]  span.file-embed-option[data-id=remove]{display:none!important}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor{position:absolute;display:inline-block;background-color:#fff;min-width:200px;max-width:500px;border-radius:4px;box-shadow:0 0 2px #8e8e8e;padding:12px;max-height:400px;overflow:scroll}.shape-data-viewer-container[_ngcontent-%COMP%]  .prose{min-width:480px}.shape-data-viewer-container[_ngcontent-%COMP%]  .more-options{display:none!important}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor>div{padding-right:15px;pointer-events:none;width:500px}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor{min-height:unset!important}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor editable-label{display:block!important}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor.tiptap-child-editor{font-size:.875rem}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap rich-text-editor-uic, .shape-data-viewer-container[_ngcontent-%COMP%]  tiptap-editor-component{display:none}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap tiptap-editor-component{display:block!important}"],changeDetection:0}),t}(E.k),Wd=n("TAUj"),Hd=n("T6P6"),Kd=n("34tD"),zd=n("BQCR"),Vd=n("J8oI"),Gd=n("2ZsA"),Yd=n("wuOO"),Xd=n("ujvC"),Qd=function(e){return{event:e}};function Jd(e,t){if(1&e&&(k.mc(0,"button",1),k.uc("click",(function(){return t.$implicit.clickHandler()})),k.fd(1),k.lc()),2&e){var n=t.$implicit;k.Yb("secondary","outlined"===n.style)("primary","primary"===n.style),k.Dc("trackAction",k.Ic(7,Qd,n.id)),k.Tb("data-testid",n.testId),k.Sb(1),k.hd(" ",n.label,"\n")}}var $d=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.ac({type:e,selectors:[["tour-buttons"]],inputs:{buttons:"buttons"},decls:1,vars:1,consts:[["class","tour-button nu-btn-med","translate","",3,"trackAction","secondary","primary","click",4,"ngFor","ngForOf"],["translate","",1,"tour-button","nu-btn-med",3,"trackAction","click"]],template:function(e,t){1&e&&k.dd(0,Jd,2,9,"button",0),2&e&&k.Dc("ngForOf",t.buttons)},directives:[a.s,y.a,Jr.a],styles:[".tour-button[_ngcontent-%COMP%]{min-width:100px;padding-left:20px;padding-right:20px}"],changeDetection:0}),e}();function Zd(e,t){if(1&e){var n=k.nc();k.mc(0,"span",2),k.xc(),k.mc(1,"svg",3),k.uc("click",(function(){k.Qc(n);var e=t.$implicit;return k.yc().navButtonClicked.next(e.id)})),k.hc(2,"use"),k.lc(),k.lc()}if(2&e){var r=t.$implicit,i=k.yc();k.Sb(1),k.Yb("selected",r.id===i.selected),k.Sb(1),k.Tb("href",i.iconURL(r.paginationSymbol),null,"xlink")}}var ep=function(){function e(){this.navButtonClicked=new k.t}return e.prototype.iconURL=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.ac({type:e,selectors:[["tour-pagination"]],inputs:{cardList:"cardList",selected:"selected"},outputs:{navButtonClicked:"navButtonClicked"},decls:2,vars:1,consts:[[1,"tour-pagination"],["class","pagination-button",4,"ngFor","ngForOf"],[1,"pagination-button"],[1,"nu-icon",3,"click"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.dd(1,Zd,3,3,"span",1),k.lc()),2&e&&(k.Sb(1),k.Dc("ngForOf",t.cardList))},directives:[a.s],styles:[".pagination-button[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}.pagination-button[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#61a15e}.pagination-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#dcdcdc}.pagination-button[_ngcontent-%COMP%]   svg.selected[_ngcontent-%COMP%]{color:#08436b}"],changeDetection:0}),e}(),tp=function(){function e(e,t){this.connection=e,this.commandService=t}return e.prototype.start=function(){this.userUpdateSubscription||(this.userUpdateSubscription=this.listenToUserUpdateMessages().subscribe())},e.prototype.listenToUserUpdateMessages=function(){var e=this;return this.connection.inStream.pipe(Object(bt.a)((function(e){return"sub"===e.type&&"update"===e.msg&&"User"===e.sub})),Object(S.a)((function(t){return e.commandService.dispatch(me.u.updateUserPermission,t.ppld)})))},e.\u0275fac=function(t){return new(t||e)(k.qc(O.g),k.qc(x.B))},e.\u0275prov=k.cc({token:e,factory:e.\u0275fac}),e}(),np=n("o+Mh"),rp=n("onas"),ip=n("6IEn"),ap=n("B1tl"),op=n("CdCz"),sp=n("k/7B"),cp=n("r7/9"),lp=n("G3/p"),up=n("qlkn"),dp=n("nwI5"),pp=n("f0nv"),hp=n("7+LA"),fp=n("z3n9"),mp=n("SXG+"),gp=n("4C8c"),bp=n("1pbQ"),vp=["floatingCard"];function _p(e,t){if(1&e){var n=k.nc();k.mc(0,"div",1,2),k.mc(2,"div",3),k.uc("click",(function(){return k.Qc(n),k.yc().closeFloatingMedia()})),k.xc(),k.mc(3,"svg",4),k.hc(4,"use",5),k.lc(),k.lc(),k.wc(),k.mc(5,"media-card",6),k.uc("click",(function(){return k.Qc(n),k.yc().closeFloatingMedia()})),k.lc(),k.hc(6,"div",7),k.lc()}if(2&e){var r=k.yc();k.Sb(5),k.Dc("card",r.card)("showHeading",!1)}}var yp=function(){function e(e,t,n){this.state=e,this.translate=t,this.commandSvc=n,this.showHeading=!1,this.subs=[],this.animationStartDelay=6e4,this.animationDuration=100,this.wiggleDelay=61e3,this.numBounces=5,this.showFloatingMediaCard=new T.a(!1)}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.state.changes("FloatingMedia").pipe(Object(I.a)((function(t){t.open?(e.showFloatingMediaCard.next(!0),e.card=t,e.card.size="xlarge"):e.showFloatingMediaCard.next(!1)}))).subscribe())},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(Object(Ma.a)(this.animationStartDelay,this.wiggleDelay).pipe(Object(bt.a)((function(){return e.showFloatingMediaCard.value})),Object(xt.a)(3),Object(I.a)((function(){e.wiggleAnimation().subscribe()}))).subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.closeFloatingMedia=function(){var e=this;x.Jb.track("helpWidget.videos.compactVid.click",{value1Type:"mediaTitle",value1:this.card.name}),this.state.set("FloatingMedia",{open:!1});var t=x.Rb.find((function(t){return t.id===e.card.id}));t&&this.commandSvc.dispatch(me.u.updateUserSeenMedia,{mediaType:t.mediaType,newMediaId:t.id})},e.prototype.wiggleAnimation=function(){var e=this,t=0,n="left";return Object(Ma.a)(0,this.animationDuration).pipe(Object(xt.a)(this.numBounces),Object(I.a)((function(){++t===e.numBounces?e.resetCardPosition():"left"===n?(e.triggerWiggleLeftAnimation(),n="right"):(e.triggerWiggleRightAnimation(),n="left")})))},e.prototype.triggerWiggleRightAnimation=function(){var e=new x.l({from:{transform:"rotate(2deg)"},to:{transform:"rotate(-2deg)"},transitionProperty:"transform",easing:"linear",duration:this.animationDuration});return e.element=this.floatingCard.nativeElement,e},e.prototype.triggerWiggleLeftAnimation=function(){var e=new x.l({from:{transform:"rotate(-2deg)"},to:{transform:"rotate(2deg)"},transitionProperty:"transform",easing:"linear",duration:this.animationDuration});return e.element=this.floatingCard.nativeElement,e},e.prototype.resetCardPosition=function(){var e=new x.l({from:{transform:"rotate(0deg)"},to:{transform:"rotate(0deg)"},transitionProperty:"transform",easing:"linear",duration:50});return e.element=this.floatingCard.nativeElement,e},e.\u0275fac=function(t){return new(t||e)(k.gc(x.Hb),k.gc(y.e),k.gc(x.B))},e.\u0275cmp=k.ac({type:e,selectors:[["floating-media-card"]],viewQuery:function(e,t){var n;(1&e&&k.kd(vp,!0,k.r),2&e)&&(k.Mc(n=k.vc())&&(t.floatingCard=n.first))},decls:2,vars:3,consts:[["class","floating-card fx-pointer-events-auto",4,"ngIf"],[1,"floating-card","fx-pointer-events-auto"],["floatingCard",""],[1,"close-btn",3,"click"],[1,"nu-icon-xsmall"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close-2"],[3,"card","showHeading","click"],[1,"speechBubbleBottomRight"]],template:function(e,t){1&e&&(k.dd(0,_p,7,2,"div",0),k.zc(1,"async")),2&e&&k.Dc("ngIf",k.Ac(1,1,t.showFloatingMediaCard))},directives:[a.t,L.a],pipes:[a.b],styles:[".floating-card[_ngcontent-%COMP%]{box-shadow:0 2px 2px rgba(0,0,0,.15),0 1px 12px rgba(0,0,0,.15);padding:.5rem;margin-right:.25rem;position:absolute;width:288px;z-index:2;will-change:transform,opacity;bottom:5rem;right:1rem;background:#fff;border-radius:.5rem}.floating-card[_ngcontent-%COMP%]:hover{cursor:pointer;background:#d5e8f4}.speechBubbleBottomRight[_ngcontent-%COMP%]{width:0;height:0;position:absolute;border-left:.375rem solid transparent;border-right:.375rem solid transparent;border-top:.5rem solid #fff;bottom:-8px;right:2rem}.floating-card[_ngcontent-%COMP%]:hover   .speechBubbleBottomRight[_ngcontent-%COMP%]{border-top:.5rem solid #d5e8f4}.close-btn[_ngcontent-%COMP%]{position:absolute;right:.25rem;top:.25rem;fill:#64767d}.close-btn[_ngcontent-%COMP%]:hover{cursor:pointer;fill:#272932}"],changeDetection:0}),e}(),Op=n("VkJx"),xp=n("HwXF"),Ep=n("OyMH"),kp=n("3ny2"),Cp=n("gwFp"),wp=n("y0Uh"),Sp=n("IscX"),Ip=n("m46B"),Tp=n("4+Dq"),Ap=n("muqe"),Pp=n("Oo5b"),Mp=n("zygG"),Dp=n("gk5g"),jp=n("74l2"),Rp=Dp.e.create({name:"detailsContent",content:"block+",defining:!0,selectable:!1,addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:'div[data-type="'.concat(this.name,'"]')}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",Object(Dp.y)(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addNodeView:function(){var e=this;return function(t){var n=t.HTMLAttributes,r=document.createElement("div"),i=Object(Dp.y)(e.options.HTMLAttributes,n,{"data-type":e.name,hidden:"hidden"});return Object.entries(i).forEach((function(e){var t=Object(Mp.a)(e,2),n=t[0],i=t[1];return r.setAttribute(n,i)})),r.addEventListener("toggleDetailsContent",(function(){r.toggleAttribute("hidden")})),{dom:r,contentDOM:r,ignoreMutation:function(e){return"selection"!==e.type&&(!r.contains(e.target)||r===e.target)},update:function(t){return t.type===e.type}}}},addKeyboardShortcuts:function(){var e=this;return{Enter:function(t){var n=t.editor,r=n.state,i=n.view,a=r.selection,o=a.$from,s=a.empty,c=Object(Dp.m)((function(t){return t.type===e.type}))(a);if(!s||!c||!c.node.childCount)return!1;var l=o.index(c.depth),u=c.node.childCount;if(u!==l+1)return!1;var d=c.node.type.contentMatch.defaultType,p=null==d?void 0:d.createAndFill();if(!p)return!1;var h=r.doc.resolve(c.pos+1),f=u-1,m=c.node.child(f),g=h.posAtIndex(f,c.depth);if(!m.eq(p))return!1;var b=o.node(-3);if(!b)return!1;var v=o.indexAfter(-3),_=Object(Dp.i)(b.contentMatchAt(v));if(!_||!b.canReplaceWith(v,v,_))return!1;var y=_.createAndFill();if(!y)return!1;var O=r.tr,x=o.after(-2);O.replaceWith(x,x,y);var E=O.doc.resolve(x),k=jp.e.near(E,1);O.setSelection(k);var C=g,w=g+m.nodeSize;return O.delete(C,w),O.scrollIntoView(),i.dispatch(O),!0}}}}),Lp=n("Cleu"),Np=n("FO84"),Bp=n("Vinz"),Up=n("L/OV"),Fp=n("DztM"),qp=n("kY5X"),Wp=n("b4ou"),Hp=n("BC8r"),Kp=n("mbvX"),zp=n.n(Kp);function Vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gp(){return(Gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yp(e,t,n){var r=e;return Object.keys(t).forEach((function(e){n.indexOf(e)>-1?r.dataset[e]=t[e]:delete r.dataset[e]})),r}var Xp=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isOpen=!1,this.itemIndex=0,this.mentionCharPos=null,this.cursorPos=null,this.values=[],this.suspendMouseEnter=!1,this.existingSourceExecutionToken=null,this.quill=t,this.options={source:null,renderItem:function(e){return"".concat(e.value)},renderLoading:function(){return null},onSelect:function(e,t){t(e)},mentionDenotationChars:["@"],showDenotationChar:!1,allowedChars:/^[a-zA-Z0-9_]*$/,minChars:0,maxChars:1e4,offsetTop:2,offsetLeft:0,isolateCharacter:!1,fixMentionsToQuill:!1,positioningStrategy:"normal",defaultMenuOrientation:"bottom",blotName:"mention",dataAttributes:["id","value","denotationChar","link","target","disabled"],linkTarget:"_blank",onOpen:function(){return!0},onClose:function(){return!0},listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",spaceAfterInsert:!1},Gp(this.options,n,{dataAttributes:Array.isArray(n.dataAttributes)?this.options.dataAttributes.concat(n.dataAttributes):this.options.dataAttributes}),this.mentionContainer=document.createElement("div"),this.mentionContainer.className=this.options.mentionContainerClass?this.options.mentionContainerClass:"",this.mentionContainer.style.cssText="display: none; position: absolute;",this.mentionContainer.onmousemove=this.onContainerMouseMove.bind(this),this.options.fixMentionsToQuill&&(this.mentionContainer.style.width="auto"),this.mentionList=document.createElement("ul"),this.mentionList.className=this.options.mentionListClass?this.options.mentionListClass:"",this.mentionContainer.appendChild(this.mentionList),t.on("text-change",this.onTextChange.bind(this)),t.on("selection-change",this.onSelectionChange.bind(this)),t.keyboard.addBinding({key:"Tab"},this.selectHandler.bind(this)),t.keyboard.bindings.Tab.unshift(t.keyboard.bindings.Tab.pop()),t.keyboard.addBinding({key:"Enter"},this.selectHandler.bind(this)),t.keyboard.bindings.Enter.unshift(t.keyboard.bindings.Enter.pop()),t.keyboard.addBinding({key:"Escape"},this.escapeHandler.bind(this)),t.keyboard.addBinding({key:"ArrowUp"},this.upHandler.bind(this)),t.keyboard.addBinding({key:"ArrowDown"},this.downHandler.bind(this))}var t,n,r;return t=e,(n=[{key:"selectHandler",value:function(){return!(this.isOpen&&!this.existingSourceExecutionToken&&(this.selectItem(),1))}},{key:"escapeHandler",value:function(){return!this.isOpen||(this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList(),!1)}},{key:"upHandler",value:function(){return!(this.isOpen&&!this.existingSourceExecutionToken&&(this.prevItem(),1))}},{key:"downHandler",value:function(){return!(this.isOpen&&!this.existingSourceExecutionToken&&(this.nextItem(),1))}},{key:"showMentionList",value:function(){"fixed"===this.options.positioningStrategy?document.body.appendChild(this.mentionContainer):this.quill.container.appendChild(this.mentionContainer),this.mentionContainer.style.visibility="hidden",this.mentionContainer.style.display="",this.mentionContainer.scrollTop=0,this.setMentionContainerPosition(),this.setIsOpen(!0)}},{key:"hideMentionList",value:function(){this.mentionContainer.style.display="none",this.mentionContainer.remove(),this.setIsOpen(!1)}},{key:"highlightItem",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=0;t<this.mentionList.childNodes.length;t+=1)this.mentionList.childNodes[t].classList.remove("selected");if(-1!==this.itemIndex&&"true"!==this.mentionList.childNodes[this.itemIndex].dataset.disabled&&(this.mentionList.childNodes[this.itemIndex].classList.add("selected"),e)){var n=this.mentionList.childNodes[this.itemIndex].offsetHeight,r=this.mentionList.childNodes[this.itemIndex].offsetTop,i=this.mentionContainer.scrollTop,a=i+this.mentionContainer.offsetHeight;r<i?this.mentionContainer.scrollTop=r:r>a-n&&(this.mentionContainer.scrollTop+=r-a+n)}}},{key:"getItemData",value:function(){var e=this.mentionList.childNodes[this.itemIndex].dataset.link,t=void 0!==e,n=this.mentionList.childNodes[this.itemIndex].dataset.target;return t&&(this.mentionList.childNodes[this.itemIndex].dataset.value='<a href="'.concat(e,'" target=').concat(n||this.options.linkTarget,">").concat(this.mentionList.childNodes[this.itemIndex].dataset.value)),this.mentionList.childNodes[this.itemIndex].dataset}},{key:"onContainerMouseMove",value:function(){this.suspendMouseEnter=!1}},{key:"selectItem",value:function(){var e=this;if(-1!==this.itemIndex){var t=this.getItemData();t.disabled||(this.options.onSelect(t,(function(t){e.insertItem(t)})),this.hideMentionList())}}},{key:"insertItem",value:function(e,t){var n,r=e;null!==r&&(this.options.showDenotationChar||(r.denotationChar=""),t?n=this.cursorPos:(n=this.mentionCharPos,this.quill.deleteText(this.mentionCharPos,this.cursorPos-this.mentionCharPos,zp.a.sources.USER)),this.quill.insertText(n,r.value,zp.a.sources.USER),this.options.spaceAfterInsert?(this.quill.insertText(n+r.value.length," ",zp.a.sources.USER),this.quill.setSelection(n+r.value.length+1,zp.a.sources.USER)):this.quill.setSelection(n+r.value.length,zp.a.sources.USER),this.hideMentionList())}},{key:"onItemMouseEnter",value:function(e){if(!this.suspendMouseEnter){var t=Number(e.target.dataset.index);Number.isNaN(t)||t===this.itemIndex||(this.itemIndex=t,this.highlightItem(!1))}}},{key:"onDisabledItemMouseEnter",value:function(e){this.suspendMouseEnter||(this.itemIndex=-1,this.highlightItem(!1))}},{key:"onItemClick",value:function(e){0===e.button&&(e.preventDefault(),e.stopImmediatePropagation(),this.itemIndex=e.currentTarget.dataset.index,this.highlightItem(),this.selectItem())}},{key:"onItemMouseDown",value:function(e){e.preventDefault(),e.stopImmediatePropagation()}},{key:"renderLoading",value:function(){if(this.options.renderLoading())if(this.mentionContainer.getElementsByClassName("ql-mention-loading").length>0)this.showMentionList();else{this.mentionList.innerHTML="";var e=document.createElement("div");e.className="ql-mention-loading",e.innerHTML=this.options.renderLoading(),this.mentionContainer.append(e),this.showMentionList()}}},{key:"removeLoading",value:function(){var e=this.mentionContainer.getElementsByClassName("ql-mention-loading");e.length>0&&e[0].remove()}},{key:"renderList",value:function(e,t,n){if(t&&t.length>0){this.removeLoading(),this.values=t,this.mentionList.innerHTML="";for(var r=-1,i=0;i<t.length;i+=1){var a=document.createElement("li");a.className=this.options.listItemClass?this.options.listItemClass:"",t[i].disabled?a.className+=" disabled":-1===r&&(r=i),a.dataset.index=i,a.innerHTML=this.options.renderItem(t[i],n),t[i].disabled?a.onmouseenter=this.onDisabledItemMouseEnter.bind(this):(a.onmouseenter=this.onItemMouseEnter.bind(this),a.onmouseup=this.onItemClick.bind(this),a.onmousedown=this.onItemMouseDown.bind(this)),a.dataset.denotationChar=e,this.mentionList.appendChild(Yp(a,t[i],this.options.dataAttributes))}this.itemIndex=r,this.highlightItem(),this.showMentionList()}else this.hideMentionList()}},{key:"nextItem",value:function(){var e,t=0;do{t++,e=(this.itemIndex+t)%this.values.length;var n="true"===this.mentionList.childNodes[e].dataset.disabled;if(t===this.values.length+1){e=-1;break}}while(n);this.itemIndex=e,this.suspendMouseEnter=!0,this.highlightItem()}},{key:"prevItem",value:function(){var e,t=0;do{t++,e=(this.itemIndex+this.values.length-t)%this.values.length;var n="true"===this.mentionList.childNodes[e].dataset.disabled;if(t===this.values.length+1){e=-1;break}}while(n);this.itemIndex=e,this.suspendMouseEnter=!0,this.highlightItem()}},{key:"containerBottomIsNotVisible",value:function(e,t){return e+this.mentionContainer.offsetHeight+t.top>window.pageYOffset+window.innerHeight}},{key:"containerRightIsNotVisible",value:function(e,t){return!this.options.fixMentionsToQuill&&e+this.mentionContainer.offsetWidth+t.left>window.pageXOffset+document.documentElement.clientWidth}},{key:"setIsOpen",value:function(e){this.isOpen!==e&&(e?this.options.onOpen():this.options.onClose(),this.isOpen=e)}},{key:"setMentionContainerPosition",value:function(){"fixed"===this.options.positioningStrategy?this.setMentionContainerPosition_Fixed():this.setMentionContainerPosition_Normal()}},{key:"setMentionContainerPosition_Normal",value:function(){var e=this,t=this.quill.container.getBoundingClientRect(),n=this.quill.getBounds(this.mentionCharPos),r=this.mentionContainer.offsetHeight,i=this.options.offsetTop,a=this.options.offsetLeft;if(this.options.fixMentionsToQuill?this.mentionContainer.style.right="".concat(0,"px"):a+=n.left,this.containerRightIsNotVisible(a,t)){var o=this.mentionContainer.offsetWidth+this.options.offsetLeft;a=t.width-o}if("top"===this.options.defaultMenuOrientation){if((i=this.options.fixMentionsToQuill?-1*(r+this.options.offsetTop):n.top-(r+this.options.offsetTop))+t.top<=0){var s=this.options.offsetTop;this.options.fixMentionsToQuill?s+=t.height:s+=n.bottom,i=s}}else if(this.options.fixMentionsToQuill?i+=t.height:i+=n.bottom,this.containerBottomIsNotVisible(i,t)){var c=-1*this.options.offsetTop;this.options.fixMentionsToQuill||(c+=n.top),i=c-r}i>=0?this.options.mentionContainerClass.split(" ").forEach((function(t){e.mentionContainer.classList.add("".concat(t,"-bottom")),e.mentionContainer.classList.remove("".concat(t,"-top"))})):this.options.mentionContainerClass.split(" ").forEach((function(t){e.mentionContainer.classList.add("".concat(t,"-top")),e.mentionContainer.classList.remove("".concat(t,"-bottom"))})),this.mentionContainer.style.top="".concat(i,"px"),this.mentionContainer.style.left="".concat(a,"px"),this.mentionContainer.style.visibility="visible"}},{key:"setMentionContainerPosition_Fixed",value:function(){var e=this;this.mentionContainer.style.position="fixed",this.mentionContainer.style.height=null;var t=this.quill.container.getBoundingClientRect(),n=this.quill.getBounds(this.mentionCharPos),r={left:t.left+n.left,top:t.top+n.top,width:0,height:n.height},i=this.options.fixMentionsToQuill?t:r,a=this.options.offsetTop,o=this.options.offsetLeft;if(this.options.fixMentionsToQuill){var s=i.right;this.mentionContainer.style.right="".concat(s,"px")}else(o+=i.left)+this.mentionContainer.offsetWidth>document.documentElement.clientWidth&&(o-=o+this.mentionContainer.offsetWidth-document.documentElement.clientWidth);var c=i.top,l=document.documentElement.clientHeight-(i.top+i.height),u=this.mentionContainer.offsetHeight<=l,d=this.mentionContainer.offsetHeight<=c;"bottom"==("top"===this.options.defaultMenuOrientation&&d?"top":"bottom"===this.options.defaultMenuOrientation&&u||l>c?"bottom":"top")?(a=i.top+i.height,u||(this.mentionContainer.style.height=l-3+"px"),this.options.mentionContainerClass.split(" ").forEach((function(t){e.mentionContainer.classList.add("".concat(t,"-bottom")),e.mentionContainer.classList.remove("".concat(t,"-top"))}))):(a=i.top-this.mentionContainer.offsetHeight,d||(this.mentionContainer.style.height=c-3+"px",a=3),this.options.mentionContainerClass.split(" ").forEach((function(t){e.mentionContainer.classList.add("".concat(t,"-top")),e.mentionContainer.classList.remove("".concat(t,"-bottom"))}))),this.mentionContainer.style.top="".concat(a,"px"),this.mentionContainer.style.left="".concat(o,"px"),this.mentionContainer.style.visibility="visible"}},{key:"getTextBeforeCursor",value:function(){return this.quill.getText(0,this.cursorPos-0)}},{key:"onSomethingChange",value:function(){var e=this,t=this.quill.getSelection();if(null!=t){this.mentionCharPos=this.cursorPos=t.index;var n=this.getTextBeforeCursor();if(n.length>=this.options.minChars){this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.renderLoading();var r={abandoned:!1};this.existingSourceExecutionToken=r,this.options.source(n,(function(t,n){r.abandoned||(n=n||"",e.existingSourceExecutionToken=null,e.mentionCharPos=e.cursorPos-n.length,e.renderList("@",t,n))}))}else this.hideMentionList()}}},{key:"getAllowedCharsRegex",value:function(e){return this.options.allowedChars instanceof RegExp?this.options.allowedChars:this.options.allowedChars(e)}},{key:"onTextChange",value:function(e,t,n){"user"===n&&this.onSomethingChange()}},{key:"onSelectionChange",value:function(e){this.hideMentionList()}},{key:"openMenu",value:function(e){var t=this.quill.getSelection(!0);this.quill.insertText(t.index,e),this.quill.blur(),this.quill.focus()}}])&&Vp(t.prototype,n),r&&Vp(t,r),e}();zp.a.register("modules/mention",Xp);var Qp=n("qFsk"),Jp=n("GVEQ"),$p=n("pzGi"),Zp=n("IuJI"),eh=n("RdTv"),th=function(e,t){return null!==t.view.domAtPos(e).node.offsetParent},nh=function(e,t){var n=e.state,r=e.view,i=e.extensionManager,a=n.schema,o=n.selection,s=o.empty,c=o.$anchor,l=!!i.extensions.find((function(e){return"gapCursor"===e.name}));if(!s||c.parent.type!==a.nodes.detailsSummary||!l)return!1;if("right"===t&&c.parentOffset!==c.parent.nodeSize-2)return!1;var u=Object(Dp.m)((function(e){return e.type===a.nodes.details}))(o);if(!u)return!1;var d=Object(Dp.k)(u.node,(function(e){return e.type===a.nodes.detailsContent}));if(!d.length)return!1;if(th(u.start+d[0].pos+1,e))return!1;var p=n.doc.resolve(u.pos+u.node.nodeSize),h=eh.a.findFrom(p,1,!1);if(!h)return!1;var f=n.tr,m=new eh.a(h);return f.setSelection(m),f.scrollIntoView(),r.dispatch(f),!0},rh=Dp.e.create({name:"details",content:"detailsSummary detailsContent",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,addOptions:function(){return{persist:!1,openClassName:"is-open",HTMLAttributes:{}}},addAttributes:function(){return this.options.persist?{open:{default:!1,parseHTML:function(e){return e.hasAttribute("open")},renderHTML:function(e){return e.open?{open:""}:{}}}}:[]},parseHTML:function(){return[{tag:"details"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["details",Object(Dp.y)(this.options.HTMLAttributes,t),0]},addNodeView:function(){var e=this;return function(t){var n=t.editor,r=t.getPos,i=t.node,a=t.HTMLAttributes,o=document.createElement("div"),s=Object(Dp.y)(e.options.HTMLAttributes,a,{"data-type":e.name});Object.entries(s).forEach((function(e){var t=Object(Mp.a)(e,2),n=t[0],r=t[1];return o.setAttribute(n,r)}));var c=document.createElement("button");o.append(c);var l=document.createElement("div");o.append(l);var u=function(){o.classList.toggle(e.options.openClassName);var t=new Event("toggleDetailsContent"),n=l.querySelector(':scope > div[data-type="detailsContent"]');null==n||n.dispatchEvent(t)};return i.attrs.open&&setTimeout(u),c.addEventListener("click",(function(){u(),e.options.persist?n.isEditable&&"function"==typeof r&&n.chain().focus().command((function(t){var n=t.tr,i=r(),a=n.doc.nodeAt(i);return(null==a?void 0:a.type)===e.type&&(n.setNodeMarkup(i,void 0,{open:!a.attrs.open}),!0)})).run():n.commands.focus()})),{dom:o,contentDOM:l,ignoreMutation:function(e){return"selection"!==e.type&&(!o.contains(e.target)||o===e.target)},update:function(t){return t.type===e.type}}}},addCommands:function(){var e=this;return{setDetails:function(){return function(t){var n,r=t.state,i=t.chain,a=r.schema,o=r.selection,s=o.$from,c=o.$to,l=s.blockRange(c);if(!l)return!1;var u=r.doc.slice(l.start,l.end);if(!a.nodes.detailsContent.contentMatch.matchFragment(u.content))return!1;var d=(null===(n=u.toJSON())||void 0===n?void 0:n.content)||[];return i().insertContentAt({from:l.start,to:l.end},{type:e.name,content:[{type:"detailsSummary"},{type:"detailsContent",content:d}]}).setTextSelection(l.start+2).run()}},unsetDetails:function(){return function(t){var n=t.state,r=t.chain,i=n.selection,a=n.schema,o=Object(Dp.m)((function(t){return t.type===e.type}))(i);if(!o)return!1;var s=Object(Dp.k)(o.node,(function(e){return e.type===a.nodes.detailsSummary})),c=Object(Dp.k)(o.node,(function(e){return e.type===a.nodes.detailsContent}));if(!s.length||!c.length)return!1;var l=s[0],u=c[0],d=o.pos,p=n.doc.resolve(d),h={from:d,to:d+o.node.nodeSize},f=u.node.content.toJSON()||[],m=p.parent.type.contentMatch.defaultType,g=[null==m?void 0:m.create(null,l.node.content).toJSON()].concat(Object(dl.a)(f));return r().insertContentAt(h,g).setTextSelection(d+1).run()}}}},addKeyboardShortcuts:function(){var e=this;return{Backspace:function(){var t=e.editor.state,n=t.schema,r=t.selection,i=r.empty,a=r.$anchor;return!(!i||a.parent.type!==n.nodes.detailsSummary)&&(0!==a.parentOffset?e.editor.commands.command((function(e){var t=e.tr,n=a.pos-1,r=a.pos;return t.delete(n,r),!0})):e.editor.commands.unsetDetails())},Enter:function(e){var t=e.editor,n=t.state,r=t.view,i=n.schema,a=n.selection.$head;if(a.parent.type!==i.nodes.detailsSummary)return!1;var o=th(a.after()+1,t),s=o?n.doc.nodeAt(a.after()):a.node(-2);if(!s)return!1;var c=o?0:a.indexAfter(-1),l=Object(Dp.i)(s.contentMatchAt(c));if(!l||!s.canReplaceWith(c,c,l))return!1;var u=l.createAndFill();if(!u)return!1;var d=o?a.after()+1:a.after(-1),p=n.tr.replaceWith(d,d,u),h=p.doc.resolve(d),f=jp.e.near(h,1);return p.setSelection(f),p.scrollIntoView(),r.dispatch(p),!0},ArrowRight:function(e){var t=e.editor;return nh(t,"right")},ArrowDown:function(e){var t=e.editor;return nh(t,"down")}}},addProseMirrorPlugins:function(){var e=this;return[new jp.c({key:new jp.d("detailsSelection"),appendTransaction:function(t,n,r){var i=e.editor,a=e.type;if(t.some((function(e){return e.selectionSet}))&&n.selection.empty&&r.selection.empty&&Object(Dp.v)(r,a.name)){var o=r.selection.$from;if(!th(o.pos,i)){var s=function(e,t,n){for(var r=e.depth;r>0;r-=1){var i=e.node(r),a=t(i),o=th(e.start(r),n);if(a&&o)return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:i}}}(o,(function(e){return e.type===a}),i);if(s){var c=Object(Dp.k)(s.node,(function(e){return e.type===r.schema.nodes.detailsSummary}));if(c.length){var l=c[0],u="forward"==(n.selection.from<r.selection.from?"forward":"backward")?s.start+l.pos:s.pos+l.pos+l.node.nodeSize,d=jp.f.create(r.doc,u);return r.tr.setSelection(d)}}}}}})]}}),ih=n("pvbs"),ah=function(){function e(e,t){this.editorElement=e,this.state=t,this.textSuggestions=new hn.a,this.preservedFormat={},this.keepEditorOpenAttribute="data-keep-text-open",this.subs=[],this.textFormatter=new fe.G,this.eventEmitters=[]}return Object.defineProperty(e.prototype,"boundsForPreview",{get:function(){var e=this.editorElement.querySelector('tiptap-editor-component[id="'+this.diagramId+'"].shapeText div[data-type="tiptap-child-editor-node"][shapeId="'+this.shapeId+'"][textId="'+this.textId+'"] .tiptap-child-editor-content');if(!e)return new x.ub(0,0,0,0);var t=e.getBoundingClientRect(),n=t.top,r=t.left,i=e.clientWidth,a=e.clientHeight;return new x.ub(r,n,i,a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var e=i.a.getTextBounds(this.diagramId,this.shapeId,this.textId),t=e.x,n=e.y,r=e.width,a=e.height;return new x.ub(t,n,r,a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentEditableElement",{get:function(){if(this.editorElement)return this.editorElement.querySelector('div[contenteditable="true"]')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){var e,t=this.state.get("CurrentDiagram");return null===(e=i.a.documents[t])||void 0===e?void 0:e.instance.editor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editorComponent",{get:function(){var e=this.state.get("CurrentDiagram");return i.a.documents[e].instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editorSubject",{get:function(){var e=this.state.get("CurrentDiagram");return i.a.documents[e].instance.editorSubject},enumerable:!1,configurable:!0}),e.prototype.mount=function(){var e=this;return i.a.initialized.pipe(Object(S.a)((function(t){var n=e.state.get("CurrentDiagram");return t===n?i.a.documents[n].instance.editorSubject.pipe(Object(bt.a)((function(e){return!!e})),Object(xt.a)(1),Object(I.a)((function(t){var r='tiptap-editor-component[id="'+n+'"].shapeText',a=e.editorElement;a&&(e.tiptapDoc=document.querySelector(r),e.tiptapDoc&&(i.a.setTiptapDocumentZIndex("reset"),a.appendChild(e.tiptapDoc)))}))):Qi.a})))},e.prototype.open=function(e,t,n,r){var a=this;if(void 0===e&&(e=[]),this.selectionCache=null,this.diagramId=t,this.shapeId=n,this.textId=r,!(this.diagramId&&this.shapeId&&this.textId))throw new Error("Invalid input data to open the text editor, diagramId: "+t+", shapeId: "+n+", textId: "+r);var o=i.a.documents[t];return o.instance.shapeIdSubject.next(n),o.instance.editorSubject.pipe(Object(bt.a)((function(e){return!!e})),Object(xt.a)(1),Object(I.a)((function(o){var s='tiptap-editor-component[id="'+t+'"].shapeText',c=a.editorElement;if(c&&(a.tiptapDoc=document.querySelector(s),a.tiptapDoc&&!a.tiptapDoc.parentElement.isSameNode(c)&&c.appendChild(a.tiptapDoc)),a.show(),!a.getChildEditorNode().domNode)if("string"!=typeof e){var l=o.state.doc.content.size-1;o.chain().setTextSelection(o.state.doc.content.size).focus().insertContent(i.a.convertCarotaToTiptap(e)||"<p></p>").run(),o.chain().focus().setTextSelection({from:l,to:o.state.doc.content.size}).addChildEditorNode({shapeId:n,textId:r}).setTextSelection(o.state.doc.content.size).run()}else o.chain().setTextSelection(o.state.doc.content.size).focus().insertContent('<tiptap-child-editor-node shapeid="'+n+'" textid="'+r+'">'+e+"</tiptap-child-editor-node>").run(),o.chain().setTextSelection(o.state.doc.content.size-1).focus().run();i.a.removeEmptyParas(a.diagramId)})))},e.prototype.close=function(){var e;null===(e=this.editor)||void 0===e||e.commands.blur()},e.prototype.show=function(){i.a.setTiptapDocumentZIndex("restore"),i.a.setShapeTextNodeVisibility(this.diagramId,this.shapeId,this.textId,"visible")},e.prototype.setContent=function(e,t,n){var r=i.a.convertCarotaToTiptap(e),a=this.getChildEditorNode(),o=a.from,s=a.to;this.editor.chain().focus().insertContentAt({from:o-1,to:s},r).run()},e.prototype.removeChildNode=function(){var e=this.getChildEditorNode(),t=e.from,n=e.to;this.editor.chain().focus().deleteRange({from:t,to:n})},e.prototype.getContent=function(){var e=this.getChildEditorNode().node;return e?i.a.convertTiptapToCarota(e.content.toJSON()):[]},e.prototype.cancelEditing=function(e,t){i.a.textRenderingState.next({shapeId:e,state:"ignored",textId:t})},e.prototype.getHTMLContent=function(){var e=this.getChildEditorNode().node;return e?Object(Dp.r)(e.content,this.editor.schema):""},e.prototype.setWidth=function(e){this.editorElement.style.width=e},e.prototype.setWordWrap=function(e){this.editorElement.style.whiteSpace=e?"unset":"nowrap"},e.prototype.updatePosition=function(e,t){var n=this.editorElement;n.style.top=t+"px",n.style.left=e+"px"},e.prototype.focusAndMoveCaretToEnd=function(){var e=this,t=this.getChildEditorNode().to;setTimeout((function(){e.editor.chain().focus().setTextSelection(t).run()}),0)},e.prototype.focusAndMoveCaretToStart=function(){var e=this,t=this.getChildEditorNode().from;setTimeout((function(){e.editor.chain().focus().setTextSelection(t).run()}),0)},e.prototype.moveCaretToPoint=function(e){var t,n=null===(t=this.editor.view.posAtCoords({top:e.y,left:e.x}))||void 0===t?void 0:t.pos;void 0!==n?this.editor.commands.setTextSelection(n):this.focusAndMoveCaretToEnd()},e.prototype.selectAll=function(){var e=this.getChildEditorNode(),t=e.from,n=e.to;this.editor.commands.focus(),this.editor.commands.setTextSelection({from:t,to:n})},e.prototype.zoom=function(e){this.editorElement.style.transform="scale("+e+")",this.editorElement.style.transformOrigin="0px 0px 0px"},e.prototype.getContentUpdate=function(){var e=this;return Wi.a.create((function(t){var n=function(e){var n=e.editor;t.next(n)};return e.editor.on("update",n),e.eventEmitters.push(t),function(){e.editor.off("update",n),e.removeObserver(t)}}))},e.prototype.getSelectionFormat=function(){var e=this,t=Wi.a.create((function(t){var n=function(n){var r=n.editor,i=r.view.state.selection.anchor,a=r.view.state.selection.head,o=e.getSelectionBounds(r);t.next({styles:e.styleTiptapToCarota(r),selection:o}),i!==a&&(e.selectionCache={anchor:i,head:a})};return e.editor.on("selectionUpdate",n),e.editor.on("update",n),e.eventEmitters.push(t),function(){e.editor.off("selectionUpdate",n),e.editor.off("update",n),e.removeObserver(t)}}));return Object(J.a)(t)},e.prototype.styleTiptapToCarota=function(e){var t={};if(["bold","italic","underline"].forEach((function(n){t[n]=e.isActive(n)})),t.strikeout=e.isActive("strike"),e.isActive("link")){var n=e.getAttributes("link");t.link=n.href}if(t.align=e.isActive({textAlign:"right"})?"right":e.isActive({textAlign:"left"})?"left":e.isActive({textAlign:"center"})?"center":e.isActive({textAlign:"justify"})?"justify":"center",e.isActive("textStyle")){var r=e.getAttributes("textStyle");t.color=r.color,t.size=parseFloat(r.fontSize),t.font=r.fontFamily}return t},e.prototype.destroy=function(){for(;this.eventEmitters.length;)this.eventEmitters.pop().complete();for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getFocusOut=function(e){return void 0===e&&(e=200),this.editorComponent.change},e.prototype.getFocusIn=function(){var e=this;return Wi.a.create((function(t){var n=function(e){var n=e.editor;t.next(n)};return e.editor.on("focus",n),e.eventEmitters.push(t),function(){e.editor.off("focus",n),e.removeObserver(t)}}))},e.prototype.applyStyles=function(e){var t,n=null===(t=this.editor)||void 0===t?void 0:t.chain();e.styles.align&&n.setTextAlign(e.styles.align),e.styles.bold&&n.setBold(),!1===e.styles.bold&&n.unsetBold(),e.styles.italic&&n.setItalic(),!1===e.styles.italic&&n.unsetItalic(),e.styles.underline&&n.setUnderline(),!1===e.styles.underline&&n.unsetUnderline(),e.styles.strikeout&&n.setStrike(),!1===e.styles.strikeout&&n.unsetStrike(),e.styles.color&&n.setColor(e.styles.color),e.styles.font&&n.setFontFamily(e.styles.font),e.styles.size&&n.setFontSize(e.styles.size+"pt"),e.styles.link&&n.setLink({href:e.styles.link}),void 0===e.styles.link&&n.unsetLink(),n.run(),e.takeFocus&&this.editor.commands.focus()},e.prototype.getKeyDownEvent=function(e,t){return void 0===t&&(t=!1),Object(A.a)(this.editorElement,"keydown").pipe(Object(bt.a)((function(n){return n.keyCode===e&&(!t||n.metaKey)})))},e.prototype.getKeyUpEvent=function(e){return Object(A.a)(this.editorElement,"keyup").pipe(Object(bt.a)((function(t){return t.keyCode===e})))},e.prototype.styleCarotaToQuill=function(e){var t=Object(Ct.clone)(e);return delete t.text,"normal"===t.script&&(t.script=null),void 0!==t.size&&(t.size=t.size+"pt"),t},e.prototype.isCaretAtEnd=function(){var e=this.getChildEditorNode().to,t=this.editor.state.selection.from,n=this.editor.state.selection.to;return t===n&&n===e},e.prototype.isCaretAtStart=function(){var e=this.getChildEditorNode().from,t=this.editor.state.selection.from,n=this.editor.state.selection.to;return t===n&&n===e},e.prototype.getCurrentCaret=function(){var e=this.editor.view.coordsAtPos(this.editor.state.selection.anchor);return{x:e.left,y:e.top}},e.prototype.setTextParser=function(e){this.textParser=e},e.prototype.getSelectionBounds=function(e){void 0===e&&(e=this.editor);var t=e.state,n=e.view,r=t.selection.$anchor,i=t.selection.$head,a=n.coordsAtPos(r.pos),o=n.coordsAtPos(i.pos),s=Math.min(a.left,o.left),c=Math.max(a.right,o.right),l=Math.min(a.top,o.top),u=this.getChildEditorNode().domNode.getBoundingClientRect();return{y:l-u.y,x:s-u.x,width:c-s,height:0}},e.prototype.validateFontSize=function(e){if(e)return e.includes("pt")?Math.round(parseFloat(e))+"pt":e.includes("px")?Math.round(.75*parseFloat(e))+"pt":void 0},e.prototype.validateFont=function(e){if(e)for(var t in pe.C)if(e===t||e===pe.C[t])return t},e.prototype.validateAlign=function(e){return["center","left","right","justify"].includes(e)?e:void 0},e.prototype.showCachedSelection=function(){this.selectionCache&&!this.editor.isFocused&&(Math.abs(this.selectionCache.anchor-this.selectionCache.head)>0&&this.editor.chain().setTextSelection({from:this.selectionCache.anchor,to:this.selectionCache.head}).setHighlight({color:"#b7b7b759"}).run())},e.prototype.clearCachedSelection=function(){this.selectionCache&&this.editor.chain().setTextSelection({from:this.selectionCache.anchor,to:this.selectionCache.head}).unsetHighlight().run(),this.selectionCache=null},e.prototype.removeObserver=function(e){e.complete();var t=this.eventEmitters.findIndex((function(t){return t===e}));t>-1&&this.eventEmitters.splice(t,1)},e.prototype.getChildEditorNode=function(){return i.a.getChildEditorNode(this.diagramId,this.shapeId,this.textId)},Object.defineProperty(e.prototype,"editorNodeSelector",{get:function(){return'tiptap-editor-component[id="'+this.diagramId+'"].shapeText div[data-type="tiptap-child-editor-node"][shapeId="'+this.shapeId+'"][textId="'+this.textId+'"] .tiptap-child-editor-content'},enumerable:!1,configurable:!0}),e.convertTiptapToHTML=function(e){try{return Object(Qp.a)(e,[Ep.a,Hp.a,Wp.a,qp.a,xp.a,Jp.a.configure({types:["heading","paragraph","image","span"]}),$p.a,Fp.a,Up.a,Cp.a,Bp.a,Np.a,Zp.a.configure({resizable:!0}),rh.configure({persist:!0,HTMLAttributes:{class:"details"}}),Lp.a,Rp,Pp.a,ih.a,Ap.a,Tp.a,Ip.a,Sp.a,wp.a.configure({itemTypeName:"taskItem"}),kp.a.configure({nested:!0})])}catch(t){return"<p></p>"}},e}(),oh=["container"],sh=["editorBackground"],ch=["editor"],lh=function(){function e(e,t,n,r,i){this.dToVcoordinate=e,this.commandService=t,this.ll=n,this.state=r,this.shapeTextEditorPositionService=i,this.maxEditorWidth=1e3,this.keepEditorOpenAttribute="data-keep-text-open",this.subs=[],this.manualCommit=new hn.a}return Object.defineProperty(e.prototype,"containerElement",{get:function(){return this.container.nativeElement},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e,t=this,n=[];this.editor=new ah(this.editorElement.nativeElement,this.state),this.editor.mount().subscribe(),this.editor.close();var a=this.getEditorOpen().pipe(Object(S.a)((function(e){if(!1===e.open){for(;n.length;){var r=n.pop();r&&r.unsubscribe()}return Object(Ur.b)()}return n.push(Object(J.a)(t.getTextApplied().pipe(Object(Mt.a)((function(){return{action:"focusedOut",shapeLogicData:{}}}))),t.manualCommit.pipe(Object(Mt.a)((function(e){return{action:"manualCommit",shapeLogicData:e.shapeLogicData,nextState:e.nextState}}))),t.getTextCanceled().pipe(Object(Mt.a)((function(){return{action:"cancelled",shapeLogicData:{}}})))).pipe(Object(xt.a)(1)).subscribe((function(n){return t.exit(e,n)})),t.getPlusCreateChain().pipe(Object(I.a)((function(n){n&&(t.exit(e,!1),t.commandService.dispatch(Ae.a.keyboardPlusCreateInteraction,{keyboardEvent:n}))}))).subscribe(),t.editor.textSuggestions.pipe(Object(S.a)((function(n){return t.state.set("EditorSuggestions",n),t.disableShortcutsInTextEditMode(e)}))).subscribe(),t.switchEditor().pipe(Object(S.a)((function(n){return t.handleEditorSwitch(e,n.direction)}))).subscribe()),t.getTextModel(e,!0).pipe(Object(S.a)((function(n){return t.shapeTextEditorPositionService.updateLocation(t.editor.editorNodeSelector,e.shapeId,n,t.getContentUpdate().pipe(Object(Pe.a)(Op.a.ContentUpdate)),(function(){return t.previewEditing(e,n,!0).subscribe()})).pipe(Object(I.a)((function(r){var a=r.action,o=r.positionData,s=r.positionStyles;a===Op.a.Init&&(t.setEditorContent(e.text,n),(t.state.get("TextContent")||{}).selectAll&&t.editor?t.editor.selectAll():t.moveCaret(o,e));i.a.handlePositionStyles(t.state.get("CurrentDiagram"),e.shapeId,n.id,s)})))})))}))).subscribe();(e=this.subs).push.apply(e,Object(r.j)([a],n))},e.prototype.ngOnDestroy=function(){for(this.editor.destroy();this.subs.length;){var e=this.subs.pop();e&&e.unsubscribe()}},e.prototype.exit=function(e,t){var n=this;this.commandService.dispatch(Ae.a.openHyperlinkEditor,{open:!1}),this.commandService.dispatch(Ae.a.closeTextEditor,{open:!1,cancel:!1,shapeLogicData:t.shapeLogicData,shapeId:e.shapeId,textId:e.textId,point:e.point,rendering:this.editor.getContent()?"carota":"tiptapCanvas"}).subscribe({complete:function(){t.nextState&&n.commandService.dispatch(Ae.a.openTextEditor,t.nextState)}}),this.editor.close()},e.prototype.moveCaret=function(e,t){if(t.point){var n=e.pointOnShape.x-e.pointOnText.x,r=e.pointOnShape.y-e.pointOnText.y;this.editor.moveCaretToPoint({x:t.point.x-n,y:t.point.y-r})}else{var i=this.state.get("DiagramViewPort"),a=this.editor.bounds;a&&this.state.get("DiagramZoomLevel")*a.height+a.top+150>i.bottom?this.editor.focusAndMoveCaretToStart():this.editor.focusAndMoveCaretToEnd()}},e.prototype.getTextModel=function(e,t){var n=this;return this.ll.forCurrent(!0).getShapeOnce(e.shapeId).pipe(Object(bt.a)((function(e){return null!==e})),Object(S.a)((function(r){if(r.type===pe.t.Connector){var i=void 0;return e.point&&t&&(i=n.getPositionOnConnector(r,e.point)),n.getConnectorTextModel(e.shapeId,e.textId,i)}return n.getShapeTextModel(e.shapeId,e.textId)})))},e.prototype.setEditorContent=function(e,t){var n=this;return this.getDefaultStyles().pipe(Object(I.a)((function(i){if(e){var a=void 0;t.content&&t.content[0]&&delete(a=Object(r.a)({},t.content[0])).text;var o=Object(Ct.merge)({text:e},a||i);n.editor.setContent([o]),n.editor.focusAndMoveCaretToEnd()}else n.editor.setContent(t.content,i)})))},e.prototype.getDefaultStyles=function(){var e=this.state.get("Selected")[0];return this.ll.forCurrent(!0).getShapeOnce(e).pipe(Object(Mt.a)((function(e){return Object(Ct.merge)({},pe.b,e.defaultTextFormat||{})})))},e.prototype.wordWrap=function(e,t){var n=this,r=this.ll.forCurrent(!0);return"connector"===t.type?(this.editor.setWordWrap(!1),this.editor.setWidth((t.width||0)+10+"px"),Object(Te.a)({})):r.getShapeOnce(e.shapeId).pipe(Object(I.a)((function(e){var r;r=t.hitArea?t.hitArea.width-2*pe.y:e.bounds.width>t.width?e.bounds.width-2*pe.y:t.width,t.wordWrap?n.editor.setWordWrap(!0):n.editor.setWordWrap(!1),t.isInside()||t.wordWrap?(n.editor.setWidth(r+"px"),e.autoResizeWidth&&n.editor.setWidth((r||0)+10+"px")):n.editor.setWidth(n.maxEditorWidth+"px")})))},e.prototype.getPositionOnConnector=function(e,t){return e.getNearestPoint(t).location},e.prototype.getContentUpdate=function(){var e=this;return this.editor.getContentUpdate().pipe(Object(Mt.a)((function(){return e.editor.getHTMLContent()})),Object(Et.a)(Ct.isEqual))},e.prototype.getEditorOpen=function(){var e=this;return this.state.changes("EditingText").pipe(Object(I.a)((function(t){t.open&&(e.setTextParser(t),e.state.set("EditorSuggestions",{suggestions:[],searchTerm:""}))})),Object(S.a)((function(t){return t.open?e.disableShortcutsInTextEditMode(t):Object(Te.a)(t)})),Object(S.a)((function(t){return t.open?e.getTextModel(t,!0).pipe(Object(S.a)((function(n){var i=e.state.get("CurrentDiagram"),a=Object(Te.a)({});t.textId?a=t.text?e.editor.open([Object(r.a)(Object(r.a)({},n.content[0]),{text:t.text})],i,t.shapeId,t.textId):e.editor.open("tiptapCanvas"!==n.rendering?n.content:n.html,i,t.shapeId,t.textId):(t.textId=n.id,a=(t.text?e.editor.open([Object(r.a)(Object(r.a)({},pe.b),{text:t.text})],i,t.shapeId,t.textId):e.editor.open([],i,t.shapeId,t.textId)).pipe(Object(S.a)((function(){return e.completeEditing(t,n,!0)}))));return a.pipe(Object(Pe.a)(t))}))):!1===t.open&&t.shapeId?e.getTextModel(t,!0).pipe(Object(S.a)((function(n){return e.completeEditing(t,n,!0).pipe(Object(Pe.a)(t))}))):Object(Te.a)(t)})))},e.prototype.disableShortcutsInTextEditMode=function(e){return Object(Te.a)(e)},e.prototype.setTextParser=function(e){var t=this;this.ll.forCurrentObserver(!0).pipe(Object(xt.a)(1),Object(S.a)((function(t){return t.getShapeOnce(e.shapeId)})),Object(Mt.a)((function(n){n&&t.editor.setTextParser(e.textId?n.getTextParser(e.textId):null)}))).subscribe()},e.prototype.getPanZoomChanges=function(){var e=this;return Object(J.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel").pipe(Object(I.a)((function(t){e.editorBackground.nativeElement.style.zoom=100*t+"%",e.editor.zoom(t)}))))},e.prototype.getTextApplied=function(){return Object(J.a)(this.editor.getFocusOut(),this.editor.getKeyDownEvent(pe.k.Enter,!0))},e.prototype.getTextCanceled=function(){return this.editor.getKeyDownEvent(pe.k.Escape)},e.prototype.getPlusCreateChain=function(){return Object(J.a)(this.editor.getKeyDownEvent(pe.k.Enter),this.editor.getKeyDownEvent(pe.k.Tab)).pipe(Object(Mt.a)((function(e){var t=e.shiftKey,n=e.keyCode;if(n===pe.k.Tab||n===pe.k.Enter&&t)return e})))},e.prototype.switchEditor=function(){var e=this,t=Object(J.a)(this.editor.getKeyDownEvent(pe.k.ArrowUp).pipe(Object(Mt.a)((function(e){return[e,"up"]}))),this.editor.getKeyDownEvent(pe.k.ArrowLeft).pipe(Object(Mt.a)((function(e){return[e,"left"]})))),n=Object(J.a)(this.editor.getKeyDownEvent(pe.k.ArrowDown).pipe(Object(Mt.a)((function(e){return[e,"down"]}))),this.editor.getKeyDownEvent(pe.k.ArrowRight).pipe(Object(Mt.a)((function(e){return[e,"right"]})))),i=Object(J.a)(this.editor.getKeyUpEvent(pe.k.ArrowDown).pipe(Object(bt.a)((function(){return e.editor.isCaretAtEnd()}))),this.editor.getKeyUpEvent(pe.k.ArrowRight).pipe(Object(bt.a)((function(){return e.editor.isCaretAtEnd()})))),a=Object(J.a)(this.editor.getKeyUpEvent(pe.k.ArrowUp).pipe(Object(bt.a)((function(){return e.editor.isCaretAtStart()}))),this.editor.getKeyUpEvent(pe.k.ArrowLeft).pipe(Object(bt.a)((function(){return e.editor.isCaretAtStart()}))));return Object(J.a)(i.pipe(Object(S.a)((function(){return n.pipe(Object(zi.a)(t))}))),a.pipe(Object(S.a)((function(){return t.pipe(Object(zi.a)(n))})))).pipe(Object(Mt.a)((function(t){var n=Object(r.h)(t,2),i=n[0],a=n[1];return i.preventDefault(),{direction:a,caret:e.editor.getCurrentCaret()}})))},e.prototype.handleEditorSwitch=function(e,t){var n=this;return this.ll.forCurrent(!0).getDiagramOnce().pipe(Object(Mt.a)((function(r){var i,a=r.getTextToSwitchByArrowkeys(n.state.get("Selected"),e.textId,e.shapeId,t);a&&n.manualCommit.next({shapeLogicData:(i={},i[a.shapeId]={methodName:"clickOnShape",methodParams:[a.point,!1,a.textId]},i),nextState:{open:!0,point:null,caretPosition:"down"===t||"right"===t?"start":"end",shapeId:a.shapeId,textId:a.textId}})})))},e.prototype.completeEditing=function(e,t,n){var i=this;if(t&&!e.cancel){var a={};(this.state.get("Deselected")||[]).forEach((function(e){a[e]={methodName:"deselectShape",methodParams:[i.state.get("Selected")]}}));var o=this.getCommandData(!1,e,t,n),s=Object(r.a)({shapeInfo:Object(r.a)(Object(r.a)({},a),e.shapeLogicData||{})},o);return this.commandService.dispatch(Ae.a.commitTextAndExecuteShapeLogicMethod,s).pipe(Object(qr.a)())}return Ur.a},e.prototype.previewEditing=function(e,t,n){var r=this.getCommandData(!0,e,t,n);return"tiptapCanvas"===r.rendering?this.updateTextBounds(r,"preview"):this.commandService.preview(Ae.a.applyText,r)},e.prototype.updateTextBounds=function(e,t){var n,i;return this.commandService[t](Ae.a.applyTextBounds,((n={})[e.shapeId]=((i={})[e.textId]=Object(r.a)({},e),i),n))},e.prototype.getShapeTextModel=function(e,t){return this.ll.forCurrent(!0).getShapeOnce(e).pipe(Object(Mt.a)((function(e){var n=e.getText(t);return n||(n=e.createText()),n})))},e.prototype.getConnectorTextModel=function(e,t,n){return this.ll.forCurrent(!0).getShapeOnce(e).pipe(Object(Mt.a)((function(e){var r=e.getTextExisting(t),i=r||e.createText();return!r&&n&&(i.pos=n),i})))},e.prototype.getCommandData=function(e,t,n,r){var i,a=this.editor.getContent(),o=e?this.editor.boundsForPreview:this.editor.bounds;if(a){var s=Object(Ct.isEmpty)(a)?[Object(Ct.merge)({text:""},pe.b)]:a;i={shapeId:t.shapeId,content:s,textId:t.textId,rendering:"carota",height:o.height,width:o.width}}else i={shapeId:t.shapeId,text:"",html:this.editor.getHTMLContent(),content:[],textId:t.textId,rendering:"tiptapCanvas",height:o.height,width:o.width};return this.state.set("TextContent",i),"connector"===n.type&&r&&(i.positionOnConnector=n.pos),i},e.\u0275fac=function(t){return new(t||e)(k.gc(ai.a),k.gc(x.B),k.gc(At.a),k.gc(x.Hb),k.gc(Op.b))},e.\u0275cmp=k.ac({type:e,selectors:[["shape-text-editor"]],viewQuery:function(e,t){var n;(1&e&&(k.kd(oh,!0),k.kd(sh,!0),k.kd(ch,!0)),2&e)&&(k.Mc(n=k.vc())&&(t.container=n.first),k.Mc(n=k.vc())&&(t.editorBackground=n.first),k.Mc(n=k.vc())&&(t.editorElement=n.first))},decls:6,vars:0,consts:[[1,"text-editor-container"],["container",""],["id","shapetexteditor",1,"text-editor"],["editor",""],[1,"text-editor-bg"],["editorBackground",""]],template:function(e,t){1&e&&(k.mc(0,"div",0,1),k.hc(2,"div",2,3),k.hc(4,"div",4,5),k.lc())},styles:[".text-editor[_ngcontent-%COMP%]:focus{outline:0 solid transparent}.text-editor[_ngcontent-%COMP%]{z-index:1;background-color:transparent;word-wrap:break-word;line-height:normal;font-kerning:none}.text-editor[_ngcontent-%COMP%]  p.is-empty{display:block!important}.text-editor[_ngcontent-%COMP%]  .tiptap-child-editor{margin:0!important;width:0;position:absolute;transform-origin:left top;display:none;content-visibility:auto}.text-editor[_ngcontent-%COMP%]  .collaboration-cursor__label{white-space:nowrap}.text-editor[_ngcontent-%COMP%]  .tiptap-child-editor-content{min-width:10px;line-height:normal!important;transform-origin:0 0 0}.text-editor[_ngcontent-%COMP%]  tiptap-editor-component.shapeText{margin-top:0!important}.text-editor[_ngcontent-%COMP%]  .prose>p{display:none}.text-editor[_ngcontent-%COMP%]  .label-editable-data-item-container{margin-bottom:0!important}.text-editor-container[_ngcontent-%COMP%]{cursor:text;z-index:2}.text-editor-bg[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0}",'@charset "UTF-8";.text-editor[_ngcontent-%COMP%]  .prose p{font-family:noto_regular;font-size:10pt;color:#4b4b4b;margin:0!important;line-height:unset;word-wrap:normal;caret-color:#000}.text-editor[_ngcontent-%COMP%]  .prose{line-height:unset!important}.text-editor[_ngcontent-%COMP%]  .prose p *{font-family:inherit;font-size:inherit;-webkit-user-select:unset;-moz-user-select:unset;user-select:unset;white-space:pre-wrap}.text-editor[_ngcontent-%COMP%]  .ProseMirror.prose.prose-sm.sm\\:prose.lg\\:prose-lg.xl\\:prose-2xl.m-5.focus\\:outline-none{margin:0!important;min-width:auto}.text-editor[_ngcontent-%COMP%]  .prose strong{color:inherit!important}.text-editor[_ngcontent-%COMP%]  .prose h1, .text-editor[_ngcontent-%COMP%]  .prose h2, .text-editor[_ngcontent-%COMP%]  .prose h3, .text-editor[_ngcontent-%COMP%]  .prose h4, .text-editor[_ngcontent-%COMP%]  .prose h5, .text-editor[_ngcontent-%COMP%]  .prose h6{line-height:1.1;margin:0 0 12px!important}.text-editor[_ngcontent-%COMP%]  .prose ul li{list-style:none}.text-editor[_ngcontent-%COMP%]  .prose ul li:before{content:"\u2022";position:absolute;left:-.8em;font-size:1.1em}.text-editor[_ngcontent-%COMP%]  .prose ol, .text-editor[_ngcontent-%COMP%]  .prose ul{margin-top:0!important;margin-bottom:0!important}.text-editor[_ngcontent-%COMP%]  .prose table{width:inherit!important}.text-editor[_ngcontent-%COMP%]  .prose blockquote{margin:0!important}.text-editor[_ngcontent-%COMP%]  .prose h1 span{font-size:inherit!important}.text-editor[_ngcontent-%COMP%]  .prose pre{margin:0!important}'],changeDetection:0}),e}(),uh=n("KI7O"),dh=n("gGM1"),ph=n("Zog/"),hh=n("/ege"),fh=n("TT9f"),mh=n("bq/2"),gh=n("eaE7"),bh=n("BJDd"),vh=n("hb43"),_h=n("UfOR"),yh=n("S8c2"),Oh=n("fdBj"),xh=n("LX6Z"),Eh=n("6uE6"),kh=n("Ownj"),Ch=n("Y4mt"),wh=n("rPyh"),Sh=n("sIsI"),Ih=n("nmkj"),Th=n("OlX0"),Ah=n("igS9"),Ph=n("/kaM"),Mh=n("0Ohc"),Dh=n("am3J"),jh=n("ZFuN"),Rh=n("+ZK7"),Lh=n("vd2+"),Nh=n("HF29"),Bh=n("QVgP"),Uh=n("qtZD"),Fh=n("bMav"),qh=n("T4H+"),Wh=n("SKds"),Hh=n("lQIu"),Kh=n("D8VW"),zh=n("8uPo"),Vh=n("GmW1"),Gh=n("ys29"),Yh=n("D+VW"),Xh=n("8Tlt"),Qh=n("Q0Yk"),Jh=n("fRBV"),$h=n("rDL/"),Zh=n("LiJA"),ef=n("0Gjp"),tf=n("H+7l"),nf=n("IG37"),rf=n("XwbL"),af=n("uXwy"),of=n("g5Ym"),sf=n("wkyi"),cf=n("1ahL"),lf=n("x7My"),uf=n("TeX2");function df(e,t){if(1&e){var n=k.nc();k.mc(0,"button",6),k.uc("click",(function(){k.Qc(n);var e=t.$implicit,r=k.yc();return r.selected.next(e.rating),r.expandCard=!0})),k.zc(1,"async"),k.zc(2,"async"),k.hc(3,"img",7),k.fd(4),k.zc(5,"async"),k.lc()}if(2&e){var r=t.$implicit,i=k.yc();k.Yb("selected",k.Ac(1,7,i.selected)==r.rating)("has-selected",k.Ac(2,9,i.selected)),k.Sb(3),k.Fc("src","./assets/images/emoticons/",r.url,"",k.Tc),k.Ec("width",r.size),k.Sb(1),k.hd(" ",k.Ac(5,11,i.selectedRating)," ")}}var pf=function(){function e(e){this.translate=e,this.expandCard=!1,this.emotions=[{url:"love.svg",rating:5,size:47},{url:"happy.svg",rating:4,size:47},{url:"meh.svg",rating:3,size:47},{url:"disappointed.svg",rating:2,size:47},{url:"dislike.svg",rating:1,size:49}],this.selected=new T.a(void 0)}return Object.defineProperty(e.prototype,"userRating",{set:function(e){e!==this.selected.value&&this.selected.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportUrl",{get:function(){return z.a.get("ZENDESK_CONTACT_US_URL")},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(k.gc(y.e))},e.\u0275cmp=k.ac({type:e,selectors:[["help-card-emoticon-rating"]],inputs:{userRating:"userRating"},outputs:{selected:"selected"},decls:10,vars:10,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"emoticon-container","fx-margin-bottom-20","fx-margin-top-20"],["class","emoticon-button fx-button fx-icon",3,"selected","has-selected","click",4,"ngFor","ngForOf"],[1,"emoticon-link","fx-center"],["target","_blank",1,"primary",3,"href"],[1,"emoticon-button","fx-button","fx-icon",3,"click"],[3,"src","width"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"h2",1),k.fd(2),k.zc(3,"async"),k.lc(),k.mc(4,"div",2),k.dd(5,df,6,13,"button",3),k.lc(),k.mc(6,"div",4),k.mc(7,"a",5),k.fd(8),k.zc(9,"async"),k.lc(),k.lc(),k.lc()),2&e&&(k.Sb(2),k.gd(k.Ac(3,6,t.translate.get("HELP.EXP_SO_FAR"))),k.Sb(3),k.Dc("ngForOf",t.emotions),k.Sb(1),k.Yb("show-link",t.expandCard),k.Sb(1),k.Ec("href",t.supportUrl,k.Tc),k.Sb(1),k.hd(" ",k.Ac(9,8,t.translate.get("HELP.TELL_US"))," "))},directives:[a.s],pipes:[a.b],styles:['.emoticon-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;height:50px}.emoticon-button[_ngcontent-%COMP%]{transform:scale(1);transition:transform .3s ease-in-out,opacity .3s ease-in-out;position:relative}.emoticon-button[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:1}.emoticon-button.has-selected[_ngcontent-%COMP%]{opacity:.5}.emoticon-button.selected[_ngcontent-%COMP%]{opacity:1}.emoticon-button.selected[_ngcontent-%COMP%]:before{background-image:url(/assets/images/emoticons/selected.svg);content:" ";height:18px;width:18px;display:block;position:absolute;bottom:0;right:0}.emoticon-link[_ngcontent-%COMP%]{transition:height .3s cubic-bezier(.68,-.55,.265,1.55);height:0;line-height:30px;overflow:hidden}.emoticon-link.show-link[_ngcontent-%COMP%]{height:30px}'],changeDetection:0}),e}(),hf=n("52aJ"),ff=n("8RvG"),mf=n("1GLe"),gf=n("s9xl"),bf=n("cN7q"),vf=n("qvOF"),_f=n("E5oP"),yf=n("H0K4"),Of=function(){function e(){}return e.match=function(e){if(e.length>0){var t=e[0].path;if(t.startsWith("edit")||t.startsWith("dashboard"))return{consumed:e}}return null},e}(),xf=[{path:"edit-permission-error",component:cd,canActivate:[An.a]},{path:"view-permission-error",component:pd,canActivate:[An.a]},{path:"desktop-permission-error",component:id,canActivate:[An.a]},{path:"new/project/:project",canActivate:[at.a],component:Ac},{path:"",runGuardsAndResolvers:"always",component:Ac,canDeactivate:[Uc],canActivate:[Uc],resolve:[Uc],children:[{path:"view",loadChildren:function(){return Promise.all([n.e(1),n.e(31)]).then(n.bind(null,"SDYM")).then((function(e){return e.ViewerModule}))}},{matcher:Of.match,loadChildren:function(){return Promise.all([n.e(1),n.e(30)]).then(n.bind(null,"C7fj")).then((function(e){return e.EditorModule}))}},{path:"",redirectTo:"view",pathMatch:"full"},{path:"",outlet:"right-pane",component:Nc.a},{outlet:"shape-text-editor",component:lh,path:""},{outlet:"weblinks-viewer",component:zu,path:""},{outlet:"tiptap-docs-shape-text",component:i.a,path:""},{outlet:"shape-data-viewer",component:qd,path:""},{outlet:"floating-media-card",component:yp,path:""}]}],Ef=function(){function e(e,t,n,r,i,a,o,s,c,l,u,d,p,h,f,m,g,b,v,_,y,O,x,E,k){this.mapper=e,this.realtime=t,this.ll=n,this.ell=r,this.defLocator=i,this.imageLoader=a,this.pluginReg=o,this.offlineSync=p,this.realtimeState=h,this.planPermManager=f,this.injector=m,this.realtimeDataSync=g,this.followUserSvc=b,this.edata=v,this.searchService=_,this.documentSearchProvider=y,this.userPermissionUpdateService=O,this.plusCreateService=x,this.drs=E,this.ll.initialize(),this.ell.initialize(),Kr.a.register(this.mapper),this.loadBundledDefinitions(),Nn.register(this.mapper),kn.a.register(this.mapper),this.initializeFactories(i,a),this.realtime.start(),k.initialize(),this.pluginReg.initialize(),d.initialize(),this.offlineSync.start(),this.realtimeState.initialize(),this.realtimeDataSync.initialize(),this.followUserSvc.initialize(),this.edata.initialize(),this.registerHandlers(),Fc.a.register(this.mapper),this.searchService.register(y),this.userPermissionUpdateService.start(),this.defLocator.prepareShapesLatestVersion(),this.drs.initialize(),this.handleServiceWokerUnregister()}return e.prototype.initializeFactories=function(e,t){fe.y.instance.registerDefinitionLocator(e),fe.B.instance.registerDefinitionLocator(e),fe.g.instance.registerDefinitionLocator(e),fe.r.instance.registerResourceLoader(t),fe.l.instance.registerDefinitionLocator(e),Tu.a.instance.registerDefinitionLocator(e),Au.a.instance.registerDefinitionLocator(e)},e.prototype.loadBundledDefinitions=function(){var e=this;fe.K.forEach((function(t){return e.defLocator.cacheSourceFile(t,t.name)})),fe.J.forEach((function(t){return e.defLocator.cacheDefinition(t)}))},e.prototype.registerHandlers=function(){this.planPermManager.registerHandler(pe.r.CREATELY_GOOGLE_SEARCH,this.injector.get(ju)),this.planPermManager.registerHandler(pe.r.CREATELY_VIDEO_CONFERENCE,this.injector.get(Lu)),this.planPermManager.registerHandler(pe.r.DIAGRAM_ADD_SHAPES,this.injector.get(Mu)),this.planPermManager.registerHandler(pe.r.COLLABORATE_OFFLINE,this.injector.get(Lc)),this.planPermManager.registerHandler(pe.r.DIAGRAM_IMPORT_IMAGE,this.injector.get(Du))},e.prototype.handleServiceWokerUnregister=function(){window.navigator&&navigator.serviceWorker&&navigator.serviceWorker.getRegistrations().then((function(e){var t,n;try{for(var i=Object(r.k)(e),a=i.next();!a.done;a=i.next()){a.value.unregister()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}))},e.\u0275mod=k.ec({type:e}),e.\u0275inj=k.dc({factory:function(t){return new(t||e)(k.qc(x.z),k.qc(O.h),k.qc(At.a),k.qc(Hc.a),k.qc(Vc.a),k.qc(x.W),k.qc(gt.a),k.qc(fe.D),k.qc(Yu.a),k.qc(Jc.a),k.qc(Pu.a),k.qc(Zc),k.qc(Un),k.qc(yt.b),k.qc(me.l),k.qc(k.C),k.qc(Gu),k.qc(Ba.a),k.qc(Su.a),k.qc(zt.a),k.qc(Ou),k.qc(tp),k.qc(ph.a),k.qc(oa.a),k.qc(Ju.a))},providers:[nr.a,Ue.a,Be.a,Ne.a,Re.a,Le.a,Su.a,At.a,Hc.a,it.a,rt.a,he.v,_t.a,Cu.a,Vc.a,Yu.a,Jc.a,Uc,at.a,ai.a,fa.a,Xu.a,Ze.a,Xe,x.Y,he.s,xu,{provide:"DiagramResponsibility",useExisting:xu},Tn,{provide:"PluginDocumentResponsibility",useExisting:Tn},wn,{provide:"PluginAuthResponsibility",useExisting:wn},Eu,{provide:"DiagramSubscriptionResponsibility",useExisting:Eu},Bn.a,pn.a,ph.a,Je.a,Ye.a,Zn.a,qe.a,Jn.a,$n.a,Ve.a,He.a,Xd.a,Gd.a,Nu.a,zd.a,Yd.a,Vd.a,tt.a,We.a,ir.a,rr.a,tr.a,ze.a,Ge.a,er.a,Qe.a,fe.D,{provide:fe.a,useExisting:Vc.a},{provide:"UndoScenario",useClass:nl},{provide:"RedoScenario",useClass:tl},Fe.a,{provide:"GridService",useClass:Hi.a},Fn.a,Vu.a,{provide:"ShapeBounds",useClass:st},{provide:"SelectionScaleSnap",useClass:sr},{provide:"SelectionMoveSnap",useClass:or},Ht.a,fp.a,ur.a,dr.a,pr.a,hp.a,Ce.a,mp.a,we.a,Xn.a,zn.a,Vn.a,xe.a,Kn.a,Hn.a,op.a,Gn.a,Ee.a,ke.a,ye.a,Oe.a,pp.a,Yn.a,Ra.a,Kt.a,Wn.a,Qn.a,Se.a,Bi.a,Pu.a,je,{provide:"ImageFileReceiver",useExisting:je},Ie.a,et.a,ot.a,cr.a,Ou,zt.a,qn.a,ku.a,ar.a,ed.a,nt.a,gt.a,Zc,Un,x.o,rl.a,wu.a,al.a,il.a,yt.b,Gu,Ba.a,wt,ju,Lu,aa.a,Mu,$e.a,Ke.a,ol.a,sl.a,tp,Lc,Du,Dd.a,Qu.a,Ju.a,$u.a,Zu.a,La.a,pt.a,Cn.a,So,Iu.a,lp.a,up.a,gp.a,Gr.a,oa.a,Op.b],imports:[[a.c,O.e,x.Q,x.S,fe.p,b.h.forChild(xf),y.c,E.n,_e.a,C,he.o,v.b,o.m,_.g.forRoot(),me.d,s.b,u.i,l.i,h.b,c.g,m.b,p.e,d.b,o.C,g.c,f.b,h.b,f.b,ve.d.forRoot({player:kf})]]}),e}();function kf(){return be.a}k.Uc(zr.a,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(_n,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(ga,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(he.t,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(he.K,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(ht.a,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(Ad.b,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(Wd.a,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(en.a,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h]),k.Uc(Vt.a,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,ti.a,Ns.a,Jr.a,hh.a,fh.a,b.i,b.e,b.g,b.f,b.j,y.a,L.a,mh.a,gh.a,bh.a,j.a,vh.a,_h.a,yh.a,Oh.a,xh.a,Eh.a,kh.a,Ch.a,wh.a,Sh.a,Ih.a,Th.a,Oo.a,Ah.a,Ph.a,Li.a,Mh.a,Dh.a,jh.a,oe.a,Eo.a,Rh.a,ya.a,Co.a,ko.a,Lh.a,R.b,R.c,Nh.a,Bh.a,Uh.a,Ja.a,Fh.a,ni.a,qh.a,xo.a,Ls.a,Wh.a,yo.a,Hh.b,Kh.a,zh.a,Vh.a,Gh.a,Yh.a,Xh.a,Qh.a,Jh.a,$h.a,Zh.a,ef.a,ha.a,tf.a,nf.a,rf.a,af.a,of.a,sf.a,_o.a,cf.a,lf.a,uf.a,jt.a,K,pf,V,Y,Q,ee,ne,ie,ae,ce,de,qa.a,Wa.a,Va.a,hf.a,ff.a,v.a,o.I,o.x,o.H,o.d,o.y,o.B,o.a,o.E,o.F,o.A,o.s,o.t,o.D,o.o,o.n,o.z,o.b,o.e,o.v,o.w,o.u,_.b,_.a,Xr.a,ei,Qr.a,mf.a,gf.a,ys.a,_s,bf.a,s.a,s.d,s.c,vf.a,l.k,l.j,_f.b,u.a,u.b,u.f,u.g,u.h,u.j,u.k,u.m,u.p,u.n,u.c,u.d,u.o,u.l,u.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,c.d,c.a,c.c,c.e,c.b,c.f,m.a,d.a,d.c,d.d,d.g,d.h,d.f,d.e,o.i,o.k,o.j,o.l,o.f,yf.b,yf.c,g.b,g.d,f.a,f.c,f.d,ve.a,ve.c,ve.b,Ac,pa,Pa,Gi,sa,lc,Ts,ca,Es,To,Br.a,Lr.a,Nc.a,Cd.a,Sd.a,kd.a,Ed.a,lr.a,ft.a,lt.a,ct.a,Ms,js,zr.a,xd,Rn,jn,_n,ga,yn.a,Rr.a,za,Xa,he.A,he.t,he.y,vo,he.K,rp.c,Ya,pd,cd,id,wd.a,Ir.a,Dr.a,jr.a,dn.a,un.a,Ar.a,Tr.a,Mr.a,Pr.a,mt.a,Sr.a,Cr.a,wr.a,En,dc,hr.a,xn.a,Nr.a,np.a,On.a,ht.a,vs,Wt,Tt,ep,$d,_a.a,Sa,zu,yp,Ta,Ad.b,Md.a,vr.a,Ld.b,Td.a,jd.a,qd,Rd.a,Kd.a,Hd.a,Wd.a,sp.a,cp.a,Pd.a,Id.a,Qt.a,Jt.a,xr.a,fr.a,_r.a,kr.a,br.a,Xt.a,Yt.a,Gt.a,Er.a,yr.a,Or.a,en.a,cn,$t.a,ip.a,ap.a,Vt.a,Zt.a,mr.a,gr.a,io,hd.a,Ds,ut.b,dp.a,dt.a,Ri,li,Ai,bp.a,i.a,lh,uh.a,dh.a,Ua.a],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,y.d,ao.b,ao.a,_.h])},O6K7:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r,i=n("D57K"),a=n("MvFr");!function(e){e.CreateComment="create-comment"}(r||(r={}));var o=function(e){function t(t,n){var r=e.call(this,t,n,!0,!0)||this;return r.relatedShape=null,r.setRelatedShape(n),r}return Object(i.e)(t,e),t.prototype.getShapeId=function(){return this.relatedShape?this.relatedShape.name:null},t.prototype.getPosition=function(){return{x:this.relatedMouseEvent.stageX,y:this.relatedMouseEvent.stageY}},t}(a.a)},OOUj:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),l=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(n){var i,a,o=t.state.get("Selected"),s=!1;try{for(var c=Object(r.k)(o),l=c.next();!l.done;l=c.next()){var u=l.value;if(!n.shapes[u].isLocked){s=!1;break}s=!0}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return"lockShape"===e?!s:"unlockShape"===e&&s})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.prototype.getApplyData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(l.qc(s.a),l.qc(a.Hb),l.qc(i.a))},e.\u0275prov=l.cc({token:e,factory:e.\u0275fac}),e}()},PGgW:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("hSRu"),a=n("EM62"),o=n("pYIu"),s=n("tG6W"),c=n("2kYt"),l=n("Mb5J");function u(e,t){if(1&e&&a.hc(0,"toolbar-list-dropdown-item",4),2&e){var n=t.$implicit;a.Dc("item",n)}}var d=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnClickOutside:!0,closeOnBlur:!1}},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return h(e||t)},t.\u0275cmp=a.ac({type:t,selectors:[["toolbar-list-dropdown"]],features:[a.Pb],decls:7,vars:12,consts:[[3,"settings"],["dd",""],["ddbutton","",3,"props","items"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.mc(0,"div"),a.mc(1,"abs-dropdown",0,1),a.hc(3,"toolbar-dropdown-button",2),a.zc(4,"async"),a.dd(5,u,1,1,"toolbar-list-dropdown-item",3),a.zc(6,"async"),a.lc(),a.lc()),2&e){var n,r;a.Wb("ftb-item ftb-item-",t.dropdownType,""),a.Sb(1),a.Dc("settings",a.Hc(11,d)),a.Sb(2),a.Dc("props",t.props)("items",null==(n=a.Ac(4,7,t._data))?null:n.value),a.Sb(2),a.Dc("ngForOf",null==(r=a.Ac(6,9,t._data))?null:r.value)}},directives:[o.a,s.a,c.s,l.a],pipes:[c.b],styles:["toolbar-list-dropdown-item[_ngcontent-%COMP%]{display:block}toolbar-list-dropdown-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),t}(i.a),h=a.oc(p)},PKsm:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)}))},e.exports=t.default},Pj1F:function(e,t,n){var r=n("oFOz"),i=n("sfKy"),a=new Date(Date.UTC(1900,0,1)),o=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],s=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],c=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function l(e){var t=new Date(e);return t.setHours(0,0,0,0),t}function u(e){return 1===new Date(e,1,29).getMonth()}function d(e,t){return Math.ceil((t-e)/1e3/60/60/24)}function p(e){var t=e>-22038912e5?2:1;return Math.ceil((e-a)/864e5)+t}t.DATE=function(e,t,n){var a;return e=i.parseNumber(e),t=i.parseNumber(t),n=i.parseNumber(n),i.anyIsError(e,t,n)?a=r.value:(a=new Date(e,t-1,n)).getFullYear()<0&&(a=r.num),a},t.DATEDIF=function(e,n,r){r=r.toUpperCase(),e=i.parseDate(e),n=i.parseDate(n);var a,o=e.getFullYear(),s=e.getMonth(),c=e.getDate(),l=n.getFullYear(),u=n.getMonth(),d=n.getDate();switch(r){case"Y":a=Math.floor(t.YEARFRAC(e,n));break;case"D":a=t.DAYS(n,e);break;case"M":a=u-s+12*(l-o),d<c&&a--;break;case"MD":c<=d?a=d-c:(0===u?(e.setFullYear(l-1),e.setMonth(12)):(e.setFullYear(l),e.setMonth(u-1)),a=t.DAYS(n,e));break;case"YM":a=u-s+12*(l-o),d<c&&a--,a%=12;break;case"YD":u>s||u===s&&d<c?e.setFullYear(l):e.setFullYear(l-1),a=t.DAYS(n,e)}return a},t.DATEVALUE=function(e){if("string"!=typeof e)return r.value;var t=Date.parse(e);return isNaN(t)?r.value:new Date(e)},t.DAY=function(e){var t=i.parseDate(e);return t instanceof Error?t:t.getDate()},t.DAYS=function(e,t){return e=i.parseDate(e),t=i.parseDate(t),e instanceof Error?e:t instanceof Error?t:p(l(e))-p(l(t))},t.DAYS360=function(e,t,n){if(n=i.parseBool(n||"false"),e=i.parseDate(e),t=i.parseDate(t),e instanceof Error)return e;if(t instanceof Error)return t;if(n instanceof Error)return n;var r,a,o=e.getMonth(),s=t.getMonth();if(n)r=31===e.getDate()?30:e.getDate(),a=31===t.getDate()?30:t.getDate();else{var c=new Date(e.getFullYear(),o+1,0).getDate(),l=new Date(t.getFullYear(),s+1,0).getDate();r=e.getDate()===c?30:e.getDate(),t.getDate()===l?r<30?(s++,a=1):a=30:a=t.getDate()}return 360*(t.getFullYear()-e.getFullYear())+30*(s-o)+(a-r)},t.EDATE=function(e,t){return(e=i.parseDate(e))instanceof Error?e:isNaN(t)?r.value:(t=parseInt(t,10),e.setMonth(e.getMonth()+t),e)},t.EOMONTH=function(e,t){return(e=i.parseDate(e))instanceof Error?e:isNaN(t)?r.value:(t=parseInt(t,10),new Date(e.getFullYear(),e.getMonth()+t+1,0))},t.HOUR=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getHours()},t.INTERVAL=function(e){if("number"!=typeof e&&"string"!=typeof e)return r.value;e=parseInt(e,10);var t=Math.floor(e/94608e4);e%=94608e4;var n=Math.floor(e/2592e3);e%=2592e3;var i=Math.floor(e/86400);e%=86400;var a=Math.floor(e/3600);e%=3600;var o=Math.floor(e/60),s=e%=60;return"P"+(t=t>0?t+"Y":"")+(n=n>0?n+"M":"")+(i=i>0?i+"D":"")+"T"+(a=a>0?a+"H":"")+(o=o>0?o+"M":"")+(s=s>0?s+"S":"")},t.ISOWEEKNUM=function(e){if((e=i.parseDate(e))instanceof Error)return e;(e=l(e)).setDate(e.getDate()+4-(e.getDay()||7));var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+1)/7)},t.MINUTE=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getMinutes()},t.MONTH=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getMonth()+1},t.NETWORKDAYS=function(e,t,n){return this.NETWORKDAYS.INTL(e,t,1,n)},t.NETWORKDAYS.INTL=function(e,t,n,a){if((e=i.parseDate(e))instanceof Error)return e;if((t=i.parseDate(t))instanceof Error)return t;var o=!1,s=[],l=[1,2,3,4,5,6,0],u=new RegExp("^[0|1]{7}$");if(void 0===n)n=c[1];else if("string"==typeof n&&u.test(n))for(o=!0,n=n.split(""),d=0;d<n.length;d++)"1"===n[d]&&s.push(l[d]);else n=c[n];if(!(n instanceof Array))return r.value;void 0===a?a=[]:a instanceof Array||(a=[a]);for(var d=0;d<a.length;d++){var p=i.parseDate(a[d]);if(p instanceof Error)return p;a[d]=p}var h=Math.round((t-e)/864e5)+1,f=h,m=e;for(d=0;d<h;d++){for(var g=(new Date).getTimezoneOffset()>0?m.getUTCDay():m.getDay(),b=o?s.includes(g):g===n[0]||g===n[1],v=0;v<a.length;v++){var _=a[v];if(_.getDate()===m.getDate()&&_.getMonth()===m.getMonth()&&_.getFullYear()===m.getFullYear()){b=!0;break}}b&&f--,m.setDate(m.getDate()+1)}return f},t.NOW=function(){return new Date},t.SECOND=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getSeconds()},t.TIME=function(e,t,n){return e=i.parseNumber(e),t=i.parseNumber(t),n=i.parseNumber(n),i.anyIsError(e,t,n)?r.value:e<0||t<0||n<0?r.num:(3600*e+60*t+n)/86400},t.TIMEVALUE=function(e){return(e=i.parseDate(e))instanceof Error?e:(3600*e.getHours()+60*e.getMinutes()+e.getSeconds())/86400},t.TODAY=function(){return l(new Date)},t.WEEKDAY=function(e,t){if((e=i.parseDate(e))instanceof Error)return e;void 0===t&&(t=1);var n=e.getDay();return s[t][n]},t.WEEKNUM=function(e,t){if((e=i.parseDate(e))instanceof Error)return e;if(void 0===t&&(t=1),21===t)return this.ISOWEEKNUM(e);var n=o[t],r=new Date(e.getFullYear(),0,1),a=r.getDay()<n?1:0;return r-=24*Math.abs(r.getDay()-n)*60*60*1e3,Math.floor((e-r)/864e5/7+1)+a},t.WORKDAY=function(e,t,n){return this.WORKDAY.INTL(e,t,1,n)},t.WORKDAY.INTL=function(e,t,n,a){if((e=i.parseDate(e))instanceof Error)return e;if((t=i.parseNumber(t))instanceof Error)return t;if(t<0)return r.num;if(!((n=void 0===n?c[1]:c[n])instanceof Array))return r.value;void 0===a?a=[]:a instanceof Array||(a=[a]);for(var o=0;o<a.length;o++){var s=i.parseDate(a[o]);if(s instanceof Error)return s;a[o]=s}for(var l=0;l<t;){e.setDate(e.getDate()+1);var u=e.getDay();if(u!==n[0]&&u!==n[1]){for(var d=0;d<a.length;d++){var p=a[d];if(p.getDate()===e.getDate()&&p.getMonth()===e.getMonth()&&p.getFullYear()===e.getFullYear()){l--;break}}l++}}return e},t.YEAR=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getFullYear()},t.YEARFRAC=function(e,t,n){if((e=i.parseDate(e))instanceof Error)return e;if((t=i.parseDate(t))instanceof Error)return t;n=n||0;var r=e.getDate(),a=e.getMonth()+1,o=e.getFullYear(),s=t.getDate(),c=t.getMonth()+1,l=t.getFullYear();switch(n){case 0:return 31===r&&31===s?(r=30,s=30):31===r?r=30:30===r&&31===s&&(s=30),(s+30*c+360*l-(r+30*a+360*o))/360;case 1:var p=365;if(o===l||o+1===l&&(a>c||a===c&&r>=s))return(o===l&&u(o)||function(e,t){var n=e.getFullYear(),r=new Date(n,2,1);if(u(n)&&e<r&&t>=r)return!0;var i=t.getFullYear(),a=new Date(i,2,1);return u(i)&&t>=a&&e<a}(e,t)||1===c&&29===s)&&(p=366),d(e,t)/p;var h=l-o+1,f=(new Date(l+1,0,1)-new Date(o,0,1))/1e3/60/60/24/h;return d(e,t)/f;case 2:return d(e,t)/360;case 3:return d(e,t)/365;case 4:return(s+30*c+360*l-(r+30*a+360*o))/360}}},QCJn:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=n("hSRu"),a=n("EM62"),o=n("2kYt"),s=n("pYIu"),c=n("XLk1"),l=n("uXwy");function u(e,t){if(1&e&&(a.mc(0,"label",7),a.fd(1),a.lc()),2&e){var n=a.yc();a.Sb(1),a.gd(null==n.props?null:n.props.label)}}function d(e,t){if(1&e&&a.hc(0,"sidebar-list-dropdown-item",8),2&e){var n=t.$implicit;a.Dc("item",n)}}function p(e,t){if(1&e&&a.hc(0,"sidebar-list-dropdown-item",9),2&e){var n=t.$implicit;a.Dc("item",n)}}var h=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return m(e||t)},t.\u0275cmp=a.ac({type:t,selectors:[["sidebar-input-list-dropdown"]],features:[a.Pb],decls:12,vars:19,consts:[["class","caption dd-label",4,"ngIf"],["maxHeight","200px",1,"dropdown-item",3,"autoPosition","settings"],["dd",""],["ddbutton","",3,"readOnly","validation","items","inputChanged"],["class","custom-option","dditem","",3,"item",4,"ngFor","ngForOf"],["dditem",""],["dditem","",3,"item",4,"ngFor","ngForOf"],[1,"caption","dd-label"],["dditem","",1,"custom-option",3,"item"],["dditem","",3,"item"]],template:function(e,t){if(1&e&&(a.dd(0,u,2,1,"label",0),a.mc(1,"abs-dropdown",1,2),a.mc(3,"sidebar-dropdown-input",3),a.uc("inputChanged",(function(e){return t.change.next(e)})),a.zc(4,"async"),a.zc(5,"async"),a.zc(6,"async"),a.lc(),a.dd(7,d,1,1,"sidebar-list-dropdown-item",4),a.zc(8,"async"),a.hc(9,"hr",5),a.dd(10,p,1,1,"sidebar-list-dropdown-item",6),a.zc(11,"async"),a.lc()),2&e){var n,r,i;a.Dc("ngIf",null==t.props?null:t.props.label),a.Sb(1),a.Dc("autoPosition",!1)("settings",a.Hc(18,h)),a.Sb(2),a.Dc("readOnly",null==(n=a.Ac(4,8,t._data))?null:n.readOnly)("validation",null==(r=a.Ac(5,10,t._data))?null:r.validation)("items",null==(i=a.Ac(6,12,t._data))?null:i.value),a.Sb(4),a.Dc("ngForOf",a.Ac(8,14,t.customItems)),a.Sb(3),a.Dc("ngForOf",a.Ac(11,16,t.defaultItems))}},directives:[o.t,s.a,c.a,o.s,l.a],pipes:[o.b],styles:[".dd-label[_ngcontent-%COMP%]{color:#354b53}.custom-option[_ngcontent-%COMP%]  li:last-child{border-bottom:1px solid #f1f4fa}.dropdown-item[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:100%}.shape-search-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:195px;padding-top:1rem}.shape-search-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container .ps-content{padding:0}.shape-search-browse-more-btn[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t}(i.a),m=a.oc(f)},QSAZ:function(e,t,n){"use strict";t.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t.default=r,e.exports=t.default},QuwQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginCommands=void 0,function(e){e.pluginInit="creately:plugin:init",e.pluginUnload="creately:plugin:unload"}(t.PluginCommands||(t.PluginCommands={}))},RrMq:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var r=n("D57K"),i=n("KI7O"),a=n("4y1S"),o=n("5xGT"),s=n("tLVu"),c=n("okSW"),l=n("c7W3"),u=n("2DR2"),d=n("xVbo"),p=n("Ohay"),h=n("8j5Y"),f=n("TLy2"),m=n("Lrfq"),g=n("J+dc"),b=n("YtkY"),v=n("QoSw"),_=n("C05f"),y=n("ROBh"),O=n("HM3f"),x=n("diDk"),E=n("/jjY"),k=n("EePP"),C=n("0jHB"),w=n("X0jn"),S=n("9pEM"),I=n("gZOS"),T=n("6YKU"),A=n("nsO7"),P=n("1pbQ"),M=n("EM62"),D=n("s2Ay"),j=n("bV32"),R=n("j1Bk"),L=n("2kYt"),N=n("+ZK7"),B=n("pTJA"),U=["tabsCmp"];function F(e,t){1&e&&M.hc(0,"entity-type-manage")}var q=function(){function e(e,t,n,r,i,a,o,s,c,l){this.translate=e,this.ll=t,this.ell=n,this.userLocator=r,this.defLocator=i,this.commandService=a,this.elementRef=o,this.state=s,this.permManager=c,this.notifierController=l,this.hasCustomDbPermission=!1,this.tabs=new _.a([]),this.shapeName=new _.a({value:""}),this.hasCustomDbPermission=this.permManager.check([w.r.CUSTOM_DATABASES])}return Object.defineProperty(e.prototype,"title",{get:function(){var e;return null===(e=this.shapeName.value)||void 0===e?void 0:e.shapeType},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.elementRef.nativeElement.hidden=!1,this.initObservable||(this.initObservable=this.initComponent()),this.mainSub=this.initObservable.connect()},e.prototype.unsubscribe=function(){var e;null===(e=this.tabsCmp)||void 0===e||e.clearAll(),this.mainSub&&this.mainSub.unsubscribe()},e.prototype.initComponent=function(){var e=this;return this.state.changes("Selected").pipe(Object(d.a)((function(e){return 1===e.length})),Object(p.a)((function(e,t){return e[0]===t[0]})),Object(h.a)((function(t){var n,r=e.state.get("CommentThreadData");r&&r.visible&&e.state.set("CommentThreadData",{}),e.shapeId=t[0],null===(n=e.tabsCmp)||void 0===n||n.clearAll()})),Object(f.a)((function(t){return e.generateTabs(t[0]).pipe(Object(h.a)((function(t){e.tabs.next(t)})))})),Object(m.a)())},e.prototype.allShapeData=function(e){var t=[];for(var n in e){var r={name:this.ll.forDiagram(n,!1).getDiagramName().pipe(Object(g.a)(1)),count:0,shapes:[],shapesMap:{}};for(var i in t.push(r),e[n])r.shapesMap[e[n][i]]||(r.shapesMap[e[n][i]]=[]),r.shapes.push({docId:n,shapeId:i,name:this.linkShapeName(e[n][i]),link:"shape/"+i}),r.count++,r.shapesMap[e[n][i]].push({docId:n,shapeId:i,name:this.linkShapeName(e[n][i]),link:"shape/"+i})}return t},e.prototype.labelChanged=function(e){var t=this.shapeName.value;"defName"===t.type?this.commandService.dispatch(l.a.renameShape,{shapeId:this.shapeId,name:e}):this.commandService.dispatch(l.a.applyText,{shapeId:this.shapeId,textId:t.id,content:[Object(r.a)(Object(r.a)({},t.format),{text:e})]})},e.prototype.getTabs=function(e,t,n){var r=[this.getInfoTab(e,t),this.getDataTab(e,t,n),this.getAttachmentsTab(e,t)];return this.state.get("SmartRulesEnabled")&&r.push(this.getRulesTab(e,t)),r},e.prototype.generateTabs=function(e,t){var n,i=this,a=(t?this.ll.forDiagram(t,!1).getDiagramModel():this.ll.forCurrentObserver(!1).pipe(Object(f.a)((function(e){return e.getDiagramModel()})))).pipe(Object(f.a)((function(t){return i.enitityEditable(t,e).pipe(Object(b.a)((function(e){return{model:t,entityEditable:e}})))})),Object(b.a)((function(t){var n=i.getPanelNameData(t.model.shapes[e]);return n.value!==i.shapeName.value.value&&i.shapeName.next(n),i.getTabs(t.model,e,t.entityEditable).filter((function(e){return!!e}))}))),o=(t?this.ll.forDiagram(t,!1).getShapeModel(e):this.ll.forCurrentObserver(!1).pipe(Object(f.a)((function(t){return t.getShapeModel(e)})))).pipe(Object(b.a)((function(e){return e.eData})),Object(p.a)(A.isEqual),Object(f.a)((function(e){if(e){var t=Object.keys(e);return n=t[0],i.ell.getEntityOnce(t[0],e[t[0]])}return Object(y.a)([])})),Object(b.a)((function(e){return e instanceof E.a?[i.getLinksTab(n,e.id,e.getDisplayLinks(),i.allShapeData(e.shapes)),i.getShapeHistoryTab(n,e.id)]:[]})));return Object(O.b)([a,o]).pipe(Object(b.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return Object(r.j)(n,i)})))},e.prototype.getPanelNameData=function(e){return e.primaryTextModel&&e.primaryTextModel.plainText?{value:e.primaryTextModel.plainText,type:"textModel",id:e.primaryTextModel.id,format:e.primaryTextModel.content[0],shapeType:e.name}:{value:e.name,shapeType:e.name,type:"defName"}},e.prototype.getDataTab=function(e,t,n){var r=this,i=e.shapes[t],a=e.getShapeDataItems(t);return{id:"data",label:this.translate.instant("SHAPE_DATA.TABS.DATA.LABEL"),content:{type:u.b,inputs:{context:"right.data.data",entityEditable:n,dataItems:a,shape:i,diagramId:e.id,onChange:function(t){return r.onShapeDataItemChange(e.id,t)}}}}},e.prototype.getInfoTab=function(e,t){var n=this,r=e.getShapeDataItems(t),a=e.shapes[t];return{id:"info",label:this.translate.instant("SHAPE_DATA.TABS.INFO.LABEL"),content:{type:i.a,inputs:{context:"right.data.info",shapeId:t,diagramId:e.id,parentName:this.parentName,dataItems:r,shape:a,onChange:function(t){return n.onShapeDataItemChange(e.id,t)}}}}},e.prototype.enitityEditable=function(e,t){var n=null==e?void 0:e.shapes,r=n?n[t]:null;return r&&r.eDataId&&r.entityDefId?this.ell.getEData(r.eDataId).pipe(Object(g.a)(1),Object(f.a)((function(e){return e.getEDataModel().pipe(Object(g.a)(1),Object(b.a)((function(e){if(e&&e.customEntityDefs[r.entityDefId])return e.customEntityDefs[r.entityDefId].editable})))}))):Object(y.a)(!1)},e.prototype.getEntityTab=function(e,t){var n=this;return{id:"entity",label:e,content:{type:u.b,inputs:{isEntity:!0,dataItems:t,onChange:function(e){return n.onEntityDataItemChange(e)}}}}},e.prototype.getSettingsTab=function(e,t){var n=this,r=e.getShapeDataItems(t);return{id:"settings",label:'<svg width="24" style="zoom: 80%; position: absolute; margin-left: -12px; " width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M12 8.666c-1.838 0-3.333 1.496-3.333 3.334s1.495 3.333 3.333 3.333 3.333-1.495 3.333-3.333-1.495-3.334-3.333-3.334m0 7.667c-2.39 0-4.333-1.943-4.333-4.333s1.943-4.334 4.333-4.334 4.333 1.944 4.333 4.334c0 2.39-1.943 4.333-4.333 4.333m-1.193 6.667h2.386c.379-1.104.668-2.451 2.107-3.05 1.496-.617 2.666.196 3.635.672l1.686-1.688c-.508-1.047-1.266-2.199-.669-3.641.567-1.369 1.739-1.663 3.048-2.099v-2.388c-1.235-.421-2.471-.708-3.047-2.098-.572-1.38.057-2.395.669-3.643l-1.687-1.686c-1.117.547-2.221 1.257-3.642.668-1.374-.571-1.656-1.734-2.1-3.047h-2.386c-.424 1.231-.704 2.468-2.099 3.046-.365.153-.718.226-1.077.226-.843 0-1.539-.392-2.566-.893l-1.687 1.686c.574 1.175 1.251 2.237.669 3.643-.571 1.375-1.734 1.654-3.047 2.098v2.388c1.226.418 2.468.705 3.047 2.098.581 1.403-.075 2.432-.669 3.643l1.687 1.687c1.45-.725 2.355-1.204 3.642-.669 1.378.572 1.655 1.738 2.1 3.047m3.094 1h-3.803c-.681-1.918-.785-2.713-1.773-3.123-1.005-.419-1.731.132-3.466.952l-2.689-2.689c.873-1.837 1.367-2.465.953-3.465-.412-.991-1.192-1.087-3.123-1.773v-3.804c1.906-.678 2.712-.782 3.123-1.773.411-.991-.071-1.613-.953-3.466l2.689-2.688c1.741.828 2.466 1.365 3.465.953.992-.412 1.082-1.185 1.775-3.124h3.802c.682 1.918.788 2.714 1.774 3.123 1.001.416 1.709-.119 3.467-.952l2.687 2.688c-.878 1.847-1.361 2.477-.952 3.465.411.992 1.192 1.087 3.123 1.774v3.805c-1.906.677-2.713.782-3.124 1.773-.403.975.044 1.561.954 3.464l-2.688 2.689c-1.728-.82-2.467-1.37-3.456-.955-.988.41-1.08 1.146-1.785 3.126"/></svg>',content:{type:k.b,inputs:{context:"right.data.settings.dataField",dataItems:r,onChange:function(t){return n.onShapeDataItemChange(e.id,t)}}},buttonAlignment:"right"}},e.prototype.getAttachmentsTab=function(e,t){if(e.shapes[t].attachmentIds.length>0){var n=e.shapes[t].attachmentIds.map((function(t){return e.attachments[t]}));return{id:"attachments",label:this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.LABEL"),content:{type:s.a,inputs:{shapeAttachments:n}}}}},e.prototype.getRulesTab=function(e,t){var n=this,r=e.shapes[t];if(r.isContainer){var i=r.rules;return{id:"rules",label:this.translate.instant("SHAPE_DATA.TABS.RULES.TITLE"),content:{type:S.a,inputs:{rules:i,onChange:function(t){return n.onShapeRulesChange(e,r.id,t)}}}}}},e.prototype.getLinksTab=function(e,t,n,r){return{id:"links",label:this.translate.instant("SHAPE_DATA.TABS.LINKS.TITLE"),content:{type:c.a,inputs:{eDataId:e,entityId:t,links:n,shapes:r}},buttonAlignment:"left"}},e.prototype.getShapeHistoryTab=function(e,t){return{id:"history",label:this.translate.instant("SHAPE_DATA.TABS.HISTORY.TITLE"),content:{type:P.a,inputs:{eDataId:e,entityId:t}},buttonAlignment:"left"}},e.prototype.linkShapeName=function(e){return this.defLocator.getDefinition(e).pipe(Object(b.a)((function(e){return e.name})))},e.prototype.onShapeDataItemChange=function(e,t){var n,r,i=this,a=this.shapeId;if(t.data&&(t.data.labelEditable||t.id===u.a)&&(t.data.isPublic=!0),a){if(t.data&&t.data.__sakota__&&!t.data.__sakota__.hasChanges())return;this.commandService.dispatch(l.a.changeShapeDataItems,e,(n={},n[a]=(r={},r[t.id]=t.data,r),n)).subscribe({error:function(e){if(!(e instanceof T.b))throw e;i.showFormulaUpdateErrorsNotification(e)}})}},e.prototype.showFormulaUpdateErrorsNotification=function(e){var t={inputs:{description:this.translate.instant("SHAPE_DATA.FORMULA_ERROR."+e.message),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("FORMULA_UPDATE_ERROR",o.i,o.ib.Warning,t,!1)},e.prototype.onShapeRulesChange=function(e,t,n){var r=I.Sakota.create(e);r.shapes[t].rules=n;var i=r.__sakota__.getChanges();i.$set&&this.commandService.dispatch(l.a.applyModifierDocument,e.id,{modifier:i})},e.prototype.onEntityDataItemChange=function(e){this.shapeId},e.\u0275fac=function(t){return new(t||e)(M.gc(D.e),M.gc(v.a),M.gc(x.a),M.gc(a.x),M.gc(C.a),M.gc(o.B),M.gc(M.r),M.gc(o.Hb),M.gc(a.l),M.gc(o.jb))},e.\u0275cmp=M.ac({type:e,selectors:[["shape-data-editor"]],viewQuery:function(e,t){var n;(1&e&&M.kd(U,!0,o.k),2&e)&&(M.Mc(n=M.vc())&&(t.tabsCmp=n.first))},inputs:{parentName:"parentName"},decls:9,vars:3,consts:[[1,"shape-data-editor-container"],["tooltip-tour-step","data-2",1,"shape-data-editor-tabs-section"],[1,"shape-data-editor-header"],[1,"main",3,"mainText"],[1,"shape-data-editor-buttons-group"],[4,"ngIf"],[1,"shape-data-editor-tabs"],["context","right.data",3,"tabs"],["tabsCmp",""]],template:function(e,t){1&e&&(M.mc(0,"div",0),M.mc(1,"div",1),M.mc(2,"div",2),M.hc(3,"panel-icon-header",3),M.mc(4,"div",4),M.dd(5,F,1,0,"entity-type-manage",5),M.lc(),M.lc(),M.mc(6,"div",6),M.hc(7,"abs-tab",7,8),M.lc(),M.lc(),M.lc()),2&e&&(M.Sb(3),M.Ec("mainText",t.title),M.Sb(2),M.Dc("ngIf",t.hasCustomDbPermission&&"home"!==t.state.get("CurrentProject")),M.Sb(2),M.Dc("tabs",t.tabs))},directives:[j.a,R.a,L.t,N.a,B.a],styles:[".main[_ngcontent-%COMP%]{color:#04263d}.panel-container[_ngcontent-%COMP%]{padding-right:0}.shape-data-editor-tabs[_ngcontent-%COMP%]{height:calc(100% - 65px);overflow:hidden}.shape-data-editor-buttons-group[_ngcontent-%COMP%]{position:absolute;right:.625rem}abs-tab[_ngcontent-%COMP%]{display:block;height:100%}.shape-data-editor-overlay[_ngcontent-%COMP%]{z-index:100;background-color:rgba(0,0,0,.8)}.shape-data-editor-container[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;position:relative;padding-left:1rem;padding-top:1.25rem;padding-bottom:1rem}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:focus, .shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:hover{background-color:#fff}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label{margin-right:.75rem}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-view{position:relative!important;top:0;left:0;z-index:1000;transform:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-container{position:relative;z-index:2;background:unset;border:unset;box-shadow:unset;border-radius:unset;width:100%;transform:unset}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input-user{display:none}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input{border-top:unset!important;margin-top:-1rem}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input.main-comment-input{position:absolute;bottom:.5rem;left:.625rem;width:220px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area{padding-left:1rem;padding-right:0;max-height:650px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu{display:block;top:.125rem;right:-.5rem}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu .menu-content{top:1.25rem!important;right:-.625rem!important;width:133px!important;padding:9px 15px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area comment-thread-item:first-child{display:none!important}.shape-data-editor-header[_ngcontent-%COMP%]{position:relative;display:flex;margin-right:8rem}.shape-data-editor-header[_ngcontent-%COMP%]  .abs-tab-header{margin-right:.625rem}.shape-data-editor-header-title[_ngcontent-%COMP%]{width:80%}.shape-data-editor-tabs[_ngcontent-%COMP%]  .abs-tab-header{margin-right:12rem;border-bottom:none}.shape-data-editor-tabs[_ngcontent-%COMP%]  .abs-tab-header a{margin-right:1.5rem;margin-left:0;font-weight:500}.shape-data-editor-copy-options[_ngcontent-%COMP%]{position:absolute;right:-1rem;top:3rem;width:50px}.shape-data-editor-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column}.shape-data-editor-content-text[_ngcontent-%COMP%]{flex:1}.shape-data-editor-button-container[_ngcontent-%COMP%]{text-align:right}.shape-data-editor-close-btn[_ngcontent-%COMP%]{top:.25rem;right:.25rem;position:absolute}.shape-data-editor-tabs-section[_ngcontent-%COMP%]{float:left;width:inherit;height:100%}","[_nghost-%COMP%]  .mat-form-field{width:100%}[_nghost-%COMP%]  .mat-input-element{caret-color:unset!important;font-size:.875rem;margin:.375rem!important}[_nghost-%COMP%]  .mat-form-field-underline, [_nghost-%COMP%]  span.mat-form-field-ripple{display:none}[_nghost-%COMP%]  .mat-form-field-infix{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:.875rem;font-weight:400;padding:.25rem;border-top:none}[_nghost-%COMP%]  .mat-form-field-wrapper{padding-bottom:.125rem!important}[_nghost-%COMP%]  .mat-ripple-element{display:none!important}[_nghost-%COMP%]  div[data-abs-tab-id=data] .shape-data-item-desc, [_nghost-%COMP%]  div[data-abs-tab-id=info] .shape-data-item-add, [_nghost-%COMP%]  div[data-abs-tab-id=info] .shape-data-items-container{display:none}[_nghost-%COMP%]  div[data-abs-tab-id=data] .label-editable-data-item-label{display:block!important}"],changeDetection:0}),e}()},Rx0M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FINISHED=t.RUNNING=t.READY=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=d(n("kRQx")),a=d(n("+ITg")),o=d(n("nyhH")),s=d(n("rgVC")),c=d(n("+gXh")),l=d(n("Rz8A")),u=d(n("fX4D"));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=t.READY="READY",m=t.RUNNING="RUNNING",g=t.FINISHED="FINISHED",b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.rules=[],r.allowUndefinedFacts=n.allowUndefinedFacts||!1,r.pathResolver=n.pathResolver,r.operators=new Map,r.facts=new Map,r.status=f,e.map((function(e){return r.addRule(e)})),l.default.map((function(e){return r.addOperator(e)})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"addRule",value:function(e){if(!e)throw new Error("Engine: addRule() requires options");var t=void 0;if(e instanceof a.default)t=e;else{if(!Object.prototype.hasOwnProperty.call(e,"event"))throw new Error('Engine: addRule() argument requires "event" property');if(!Object.prototype.hasOwnProperty.call(e,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');t=new a.default(e)}return t.setEngine(this),this.rules.push(t),this.prioritizedRules=null,this}},{key:"updateRule",value:function(e){var t=this.rules.findIndex((function(t){return t.name===e.name}));if(!(t>-1))throw new Error("Engine: updateRule() rule not found");this.rules.splice(t,1),this.addRule(e),this.prioritizedRules=null}},{key:"removeRule",value:function(e){var t=!1;if(e instanceof a.default){var n=this.rules.indexOf(e);n>-1&&(t=Boolean(this.rules.splice(n,1).length))}else{var r=this.rules.filter((function(t){return t.name!==e}));t=r.length!==this.rules.length,this.rules=r}return t&&(this.prioritizedRules=null),t}},{key:"addOperator",value:function(e,t){var n=void 0;n=e instanceof o.default?e:new o.default(e,t),(0,u.default)("engine::addOperator name:"+n.name),this.operators.set(n.name,n)}},{key:"removeOperator",value:function(e){var t=void 0;return t=e instanceof o.default?e.name:e,this.operators.delete(t)}},{key:"addFact",value:function(e,t,n){var r=e,a=void 0;return e instanceof i.default?(r=e.id,a=e):a=new i.default(e,t,n),(0,u.default)("engine::addFact id:"+r),this.facts.set(r,a),this}},{key:"removeFact",value:function(e){var t=void 0;return t=e instanceof i.default?e.id:e,this.facts.delete(t)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var e=this.rules.reduce((function(e,t){var n=t.priority;return e[n]||(e[n]=[]),e[n].push(t),e}),{});this.prioritizedRules=Object.keys(e).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(t){return e[t]}))}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=g,this}},{key:"getFact",value:function(e){return this.facts.get(e)}},{key:"evaluateRules",value:function(e,t){var n=this;return Promise.all(e.map((function(e){return n.status!==m?((0,u.default)("engine::run status:"+n.status+"; skipping remaining rules"),Promise.resolve()):e.evaluate(t).then((function(e){return(0,u.default)("engine::run ruleResult:"+e.result),t.addResult(e),e.result?(t.addEvent(e.event,"success"),n.emitAsync("success",e.event,t,e).then((function(){return n.emitAsync(e.event.type,e.event.params,t,e)}))):(t.addEvent(e.event,"failure"),n.emitAsync("failure",e.event,t,e))}))})))}},{key:"run",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)("engine::run started"),this.status=m;var n={allowUndefinedFacts:this.allowUndefinedFacts,pathResolver:this.pathResolver},r=new s.default(this.facts,t,n),i=this.prioritizeRules(),a=Promise.resolve();return new Promise((function(t,n){i.map((function(t){return a=a.then((function(){return e.evaluateRules(t,r)})).catch(n)})),a.then((function(){e.status=g,(0,u.default)("engine::run completed");var n=r.getResults().reduce((function(e,t){return e[t.result?"results":"failureResults"].push(t),e}),{results:[],failureResults:[]}),i=n.results,a=n.failureResults;t({almanac:r,results:i,failureResults:a,events:r.getEvents("success"),failureEvents:r.getEvents("failure")})})).catch(n)}))}}]),t}(c.default);t.default=b},Rz8A:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("nyhH"),a=(r=i)&&r.__esModule?r:{default:r};var o=[];function s(e){return"NaN"!==Number.parseFloat(e).toString()}o.push(new a.default("equal",(function(e,t){return e===t}))),o.push(new a.default("notEqual",(function(e,t){return e!==t}))),o.push(new a.default("in",(function(e,t){return t.indexOf(e)>-1}))),o.push(new a.default("notIn",(function(e,t){return-1===t.indexOf(e)}))),o.push(new a.default("contains",(function(e,t){return e.indexOf(t)>-1}),Array.isArray)),o.push(new a.default("doesNotContain",(function(e,t){return-1===e.indexOf(t)}),Array.isArray)),o.push(new a.default("lessThan",(function(e,t){return e<t}),s)),o.push(new a.default("lessThanInclusive",(function(e,t){return e<=t}),s)),o.push(new a.default("greaterThan",(function(e,t){return e>t}),s)),o.push(new a.default("greaterThanInclusive",(function(e,t){return e>=t}),s)),t.default=o},SBjo:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),l=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(e){var n,i,a=t.state.get("Selected"),o=!0;try{for(var s=Object(r.k)(a),c=s.next();!c.done;c=s.next()){var l=c.value;if(!e.shapes[l].isLocked){o=!1;break}}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!o})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.prototype.getApplyData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(l.qc(s.a),l.qc(a.Hb),l.qc(i.a))},e.\u0275prov=l.cc({token:e,factory:e.\u0275fac}),e}()},SKSx:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("h1tj"),a=n("X0jn"),o=n("C0rp"),s=function(e){function t(t,n,r,i,a,o){var s=e.call(this)||this;return s.value=t,s.text=n,s.width=a,s.height=o,s.graphics.clear(),s.graphics.beginFill("rgba(0,0,0,0.01)"),s.graphics.drawRect(0,0,s.width,s.height),s.graphics.endFill(),s.x=r,s.y=i,s}return Object(r.e)(t,e),t.prototype.getCursor=function(e){return{cursor:"pointer",tail:null,type:"css"}},t}(i.Shape),c=function(e){function t(t,n){var r=e.call(this)||this;r.text=t,r.origin=n;var i=o.document(a.b);return i.load(t.content),i.width(t.width),i.getLinksData().forEach((function(e){var t=new s(e.value,e.text,e.x,e.y,e.width,e.height);r.addChild(t)})),r}return Object(r.e)(t,e),t.prototype.destroy=function(){},t}(i.Container)},STWM:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5xGT"),i=n("6Oco"),a=n("CSUU"),o=n("Oggp"),s=n("19Zn"),c=n("EM62"),l=function(){function e(e){this.smartContainerSvc=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"ContainerChangeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges(),r=e.__sakota__.getTarget();if(n.$set)return this.containerXChange(e,n),this.containerYChange(e,n),this.containerZIndexChage(e,n),this.containerAngleChange(e,n),this.containerAnyChange(e,n),this.containerScaleChange(e,n),this.containerIdentifierChange(e,n,r),this.reScaleToDateFit(e,n,t),Object(i.b)()},e.prototype.containerXChange=function(t,n){for(var r in n.$set){e.regexX.lastIndex=0;var i=e.regexX.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.containerScaleChange=function(t,n){for(var r in n.$set){e.regexScaleX.lastIndex=0;var i=e.regexScaleX.exec(r)||e.regexScaleY.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.reScaleToDateFit=function(t,n,r){if("Execute"===r)for(var i in n.$set){e.regexScaleX.lastIndex=0;var a=e.regexScaleX.exec(i)||e.regexScaleY.exec(i);if(a){var c=a[1],l=t.shapes[c];if(!(!l.isContainer||l.containerContexts.length<1||l.containerContexts.length>0&&l.containerContexts[0]!==s.C.XWithWidth)){var u=l.data.startDate.value,d=l.data.endDate.value,p=Object(o.a)(d,u),h=Math.floor(l.drawWidth/p)*p;l.scaleX=h/l.defaultBounds.width}}}},e.prototype.containerIdentifierChange=function(t,n,r){var i=this,a=function(a){e.regexDataChanges.lastIndex=0;var o=e.regexDataChanges.exec(a);if(!o)return"continue";if(/data.identifier.value/.test(a)){var s=o[1],c=n.$set[a],l=r.shapes[s].data.identifier.value,u=t.shapes[s];Object.keys(u.children).forEach((function(e){var n=t.shapes[e];i.smartContainerSvc.changeTheIdentifier(t,n,l,c)}))}};for(var o in n.$set)a(o)},e.prototype.containerYChange=function(t,n){for(var r in n.$set){e.regexY.lastIndex=0;var i=e.regexY.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.containerAngleChange=function(t,n){for(var r in n.$set){e.regexAngle.lastIndex=0;var i=e.regexAngle.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.updateTransform=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length)for(var n in t.children){var i=e.shapes[n];if(i&&!i.isConnector()){var a=t.children[n].relativeX,o=t.children[n].relativeY,s=t.children[n].relativeAngle,c={x:{value:a,type:"fixed-start"},y:{value:o,type:"fixed-start"}},l=r.nb.onRect(c,t.defaultBounds,t.transform),u=t.angle+s;i.angle!==u&&(i.angle=u),i.x!==l.x&&(i.x=l.x),i.y!==l.y&&(i.y=l.y),this.updateTransform(e,i)}}},e.prototype.containerZIndexChage=function(t,n){for(var r in n.$set){e.regexZindex.lastIndex=0;var i=e.regexZindex.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateZIndex(t,o)}}},e.prototype.updateZIndex=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length){var n=function(n){var i=e.shapes[n];if(i){var a=t.children[i.id].relativeZIndex,o=t.zIndex+1+a;i.zIndex!==o&&(i.zIndex=o),(i.getConnectors&&i.getConnectors(e)||[]).forEach((function(t){e.shapes[t.connector.id].zIndex!==o&&(e.shapes[t.connector.id].zIndex=o)})),r.updateZIndex(e,i)}},r=this;for(var i in t.children)n(i)}},e.prototype.containerAnyChange=function(t,n){var r=new Set;for(var i in n.$set){e.regexAny.lastIndex=0;var a=e.regexAny.exec(i);if(a){var o=a[1],s=t.shapes[o];r.has(o)||this.callContainerChangeHook(t,s),r.add(o)}}},e.prototype.callContainerChangeHook=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length)for(var n in t.children){var r=e.shapes[n];r&&(r.containerChange&&r.containerChange(r,e.shapes[r.containerId]),this.callContainerChangeHook(e,r))}},e.regexX=/shapes\.([^\.]+)\.x/g,e.regexY=/shapes\.([^\.]+)\.y/g,e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.regexScaleY=/shapes\.([^\.]+)\.scaleY/g,e.regexZindex=/shapes\.([^\.]+)\.zIndex/g,e.regexAngle=/shapes\.([^\.]+)\.angle/g,e.regexAny=/shapes\.([^\.]+)\./g,e.regexDataChanges=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.\u0275fac=function(t){return new(t||e)(c.qc(a.a))},e.\u0275prov=c.cc({token:e,factory:e.\u0275fac}),e}()},"SXG+":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("5xGT"),a=n("6Oco"),o=n("P4Xx"),s=n("ROBh"),c=n("nsO7"),l=n("8j5Y"),u=n("EM62"),d=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"LayoutingBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["containerRegions"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){if(t===i.A.PREVIEW)return a.a;var n=e.__sakota__.getChanges();return Object(o.a)(this.applyLayout(e,n))},e.prototype.applyLayout=function(t,n){var i=this,a=[Object(s.a)({})],c=new Map;for(var l in n.$set){e.regexLayoutIndexChange.lastIndex=0,e.regexRegionChange.lastIndex=0;var u=e.regexLayoutIndexChange.exec(l),d=e.regexRegionChange.exec(l);if(u||d)if(u){var p=u[1],h=(b=t.shapes[p]).containerId,f=b.containerRegionId,m=t.shapes[h],g=void 0;c.has(h)?g=c.get(h):(g=new Set,c.set(h,g)),m&&f&&!g.has(f)&&g.add(f)}else if(d){h=d[1],f=d[2],m=t.shapes[h],g=void 0;c.has(h)?g=c.get(h):(g=new Set,c.set(h,g)),m&&f&&!g.has(f)&&g.add(f)}}for(var l in n.$unset){e.regexLayoutIndexChange.lastIndex=0,e.regexRegionChange.lastIndex=0;u=e.regexLayoutIndexChange.exec(l),d=e.regexRegionChange.exec(l);if(u||d)if(u){var b;p=u[1],h=(b=t.shapes[p]).containerId,f=b.containerRegionId,m=t.shapes[h],g=void 0;c.has(h)?g=c.get(h):(g=new Set,c.set(h,g)),m&&f&&!g.has(f)&&g.add(f)}else if(d){h=d[1],f=d[2],m=t.shapes[h],g=void 0;c.has(h)?g=c.get(h):(g=new Set,c.set(h,g)),m&&f&&!g.has(f)&&g.add(f)}}return c.forEach((function(e,n){var r=t.shapes[n];a.push(i.layoutChildren(t,r,Array.from(e)))})),o.a.apply(void 0,Object(r.j)(a))},e.prototype.layoutChildren=function(e,t,n,a){var u=this;void 0===a&&(a=!0);var d=[Object(s.a)({})],p=[];return n.forEach((function(n){var a=t.containerRegions[n];if(a&&a.shapes&&!Object(c.isEmpty)(a.shapes)){p.push.apply(p,Object(r.j)(Object.keys(a.shapes)));var o=Object.keys(a.shapes).map((function(t){return e.shapes[t]})).filter((function(e){return e})),s={x:a.x+t.x,y:a.y+t.y,width:a.width,height:a.height};d.push(i.Z.apply(e,o,s,a.layoutingData))}})),o.a.apply(void 0,Object(r.j)(d)).pipe(Object(l.a)({complete:function(){var n,i;if(!Object(c.isEmpty)(t.children)&&p.length>0)try{for(var o=Object(r.k)(p),s=o.next();!s.done;s=o.next()){var l=s.value;u.updateRelativeTranslate(t,e.shapes[l])}}catch(d){n={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}a&&(t.resizeContainerAfterLayouting?t.resizeContainerAfterLayouting(e,t):u.resizeContainerAfterLayouting(e,t))}}))},e.prototype.updateRelativeTranslate=function(e,t){var n=e.defaultBounds.getTransformedPoints(e.transform),r=t,a=r.defaultBounds.getTransformedPoints(r.transform),o=r.angle-e.angle,s=i.ab.from(n.topLeft.x,n.topLeft.y,n.bottomLeft.x,n.bottomLeft.y).perpendicularTo(a.topLeft),c=i.ab.from(s.x,s.y,a.topLeft.x,a.topLeft.y).length(),l=i.ab.from(n.topLeft.x,n.topLeft.y,n.topRight.x,n.topRight.y).perpendicularTo(a.topLeft),u=i.ab.from(l.x,l.y,a.topLeft.x,a.topLeft.y).length();e.children[t.id]&&(e.children[t.id].relativeX=c,e.children[t.id].relativeY=u,e.children[t.id].relativeAngle=o)},e.prototype.resizeContainerAfterLayouting=function(t,n){var i=n.bounds;if(n.children&&Object.keys(n.children).length){var a=t.getBounds(Object(r.j)(Object.keys(n.children)));a.absorb(i);var o=a.width-i.width,s=a.height-i.height;if(o>0){var c=n.width+o+e.containerResizePadding;n.scaleX=c/n.defaultBounds.width}if(s>0){var l=n.height+s+e.containerResizePadding;n.scaleY=l/n.defaultBounds.height}}},e.containerResizePadding=10,e.regexLayoutIndexChange=/shapes\.([^\.]+)\.layoutIndex/g,e.regexRegionChange=/shapes\.([^\.]+)\.containerRegions\.([^\.]+)\.shapes\.([^\.]+)/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.cc({token:e,factory:e.\u0275fac}),e}()},T4Sa:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r=n("D57K"),i=n("EM62"),a=n("3+4Q"),o=n("5xGT"),s=n("qMyy"),c=n("yn08"),l=n("C05f"),u=n("ZTXN"),d=n("KTx3"),p=n("HM3f"),h=n("ROBh"),f=n("mWib"),m=n("8j5Y"),g=n("Ohay"),b=n("YtkY"),v=n("kuMc"),_=n("J+dc"),y=n("TLy2"),O=n("xVbo"),x=n("X0jn"),E=n("hX56"),k=n("4y1S"),C=n("nsO7"),w=n("ljsB"),S=n("QoSw"),I=n("lu3Q"),T=n("sXdR"),A=n("NNJu"),P=n("C5+t"),M=n("s2Ay"),D=n("j1Bk"),j=n("2kYt"),R=n("crdX"),L=n("ZFuN"),N=n("K0+f"),B=n("nT0V"),U=["cancelButton"],F=["container"];function q(e,t){1&e&&(i.mc(0,"div",15),i.mc(1,"span",16),i.fd(2,"MESSAGES.NO_COMMENTS"),i.lc(),i.mc(3,"span",17),i.fd(4,"\xa0MESSAGES.NO_COMMENTS_ACTION"),i.lc(),i.lc())}function W(e,t){1&e&&(i.mc(0,"div",18),i.mc(1,"span",19),i.fd(2,"MESSAGES.COMMENTS_TIP_1"),i.lc(),i.mc(3,"span",20),i.fd(4,"MESSAGES.COMMENTS_TIP_2"),i.lc(),i.lc())}function H(e,t){if(1&e){var n=i.nc();i.mc(0,"div",23),i.mc(1,"comment-thread-item",24),i.uc("click",(function(){i.Qc(n);var e=t.$implicit;return i.yc(2).handleCommentItemClick(e.parentComment)})),i.lc(),i.lc()}if(2&e){var r=t.$implicit;i.Yb("active",r.selected),i.Sb(1),i.Dc("comment",r.latestComment)("commenter",r.threadCommenter)("threadCommentor",r.previousThreadCommenter)("threadCount",r.commentCount)("showControls",!1)}}function K(e,t){if(1&e&&(i.mc(0,"div",21),i.dd(1,H,2,7,"div",22),i.lc()),2&e){var n=t.ngIf;i.Sb(1),i.Dc("ngForOf",n)}}function z(e,t){if(1&e&&(i.mc(0,"div",28),i.mc(1,"label",29),i.fd(2),i.zc(3,"async"),i.lc(),i.lc()),2&e){var n=i.yc(2);i.Sb(2),i.hd(" ",i.Ac(3,1,n.resolvedLabel)," ")}}function V(e,t){if(1&e){var n=i.nc();i.mc(0,"div",30),i.mc(1,"comment-thread-item",31),i.uc("click",(function(){i.Qc(n);var e=t.$implicit;return i.yc(2).handleCommentItemClick(e.parentComment)})),i.lc(),i.lc()}if(2&e){var r=t.$implicit;i.Sb(1),i.Dc("comment",r.latestComment)("commenter",r.threadCommenter)("threadCommentor",r.previousThreadCommenter)("resolvedCommentor",r.resolvedCommentor)("threadCount",r.commentCount)("showControls",!1)}}function G(e,t){if(1&e&&(i.mc(0,"div",25),i.dd(1,z,4,3,"div",26),i.dd(2,V,2,6,"div",27),i.lc()),2&e){var n=t.ngIf;i.Sb(1),i.Dc("ngIf",n.length>0),i.Sb(1),i.Dc("ngForOf",n)}}var Y=function(e){return{"fx-hidden":e}},X=function(e){return{cursor:e}},Q=function(e){return{value1:e}},J=function(e){return{event:"right.comment.indicator.toggle",data:e}},$=function(){function e(e,t,n,r,i,a,o){this.commands=e,this.state=t,this.datastore=n,this.userLocator=r,this.translateService=i,this.ll=a,this.cursorGen=o,this.toggleEnabled=new l.a(!1),this.toggleCommandHandler=new u.a,this.intervalDuration=3e3,this.toggleThrottle=400,this.isCommentMode=new l.a(!1),this.buttonCursor=new u.a,this.subs=[],this.init()}return Object.defineProperty(e,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return"diagramcomments"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"comment"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translateService.instant("TOOLTIPS.DIAGRAM_COMMENTS")},enumerable:!1,configurable:!0}),e.prototype.closePanel=function(){this.state.set("OpenRightSidebar",A.r.None)},e.prototype.handleCommentToggle=function(e){this.toggleCommandHandler.next(e)},e.prototype.handleToggleChange=function(){var e=this;return this.toggleCommandHandler.pipe(Object(f.a)(this.toggleThrottle),Object(T.lodashThrottle)(this.toggleThrottle,{leading:!1,trailing:!0}),Object(m.a)((function(t){e.commands.dispatch(k.u.updateUserPreference,{preferenceName:"show_comment_indicator",value:t})})))},e.prototype.handleCommentItemClick=function(e){var t=this;o.Jb.track("right.comment.show",{value1Type:"trigger",value1:"panel"}),this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(m.a)((function(n){n.shapes&&n.shapes[e.shapeId]?t.commands.dispatch(w.a.focusToPoint,{shapeIds:[e.shapeId],coordinates:e.locOnDiagram}):t.commands.dispatch(w.a.focusToPoint,{shapeIds:null,coordinates:e.locOnDiagram})}))).subscribe();var n={visible:!0,threadId:e.id,comments:[e]};this.state.set("CommentThreadData",n)},e.prototype.getCommentToggleState=function(){var e=this;return this.userLocator.getCommentToggleState().pipe(Object(g.a)(),Object(b.a)((function(t){e.toggleEnabled.next(t)})))},e.prototype.onActive=function(){o.Jb.track("right.comments.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){o.Jb.track("right.comments.panel.click",{value1Type:"status",value1:"close"}),this.toggleAddCommentMode(!1)},e.prototype.handleAddButtonClick=function(){var e=this;Object(d.a)(this.cancelButton.nativeElement,"mouseover").pipe(Object(m.a)((function(e){return e.stopPropagation()})),Object(v.a)(Object(d.a)(this.container.nativeElement,"mouseover").pipe(Object(m.a)((function(){return e.buttonCursor.next(e.getButtonCursor())}))))).subscribe(),o.Jb.track("right.comment.add.click",{value1Type:"trigger",value1:"button-click"}),this.toggleAddCommentMode(!0)},e.prototype.handleCancelButtonClick=function(){o.Jb.track("right.comment.cancel",{value1Type:"trigger",value1:"button-click"}),this.toggleAddCommentMode(!1)},e.prototype.toggleAddCommentMode=function(e){var t;t=e?{state:c.b.Comment}:{state:c.b.Normal},this.isCommentMode.next(e),this.commands.dispatch(s.a.changeMouseControlState,null,t)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.init=function(){var e=this;this.subs.push(this.getHideHelpMessageInteraction().subscribe((function(){return e.isCommentMode.next(!1)})),this.state.changes("CurrentDiagram").pipe(Object(m.a)((function(t){e.diagramId=t,e.unresolvedComments=e.getUnresolvedComments(),e.resolvedComments=e.getResolvedComments(),e.showDefaultMessage=e.shouldShowDefaultMessage(),e.resolvedLabel=e.getResolvedLabel()}))).subscribe(),this.checkForNewComments().subscribe(),this.getCommentToggleState().subscribe(),this.handleToggleChange().subscribe(),this.handleCancelKeyboardEvent().subscribe(),this.state.changes("CurrentInteractionHandler").pipe(Object(g.a)((function(e,t){return e.type===t.type})),Object(m.a)((function(t){var n=t.injector.get(t.type).defaultCursor;e.buttonCursor.next(e.getButtonCursor(n))}))).subscribe(),this.listenToConnectionChanges().subscribe())},e.prototype.getButtonCursor=function(e){return e&&"cur"===e.type&&"comment"===e.cursor?this.cursorGen.getCursorIcon(e):"pointer"},e.prototype.updateSelectedProperty=function(e){var t=this;return this.state.changes("CommentThreadData").pipe(Object(b.a)((function(n){return n.visible?e.map((function(e){return e.parentComment.id===n.threadId?(e.selected=!0,t.startMarkSeenByTimer(e.parentComment)):e.selected=!1,e})):e.map((function(e){return e.selected=!1,e}))})))},e.prototype.startMarkSeenByTimer=function(e){var t=this;setTimeout((function(){return Object(r.c)(t,void 0,void 0,(function(){return Object(r.f)(this,(function(t){return this.markSeenBy(e),[2]}))}))}),this.intervalDuration)},e.prototype.markSeenBy=function(e){var t=this;this.datastore.find(a.a,{diagramId:this.diagramId,parentId:e.id}).pipe(Object(_.a)(1),Object(m.a)((function(n){var r=[];t.shouldAddSeenBy(e)&&r.push(e.id),n.forEach((function(e){t.shouldAddSeenBy(e)&&r.push(e.id)})),r.length>0&&t.commands.dispatch(s.a.markCommentSeen,{commentIds:r,userId:t.state.get("CurrentUser")})}))).subscribe()},e.prototype.shouldAddSeenBy=function(e){var t=this.state.get("CurrentUser");return e.userId!==t&&!e.seenBy.includes(t)},e.prototype.checkForNewComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,$or:[{resolved:null},{resolved:!1}]}).pipe(Object(m.a)((function(t){for(var n=!1,r=0;r<t.length;r++)if(t[r].isNew(e.state.get("CurrentUser"))){n=!0;break}e.state.set("NewCommentsIndicator",n)})))},e.prototype.shouldShowDefaultMessage=function(){return Object(p.b)(this.unresolvedComments,this.resolvedComments).pipe(Object(b.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return 0===n.length&&0===i.length})))},e.prototype.getResolvedComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,parentId:null,resolved:{$exists:!0}}).pipe(Object(y.a)((function(t){return e.getCommentList(t)})),Object(y.a)((function(t){return t.length>0?e.updateCommentWithResolvedUser(t):Object(h.a)([])})))},e.prototype.updateCommentWithResolvedUser=function(e){var t=this;return p.b.apply(void 0,Object(r.j)(e.map((function(e){return t.userLocator.getUserInfo(e.parentComment.resolvedBy).pipe(Object(O.a)((function(e){return!!e})),Object(_.a)(1),Object(b.a)((function(t){return e.resolvedCommentor=t,e})))}))))},e.prototype.getUnresolvedComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,parentId:null,$and:[{$or:[{resolved:null},{resolved:!1}]}]}).pipe(Object(y.a)((function(t){return e.getCommentList(t)})),Object(y.a)((function(t){return e.updateSelectedProperty(t)})))},e.prototype.getCommentList=function(e){var t=this;return e&&e.length>0?p.b.apply(void 0,Object(r.j)(e.map((function(e){return t.getCommentItem(e)})))).pipe(Object(b.a)((function(e){return e=e.filter((function(e){return!e.latestComment.deleted})),Object(C.orderBy)(e,["lastUpdatedTime"],["desc"])}))):Object(h.a)([])},e.prototype.getCommentItem=function(e){var t=this;return this.datastore.find(a.a,{diagramId:this.diagramId,$or:[{deleted:null},{deleted:!1}],parentId:e.id},{sort:{lastUpdated:1}}).pipe(Object(y.a)((function(n){n.unshift(e);var i=t.getCommenterIds(n,2);return p.b.apply(void 0,Object(r.j)(i.map((function(e){return t.userLocator.getUserInfo(e).pipe(Object(O.a)((function(e){return!!e})),Object(_.a)(1))})))).pipe(Object(b.a)((function(r){return t.buildCommentItem(r[r.length-1],r[r.length-2],n.length,e,n[n.length-1],n[n.length-1].lastUpdated)})))})))},e.prototype.buildCommentItem=function(e,t,n,r,i,a){var o={threadCommenter:e,commentCount:n,latestComment:i,parentComment:r,lastUpdatedTime:a,selected:!1};return i.parentId||(i.parentId=null),t&&(o.previousThreadCommenter=t),o},e.prototype.getCommenterIds=function(e,t){var n,i,a=[];try{for(var o=Object(r.k)(e),s=o.next();!s.done;s=o.next()){var c=s.value;if(a.includes(c.userId)||a.push(c.userId),a.length>=t)break}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},e.prototype.handleCancelKeyboardEvent=function(){var e=this;return Object(d.a)(window,"keydown").pipe(Object(O.a)((function(e){return e.keyCode===x.k.Escape})),Object(m.a)((function(){o.Jb.track("right.comment.cancel",{value1Type:"trigger",value1:"esc"}),e.toggleAddCommentMode(!1)})))},e.prototype.getHideHelpMessageInteraction=function(){return this.state.changes("MouseControlState").pipe(Object(O.a)((function(e){return e!==c.b.Comment})))},e.prototype.getResolvedLabel=function(){var e=this;return this.resolvedComments.pipe(Object(y.a)((function(t){return e.translate("COMMENTS.LABELS.RESOLVED",{noOfThreads:t.length})})))},e.prototype.translate=function(e,t){return this.translateService.get(e,t).pipe(Object(_.a)(1))},e.prototype.listenToConnectionChanges=function(){var e=this;return this.state.changes(P.c).pipe(Object(m.a)((function(t){t!==P.c.ONLINE&&"diagramcomments"===e.state.get("RightSidebarPanel")&&e.closePanel()})))},e.\u0275fac=function(t){return new(t||e)(i.gc(o.B),i.gc(o.Hb),i.gc(E.b),i.gc(k.x),i.gc(M.e),i.gc(S.a),i.gc(I.a))},e.\u0275cmp=i.ac({type:e,selectors:[["comments-panel"]],viewQuery:function(e,t){var n;(1&e&&(i.kd(U,!0,i.r),i.kd(F,!0,i.r)),2&e)&&(i.Mc(n=i.vc())&&(t.cancelButton=n.first),i.Mc(n=i.vc())&&(t.container=n.first))},inputs:{threads:"threads"},decls:31,vars:47,consts:[[1,"comments-panel-wrapper"],[1,"comments-panel-container","panel-section"],["container",""],["mainText","PANEL_HEADINGS.COMMENTS"],[1,"panel-header-buttons","fx-padding-top-5","fx-padding-bottom-10","hidden-mobile"],["data-testid","add-comment-button","translate","",1,"btn-secondary","btn-medium","fx-no-margin",3,"ngClass","ngStyle","click"],["translate","",1,"btn-secondary","btn-medium","fx-no-margin",3,"ngClass","ngStyle","click"],["cancelButton",""],[1,"threads-section"],["class","caption",4,"ngIf"],["class","comments-panel-help-msg fx-margin-top-20 fx-margin-bottom-10",4,"ngIf"],["class","comments-panel-comments-container unresolved-comments",4,"ngIf"],["class","comments-panel-comments-container resolved-comments",4,"ngIf"],[1,"comment-panel-toggle-button-container"],["data-testid","comment-show-toggle",3,"label","checked","trackAction","change"],[1,"caption"],["translate","",1,"grey"],["translate","",1,"grey","hidden-mobile"],[1,"comments-panel-help-msg","fx-margin-top-20","fx-margin-bottom-10"],["translate","",1,"grey","fx-block","fx-margin-bottom-20","body"],["translate","",1,"grey","fx-block","body"],[1,"comments-panel-comments-container","unresolved-comments"],["class","comments-panel-comment-item unresolved-comment btn-list-item",3,"active",4,"ngFor","ngForOf"],[1,"comments-panel-comment-item","unresolved-comment","btn-list-item"],[3,"comment","commenter","threadCommentor","threadCount","showControls","click"],[1,"comments-panel-comments-container","resolved-comments"],["class","fx-margin-bottom-10",4,"ngIf"],["class","comments-panel-comment-item resolved-comment btn-list-item",4,"ngFor","ngForOf"],[1,"fx-margin-bottom-10"],[1,"resolved-title","caption"],[1,"comments-panel-comment-item","resolved-comment","btn-list-item"],[3,"comment","commenter","threadCommentor","resolvedCommentor","threadCount","showControls","click"]],template:function(e,t){1&e&&(i.mc(0,"div",0),i.mc(1,"div",1,2),i.mc(3,"div"),i.hc(4,"panel-icon-header",3),i.lc(),i.mc(5,"div",4),i.mc(6,"button",5),i.uc("click",(function(){return t.handleAddButtonClick()})),i.zc(7,"async"),i.zc(8,"async"),i.fd(9," COMMENTS.BUTTONS.ADD_COMMENT "),i.lc(),i.mc(10,"button",6,7),i.uc("click",(function(){return t.handleCancelButtonClick()})),i.zc(12,"async"),i.zc(13,"async"),i.fd(14," BUTTONS.CANCEL "),i.lc(),i.lc(),i.mc(15,"div",8),i.dd(16,q,5,0,"div",9),i.zc(17,"async"),i.zc(18,"async"),i.dd(19,W,5,0,"div",10),i.zc(20,"async"),i.mc(21,"perfect-scrollbar"),i.dd(22,K,2,1,"div",11),i.zc(23,"async"),i.dd(24,G,3,2,"div",12),i.zc(25,"async"),i.lc(),i.lc(),i.lc(),i.mc(26,"div",13),i.mc(27,"toggle-button",14),i.uc("change",(function(e){return t.handleCommentToggle(e)})),i.zc(28,"translate"),i.zc(29,"async"),i.zc(30,"async"),i.lc(),i.lc(),i.lc()),2&e&&(i.Sb(6),i.Dc("ngClass",i.Ic(35,Y,i.Ac(7,11,t.isCommentMode)))("ngStyle",i.Ic(37,X,i.Ac(8,13,t.buttonCursor))),i.Sb(4),i.Dc("ngClass",i.Ic(39,Y,!i.Ac(12,15,t.isCommentMode)))("ngStyle",i.Ic(41,X,i.Ac(13,17,t.buttonCursor))),i.Sb(6),i.Dc("ngIf",i.Ac(17,19,t.showDefaultMessage)&&!i.Ac(18,21,t.isCommentMode)),i.Sb(3),i.Dc("ngIf",i.Ac(20,23,t.isCommentMode)),i.Sb(3),i.Dc("ngIf",i.Ac(23,25,t.unresolvedComments)),i.Sb(2),i.Dc("ngIf",i.Ac(25,27,t.resolvedComments)),i.Sb(3),i.Ec("label",i.Ac(28,29,"LABELS.COMMENT_TOGGLE")),i.Dc("checked",i.Ac(29,31,t.toggleEnabled))("trackAction",i.Ic(45,J,i.Ic(43,Q,i.Ac(30,33,t.toggleCommandHandler)))))},directives:[D.a,M.a,j.q,j.w,j.t,R.b,L.a,N.a,j.s,B.a],pipes:[j.b,M.d],styles:[".nu-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.comments-panel-container[_ngcontent-%COMP%]{width:320px;display:flex;flex-direction:column;max-height:calc(100% - 60px);padding-left:1rem;padding-bottom:.5rem;padding-top:1.5rem}.comments-panel-container.panel-section[_ngcontent-%COMP%]{margin-bottom:0}.comments-panel-comment-item[_ngcontent-%COMP%]{margin-bottom:.25rem;cursor:pointer}.resolved-title[_ngcontent-%COMP%]{color:#88a1aa}.resolved-comment[_ngcontent-%COMP%]  .user-img-container.active .user-img-inner:after{background:rgba(241,248,253,.7)!important}.comments-panel-comments-container[_ngcontent-%COMP%]{padding-bottom:1rem;padding-right:1rem}.comment-panel-toggle-button-container[_ngcontent-%COMP%]{box-shadow:0 1px 4px rgba(0,0,0,.2),0 1px 2px rgba(0,0,0,.1);padding-top:1rem;padding-bottom:1rem;padding-left:1.125rem;position:fixed;bottom:0;width:100%}.comment-panel-toggle-button-container[_ngcontent-%COMP%]  label{line-height:18px}.comments-panel-help-image[_ngcontent-%COMP%]{max-width:100%}.comments-panel-help-msg[_ngcontent-%COMP%]{line-height:20px}.comments-panel-help-msg[_ngcontent-%COMP%]   .fx-block[_ngcontent-%COMP%]{display:block}.comments-panel-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:100%}.threads-section[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden}@media only screen and (max-width:568px){.hidden-mobile[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),e}()},"T9/7":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=d;var i=n("XVEb"),a=r(n("0KrK")),o=n("svB4"),s=n("3/2H"),c=r(n("UImk")),l=n("hQOw");t.VERSION="4.7.7";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var u="[object Object]";function d(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},o.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}d.prototype={constructor:d,logger:c.default,log:c.default.log,registerHelper:function(e,t){if(i.toString.call(e)===u){if(t)throw new a.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===u)i.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===u){if(t)throw new a.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){l.resetLoggedProperties()}};var p=c.default.log;t.log=p,t.createFrame=i.createFrame,t.logger=c.default},TQyE:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return f}));var r,i=n("mWib"),a=n("ZTXN"),o=n("C05f"),s=n("6Oco"),c=(n("Cupj"),n("nsO7")),l=n("EM62"),u=n("/YfA"),d=n("2kYt"),p=["colorpicker"];function h(e,t){1&e&&(l.mc(0,"div",5),l.fd(1,"-"),l.lc())}!function(e){e.Fill="fill",e.Border="border"}(r||(r={}));var f=function(){function e(){this._change=new a.a,this._isDiffColor=new o.a(!1),this._label=new o.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.pipe(Object(i.a)(100))},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=Object(c.clone)(e),void 0!==this._data.params&&(this._data.params.isDiffColor?(this._data.value="#FFFFFF",this._isDiffColor.next(!0)):this._isDiffColor.next(!1))},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){var e=this.colorpicker.nativeElement;void 0!==this._data.params&&this._data.params.type===r.Border?(e.style.borderColor=this._data.value,e.style.borderWidth="2px"):e.style.backgroundColor=this._data.value,this._label.next(this._props.label)},e.prototype.applyAnimated=function(){return this.apply(),s.a},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.ac({type:e,selectors:[["nu-color-picker"]],viewQuery:function(e,t){var n;(1&e&&l.Xc(p,!0),2&e)&&(l.Mc(n=l.vc())&&(t.colorpicker=n.first))},decls:8,vars:14,consts:[[1,"colorpicker-container"],[1,"colorpicker-button","fx-center-all",3,"colorPicker","cpPosition","cpOpenOnHover","cpUseRootViewContainer","colorPickerChange"],["colorpicker",""],["class","colorpicker-empty gray",4,"ngIf"],[1,"body"],[1,"colorpicker-empty","gray"]],template:function(e,t){1&e&&(l.mc(0,"div",0),l.mc(1,"div",1,2),l.uc("colorPickerChange",(function(e){return t._data.value=e}))("colorPickerChange",(function(e){return t._change.next({value:e})})),l.dd(3,h,2,0,"div",3),l.zc(4,"async"),l.lc(),l.mc(5,"label",4),l.fd(6),l.zc(7,"async"),l.lc(),l.lc()),2&e&&(l.Sb(1),l.ad("top","0px")("left","0px"),l.Dc("colorPicker",t._data.value)("cpPosition",t._props.cpPosition||"left-top")("cpOpenOnHover",!1)("cpUseRootViewContainer",!0),l.Sb(2),l.Dc("ngIf",l.Ac(4,10,t._isDiffColor)),l.Sb(3),l.gd(l.Ac(7,12,t._label)))},directives:[u.a,d.t],pipes:[d.b],styles:[".colorpicker-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.colorpicker-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:10px}.colorpicker-button[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:25px;border:1px solid #d3d3e7;cursor:pointer}.colorpicker-button[_ngcontent-%COMP%]:hover{border:1px solid #ffc648}.colorpicker-empty[_ngcontent-%COMP%]{font-weight:bolder;font-size:larger}.colorpicker-empty.gray[_ngcontent-%COMP%]{color:#939fab}"],changeDetection:0}),e}()},"UCH/":function(e,t,n){"use strict";n.d(t,"a",(function(){return we}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("hX56"),s=n("nsO7"),c=n("C05f"),l=n("g6G6"),u=n("HM3f"),d=n("6Oco"),p=n("ROBh"),h=n("YtkY"),f=n("TLy2"),m=n("8j5Y"),g=n("xVbo"),b=n("QoSw"),v=n("SBw3"),_=n("WydG"),y=n("iV8b"),O=n("iy5+"),x=n("NNJu"),E=n("s2Ay"),k=n("crdX"),C=n("2kYt"),w=n("lQIu"),S=n("j1Bk"),I=["selectionX"],T=["selectionY"],A=["selectionWidth"],P=["selectionHeight"],M=["connectorStartX"],D=["connectorStartY"],j=["connectorEndX"],R=["connectorEndY"],L=["selectionAngle"],N=["sizeAndPosSection"],B=["sizeAndPosPanelItemXY"],U=["sizeAndPosPanelItemWH"],F=["sizeAndPosPanelItemA"],q=["sizeAndPosPanelItemConStartXY"],W=["sizeAndPosPanelItemConEndXY"],H=["textSectionBISUModel"],K=["textSectionBISUText"],z=["textSectionAlignModel"],V=["textSectionAlignText"],G=["textSectionPanelItemBISUAlign"],Y=["textSectionPanelItemFontSize"],X=["textSectionPanelItemColor"],Q=["textSectionPanelTextPosition"],J=["textSectionFontModel"],$=["textSectionFontText"],Z=["textSectionSizeModel"],ee=["textSectionSizeText"],te=["textSectionColorModel"],ne=["textSectionColorText"],re=["textSectionTextPosition"],ie=["textSection"],ae=["styleSectionColors"],oe=["styleSectionLineStyle"],se=["styleSectionLineThickness"],ce=["styleSectionPanelItemColors"],le=["styleSectionPanelItemStyleThickness"],ue=["styleSection"],de=["customSection"],pe=["customControlContainer"];function he(e,t){if(1&e&&i.hc(0,"panel-icon-header",60),2&e){var n=t.ngIf;i.Ec("mainText",n.mainText),i.Ec("subText",n.subText),i.Ec("subTextIcon",n.subTextIcon)}}function fe(e,t){1&e&&i.hc(0,"div",61)}function me(e,t){}function ge(e,t){}function be(e,t){}function ve(e,t){}function _e(e,t){}function ye(e,t){}function Oe(e,t){}function xe(e,t){}function Ee(e,t){}function ke(e,t){}var Ce=function(e){return{"fx-hidden":e}},we=function(e){function t(t,n,r,i,a,o,s,l,u){var d=e.call(this,i,o,r,t,n,a)||this;return d.state=t,d.ll=n,d.commandService=r,d.componentFactoryResolver=i,d.injector=a,d.featureList=o,d.dataStore=s,d.translator=l,d.documentStatusMap=u,d.selectionXFeature=["selectionPositionX"],d.selectionYFeature=["selectionPositionY"],d.selectionWidthFeature=["selectionWidth"],d.selectionHeightFeature=["selectionHeight"],d.connectorStartXFeature=["connectorStartX"],d.connectorStartYFeature=["connectorStartY"],d.connectorEndXFeature=["connectorEndX"],d.connectorEndYFeature=["connectorEndY"],d.selectionAngleFeature=["selectionAngle"],d.textFeaturesBISUModel=["boldModelText","italicModelText","underlineModelText","strikeoutModelText"],d.textFeaturesBISUText=["boldText","italicText","underlineText","strikeoutText"],d.textFeaturesAlignModel=["leftAlignModelText","centerAlignModelText","rightAlignModelText","justifyModelText"],d.textFeaturesAlignText=["leftAlignText","centerAlignText","rightAlignText","justifyText"],d.textFeatureFontModel=["fontModelText"],d.textFeatureFontText=["fontText"],d.textFeatureSizeModel=["sizeModelText"],d.textFeatureSizeText=["sizeText"],d.textFeatureColorModel=["colorModelText"],d.textFeatureColorText=["colorTextAlt"],d.textFeatureTextPosition=["textPosition"],d.styleFeatureColor=["colorFill","colorLine","customShapeStyles"],d.styleFeatureLineStyle=["styleLine"],d.styleFeatureLineThickness=["lineThickness"],d.features=new c.a([]),d.hasUnlockedShapes=new c.a(!0),d.subs=[],d._panelName=d.panelName(),d._selection=d.state.changes("Selected"),d.enableControls=new c.a(!0),d}return Object(r.e)(t,e),Object.defineProperty(t,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return"shapePanel"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return"properties"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.DIAGRAM_INFO")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEditorOpen",{get:function(){return this.state.changes("EditingText").pipe(Object(h.a)((function(e){return!!e.open})))},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(Object(l.a)(this.renderFeatureChanges(this.textFeaturesBISUModel,this.textSectionBISUModel),this.renderFeatureChanges(this.textFeaturesBISUText,this.textSectionBISUText),this.renderFeatureChanges(this.textFeaturesAlignModel,this.textSectionAlignModel),this.renderFeatureChanges(this.textFeaturesAlignText,this.textSectionAlignText),this.renderFeatureChanges(this.textFeatureSizeModel,this.textSectionSizeModel),this.renderFeatureChanges(this.textFeatureSizeText,this.textSectionSizeText),this.renderFeatureChanges(this.textFeatureFontModel,this.textSectionFontModel),this.renderFeatureChanges(this.textFeatureFontText,this.textSectionFontText),this.renderFeatureChanges(this.textFeatureColorModel,this.textSectionColorModel),this.renderFeatureChanges(this.textFeatureColorText,this.textSectionColorText),this.renderFeatureChanges(this.textFeatureTextPosition,this.textSectionTextPosition)).subscribe((function(){return e.manageSectionVisiblity(e.textSection,[{group:e.textSectionPanelItemBISUAlign,items:[e.textSectionBISUModel,e.textSectionBISUText,e.textSectionAlignModel,e.textSectionAlignText]},{group:e.textSectionPanelItemFontSize,items:[e.textSectionSizeModel,e.textSectionSizeText,e.textSectionFontModel,e.textSectionFontText]},{group:e.textSectionPanelItemColor,items:[e.textSectionColorModel,e.textSectionColorText]},{group:e.textSectionPanelTextPosition,items:[e.textSectionTextPosition]}])})),Object(l.a)(this.renderFeatureChanges(this.styleFeatureColor,this.styleSectionColors),this.renderFeatureChanges(this.styleFeatureLineStyle,this.styleSectionLineStyle),this.renderFeatureChanges(this.styleFeatureLineThickness,this.styleSectionLineThickness)).subscribe((function(){return e.manageSectionVisiblity(e.styleSection,[{group:e.styleSectionPanelItemColors,items:[e.styleSectionColors]},{group:e.styleSectionPanelItemStyleThickness,items:[e.styleSectionLineStyle,e.styleSectionLineThickness]}])})),Object(l.a)(this.renderFeatureChanges(this.selectionXFeature,this.selectionX),this.renderFeatureChanges(this.selectionYFeature,this.selectionY),this.renderFeatureChanges(this.selectionWidthFeature,this.selectionWidth),this.renderFeatureChanges(this.selectionHeightFeature,this.selectionHeight),this.renderFeatureChanges(this.selectionAngleFeature,this.selectionAngle),this.renderFeatureChanges(this.connectorStartXFeature,this.connectorStartX),this.renderFeatureChanges(this.connectorStartYFeature,this.connectorStartY),this.renderFeatureChanges(this.connectorEndXFeature,this.connectorEndX),this.renderFeatureChanges(this.connectorEndYFeature,this.connectorEndY)).subscribe((function(){e.manageSectionVisiblity(e.sizeAndPosSection,[{group:e.sizeAndPosPanelItemXY,items:[e.selectionX,e.selectionY]},{group:e.sizeAndPosPanelItemWH,items:[e.selectionWidth,e.selectionHeight]},{group:e.sizeAndPosPanelItemA,items:[e.selectionAngle]},{group:e.sizeAndPosPanelItemConStartXY,items:[e.connectorStartX,e.connectorStartY]},{group:e.sizeAndPosPanelItemConEndXY,items:[e.connectorEndX,e.connectorEndY]}])})),this.renderShapeSpecificFeatures(this.customControlContainer).subscribe((function(t){e.manageSectionVisiblity(e.customSection,[{group:e.customSection,items:t.map((function(e){return e.featureId}))}])})),this.listenToTextEditorChanges().subscribe(),this.state.changes("SidebarControls").subscribe((function(t){t===O.b.ENABLED?e.enableControls.next(!0):t===O.b.DISABLED&&e.enableControls.next(!1)})))},t.prototype.panelName=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(f.a)((function(){return e.state.changes("Selected").pipe(Object(m.a)((function(t){t&&0!==t.length||e.state.set("OpenRightSidebar",x.r.None)})),Object(g.a)((function(t){return!Object(s.isEmpty)(t)||(e.hasUnlockedShapes.next(!0),!1)})),Object(f.a)((function(t){return e.getDocumentChanges(t).pipe(Object(h.a)((function(n){var r,i,a,o=[],s=[],c=[],l=!1;return t.forEach((function(e){var t=n.getShape(e);t.isLocked||(l=!0),t.isConnector()?t.isLine()?s.push(t):o.push(t):c.push(t)})),l?e.hasUnlockedShapes.next(!0):(e.hasUnlockedShapes.next(!1),i=e.translator.instant("LABELS.LOCKED"),a="nu-ic-lock"),s.length>0&&0===c.length&&0===o.length?r=1===s.length?"Line":s.length+" Lines Selected":o.length>0&&0===c.length&&0===s.length?1===o.length?(r="Connector",i=o[0].name):r=o.length+" Connectors Selected":r=c.length>0&&0===o.length&&0===s.length?1===c.length?c[0].name:c.length+" Shapes Selected":o.length+c.length+s.length+" Shapes Selected",{mainText:r,subText:i,subTextIcon:a}})))})))})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.onActive=function(){a.Jb.track("right.info.panel.click",{value1Type:"status",value1:"open"})},t.prototype.onInactive=function(){a.Jb.track("right.info.panel.click",{value1Type:"status",value1:"close"})},t.prototype.onDropdownOpen=function(){a.Jb.track("right.info.status.click")},t.prototype.listenToTextEditorChanges=function(){var e=this;return Object(u.b)([this.state.changes("TextEditorState-shapeText"),this.features]).pipe(Object(g.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n.styles&&!Object(s.isEmpty)(n.styles)&&!!i.length})),Object(f.a)((function(t){var n,i,a=Object(r.h)(t,2),o=a[0],s=a[1],c=o.styles,u=s.find((function(e){return"sizeText"===e.featureId})),p=s.find((function(e){return"fontText"===e.featureId}));return u&&u.data&&(n=u.data.data,e.handleListData(n,c.size)),p&&p.data&&(i=p.data.data,e.handleListData(i,c.font)),Object(l.a)(e.updateComponent({featureId:"leftAlignText",data:{value:"left"===c.align}}),e.updateComponent({featureId:"rightAlignText",data:{value:"right"===c.align}}),e.updateComponent({featureId:"centerAlignText",data:{value:"center"===c.align}}),e.updateComponent({featureId:"justifyText",data:{value:"justify"===c.align}}),e.updateComponent({featureId:"boldText",data:{value:c.bold}}),e.updateComponent({featureId:"italicText",data:{value:c.italic}}),e.updateComponent({featureId:"underlineText",data:{value:c.underline}}),e.updateComponent({featureId:"strikeoutText",data:{value:c.strikeout}}),e.updateComponent({featureId:"colorTextAlt",data:{value:c.color}}),n?e.updateComponent({featureId:"sizeText",data:{data:n}}):d.a,i?e.updateComponent({featureId:"fontText",data:{data:i}}):d.a)})))},t.prototype.getDocumentChanges=function(e){var t=this.ll.forCurrent(!1);return t.getDiagramOnce().pipe(Object(f.a)((function(n){return 1!==e.length?Object(p.a)(n):Object(l.a)(Object(p.a)(n),t.getDiagramChanges().pipe(Object(h.a)((function(e){return e.model})),Object(g.a)((function(t){var n=t.shapes[e[0]];return n&&n.isConnector()}))))})))},t.prototype.manageSectionVisiblity=function(e,t){var n=e.nativeElement;n.style.display="none",t.forEach((function(e){var t=e.group.nativeElement;e.items.every((function(e){return 0===e.length}))?t.style.display="none":(t.style.display="",n.style.display="")}))},t.prototype.handleListData=function(e,t){if(e.forEach((function(e){return e.selected=!1})),void 0===t||"object"==typeof t&&Object(s.isEmpty)(t))return e;var n=e.find((function(e){return""+e.value==""+t}));if(n)n.selected=!0;else{var r=e.find((function(e){return e.custom}));r?(r.id=t,r.label=t,r.buttonLabel=t,r.value=t,r.selected=!0):e.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}},t.\u0275fac=function(e){return new(e||t)(i.gc(a.Hb),i.gc(b.a),i.gc(a.B),i.gc(i.m),i.gc(i.C),i.gc(v.a),i.gc(o.b),i.gc(E.e),i.gc(y.a))},t.\u0275cmp=i.ac({type:t,selectors:[["shape-panel"]],viewQuery:function(e,t){var n;(1&e&&(i.kd(I,!0,i.hb),i.kd(T,!0,i.hb),i.kd(A,!0,i.hb),i.kd(P,!0,i.hb),i.kd(M,!0,i.hb),i.kd(D,!0,i.hb),i.kd(j,!0,i.hb),i.kd(R,!0,i.hb),i.kd(L,!0,i.hb),i.kd(N,!0,i.r),i.kd(B,!0,i.r),i.kd(U,!0,i.r),i.kd(F,!0,i.r),i.kd(q,!0,i.r),i.kd(W,!0,i.r),i.kd(H,!0,i.hb),i.kd(K,!0,i.hb),i.kd(z,!0,i.hb),i.kd(V,!0,i.hb),i.kd(G,!0,i.r),i.kd(Y,!0,i.r),i.kd(X,!0,i.r),i.kd(Q,!0,i.r),i.kd(J,!0,i.hb),i.kd($,!0,i.hb),i.kd(Z,!0,i.hb),i.kd(ee,!0,i.hb),i.kd(te,!0,i.hb),i.kd(ne,!0,i.hb),i.kd(re,!0,i.hb),i.kd(ie,!0,i.r),i.kd(ae,!0,i.hb),i.kd(oe,!0,i.hb),i.kd(se,!0,i.hb),i.kd(ce,!0,i.r),i.kd(le,!0,i.r),i.kd(ue,!0,i.r),i.kd(de,!0,i.r),i.kd(pe,!0,i.hb)),2&e)&&(i.Mc(n=i.vc())&&(t.selectionX=n.first),i.Mc(n=i.vc())&&(t.selectionY=n.first),i.Mc(n=i.vc())&&(t.selectionWidth=n.first),i.Mc(n=i.vc())&&(t.selectionHeight=n.first),i.Mc(n=i.vc())&&(t.connectorStartX=n.first),i.Mc(n=i.vc())&&(t.connectorStartY=n.first),i.Mc(n=i.vc())&&(t.connectorEndX=n.first),i.Mc(n=i.vc())&&(t.connectorEndY=n.first),i.Mc(n=i.vc())&&(t.selectionAngle=n.first),i.Mc(n=i.vc())&&(t.sizeAndPosSection=n.first),i.Mc(n=i.vc())&&(t.sizeAndPosPanelItemXY=n.first),i.Mc(n=i.vc())&&(t.sizeAndPosPanelItemWH=n.first),i.Mc(n=i.vc())&&(t.sizeAndPosPanelItemA=n.first),i.Mc(n=i.vc())&&(t.sizeAndPosPanelItemConStartXY=n.first),i.Mc(n=i.vc())&&(t.sizeAndPosPanelItemConEndXY=n.first),i.Mc(n=i.vc())&&(t.textSectionBISUModel=n.first),i.Mc(n=i.vc())&&(t.textSectionBISUText=n.first),i.Mc(n=i.vc())&&(t.textSectionAlignModel=n.first),i.Mc(n=i.vc())&&(t.textSectionAlignText=n.first),i.Mc(n=i.vc())&&(t.textSectionPanelItemBISUAlign=n.first),i.Mc(n=i.vc())&&(t.textSectionPanelItemFontSize=n.first),i.Mc(n=i.vc())&&(t.textSectionPanelItemColor=n.first),i.Mc(n=i.vc())&&(t.textSectionPanelTextPosition=n.first),i.Mc(n=i.vc())&&(t.textSectionFontModel=n.first),i.Mc(n=i.vc())&&(t.textSectionFontText=n.first),i.Mc(n=i.vc())&&(t.textSectionSizeModel=n.first),i.Mc(n=i.vc())&&(t.textSectionSizeText=n.first),i.Mc(n=i.vc())&&(t.textSectionColorModel=n.first),i.Mc(n=i.vc())&&(t.textSectionColorText=n.first),i.Mc(n=i.vc())&&(t.textSectionTextPosition=n.first),i.Mc(n=i.vc())&&(t.textSection=n.first),i.Mc(n=i.vc())&&(t.styleSectionColors=n.first),i.Mc(n=i.vc())&&(t.styleSectionLineStyle=n.first),i.Mc(n=i.vc())&&(t.styleSectionLineThickness=n.first),i.Mc(n=i.vc())&&(t.styleSectionPanelItemColors=n.first),i.Mc(n=i.vc())&&(t.styleSectionPanelItemStyleThickness=n.first),i.Mc(n=i.vc())&&(t.styleSection=n.first),i.Mc(n=i.vc())&&(t.customSection=n.first),i.Mc(n=i.vc())&&(t.customControlContainer=n.first))},features:[i.Pb],decls:134,vars:68,consts:[[1,"sidebar-scrollbar"],[1,"panel-container"],[1,"fx-padding-top-20"],[3,"mainText","subText","subTextIcon",4,"ngIf"],["class","panel-overlay fx-cover shape-panel-overlay",4,"ngIf"],["testId","shape-size-position-panel",3,"heading","open"],["sizeAndPosSection",""],[1,"panel-item"],["sizeAndPosPanelItemXY",""],[1,"row"],[1,"col"],["selectionX",""],["selectionY",""],["sizeAndPosPanelItemWH",""],["selectionWidth",""],["selectionHeight",""],["sizeAndPosPanelItemA",""],["selectionAngle",""],["sizeAndPosPanelItemConStartXY",""],["connectorStartX",""],["connectorStartY",""],["sizeAndPosPanelItemConEndXY",""],["connectorEndX",""],["connectorEndY",""],["testId","text-panel",3,"heading"],["textSection",""],[1,"panel-item","shape-panel-text-formatting","fx-justify-space-between"],["textSectionPanelItemBISUAlign",""],[1,"fx-center-all",3,"ngClass"],["textSectionBISUModel",""],["textSectionBISUText",""],["textSectionAlignModel",""],["textSectionAlignText",""],["textSectionPanelItemFontSize",""],[1,"panel-multi-dropdown-container"],[1,"expand"],[3,"ngClass"],["textSectionFontModel",""],["textSectionFontText",""],[1,"shrink"],["textSectionSizeModel",""],["textSectionSizeText",""],["textSectionPanelItemColor",""],["textSectionColorModel",""],[1,"panel-section-color-text",3,"ngClass"],["textSectionColorText",""],["textSectionPanelTextPosition",""],["textSectionTextPosition",""],["testId","style-panel",3,"heading"],["styleSection",""],[1,"panel-item","shape-panel-style-color-pickers"],["styleSectionPanelItemColors",""],["styleSectionColors",""],["styleSectionPanelItemStyleThickness",""],[1,"panel-multi-dropdown-container","shape-panel-line-formatting"],["styleSectionLineStyle",""],["styleSectionLineThickness",""],["testId","custom-panel","heading","Custom"],["customSection",""],["customControlContainer",""],[3,"mainText","subText","subTextIcon"],[1,"panel-overlay","fx-cover","shape-panel-overlay"]],template:function(e,t){1&e&&(i.mc(0,"perfect-scrollbar",0),i.mc(1,"div",1),i.mc(2,"div",2),i.dd(3,he,1,3,"panel-icon-header",3),i.zc(4,"async"),i.zc(5,"async"),i.lc(),i.dd(6,fe,1,0,"div",4),i.zc(7,"async"),i.mc(8,"collapsable-panel-item",5,6),i.zc(10,"translate"),i.mc(11,"div",7,8),i.mc(13,"div",9),i.mc(14,"div",10),i.hc(15,"div",null,11),i.lc(),i.mc(17,"div",10),i.hc(18,"div",null,12),i.lc(),i.lc(),i.lc(),i.mc(20,"div",7,13),i.mc(22,"div",9),i.mc(23,"div",10),i.hc(24,"div",null,14),i.lc(),i.mc(26,"div",10),i.hc(27,"div",null,15),i.lc(),i.lc(),i.lc(),i.mc(29,"div",7,16),i.mc(31,"div",9),i.mc(32,"div",10),i.hc(33,"div",null,17),i.lc(),i.hc(35,"div",10),i.lc(),i.lc(),i.mc(36,"div",7,18),i.mc(38,"div",9),i.mc(39,"div",10),i.hc(40,"div",null,19),i.lc(),i.mc(42,"div",10),i.hc(43,"div",null,20),i.lc(),i.lc(),i.lc(),i.mc(45,"div",7,21),i.mc(47,"div",9),i.mc(48,"div",10),i.hc(49,"div",null,22),i.lc(),i.mc(51,"div",10),i.hc(52,"div",null,23),i.lc(),i.lc(),i.lc(),i.lc(),i.mc(54,"collapsable-panel-item",24,25),i.zc(56,"translate"),i.mc(57,"div",26,27),i.mc(59,"div"),i.mc(60,"div",28),i.zc(61,"async"),i.dd(62,me,0,0,"ng-template",null,29,i.ed),i.lc(),i.mc(64,"div",28),i.zc(65,"async"),i.dd(66,ge,0,0,"ng-template",null,30,i.ed),i.lc(),i.lc(),i.mc(68,"div"),i.mc(69,"div",28),i.zc(70,"async"),i.dd(71,be,0,0,"ng-template",null,31,i.ed),i.lc(),i.mc(73,"div",28),i.zc(74,"async"),i.dd(75,ve,0,0,"ng-template",null,32,i.ed),i.lc(),i.lc(),i.lc(),i.mc(77,"div",7,33),i.mc(79,"div",34),i.mc(80,"div",35),i.mc(81,"div",36),i.zc(82,"async"),i.dd(83,_e,0,0,"ng-template",null,37,i.ed),i.lc(),i.mc(85,"div",36),i.zc(86,"async"),i.dd(87,ye,0,0,"ng-template",null,38,i.ed),i.lc(),i.lc(),i.mc(89,"div",39),i.mc(90,"div",36),i.zc(91,"async"),i.dd(92,Oe,0,0,"ng-template",null,40,i.ed),i.lc(),i.mc(94,"div",36),i.zc(95,"async"),i.dd(96,xe,0,0,"ng-template",null,41,i.ed),i.lc(),i.lc(),i.lc(),i.lc(),i.mc(98,"div",7,42),i.mc(100,"div",34),i.mc(101,"div",36),i.zc(102,"async"),i.dd(103,Ee,0,0,"ng-template",null,43,i.ed),i.lc(),i.mc(105,"div",44),i.zc(106,"async"),i.dd(107,ke,0,0,"ng-template",null,45,i.ed),i.lc(),i.lc(),i.lc(),i.mc(109,"div",7,46),i.hc(111,"div",null,47),i.lc(),i.lc(),i.mc(113,"collapsable-panel-item",48,49),i.zc(115,"translate"),i.mc(116,"div",50,51),i.hc(118,"div",null,52),i.lc(),i.mc(120,"div",7,53),i.mc(122,"div",54),i.mc(123,"div",39),i.hc(124,"div",null,55),i.lc(),i.mc(126,"div",35),i.hc(127,"div",null,56),i.lc(),i.lc(),i.lc(),i.lc(),i.mc(129,"collapsable-panel-item",57,58),i.mc(131,"div",7),i.hc(132,"div",null,59),i.lc(),i.lc(),i.lc(),i.lc()),2&e&&(i.Sb(3),i.Dc("ngIf",i.Ac(4,16,i.Ac(5,18,t._selection).length&&t._panelName)),i.Sb(3),i.Dc("ngIf",!i.Ac(7,20,t.hasUnlockedShapes)),i.Sb(2),i.Ec("heading",i.Ac(10,22,"PANEL_HEADINGS.SIZE_POSITION")),i.Dc("open",!1),i.Sb(46),i.Ec("heading",i.Ac(56,24,"PANEL_HEADINGS.TEXT")),i.Sb(6),i.Dc("ngClass",i.Ic(48,Ce,i.Ac(61,26,t.isEditorOpen))),i.Sb(4),i.Dc("ngClass",i.Ic(50,Ce,!i.Ac(65,28,t.isEditorOpen))),i.Sb(5),i.Dc("ngClass",i.Ic(52,Ce,i.Ac(70,30,t.isEditorOpen))),i.Sb(4),i.Dc("ngClass",i.Ic(54,Ce,!i.Ac(74,32,t.isEditorOpen))),i.Sb(8),i.Dc("ngClass",i.Ic(56,Ce,i.Ac(82,34,t.isEditorOpen))),i.Sb(4),i.Dc("ngClass",i.Ic(58,Ce,!i.Ac(86,36,t.isEditorOpen))),i.Sb(5),i.Dc("ngClass",i.Ic(60,Ce,i.Ac(91,38,t.isEditorOpen))),i.Sb(4),i.Dc("ngClass",i.Ic(62,Ce,!i.Ac(95,40,t.isEditorOpen))),i.Sb(7),i.Dc("ngClass",i.Ic(64,Ce,i.Ac(102,42,t.isEditorOpen))),i.Sb(4),i.Dc("ngClass",i.Ic(66,Ce,!i.Ac(106,44,t.isEditorOpen))),i.Sb(8),i.Ec("heading",i.Ac(115,46,"PANEL_HEADINGS.STYLE")))},directives:[k.b,C.t,w.b,C.q,S.a],pipes:[C.b,E.d],styles:[".col[_ngcontent-%COMP%]  .text-input-multilined, .col[_ngcontent-%COMP%]  div.text-input, .col[_ngcontent-%COMP%]  input.text-input{margin-top:0;font-size:.875rem}.col[_ngcontent-%COMP%]  .text-input-multilined:hover, .col[_ngcontent-%COMP%]  div.text-input:hover, .col[_ngcontent-%COMP%]  input.text-input:hover{cursor:default}.shape-panel-text-formatting[_ngcontent-%COMP%]  icon-button:not(:last-child){margin-right:.125rem}.shape-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container button{width:24px;height:24px}.shape-panel-line-formatting[_ngcontent-%COMP%]   .shrink[_ngcontent-%COMP%]{width:calc(54% - 10px)}.shape-panel-line-formatting[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]{width:46%}.shape-panel-line-formatting[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]  label{font-size:.75rem;color:#354b53;line-height:normal}.shape-panel-style-color-pickers[_ngcontent-%COMP%]  .colorpicker-container{margin-bottom:1.25rem}.shape-panel-user-time-stamp[_ngcontent-%COMP%]{text-transform:lowercase}.shape-panel-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);z-index:1}.panel-section-color-text[_ngcontent-%COMP%]{margin-left:0}"],changeDetection:0}),t}(_.a)},UImk:function(e,t,n){"use strict";t.__esModule=!0;var r=n("XVEb"),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];console[t].apply(console,r)}}};t.default=i,e.exports=t.default},UaQO:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("XVEb"),a=n("0KrK"),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:i.blockParams([e],[r&&r.contextPath])})}))},e.exports=t.default},V4YE:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("0KrK"),a=(r=i)&&r.__esModule?r:{default:r};function o(){this.parents=[]}function s(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function c(e){s.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function l(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}o.prototype={constructor:o,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!o.prototype[n.type])throw new a.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new a.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new a.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:s,Decorator:s,BlockStatement:c,DecoratorBlock:c,PartialStatement:l,PartialBlockStatement:function(e){l.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:s,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=o,e.exports=t.default},VTm5:function(e,t,n){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},W0Mc:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("5xGT"),a=n("nsO7"),o=n("blAi"),s=n("EM62"),c=function(){function e(){this.gpBottomId="BRZfYLOPiRa",this.gpLeftId="pbnadF9Wirq",this.gpRightId="P9d4172UDLb",this.gpTopId="0FUuJlNPewl"}return Object.defineProperty(e,"SHAPE_TEXT_PADDING",{get:function(){return 10},enumerable:!1,configurable:!0}),e.prototype.reconnect=function(e,t,n){var r=this,i=t.shapes[e],a=this.getConnectorEndpoints(i,n),o=a.map((function(e){return r.getConnectedShape(e,t)}));return this.reconnectEndpoints(t,i,a,o)},e.prototype.reconnectEndpoints=function(e,t,n,i){var a=this,o=Object(r.h)(n,2),s=o[0],c=o[1];return i.some((function(e){return!e}))||!s.shapeId||s.gluepointLocked||!c.shapeId||c.gluepointLocked?n.map((function(e,t){return e.shapeId?e:a.clearEndpointGluepoint(e)})).map((function(e,t){var n=!(!i[t]||!i[t].gluepoints[e.gluepointId]);return e.shapeId&&i[t]&&e.gluepointId&&n&&e.gluepointLocked?a.setEndpointPosition(e,i[t]):e})).map((function(r,o){var s=!(!i[o]||!i[o].gluepoints[r.gluepointId]);if(r.shapeId&&i[o]&&(!r.gluepointLocked||!s)){var c=n[0===o?1:0],l=0===o?"from":"to";return a.setEndpointGluepoint(e,t,r,c,i[o],l)}return r})):this.selectClosestGluepointPair(e,t,n,i)},e.prototype.selectClosestGluepointPair=function(t,n,a,o){var s=this,c=Object(r.h)(a,2),l=c[0],u=c[1],d=Object(r.h)(o,2),p=d[0],h=d[1],f=e.SHAPE_TEXT_PADDING,m=p.getAvailableGluepoints(t,[n.id],"from"),g=p.getStickyGluePoints(l.gluepointId);m.push.apply(m,Object(r.j)(g));var b=h.getAvailableGluepoints(t,[n.id],"to"),v=h.getStickyGluePoints(u.gluepointId);b.push.apply(b,Object(r.j)(v));var _=p.primaryTextModel,y=h.primaryTextModel;_&&(m=m.filter((function(e){return!e.id.startsWith(s.getLowPriorityStickyGP(_))}))),y&&(b=b.filter((function(e){return!e.id.startsWith(s.getLowPriorityStickyGP(y))})));for(var O,x=m.map((function(e){return s.getGluepointPosition(e,p)})),E=b.map((function(e){return s.getGluepointPosition(e,h)})),k=1/0,C=0;C<m.length;++C){var w=m[C],S=x[C],I=i.lb.from(S),T=Object.keys(h.texts);if(!(h.texts&&1===T.length&&h.texts[T[0]]&&h.texts[T[0]].isPositionable()?h.getBoundsWithTexts().pad(f).toPolygon().isInside(S):h.bounds.pad(f).toPolygon().isInside(S))||p===h)for(var A=0;A<b.length;++A){var P=b[A];if(l.shapeId!==u.shapeId||w.id!==P.id){var M=E[A],D=I.distanceTo(M),j=Object.keys(p.texts),R=void 0;R=p.texts&&1===j.length&&p.texts[j[0]]&&p.texts[j[0]].isPositionable()?p.getBoundsWithTexts().pad(f).toPolygon().isInside(M):p.bounds.pad(f).toPolygon().isInside(M),D<k&&(!R||l.shapeId===u.shapeId)&&(O=[w,P],k=D)}}}return O&&O.length>0?(l.gluepointId=O[0].id.split("-stickyGP")[0],l.gluepointLocked=!1,u.gluepointId=O[1].id.split("-stickyGP")[0],u.gluepointLocked=!1,[this.setEndpointPosition(l,p),this.setEndpointPosition(u,h)]):a},e.prototype.getLowPriorityStickyGP=function(e){return e.x<0&&"fixed-end"===e.xType&&(!e.yType||"relative"===e.yType)&&.5===e.y?this.gpRightId.concat("-stickyGP"):e.x<0&&"fixed-start"===e.xType&&(!e.yType||"relative"===e.yType)&&.5===e.y?this.gpLeftId.concat("-stickyGP"):e.y<0&&"fixed-start"===e.yType&&(!e.xType||"relative"===e.xType)&&.5===e.x?this.gpTopId.concat("-stickyGP"):e.y<0&&"fixed-end"===e.yType&&(!e.xType||"relative"===e.xType)&&.5===e.x?this.gpBottomId.concat("-stickyGP"):void 0},e.prototype.getGluepointPosition=function(e,t){return o.a.getPosition(e,t.defaultBounds,t.transform)},e.prototype.getConnectorEndpoints=function(e,t){var n,i,o=e.getPoints(),s=[o[0],Object(a.last)(o)],c=function(e){var t=s.findIndex((function(t){return e.id===t.id}));s[t]=Object(r.a)(Object(r.a)({},s[t]),e)};try{for(var l=Object(r.k)(t),u=l.next();!u.done;u=l.next()){c(u.value)}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return Object(a.cloneDeep)(s)},e.prototype.getConnectedShape=function(e,t){return e.shapeId?t.shapes[e.shapeId]:null},e.prototype.setEndpointPosition=function(e,t){var n=t.getGluepointPosition(e.gluepointId);return e.x=n.x,e.y=n.y,e},e.prototype.setEndpointGluepoint=function(e,t,n,r,i,a){var o=i.getAvailableGluepointsByPos(e,r,[t.id],a),s=n.shapeId===r.shapeId?o.filter((function(e){return e.gluepoint.id!==r.gluepointId})):o;return s.length>0&&(n.gluepointId=s[0].gluepoint.id,n.gluepointLocked=!1),this.setEndpointPosition(n,i)},e.prototype.clearEndpointGluepoint=function(e){return e.shapeId=null,e.gluepointId=null,e.gluepointLocked=null,e},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.cc({token:e,factory:e.\u0275fac}),e}()},Wwqo:function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.Github="github.com",e.GoogleSheets="google/sheets"}(r||(r={})),function(e){e.Issue="issue",e.PullRequest="pullRequest"}(i||(i={}))},WydG:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n("D57K"),i=n("AaYA"),a=n("yhNa"),o=n("LC7v"),s=n("QCJn"),c=n("TQyE"),l=n("nsO7"),u=n("IGWl"),d=n("X0jn"),p=n("5xGT"),h=n("SBw3"),f=n("ZTXN"),m=n("ROBh"),g=n("P4Xx"),b=n("g6G6"),v=n("NNJu"),_=n("TLy2"),y=n("YtkY"),O=n("7SLS"),x=n("8j5Y"),E=n("J+dc"),k=n("myrl"),C=n("y0dT"),w=n("QoSw"),S=n("EM62"),I=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,o)||this;return s.componentFactoryResolver=t,s.featureList=n,s.commandService=r,s.state=i,s.ll=a,s.injector=o,s.items={},s.changeSubs={},s._change=new f.a,s.change.subscribe((function(e){return s.handleFeatureChange(e)})),s.resetOperations(),s}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemIds",{get:function(){return Object.keys(this.items)},enumerable:!1,configurable:!0}),t.prototype.getItem=function(e){if(this.items&&this.items[e]){var t=this.items[e].item;if(t)return t.instance}},t.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.changeSubs).forEach((function(t){e.changeSubs[t].unsubscribe()})),this._change.complete(),this.changeSubs=null,this.items=null,this.operations=null},t.prototype.renderShapeSpecificFeatures=function(e){var t=this;return this.features.pipe(Object(_.a)((function(e){var n=t.state.get("Selected");if(n&&1===n.length){var r=n[0];return t.ll.forCurrentObserver(!0).pipe(Object(_.a)((function(e){return e.getShapeOnce(r)})),Object(y.a)((function(t){return e.filter((function(e){return e.shapeDefId===t.defId}))})))}return Object(m.a)([])})),Object(_.a)((function(n){return t.manageCustomShapeComponents(n,e).pipe(Object(O.a)(n))})),Object(_.a)((function(e){return t.apply(!0).pipe(Object(O.a)(e))})))},t.prototype.addItem=function(e,t,n,r,i){var a=this.makeComponent(n);Object(l.isEmpty)(i)||a.instance.setProperties(i),a.instance.id=e,a.instance.setData(r),a.instance.apply(),this.operations.add.push({item:a,container:t})},t.prototype.removeItem=function(e){this.items[e]&&this.items[e].item&&this.operations.remove.push(e)},t.prototype.updateItem=function(e,t,n){if(this.items[e]&&this.items[e].item){var r=this.items[e].item;Object(l.isEmpty)(n)||r.instance.setProperties(n),r.instance.setData(t),r.instance.apply(),this.operations.update.push(e)}},t.prototype.apply=function(e){var t=this,n=this.getPendingOperations(e);return n.length>0?g.a.apply(void 0,Object(r.j)(n)).pipe(Object(x.a)({complete:function(){t.resetOperations()}})):(this.resetOperations(),Object(m.a)({}))},t.prototype.insertFeatureItem=function(e,t,n){if(!this.items[e.instance.id]){if(this.items[e.instance.id]={item:e,container:t},this.subscribeToItemChange(e.instance),n){var r=this.getAddItemAnimation(e);return this.insert(t,e),e.changeDetectorRef.detectChanges(),r.start()}this.insert(t,e),e.changeDetectorRef.detectChanges()}return Object(m.a)({})},t.prototype.removeFeatureItem=function(e,t){var n=this;if(!this.items[e])return Object(m.a)({});var r=this.items[e].item,i=this.items[e].container;if(r){if(this.unsubscribeFromItemChange(e),t)return this.getRemoveItemAnimation(r).start().pipe(Object(x.a)({complete:function(){n.remove(i,r),delete n.items[e]}}));this.remove(i,r),delete this.items[e]}return Object(m.a)({})},t.prototype.updateFeatureItem=function(e,t){if(this.items[e]&&this.items[e].item){var n=this.items[e].item;if(t)return n.instance.applyAnimated();n.instance.apply()}return Object(m.a)({})},t.prototype.resetOperations=function(){this.operations={add:[],remove:[],update:[]}},t.prototype.subscribeToItemChange=function(e){var t=this,n=e.change.subscribe((function(n){t.track({id:e.id,data:n}),t._change.next({id:e.id,data:n})}));this.changeSubs[e.id]=n},t.prototype.track=function(e){["boldModelText","italicModelText","underlineModelText","strikeoutModelText","leftAlignModelText","centerAlignModelText","rightAlignModelText","justifyModelText","fontModelText","sizeModelText","colorModelText","boldText","italicText","underlineText","strikeoutText","leftAlignText","centerAlignText","rightAlignText","justifyText"].includes(e.id)&&p.Jb.track("text.menu.format.change",{value1:e.id})},t.prototype.unsubscribeFromItemChange=function(e){this.changeSubs[e]&&(this.changeSubs[e].unsubscribe(),delete this.changeSubs[e])},t.prototype.getAddItemAnimation=function(e){var t=new v.e({});return t.element=e.location.nativeElement,t},t.prototype.getRemoveItemAnimation=function(e){var t=new v.e({});return t.element=e.location.nativeElement,t},t.prototype.renderFeatureChanges=function(e,t){var n=this;return this.features.pipe(Object(y.a)((function(t){return t.filter((function(t){return e.includes(t.featureId)}))})),Object(_.a)((function(r){return n.manage(e,r,t).pipe(Object(O.a)(r))})),Object(_.a)((function(e){return n.apply(!0).pipe(Object(O.a)(e))})))},t.prototype.updateComponent=function(e){var t=this,n=this.featureList.getFeature(e.featureId),r=this.getUIControlProperties(n);return this.getItemData(n,e.data).pipe(Object(y.a)((function(n){return t.updateItem(e.featureId,n,r)})))},t.prototype.addComponent=function(e,t){var n=this,r=this.featureList.getFeature(e.featureId),i=this.getUIControlType(r.dataType),a=this.getUIControlProperties(r);return this.getItemData(r,e.data).pipe(Object(y.a)((function(r){return n.addItem(e.featureId,t,i,r,a)})))},t.prototype.getUIControlProperties=function(e){return{id:e.id,icon:e.icon,label:e.label,labelPosition:e.labelPosition,dropdownDirection:e.dropdownDirection,tooltip:e.tooltip}},t.prototype.getUIControlType=function(e){if(!e||e===d.c.BINARY)return u.a;if(e===d.c.TEXT_POSITION)return i.a;if(e===d.c.OPTION_LIST_COMBO)return s.a;if(e===d.c.COLOR)return c.a;if(e===d.c.NUMBER)return a.a;if(e===d.c.OPTION_LIST)return o.a;if(e===d.c.CUSTOM_SHAPE_STYLE)return k.a;if(e===d.c.NUMBER_OPTIONS)return C.a;throw new Error("UI control is not available for "+e)},t.prototype.getItemData=function(e,t){return e.transformer?this.injector.get(e.transformer).getFeatureData(e.id,t):t?Object(m.a)(p.s.mergeInstances({},e.data,t)):Object(m.a)(e.data)},t.prototype.handleFeatureChange=function(e){var t=this,n=this.featureList.getFeature(e.id);if(n.transformer){this.injector.get(n.transformer).getApplyData(n.id,e.data).subscribe((function(e){t.commandService.dispatch(n.commandEvent,e)}))}else{var r=p.s.mergeInstances({},this.getCommandData(e.id),e.data);this.commandService.dispatch(n.commandEvent,r)}},t.prototype.getCommandData=function(e){var t={},n=this.getItem(e);return n&&n.data&&(n.data.dataItemId&&(t.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(t.alterFunction=n.data.alterFunction)),t},t.prototype.getPendingOperations=function(e){var t=this,n=[];return this.operations.remove.length>0&&(n=n.concat(this.operations.remove.map((function(n){return t.removeFeatureItem(n,e)})))),this.operations.add.length>0&&(n=n.concat(this.operations.add.map((function(n){return t.insertFeatureItem(n.item,n.container,e)})))),this.operations.update.length>0&&(n=n.concat(this.operations.update.map((function(n){return t.updateFeatureItem(n,e)})))),n},t.prototype.manageCustomShapeComponents=function(e,t){var n=this,r=e.map((function(e){return e.featureId}));return this.itemIds.filter((function(e){return e.includes("creately")})).filter((function(e){return!r.includes(e)})).forEach((function(e){return n.removeItem(e)})),Object(g.a)(this.updateComponents(e),this.addComponents(e,t)).pipe(Object(E.a)(1))},t.prototype.manage=function(e,t,n){return Object(g.a)(this.removeComponents(e,t),this.updateComponents(t),this.addComponents(t,n)).pipe(Object(E.a)(1))},t.prototype.removeComponents=function(e,t){var n=this;return e.filter((function(e){return-1===t.map((function(e){return e.featureId})).indexOf(e)})).forEach((function(e){return n.removeItem(e)})),Object(m.a)({})},t.prototype.addComponents=function(e,t){var n=this,i=[];return e.forEach((function(e,r){-1===n.itemIds.indexOf(e.featureId)&&i.push(n.addComponent(e,t))})),Object(l.isEmpty)(i)?Object(m.a)({}):b.a.apply(void 0,Object(r.j)(i))},t.prototype.updateComponents=function(e){var t=this,n=[];return e.forEach((function(e,r){t.itemIds.includes(e.featureId)&&n.push(t.updateComponent(e))})),Object(l.isEmpty)(n)?Object(m.a)({}):b.a.apply(void 0,Object(r.j)(n))},t.\u0275fac=function(e){return new(e||t)(S.gc(S.m),S.gc(h.a),S.gc(p.B),S.gc(p.Hb),S.gc(w.a),S.gc(S.C))},t.\u0275dir=S.bc({type:t,outputs:{change:"change"},features:[S.Pb]}),t}(v.k)},X1A4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=t.Operator=t.Rule=t.Fact=void 0,t.default=function(e,t){return new r.default(e,t)};var r=s(n("Rx0M")),i=s(n("kRQx")),a=s(n("+ITg")),o=s(n("nyhH"));function s(e){return e&&e.__esModule?e:{default:e}}t.Fact=i.default,t.Rule=a.default,t.Operator=o.default,t.Engine=r.default},X5Q9:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("C05f"),i=n("ZTXN"),a=n("6Oco"),o=(n("Cupj"),n("NNJu")),s=n("EM62"),c=n("pYIu"),l=n("tG6W"),u=n("2kYt"),d=n("vdZD");function p(e,t){if(1&e){var n=s.nc();s.mc(0,"div",18),s.uc("click",(function(){s.Qc(n);var e=t.$implicit;return s.yc().handleOnclickIcon(e.id)})),s.zc(1,"async"),s.fd(2),s.lc()}if(2&e){var r=t.$implicit,i=s.yc();s.Yb("selected",r.id===s.Ac(1,3,i.selectedThemeId)),s.Sb(2),s.hd(" ",r.title," ")}}function h(e,t){if(1&e&&(s.hc(0,"toolbar-shape-style-dropdown-item",21),s.zc(1,"async")),2&e){var n=t.$implicit,r=s.yc(2);s.Dc("item",n)("isSelected",s.Ac(1,2,r.selectedThemeIndex)===n.themeIndex)}}function f(e,t){if(1&e&&(s.mc(0,"div",19),s.dd(1,h,2,4,"toolbar-shape-style-dropdown-item",20),s.zc(2,"async"),s.lc()),2&e){var n=s.yc();s.Sb(1),s.Dc("ngForOf",s.Ac(2,1,n.styles))}}function m(e,t){if(1&e){var n=s.nc();s.mc(0,"div",8),s.mc(1,"div",9),s.fd(2," Fill "),s.lc(),s.mc(3,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleOnclickFillStyle("none")})),s.hc(4,"div",11),s.zc(5,"async"),s.lc(),s.mc(6,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleOnclickFillStyle("flat")})),s.hc(7,"div",22),s.zc(8,"async"),s.lc(),s.mc(9,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleOnclickFillStyle("glass")})),s.hc(10,"div",23),s.zc(11,"async"),s.lc(),s.mc(12,"div",10),s.uc("click",(function(){return s.Qc(n),s.yc().handleOnclickFillStyle("gradient")})),s.hc(13,"div",24),s.zc(14,"async"),s.lc(),s.lc()}if(2&e){var r=s.yc();s.Sb(4),s.Yb("selected","none"===s.Ac(5,8,r.selectedFillPreset)),s.Sb(3),s.Yb("selected","flat"===s.Ac(8,10,r.selectedFillPreset)),s.Sb(3),s.Yb("selected","glass"===s.Ac(11,12,r.selectedFillPreset)),s.Sb(3),s.Yb("selected","gradient"===s.Ac(14,14,r.selectedFillPreset))}}var g=function(){return{closeOnItemClicked:!1,openOnHover:!1,closeOnBlur:!1,closeOnClickOutside:!0,delayToDrop:100}},b=function(){function e(){this._data=new r.a(null),this.styles=new r.a(null),this.selectedThemeIndex=new r.a(-1),this.selectedThemeId=new r.a("base"),this.selectedFillPreset=new r.a(void 0),this.selectedLinePreset=new r.a(void 0),this.hasShapes=new r.a(!0),this.change=new i.a}return e.prototype.ngAfterViewInit=function(){var e=this;this.absDropdown.changed.subscribe((function(t){var n=e.styles.getValue().find((function(e){return e.id===t[0]}));e.change.next(n)}))},e.prototype.setData=function(e){var t=this;this.data=e,this._data.next(e),e.themeIndex&&e.themeIndex>0?this.selectedThemeIndex.next(e.themeIndex):this.selectedThemeIndex.next(-1),e.themeId?this.selectedThemeId.next(e.themeId):this.selectedThemeId.next("base"),e.fillPreset?this.selectedFillPreset.next(e.fillPreset):this.selectedFillPreset.next(void 0),e.linePreset?this.selectedLinePreset.next(e.linePreset):this.selectedLinePreset.next(void 0),this.hasShapes.next(!e.isConnector),this.styles.next(this.data.palettes.find((function(e){return e.id===t.selectedThemeId.value})).palette.styles)},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(a.b)()},e.prototype.setProperties=function(e){this.props=e},e.prototype.getIconHref=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.prototype.handleOnclickIcon=function(e){var t=this.selectedThemeId.value;this.selectedThemeId.next(e);var n=e;this.styles.next(this.data.palettes.find((function(e){return e.id===n})).palette.styles),this.change.next({isThemeSwitch:!0,newPaletteId:n,currPaletteId:t})},e.prototype.handleOnclickLineStyle=function(e){this.change.next({isLineStyle:!0,style:e})},e.prototype.handleOnclickFillStyle=function(e){this.change.next({isFillStyle:!0,style:e})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.ac({type:e,selectors:[["toolbar-shape-style-dropdown"]],viewQuery:function(e,t){var n;(1&e&&s.kd(o.b,!0),2&e)&&(s.Mc(n=s.vc())&&(t.absDropdown=n.first))},decls:33,vars:36,consts:[[1,"ftb-item","tss-dd-container"],[3,"settings"],["dd",""],["ddbutton","",3,"props"],["dditem",""],[1,"tss-dd-tab-header"],["class","tss-dd-tab-icon",3,"selected","click",4,"ngFor","ngForOf"],["class","tss-dd-styles-container",4,"ngIf"],[1,"tss-dd-style-section"],[1,"tss-dd-section-title"],[1,"tss-dd-style-icon",3,"click"],[1,"circle-filler","none","solid"],[1,"circle-filler","light","solid"],[1,"circle-filler","normal","solid"],[1,"circle-filler","bold","special"],[1,"circle-filler","dashed","special"],[1,"circle-filler","mixed","special"],["class","tss-dd-style-section",4,"ngIf"],[1,"tss-dd-tab-icon",3,"click"],[1,"tss-dd-styles-container"],[3,"item","isSelected",4,"ngFor","ngForOf"],[3,"item","isSelected"],[1,"circle-filler","flat","solid"],[1,"circle-filler","glass","solid"],[1,"circle-filler","gradient","solid"]],template:function(e,t){1&e&&(s.mc(0,"div",0),s.mc(1,"abs-dropdown",1,2),s.hc(3,"toolbar-dropdown-button",3),s.mc(4,"div",4),s.mc(5,"div",5),s.dd(6,p,3,5,"div",6),s.zc(7,"async"),s.lc(),s.dd(8,f,3,3,"div",7),s.zc(9,"async"),s.mc(10,"div",8),s.mc(11,"div",9),s.fd(12," Line "),s.lc(),s.mc(13,"div",10),s.uc("click",(function(){return t.handleOnclickLineStyle("none")})),s.hc(14,"div",11),s.zc(15,"async"),s.lc(),s.mc(16,"div",10),s.uc("click",(function(){return t.handleOnclickLineStyle("light")})),s.hc(17,"div",12),s.zc(18,"async"),s.lc(),s.mc(19,"div",10),s.uc("click",(function(){return t.handleOnclickLineStyle("normal")})),s.hc(20,"div",13),s.zc(21,"async"),s.lc(),s.mc(22,"div",10),s.uc("click",(function(){return t.handleOnclickLineStyle("bold")})),s.hc(23,"div",14),s.zc(24,"async"),s.lc(),s.mc(25,"div",10),s.uc("click",(function(){return t.handleOnclickLineStyle("dashed")})),s.hc(26,"div",15),s.zc(27,"async"),s.lc(),s.mc(28,"div",10),s.uc("click",(function(){return t.handleOnclickLineStyle("mixed")})),s.hc(29,"div",16),s.zc(30,"async"),s.lc(),s.lc(),s.dd(31,m,15,16,"div",17),s.zc(32,"async"),s.lc(),s.lc(),s.lc()),2&e&&(s.Sb(1),s.Dc("settings",s.Hc(35,g)),s.Sb(2),s.Dc("props",t.props),s.Sb(3),s.Dc("ngForOf",s.Ac(7,17,t._data).palettes),s.Sb(2),s.Dc("ngIf",s.Ac(9,19,t.styles)),s.Sb(6),s.Yb("selected","none"===s.Ac(15,21,t.selectedLinePreset)),s.Sb(3),s.Yb("selected","light"===s.Ac(18,23,t.selectedLinePreset)),s.Sb(3),s.Yb("selected","normal"===s.Ac(21,25,t.selectedLinePreset)),s.Sb(3),s.Yb("selected","bold"===s.Ac(24,27,t.selectedLinePreset)),s.Sb(3),s.Yb("selected","dashed"===s.Ac(27,29,t.selectedLinePreset)),s.Sb(3),s.Yb("selected","mixed"===s.Ac(30,31,t.selectedLinePreset)),s.Sb(2),s.Dc("ngIf",s.Ac(32,33,t.hasShapes)))},directives:[c.a,l.a,u.s,u.t,d.a],pipes:[u.b],styles:['.nu-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.tss-dd-container[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:.625rem}.tss-dd-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{max-width:262px}.tss-dd-styles-container[_ngcontent-%COMP%]{padding-bottom:.625rem;margin-bottom:.625rem;border-bottom:1px solid #f1f4fa;display:flex;align-items:flex-start;flex-wrap:wrap}.tss-dd-styles-container[_ngcontent-%COMP%]  .tss-dd-item-container{display:inline-block}.tss-dd-styles-container[_ngcontent-%COMP%]  .style-tile.circle:hover{background-color:#f4fcfa}.tss-dd-tab-icon[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;display:inline-block}.tss-dd-tab-icon.selected[_ngcontent-%COMP%]{border-bottom:2px solid #04263d}.tss-dd-tab-icon.selected[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .tss-dd-tab-icon.selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#95a8af}.tss-dd-tab-header[_ngcontent-%COMP%]{margin-bottom:.625rem;border-bottom:1px solid #f1f4fa;font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:12px;color:#7e7e7e;text-align:left}.tss-dd-tab-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px}.tss-dd-custom[_ngcontent-%COMP%]{margin-bottom:.625rem;padding-bottom:.25rem;padding-top:.625rem;border-bottom:1px solid #caccce}.tss-dd-style-section[_ngcontent-%COMP%]{text-align:left;margin-bottom:2px}.tss-dd-style-icon[_ngcontent-%COMP%]{display:inline-block;margin:4px 6px 4px 4px;min-width:20px}.tss-dd-section-title[_ngcontent-%COMP%]{display:inline-block;font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:12px;color:#7e7e7e;text-align:left;min-width:30px;margin-right:2px;margin-left:4px;margin-top:-2px;vertical-align:text-top}.circle-filler[_ngcontent-%COMP%]{height:20px;width:20px;border-radius:50%;display:inline-block}.circle-filler.glass[_ngcontent-%COMP%]{background:linear-gradient(180deg,#d2d5da,#9da3ae)}.circle-filler.gradient[_ngcontent-%COMP%]{background:linear-gradient(180deg,#d2d5da,#4d5562)}.circle-filler.flat[_ngcontent-%COMP%]{background:#9da3ae}.circle-filler.normal[_ngcontent-%COMP%]{border:2px solid #4d5562;border-radius:100%}.circle-filler.light[_ngcontent-%COMP%]{border:2px solid #d2d5da;border-radius:100%}.circle-filler.bold[_ngcontent-%COMP%]{border:4px solid #4d5562;border-radius:100%}.circle-filler.dashed[_ngcontent-%COMP%]{border:2px dashed #4d5562;border-radius:100%}.circle-filler.mixed[_ngcontent-%COMP%]{border:4px solid #da5597;border-radius:100%}.circle-filler.none[_ngcontent-%COMP%]{color:#d2d5da;position:absolute;margin-top:-15px;width:20px;height:20px;border:2px solid;border-radius:100%}.circle-filler.none.selected[_ngcontent-%COMP%]:after{background-color:#1381cd!important}.circle-filler.none[_ngcontent-%COMP%]:after{content:"";position:absolute;top:7px;left:0;width:16px;height:2px;background-color:currentColor;transform:rotate(135deg)}.circle-filler.none[_ngcontent-%COMP%]:hover:after{background-color:#1381cd!important}.circle-filler.solid.selected[_ngcontent-%COMP%], .circle-filler.solid[_ngcontent-%COMP%]:hover{border-color:#1381cd!important;border-width:2px;border-style:solid}.circle-filler.special.selected[_ngcontent-%COMP%], .circle-filler.special[_ngcontent-%COMP%]:hover{border-color:#1381cd!important}'],changeDetection:0}),e}()},XLk1:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("ZTXN"),a=n("NNJu"),o=n("EM62"),s=n("19Zn"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.validation={},n.inputChanged=new i.a,n}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"inputValue",{get:function(){return this.item?this.item.buttonLabel:" - "},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.dataItem=s.j.instance.create({type:this.validation.type,validationRules:this.validation.rules})},t.prototype.handleChange=function(e,t){if(!this.dataItem||null===this.dataItem.validate(e)){var n=this.items.find((function(t){return t.label===e}));n?this.inputChanged.next({value:n.value,takeFocus:t}):this.inputChanged.next({value:e,takeFocus:t})}},t.\u0275fac=function(e){return new(e||t)(o.gc(o.r))},t.\u0275cmp=o.ac({type:t,selectors:[["sidebar-dropdown-input"]],inputs:{readOnly:"readOnly",validation:"validation"},outputs:{inputChanged:"inputChanged"},features:[o.Rb([{provide:a.i,useExisting:Object(o.lb)((function(){return t}))}]),o.Pb],decls:4,vars:3,consts:[[1,"sidebar-dd-button-container","nu-dropdown-container"],[1,"dropdown-selection","text-input",3,"value","focusout","input"],["inputElement",""],["src","./assets/icon-hovers/arrow-down-extra-small-thick.svg",1,"nu-dropdown-arrow"]],template:function(e,t){1&e&&(o.mc(0,"a",0),o.mc(1,"input",1,2),o.uc("focusout",(function(e){return t.handleChange(e.target.value,!0)}))("input",(function(e){return t.handleChange(e.target.value,!1)})),o.lc(),o.hc(3,"img",3),o.lc()),2&e&&(o.Sb(1),o.Yb("uneditable",t.readOnly),o.Dc("value",t.inputValue))},styles:[".nu-dropdown-arrow[_ngcontent-%COMP%]{margin-top:.625rem;margin-right:.25rem;height:21px;width:21px}"]}),t}(a.i)},XRvk:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("JPqQ"),a=n("6Oco"),o=n("EM62"),s=function(){function e(e){this.drs=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"DataDefCodeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=this,n=e.__sakota__.getChanges(),r=this.modifiedDataDef(n);return Object.keys(r).forEach((function(n){t.processShape(e,n,r[n])})),Object(a.b)()},e.prototype.processShape=function(e,t,n){var r=this;Object.values(e.shapes).forEach((function(i){(i.dataSetId===t||i.eData&&(i.entityDefId===t||i.entityId===t))&&(i&&i.dataChange&&i.dataChange(i,e),n.forEach((function(t){r.drs.buildRuleMapOnDataDefChange(e),r.drs.evalRules(t,i)})))}))},e.prototype.modifiedDataDef=function(t){var n,i,a={};try{for(var o=Object(r.k)(["$set","$unset"]),s=o.next();!s.done;s=o.next()){var c=s.value;if(t[c])for(var l in t[c]){e.regexDataDefs.lastIndex=0;var u=e.regexDataDefs.exec(l);if(u){var d=u[1],p=u.input.split(".")[2];a[d]||(a[d]=[]),p&&a[d].push(p)}}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},e.regexDataDefs=/dataDefs\.([^\.]+)\./g,e.\u0275fac=function(t){return new(t||e)(o.qc(i.a))},e.\u0275prov=o.cc({token:e,factory:e.\u0275fac}),e}()},XVEb:function(e,t,n){"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!a.test(e))return e;return e.replace(i,o)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,a=/[&<>"'`=]/;function o(e){return r[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var c=Object.prototype.toString;t.toString=c;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===c.call(e)};t.isArray=u},XfZi:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("m/OR"),i=n("19Zn"),a=n("nsO7"),o=n("6Oco"),s=n("X0jn"),c=n("C0rp"),l=n("VkJx"),u=n("5xGT"),d=n("EM62"),p=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeBoundsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX","scaleY"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set)return this.shapeScaleChange(e,n),this.shapeTextHeightChange(e,n),this.shapeTextWidthChange(e,n,t),Object(o.b)()},e.prototype.roundUpToNearest20px=function(e){return 20*Math.ceil(e/20)},e.prototype.setTextMinWidth=function(e){if(!e.minWidth&&""!==e.plainText){var t=c.bounds(e.content,1e4,s.b).minWidth;e.minWidth=t}},e.prototype.shapeScaleChange=function(t,n){var r=this,o=function(n){e.regexScale.lastIndex=0;var o=e.regexScale.exec(n);if(!o)return"continue";var c=o[2]?o[2]:o[4],l=t.shapes[c],u=(l.transformSettings||{}).fixAspectRatio;if(l.isConnector()||u)return"continue";Object(a.forEach)(l.texts,(function(t,n){var a=l.texts[n];if(!i.H.isInside(a))return!1;r.setTextMinWidth(a);var o=Math.min(a.minWidth+2*s.y,e.maxWidthAutoResizeWidth);l.autoResizeToMinTextWidth&&o>l.bounds.rotate(l.angle).width&&(l.scaleX=r.roundUpToNearest20px(o)/l.defaultBounds.width);var c=a.height||0+2*s.y;l.autoResizeHeight&&c>l.bounds.rotate(l.angle).height&&(l.scaleY=r.roundUpToNearest20px(c)/l.defaultBounds.height)}))};for(var c in n.$set)o(c)},e.prototype.shapeTextWidthChange=function(t,n,o){var c=this,d=function(n){e.regexTextWidth.lastIndex=0;var d=e.regexTextWidth.exec(n);if(!d)return"continue";var p=d[1],h=t.shapes[p],f=(h.transformSettings||{}).fixAspectRatio;if(h.isConnector()||f)return"continue";Object(a.forEach)(h.texts,(function(n,a){var d=h.texts[a];if(!i.H.isInside(d))return!1;var f=h.defaultBounds.width*h.scaleX;if(h.isAutoResizeable()&&h.autoResizeWidth){var m=Math.max(d.width+2*s.y,h.userSetWidth),g=Math.min(e.maxWidthAutoResizeWidth,m);g===e.maxWidthAutoResizeWidth&&(h.autoResizeWidth=!1,o===u.A.PREVIEW&&l.b.updateManualy.next(!0));var b=c.roundUpToNearest20px(g)/h.defaultBounds.width;h.scaleX!==b&&(h.scaleX=b)}if(h.autoResizeToMinTextWidth&&"string"!=typeof d.minWidth){var v=d.minWidth+2*s.y;v>h.bounds.rotate(h.angle).width&&(h.scaleX=c.roundUpToNearest20px(v)/h.defaultBounds.width)}var _=h.defaultBounds.width*h.scaleX-f,y=r.a.getTextAlignment(t.id,p,a);h.x=c.translateShape(h.x,_,y)}))};for(var p in n.$set)d(p)},e.prototype.shapeTextHeightChange=function(t,n){var r=this,i=function(n){e.regexTextHeight.lastIndex=0;var i=e.regexTextHeight.exec(n);if(!i)return"continue";var o=i[1],c=t.shapes[o],l=(c.transformSettings||{}).fixAspectRatio;if(c.isConnector()||l)return"continue";Object(a.forEach)(c.texts,(function(e,t){var n=c.texts[t];if(c.isAutoResizeable()){var i=c.defaultBounds.height*c.scaleY;if(!c.autoResizeHeight&&c.bounds.rotate(c.angle).height<=n.height+2*s.z&&(c.autoResizeHeight=!0),c.autoResizeHeight){var a=Math.max(n.height+2*s.z,c.userSetHeight),o=r.roundUpToNearest20px(a)/c.defaultBounds.height;c.scaleY!==o&&(c.scaleY=o)}var l=c.defaultBounds.height*c.scaleY-i;c.y=r.translateShape(c.y,l,n.alignY)}}))};for(var o in n.$set)i(o)},e.prototype.translateShape=function(e,t,n){return n===s.A.center?e-t/2:n===s.A.negative?e:n===s.A.positive?e-t:e},e.maxWidthAutoResizeWidth=700,e.regexScale=/(shapes\.([^\.]+)\.scaleX)|(shapes\.([^\.]+)\.scaleY)/g,e.regexTextHeight=/shapes\.([^\.]+)\.texts\.([^\.]+)\.height/g,e.regexTextWidth=/shapes\.([^\.]+)\.texts\.([^\.]+)\.width/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.cc({token:e,factory:e.\u0275fac}),e}()},Y6vQ:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=n("ppab"),s=n("tfzy"),c=n("B1sc"),l=n("iTOv"),u=function(){function e(t,n){(0,i.default)(this,e),this._grammar=t,this._exprStr=n,this._ast=null}return(0,a.default)(e,[{key:"compile",value:function(){var e=new s(this._grammar),t=new c(this._grammar),n=e.tokenize(this._exprStr);return t.addTokens(n),this._ast=t.complete(),this}},{key:"eval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._eval(e,Promise)}},{key:"evalSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._eval(e,l);if(t.error)throw t.error;return t.value}},{key:"_eval",value:function(e,t){var n=this;return t.resolve().then((function(){var r=n._getAst();return new o(n._grammar,e,void 0,t).eval(r)}))}},{key:"_getAst",value:function(){return this._ast||this.compile(),this._ast}}]),e}();e.exports=u},YSjj:function(e,t,n){var r=[n("K07p"),n("KFbB"),n("ipv5"),n("90bW"),n("1NHC"),n("a+rc"),n("Pj1F"),n("pJBp"),n("7B5I"),n("ktVY"),n("eQvJ"),n("j0Im")];for(var i in r){var a=r[i];for(var o in a)t[o]=t[o]||a[o]}t.utils={errors:n("oFOz")}},ZZOX:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D57K"),i=n("NNJu"),a=n("5xGT"),o=n("C05f"),s=n("o9on"),c=n("EM62"),l=n("s2Ay"),u=n("crdX"),d=n("2kYt"),p=n("qtZD"),h=["window"],f=["windowInner"];function m(e,t){if(1&e){var n=c.nc();c.mc(0,"nu-check-box",28),c.uc("valueChanged",(function(e){return c.Qc(n),c.yc().toggleSelect(e)})),c.lc()}if(2&e){var r=t.$implicit;c.Ec("label",r.name),c.Ec("value",r.id),c.Dc("checked",r.checked)}}var g=function(e){function t(t,n,r){var i=e.call(this)||this;return i.modalController=t,i.commandService=n,i.translate=r,i.allFolderId="all",i.allFolderName="All Folders",i.subs=[],i.folderList=new o.a(null),i.selectedFolders=new o.a(0),i.showImportStartMessage=new o.a(!1),i}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){var e=this,t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t),this.commandService.dispatch(s.a.getClassicProjects,{callBack:function(t){e.populateProjects(t)}})},t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.closeWindow=function(){var e=this,t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.toggleSelect=function(e){var t=this,n=this.folderList.value;e.value===this.allFolderId?e.checked?n.forEach((function(e){e.checked=!0})):n.forEach((function(e){e.checked=!1})):e.checked?n.filter((function(t){return t.id===e.value})).forEach((function(e){e.checked=!0})):n.filter((function(n){return n.id===e.value||n.id===t.allFolderId})).forEach((function(e){e.checked=!1}));var r=n.filter((function(e){return e.id!==t.allFolderId&&e.checked})).length;this.selectedFolders.next(r)},t.prototype.startImport=function(){var e=this,t=this.folderList.value.filter((function(t){return t.id!==e.allFolderId&&t.checked})).map((function(e){return e.id}));this.commandService.dispatch(s.a.importClassicProjects,{rid:t.join(",")}),this.showImportStartMessage.next(!0)},t.prototype.populateProjects=function(e){var t=[{id:this.allFolderId,name:this.allFolderName,checked:!1}],n=e.map((function(e){return{id:e.id,name:e.name,checked:!1}}));t.push.apply(t,Object(r.j)(n)),this.folderList.next(t)},t.\u0275fac=function(e){return new(e||t)(c.gc(a.fb),c.gc(a.B),c.gc(l.e))},t.\u0275cmp=c.ac({type:t,selectors:[["classic-import-dialog"]],viewQuery:function(e,t){var n;(1&e&&(c.Xc(h,!0),c.Xc(f,!0)),2&e)&&(c.Mc(n=c.vc())&&(t.container=n.first),c.Mc(n=c.vc())&&(t.containerInner=n.first))},features:[c.Pb],decls:45,vars:16,consts:[[1,"classic-import-container","modal-window-container","fx-cover","fx-center-all",3,"click"],["window",""],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["translate",""],["translate","",1,"classic-import-beta-tag"],[1,"nu-btn-small","nu-btn-icon",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"classic-import-screen-1"],[1,"classic-import-content"],["translate","",1,"grey","fx-margin-bottom-15"],[1,"classic-import-scrollable"],[1,"classic-import-projectlist","fx-margin-bottom-20"],[3,"label","value","checked","valueChanged",4,"ngFor","ngForOf"],[1,"classic-import-footer"],[1,"classic-import-footer-folder-num"],["translate","",1,"nu-btn-med","primary",3,"disabled","click"],["translate","",1,"nu-btn-med","secondary",3,"click"],[1,"classic-import-screen-2"],["translate","",1,"grey"],[1,"classic-import-footer","primary"],[1,"spinner-container"],["id","spinner",1,"spinner"],[1,"bounce1","white"],[1,"bounce2","white"],[1,"bounce3","white"],[3,"label","value","checked","valueChanged"]],template:function(e,t){1&e&&(c.mc(0,"div",0,1),c.uc("click",(function(e){return t.closeOnOverlayClick(e)})),c.mc(2,"div",2,3),c.zc(4,"async"),c.mc(5,"div",4),c.mc(6,"h1",5),c.fd(7,"CLASSIC_IMPORT.TEXT.HEADER "),c.mc(8,"label",6),c.fd(9,"LABELS.BETA"),c.lc(),c.lc(),c.mc(10,"button",7),c.uc("click",(function(){return t.closeWindow()})),c.xc(),c.mc(11,"svg",8),c.hc(12,"use",9),c.lc(),c.lc(),c.lc(),c.wc(),c.mc(13,"div",10),c.mc(14,"div",11),c.mc(15,"p",12),c.fd(16," CLASSIC_IMPORT.TEXT.SELECT_FOLDER "),c.lc(),c.mc(17,"div",13),c.mc(18,"perfect-scrollbar"),c.mc(19,"div",14),c.dd(20,m,1,3,"nu-check-box",15),c.zc(21,"async"),c.lc(),c.lc(),c.lc(),c.lc(),c.mc(22,"div",16),c.mc(23,"div",17),c.fd(24),c.zc(25,"async"),c.zc(26,"translate"),c.lc(),c.mc(27,"div"),c.mc(28,"button",18),c.uc("click",(function(){return t.startImport()})),c.zc(29,"async"),c.fd(30,"CLASSIC_IMPORT.BUTTON.IMPORT"),c.lc(),c.mc(31,"button",19),c.uc("click",(function(){return t.closeWindow()})),c.fd(32,"CLASSIC_IMPORT.BUTTON.CANCEL"),c.lc(),c.lc(),c.lc(),c.lc(),c.mc(33,"div",20),c.mc(34,"div",11),c.mc(35,"p",21),c.fd(36," CLASSIC_IMPORT.TEXT.IMPORT_PROGRESS "),c.hc(37,"br"),c.fd(38," CLASSIC_IMPORT.TEXT.CLOSE_DIALOG "),c.lc(),c.mc(39,"div",22),c.mc(40,"div",23),c.mc(41,"div",24),c.hc(42,"div",25),c.hc(43,"div",26),c.hc(44,"div",27),c.lc(),c.lc(),c.lc(),c.lc(),c.lc(),c.lc(),c.lc()),2&e&&(c.Sb(2),c.Yb("screen-2",c.Ac(4,6,t.showImportStartMessage)),c.Sb(18),c.Dc("ngForOf",c.Ac(21,8,t.folderList)),c.Sb(4),c.id(" ",c.Ac(25,10,t.selectedFolders)," ",c.Ac(26,12,"CLASSIC_IMPORT.TEXT.SELECTED_FOLDERS")," "),c.Sb(4),c.Dc("disabled",!c.Ac(29,14,t.selectedFolders)))},directives:[l.a,u.b,d.s,p.a],pipes:[d.b,l.d],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.modal-window-inner[_ngcontent-%COMP%]{height:80%;max-height:660px;width:460px}.modal-window-inner.screen-2[_ngcontent-%COMP%]{height:250px}.modal-window-inner.screen-2[_ngcontent-%COMP%]   .classic-import-screen-1[_ngcontent-%COMP%]{display:none}.modal-window-inner.screen-2[_ngcontent-%COMP%]   .classic-import-screen-2[_ngcontent-%COMP%]{display:block}.classic-import-content[_ngcontent-%COMP%]{height:calc(100% - 40px)}.classic-import-scrollable[_ngcontent-%COMP%]{margin-top:5px;height:calc(100% - 70px)}.classic-import-footer[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:5px}.classic-import-footer-folder-num[_ngcontent-%COMP%]{flex:1;margin-top:5px}.classic-import-screen-1[_ngcontent-%COMP%]{height:calc(100% - 70px)}.classic-import-screen-2[_ngcontent-%COMP%]{display:none}.classic-import-screen-2[_ngcontent-%COMP%]   .classic-import-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:55px;width:100%}.classic-import-screen-2[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{margin:0 auto}.classic-import-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ced9e3;color:#0a5283;border-radius:2px;font-size:11px;position:absolute;margin-top:3px;margin-left:5px}"],changeDetection:0}),t}(i.p)},ZcxV:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n("T9/7"),a=r(n("0KrK")),o=n("XVEb"),s=r(n("Fvkh"));function c(e){this.value=e}function l(){}l.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=i.COMPILER_REVISION;return[e,i.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return o.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,o=void 0,s=void 0,c=void 0,l=void 0;for(c=0,l=i.length;c<l;c++)o=i[c],this.source.currentLocation=o.loc,s=s||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(r);if(this.isChild)return u;var d={compiler:this.compilerInfo(),main:u};this.decorators&&(d.main_d=this.decorators,d.useDecorators=!0);var p=this.context,h=p.programs,f=p.decorators;for(c=0,l=h.length;c<l;c++)h[c]&&(d[c]=h[c],f[c]&&(d[c+"_d"]=f[c],d.useDecorators=!0));return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),r?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName})).map=d.map&&d.map.toString():d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new s.default(this.options.srcName),this.decorators=new s.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",r=this.stackVars.concat(this.registers.list);r.length>0&&(n+=", "+r.join(", "));var i=0;Object.keys(this.aliases).forEach((function(e){var r=t.aliases[e];r.children&&r.referenceCount>1&&(n+=", alias"+ ++i+"="+e,r.children[0]="alias"+i)})),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var o=this.mergeSource(n);return e?(a.push(o),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",o,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,r=void 0,i=void 0,a=void 0,o=void 0;return this.source.each((function(e){e.appendToBuffer?(a?e.prepend("  + "):a=e,o=e):(a&&(i?a.prepend("buffer += "):r=!0,o.add(";"),a=o=void 0),i=!0,t||(n=!1))})),n?a?(a.prepend("return "),o.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),a?(a.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack((function(e){return[" != null ? ",e,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,r){var i=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,r,i){var a=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,r){var i=t.popStack(),a=0,o=n.length;e&&o--;for(;a<o;a++)i=t.nameLookup(i,n[a],r);return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(n[a]),", ",JSON.stringify(t.source.currentLocation)," )"]:i}(this.options.strict&&i,this,t,e));else for(var o=t.length;n<o;n++)this.replaceStack((function(i){var o=a.nameLookup(i,t[n],e);return r?[" && ",o]:[" != null ? ",o," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),r=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(e,t,n){var r=this.popStack(),i=this.setupHelper(e,t),a=[];n&&a.push(i.name),a.push(r),this.options.strict||a.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(a,"||"),")"],s=this.source.functionCall(o,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var r=1;r<e.length;r++)n.push(t,e[r]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],i=this.setupParams(t,1,r);e&&(t=this.popStack(),delete i.name),n&&(i.indent=JSON.stringify(n)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),r.push(i),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),n=void 0,r=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var a=this.hash;n&&(a.contexts[e]=n),r&&(a.types[e]=r),i&&(a.ids[e]=i),a.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:l,compileChildren:function(e,t){for(var n=e.children,r=void 0,i=void 0,a=0,o=n.length;a<o;a++){r=n[a],i=new this.compiler;var s=this.matchExistingProgram(r);if(null==s){this.context.programs.push("");var c=this.context.programs.length;r.index=c,r.name="program"+c,this.context.programs[c]=i.compile(r,t,this.context,!this.precompile),this.context.decorators[c]=i.decorators,this.context.environments[c]=r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=s.index,r.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return r}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof c||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new c(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,r=void 0,i=void 0;if(!this.isInline())throw new a.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof c)t=["(",n=[o.value]],i=!0;else{r=!0;var s=this.incrStack();t=["((",this.push(s)," = ",o,")"],n=this.topStack()}var l=e.call(this,n);i||this.popStack(),r&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof c)this.compileStack.push(r);else{var i=this.incrStack();this.pushSource([i," = ",r,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof c)return n.value;if(!t){if(!this.stackSlot)throw new a.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof c?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[];return{params:r,paramsInit:this.setupHelperArgs(t,e,r,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(r)}},setupParams:function(e,t,n){var r={},i=[],a=[],o=[],s=!n,c=void 0;s&&(n=[]),r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var l=this.popStack(),u=this.popStack();(u||l)&&(r.fn=u||"container.noop",r.inverse=l||"container.noop");for(var d=t;d--;)c=this.popStack(),n[d]=c,this.trackIds&&(o[d]=this.popStack()),this.stringParams&&(a[d]=this.popStack(),i[d]=this.popStack());return s&&(r.args=this.source.generateArray(n)),this.trackIds&&(r.ids=this.source.generateArray(o)),this.stringParams&&(r.types=this.source.generateArray(a),r.contexts=this.source.generateArray(i)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,n,r){var i=this.setupParams(e,t,n);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),r?(this.useRegister("options"),n.push("options"),["options=",i]):n?(n.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=l.RESERVED_WORDS={},n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),l.isValidJavaScriptVariableName=function(e){return!l.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=l,e.exports=t.default},ZeiE:function(e,t,n){"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.extend.apply(void 0,[Object.create(null)].concat(t))};var r=n("XVEb")},"Zuf/":function(e,t,n){"use strict";e.exports=n("X1A4")},"a+rc":function(e,t,n){var r=n("sfKy"),i=n("oFOz");t.ASC=function(){throw new Error("ASC is not implemented")},t.BAHTTEXT=function(){throw new Error("BAHTTEXT is not implemented")},t.CHAR=function(e){return 0===(e=r.parseNumber(e))?i.value:e instanceof Error?e:String.fromCharCode(e)},t.CLEAN=function(e){if(r.anyIsError(e))return e;return(e=e||"").replace(/[\0-\x1F]/g,"")},t.CODE=function(e){if(r.anyIsError(e))return e;var t=(e=e||"").charCodeAt(0);return isNaN(t)&&(t=i.value),t},t.CONCATENATE=function(){var e=r.flatten(arguments),t=r.anyError.apply(void 0,e);if(t)return t;for(var n=0;(n=e.indexOf(!0))>-1;)e[n]="TRUE";for(var i=0;(i=e.indexOf(!1))>-1;)e[i]="FALSE";return e.join("")},t.CONCAT=t.CONCATENATE,t.DBCS=function(){throw new Error("DBCS is not implemented")},t.DOLLAR=function(){throw new Error("DOLLAR is not implemented")},t.EXACT=function(e,t){if(2!==arguments.length)return i.na;var n=r.anyError(e,t);return n||(e=r.parseString(e))===(t=r.parseString(t))},t.FIND=function(e,t,n){if(arguments.length<2)return i.na;e=r.parseString(e),n=void 0===n?0:n;var a=(t=r.parseString(t)).indexOf(e,n-1);return-1===a?i.value:a+1},t.FIXED=function(){throw new Error("FIXED is not implemented")},t.HTML2TEXT=function(e){if(r.anyIsError(e))return e;var t="";return e&&(e instanceof Array?e.forEach((function(e){""!==t&&(t+="\n"),t+=e.replace(/<(?:.|\n)*?>/gm,"")})):t=e.replace(/<(?:.|\n)*?>/gm,"")),t},t.LEFT=function(e,t){var n=r.anyError(e,t);return n||(e=r.parseString(e),t=void 0===t?1:t,(t=r.parseNumber(t))instanceof Error||"string"!=typeof e?i.value:e.substring(0,t))},t.LEN=function(e){if(0===arguments.length)return i.error;if(e instanceof Error)return e;if(Array.isArray(e))return i.value;var t=r.parseString(e);return t.length},t.LOWER=function(e){return 1!==arguments.length?i.value:(e=r.parseString(e),r.anyIsError(e)?e:e.toLowerCase())},t.MID=function(e,t,n){if(null==t)return i.value;if(t=r.parseNumber(t),n=r.parseNumber(n),r.anyIsError(t,n)||"string"!=typeof e)return n;var a=t-1,o=a+n;return e.substring(a,o)},t.NUMBERVALUE=function(e,t,n){return t=void 0===t?".":t,n=void 0===n?",":n,Number(e.replace(t,".").replace(n,""))},t.PRONETIC=function(){throw new Error("PRONETIC is not implemented")},t.PROPER=function(e){return r.anyIsError(e)?e:isNaN(e)&&"number"==typeof e?i.value:(e=r.parseString(e)).replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},t.REGEXEXTRACT=function(e,t){if(arguments.length<2)return i.na;var n=e.match(new RegExp(t));return n?n[n.length>1?n.length-1:0]:null},t.REGEXMATCH=function(e,t,n){if(arguments.length<2)return i.na;var r=e.match(new RegExp(t));return n?r:!!r},t.REGEXREPLACE=function(e,t,n){return arguments.length<3?i.na:e.replace(new RegExp(t),n)},t.REPLACE=function(e,t,n,a){return t=r.parseNumber(t),n=r.parseNumber(n),r.anyIsError(t,n)||"string"!=typeof e||"string"!=typeof a?i.value:e.substr(0,t-1)+a+e.substr(t-1+n)},t.REPT=function(e,t){var n=r.anyError(e,t);return n||(e=r.parseString(e),(t=r.parseNumber(t))instanceof Error?t:new Array(t+1).join(e))},t.RIGHT=function(e,t){var n=r.anyError(e,t);return n||(e=r.parseString(e),t=void 0===t?1:t,(t=r.parseNumber(t))instanceof Error?t:e.substring(e.length-t))},t.SEARCH=function(e,t,n){var r;return"string"!=typeof e||"string"!=typeof t?i.value:(n=void 0===n?0:n,0===(r=t.toLowerCase().indexOf(e.toLowerCase(),n-1)+1)?i.value:r)},t.SPLIT=function(e,t){return e.split(t)},t.SUBSTITUTE=function(e,t,n,r){if(arguments.length<3)return i.na;if(e&&t){if(void 0===r)return e.split(t).join(n);if(r=Math.floor(Number(r)),Number.isNaN(r)||r<=0)return i.value;for(var a=0,o=0;a>-1&&e.indexOf(t,a)>-1;)if(o++,(a=e.indexOf(t,a+1))>-1&&o===r)return e.substring(0,a)+n+e.substring(a+t.length);return e}return e},t.T=function(e){return e instanceof Error||"string"==typeof e?e:""},t.TEXT=function(){throw new Error("TEXT is not implemented")},t.TRIM=function(e){return(e=r.parseString(e))instanceof Error?e:e.replace(/\s+/g," ").trim()},t.UNICHAR=t.CHAR,t.UNICODE=t.CODE,t.UPPER=function(e){return(e=r.parseString(e))instanceof Error?e:e.toUpperCase()},t.VALUE=function(e){var t=r.anyError(e);if(t)return t;if("string"!=typeof e)return i.value;var n=/(%)$/.test(e)||/^(%)/.test(e);if(""===(e=(e=(e=e.replace(/^[^0-9-]{0,3}/,"")).replace(/[^0-9]{0,3}$/,"")).replace(/[\ ,]/g,"")))return i.value;var a=Number(e);return isNaN(a)?i.value:(a=a||0,n&&(a*=.01),a)}},aSB4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("ROBh"),i=n("5xGT"),a=n("SBw3"),o=n("EM62"),s=function(){function e(e,t){this.state=e,this.featureList=t}return e.prototype.getFeatureData=function(e){var t=this.featureList.getFeature(e);return Object(r.a)(t)},e.prototype.getApplyData=function(e){return Object(r.a)({connectorIds:[this.state.get("Selected")[0]]})},e.\u0275fac=function(t){return new(t||e)(o.qc(i.Hb),o.qc(a.a))},e.\u0275prov=o.cc({token:e,factory:e.\u0275fac}),e}()},aSzn:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("X0jn"),s=n("nsO7"),c=n("g6G6"),l=n("ROBh"),u=n("P4Xx"),d=n("6Oco"),p=n("TLy2"),h=n("YtkY"),f=n("jIqt"),m=n("mWib"),g=n("8j5Y"),b=n("xVbo"),v=n("BwBJ"),_=n("Ohay"),y=n("7SLS"),O=n("3mST"),x=n("w1VY"),E=n("QoSw"),k=n("flPR"),C=n("SBw3"),w=n("0fSw"),S=n("IGWl"),I=n("PGgW"),T=n("X5Q9"),A=n("eIBf"),P=n("s9Xn"),M=function(e){function t(t,n,r,i,a,o,s){var c=e.call(this,i)||this;return c.injector=t,c.commandService=n,c.featureList=r,c.state=i,c.ll=a,c.toolbarManager=o,c.coordinate=s,c.modelChangeDebounce=100,c.subs=[],c}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this.toolbarManager.get("contextual-toolbar")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.listenToChanges().pipe(Object(p.a)((function(t){return e.getItemsForContextChange(t)})),Object(h.a)((function(t){return e.updateShowMethod(t)})),Object(p.a)((function(t){return e.handleContextChange(t)}))).subscribe(),this.toolbar.change.subscribe((function(t){return e.handleToolbarChange(t)})))},t.prototype.destroy=function(){this.toolbar&&this.toolbar.hide().subscribe(),this.subs.forEach((function(e){e.unsubscribe()}))},t.prototype.listenToChanges=function(){var e=this;return this.listenToContextChange().pipe(Object(p.a)((function(t){return e.isShowAction(t.action)?Object(c.a)(e.listenToModelChange(),e.listenToGroupChanges()).pipe(Object(f.a)(t),Object(m.a)(e.modelChangeDebounce)):Object(l.a)(t)})))},t.prototype.listenToContextChange=function(){var e=this;return this.duringSelection().pipe(Object(p.a)((function(t){var n;return"show"===t.action?Object(c.a)(e.duringSelectionInteraction({action:"quickshow"},{action:"quickhide"}).pipe(Object(g.a)((function(t){return n=!e.isShowAction(t.action)}))),e.duringTextEdit({action:"show"},{action:"hide"}).pipe(Object(g.a)((function(t){return n=!e.isShowAction(t.action)}))),e.duringPan({action:"quickshow"},{action:"quickhide"}).pipe(Object(b.a)((function(){return!n})))):Object(l.a)(t)})),Object(v.a)(1),Object(_.a)(s.isEqual))},t.prototype.listenToGroupChanges=function(){return this.locator.getDiagramChanges().pipe(Object(b.a)((function(e){return a.gb.hasChanges(e.modifier,"groups")})),Object(y.a)({action:"show"}))},t.prototype.checkSelectedShapesHasUnlocked=function(){var e=this;return this.state.changes("Selected").pipe(Object(_.a)(s.isEqual),Object(p.a)((function(t){return e.locator.getDiagramOnce().pipe(Object(h.a)((function(e){var n,i;try{for(var a=Object(r.k)(t),o=a.next();!o.done;o=a.next()){var s=o.value;if(!e.shapes[s].isLocked)return!0}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1})))})))},t.prototype.listenToModelChange=function(){var e=this,t=this.state.get("Selected").map((function(t){return e.locator.getShapeModel(t).pipe(Object(O.a)(1),Object(y.a)({action:"quickshow"}))}));return c.a.apply(void 0,Object(r.j)(t))},t.prototype.duringSelection=function(){return this.checkSelectedShapesHasUnlocked().pipe(Object(h.a)((function(e){return e?{action:"show"}:{action:"hide"}})))},t.prototype.getItemsForContextChange=function(e){return this.isShowAction(e.action)?this.getToolbarItems().pipe(Object(h.a)((function(t){return e.items=t,e}))):Object(l.a)(e)},t.prototype.handleContextChange=function(e){var t=this;switch(e.action){case"show":case"quickshow":return this.setToolbarItems(e.items).pipe(Object(p.a)((function(){return t.positionToolbar()})),Object(p.a)((function(){return t.toolbar.show()})));case"reshow":return this.setToolbarItems(e.items).pipe(Object(p.a)((function(){return t.toolbar.hide()})),Object(p.a)((function(){return t.positionToolbar()})),Object(p.a)((function(){return t.toolbar.show()})));case"hide":case"quickhide":return this.toolbar.hide()}return Object(l.a)({})},t.prototype.isShowAction=function(e){return"show"===e||"reshow"===e||"quickshow"===e},t.prototype.updateShowMethod=function(e){if(this.isShowAction(e.action)){if(!e.items||e.items&&0===e.items.length)return e.action="hide",e;"show"===e.action&&(e.action="reshow")}return e},t.prototype.setToolbarItems=function(e){var t=this,n=this.toolbar.itemIds,i=e?e.map((function(e){return e.featureId})):[],a=[];return n.filter((function(e){return-1===i.indexOf(e)})).forEach((function(e){t.toolbar.removeItem(e)})),n.filter((function(e){return i.indexOf(e)>-1})).forEach((function(n){var r=Object(s.find)(e,{featureId:n});a.push(t.updateToolbarItem(r))})),i.forEach((function(r,i){if(-1===n.indexOf(r)){var o=Object(s.find)(e,{featureId:r});a.push(t.addToolbarItem(o,i))}})),a.length>0?u.a.apply(void 0,Object(r.j)(a)):Object(l.a)({})},t.prototype.addToolbarItem=function(e,t){var n=this,r=this.featureList.getFeature(e.featureId),i=this.getUIControlType(r.dataType,e.visibility?e.visibility.level:null),a=e.visibility?e.visibility.level:null;return this.getItemDataAndProperties(r,e.data).pipe(Object(h.a)((function(r){var o=r.data,s=r.controlProps;n.toolbar.addItem(e.featureId,i,o,s,t,a)})))},t.prototype.updateToolbarItem=function(e){var t=this,n=this.featureList.getFeature(e.featureId);return this.getItemDataAndProperties(n,e.data).pipe(Object(h.a)((function(n){var r=n.data,i=n.controlProps;t.toolbar.updateItem(e.featureId,r,i)})))},t.prototype.positionToolbar=function(){var e=this;return this.locator.getDiagramOnce().pipe(Object(h.a)((function(t){var n=e.state.get("Selected"),r=t.getBounds(n),i=e.coordinate.x(r.x)+e.coordinate.width(r.width)/2,a=e.coordinate.y(r.y);a-=e.isPlusCreateAvailable(t,n)||e.checkTransformAngle(t,n)?90:75,e.toolbar.position({x:i,y:a},"bottomcenter")})))},t.prototype.handleToolbarChange=function(e){var t=this,n=this.featureList.getFeature(e.id);if(e.data&&(e.data.stateContext=this.stateContext),n.transformer){this.handleFeatureTrack(n,e.data);var r=this.injector.get(n.transformer),i=Object(a.Qb)((function(e){return t.commandService.dispatch(n.commandEvent,e)}));r.getApplyData(n.id,e.data).subscribe(i)}else{var o=a.s.mergeInstances({},this.getCommandData(e.id),e.data);this.commandService.dispatch(n.commandEvent,o)}},t.prototype.handleFeatureTrack=function(e,t){if(e.label&&t&&t.label){var n={value1:t.label.trim()?t.label:t.id};t.subLabel&&(n.value2=t.subLabel),a.Jb.track("canvas.toolbar."+e.id+".change",n)}},t.prototype.getCommandData=function(e){var t={},n=this.toolbar.getItem(e);return n&&n.data&&(n.data.dataItemId&&(t.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(t.alterFunction=n.data.alterFunction)),t},t.prototype.getToolbarItems=function(){var e=this,t=this.state.get("Selected");return t.length?(1===t.length?this.getToolbarItemsForSingleShape(t[0]):this.getToolbarItemsForMultiShape(t)).pipe(Object(h.a)((function(t){var n=e.state.get("InnerShapeSelection");return Object.keys(n).length>0?t.filter((function(e){return"openShapelinkEditor"!==e.featureId})):t})),Object(p.a)((function(t){var n;return n=t.map((function(t){return e.isFeatureEnabled(t.featureId)})),u.a.apply(void 0,Object(r.j)(n)).pipe(Object(h.a)((function(e){return t.filter((function(t,n){return e[n]}))})))}))):Object(l.a)([])},t.prototype.isFeatureEnabled=function(e){var t=this.featureList.getFeature(e);if(t.transformer){var n=this.injector.get(t.transformer);if(n.isEnabled)return n.isEnabled(t.id)}return Object(l.a)(!0)},t.prototype.getToolbarItemsForSingleShape=function(e){return this.locator.getDiagramOnce().pipe(Object(b.a)((function(t){return null!==t.shapes[e]})),Object(h.a)((function(t){return t.shapes[e].getContextualToolbarItems(t)})))},t.prototype.getToolbarItemsForMultiShape=function(e){return this.locator.getDiagramOnce().pipe(Object(h.a)((function(t){var n=Object(s.filter)(t.shapes,(function(t){return e.includes(t.id)}));if(t.sameType(e)){var i=n.map((function(e){return e.getContextualToolbarItemsForSameType()}));return s.intersectionBy.apply(void 0,Object(r.j)(i,["featureId"]))}i=n.map((function(e){return e.getContextualToolbarItemsForMultipleTypes()}));return s.intersectionBy.apply(void 0,Object(r.j)(i,["featureId"]))})))},t.prototype.getToolbarItemsForTextEdit=function(e){return Object(d.b)()},t.prototype.getItemDataAndProperties=function(e,t){var n=this.getUIControlProperties(e);if(e.transformer){var r=this.injector.get(e.transformer);return(r.transformProperties?r.transformProperties(e.id,n):Object(l.a)(n)).pipe(Object(p.a)((function(n){return r.getFeatureData(e.id,t).pipe(Object(h.a)((function(e){return{data:e,controlProps:n}})))})))}if(t){var i=a.s.mergeInstances({},e.data,t);return Object(l.a)({data:i,controlProps:n})}return Object(l.a)({data:e.data,controlProps:n})},t.prototype.getUIControlProperties=function(e){return{id:e.id,icon:e.icon,label:e.label,tooltip:e.tooltip,updateToolbarIcon:e.updateToolbarIcon}},t.prototype.getUIControlType=function(e,t){if(void 0===t&&(t="primary"),"secondary"===t)return A.a;if(!e||e===o.c.BINARY)return S.a;if(e===o.c.OPTION_IMAGES||e===o.c.OPTION_LIST)return I.a;if(e===o.c.CUSTOM_STYLE_PALETTES)return T.a;if(e===o.c.GRID_IMAGES)return P.a;throw new Error("A contextual toolbar UI control is not available for "+e)},t.prototype.createAddSource=function(){return Object(d.b)()},t.prototype.createRemoveSource=function(){return Object(d.b)()},t.prototype.createChangeSource=function(){return Object(d.b)()},t.prototype.isPlusCreateAvailable=function(e,t){return 1===t.length},t.prototype.checkTransformAngle=function(e,t){if(1===t.length&&!e.shapes[t[0]].isConnector()){var n=e.shapes[t[0]].transform.angle;if(n>85||n<-175)return!0}return!1},t.\u0275fac=function(e){return new(e||t)(i.qc(i.C),i.qc(a.B),i.qc(C.a),i.qc(a.Hb),i.qc(E.a),i.qc(w.a),i.qc(x.a))},t.\u0275prov=i.cc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(k.a)(),Object(r.g)("design:paramtypes",[i.C,a.B,C.a,a.Hb,E.a,w.a,x.a])],t)}(k.b);Object.defineProperty(M,"name",{value:"ContextualToolbarHandler"})},bL7E:function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));var r=n("D57K"),i=n("Xpu5"),a=n("G3/p"),o=n("5xGT"),s=n("NNJu"),c=n("X0jn"),l=n("nsO7"),u=n("C05f"),d=n("ROBh"),p=n("47ST"),h=n("HsO4"),f=n("YtkY"),m=n("wqq/"),g=n("J+dc"),b=n("8j5Y"),v=n("TLy2"),_=n("4e/d"),y=n("ruxD"),O=n("Fuvo"),x=(n("unyx"),n("qlkn")),E=n("Wwqo"),k=n("EM62"),C=n("s2Ay"),w=n("2kYt"),S=n("k/7B"),I=n("r7/9"),T=n("Wrqg"),A=n("xEGh"),P=n("pYIu"),M=n("XwbL"),D=n("uXwy"),j=n("crdX"),R=n("/ege"),L=["window"],N=["windowInner"],B=["mappingsSelector"],U=["mappingsContainer"];function F(e,t){1&e&&(k.mc(0,"span",3),k.fd(1,"GOOGLE_SHEET_IMPORT.HEADING.SUB_TITLE_ENTER_SHEET_ID"),k.lc())}function q(e,t){1&e&&(k.mc(0,"span",3),k.fd(1,"GOOGLE_SHEET_IMPORT.HEADING.SUB_TITLE_SELECT_FROM_DROPDOWN"),k.lc())}function W(e,t){1&e&&k.hc(0,"loading-bubbles",31)}var H=function(){return["Enter"]};function K(e,t){if(1&e){var n=k.nc();k.mc(0,"div",24),k.mc(1,"div",25),k.mc(2,"label",26),k.fd(3,"GOOGLE_SHEET_IMPORT.LABEL.SPREADSHEET_ID"),k.lc(),k.mc(4,"text-input",27,28),k.uc("updateText",(function(e){return k.Qc(n),k.yc().onSpreadsheetInputChanged(e)}))("submit",(function(e){return k.Qc(n),k.yc().fetchSpreadsheet(e)})),k.lc(),k.lc(),k.mc(6,"div"),k.mc(7,"button",29),k.uc("click",(function(){return k.Qc(n),k.yc().fetchSpreadsheet()})),k.fd(8,"LABELS.CONTINUE"),k.lc(),k.lc(),k.dd(9,W,1,0,"loading-bubbles",30),k.zc(10,"async"),k.lc()}if(2&e){var r=k.yc();k.Sb(4),k.Dc("showClearButton",!0)("submitOnCode",k.Hc(5,H)),k.Sb(5),k.Dc("ngIf",k.Ac(10,3,r.isLoading))}}function z(e,t){if(1&e&&k.hc(0,"sidebar-list-dropdown-item",37),2&e){var n=t.$implicit;k.Dc("item",n)}}var V=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}};function G(e,t){if(1&e){var n=k.nc();k.mc(0,"abs-dropdown",33,34),k.uc("changed",(function(e){return k.Qc(n),k.yc(2).onSheetSelected(e)})),k.hc(2,"sidebar-dropdown-button",35),k.dd(3,z,1,1,"sidebar-list-dropdown-item",36),k.lc()}if(2&e){var r=k.yc(2);k.Dc("settings",k.Hc(5,V))("autoPosition",!1),k.Sb(2),k.Dc("items",r.sheetOptions)("placeholderText","Select the sheet"),k.Sb(1),k.Dc("ngForOf",r.sheetOptions)}}function Y(e,t){1&e&&k.hc(0,"loading-bubbles",31)}function X(e,t){if(1&e){var n=k.nc();k.mc(0,"div",24),k.mc(1,"div",25),k.mc(2,"label",12),k.fd(3,"GOOGLE_SHEET_IMPORT.LABEL.SELECT_SHEET_PROCEED"),k.lc(),k.dd(4,G,4,6,"abs-dropdown",21),k.lc(),k.mc(5,"button",32),k.uc("click",(function(){return k.Qc(n),k.yc().proceedToMappings()})),k.zc(6,"async"),k.fd(7,"LABELS.CONTINUE"),k.lc(),k.dd(8,Y,1,0,"loading-bubbles",30),k.zc(9,"async"),k.lc()}if(2&e){var r=k.yc();k.Sb(4),k.Dc("ngIf",r.sheetOptions),k.Sb(1),k.Dc("disabled",k.Ac(6,3,r.isLoading)),k.Sb(3),k.Dc("ngIf",k.Ac(9,5,r.isLoading))}}function Q(e,t){1&e&&k.hc(0,"loading-bubbles",38)}function J(e,t){if(1&e){var n=k.nc();k.mc(0,"button",32),k.uc("click",(function(){return k.Qc(n),k.yc().authenticate()})),k.zc(1,"async"),k.fd(2,"LABELS.AUTHENTICATE "),k.lc()}if(2&e){var r=k.yc();k.Dc("disabled",k.Ac(1,1,r.isLoading))}}function $(e,t){if(1&e&&k.hc(0,"sidebar-list-dropdown-item",37),2&e){var n=t.$implicit;k.Dc("item",n)}}function Z(e,t){if(1&e){var n=k.nc();k.mc(0,"abs-dropdown",33,39),k.uc("changed",(function(e){return k.Qc(n),k.yc().onRowIdentifierChanged(e)})),k.hc(2,"sidebar-dropdown-button",35),k.dd(3,$,1,1,"sidebar-list-dropdown-item",36),k.lc()}if(2&e){var r=k.yc();k.Dc("settings",k.Hc(5,V))("autoPosition",!1),k.Sb(2),k.Dc("items",r.rowIdentifierOptions)("placeholderText","Select the field"),k.Sb(1),k.Dc("ngForOf",r.rowIdentifierOptions)}}function ee(e,t){if(1&e&&k.hc(0,"sidebar-list-dropdown-item",37),2&e){var n=t.$implicit;k.Dc("item",n)}}var te=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!1}};function ne(e,t){if(1&e){var n=k.nc();k.mc(0,"abs-dropdown",33,49),k.uc("changed",(function(e){k.Qc(n);var t=k.yc().index;return k.yc(2).onMappingChanged(t,e)})),k.hc(2,"sidebar-dropdown-button",50),k.dd(3,ee,1,1,"sidebar-list-dropdown-item",36),k.lc()}if(2&e){var r=t.ngIf;k.Dc("settings",k.Hc(4,te))("autoPosition",!1),k.Sb(2),k.Dc("items",r),k.Sb(1),k.Dc("ngForOf",r)}}function re(e,t){if(1&e&&(k.mc(0,"tr"),k.mc(1,"td",47),k.fd(2),k.lc(),k.mc(3,"td",47),k.fd(4),k.lc(),k.mc(5,"td",48),k.dd(6,ne,4,5,"abs-dropdown",21),k.zc(7,"async"),k.lc(),k.lc()),2&e){var n=t.$implicit,r=t.index,i=k.yc(2);k.Sb(2),k.gd(n),k.Sb(2),k.gd(i.sampleValues[r]),k.Sb(2),k.Dc("ngIf",k.Ac(7,3,i.getMappingOptions(r)))}}function ie(e,t){if(1&e&&(k.mc(0,"table",53),k.mc(1,"thead"),k.mc(2,"tr"),k.mc(3,"th",54),k.fd(4,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_ROW"),k.lc(),k.mc(5,"th",54),k.fd(6,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_CSV_FIELD"),k.lc(),k.mc(7,"th",54),k.fd(8,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_VALUE"),k.lc(),k.mc(9,"th",54),k.fd(10,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_PARSED_VALUE"),k.lc(),k.mc(11,"th",54),k.fd(12,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_ERROR"),k.lc(),k.lc(),k.lc(),k.mc(13,"tbody"),k.mc(14,"tr"),k.mc(15,"td"),k.fd(16),k.lc(),k.mc(17,"td"),k.fd(18),k.lc(),k.mc(19,"td"),k.fd(20),k.lc(),k.mc(21,"td"),k.fd(22),k.lc(),k.mc(23,"td"),k.fd(24),k.lc(),k.lc(),k.lc(),k.lc()),2&e){var n=t.ngLet,r=k.yc(3);k.Sb(16),k.gd(n[0].rowIndex+1),k.Sb(2),k.gd(r.csvFields[n[0].columnIndex]),k.Sb(2),k.gd(n[0].value),k.Sb(2),k.gd(r.displayParsedValue(n[0].parsedValue)),k.Sb(2),k.gd(n[0].error.message)}}function ae(e,t){if(1&e&&(k.mc(0,"div",51),k.mc(1,"span",12),k.fd(2," CSV_DATA_IMPORT.MAPPINGS_ERROR.MESSAGE "),k.lc(),k.dd(3,ie,25,5,"table",52),k.zc(4,"async"),k.lc()),2&e){var n=k.yc(2);k.Sb(3),k.Dc("ngLet",k.Ac(4,1,n.mappingErrors))}}function oe(e,t){if(1&e&&(k.mc(0,"div"),k.mc(1,"table",40),k.mc(2,"thead"),k.mc(3,"tr"),k.mc(4,"th",41),k.fd(5,"CSV_DATA_IMPORT.MAPPINGS.COLUMN"),k.lc(),k.mc(6,"th",41),k.fd(7,"CSV_DATA_IMPORT.MAPPINGS.SAMPLE_VALUE"),k.lc(),k.mc(8,"th",42),k.fd(9,"CSV_DATA_IMPORT.MAPPINGS.DATA_ITEM"),k.lc(),k.lc(),k.lc(),k.lc(),k.mc(10,"perfect-scrollbar",43,44),k.zc(12,"async"),k.mc(13,"table",15),k.mc(14,"tbody"),k.dd(15,re,8,5,"tr",45),k.lc(),k.lc(),k.lc(),k.dd(16,ae,5,3,"div",46),k.zc(17,"async"),k.lc()),2&e){var n=k.yc();k.Sb(10),k.Yb("has-errors",k.Ac(12,4,n.hasMappingErrors)),k.Sb(5),k.Dc("ngForOf",n.csvFields),k.Sb(1),k.Dc("ngIf",k.Ac(17,6,n.hasMappingErrors))}}function se(e,t){if(1&e){var n=k.nc();k.mc(0,"div",55),k.mc(1,"div",56),k.mc(2,"input",57),k.uc("click",(function(){k.Qc(n);var e=k.yc();return e.ignoreErrors.next(!e.ignoreErrors.value)})),k.zc(3,"async"),k.lc(),k.mc(4,"label"),k.fd(5,"Ignore Errors"),k.lc(),k.lc(),k.mc(6,"button",58),k.uc("click",(function(){return k.Qc(n),k.yc().importCSVData()})),k.zc(7,"async"),k.fd(8,"CSV_DATA_IMPORT.IMPORT_BUTTON"),k.lc(),k.lc()}if(2&e){var r=k.yc();k.Sb(2),k.Dc("checked",k.Ac(3,2,r.ignoreErrors)),k.Sb(4),k.Dc("disabled",!0!==k.Ac(7,4,r.canImport))}}var ce=function(e){function t(t,n,r,i,a,o){var s,l=e.call(this)||this;return l.modalController=t,l.dataImporter=n,l.translate=r,l.notifierController=i,l.cyclrSvc=a,l.commandSvc=o,l.selectedDb=new u.a(null),l.selectedEntityType=new u.a(null),l.csvFileSelected=new u.a(!1),l.ignoreErrors=new u.a(!1),l.importing=new u.a(!1),l.hasMappingErrors=new u.a(!1),l.mappingErrors=new u.a([]),l.canImport=new u.a(!1),l.isAuthenticated=new u.a(!1),l.isLoading=new u.a(!1),l.spreadsheetProvided=new u.a(!1),l.sheetSelected=new u.a(!1),l.subs=[],l.selectedMappings=[],l.authWaitTime=120,l.spreadsheetId="",l.dataTypes=((s={})[c.c.NUMBER]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.NUMBER.LABEL"),s[c.c.STRING]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.STRING.LABEL"),s[c.c.STRING_HTML]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.STRING_HTML.LABEL"),s[c.c.BINARY]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.CHECKBOX.LABEL"),s[c.c.OPTION_LIST]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.SINGLE_SELECT_COMBO.LABEL"),s[c.c.TAGS]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.TAGS.LABEL"),s[c.c.DATE]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.DATE.LABEL"),s),l.appendedDropdowns=[],l}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){var e=this;this.isLoading.next(!0),this.authenticated().subscribe((function(t){e.isAuthenticated.next(t),e.isLoading.next(!1)})),this.importingInto&&this.selectedDb.next(this.importingInto),this.dataItemOptions=this.selectedEntityType.pipe(Object(f.a)((function(t){if(t){var n=Object.values(t.dataItems);return[{id:"__IGNORE__",label:e.translate.instant("CSV_DATA_IMPORT.LABELS.IGNORE"),buttonLabel:e.translate.instant("CSV_DATA_IMPORT.LABELS.IGNORE"),selected:!0}].concat(n.filter((function(t){return e.dataTypes[t.type]&&(t.label||t.primaryTextBound)})).map((function(t){var n=t.primaryTextBound?e.translate.instant("CSV_DATA_IMPORT.LABELS.PRIMARY_TEXT"):t.label+" ("+e.dataTypes[t.type]+")";return{id:t.id,label:n,buttonLabel:n,selected:!1}})))}return[]})),Object(m.a)(1))},t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.selectedDb.subscribe((function(){return e.selectedEntityType.next(null)})),this.selectedEntityType.subscribe((function(){return e.selectedMappings.forEach((function(t,n){return e.selectedMappings[n]="__IGNORE__"}))})),this.listenToScroll(),this.listenToDropdownChildrenChanges())},t.prototype.onSheetSelected=function(e){var t=Number(e[0].slice(6)),n=this.availableSheets.findIndex((function(e){return e.sheetId===t}));this.selectedSheet=this.availableSheets[n],this.sheetOptions=this.sheetOptions.map((function(e,t){return Object(r.a)(Object(r.a)({},e),{selected:t===n})}))},t.prototype.onRowIdentifierChanged=function(e){var t=this;this.rowIdentifierField=e[0],this.rowIdentifierOptions=this.rowIdentifierOptions.map((function(e){return Object(r.a)(Object(r.a)({},e),{selected:e.id===t.rowIdentifierField})})),this.canImport.next(this.selectedMappings.filter((function(e){return"__IGNORE__"!==e})).length>0)},t.prototype.onMappingChanged=function(e,t){var n=Object(r.h)(t,1)[0];this.selectedMappings[e]=n,this.canImport.next(this.rowIdentifierField&&this.selectedMappings.filter((function(e){return"__IGNORE__"!==e})).length>0)},t.prototype.getMappingOptions=function(e){var t=this;return this.dataItemOptions.pipe(Object(f.a)((function(n){var i=t.selectedMappings[e];return n.map((function(e){return Object(r.a)(Object(r.a)({},e),{selected:e.id===i})}))})))},t.prototype.onSpreadsheetInputChanged=function(e){this.spreadsheetId=e},t.prototype.fetchSpreadsheet=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t,n;return Object(r.f)(this,(function(r){switch(r.label){case 0:return this.isLoading.next(!0),t=e||this.spreadsheetId,[4,this.cyclrSvc.fetchPost({dataSource:E.a.GoogleSheets,method:"listSpreadsheetSheets",params:{spreadsheetId:t}})];case 1:return n=r.sent(),this.isLoading.next(!1),Array.isArray(n)&&0!==n.length&&(1===n.length?(this.selectedSheet=n[0],this.proceedToMappings()):(this.availableSheets=n,this.sheetOptions=n.map((function(e){return{id:"sheet_"+e.sheetId,label:e.title,buttonLabel:e.title,selected:!1}})),this.spreadsheetProvided.next(!0))),[2]}}))}))},t.prototype.proceedToMappings=function(){return Object(r.c)(this,void 0,void 0,(function(){var e,t,n,i,a=this;return Object(r.f)(this,(function(r){switch(r.label){case 0:return this.selectedSheet?(this.isLoading.next(!0),e=this.selectedSheet.title,[4,this.cyclrSvc.fetchPost({dataSource:E.a.GoogleSheets,method:"listRows",params:{startRow:1,endRow:2,spreadsheetId:this.spreadsheetId,sheetName:e}})]):[2];case 1:return t=r.sent(),this.isLoading.next(!1),n=Object(l.omit)(t[0],["RowNumber"]),i=Object(l.omit)(t[1],["RowNumber"]),this.mappingKeys=Object(l.keys)(n),this.csvFields=this.mappingKeys.map((function(e){return n[e]})),this.sampleValues=this.mappingKeys.map((function(e){return i[e]})),this.selectedMappings=new Array(this.csvFields.length),this.selectedMappings.fill("__IGNORE__"),this.rowIdentifierOptions=this.csvFields.map((function(e,t){return{id:a.mappingKeys[t],label:e,buttonLabel:e,selected:!1}})),this.showSidebar.next(!1),this.sheetSelected.next(!0),[2]}}))}))},t.prototype.importCSVData=function(){var e=this;try{var t=this.ignoreErrors.value,n={mappings:[],eDefId:this.selectedEntityType.value.id,ignoreMappingErrors:t,spreadsheetId:this.spreadsheetId,sheet:this.selectedSheet,rowIdentifierField:this.rowIdentifierField};this.selectedMappings.forEach((function(t,r){"__IGNORE__"!==t&&n.mappings.push({columnIndex:e.mappingKeys[r],dataItemId:t})})),this.importing.next(!0),this.hasMappingErrors.next(!1),this.selectedDb.pipe(Object(g.a)(1),Object(b.a)((function(){return e.canImport.next(!1)})),Object(v.a)((function(t){return e.dataImporter.importData(t,n)})),Object(_.a)((function(e){return e instanceof O.a?Object(d.a)({entities:[],errors:e.errors}):Object(p.a)(e)})),Object(b.a)((function(a){var o=a.entities,s=a.errors;if(e.importing.next(!1),0===s.length||t&&o.length>0){e.showImportSuccessNotification(o.length),s.length>0&&e.showImportErrorsNotification();var c=n.spreadsheetId,l=Object(r.i)(n,["spreadsheetId"]);e.commandSvc.dispatch(i.a.updateDataSourceMappings,e.selectedDb.value.id,{dataSource:{domain:E.a.GoogleSheets,id:c},mappingConfig:l}).pipe(Object(y.a)((function(){return e.closeWindow.next(!0)}))).subscribe()}else e.hasMappingErrors.next(!0),e.mappingErrors.next(s)}))).subscribe()}catch(a){}},t.prototype.displayParsedValue=function(e){return void 0===e?"undefined":Number.isNaN(e)||e instanceof Date?e.toString():JSON.stringify(e)},t.prototype.authenticate=function(){var e=this;this.isLoading.next(!0),this.cyclrSvc.authenticate(E.a.GoogleSheets,this.authWaitTime).subscribe((function(t){"done"===t&&(e.isAuthenticated.next(!0),e.isLoading.next(!1))}),(function(){e.isAuthenticated.next(!1),e.isLoading.next(!1)}))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.authenticated=function(){var e=this.cyclrSvc.isAuthenticated(E.a.GoogleSheets);return Object(h.a)(e)},t.prototype.showImportSuccessNotification=function(e){var t={inputs:{description:this.translate.instant("CSV_DATA_IMPORT.NOTIFICATION.SUCCESS",{rowCount:e}),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("CSV_DATA_IMPORT",o.i,o.ib.Success,t)},t.prototype.showImportErrorsNotification=function(){var e={inputs:{description:this.translate.instant("CSV_DATA_IMPORT.NOTIFICATION.ERROR"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("CSV_DATA_IMPORT_ERROR",o.i,o.ib.Warning,e)},t.prototype.appendMappingsSelectorToBody=function(e){var t=this;e.dropdownContainer.addEventListener("click",(function(){t.removeAppendedDropdowns();var n=window.document.createElement("div");n.append(e.innerContainer),n.style.position="absolute";var r=n.getElementsByTagName("ul").item(0);r.style.width=e.dropdownContainer.offsetWidth+"px",r.style.maxWidth=e.dropdownContainer.offsetWidth+"px",t.appendedDropdowns.push(n),window.document.body.append(n);var i=function(e){var t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}}(e.dropdownContainer),a=i.top,o=i.left,s=t.perfectScroll.first.directiveRef.position(!0).y,c=0;"start"!==s&&"end"!==s&&(c=s),n.getBoundingClientRect().bottom>window.innerHeight?n.style.bottom=e.dropdownContainer.offsetHeight-35+c+"px":n.style.top=a+33-c+"px",n.style.left=o+"px"}))},t.prototype.removeAppendedDropdowns=function(){this.appendedDropdowns.forEach((function(e){e.remove()})),this.appendedDropdowns=[]},t.prototype.listenToScroll=function(){var e=this;return this.perfectScroll.changes.subscribe((function(){e.perfectScroll.first.psScrollY.pipe(Object(b.a)((function(t){e.removeAppendedDropdowns()}))).subscribe()}))},t.prototype.listenToDropdownChildrenChanges=function(){var e=this;return this.mappingsSelector.changes.pipe(Object(b.a)((function(){e.mappingsSelector.map((function(t){e.appendMappingsSelectorToBody(t)}))}))).subscribe()},t.\u0275fac=function(e){return new(e||t)(k.gc(o.fb),k.gc(a.a),k.gc(C.e),k.gc(o.jb),k.gc(x.a),k.gc(o.B))},t.\u0275cmp=k.ac({type:t,selectors:[["google-sheets-data-import-window"]],viewQuery:function(e,t){var n;(1&e&&(k.kd(L,!0),k.kd(N,!0),k.kd(B,!0,s.b),k.kd(U,!0)),2&e)&&(k.Mc(n=k.vc())&&(t.container=n.first),k.Mc(n=k.vc())&&(t.containerInner=n.first),k.Mc(n=k.vc())&&(t.mappingsSelector=n),k.Mc(n=k.vc())&&(t.perfectScroll=n))},inputs:{importingInto:"importingInto",showSidebar:"showSidebar",closeWindow:"closeWindow"},features:[k.Pb],decls:77,vars:68,consts:[[1,"google-sheets-data-import-panel"],[1,"container-heading","fx-margin-bottom-20"],["translate","",1,"nu2-heading-5","fx-margin-bottom-15"],["translate","",1,"nu2-body-small"],["class","nu2-body-small","translate","",4,"ngIf"],[1,"vertical-container"],["class","vertical-container-right-align",4,"ngIf"],[1,"info-container"],[1,"info-heading"],["translate","",1,"nu2-heading-6"],["src","./assets/images/data-import/data-source.svg"],[1,"nu2-body-small"],["translate",""],["class","fx-center fx-margin-bottom-10","color","xmedium-grey",4,"ngIf"],["class","auth-btn btn-small btn-primary fx-span-width fx-no-padding fx-no-margin","translate","",3,"disabled","click",4,"ngIf"],[2,"width","100%"],[2,"width","60%"],["translate","",1,"grey"],[2,"width","40%"],[3,"selectedDb","placeholderText","dbChanged"],[3,"selectedDb","selectedType","placeholderText","typeChanged"],["class","dropdown-item",3,"settings","autoPosition","changed",4,"ngIf"],[4,"ngIf"],["class","modal-window-footer fx-margin-top-20",4,"ngIf"],[1,"vertical-container-right-align"],[1,"container-space-between"],["translate","",1,"nu2-caption-large-regular"],["testId","google-spreadsheet-input","placeholder","Paste the Spreadsheet ID",3,"showClearButton","submitOnCode","updateText","submit"],["textInput",""],["translate","",1,"auth-btn","btn-small","btn-primary","fx-span-width","fx-no-padding","fx-no-margin",3,"click"],["class","fx-center fx-margin-top-20 fx-margin-bottom-10","color","xmedium-grey",4,"ngIf"],["color","xmedium-grey",1,"fx-center","fx-margin-top-20","fx-margin-bottom-10"],["translate","",1,"auth-btn","btn-small","btn-primary","fx-span-width","fx-no-padding","fx-no-margin",3,"disabled","click"],[1,"dropdown-item",3,"settings","autoPosition","changed"],["sheetSelector",""],["ddbutton","",3,"items","placeholderText"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"],["color","xmedium-grey",1,"fx-center","fx-margin-bottom-10"],["rowIdentifier",""],[1,"fx-margin-bottom-10",2,"width","100%","margin-top","20px"],["align","left","translate","",2,"width","30%"],["align","left","translate","",2,"width","40%"],[1,"mappings-container"],["mappingsContainer",""],[4,"ngFor","ngForOf"],["style","margin-top: 10px",4,"ngIf"],["align","left",2,"width","30%"],["align","left",2,"width","40%"],["mappingsSelector",""],["ddbutton","",3,"items"],[2,"margin-top","10px"],["style","width: 100%; margin-top: 10px;",4,"ngLet"],[2,"width","100%","margin-top","10px"],["align","left","translate",""],[1,"modal-window-footer","fx-margin-top-20"],[1,"container-align-middle"],["type","checkbox",2,"margin","5px 10px",3,"checked","click"],["translate","",1,"btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(k.mc(0,"div",0),k.mc(1,"div",1),k.zc(2,"async"),k.mc(3,"h1",2),k.fd(4,"GOOGLE_SHEET_IMPORT.HEADING.TITLE"),k.lc(),k.mc(5,"span",3),k.zc(6,"async"),k.fd(7,"GOOGLE_SHEET_IMPORT.HEADING.SUB_TITLE"),k.lc(),k.mc(8,"div"),k.zc(9,"async"),k.dd(10,F,2,0,"span",4),k.zc(11,"async"),k.dd(12,q,2,0,"span",4),k.zc(13,"async"),k.lc(),k.lc(),k.mc(14,"div"),k.zc(15,"async"),k.mc(16,"div",5),k.zc(17,"async"),k.dd(18,K,11,6,"div",6),k.zc(19,"async"),k.dd(20,X,10,7,"div",6),k.zc(21,"async"),k.lc(),k.mc(22,"div",5),k.zc(23,"async"),k.mc(24,"div",7),k.mc(25,"div",8),k.mc(26,"h1",9),k.fd(27,"GOOGLE_SHEET_IMPORT.INFO.TITLE"),k.lc(),k.hc(28,"img",10),k.lc(),k.mc(29,"ul",11),k.mc(30,"li"),k.mc(31,"span",12),k.fd(32,"GOOGLE_SHEET_IMPORT.INFO.LIST_ITEM_1"),k.lc(),k.lc(),k.mc(33,"li"),k.mc(34,"span",12),k.fd(35,"GOOGLE_SHEET_IMPORT.INFO.LIST_ITEM_2"),k.lc(),k.lc(),k.mc(36,"li"),k.mc(37,"span",12),k.fd(38,"GOOGLE_SHEET_IMPORT.INFO.LIST_ITEM_3"),k.lc(),k.lc(),k.mc(39,"li"),k.mc(40,"span",12),k.fd(41,"GOOGLE_SHEET_IMPORT.INFO.LIST_ITEM_4"),k.lc(),k.lc(),k.lc(),k.lc(),k.dd(42,Q,1,0,"loading-bubbles",13),k.zc(43,"async"),k.dd(44,J,3,3,"button",14),k.zc(45,"async"),k.lc(),k.lc(),k.mc(46,"div"),k.zc(47,"async"),k.mc(48,"table",15),k.mc(49,"tbody"),k.mc(50,"tr"),k.mc(51,"td",16),k.mc(52,"label",17),k.fd(53,"CSV_DATA_IMPORT.SELECT_DATABASE"),k.lc(),k.lc(),k.mc(54,"td",18),k.mc(55,"custom-database-selector",19),k.uc("dbChanged",(function(e){return t.selectedDb.next(e)})),k.zc(56,"async"),k.zc(57,"translate"),k.lc(),k.lc(),k.lc(),k.mc(58,"tr"),k.mc(59,"td"),k.mc(60,"label",17),k.fd(61,"CSV_DATA_IMPORT.SELECT_ENTITY_TYPE"),k.lc(),k.lc(),k.mc(62,"td"),k.mc(63,"entity-type-selector",20),k.uc("typeChanged",(function(e){return t.selectedEntityType.next(e)})),k.zc(64,"async"),k.zc(65,"async"),k.zc(66,"translate"),k.lc(),k.lc(),k.lc(),k.mc(67,"tr"),k.mc(68,"td"),k.mc(69,"label",17),k.fd(70,"GOOGLE_SHEET_IMPORT.LABEL.SELECT_ROW_IDENTIFIER"),k.lc(),k.lc(),k.mc(71,"td"),k.dd(72,Z,4,6,"abs-dropdown",21),k.lc(),k.lc(),k.lc(),k.lc(),k.dd(73,oe,18,8,"div",22),k.zc(74,"async"),k.lc(),k.dd(75,se,9,6,"div",23),k.zc(76,"async"),k.lc()),2&e&&(k.Sb(1),k.Yb("fx-hidden",k.Ac(2,28,t.sheetSelected)),k.Sb(4),k.Yb("fx-hidden",k.Ac(6,30,t.isAuthenticated)),k.Sb(3),k.Yb("fx-hidden",0==k.Ac(9,32,t.isAuthenticated)),k.Sb(2),k.Dc("ngIf",0==k.Ac(11,34,t.spreadsheetProvided)),k.Sb(2),k.Dc("ngIf",k.Ac(13,36,t.spreadsheetProvided)),k.Sb(2),k.Yb("fx-hidden",k.Ac(15,38,t.sheetSelected)),k.Sb(2),k.Yb("fx-hidden",0==k.Ac(17,40,t.isAuthenticated)),k.Sb(2),k.Dc("ngIf",0==k.Ac(19,42,t.spreadsheetProvided)),k.Sb(2),k.Dc("ngIf",k.Ac(21,44,t.spreadsheetProvided)),k.Sb(2),k.Yb("fx-hidden",k.Ac(23,46,t.isAuthenticated)),k.Sb(20),k.Dc("ngIf",k.Ac(43,48,t.isLoading)),k.Sb(2),k.Dc("ngIf",!k.Ac(45,50,t.isLoading)),k.Sb(2),k.Yb("fx-hidden",0==k.Ac(47,52,t.sheetSelected)),k.Sb(9),k.Dc("selectedDb",k.Ac(56,54,t.selectedDb))("placeholderText",k.Ac(57,56,"SHAPE_DATA.DATA_ITEMS.ENTITY_LOOKUP.DB_PLACEHOLDER")),k.Sb(8),k.Dc("selectedDb",k.Ac(64,58,t.selectedDb))("selectedType",k.Ac(65,60,t.selectedEntityType))("placeholderText",k.Ac(66,62,"SHAPE_DATA.DATA_ITEMS.ENTITY_LOOKUP.TYPE_PLACEHOLDER")),k.Sb(9),k.Dc("ngIf",t.rowIdentifierOptions),k.Sb(1),k.Dc("ngIf",k.Ac(74,64,t.selectedEntityType)),k.Sb(2),k.Dc("ngIf",k.Ac(76,66,t.selectedEntityType)))},directives:[C.a,w.t,S.a,I.a,T.a,A.a,P.a,M.a,w.s,D.a,j.b,R.a],pipes:[w.b,C.d],styles:[".modal-window-inner[_ngcontent-%COMP%]{padding:0;width:600px;min-height:600px}  .modal-window-content{padding-left:1.25rem;padding-right:1.25rem;height:calc(100% - 110px)}  .modal-window-content button.btn-secondary{padding:.375rem .625rem}  .mappings-container{height:320px}  .mappings-container.has-errors{height:250px}.modal-window-heading[_ngcontent-%COMP%]{padding-top:1.75rem}.modal-window-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.vertical-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;height:100%;align-content:center;flex-direction:column;align-items:center}.vertical-container[_ngcontent-%COMP%]   .auth-btn[_ngcontent-%COMP%]{width:148px}.horizontal-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.modal-window-footer[_ngcontent-%COMP%]{padding:0 0 .625rem;display:flex;justify-content:space-between;align-items:center;align-content:center}.modal-window-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{padding:.375rem .625rem}.modal-window-inner[_ngcontent-%COMP%]  .abs-dropdown-inner, .modal-window-inner[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:100%;max-width:100%}.info-container[_ngcontent-%COMP%]{padding:1.25rem;margin-bottom:.5rem;background:linear-gradient(0deg,rgba(12,94,150,.05),rgba(12,94,150,.05)),hsla(0,0%,100%,.65);width:100%;margin-top:-12px}.info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:.625rem;list-style-position:outside}.info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.container-space-between[_ngcontent-%COMP%]{padding-bottom:1.5rem;display:flex;flex-direction:row;align-content:center;justify-content:space-between;align-items:center;width:100%}.container-space-between[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:1rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;white-space:nowrap}.container-space-between[_ngcontent-%COMP%]   text-input[_ngcontent-%COMP%]{width:100%}.container-space-between[_ngcontent-%COMP%]   abs-dropdown[_ngcontent-%COMP%]{min-width:260px}.container-align-middle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center;align-items:center}.vertical-container-right-align[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-content:flex-end;align-items:flex-end}.info-heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),t}(o.mb)},cs9O:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("X0jn"),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(n!==i.t.Basic&&n!==i.t.Dynamic&&n!==i.t.Image&&n!==i.t.Freehand&&n!==i.t.EData)throw new Error("ShapeDisplayView cannot be created with "+n+" shape type.");return r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"isShapeView",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnectorView",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getCursor=function(e){return{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t}(n("deqJ").a)},"d+30":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default},dFmy:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("19Zn"),i=n("YtkY"),a=n("xVbo"),o=n("J+dc"),s=n("SBw3"),c=n("5xGT"),l=n("ROBh"),u=n("QoSw"),d=n("EM62"),p=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n,this.toogleableStyles=["bold","italic","underline","strikeout","align"],this.sanSerifFonts=["arial","helvetica","sans-serif"],this.serifFonts=["Times New Roman","Courier New","Courier","Georgia","serif"],this.textFormatter=new r.G}return e.prototype.getFeatureData=function(e,t){var n=this,r=this.featureList.getFeature(e),a=this.state.get("Selected"),o=this.state.get("InnerShapeSelection");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(i.a)((function(e){var i=e.getCommonTextStyles(a,o),s=n.getUIData(r.data,t,i);return s.validation=r.data.validation,s.readOnly=r.data.readOnly,s})))},e.prototype.getApplyData=function(e,t){var n=this.featureList.getFeature(e),r={};this.toogleableStyles.includes(n.data.style)?r[n.data.style]=n.data.value:r[n.data.style]=t.value;var s={format:{"*":{indexStart:0,styles:r}}};return this.state.get("EditingText").open?this.state.changes("EditingText").pipe(Object(a.a)((function(e){return!e.open})),Object(o.a)(1),Object(i.a)((function(){return s}))):Object(l.a)(s)},e.prototype.getUIData=function(e,t,n){if("align"===e.style)t.value=n.align===e.value;else if("font"===e.style){var r=n[e.style];this.sanSerifFonts.includes(r)?r="sans_serif":this.serifFonts.includes(r)&&(r="serif"),t=this.updateOptionData(t,r)}else t=this.updateOptionData(t,n[e.style])||{value:n[e.style]};return t},e.prototype.updateOptionData=function(e,t){if(e&&e.data){var n=e.data;n.forEach((function(e){return e.selected=!1}));var r=n.find((function(e){return""+e.id==""+t}));if(r||void 0===t)r&&(r.selected=!0);else{var i=n.find((function(e){return e.custom}));i?(i.id=t,i.label=t,i.buttonLabel=t,i.value=t,i.selected=!0):n.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}return{value:n}}},e.\u0275fac=function(t){return new(t||e)(d.qc(u.a),d.qc(c.Hb),d.qc(s.a))},e.\u0275prov=d.cc({token:e,factory:e.\u0275fac}),e}()},dnLt:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("XVEb"),a=n("0KrK"),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new o.default("Must pass iterator to #each");var n,r=t.fn,a=t.inverse,s=0,c="",l=void 0,u=void 0;function d(t,n,a){l&&(l.key=t,l.index=n,l.first=0===n,l.last=!!a,u&&(l.contextPath=u+t)),c+=r(e[t],{data:l,blockParams:i.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(l=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var p=e.length;s<p;s++)s in e&&d(s,s,s===e.length-1);else if(global.Symbol&&e[global.Symbol.iterator]){for(var h=[],f=e[global.Symbol.iterator](),m=f.next();!m.done;m=f.next())h.push(m.value);for(p=(e=h).length;s<p;s++)d(s,s,s===e.length-1)}else n=void 0,Object.keys(e).forEach((function(e){void 0!==n&&d(n,s-1),n=e,s++})),void 0!==n&&d(n,s-1,!0);return 0===s&&(c=a(this)),c}))},e.exports=t.default},eIBf:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("C05f"),a=n("IGWl"),o=n("EM62"),s=n("2kYt"),c=n("g5Ym");function l(e,t){if(1&e&&(o.xc(),o.mc(0,"svg",7),o.hc(1,"use"),o.lc()),2&e){var n=o.yc().ngIf;o.Sb(1),o.Tb("href",n,null,"xlink")}}function u(e,t){if(1&e&&o.hc(0,"static-image",8),2&e){var n=o.yc().ngIf;o.Dc("enableHover",!0)("value",n)("width",70)("height",20)}}function d(e,t){if(1&e&&(o.mc(0,"button",3,4),o.dd(2,l,2,1,"svg",5),o.dd(3,u,1,4,"static-image",6),o.lc()),2&e){var n=t.ngIf;o.Sb(2),o.Dc("ngIf",n),o.Sb(1),o.Dc("ngIf",n)}}function p(e,t){if(1&e&&(o.mc(0,"span",9),o.fd(1),o.zc(2,"async"),o.lc()),2&e){var n=o.yc();o.Sb(1),o.hd(" ",o.Ac(2,1,n.labelSource)," ")}}var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelSource=new i.a(""),t}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this._props?this._props.label:null},enumerable:!1,configurable:!0}),t.prototype.apply=function(){e.prototype.apply.call(this),this._props.label&&this.labelSource.next(this._props.label)},t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=o.ac({type:t,selectors:[["rich-button"]],features:[o.Pb],decls:4,vars:4,consts:[[1,"rich-button-container","btn-list-item","btn-free-size",3,"click"],["class","nu-btn-icon",4,"ngIf"],["class","toolbar-dd-item-label body",4,"ngIf"],[1,"nu-btn-icon"],["btn",""],["class","nu-icon nu-ic-text",4,"ngIf"],["type","svg",3,"enableHover","value","width","height",4,"ngIf"],[1,"nu-icon","nu-ic-text"],["type","svg",3,"enableHover","value","width","height"],[1,"toolbar-dd-item-label","body"]],template:function(e,t){1&e&&(o.mc(0,"div",0),o.uc("click",(function(){return t._change.next(t._data)})),o.dd(1,d,4,2,"button",1),o.zc(2,"async"),o.dd(3,p,3,3,"span",2),o.lc()),2&e&&(o.Sb(1),o.Dc("ngIf",o.Ac(2,2,t.iconSource)),o.Sb(2),o.Dc("ngIf",t.label))},directives:[s.t,c.a],pipes:[s.b],styles:[""],changeDetection:0}),t}(a.a),f=o.oc(h)},eJth:function(e,t,n){e.exports=n.p+"0.b5bc5e601a47c1aded1d.worker.js"},eQvJ:function(e,t,n){var r=n("1NHC"),i=n("a+rc"),a=n("/J21"),o=n("sfKy"),s=n("39iF"),c=n("oFOz"),l=n("j0Im");t.AVEDEV=function(){var e=o.flatten(arguments),t=e.filter(o.isDefined);if(0===t.length)return c.num;var n=o.parseNumberArray(t);return n instanceof Error?n:a.sum(a(n).subtract(a.mean(n)).abs()[0])/n.length},t.AVERAGE=function(){var e=o.flatten(arguments),t=e.filter(o.isDefined);if(0===t.length)return c.div0;var n=o.anyError.apply(void 0,t);if(n)return n;for(var r,i=o.numbers(t),a=i.length,s=0,l=0,u=0;u<a;u++)s+=i[u],l+=1;return r=s/l,isNaN(r)&&(r=c.num),r},t.AVERAGEA=function(){var e=o.flatten(arguments),t=e.filter(o.isDefined);if(0===t.length)return c.div0;var n=o.anyError.apply(void 0,t);if(n)return n;for(var r,i=t,a=i.length,s=0,l=0,u=0;u<a;u++){var d=i[u];"number"==typeof d&&(s+=d),!0===d&&s++,null!==d&&l++}return r=s/l,isNaN(r)&&(r=c.num),r},t.AVERAGEIF=function(e,t,n){if(arguments.length<=1)return c.na;n=n||e;var r=o.flatten(n),i=r.filter(o.isDefined);if(n=o.parseNumberArray(i),e=o.flatten(e),n instanceof Error)return n;for(var a=0,l=0,u=void 0===t||"*"===t,d=u?null:s.parse(t+""),p=0;p<e.length;p++){var h=e[p];if(u)l+=n[p],a++;else{var f=[s.createToken(h,s.TOKEN_TYPE_LITERAL)].concat(d);s.compute(f)&&(l+=n[p],a++)}}return l/a},t.AVERAGEIFS=function(){for(var e=o.argsToArray(arguments),t=(e.length-1)/2,n=o.flatten(e[0]),r=0,i=0,a=0;a<n.length;a++){for(var c=!1,l=0;l<t;l++){var u=e[2*l+1][a],d=e[2*l+2],p=void 0===d||"*"===d,h=!1;if(p)h=!0;else{var f=s.parse(d+""),m=[s.createToken(u,s.TOKEN_TYPE_LITERAL)].concat(f);h=s.compute(m)}if(!h){c=!1;break}c=!0}c&&(i+=n[a],r++)}var g=i/r;return isNaN(g)?0:g},t.BETA={},t.BETA.DIST=function(e,t,n,r,i,s){return arguments.length<4?c.value:(i=void 0===i?0:i,s=void 0===s?1:s,e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),i=o.parseNumber(i),s=o.parseNumber(s),o.anyIsError(e,t,n,i,s)?c.value:(e=(e-i)/(s-i),r?a.beta.cdf(e,t,n):a.beta.pdf(e,t,n)))},t.BETA.INV=function(e,t,n,r,i){return r=void 0===r?0:r,i=void 0===i?1:i,e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),r=o.parseNumber(r),i=o.parseNumber(i),o.anyIsError(e,t,n,r,i)?c.value:a.beta.inv(e,t,n)*(i-r)+r},t.BINOM={},t.BINOM.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),r=o.parseNumber(r),o.anyIsError(e,t,n,r)?c.value:r?a.binomial.cdf(e,t,n):a.binomial.pdf(e,t,n)},t.BINOM.DIST.RANGE=function(e,t,n,i){if(i=void 0===i?n:i,e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),i=o.parseNumber(i),o.anyIsError(e,t,n,i))return c.value;for(var a=0,s=n;s<=i;s++)a+=r.COMBIN(e,s)*Math.pow(t,s)*Math.pow(1-t,e-s);return a},t.BINOM.INV=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n))return c.value;for(var r=0;r<=e;){if(a.binomial.cdf(r,e,t)>=n)return r;r++}},t.CHISQ={},t.CHISQ.DIST=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:n?a.chisquare.cdf(e,t):a.chisquare.pdf(e,t)},t.CHISQ.DIST.RT=function(e,t){return!e|!t?c.na:e<1||t>Math.pow(10,10)?c.num:"number"!=typeof e||"number"!=typeof t?c.value:1-a.chisquare.cdf(e,t)},t.CHISQ.INV=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:a.chisquare.inv(e,t)},t.CHISQ.INV.RT=function(e,t){return!e|!t?c.na:e<0||e>1||t<1||t>Math.pow(10,10)?c.num:"number"!=typeof e||"number"!=typeof t?c.value:a.chisquare.inv(1-e,t)},t.CHISQ.TEST=function(e,t){if(2!==arguments.length)return c.na;if(!(e instanceof Array&&t instanceof Array))return c.value;if(e.length!==t.length)return c.value;if(e[0]&&t[0]&&e[0].length!==t[0].length)return c.value;var n,r,i,a=e.length;for(r=0;r<a;r++)e[r]instanceof Array||(n=e[r],e[r]=[],e[r].push(n)),t[r]instanceof Array||(n=t[r],t[r]=[],t[r].push(n));var o=e[0].length,s=1===o?a-1:(a-1)*(o-1),l=0,u=Math.PI;for(r=0;r<a;r++)for(i=0;i<o;i++)l+=Math.pow(e[r][i]-t[r][i],2)/t[r][i];function d(e,t){var n=Math.exp(-.5*e);t%2==1&&(n*=Math.sqrt(2*e/u));for(var r=t;r>=2;)n=n*e/r,r-=2;for(var i=n,a=t;i>1e-10*n;)n+=i=i*e/(a+=2);return 1-n}return Math.round(1e6*d(l,s))/1e6},t.COLUMN=function(e,t){return 2!==arguments.length?c.na:t<0?c.num:e instanceof Array&&"number"==typeof t?0!==e.length?a.col(e,t):void 0:c.value},t.COLUMNS=function(e){return 1!==arguments.length?c.na:e instanceof Array?0===e.length?0:a.cols(e):c.value},t.CONFIDENCE={},t.CONFIDENCE.NORM=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:a.normalci(1,e,t,n)[1]-1},t.CONFIDENCE.T=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:a.tci(1,e,t,n)[1]-1},t.CORREL=function(e,t){return e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t)?c.value:a.corrcoeff(e,t)},t.COUNT=function(){var e=o.flatten(arguments);return o.numbers(e).length},t.COUNTA=function(){var e=o.flatten(arguments);return e.length-t.COUNTBLANK(e)},t.COUNTIN=function(e,t){var n=0;e=o.flatten(e);for(var r=0;r<e.length;r++)e[r]===t&&n++;return n},t.COUNTBLANK=function(){for(var e,t=o.flatten(arguments),n=0,r=0;r<t.length;r++)null!=(e=t[r])&&""!==e||n++;return n},t.COUNTIF=function(e,t){if(e=o.flatten(e),void 0===t||"*"===t)return e.length;for(var n=0,r=s.parse(t+""),i=0;i<e.length;i++){var a=e[i],c=[s.createToken(a,s.TOKEN_TYPE_LITERAL)].concat(r);s.compute(c)&&n++}return n},t.COUNTIFS=function(){for(var e=o.argsToArray(arguments),t=new Array(o.flatten(e[0]).length),n=0;n<t.length;n++)t[n]=!0;for(n=0;n<e.length;n+=2){var r=o.flatten(e[n]),i=e[n+1],a=void 0===i||"*"===i;if(!a)for(var c=s.parse(i+""),l=0;l<r.length;l++){var u=r[l],d=[s.createToken(u,s.TOKEN_TYPE_LITERAL)].concat(c);t[l]=t[l]&&s.compute(d)}}var p=0;for(n=0;n<t.length;n++)t[n]&&p++;return p},t.COUNTUNIQUE=function(){return l.UNIQUE.apply(null,o.flatten(arguments)).length},t.COVARIANCE={},t.COVARIANCE.P=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=a.mean(e),r=a.mean(t),i=0,s=e.length,l=0;l<s;l++)i+=(e[l]-n)*(t[l]-r);return i/s},t.COVARIANCE.S=function(e,t){return e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t)?c.value:a.covariance(e,t)},t.DEVSQ=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=a.mean(e),n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},t.EXPON={},t.EXPON.DIST=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:n?a.exponential.cdf(e,t):a.exponential.pdf(e,t)},t.F={},t.F.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:r?a.centralF.cdf(e,t,n):a.centralF.pdf(e,t,n)},t.F.DIST.RT=function(e,t,n){return 3!==arguments.length?c.na:e<0||t<1||n<1?c.num:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?c.value:1-a.centralF.cdf(e,t,n)},t.F.INV=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:e<=0||e>1?c.num:a.centralF.inv(e,t,n)},t.F.INV.RT=function(e,t,n){return 3!==arguments.length?c.na:e<0||e>1||t<1||t>Math.pow(10,10)||n<1||n>Math.pow(10,10)?c.num:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?c.value:a.centralF.inv(1-e,t,n)},t.F.TEST=function(e,t){if(!e||!t)return c.na;if(!(e instanceof Array&&t instanceof Array))return c.na;if(e.length<2||t.length<2)return c.div0;var n=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},i=r.SUM(e)/e.length,a=r.SUM(t)/t.length;return n(e,i)/(e.length-1)/(n(t,a)/(t.length-1))},t.FISHER=function(e){return(e=o.parseNumber(e))instanceof Error?e:Math.log((1+e)/(1-e))/2},t.FISHERINV=function(e){if((e=o.parseNumber(e))instanceof Error)return e;var t=Math.exp(2*e);return(t-1)/(t+1)},t.FORECAST=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumberArray(o.flatten(t)),n=o.parseNumberArray(o.flatten(n)),o.anyIsError(e,t,n))return c.value;for(var r=a.mean(n),i=a.mean(t),s=n.length,l=0,u=0,d=0;d<s;d++)l+=(n[d]-r)*(t[d]-i),u+=Math.pow(n[d]-r,2);var p=l/u;return i-p*r+p*e},t.FREQUENCY=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=e.length,r=t.length,i=[],a=0;a<=r;a++){i[a]=0;for(var s=0;s<n;s++)0===a?e[s]<=t[0]&&(i[0]+=1):a<r?e[s]>t[a-1]&&e[s]<=t[a]&&(i[a]+=1):a===r&&e[s]>t[r-1]&&(i[r]+=1)}return i},t.GAMMA=function(e){return(e=o.parseNumber(e))instanceof Error?e:0===e||parseInt(e,10)===e&&e<0?c.num:a.gammafn(e)},t.GAMMA.DIST=function(e,t,n,r){return 4!==arguments.length?c.na:e<0||t<=0||n<=0||"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?c.value:r?a.gamma.cdf(e,t,n,!0):a.gamma.pdf(e,t,n,!1)},t.GAMMA.INV=function(e,t,n){return 3!==arguments.length?c.na:e<0||e>1||t<=0||n<=0?c.num:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?c.value:a.gamma.inv(e,t,n)},t.GAMMALN=function(e){return(e=o.parseNumber(e))instanceof Error?e:a.gammaln(e)},t.GAMMALN.PRECISE=function(e){return 1!==arguments.length?c.na:e<=0?c.num:"number"!=typeof e?c.value:a.gammaln(e)},t.GAUSS=function(e){return(e=o.parseNumber(e))instanceof Error?e:a.normal.cdf(e,0,1)-.5},t.GEOMEAN=function(){var e=o.parseNumberArray(o.flatten(arguments));return e instanceof Error?e:a.geomean(e)},t.GROWTH=function(e,t,n,r){if((e=o.parseNumberArray(e))instanceof Error)return e;var i;if(void 0===t)for(t=[],i=1;i<=e.length;i++)t.push(i);if(void 0===n)for(n=[],i=1;i<=e.length;i++)n.push(i);if(t=o.parseNumberArray(t),n=o.parseNumberArray(n),o.anyIsError(t,n))return c.value;void 0===r&&(r=!0);var a,s,l=e.length,u=0,d=0,p=0,h=0;for(i=0;i<l;i++){var f=t[i],m=Math.log(e[i]);u+=f,d+=m,p+=f*m,h+=f*f}u/=l,d/=l,p/=l,h/=l,r?s=d-(a=(p-u*d)/(h-u*u))*u:(a=p/h,s=0);var g=[];for(i=0;i<n.length;i++)g.push(Math.exp(s+a*n[i]));return g},t.HARMEAN=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=e.length,n=0,r=0;r<t;r++)n+=1/e[r];return t/n},t.HYPGEOM={},t.HYPGEOM.DIST=function(e,t,n,i,a){if(e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),i=o.parseNumber(i),o.anyIsError(e,t,n,i))return c.value;function s(e,t,n,i){return r.COMBIN(n,e)*r.COMBIN(i-n,t-e)/r.COMBIN(i,t)}return a?function(e,t,n,r){for(var i=0,a=0;a<=e;a++)i+=s(a,t,n,r);return i}(e,t,n,i):s(e,t,n,i)},t.INTERCEPT=function(e,n){return e=o.parseNumberArray(e),n=o.parseNumberArray(n),o.anyIsError(e,n)?c.value:e.length!==n.length?c.na:t.FORECAST(0,e,n)},t.KURT=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=a.mean(e),n=e.length,r=0,i=0;i<n;i++)r+=Math.pow(e[i]-t,4);return n*(n+1)/((n-1)*(n-2)*(n-3))*(r/=Math.pow(a.stdev(e,!0),4))-3*(n-1)*(n-1)/((n-2)*(n-3))},t.LARGE=function(e,t){return e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t)?e:t<0||e.length<t?c.value:e.sort((function(e,t){return t-e}))[t-1]},t.LINEST=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=a.mean(e),r=a.mean(t),i=t.length,s=0,l=0,u=0;u<i;u++)s+=(t[u]-r)*(e[u]-n),l+=Math.pow(t[u]-r,2);var d=s/l;return[d,n-d*r]},t.LOGEST=function(e,n){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumberArray(o.flatten(n)),o.anyIsError(e,n))return c.value;for(var r=0;r<e.length;r++)e[r]=Math.log(e[r]);var i=t.LINEST(e,n);return i[0]=Math.round(1e6*Math.exp(i[0]))/1e6,i[1]=Math.round(1e6*Math.exp(i[1]))/1e6,i},t.LOGNORM={},t.LOGNORM.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:r?a.lognormal.cdf(e,t,n):a.lognormal.pdf(e,t,n)},t.LOGNORM.INV=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:a.lognormal.inv(e,t,n)},t.MAX=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.numbers(e);return 0===n.length?0:Math.max.apply(Math,n)},t.MAXA=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.arrayValuesToNumbers(e);return 0===(n=n.map((function(e){return null==e?0:e}))).length?0:Math.max.apply(Math,n)},t.MEDIAN=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.arrayValuesToNumbers(e),r=a.median(n);return isNaN(r)&&(r=c.num),r},t.MIN=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.numbers(e);return 0===n.length?0:Math.min.apply(Math,n)},t.MINA=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.arrayValuesToNumbers(e);return 0===(n=n.map((function(e){return null==e?0:e}))).length?0:Math.min.apply(Math,n)},t.MODE={},t.MODE.MULT=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t,n=e.length,r={},i=[],a=0,s=0;s<n;s++)r[t=e[s]]=r[t]?r[t]+1:1,r[t]>a&&(a=r[t],i=[]),r[t]===a&&(i[i.length]=t);return i},t.MODE.SNGL=function(){var e=o.parseNumberArray(o.flatten(arguments));return e instanceof Error?e:t.MODE.MULT(e).sort((function(e,t){return e-t}))[0]},t.NEGBINOM={},t.NEGBINOM.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:r?a.negbin.cdf(e,t,n):a.negbin.pdf(e,t,n)},t.NORM={},t.NORM.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:n<=0?c.num:r?a.normal.cdf(e,t,n):a.normal.pdf(e,t,n)},t.NORM.INV=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:a.normal.inv(e,t,n)},t.NORM.S={},t.NORM.S.DIST=function(e,t){return(e=o.parseNumber(e))instanceof Error?c.value:t?a.normal.cdf(e,0,1):a.normal.pdf(e,0,1)},t.NORM.S.INV=function(e){return(e=o.parseNumber(e))instanceof Error?c.value:a.normal.inv(e,0,1)},t.PEARSON=function(e,t){if(t=o.parseNumberArray(o.flatten(t)),e=o.parseNumberArray(o.flatten(e)),o.anyIsError(t,e))return c.value;for(var n=a.mean(e),r=a.mean(t),i=e.length,s=0,l=0,u=0,d=0;d<i;d++)s+=(e[d]-n)*(t[d]-r),l+=Math.pow(e[d]-n,2),u+=Math.pow(t[d]-r,2);return s/Math.sqrt(l*u)},t.PERCENTILE={},t.PERCENTILE.EXC=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t))return c.value;var n=(e=e.sort((function(e,t){return e-t}))).length;if(t<1/(n+1)||t>1-1/(n+1))return c.num;var r=t*(n+1)-1,i=Math.floor(r);return o.cleanFloat(r===i?e[r]:e[i]+(r-i)*(e[i+1]-e[i]))},t.PERCENTILE.INC=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t))return c.value;var n=t*((e=e.sort((function(e,t){return e-t}))).length-1),r=Math.floor(n);return o.cleanFloat(n===r?e[n]:e[r]+(n-r)*(e[r+1]-e[r]))},t.PERCENTRANK={},t.PERCENTRANK.EXC=function(e,t,n){if(n=void 0===n?3:n,e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n))return c.value;e=e.sort((function(e,t){return e-t}));for(var r=l.UNIQUE.apply(null,e),i=e.length,a=r.length,s=Math.pow(10,n),u=0,d=!1,p=0;!d&&p<a;)t===r[p]?(u=(e.indexOf(r[p])+1)/(i+1),d=!0):t>=r[p]&&(t<r[p+1]||p===a-1)&&(u=(e.indexOf(r[p])+1+(t-r[p])/(r[p+1]-r[p]))/(i+1),d=!0),p++;return Math.floor(u*s)/s},t.PERCENTRANK.INC=function(e,t,n){if(n=void 0===n?3:n,e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n))return c.value;e=e.sort((function(e,t){return e-t}));for(var r=l.UNIQUE.apply(null,e),i=e.length,a=r.length,s=Math.pow(10,n),u=0,d=!1,p=0;!d&&p<a;)t===r[p]?(u=e.indexOf(r[p])/(i-1),d=!0):t>=r[p]&&(t<r[p+1]||p===a-1)&&(u=(e.indexOf(r[p])+(t-r[p])/(r[p+1]-r[p]))/(i-1),d=!0),p++;return Math.floor(u*s)/s},t.PERMUT=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:r.FACT(e)/r.FACT(e-t)},t.PERMUTATIONA=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:Math.pow(e,t)},t.PHI=function(e){return(e=o.parseNumber(e))instanceof Error?c.value:Math.exp(-.5*e*e)/2.5066282746310002},t.POISSON={},t.POISSON.DIST=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:n?a.poisson.cdf(e,t):a.poisson.pdf(e,t)},t.PROB=function(e,t,n,r){if(void 0===n)return 0;if(r=void 0===r?n:r,e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),n=o.parseNumber(n),r=o.parseNumber(r),o.anyIsError(e,t,n,r))return c.value;if(n===r)return e.indexOf(n)>=0?t[e.indexOf(n)]:0;for(var i=e.sort((function(e,t){return e-t})),a=i.length,s=0,l=0;l<a;l++)i[l]>=n&&i[l]<=r&&(s+=t[e.indexOf(i[l])]);return s},t.QUARTILE={},t.QUARTILE.EXC=function(e,n){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumber(n),o.anyIsError(e,n))return c.value;switch(n){case 1:return t.PERCENTILE.EXC(e,.25);case 2:return t.PERCENTILE.EXC(e,.5);case 3:return t.PERCENTILE.EXC(e,.75);default:return c.num}},t.QUARTILE.INC=function(e,n){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumber(n),o.anyIsError(e,n))return c.value;switch(n){case 1:return t.PERCENTILE.INC(e,.25);case 2:return t.PERCENTILE.INC(e,.5);case 3:return t.PERCENTILE.INC(e,.75);default:return c.num}},t.RANK={},t.RANK.AVG=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var r=(n=n||!1)?function(e,t){return e-t}:function(e,t){return t-e},i=(t=(t=o.flatten(t)).sort(r)).length,a=0,s=0;s<i;s++)t[s]===e&&a++;return a>1?(2*t.indexOf(e)+a+1)/2:t.indexOf(e)+1},t.RANK.EQ=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;var r=(n=n||!1)?function(e,t){return e-t}:function(e,t){return t-e};return(t=t.sort(r)).indexOf(e)+1},t.ROW=function(e,t){return 2!==arguments.length?c.na:t<0?c.num:e instanceof Array&&"number"==typeof t?0!==e.length?a.row(e,t):void 0:c.value},t.ROWS=function(e){return 1!==arguments.length?c.na:e instanceof Array?0===e.length?0:a.rows(e):c.value},t.RSQ=function(e,n){return e=o.parseNumberArray(o.flatten(e)),n=o.parseNumberArray(o.flatten(n)),o.anyIsError(e,n)?c.value:Math.pow(t.PEARSON(e,n),2)},t.SKEW=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=a.mean(e),n=e.length,r=0,i=0;i<n;i++)r+=Math.pow(e[i]-t,3);return n*r/((n-1)*(n-2)*Math.pow(a.stdev(e,!0),3))},t.SKEW.P=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=a.mean(e),n=e.length,r=0,i=0,s=0;s<n;s++)i+=Math.pow(e[s]-t,3),r+=Math.pow(e[s]-t,2);return r/=n,(i/=n)/Math.pow(r,1.5)},t.SLOPE=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=a.mean(t),r=a.mean(e),i=t.length,s=0,l=0,u=0;u<i;u++)s+=(t[u]-n)*(e[u]-r),l+=Math.pow(t[u]-n,2);return s/l},t.SMALL=function(e,t){return e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t)?e:e.sort((function(e,t){return e-t}))[t-1]},t.STANDARDIZE=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:(e-t)/n},t.STDEV={},t.STDEV.P=function(){var e=t.VAR.P.apply(this,arguments),n=Math.sqrt(e);return isNaN(n)&&(n=c.num),n},t.STDEV.S=function(){var e=t.VAR.S.apply(this,arguments),n=Math.sqrt(e);return n},t.STDEVA=function(){var e=t.VARA.apply(this,arguments),n=Math.sqrt(e);return n},t.STDEVPA=function(){var e=t.VARPA.apply(this,arguments),n=Math.sqrt(e);return isNaN(n)&&(n=c.num),n},t.STEYX=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=a.mean(t),r=a.mean(e),i=t.length,s=0,l=0,u=0,d=0;d<i;d++)s+=Math.pow(e[d]-r,2),l+=(t[d]-n)*(e[d]-r),u+=Math.pow(t[d]-n,2);return Math.sqrt((s-l*l/u)/(i-2))},t.TRANSPOSE=function(e){return e?a.transpose(e):c.na},t.T=i.T,t.T.DIST=function(e,n,r){return 1!==r&&2!==r?c.num:1===r?t.T.DIST.RT(e,n):t.T.DIST["2T"](e,n)},t.T.DIST["2T"]=function(e,t){return 2!==arguments.length?c.na:e<0||t<1?c.num:"number"!=typeof e||"number"!=typeof t?c.value:2*(1-a.studentt.cdf(e,t))},t.T.DIST.RT=function(e,t){return 2!==arguments.length?c.na:e<0||t<1?c.num:"number"!=typeof e||"number"!=typeof t?c.value:1-a.studentt.cdf(e,t)},t.T.INV=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:a.studentt.inv(e,t)},t.T.INV["2T"]=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),e<=0||e>1||t<1?c.num:o.anyIsError(e,t)?c.value:Math.abs(a.studentt.inv(e/2,t))},t.T.TEST=function(e,n){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumberArray(o.flatten(n)),o.anyIsError(e,n))return c.value;var r,i=a.mean(e),s=a.mean(n),l=0,u=0;for(r=0;r<e.length;r++)l+=Math.pow(e[r]-i,2);for(r=0;r<n.length;r++)u+=Math.pow(n[r]-s,2);l/=e.length-1,u/=n.length-1;var d=Math.abs(i-s)/Math.sqrt(l/e.length+u/n.length);return t.T.DIST["2T"](d,e.length+n.length-2)},t.TREND=function(e,n,r){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumberArray(o.flatten(n)),r=o.parseNumberArray(o.flatten(r)),o.anyIsError(e,n,r))return c.value;var i=t.LINEST(e,n),a=i[0],s=i[1],l=[];return r.forEach((function(e){l.push(a*e+s)})),l},t.TRIMMEAN=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t))return c.value;var n=r.FLOOR(e.length*t,2)/2;return a.mean(o.initial(o.rest(e.sort((function(e,t){return e-t})),n),n))},t.VAR={},t.VAR.P=function(){for(var e,n=o.numbers(o.flatten(arguments)),r=n.length,i=0,a=t.AVERAGE(n),s=0;s<r;s++)i+=Math.pow(n[s]-a,2);return e=i/r,isNaN(e)&&(e=c.num),e},t.VAR.S=function(){for(var e=o.numbers(o.flatten(arguments)),n=e.length,r=0,i=t.AVERAGE(e),a=0;a<n;a++)r+=Math.pow(e[a]-i,2);return r/(n-1)},t.VARA=function(){for(var e=o.flatten(arguments),n=e.length,r=0,i=0,a=t.AVERAGEA(e),s=0;s<n;s++){var c=e[s];r+="number"==typeof c?Math.pow(c-a,2):!0===c?Math.pow(1-a,2):Math.pow(0-a,2),null!==c&&i++}return r/(i-1)},t.VARPA=function(){for(var e,n=o.flatten(arguments),r=n.length,i=0,a=0,s=t.AVERAGEA(n),l=0;l<r;l++){var u=n[l];i+="number"==typeof u?Math.pow(u-s,2):!0===u?Math.pow(1-s,2):Math.pow(0-s,2),null!==u&&a++}return e=i/a,isNaN(e)&&(e=c.num),e},t.WEIBULL={},t.WEIBULL.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:r?1-Math.exp(-Math.pow(e/n,t)):Math.pow(e,t-1)*Math.exp(-Math.pow(e/n,t))*t/Math.pow(n,t)},t.Z={},t.Z.TEST=function(e,n,r){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumber(n),o.anyIsError(e,n))return c.value;r=r||t.STDEV.S(e);var i=e.length;return 1-t.NORM.S.DIST((t.AVERAGE(e)-n)/(r/Math.sqrt(i)),!0)}},ej19:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("D57K"),i=n("5xGT"),a=n("C05f"),o=n("YtkY"),s=n("Jzy8"),c=n("xeB5"),l=n("EM62"),u=n("s2Ay"),d=n("crdX"),p=n("2kYt"),h=["window"],f=["windowInner"];function m(e,t){if(1&e&&(l.mc(0,"div",25),l.fd(1),l.lc()),2&e){var n=l.yc().$implicit;l.Sb(1),l.gd(null==n?null:n.name)}}function g(e,t){if(1&e&&(l.mc(0,"div",25),l.fd(1),l.lc()),2&e){var n=l.yc(2);l.Sb(1),l.gd(n.translate.instant("LABELS.HOME"))}}function b(e,t){if(1&e){var n=l.nc();l.mc(0,"div",15),l.uc("click",(function(){l.Qc(n);var e=t.$implicit;return l.yc().toggleSelect(e.id,e.name)})),l.mc(1,"div",16),l.zc(2,"async"),l.mc(3,"span",17),l.xc(),l.mc(4,"svg",18),l.hc(5,"use",19),l.lc(),l.lc(),l.wc(),l.mc(6,"span",20),l.xc(),l.mc(7,"svg",21),l.hc(8,"use",22),l.lc(),l.lc(),l.wc(),l.hc(9,"span",23),l.lc(),l.dd(10,m,2,1,"div",24),l.dd(11,g,2,1,"div",24),l.lc()}if(2&e){var r,i=t.$implicit,a=l.yc();l.Sb(1),l.Yb("selected",(null==(r=l.Ac(2,4,a.selectedFolder))?null:r.id)===i.id),l.Sb(9),l.Dc("ngIf","home"!==(null==i?null:i.id)),l.Sb(1),l.Dc("ngIf","home"===(null==i?null:i.id))}}var v=function(e){function t(t,n,r,i,o){var s=e.call(this)||this;return s.modalController=t,s.projectsLocator=n,s.translate=r,s.state=i,s.documentManage=o,s.subs=[],s.selectedFolder=new a.a(null),s}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){var e=this;this.projectList=this.projectsLocator.getProjectsFromState(s.g.EDITOR).pipe(Object(o.a)((function(t){return t.filter((function(t){return t.id!==e.sourceProjectId}))})));var t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t)},t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.closeWindow=function(){var e=this,t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.toggleSelect=function(e,t){this.selectedFolder.next({id:e,name:t})},t.prototype.moveFile=function(){var e=this;if(this.selectedFolder.value){var t=this.documentManage.moveDiagrams(this.selectedFolder.value.id,this.diagramIds,this.sourceProjectId).subscribe({complete:function(){return e.onMoveFileComplete({diagramId:e.diagramIds[0],sourceProject:e.sourceProjectId,distinationProject:e.selectedFolder.value.id})},error:function(){return e.closeWindow()}});this.subs.push(t)}},t.prototype.onMoveFileComplete=function(e){this.state.set("FolderPanelDataChangeEvent",{id:e.diagramId,type:"diagram",action:"move",payload:e}),this.closeWindow()},t.\u0275fac=function(e){return new(e||t)(l.gc(i.fb),l.gc(s.v),l.gc(u.e),l.gc(i.Hb),l.gc(c.a))},t.\u0275cmp=l.ac({type:t,selectors:[["move-document-dialog"]],viewQuery:function(e,t){var n;(1&e&&(l.Xc(h,!0),l.Xc(f,!0)),2&e)&&(l.Mc(n=l.vc())&&(t.container=n.first),l.Mc(n=l.vc())&&(t.containerInner=n.first))},inputs:{diagramIds:"diagramIds",name:"name",sourceProjectId:"sourceProjectId"},features:[l.Pb],decls:24,vars:9,consts:[[1,"move-doc-dialog-container","modal-window-container","fx-cover","fx-center-all",3,"click"],["window",""],[1,"move-doc-dialog-inner","modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],[1,"title"],[1,"btn-small","nu-btn-icon","modal-window-close",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"grey","fx-margin-bottom-10","body"],[1,"move-doc-dialog-project-items-container"],["class","move-doc-dialog-project-item body",3,"click",4,"ngFor","ngForOf"],[1,"move-doc-dialog-btns"],[1,"btn-medium","btn-secondary","fx-margin-right-5",3,"click"],[1,"btn-medium","btn-primary","fx-margin-right-5",3,"click"],[1,"move-doc-dialog-project-item","body",3,"click"],[1,"move-doc-project-icon"],[1,"move-doc-project-icon-unselected"],[1,"nu-icon","nu-ic-folder-thin"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-folder-thin"],[1,"move-doc-project-icon-selected"],[1,"nu-icon","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],[1,"move-doc-project-icon-hover"],["class","move-doc-project-name body",4,"ngIf"],[1,"move-doc-project-name","body"]],template:function(e,t){1&e&&(l.mc(0,"div",0,1),l.uc("click",(function(e){return t.closeOnOverlayClick(e)})),l.mc(2,"div",2,3),l.mc(4,"div",4),l.mc(5,"h1",5),l.fd(6),l.lc(),l.mc(7,"button",6),l.uc("click",(function(){return t.closeWindow()})),l.xc(),l.mc(8,"svg",7),l.hc(9,"use",8),l.lc(),l.lc(),l.lc(),l.wc(),l.mc(10,"p",9),l.fd(11),l.mc(12,"span"),l.fd(13),l.lc(),l.fd(14),l.lc(),l.mc(15,"perfect-scrollbar"),l.mc(16,"div",10),l.dd(17,b,12,6,"div",11),l.zc(18,"async"),l.lc(),l.lc(),l.mc(19,"div",12),l.mc(20,"button",13),l.uc("click",(function(){return t.closeWindow()})),l.fd(21),l.lc(),l.mc(22,"button",14),l.uc("click",(function(){return t.moveFile()})),l.fd(23),l.lc(),l.lc(),l.lc(),l.lc()),2&e&&(l.Sb(6),l.gd(t.translate.instant("MOVE_DOC_DIALOG.HEADINGS.MAIN")),l.Sb(5),l.hd("",t.translate.instant("MOVE_DOC_DIALOG.HEADINGS.SUB_PART1")," "),l.Sb(2),l.gd(t.name),l.Sb(1),l.hd(" ",t.translate.instant("MOVE_DOC_DIALOG.HEADINGS.SUB_PART2")," "),l.Sb(3),l.Dc("ngForOf",l.Ac(18,7,t.projectList)),l.Sb(4),l.gd(t.translate.instant("MOVE_DOC_DIALOG.BUTTONS.CANCEL")),l.Sb(2),l.gd(t.translate.instant("MOVE_DOC_DIALOG.BUTTONS.MOVE")))},directives:[d.b,p.s,p.t],pipes:[p.b],styles:[".modal-window-inner[_ngcontent-%COMP%]{padding:1rem;max-height:500px;width:460px;display:flex;flex-direction:column}.move-doc-dialog-project-item[_ngcontent-%COMP%]{margin-bottom:.625rem;display:flex;align-items:center}.move-doc-dialog-project-item[_ngcontent-%COMP%]:hover   .move-doc-project-icon[_ngcontent-%COMP%]{visibility:hidden}.move-doc-dialog-project-item[_ngcontent-%COMP%]:hover   .move-doc-project-icon-hover[_ngcontent-%COMP%]{display:block;visibility:visible}.move-doc-dialog-project-item[_ngcontent-%COMP%]:hover   .move-doc-project-icon.selected[_ngcontent-%COMP%]{visibility:visible}.move-doc-dialog-project-item[_ngcontent-%COMP%]:hover   .move-doc-project-icon.selected[_ngcontent-%COMP%]   .move-doc-project-icon-hover[_ngcontent-%COMP%]{display:none}.move-doc-project-name[_ngcontent-%COMP%]{cursor:pointer}.move-doc-project-icon-unselected[_ngcontent-%COMP%]{height:22px}.move-doc-project-icon-unselected[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-top:-4px}.move-doc-project-icon-hover[_ngcontent-%COMP%]{display:none;border:1px solid #64767d}.move-doc-project-icon[_ngcontent-%COMP%]{margin-right:.625rem;width:30px;position:relative;overflow:hidden;display:flex;align-items:center;flex-direction:column}.move-doc-project-name[_ngcontent-%COMP%]{flex:1}.move-doc-project-icon-selected[_ngcontent-%COMP%]{display:block;background-color:#08436b}.move-doc-project-icon-selected[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-top:-4px;margin-left:-4px}.move-doc-project-icon-hover[_ngcontent-%COMP%]{position:absolute;top:0;left:4px}.move-doc-project-icon-hover[_ngcontent-%COMP%], .move-doc-project-icon-selected[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:100%}.move-doc-project-icon-selected[_ngcontent-%COMP%], .move-doc-project-icon.selected[_ngcontent-%COMP%]   .move-doc-project-icon-unselected[_ngcontent-%COMP%]{display:none}.move-doc-project-icon.selected[_ngcontent-%COMP%]   .move-doc-project-icon-selected[_ngcontent-%COMP%]{display:inline-block}.move-doc-dialog-btns[_ngcontent-%COMP%]{margin-top:1.25rem;text-align:right}.move-doc-dialog-project-items-container[_ngcontent-%COMP%]{max-height:300px}"],changeDetection:0}),t}(i.mb)},elRR:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("D57K"),i=n("SKSx"),a=n("Wpmq"),o=n("8j5Y"),s=n("4e/d"),c=n("Wg7D"),l=n("jIqt"),u=n("YtkY"),d=n("Ohay"),p=n("KTx3"),h=n("6Oco"),f=n("g6G6"),m=n("5xGT"),g=n("LLEj"),b=n("sXdR"),v=n("7zx0"),_=n("EM62"),y=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r)||this;return o.commandService=t,o.vToDcoordinate=n,o.state=r,o.postmsg=i,o.realtimeStates=a,o.pointerThrottle=120,o}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:"move",tail:null,type:"css"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,r){var i=this,a=e.prototype.initialize.call(this,t,n,r),c=this.getStageDrag(n).pipe(Object(o.a)((function(e){return i.updatePan(e.nativeEvent.movementX,e.nativeEvent.movementY)}))),l=this.getStageMouseDown(t).pipe(Object(o.a)((function(e){i.hideComments()}))),u=this.getShapeTouch().pipe(Object(o.a)((function(e){i.postmsg.sendToParent("shape:touch",{shapeId:e.currentTarget.name})}))),d=this.interactionCanvas.canvas,g=Object(p.a)(d,"mousemove").pipe(Object(b.lodashThrottle)(this.pointerThrottle,{leading:!0,trailing:!0}),Object(o.a)((function(e){if(m.P.get("DEBUG_PHOTON_POINTER_MOVE")){var t=i.vToDcoordinate.x(e.x),n=i.vToDcoordinate.y(e.y),r=JSON.stringify([t,n]);i.realtimeStates.set("pointer",r)}})),Object(s.a)((function(e){return Object(h.b)()})));return Object(f.a)(a,u,c,l,g)},t.prototype.getCursor=function(){var e=this;return this.pointerMove().pipe(Object(c.a)(100),Object(l.a)({x:this.interactionCanvas.getMouseX(),y:this.interactionCanvas.getMouseY()}),Object(u.a)((function(t){var n=e.getObjectsUnderPoint(t).filter((function(e){return e instanceof i.b}));return e.getCursorByContext(n,[])})),Object(d.a)((function(e,t){return e.cursor===t.cursor&&e.tail===t.tail})))},t.prototype.getStageMouseDown=function(e){return Object(p.a)(e,"stagemousedown")},t.prototype.hideComments=function(){this.state.set("CommentThreadData",{visible:!1})},t.prototype.shapeTouched=function(e){},t.\u0275fac=function(e){return new(e||t)(_.qc(m.B),_.qc(a.a),_.qc(m.Hb),_.qc(m.ob),_.qc(v.b))},t.\u0275prov=_.cc({token:t,factory:t.\u0275fac}),t}(g.a);Object.defineProperty(y,"name",{value:"ViewerInteractionHandler"})},euU2:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5xGT"),i=n("ROBh"),a=n("YtkY"),o=n("QoSw"),s=n("SBw3"),c=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.locator.getDiagramOnce().pipe(Object(a.a)((function(n){var r=n.isShapeInGroup(n.filterShapeIdsByLockedState(t,!1));return"groupShapes"===e&&n.filterShapeIdsByLockedState(t,!1).length>1?!r:"ungroupShapes"===e&&r})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(i.a)(t)},e.prototype.getApplyData=function(e,t){return Object(i.a)({})},e.\u0275fac=function(t){return new(t||e)(c.qc(o.a),c.qc(r.Hb),c.qc(s.a))},e.\u0275prov=c.cc({token:e,factory:e.\u0275fac}),e}()},f0nv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("6Oco"),a=n("JPqQ"),o=n("EM62"),s=function(){function e(e){this.drs=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"DisplayRuleBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=e.__sakota__.getChanges(),n=this.modifiedShapeData(t);for(var r in n){var a=n[r];this.processShape(e,a.shapeId,a.dataItemId,a.value)}return Object(i.b)()},e.prototype.processShape=function(e,t,n,r){this.drs.evalRules(n,e.shapes[t],r)},e.prototype.modifiedShapeData=function(t){var n,i,a={};try{for(var o=Object(r.k)(["$set","$unset"]),s=o.next();!s.done;s=o.next()){var c=s.value;if(t[c])for(var l in t[c]){e.regexDataItems.lastIndex=0;var u=e.regexDataItems.exec(l);if(u){var d=u[1],p=u[2],h=d+"."+p;a[h]||(a[h]={shapeId:d,dataItemId:p,value:t[c][l]})}}}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},e.regexDataItems=/shapes\.([^\.]+)\.data\.([^\.]+)/g,e.\u0275fac=function(t){return new(t||e)(o.qc(a.a))},e.\u0275prov=o.cc({token:e,factory:e.\u0275fac}),e}()},"fRR/":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("yZNT");var r=n("GoAz"),i=n("XWWj"),a=n("6qzS"),o=n("J+dc"),s=n("YtkY"),c=n("EM62"),l=function(){function e(e){this.libraryList=e,this.subLibraryList=[],this.type="libs",this.loadAllSubLibraries()}return e.prototype.search=function(e,t){return Object(r.a)(Object(i.goAsync)(e,this.subLibraryList,t)).pipe(Object(o.a)(1),Object(s.a)((function(e){return e.map((function(e){return{id:e.obj.id,title:e.obj.label,type:"libs",score:e.score}}))})))},e.prototype.loadAllSubLibraries=function(){var e=this;this.libraryList.getAllGroups().forEach((function(t){e.libraryList.getLibrariesInGroup(t).map((function(t){e.subLibraryList.push({id:t.id,label:t.label,groups:[],libGroup:""})}))}))},e.\u0275fac=function(t){return new(t||e)(c.qc(a.a))},e.\u0275prov=c.cc({token:e,factory:e.\u0275fac}),e}()},fX4D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{("undefined"!=typeof process&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||"undefined"!=typeof window&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}catch(t){}}},flPR:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return x}));var r=n("D57K"),i=n("h1tj"),a=n("5xGT"),o=n("KTx3"),s=n("GoAz"),c=n("ROBh"),l=n("g6G6"),u=n("wk5G"),d=n("CfqY"),p=n("7SLS"),h=n("J+dc"),f=n("YtkY"),m=n("3mST"),g=n("Wg7D"),b=n("TLy2"),v=n("5uDM"),_=n("BwBJ"),y=n("jIqt");function O(){return function(e){}}var x=function(){function e(e){this.state=e,this.subs=[],this.container=new i.Container,this.container.name=this.constructor.name}return e.prototype.add=function(){var e=this.createAddSource().pipe(Object(d.a)());return this.subs.push(e.connect()),e},e.prototype.remove=function(){var e=this.createRemoveSource().pipe(Object(d.a)());return this.subs.push(e.connect()),e},e.prototype.change=function(){var e=this.createChangeSource().pipe(Object(d.a)());return this.subs.push(e.connect()),e},e.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.indicatorLayer=void 0},e.prototype.duringInteractions=function(e,t){return Object(l.a)(this.duringSelectionInteraction(e,t),this.duringPan(e,t),this.duringTextEdit(e,t))},e.prototype.duringSelectionInteraction=function(e,t){return Object(l.a)(Object(o.a)(this.indicatorLayer,u.b.interactionStart).pipe(Object(p.a)(t)),Object(l.a)(Object(o.a)(this.indicatorLayer,u.b.interactionEnd),Object(o.a)(this.indicatorLayer,u.b.interactionCancel)).pipe(Object(p.a)(e)))},e.prototype.duringSelectionInteractionInProgress=function(e,t){return Object(l.a)(Object(o.a)(this.indicatorLayer,u.b.interaction).pipe(Object(h.a)(1),Object(p.a)(t)),Object(l.a)(Object(o.a)(this.indicatorLayer,u.b.interactionEnd),Object(o.a)(this.indicatorLayer,u.b.interactionCancel)).pipe(Object(p.a)(e)))},e.prototype.duringTextEdit=function(e,t){return this.state.changes("EditingText").pipe(Object(f.a)((function(n){return!1===n.open?e:t})))},e.prototype.duringPan=function(e,t){return this.state.changes("DiagramPan").pipe(Object(m.a)(1)).pipe(Object(g.a)(200),Object(b.a)((function(){return Object(s.a)([e]).pipe(Object(v.a)((function(e){return Object(c.a)(e).pipe(Object(_.a)(200),Object(y.a)(t))})))})))},e.prototype.duringPanMouseControlState=function(e,t){return this.state.changes("MouseControlState").pipe(Object(f.a)((function(n){return"pan"===n?t:e})))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.e)(t,e)}(a.Hb)},fxI9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentCommands=t.DocumentEvents=void 0,function(e){e.documentLoad="document:load",e.documentData="document:data"}(t.DocumentEvents||(t.DocumentEvents={})),function(e){e.documentDataSubscribe="document:data:subscribe",e.documentModify="document:modify"}(t.DocumentCommands||(t.DocumentCommands={}))},g5wR:function(e,t,n){"use strict";var r=n("xEF+");t.states={expectOperand:{tokenTypes:{literal:{toState:"expectBinOp"},identifier:{toState:"identifier"},unaryOp:{},openParen:{toState:"subExpression"},openCurl:{toState:"expectObjKey",handler:r.objStart},dot:{toState:"traverse"},openBracket:{toState:"arrayVal",handler:r.arrayStart}}},expectBinOp:{tokenTypes:{binaryOp:{toState:"expectOperand"},pipe:{toState:"expectTransform"},dot:{toState:"traverse"},question:{toState:"ternaryMid",handler:r.ternaryStart}},completable:!0},expectTransform:{tokenTypes:{identifier:{toState:"postTransform",handler:r.transform}}},expectObjKey:{tokenTypes:{identifier:{toState:"expectKeyValSep",handler:r.objKey},closeCurl:{toState:"expectBinOp"}}},expectKeyValSep:{tokenTypes:{colon:{toState:"objVal"}}},postTransform:{tokenTypes:{openParen:{toState:"argVal"},binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},postArgs:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},identifier:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},openParen:{toState:"argVal",handler:r.functionCall},pipe:{toState:"expectTransform"},question:{toState:"ternaryMid",handler:r.ternaryStart}},completable:!0},traverse:{tokenTypes:{identifier:{toState:"identifier"}}},filter:{subHandler:r.filter,endStates:{closeBracket:"identifier"}},subExpression:{subHandler:r.subExpression,endStates:{closeParen:"expectBinOp"}},argVal:{subHandler:r.argVal,endStates:{comma:"argVal",closeParen:"postArgs"}},objVal:{subHandler:r.objVal,endStates:{comma:"expectObjKey",closeCurl:"expectBinOp"}},arrayVal:{subHandler:r.arrayVal,endStates:{comma:"arrayVal",closeBracket:"expectBinOp"}},ternaryMid:{subHandler:r.ternaryMid,endStates:{colon:"ternaryEnd"}},ternaryEnd:{subHandler:r.ternaryEnd,completable:!0}}},gCml:function(e,t,n){"use strict";n.d(t,"a",(function(){return de}));var r,i=n("D57K"),a=n("5xGT"),o=n("ROBh"),s=n("C05f"),c=n("QQZH"),l=n("ZTXN"),u=n("4y1S"),d=n("QoSw"),p=n("W9bu"),h=n("nsO7"),f=n("kuMc"),m=n("8j5Y"),g=n("Ohay"),b=n("TLy2"),v=n("xVbo"),_=n("Jzy8"),y=n("NNJu"),O=n("nIj0"),x=n("JPqQ"),E=n("diDk"),k=n("X0jn"),C=n("EM62"),w=n("TQyE"),S=n("Yr08"),I=["InputRef"];!function(e){e.FILLCOLOR="fillColor",e.LINECOLOR="lineColor",e.LINETHICKNESS="lineThickness",e.DATE="date",e.DATE_RANGE="date_range",e.PEOPLE="people",e.DEFAULT="default"}(r||(r={}));var T=function(e){function t(t,n){var i,a=e.call(this,t,n)||this;return a.componentFactoryResolver=t,a.injector=n,a.typeToInputMap=((i={})[r.FILLCOLOR]=w.a,i[r.LINECOLOR]=w.a,i[r.LINETHICKNESS]=y.s,i[r.DATE]=S.a,i[r.DEFAULT]=y.s,i[r.PEOPLE]=y.s,i),a.value=new s.a(""),a}return Object(i.e)(t,e),t.prototype.morphInput=function(e,t){this.inputContainer&&(!t||this.type!==e&&""!==this.value.value&&void 0!==this.type?this.value.next(""):this.value.next(t),this.type=e,this.inputRef&&this.sub&&(this.remove(this.inputContainer,this.inputRef),this.sub.unsubscribe(),this.sub=null),this.inputRef=this.createComponent(this.typeToInputMap[e],this.inputContainer),this.typeToInputMap[e]===w.a?this.setColorPickerProps():this.typeToInputMap[e]===y.s?this.setTextInputProps():this.typeToInputMap[e]===S.a&&this.setDatePickerProps(),this.insert(this.inputContainer,this.inputRef))},t.prototype.setColorPickerProps=function(){var e=this,t=this.inputRef.instance;t.setProperties({color:{fillColor:this.value.value},label:this.getInputLabel(),cpPosition:"right-top"}),t.setData({value:this.value.value}),t.apply(),this.sub=t.change.subscribe((function(n){e.value.next(n.value),t.apply()}))},t.prototype.setTextInputProps=function(){var e=this,t=this.inputRef.instance;t.value=this.value.value,t.placeholder=this.getInputLabel(),this.sub=t.inputChange.subscribe((function(t){e.value.next(t)}))},t.prototype.setDatePickerProps=function(){var e=this,t=this.inputRef.instance;t.dateSubject.next(new Date(Number(this.value.value))),this.sub=t.change.subscribe((function(t){e.value.next(t)}))},t.prototype.getInputLabel=function(){switch(this.type){case r.FILLCOLOR:return"Fill Color";case r.LINECOLOR:return"Line Color";case r.LINETHICKNESS:return"Line Thickness";case r.DATE:return"Date";case r.DATE_RANGE:return"Date Range";case r.PEOPLE:return"User Email";default:return"Value"}},t.\u0275fac=function(e){return new(e||t)(C.gc(C.m),C.gc(C.C))},t.\u0275cmp=C.ac({type:t,selectors:[["cformat-value-input"]],viewQuery:function(e,t){var n;(1&e&&C.kd(I,!0,C.hb),2&e)&&(C.Mc(n=C.vc())&&(t.inputContainer=n.first))},features:[C.Pb],decls:2,vars:0,consts:[["InputRef",""]],template:function(e,t){1&e&&C.hc(0,"div",null,0)},encapsulation:2}),t}(y.k),A=n("s2Ay"),P=n("2kYt"),M=n("K0+f"),D=n("crdX"),j=n("SKds"),R=n("R7+U"),L=n("mFH5"),N=n("TMvu"),B=n("pYIu"),U=n("TdEb"),F=n("pVzg"),q=["dbSelector"],W=["styleInput"],H=["valueInput"];function K(e,t){if(1&e&&(C.xc(),C.wc(),C.mc(0,"div",14),C.hc(1,"message-card",15),C.lc()),2&e){var n=C.yc();C.Sb(1),C.Dc("title",n.emptyStateTitle)("body",n.emptyStateBody)("titleIcon",n.emptyStateIcon)}}function z(e,t){1&e&&(C.mc(0,"div",10),C.fd(1,"CFORMAT_PANEL.LABELS.NEW_RULE"),C.lc())}function V(e,t){1&e&&(C.mc(0,"div",10),C.fd(1,"CFORMAT_PANEL.LABELS.UPDATE_RULE"),C.lc())}function G(e,t){if(1&e&&(C.mc(0,"mat-option",37),C.fd(1),C.lc()),2&e){var n=t.$implicit;C.Dc("value",n),C.Sb(1),C.hd(" ",n.label," ")}}function Y(e,t){if(1&e&&(C.mc(0,"mat-option",39),C.mc(1,"label",40),C.fd(2),C.lc(),C.lc()),2&e){var n=t.$implicit;C.Dc("value",n.value),C.Sb(2),C.gd(n.label)}}function X(e,t){if(1&e&&(C.mc(0,"div"),C.mc(1,"mat-select",38),C.dd(2,Y,3,2,"mat-option",23),C.lc(),C.lc()),2&e){var n=C.yc().$implicit,r=C.yc(2);C.Sb(1),C.Dc("formControl",r.condOpCtrl),C.Sb(1),C.Dc("ngForOf",n.availableOperators)}}var Q=function(e){return{visibility:e}};function J(e,t){if(1&e&&(C.mc(0,"div",30),C.mc(1,"mat-select",31),C.mc(2,"cdk-virtual-scroll-viewport",32),C.mc(3,"mat-option"),C.hc(4,"ngx-mat-select-search",33),C.lc(),C.dd(5,G,2,2,"mat-option",34),C.zc(6,"async"),C.lc(),C.lc(),C.dd(7,X,3,2,"div",12),C.hc(8,"cformat-value-input",35,36),C.zc(10,"async"),C.lc()),2&e){var n=t.$implicit,r=C.yc(2);C.Sb(1),C.Dc("formControl",r.dataItemCtrl),C.Sb(3),C.Dc("formControl",r.dataItemFilterCtrl),C.Sb(1),C.Dc("ngForOf",C.Ac(6,5,r.filteredDataItems)),C.Sb(2),C.Dc("ngIf",n&&n.availableOperators),C.Sb(1),C.Dc("ngStyle",C.Ic(9,Q,C.Ac(10,7,r.allowNoCustomValue)?"hidden":"visible"))}}function $(e,t){if(1&e&&(C.mc(0,"mat-option",39),C.mc(1,"label",40),C.fd(2),C.lc(),C.lc()),2&e){var n=t.$implicit;C.Dc("value",n.value),C.Sb(2),C.gd(n.label)}}var Z=function(){return{event:"rules.newRule.complete.click"}};function ee(e,t){if(1&e){var n=C.nc();C.mc(0,"button",41),C.uc("click",(function(){return C.Qc(n),C.yc(2).saveRule()})),C.zc(1,"async"),C.fd(2," CFORMAT_PANEL.BUTTONS.ADD_RULE "),C.lc()}if(2&e){var r=C.yc(2);C.Dc("trackAction",C.Hc(4,Z))("disabled",!C.Ac(1,2,r.allowSaveAction))}}function te(e,t){if(1&e){var n=C.nc();C.mc(0,"button",41),C.uc("click",(function(){return C.Qc(n),C.yc(2).saveRule()})),C.zc(1,"async"),C.fd(2," CFORMAT_PANEL.BUTTONS.UPDATE_RULE "),C.lc()}if(2&e){var r=C.yc(2);C.Dc("trackAction",C.Hc(4,Z))("disabled",!C.Ac(1,2,r.allowSaveAction))}}var ne=function(){return{event:"rules.newRule.cancel.click"}};function re(e,t){if(1&e){var n=C.nc();C.kc(0),C.mc(1,"div",16),C.mc(2,"div",17),C.dd(3,z,2,0,"div",18),C.zc(4,"async"),C.dd(5,V,2,0,"div",18),C.zc(6,"async"),C.hc(7,"input",19),C.lc(),C.mc(8,"div",20),C.fd(9,"CFORMAT_PANEL.LABELS.WHICH_HAS"),C.lc(),C.dd(10,J,11,11,"div",21),C.mc(11,"div",22),C.mc(12,"div",10),C.fd(13,"CFORMAT_PANEL.LABELS.DO"),C.lc(),C.mc(14,"mat-select",19),C.dd(15,$,3,2,"mat-option",23),C.lc(),C.hc(16,"cformat-value-input",24,25),C.lc(),C.lc(),C.mc(18,"div",26),C.dd(19,ee,3,5,"button",27),C.zc(20,"async"),C.dd(21,te,3,5,"button",28),C.zc(22,"async"),C.mc(23,"button",29),C.uc("click",(function(){return C.Qc(n),C.yc().setShowForm(!1)})),C.fd(24," CFORMAT_PANEL.BUTTONS.CANCEL "),C.lc(),C.lc(),C.jc()}if(2&e){var r=C.yc();C.Sb(3),C.Dc("ngIf",!C.Ac(4,9,r.isEditing)),C.Sb(2),C.Dc("ngIf",C.Ac(6,11,r.isEditing)),C.Sb(2),C.Dc("formControl",r.ruleNameCtrl),C.Sb(3),C.Dc("ngForOf",r.ruleConditions),C.Sb(4),C.Dc("formControl",r.ruleActionKeyCtrl),C.Sb(1),C.Dc("ngForOf",r.styleTypes),C.Sb(4),C.Dc("ngIf",!C.Ac(20,13,r.isEditing)),C.Sb(2),C.Dc("ngIf",C.Ac(22,15,r.isEditing)),C.Sb(2),C.Dc("trackAction",C.Hc(17,ne))}}function ie(e,t){if(1&e&&(C.kc(0),C.mc(1,"div",52),C.fd(2),C.lc(),C.jc()),2&e){var n=C.yc().$implicit;C.Sb(2),C.hd(" ",n.label," ")}}function ae(e,t){if(1&e){var n=C.nc();C.xc(),C.wc(),C.mc(0,"simple-dropdown-item",51),C.uc("click",(function(){C.Qc(n);var e=t.$implicit,r=C.yc().$implicit;return C.yc().onRuleOptionClick(r,e)})),C.dd(1,ie,3,1,"ng-container",12),C.lc()}if(2&e){var r=t.$implicit;C.Dc("item",r),C.Sb(1),C.Dc("ngIf",!r.isSeparator)}}var oe=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0,multiselectable:!1}},se=function(e){return{"cformat-rules-rule-icon-container-active":e}};function ce(e,t){if(1&e&&(C.mc(0,"div",42),C.mc(1,"abs-dropdown",43,44),C.mc(3,"simple-dropdown-button",45),C.mc(4,"button",46),C.xc(),C.mc(5,"svg",47),C.hc(6,"use",48),C.lc(),C.lc(),C.lc(),C.dd(7,ae,2,2,"simple-dropdown-item",49),C.lc(),C.wc(),C.mc(8,"p",50),C.fd(9),C.lc(),C.lc()),2&e){var n=t.$implicit,r=C.yc();C.Sb(1),C.Dc("settings",C.Hc(6,oe)),C.Sb(3),C.Dc("ngClass",C.Ic(7,se,n.isActive)),C.Sb(3),C.Dc("ngForOf",r.ruleOptions),C.Sb(1),C.Yb("disabled",!n.isActive),C.Sb(1),C.gd(n.name)}}var le,ue=function(){return{event:"rules.panel.new.click"}};!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(le||(le={}));var de=function(){function e(e,t,n,r,i,a,u,d,p){this.state=e,this.modalController=t,this.dll=n,this.ell=r,this.commandService=i,this.linkSvc=a,this.permManger=u,this.drs=d,this.changeDetectorRef=p,this.dataItemOptions=Object(o.a)([]),this.selectedDef=new s.a(null),this.dbControl=new O.h,this.dataItemCtrl=new O.h,this.dataItemFilterCtrl=new O.h,this.condOpCtrl=new O.h,this.condValCtrl=new O.h,this.filteredDataItems=new c.a(1),this.ruleActionKeyCtrl=new O.h,this.ruleNameCtrl=new O.h,this._onDestroy=new l.a,this.panelId="cformat",this.operatorMap={equals:_.G.Equals," > ":_.G.GreaterThan," < ":_.G.LesserThan,contains:_.G.Contains,subtext:_.G.SubText,isTrue:_.G.IsTrue,isFalse:_.G.IsFalse,true:_.G.IsTrue,false:_.G.IsFalse},this.dataDefs=[],this.subs=[],this.formCtrlSubs=[],this.isEditing=new s.a(!1),this.showRuleForm=new s.a(!1),this.ruleTargetOpts=[],this.dataItemOptions=Object(o.a)([]),this.ruleConditions=[],this.ruleList=new s.a([]),this.ruleOptions=[],this.styleTypes=[],this.allowSaveAction=new s.a(!1),this.allowNoCustomValue=new s.a(!1)}return Object.defineProperty(e.prototype,"emptyStateTitle",{get:function(){return"CFORMAT_PANEL.EMPTY_SCREEN.TITLE"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyStateBody",{get:function(){return["CFORMAT_PANEL.EMPTY_SCREEN.INSTRUCTION_1","CFORMAT_PANEL.EMPTY_SCREEN.INSTRUCTION_2","CFORMAT_PANEL.EMPTY_SCREEN.INSTRUCTION_3","CFORMAT_PANEL.EMPTY_SCREEN.INSTRUCTION_4"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyStateIcon",{get:function(){return"./assets/images/rules-panel/rules-empty-state.svg"},enumerable:!1,configurable:!0}),e.prototype.displayFn=function(e){return e&&e.label?e.label:""},e.prototype.ngOnInit=function(){this.addRuleOptions(),this.addStyleOptions(),this.subs.push(this.activateObservers())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.saveRule=function(){var e,t,n=this.ruleConditions[0].dataItem.label,r=this.ruleConditions[0].dataItem.type,i=this.groupedDataDefs[n+"."+r],o=this.isEditing.value?this.currentRuleId:a.rb.ruleId(),s=new _.H(o);s.priorityScore=this.isEditing.value?this.newRulePriority:((null===(t=this.ruleList.value[0])||void 0===t?void 0:t.priorityScore)||0)+1,s.dataItemLabel=n,s.name=this.newRuleName,i.diList.forEach((function(e){s.targets.push({dataItemId:e.id})})),s.comparison=this.ruleConditions[0].operator,s.value=this.ruleConditions[0].value,s.action=_.F.Style,s.isActive=!0,s.actionData=((e={})[this.ruleActionKeyCtrl.value]=this.ruleActionValue,e),this.drs.addRule(s),this.setShowForm(!1)},e.prototype.getAllDataItems=function(){return Object(o.a)([])},e.prototype.getAvailableOperators=function(e){return[{label:"CFORMAT_PANEL.OPERATORS.EQUALS",value:_.G.Equals,dTypes:[k.c.NUMBER,k.c.STRING,k.c.STRING_HTML,k.c.STRING_LONG,k.c.OPTION,k.c.OPTION_LIST,k.c.DATE]},{label:"CFORMAT_PANEL.OPERATORS.GREATER_THAN",value:_.G.GreaterThan,dTypes:[k.c.NUMBER]},{label:"CFORMAT_PANEL.OPERATORS.LESSER_THAN",value:_.G.LesserThan,dTypes:[k.c.NUMBER]},{label:"CFORMAT_PANEL.OPERATORS.CONTAINS",value:_.G.Contains,dTypes:[k.c.STRING,k.c.STRING_HTML,k.c.STRING_LONG,k.c.TAGS,k.c.USERS]},{label:"Subtext",value:_.G.SubText,dTypes:[k.c.STRING,k.c.STRING_HTML,k.c.STRING_LONG]},{label:"Is True",value:_.G.IsTrue,dTypes:[k.c.BINARY]},{label:"Is False",value:_.G.IsFalse,dTypes:[k.c.BINARY]}].filter((function(t){return!!(e&&e.dataItem&&e.dataItem.type)&&t.dTypes.includes(e.dataItem.type)}))},e.prototype.setShowForm=function(e){var t,n,r=this;this.showRuleForm.next(e),e?(this.determineShouldAllowSaveAction(),this.ruleConditions.length||this.ruleConditions.push({index:0,dataItem:null,operator:null,value:null,nextCombinator:null,nextIsLast:!1,availableOperators:[]}),this.dataItemFilterCtrl.valueChanges.pipe(Object(f.a)(this._onDestroy)).subscribe((function(){r.filterDataItems()})),this.formCtrlSubs.push(this.ruleNameCtrl.valueChanges.pipe().subscribe((function(e){r.newRuleName=e,r.determineShouldAllowSaveAction()})),this.dataItemCtrl.valueChanges.pipe(Object(m.a)((function(e){a.Jb.track("rules.condition.dataItem.click",{value1:e,value1Type:"data-field-type"}),r.ruleConditions[0].dataItem=e,r.ruleConditions[0].availableOperators=r.getAvailableOperators(r.ruleConditions[0]),r.determineShouldAllowSaveAction(),r.valueInput.first.morphInput(r.getRuleValueInputType(e.type),r.ruleConditions[0].value)}))).subscribe(),this.condOpCtrl.valueChanges.pipe().subscribe((function(e){a.Jb.track("rules.condition.operator.click",{value1:r.operatorMap[e],value1Type:"operator-type"}),r.ruleConditions[0].operator=r.operatorMap[e],r.determineShouldAllowSaveAction(),r.determineShouldAllowCustomValue(e)})),this.condValCtrl.valueChanges.pipe().subscribe((function(e){r.ruleConditions[0].value=e,r.determineShouldAllowSaveAction()})),this.ruleActionKeyCtrl.valueChanges.pipe().subscribe((function(e){var t;a.Jb.track("rules.condition.action.click",{value1:e,value1Type:"action-type"}),null===(t=r.styleInput)||void 0===t||t.first.morphInput(e,r.ruleActionValue),r.determineShouldAllowSaveAction()})),null===(t=this.valueInput)||void 0===t?void 0:t.changes.subscribe((function(e){var t;e.first&&e.first.morphInput(r.getRuleValueInputType(null===(t=r.ruleConditions[0].dataItem)||void 0===t?void 0:t.type),r.ruleConditions[0].value),r.formCtrlSubs.push(e.first.value.pipe(Object(m.a)((function(e){r.ruleConditions[0].value=e,r.determineShouldAllowSaveAction()}))).subscribe())})),null===(n=this.styleInput)||void 0===n?void 0:n.changes.subscribe((function(e){r.ruleActionKeyCtrl.value&&e.first.morphInput(r.ruleActionKeyCtrl.value,r.ruleActionValue),r.formCtrlSubs.push(e.first.value.pipe(Object(m.a)((function(e){r.ruleActionValue=e,r.determineShouldAllowSaveAction()}))).subscribe())})))):(this.formCtrlSubs.forEach((function(e){return e.unsubscribe()})),this.isEditing.next(!1),this.newRuleName="",this.ruleConditions=[],this.dataItemCtrl.reset(),this.condOpCtrl.reset(),this.condValCtrl.reset(),this.ruleActionKeyCtrl.reset(),this.ruleActionValue="",this.ruleNameCtrl.reset())},e.prototype.onRuleOptionClick=function(e,t){switch(t.value){case"active_for_all":a.Jb.track("rules.rulesMenu.active.click"),this.toggleRuleStatus(e,!0);break;case"inactive_for_all":a.Jb.track("rules.rulesMenu.inactive.click"),this.toggleRuleStatus(e,!1);break;case"update":a.Jb.track("rules.rulesMenu.update.click"),this.initEditMode(e);break;case"duplicate":a.Jb.track("rules.rulesMenu.duplicate.click"),this.duplicateRule(e);break;case"delete":a.Jb.track("rules.rulesMenu.delete.click"),this.deleteRule(e);break;case"move_up":a.Jb.track("rules.rulesMenu.move.click"),this.moveRuleOrder(e,le.UP);break;case"move_down":a.Jb.track("rules.rulesMenu.move.click"),this.moveRuleOrder(e,le.DOWN)}},e.prototype.addStyleOptions=function(){this.styleTypes.push({label:"COMMANDS.FILL_COLOR",value:r.FILLCOLOR},{label:"COMMANDS.LINE_COLOR",value:r.LINECOLOR},{label:"COMMANDS.LINE_THICKNESS",value:r.LINETHICKNESS})},e.prototype.toggleRuleStatus=function(e,t){e.isActive=t;var n=new _.H(e.id);Object.assign(n,Object(i.a)({},e)),this.drs.deleteRule(e),this.drs.addRule(n)},e.prototype.deleteRule=function(e){this.drs.deleteRule(e)},e.prototype.duplicateRule=function(e){var t=new _.H(a.rb.ruleId()),n=this.ruleList.value.length?Object(i.j)(this.ruleList.value).reverse().pop().priorityScore:1;Object.assign(t,Object(i.a)(Object(i.a)({},e),{id:t.id,name:e.name+" - copy",priorityScore:n+1})),this.drs.addRule(t)},e.prototype.moveRuleOrder=function(e,t){var n,r,a=this.ruleList.value.indexOf(e),o=this.ruleList.value.length?Object(i.j)(this.ruleList.value).pop().priorityScore:1,s=this.ruleList.value.length?Object(i.j)(this.ruleList.value).reverse().pop().priorityScore:1;if(t===le.UP)1===a?e.priorityScore=s+1:a>1&&(n=this.ruleList.value[a-2].priorityScore,r=this.ruleList.value[a-1].priorityScore,e.priorityScore=r+(n-r)/2);else{var c=this.ruleList.value.length-1;a===c-1?e.priorityScore=o-1e-15:a<c-1&&(n=this.ruleList.value[a+1].priorityScore,r=this.ruleList.value[a+2].priorityScore,e.priorityScore=n-(n-r)/2)}this.drs.deleteRule(e),this.drs.addRule(e)},e.prototype.initEditMode=function(e){this.isEditing&&this.setShowForm(!1),this.currentRuleId=e.id,this.ruleNameCtrl.setValue(e.name),this.newRuleName=this.ruleNameCtrl.value;var t=this.dataDefs.find((function(t){return t.label===e.dataItemLabel}));this.ruleConditions.push({index:0,dataItem:t,operator:e.comparison,value:e.value,availableOperators:[]}),this.dataItemCtrl.setValue(t),this.condOpCtrl.setValue(e.comparison),this.determineShouldAllowCustomValue(e.comparison),this.condValCtrl.setValue(e.value),this.ruleActionKeyCtrl.setValue(Object.keys(e.actionData)[0]||"fillColor"),this.ruleActionValue=e.actionData[this.ruleActionKeyCtrl.value],this.ruleConditions[0].availableOperators=this.getAvailableOperators(this.ruleConditions[0]),this.newRulePriority=e.priorityScore,this.isEditing.next(!0),this.setShowForm(!0)},e.prototype.filterDataItems=function(){if(this.dataDefs){var e=this.dataItemFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredDataItems.next(this.dataDefs.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1})))):this.filteredDataItems.next(this.dataDefs.slice())}},e.prototype.activateObservers=function(){var e,t,n,r=this;return this.state.changes("SelectedLeftPanel").pipe(Object(g.a)(),Object(m.a)((function(i){i===r.panelId?(e=r.listenToDataDefChanges(),t=r.listenToRuleChanges(),n=r.listenToDiagramChanges(),r.subs.push(e,t,n),r.dll.forCurrentObserver(!1).pipe(Object(b.a)((function(e){return e.getDiagramOnce()})),Object(m.a)((function(e){r.processDataDefChange(e.dataDefs),r.ruleList.next(r.sortRuleList(Object.values(e.rules)))}))).subscribe()):(e&&(e.unsubscribe(),e=void 0),t&&(t.unsubscribe(),t=void 0),n&&(n.unsubscribe(),n=void 0))}))).subscribe()},e.prototype.listenToRuleChanges=function(){var e=this;return this.dll.forCurrentObserver(!1).pipe(Object(b.a)((function(e){return e.getDiagramRuleChanges().pipe(Object(b.a)((function(t){return e.getDiagramOnce()})))})),Object(m.a)((function(t){e.ruleList.next(e.sortRuleList(Object.values(t.rules)))}))).subscribe()},e.prototype.listenToDataDefChanges=function(){var e=this;return this.dll.forCurrentObserver(!1).pipe(Object(b.a)((function(e){return e.getDiagramDataDefChanges().pipe(Object(b.a)((function(t){return e.getDiagramOnce()})))})),Object(m.a)((function(t){e.processDataDefChange(t.dataDefs)}))).subscribe()},e.prototype.listenToDiagramChanges=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(v.a)((function(e){return Boolean(e)})),Object(g.a)(),Object(m.a)((function(){e.setShowForm(!1)}))).subscribe()},e.prototype.processDataDefChange=function(t){var n,r=this,i={};for(var a in t)Object(h.assign)(i,t[a]);var o=Object.values(i);this.groupedDataDefs={};for(var s=0;s<o.length;s++){var c=o[s],l=c.label&&c.label.length>0?c.label:c.id;if(null===(n=c.visibility)||void 0===n?void 0:n.some((function(e){return"editor"===e.type}))){c.systemType&&-1===l.indexOf(c.systemType.toString())&&(l+=" ("+c.systemType+")");var u=l+"."+c.type;this.groupedDataDefs[u]||(this.groupedDataDefs[u]={id:l,label:l,diList:[],type:c.type}),c.type&&e.supportedDITypes.includes(c.type)&&this.groupedDataDefs[u].diList.push({id:c.id})}}return this.dataDefs=Object.values(this.groupedDataDefs),this.filteredDataItems.next(this.dataDefs.slice()),this.ruleConditions[0]&&this.ruleConditions[0].dataItem&&this.dataItemCtrl.setValue(this.dataDefs.find((function(e){return e.id===r.ruleConditions[0].dataItem.id}))),this.dataDefs},e.prototype.addRuleOptions=function(){this.ruleOptions.push({id:1,label:"CFORMAT_PANEL.LABELS.ACTIVE_FOR_ALL",value:"active_for_all"},{id:1.1,label:"CFORMAT_PANEL.LABELS.INACTIVE_FOR_ALL",value:"inactive_for_all"}),this.ruleOptions.push({id:.1,label:"",value:"",isSeparator:!0}),this.ruleOptions.push({id:2,label:"CFORMAT_PANEL.LABELS.UPDATE",value:"update"},{id:2.1,label:"CFORMAT_PANEL.LABELS.DUPLICATE",value:"duplicate"},{id:2.2,label:"CFORMAT_PANEL.LABELS.DELETE",value:"delete"}),this.ruleOptions.push({id:.1,label:"",value:"",isSeparator:!0}),this.ruleOptions.push({id:3,label:"Move Up",value:"move_up"},{id:3.1,label:"Move Down",value:"move_down"})},e.prototype.determineShouldAllowSaveAction=function(){var e;this.allowSaveAction.next(!!((null===(e=this.newRuleName)||void 0===e?void 0:e.length)&&this.ruleActionValue&&this.ruleConditions[0].dataItem&&this.ruleConditions[0].operator&&this.ruleConditions[0].value))},e.prototype.determineShouldAllowCustomValue=function(e){[_.G.IsFalse,_.G.IsTrue].includes(e)?(this.allowNoCustomValue.next(!0),this.ruleConditions[0].value=e):this.allowNoCustomValue.next(!1)},e.prototype.getRuleValueInputType=function(e,t){return"string"===e||"number"===e?r.DEFAULT:"date"===e?r.DATE:"users"===e?r.PEOPLE:r.DEFAULT},e.prototype.sortRuleList=function(e){return e.sort((function(e,t){return t.priorityScore-e.priorityScore}))},e.supportedDITypes=[k.c.NUMBER,k.c.STRING,k.c.STRING_HTML,k.c.STRING_LONG,k.c.OPTION,k.c.OPTION_LIST,k.c.TAGS,k.c.DATE,k.c.PEOPLE,k.c.BINARY,k.c.USERS],e.\u0275fac=function(t){return new(t||e)(C.gc(a.Hb),C.gc(a.fb),C.gc(d.a),C.gc(E.a),C.gc(a.B),C.gc(p.a),C.gc(u.l),C.gc(x.a),C.gc(C.j))},e.\u0275cmp=C.ac({type:e,selectors:[["cformat-container"]],viewQuery:function(e,t){var n;(1&e&&(C.kd(q,!0,y.b),C.kd(W,!0,T),C.kd(H,!0,T)),2&e)&&(C.Mc(n=C.vc())&&(t.dbSelector=n.first),C.Mc(n=C.vc())&&(t.styleInput=n),C.Mc(n=C.vc())&&(t.valueInput=n))},decls:22,vars:13,consts:[[1,"cformat-container"],[1,"rule-header"],["translate","",1,"left-sidebar-heading"],[1,"btn-icon"],[1,"nu-icon","nu-icon-small","nu-ic-info","notification-icon","btn-list-item"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-info"],["class","message-card",4,"ngIf"],[1,"cformat-container-add-rule-btn","btn-secondary","btn-medium","left-sidebar-add-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-plus"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["translate",""],[1,"cformat-menu-scrollbar"],[4,"ngIf"],["class","cformat-rule-item-container",4,"ngFor","ngForOf"],[1,"message-card"],[3,"title","body","titleIcon"],[1,"cformat-new-rule-container"],[1,"cformat-new-rule-target-selection","caption--sm"],["translate","",4,"ngIf"],[1,"form-control","caption",3,"formControl"],["translate","",1,"caption--sm"],["class","cformat-new-rule-condition-item cformat-new-rule-target-selection ",4,"ngFor","ngForOf"],[1,"cformat-rule-action-conatinar","caption--sm"],["class","form-control-select-option",3,"value",4,"ngFor","ngForOf"],[1,"cformat-style-value-input"],["styleInput",""],[1,"cformat-buttons-container","caption"],["class","btn-primary btn-small ","translate","",3,"trackAction","disabled","click",4,"ngIf"],["class","btn-primary btn-small","translate","",3,"trackAction","disabled","click",4,"ngIf"],["translate","",1,"btn-secondary","btn-small",3,"trackAction","click"],[1,"cformat-new-rule-condition-item","cformat-new-rule-target-selection"],["placeholder","Data Item","panelClass","form-control-select-panel",1,"form-control","caption",3,"formControl"],["itemSize","50"],["placeholderLabel","Select Data Item","noEntriesFoundLabel","No Entries Found",3,"formControl"],["class","form-control-select-option caption",3,"value",4,"ngFor","ngForOf"],[1,"cformat-style-value-input",3,"ngStyle"],["valueInput",""],[1,"form-control-select-option","caption",3,"value"],["placeholder","Operator",1,"form-control","caption",3,"formControl"],[1,"form-control-select-option",3,"value"],["translate","",1,"caption"],["translate","",1,"btn-primary","btn-small",3,"trackAction","disabled","click"],[1,"cformat-rule-item-container"],["alignment","left",3,"settings"],["dropdown",""],["ddbutton",""],[1,"cformat-rules-rule-icon-container",3,"ngClass"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-globe"],["dditem","",3,"item","click",4,"ngFor","ngForOf"],[1,"body"],["dditem","",3,"item","click"],["translate","",1,"cformat-rules-rule-option-item","body"]],template:function(e,t){1&e&&(C.mc(0,"div",0),C.mc(1,"div",1),C.mc(2,"div",2),C.fd(3," CFORMAT_PANEL.LABELS.HEADER "),C.lc(),C.mc(4,"button",3),C.xc(),C.mc(5,"svg",4),C.hc(6,"use",5),C.lc(),C.lc(),C.lc(),C.dd(7,K,2,3,"div",6),C.zc(8,"async"),C.zc(9,"async"),C.wc(),C.mc(10,"div",7),C.uc("click",(function(){return t.setShowForm(!0)})),C.xc(),C.mc(11,"svg",8),C.hc(12,"use",9),C.lc(),C.wc(),C.mc(13,"span",10),C.fd(14,"CFORMAT_PANEL.BUTTONS.ADD_NEW_RULE"),C.lc(),C.lc(),C.mc(15,"perfect-scrollbar",11),C.mc(16,"div"),C.dd(17,re,25,18,"ng-container",12),C.zc(18,"async"),C.kc(19),C.dd(20,ce,10,9,"div",13),C.zc(21,"async"),C.jc(),C.lc(),C.lc(),C.lc()),2&e&&(C.Sb(7),C.Dc("ngIf",!C.Ac(8,4,t.showRuleForm)&&0===C.Ac(9,6,t.ruleList).length),C.Sb(3),C.Dc("trackAction",C.Hc(12,ue)),C.Sb(7),C.Dc("ngIf",C.Ac(18,8,t.showRuleForm)),C.Sb(3),C.Dc("ngForOf",C.Ac(21,10,t.ruleList)))},directives:[A.a,P.t,M.a,D.b,P.s,j.a,O.d,O.s,O.i,R.a,T,L.k,N.a,P.w,B.a,U.a,P.q,F.a],pipes:[P.b],styles:['[class*=nu-btn]{border-radius:6px;padding-left:10px;padding-right:10px}.nu-btn-large{height:40px;font-size:18px;margin-left:5px;margin-right:5px;font-family:Open Sans,sans-serif;cursor:pointer;border:none;border-radius:6px}.nu-btn-large.primary:hover:enabled{background-color:#51c0aa;color:#fff}.nu-btn-large.primary:hover:enabled .nu-icon{color:#fff}.nu-btn-large.primary:active{background-color:#08436b}.nu-btn-large.primary.nu-btn-icon{border:0}.nu-btn-large.primary.nu-btn-icon:active,.nu-btn-large.primary.nu-btn-icon:hover{background-color:transparent}.nu-btn-large.border-none{border:0}.nu-btn-large.secondary{border:.5px solid #95a8af;color:#04263d}.nu-btn-large.secondary .nu-icon{color:#04263d}.nu-btn-large.secondary:hover:enabled{background-color:#fff;border:1px solid #08436b}.nu-btn-large.secondary:active{background-color:#dcf2ee;border:none}.nu-btn-large.secondary.nu-btn-icon:active,.nu-btn-large.secondary.nu-btn-icon:hover{background-color:transparent}.nu-btn-large.link{color:#51c0aa;border:none}.nu-btn-large.link .nu-icon{color:#51c0aa}.nu-btn-large.link:hover:enabled,.nu-btn-large.link:hover:enabled svg{color:#29947f}.nu-btn-large.link:active{color:#51c0aa}.nu-btn-large:focus{outline:none}.nu-btn-large.active .nu-icon{color:#61a15e}.nu-btn-large.nu-btn-icon{background:transparent;margin:0}.nu-btn-large.nu-btn-icon .nu-icon{color:#04263d}.nu-btn-large.nu-btn-icon.active .nu-icon,.nu-btn-large.nu-btn-icon:hover:enabled .nu-icon{color:#51c0aa}.nu-btn-large.nu-btn-icon-text{padding-left:5px}.nu-btn-large.nu-btn-icon-text .nu-icon{width:25px;height:25px;display:inline-block;vertical-align:middle}.nu-btn-large.nu-btn-icon-text label{margin-left:5px;cursor:pointer;-webkit-user-select:0;-moz-user-select:0;user-select:0;vertical-align:middle}.nu-btn-large:disabled,.nu-btn-large[disabled]{cursor:auto;background-color:#f2f5fb;color:#9fa9bc;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu-btn-large:disabled .nu-icon,.nu-btn-large[disabled] .nu-icon{color:#9fa9bc}.nu-btn-large:disabled.nu-btn-icon,.nu-btn-large[disabled].nu-btn-icon{background-color:transparent}.nu-btn-large:disabled.nu-btn-icon .nu-icon,.nu-btn-large:disabled.nu-btn-icon:hover .nu-icon,.nu-btn-large[disabled].nu-btn-icon .nu-icon,.nu-btn-large[disabled].nu-btn-icon:hover .nu-icon{color:#9fa9bc}.nu-btn-large.primary-2{background-color:#fff;border:1px solid #ccc}.nu-btn-large.primary-2:hover{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65);border:1px solid rgba(81,192,170,.35)}.nu-btn-large.primary-2:hover svg{color:#29947f}.nu-btn-large.primary-2:active{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),#c2f0e7;border:1px solid rgba(81,192,170,.35)}.nu-btn-large.primary-2:active svg{color:#195249}.nu-btn-med{height:35px;font-size:14px;margin-left:5px;margin-right:5px;font-family:Open Sans,sans-serif;cursor:pointer;border:none;border-radius:6px}.nu-btn-med.primary:hover:enabled{background-color:#51c0aa;color:#fff}.nu-btn-med.primary:hover:enabled .nu-icon{color:#fff}.nu-btn-med.primary:active{background-color:#08436b}.nu-btn-med.primary.nu-btn-icon{border:0}.nu-btn-med.primary.nu-btn-icon:active,.nu-btn-med.primary.nu-btn-icon:hover{background-color:transparent}.nu-btn-med.border-none{border:0}.nu-btn-med.secondary{border:.5px solid #95a8af;color:#04263d}.nu-btn-med.secondary .nu-icon{color:#04263d}.nu-btn-med.secondary:hover:enabled{background-color:#fff;border:1px solid #08436b}.nu-btn-med.secondary:active{background-color:#dcf2ee;border:none}.nu-btn-med.secondary.nu-btn-icon:active,.nu-btn-med.secondary.nu-btn-icon:hover{background-color:transparent}.nu-btn-med.link{color:#51c0aa;border:none}.nu-btn-med.link .nu-icon{color:#51c0aa}.nu-btn-med.link:hover:enabled,.nu-btn-med.link:hover:enabled svg{color:#29947f}.nu-btn-med.link:active{color:#51c0aa}.nu-btn-med:focus{outline:none}.nu-btn-med.active .nu-icon{color:#61a15e}.nu-btn-med.nu-btn-icon{background:transparent;margin:0}.nu-btn-med.nu-btn-icon .nu-icon{color:#04263d}.nu-btn-med.nu-btn-icon.active .nu-icon,.nu-btn-med.nu-btn-icon:hover:enabled .nu-icon{color:#51c0aa}.nu-btn-med.nu-btn-icon-text{padding-left:5px}.nu-btn-med.nu-btn-icon-text .nu-icon{width:25px;height:25px;display:inline-block;vertical-align:middle}.nu-btn-med.nu-btn-icon-text label{margin-left:5px;cursor:pointer;-webkit-user-select:0;-moz-user-select:0;user-select:0;vertical-align:middle}.nu-btn-med:disabled,.nu-btn-med[disabled]{cursor:auto;background-color:#f2f5fb;color:#9fa9bc;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu-btn-med:disabled .nu-icon,.nu-btn-med[disabled] .nu-icon{color:#9fa9bc}.nu-btn-med:disabled.nu-btn-icon,.nu-btn-med[disabled].nu-btn-icon{background-color:transparent}.nu-btn-med:disabled.nu-btn-icon .nu-icon,.nu-btn-med:disabled.nu-btn-icon:hover .nu-icon,.nu-btn-med[disabled].nu-btn-icon .nu-icon,.nu-btn-med[disabled].nu-btn-icon:hover .nu-icon{color:#9fa9bc}.nu-btn-med.primary-2{background-color:#fff;border:1px solid #ccc}.nu-btn-med.primary-2:hover{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65);border:1px solid rgba(81,192,170,.35)}.nu-btn-med.primary-2:hover svg{color:#29947f}.nu-btn-med.primary-2:active{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),#c2f0e7;border:1px solid rgba(81,192,170,.35)}.nu-btn-med.primary-2:active svg{color:#195249}.nu-btn-small{height:30px;font-size:14px;margin-left:5px;margin-right:5px;font-family:Open Sans,sans-serif;cursor:pointer;border:none;border-radius:6px}.nu-btn-small.primary:hover:enabled{background-color:#51c0aa;color:#fff}.nu-btn-small.primary:hover:enabled .nu-icon{color:#fff}.nu-btn-small.primary:active{background-color:#08436b}.nu-btn-small.primary.nu-btn-icon{border:0}.nu-btn-small.primary.nu-btn-icon:active,.nu-btn-small.primary.nu-btn-icon:hover{background-color:transparent}.nu-btn-small.border-none{border:0}.nu-btn-small.secondary{border:.5px solid #95a8af;color:#04263d}.nu-btn-small.secondary .nu-icon{color:#04263d}.nu-btn-small.secondary:hover:enabled{background-color:#fff;border:1px solid #08436b}.nu-btn-small.secondary:active{background-color:#dcf2ee;border:none}.nu-btn-small.secondary.nu-btn-icon:active,.nu-btn-small.secondary.nu-btn-icon:hover{background-color:transparent}.nu-btn-small.link{color:#51c0aa;border:none}.nu-btn-small.link .nu-icon{color:#51c0aa}.nu-btn-small.link:hover:enabled,.nu-btn-small.link:hover:enabled svg{color:#29947f}.nu-btn-small.link:active{color:#51c0aa}.nu-btn-small:focus{outline:none}.nu-btn-small.active .nu-icon{color:#61a15e}.nu-btn-small.nu-btn-icon{background:transparent;margin:0}.nu-btn-small.nu-btn-icon .nu-icon{color:#04263d}.nu-btn-small.nu-btn-icon.active .nu-icon,.nu-btn-small.nu-btn-icon:hover:enabled .nu-icon{color:#51c0aa}.nu-btn-small.nu-btn-icon-text{padding-left:5px}.nu-btn-small.nu-btn-icon-text .nu-icon{width:25px;height:25px;display:inline-block;vertical-align:middle}.nu-btn-small.nu-btn-icon-text label{margin-left:5px;cursor:pointer;-webkit-user-select:0;-moz-user-select:0;user-select:0;vertical-align:middle}.nu-btn-small:disabled,.nu-btn-small[disabled]{cursor:auto;background-color:#f2f5fb;color:#9fa9bc;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu-btn-small:disabled .nu-icon,.nu-btn-small[disabled] .nu-icon{color:#9fa9bc}.nu-btn-small:disabled.nu-btn-icon,.nu-btn-small[disabled].nu-btn-icon{background-color:transparent}.nu-btn-small:disabled.nu-btn-icon .nu-icon,.nu-btn-small:disabled.nu-btn-icon:hover .nu-icon,.nu-btn-small[disabled].nu-btn-icon .nu-icon,.nu-btn-small[disabled].nu-btn-icon:hover .nu-icon{color:#9fa9bc}.nu-btn-small.primary-2{background-color:#fff;border:1px solid #ccc}.nu-btn-small.primary-2:hover{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65);border:1px solid rgba(81,192,170,.35)}.nu-btn-small.primary-2:hover svg{color:#29947f}.nu-btn-small.primary-2:active{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),#c2f0e7;border:1px solid rgba(81,192,170,.35)}.nu-btn-small.primary-2:active svg{color:#195249}.nu-btn-on-grey{display:flex;align-items:center}a.disabled{pointer-events:none;color:#dcdcdc;background-color:transparent}.nu-btn-icon.primary .nu-icon{color:#08436b}.nu-btn-icon.secondary .nu-icon{color:#f6f6fa}.nu-btn-icon.dark-blue .nu-icon{color:#04263d}.nu-btn-icon.light-purple .nu-icon{color:#c3c3de}.nu-btn-icon.xlight-grey .nu-icon{color:#f0f0f0}.nu-btn-icon.light-grey .nu-icon{color:#ececec}.nu-btn-icon.xmedium-grey .nu-icon{color:#dcdcdc}.nu-btn-icon.medium-grey .nu-icon{color:#aaa}.nu-btn-icon.grey .nu-icon{color:#7e7e7e}.nu-btn-icon.blueish-grey .nu-icon{color:#f3f5fa}.nu-btn-icon.light-nv-blue .nu-icon{color:#627281}.nu-btn-icon.navy-blue .nu-icon{color:#415a71}.nu-btn-icon.primary-blue .nu-icon{color:#0c5e96}.nu-btn-icon.navy-blue-off .nu-icon{color:#414b61}.nu-btn-icon.white .nu-icon{color:#fff}.nu-btn-icon.beige .nu-icon{color:#f9f8f7}.nu-btn-icon.orange .nu-icon{color:#f6aa00}.nu-btn-icon.light-orange .nu-icon{color:#f5ab1c}.nu-btn-icon.dark-orange .nu-icon{color:#fab638}.nu-btn-icon.crimson .nu-icon{color:#f36c67}.nu-btn-icon.black .nu-icon{color:#686868}.nu-btn-icon.green .nu-icon{color:#61a15e}.nu-btn-icon.yellow .nu-icon{color:#ffc648}.nu-btn-icon.purple .nu-icon{color:#5d3eaa}.nu-btn-icon.light-red .nu-icon{color:#f05252}.nu-btn-icon.peachy-white .nu-icon{color:#fae8e5}.nu-btn-icon.charade .nu-icon{color:#3d4242}.nu-btn-icon.light-green .nu-icon{color:#dcf2ee}.nu-btn-icon.dark-grey .nu-icon{color:#14282e}.nu-btn-icon.dark-red .nu-icon{color:#d92626}.nu-btn-icon.mlight-grey .nu-icon{color:#caccce}.nu-btn-icon.mint-cream .nu-icon{color:#f4fcfa}.nu-btn-icon.medium-dark-grey .nu-icon{color:#697274}.nu-btn-icon.muted-blue .nu-icon{color:#88a1aa}.nu-btn-icon.grey-lightest .nu-icon{color:#fafafc}.nu-btn-icon.ne-red .nu-icon{color:#f05151}.nu-btn-icon.ne-grey .nu-icon{color:#a0a0a0}.nu-btn-icon.ne-blue .nu-icon{color:#06263d}[class*=btn-]{border-radius:6px;font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-weight:400;line-height:1;cursor:pointer}.btn-primary{color:#fff;background-color:#08436b!important;border:none}.btn-primary:hover{color:#fff;background-color:#0c5e96!important;box-shadow:none}.btn-primary.active,.btn-primary:active,.btn-primary[active]{color:#fff;background-color:#08436b!important;border:none}.btn-primary.disabled,.btn-primary:disabled,.btn-primary[disabled]{color:#fff;background-color:#caccce!important;border:none;box-shadow:none;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.btn-primary.disabled svg,.btn-primary:disabled svg,.btn-primary[disabled] svg{color:#fff}.btn-secondary{border:.5px solid #95a8af}.btn-secondary,.btn-secondary:hover{color:#04263d;background-color:#fff!important}.btn-secondary:hover{box-shadow:inset 0 0 0 1px #08436b}.btn-secondary.active,.btn-secondary:active,.btn-secondary[active]{color:#04263d;background-color:#d5e8f4!important;border:none}.btn-secondary.disabled,.btn-secondary:disabled,.btn-secondary[disabled]{color:#caccce;background-color:#fff!important;border:.5px solid #caccce;box-shadow:none;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.btn-secondary.disabled svg,.btn-secondary:disabled svg,.btn-secondary[disabled] svg{color:#caccce}.btn-list-item{color:#08436b;background-color:#fff!important;border:none}.btn-list-item:hover{color:#08436b;background-color:#f1f8fd!important;box-shadow:none}.btn-list-item.active,.btn-list-item:active,.btn-list-item[active]{color:#08436b;background-color:#d5e8f4!important;border:none}.btn-list-item.disabled,.btn-list-item:disabled,.btn-list-item[disabled]{color:#64767d;background-color:#fff!important;border:none;box-shadow:none;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.btn-list-item.disabled svg,.btn-list-item:disabled svg,.btn-list-item[disabled] svg{color:#64767d}.btn-outline{color:#04263d;background-color:#fff!important;border:.5px solid rgba(42,82,94,.3)}.btn-outline:hover{color:#fff;background-color:#0c5e96!important;box-shadow:none}.btn-outline.active,.btn-outline:active,.btn-outline[active]{color:#fff;background-color:#0c5e96!important;border:none}.btn-outline.disabled,.btn-outline:disabled,.btn-outline[disabled]{color:rgba(98,104,106,.5);background-color:#fff!important;border:.5px solid #caccce;box-shadow:none;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.btn-outline.disabled svg,.btn-outline:disabled svg,.btn-outline[disabled] svg{color:rgba(98,104,106,.5)}.btn-link{color:#1381cd;border:none}.btn-link,.btn-link:hover{background-color:none!important}.btn-link:hover{color:#0c5e96;box-shadow:none}.btn-link.active,.btn-link:active,.btn-link[active]{color:#08436b;background-color:none!important;border:none}.btn-link.disabled,.btn-link:disabled,.btn-link[disabled]{color:#caccce;background-color:none!important;border:none;box-shadow:none;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.btn-link.disabled svg,.btn-link:disabled svg,.btn-link[disabled] svg{color:#caccce}.btn-icon{color:#08436b;background-color:transparent!important;border:none}.btn-icon:hover{color:#08436b;background-color:#f1f8fd!important;box-shadow:none}.btn-icon.active,.btn-icon:active,.btn-icon[active]{color:#08436b;background-color:#d5e8f4!important;border:none}.btn-icon.disabled,.btn-icon:disabled,.btn-icon[disabled]{color:#64767d;background-color:none!important;border:none;box-shadow:none;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.btn-icon.disabled svg,.btn-icon:disabled svg,.btn-icon[disabled] svg{color:#64767d}.btn-warning{color:#eab23a;background-color:#fff!important;border:.5px solid #eab23a}.btn-warning:hover{color:#eab23a;background-color:rgba(234,178,58,.05)!important;box-shadow:inset 0 0 0 .5px #eab23a}.btn-warning.active,.btn-warning:active,.btn-warning[active]{color:#eab23a;background-color:#fff!important;border:.5px solid #eab23a}.btn-warning.disabled,.btn-warning:disabled,.btn-warning[disabled]{color:#eab23a;background-color:#caccce!important;border:none;box-shadow:none;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.btn-warning.disabled svg,.btn-warning:disabled svg,.btn-warning[disabled] svg{color:#eab23a}.btn-error{color:#d92626;background-color:#fff!important;border:.5px solid #d92626}.btn-error:hover{color:#d92626;background-color:rgba(217,38,38,.05)!important;box-shadow:inset 0 0 0 .5px #d92626}.btn-error.active,.btn-error:active,.btn-error[active]{color:#d92626;background-color:#fff!important;border:.5px solid #d92626}.btn-error.disabled,.btn-error:disabled,.btn-error[disabled]{color:#d92626;background-color:#caccce!important;border:none;box-shadow:none;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.btn-error.disabled svg,.btn-error:disabled svg,.btn-error[disabled] svg{color:#d92626}.btn-small{height:32px;font-size:12px;padding:5px 12px}.btn-medium,.btn-small{background-color:transparent}.btn-medium{height:36px;font-size:14px;padding:7px 14px}.btn-large{height:44px;font-size:16px;padding:11px 24px}.btn-free-size,.btn-large{background-color:transparent}.btn-free-size{padding:6px 8px}.nu-icon{display:inline-block;width:30px;height:30px;stroke-width:0;stroke:currentColor;fill:currentColor;color:#08436b}.nu-icon-primary-fill{fill:#08436b}.nu-icon.primary{color:#08436b}.nu-icon.secondary{color:#f6f6fa}.nu-icon.dark-blue{color:#04263d}.nu-icon.light-purple{color:#c3c3de}.nu-icon.xlight-grey{color:#f0f0f0}.nu-icon.light-grey{color:#ececec}.nu-icon.xmedium-grey{color:#dcdcdc}.nu-icon.medium-grey{color:#aaa}.nu-icon.grey{color:#7e7e7e}.nu-icon.blueish-grey{color:#f3f5fa}.nu-icon.light-nv-blue{color:#627281}.nu-icon.navy-blue{color:#415a71}.nu-icon.primary-blue{color:#0c5e96}.nu-icon.navy-blue-off{color:#414b61}.nu-icon.white{color:#fff}.nu-icon.beige{color:#f9f8f7}.nu-icon.orange{color:#f6aa00}.nu-icon.light-orange{color:#f5ab1c}.nu-icon.dark-orange{color:#fab638}.nu-icon.crimson{color:#f36c67}.nu-icon.black{color:#686868}.nu-icon.green{color:#61a15e}.nu-icon.yellow{color:#ffc648}.nu-icon.purple{color:#5d3eaa}.nu-icon.light-red{color:#f05252}.nu-icon.peachy-white{color:#fae8e5}.nu-icon.charade{color:#3d4242}.nu-icon.light-green{color:#dcf2ee}.nu-icon.dark-grey{color:#14282e}.nu-icon.dark-red{color:#d92626}.nu-icon.mlight-grey{color:#caccce}.nu-icon.mint-cream{color:#f4fcfa}.nu-icon.medium-dark-grey{color:#697274}.nu-icon.muted-blue{color:#88a1aa}.nu-icon.grey-lightest{color:#fafafc}.nu-icon.ne-red{color:#f05151}.nu-icon.ne-grey{color:#a0a0a0}.nu-icon.ne-blue{color:#06263d}.nu-icon-xsmall{width:15px;height:15px}.nu-icon-small{width:20px;height:20px}.nu-icon-med{width:25px;height:25px}.nu-icon-large{width:45px;height:45px}.nu-icon-xlarge{width:70px;height:70px}.nu-loader-shimmer{width:inherit;height:inherit;top:0;left:0;background:#dcdcdc;background:linear-gradient(90deg,#eee 8%,#ddd 18%,#eee 33%);background-size:300px 75px;-webkit-animation-duration:2s;animation-duration:2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:shimmer;animation-name:shimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear}@-webkit-keyframes shimmer{0%{background-position:-80px 0}to{background-position:80px 0}}@keyframes shimmer{0%{background-position:-80px 0}to{background-position:80px 0}}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn{-webkit-animation-name:fadeIn;animation-name:fadeIn}@-webkit-keyframes fadeInUp{0%{opacity:0;transform:translate3d(0,20px,0)}to{opacity:1;transform:translateZ(0)}}@keyframes fadeInUp{0%{opacity:0;transform:translate3d(0,20px,0)}to{opacity:1;transform:translateZ(0)}}.fadeInUp{-webkit-animation-name:fadeInUp;animation-name:fadeInUp}@-webkit-keyframes slideInRight{0%{transform:translate3d(100%,0,0);visibility:visible}to{transform:translateZ(0)}}@keyframes slideInRight{0%{transform:translate3d(100%,0,0);visibility:visible}to{transform:translateZ(0)}}.slideInRight{-webkit-animation-name:slideInRight;animation-name:slideInRight}.animated{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.animated.infinite{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.animated.delay-1s{-webkit-animation-delay:1s;animation-delay:1s}.animated.delay-2s{-webkit-animation-delay:2s;animation-delay:2s}.animated.delay-3s{-webkit-animation-delay:3s;animation-delay:3s}.animated.delay-4s{-webkit-animation-delay:4s;animation-delay:4s}.animated.delay-5s{-webkit-animation-delay:5s;animation-delay:5s}.animated.fast{-webkit-animation-duration:.8s;animation-duration:.8s}.animated.faster{-webkit-animation-duration:.5s;animation-duration:.5s}.animated.slow{-webkit-animation-duration:2s;animation-duration:2s}.animated.slower{-webkit-animation-duration:3s;animation-duration:3s}@media (prefers-reduced-motion){.animated{-webkit-animation:unset!important;animation:unset!important;transition:none!important}}.modal-window-container{z-index:1000;background-color:rgba(0,0,0,.08)}.modal-window-container-no-bg{z-index:1000;background-color:transparent}.modal-window-inner{padding:.875rem;border-radius:6px;position:relative;background-color:#fff}.modal-window-heading{padding-top:.625rem;padding-bottom:1.25rem;display:flex;align-items:center;text-align:left}.modal-window-heading button{position:absolute;right:.25rem}.modal-window-heading .nu-icon:hover{color:#08436b}.text-input,.text-input-multilined{padding:.5rem;margin-top:.25rem;border:1px solid #caccce;width:100%;outline:none;white-space:pre-wrap;background-color:#fff;border-radius:.25rem;-webkit-user-select:text;-moz-user-select:text;user-select:text}input.text-input:focus{border:1px solid #88a1aa}input.text-input::-moz-placeholder{color:#95a8af}input.text-input::placeholder{color:#95a8af}.text-input-multilined:focus{border:1px solid #88a1aa}.text-input-multilined:empty:before{content:attr(data-placeholder);color:#95a8af}.text-input-multilined,div.text-input,input.text-input{cursor:text;color:#354b53}.text-input-multilined:hover,div.text-input:hover,input.text-input:hover{border:.5px solid #08436b}.text-item-inline{display:flex;flex-direction:row;align-items:center}.text-item-inline label{flex:1;margin-right:10px}.dropdown-item .uneditable{pointer-events:none}.dropdown-item:hover .dropdown-selection{border:.5px solid #08436b}.dropdown-selection{padding-right:30px}.nu-dropdown-container{position:relative;display:block}.nu-dropdown-arrow{position:absolute;right:0;top:0}.nu2-title{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:6rem;font-weight:600;line-height:6rem;letter-spacing:-.05em}.nu2-subtitle{font-size:3rem;font-weight:300;line-height:4rem}.n2-heading-1,.nu2-subtitle{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;letter-spacing:-.025em}.n2-heading-1{font-size:4rem;font-weight:400;line-height:4.5rem}.nu2-heading-2{font-size:3rem;line-height:3rem}.nu2-heading-2,.nu2-heading-3{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-weight:400;letter-spacing:0}.nu2-heading-3{font-size:2.25rem}.nu2-heading-4{font-size:1.5rem;line-height:2.25rem;letter-spacing:-.025em}.nu2-heading-4,.nu2-heading-5{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-weight:600}.nu2-heading-5{font-size:1.25rem;line-height:1.5rem;letter-spacing:.025em}.nu2-heading-6{font-size:1rem;font-weight:400;letter-spacing:0}.nu2-heading-6,.nu2-subheading-1{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5rem}.nu2-subheading-1{font-size:2rem;font-weight:300;letter-spacing:-.05em}.nu2-subheading-2{font-size:1.5rem}.nu2-subheading-2,.nu2-subheading-3{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-weight:400;line-height:2rem;letter-spacing:0}.nu2-subheading-3{font-size:1.25rem}.nu2-subheading-4{font-size:1.125rem}.nu2-subheading-4,.nu2-subheading-5{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-weight:400;line-height:2rem;letter-spacing:0}.nu2-subheading-5{font-size:1rem}.nu2-body-large{font-size:1.125rem;font-weight:400;line-height:1.25rem}.nu2-body-regular{font-size:1rem;font-weight:400}.nu2-body-small{font-size:.875rem}.nu2-body-small,.nu2-body-smaller{font-weight:400;line-height:1.25rem}.nu2-body-smaller{font-size:1rem;font-size:calc(.75rem + 1px)}.nu2-body-smallest{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:.75rem;font-weight:400;line-height:1rem}.nu2-button-large{font-size:1rem;font-weight:600;line-height:1.25rem}.nu2-button-regular{font-size:.875rem;font-weight:600;line-height:1rem}.nu2-caption-1{font-size:.875rem;font-weight:400}.nu2-caption-1,.nu2-caption-2{line-height:1.25rem;letter-spacing:0}.nu2-caption-2{font-weight:700}.nu2-caption-2,.nu2-caption-3{font-size:1rem;font-size:calc(.75rem + 1px)}.nu2-caption-3{font-weight:600;line-height:1.25rem;letter-spacing:0}.nu2-caption-4,.nu2-caption-5{font-size:.75rem;font-weight:600;line-height:1rem;letter-spacing:0}.nu2-caption-5{font-size:calc(.625rem + 1px)}.nu2-caption-6{font-size:.75rem;font-weight:400;line-height:1rem;letter-spacing:0;font-size:calc(.625rem + 1px)}.nu2-caption-7{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:14px;font-style:normal;font-weight:600;line-height:20px;letter-spacing:0}.nu2-overline{font-size:.625rem;font-weight:600;line-height:1rem;letter-spacing:.05em}.nu2-caption-overline{font-size:.625rem;font-weight:400;line-height:1rem;letter-spacing:.025em}.nu2-caption-small-regular{font-size:.75rem;font-weight:400;line-height:1rem}.nu2-caption-large-regular{font-weight:400;line-height:1rem}.nu2-caption-large-bold,.nu2-caption-large-regular{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:.875rem}.nu2-caption-large-bold{font-weight:700;line-height:1.25rem;letter-spacing:0;text-align:left;text-transform:none}.nu2-link,.nu2-link:hover{color:#04263d}.nu2-body-small-semibold{font-size:.75rem;font-weight:600;line-height:1rem}.nu2-body-small-semibold,.title{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.title{font-size:1.25rem;font-weight:400;line-height:2rem}.title--md{font-size:calc(1.25rem + .125rem)}.title--lg{font-size:1.75rem}.title--xl{font-size:calc(2rem + .125rem);line-height:1.75rem}.title--semibold{font-weight:500}.title--bold{font-weight:600}.body{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:.875rem;font-weight:400;line-height:1.5rem}.body--lg{font-size:1rem}.body--bold{font-weight:500}.caption{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:.75rem;font-weight:400;line-height:1rem}.caption--sm{font-size:calc(.625rem + 1px);line-height:calc(.75rem + 1px)}.caption--bold{font-weight:500}.overline{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1rem;font-weight:400;letter-spacing:.05em;text-transform:uppercase;font-size:calc(.5rem + 1px)}.overline--lg{font-size:calc(.625rem + 1px)}.overline--bold{font-weight:500}.heading{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1rem;font-weight:400}.heading--title{font-size:6rem;line-height:6rem;letter-spacing:-.05em}.heading--subtitle{font-size:3rem;font-weight:600;line-height:4rem;letter-spacing:-.025em}.heading--l1{font-size:4rem;line-height:4.5rem;letter-spacing:-.025em}.heading--l2{font-size:3rem;line-height:3rem;letter-spacing:0}.heading--l3{font-size:2.25rem;letter-spacing:0}.heading--l4{font-weight:600;font-size:1.5rem;line-height:2.25rem;letter-spacing:-.025em}.heading--l5{font-weight:600;font-size:1.25rem;line-height:1.5rem;letter-spacing:.025em}.heading--l6{font-size:1rem;line-height:1.5rem;letter-spacing:0}.heading--subheading-1{font-size:2rem;font-weight:300;line-height:2.5rem;letter-spacing:-.05em}.heading--subheading-2{font-size:1.5rem;line-height:2rem;letter-spacing:0}.heading--subheading-3{font-size:1.25rem;line-height:2rem;letter-spacing:0}.heading--subheading-4{font-size:1.125rem;line-height:2rem;letter-spacing:0}.heading--subheading-5{font-size:1rem;line-height:2rem;letter-spacing:0}.prose{font-size:1rem;font-weight:400}.prose--lg{font-size:1.125rem}.prose--md{font-size:.875rem;line-height:1.25rem}.prose--sm{font-size:calc(.75rem + 1px);line-height:1.25rem}.prose--xs{font-size:.75rem;line-height:1rem}.prose__caption{line-height:1.25rem;letter-spacing:0}.prose__caption--l1{font-size:.875rem}.prose__caption--l2{font-size:calc(.75rem + 1px);font-weight:700}.prose__caption--l3{font-size:calc(.75rem + 1px);font-weight:600}.prose__caption--l4{font-size:.75rem;font-weight:600;line-height:1rem}.prose__caption--l5{font-weight:600}.prose__caption--l5,.prose__caption--l6{font-size:calc(.625rem + 1px);line-height:1rem}.tooltip{padding:.625rem;position:absolute;z-index:1001;max-width:250px;background-color:#04263d;border-radius:6px;color:#fff}.tooltip>*{display:block}.tooltip-arrow{position:absolute;z-index:1001}.tooltip-arrow.bottom{border-bottom:5px solid #04263d}.tooltip-arrow.bottom,.tooltip-arrow.top{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent}.tooltip-arrow.top{border-top:5px solid #04263d}.tooltip-arrow.left{border-left:5px solid #04263d}.tooltip-arrow.left,.tooltip-arrow.right{width:0;height:0;border-top:5px solid transparent;border-bottom:5px solid transparent}.tooltip-arrow.right{border-right:5px solid #04263d}.tooltip-header{line-height:1.5rem;font-size:.875rem}.tooltip-body{margin-top:.25rem;line-height:.875rem;font-size:calc(.625rem + 1px)}.tooltip-content{line-height:1rem;font-size:.75rem}.tooltip-content .tooltip-label{margin-right:1rem}.tooltip-content .tooltip-shortcut{opacity:.5}.coming-soon-tooltip-container{min-width:200px;padding:0}.coming-soon-tooltip-container .coming-soon-feature-text{padding:10px;line-height:18px;font-size:13px}.coming-soon-header{display:flex;background-color:#404652;border-radius:5px 5px 0 0}.coming-soon-header span{flex:1;padding:5px 5px 5px 10px;font-weight:700}.coming-soon-header .coming-soon-header-ribbon{position:relative;border-radius:0 5px 0 0;padding:5px 10px;background-color:#131519;color:#faa72d;font-size:13px}.coming-soon-header .coming-soon-header-ribbon:before{content:"";width:10px;position:absolute;background:#131519;top:0;left:-5px;bottom:0;transform:skew(-20deg)}*{margin:0;padding:0;border:0;outline:none}h2{font-size:18px}h2,h3{font-weight:400}h3{font-size:16px}a.fx-underline{font-weight:700;font-size:inherit}a.fx-underline:hover{color:inherit;text-decoration:underline}a.primary[disabled],a.primary[disabled]:hover{background:hsla(0,0%,67.8%,.2)!important;color:#b9b9b9!important;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:unset;pointer-events:none}.fx-center-all{display:flex;-moz-justify-content:center;-ms-justify-content:center;justify-content:center;-ms-flex-pack:center;-moz-align-items:center;-ms-align-items:center;align-items:center}.fx-center-horizontal-without-flex{top:0;left:0;right:0;margin:0 auto;position:absolute}.fx-center-vertical{display:flex;-moz-flex-direction:row;flex-direction:row;-moz-align-items:center;-ms-align-items:center;align-items:center}.fx-center-vertical-without-flex{position:absolute;margin:0 auto;left:0;right:0}.fx-center-column{display:flex;-moz-flex-direction:column;flex-direction:column;-moz-align-items:center;-ms-align-items:center;align-items:center}.fx-center-without-flex{transform:translate(-50%,-50%);left:50%;top:50%;position:absolute}.fx-justify-space-between{display:flex;-moz-justify-content:space-between;-ms-justify-content:space-between;justify-content:space-between;-ms-flex-pack:space-between}.fx-left{float:left;text-align:left}.fx-right{float:right}.fx-right,.fx-text-right{text-align:right}.fx-center{margin:0 auto;text-align:center}.fx-hidden{display:none!important}.fx-invisible-hidden{position:absolute;visibility:hidden}.fx-invisible{visibility:hidden}.fx-round{border-radius:100%}.fx-not-round{border-radius:0}.fx-floating{position:absolute;z-index:1}.fx-no-padding{padding:0}.fx-no-margin{margin:0}.fx-padding-4{padding:4px}.fx-padding{padding:10px}.fx-padding-8{padding:8px}.fx-padding-x-8{padding-left:8px;padding-right:8px}.fx-padding-y-6{padding-top:6px;padding-bottom:6px}.fx-padding-16{padding:16px}.fx-margin{margin:10px}.fx-margin-16{margin:16px}.fx-margin-x{margin-left:10px;margin-right:10px}.fx-margin-top-5{margin-top:5px}.fx-margin-top-10{margin-top:10px}.fx-margin-top-12{margin-top:12px}.fx-margin-top-15{margin-top:15px}.fx-margin-top-20{margin-top:20px}.fx-margin-top-24{margin-top:24px}.fx-margin-top-30{margin-top:30px}.fx-margin-left-0{margin-left:0}.fx-margin-left-5{margin-left:5px}.fx-margin-left-10{margin-left:10px}.fx-margin-left-16{margin-left:16px}.fx-margin-right-5{margin-right:5px}.fx-margin-right-8{margin-right:8px}.fx-margin-right-10{margin-right:10px}.fx-margin-right-16{margin-right:16px}.fx-margin-right-50{margin-right:50px}.fx-padding-top-5{padding-top:5px}.fx-padding-left-5{padding-left:5px}.fx-padding-left-8{padding-left:8px}.fx-padding-top-10{padding-top:10px}.fx-padding-top-20{padding-top:20px}.fx-padding-bottom-20{padding-bottom:20px}.fx-padding-right-16{padding-right:16px}.fx-margin-bottom-5{margin-bottom:5px}.fx-margin-bottom-10{margin-bottom:10px}.fx-margin-bottom-15{margin-bottom:15px}.fx-margin-bottom-20{margin-bottom:20px}.fx-margin-bottom-25{margin-bottom:25px}.fx-margin-left-25{margin-left:25px}.fx-margin-bottom-30{margin-bottom:30px}.fx-padding-bottom-5{padding-bottom:5px}.fx-padding-bottom-10{padding-bottom:10px}.fx-no-float{float:none}.fx-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fx-whitespace-nowrap{white-space:nowrap!important}.fx-cover,.fx-span-both{height:100%;width:100%}.fx-span-width{width:100%}.fx-span-height{height:100%}.fx-span-height-100vh{height:100vh}.fx-height-auto{height:auto}.fx-height-inherit{height:inherit}.fx-cover{position:absolute;overflow:hidden;z-index:1}.fx-fix-top{top:0}.fx-fix-bottom{bottom:0}.fx-fix-right{right:0}.fx-fix-left{left:0}.fx-fix-top-left{top:0;left:0}.fx-fix-top-right{top:0;right:0}.fx-overflow-hidden{overflow:hidden}.fx-overflow-y{overflow-y:auto}.fx-overflow-x{overflow-x:auto}.fx-overflow-y-hidden{overflow-y:hidden}.fx-overflow-x-hidden{overflow-x:hidden}.fx-invisible-item{position:absolute;visibility:hidden;height:0}.fx-no-selection{-webkit-user-select:none;-moz-user-select:none;user-select:none}.fx-fill-screen-height{height:100vh}.fx-pointer-events-none{pointer-events:none}.fx-pointer-events-auto{pointer-events:auto}.fx-fade-out{opacity:.3}.fx-capitalize{text-transform:capitalize}.fx-display-inline-block{display:inline-block}.fx-flex-expand{flex:1}.fx-flex{display:flex}.fx-align-center{-moz-align-items:center;-ms-align-items:center;align-items:center}.fx-justify-center{-moz-justify-content:center;-ms-justify-content:center;justify-content:center;-ms-flex-pack:center}div.extra-light-grey{background-color:#f2f2f2}button.extra-light-grey{background-color:#fff;color:#f2f2f2}a.extra-light-grey,button.extra-light-grey .nu-icon,h1.extra-light-grey,h2.extra-light-grey,h3.extra-light-grey,i.extra-light-grey,label.extra-light-grey,p.extra-light-grey,span.extra-light-grey{color:#f2f2f2}div.light-grey{background-color:#e4e4e4}button.light-grey{background-color:#fefefe;color:#e4e4e4}a.light-grey,button.light-grey .nu-icon,h1.light-grey,h2.light-grey,h3.light-grey,i.light-grey,label.light-grey,p.light-grey,span.light-grey{color:#e4e4e4}div.medium-grey{background-color:#d8d8d8}button.medium-grey{background-color:#f2f2f2;color:#d8d8d8}a.medium-grey,button.medium-grey .nu-icon,h1.medium-grey,h2.medium-grey,h3.medium-grey,i.medium-grey,label.medium-grey,p.medium-grey,span.medium-grey{color:#d8d8d8}div.grey{background-color:#a09f9f}button.grey{background-color:#b9b9b9}a.grey,button.grey,button.grey .nu-icon,h1.grey,h2.grey,h3.grey,i.grey,label.grey,p.grey,span.grey{color:#a09f9f}div.dark-grey{background-color:#696969}button.dark-grey{background-color:#838383;color:#696969}a.dark-grey,button.dark-grey .nu-icon,h1.dark-grey,h2.dark-grey,h3.dark-grey,i.dark-grey,label.dark-grey,p.dark-grey,span.dark-grey{color:#696969}div.crimson{background-color:#f05758}button.crimson{background-color:#f48687;color:#f05758}a.crimson,button.crimson .nu-icon,h1.crimson,h2.crimson,h3.crimson,i.crimson,label.crimson,p.crimson,span.crimson{color:#f05758}div.black{background-color:#141414}button.black{background-color:#2e2e2e}a.black,button.black,button.black .nu-icon,h1.black,h2.black,h3.black,i.black,label.black,p.black,span.black{color:#141414}div.yellow{background-color:#faa72d}button.yellow{background-color:#fbbc5f;color:#faa72d}a.yellow,button.yellow .nu-icon,h1.yellow,h2.yellow,h3.yellow,i.yellow,label.yellow,p.yellow,span.yellow{color:#faa72d}div.light-yellow{background-color:#fdc977}button.light-yellow{background-color:#fedda9;color:#fdc977}a.light-yellow,button.light-yellow .nu-icon,h1.light-yellow,h2.light-yellow,h3.light-yellow,i.light-yellow,label.light-yellow,p.light-yellow,span.light-yellow{color:#fdc977}div.blue{background-color:#1a7bb9}button.blue{background-color:#2698e0}a.blue,button.blue,button.blue .nu-icon,h1.blue,h2.blue,h3.blue,i.blue,label.blue,p.blue,span.blue{color:#1a7bb9}div.green{background-color:#6da067}button.green{background-color:#8bb486}a.green,button.green,button.green .nu-icon,h1.green,h2.green,h3.green,i.green,label.green,p.green,span.green{color:#6da067}button.white,div.white{background-color:#fff}a.white,button.white,button.white .nu-icon,h1.white,h2.white,h3.white,i.white,label.white,p.white,span.white{color:#fff}div.facebook{background-color:#324b7f}button.facebook{background-color:#4061a4;color:#324b7f}a.facebook,button.facebook .nu-icon,h1.facebook,h2.facebook,h3.facebook,i.facebook,label.facebook,p.facebook,span.facebook{color:#324b7f}div.twitter{background-color:#339dc3}button.twitter{background-color:#56b2d3;color:#339dc3}a.twitter,button.twitter .nu-icon,h1.twitter,h2.twitter,h3.twitter,i.twitter,label.twitter,p.twitter,span.twitter{color:#339dc3}div.google{background-color:#dc4535}button.google{background-color:#e46d60;color:#dc4535}a.google,button.google .nu-icon,h1.google,h2.google,h3.google,i.google,label.google,p.google,span.google{color:#dc4535}div.linkedin{background-color:#025a84}button.linkedin{background-color:#037cb6;color:#025a84}a.linkedin,button.linkedin .nu-icon,h1.linkedin,h2.linkedin,h3.linkedin,i.linkedin,label.linkedin,p.linkedin,span.linkedin{color:#025a84}.ps__thumb-x,.ps__thumb-y{background-color:#08436b!important;width:4px!important}.ps__rail-x,.ps__rail-y{background-color:unset!important}.fx-button{transition:background-color .5s ease;border:none;text-align:center;padding-left:5px;padding-right:5px;cursor:pointer}.fx-button.fx-block{border-radius:5px;display:block}.fx-button.fx-outline{background-color:transparent}.fx-button:focus{outline:none}.fx-button.fx-icon{height:100%;background-color:transparent}.fx-button img{border:none}.fx-button.fx-floating{text-align:center}.fx-button.fx-floating.top{top:10px}.fx-button.fx-floating.fx-right{right:15px}.fx-button.fx-floating.fx-left{left:15px}.fx-button.fx-round{width:45px;height:45px}.fx-text-reset *{font-family:initial;font-size:medium;color:initial;font:initial;font-style:normal;font-variant:normal;font-weight:400;letter-spacing:normal;line-height:normal;text-align:initial;-moz-text-align-last:initial;text-align-last:auto;text-decoration:initial;-webkit-text-decoration-line:initial;text-decoration-line:none;-webkit-text-decoration-style:initial;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;vertical-align:initial;white-space:normal;word-spacing:normal;-webkit-font-smoothing:initial}.fx-text-reset em,.fx-text-reset i{font-style:italic}.fx-text-reset sup{vertical-align:super;font-size:smaller}.fx-text-reset sub{vertical-align:sub;font-size:smaller}.fx-text-reset b{font-weight:700}.fx-text-reset del,.fx-text-reset s,.fx-text-reset strike{text-decoration:line-through}.switch.switch-small{min-width:33px}.switch.switch-medium{min-width:50px}.switch.switch-large{min-width:60px}.switch.switch-small>.switch-pane>span{font-size:9px}.switch.switch-large>.switch-pane>span,.switch.switch-medium>.switch-pane>span{font-size:16px}.switch{border:1px solid #dfdfdf;position:relative;display:inline-block;box-sizing:content-box;padding:0;margin:0;cursor:pointer;box-shadow:inset 0 0 0 0 #dfdfdf;white-space:nowrap}.switch,.switch small{transition:all .3s ease-out;-webkit-transition:all .3s ease-out}.switch small{border-radius:100%;box-shadow:0 1px 3px rgba(0,0,0,.4);position:absolute;top:0;right:calc(100% - 30px);background:#fff;display:flex;align-items:center;justify-content:center}.switch.switch-small{height:20px;border-radius:20px}.switch.switch-small small{width:20px;height:20px;right:calc(100% - 20px)}.switch.switch-small>.switch-pane>span{line-height:20px}.switch.switch-small>.switch-pane .switch-label-checked{padding-right:25px;padding-left:10px}.switch.switch-small>.switch-pane .switch-label-unchecked{padding-left:25px;padding-right:10px}.switch.switch-medium{height:30px;border-radius:30px}.switch.switch-medium small{width:30px;height:30px;right:calc(100% - 30px)}.switch.switch-medium>.switch-pane>span{line-height:30px}.switch.switch-medium>.switch-pane .switch-label-checked{padding-right:35px;padding-left:15px}.switch.switch-medium>.switch-pane .switch-label-unchecked{padding-left:35px;padding-right:15px}.switch.switch-large{height:40px;border-radius:40px}.switch.switch-large small{width:40px;height:40px;right:calc(100% - 40px)}.switch.switch-large>.switch-pane>span{line-height:40px}.switch.switch-large>.switch-pane .switch-label-checked{padding-right:45px;padding-left:20px}.switch.switch-large>.switch-pane .switch-label-unchecked{padding-left:45px;padding-right:20px}.switch.checked{background:#64bd63}.switch.checked small{right:0;left:auto}.switch.checked .switch-pane{top:0}.switch.checked .switch-pane .switch-label-checked{opacity:1}.switch.checked .switch-pane .switch-label-unchecked{opacity:0}.switch.disabled{opacity:.5;cursor:not-allowed}.switch .switch-pane{display:flex;flex-direction:column;height:100%;min-height:100%;justify-content:flex-start;align-items:center;top:-100%;position:relative;pointer-events:none}.switch .switch-pane>span{display:block;min-height:100%}.switch .switch-pane .switch-label{color:#000}.switch .switch-pane .switch-label-checked{opacity:0}.switch .switch-pane .switch-label-unchecked{opacity:1}.switch.loading{background-color:#f1f1f1}.switch.loading small{background-color:transparent;border:none;box-shadow:none;right:50%;transform:translateX(50%)}*{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}body{color:#04263d;overflow:hidden}body div.primary{background-color:#08436b}body button.primary{background-color:#d7edfc;color:#094c79;border:1px solid #08436b}body a.primary,body button.primary .nu-icon,body h1.primary,body h2.primary,body h3.primary,body i.primary,body label.primary,body p.primary,body span.primary{color:#08436b}body div.secondary{background-color:#f6f6fa}body button.secondary{background-color:#fff;color:#fff;border:1px solid #f6f6fa}body a.secondary,body button.secondary .nu-icon,body h1.secondary,body h2.secondary,body h3.secondary,body i.secondary,body label.secondary,body p.secondary,body span.secondary{color:#f6f6fa}body div.dark-blue{background-color:#04263d}body button.dark-blue{background-color:#a8d8f9;color:#052f4b;border:1px solid #04263d}body a.dark-blue,body button.dark-blue .nu-icon,body h1.dark-blue,body h2.dark-blue,body h3.dark-blue,body i.dark-blue,body label.dark-blue,body p.dark-blue,body span.dark-blue{color:#04263d}body div.light-purple{background-color:#c3c3de}body button.light-purple{background-color:#fff;color:#cdcde3;border:1px solid #c3c3de}body a.light-purple,body button.light-purple .nu-icon,body h1.light-purple,body h2.light-purple,body h3.light-purple,body i.light-purple,body label.light-purple,body p.light-purple,body span.light-purple{color:#c3c3de}body div.xlight-grey{background-color:#f0f0f0}body button.xlight-grey{background-color:#fff;color:#f8f8f8;border:1px solid #f0f0f0}body a.xlight-grey,body button.xlight-grey .nu-icon,body h1.xlight-grey,body h2.xlight-grey,body h3.xlight-grey,body i.xlight-grey,body label.xlight-grey,body p.xlight-grey,body span.xlight-grey{color:#f0f0f0}body div.light-grey{background-color:#ececec}body button.light-grey{background-color:#fff;color:#f4f4f4;border:1px solid #ececec}body a.light-grey,body button.light-grey .nu-icon,body h1.light-grey,body h2.light-grey,body h3.light-grey,body i.light-grey,body label.light-grey,body p.light-grey,body span.light-grey{color:#ececec}body div.xmedium-grey{background-color:#dcdcdc}body button.xmedium-grey{background-color:#fff;color:#e4e4e4;border:1px solid #dcdcdc}body a.xmedium-grey,body button.xmedium-grey .nu-icon,body h1.xmedium-grey,body h2.xmedium-grey,body h3.xmedium-grey,body i.xmedium-grey,body label.xmedium-grey,body p.xmedium-grey,body span.xmedium-grey{color:#dcdcdc}body div.medium-grey{background-color:#aaa}body button.medium-grey{background-color:#fff;color:#b2b2b2;border:1px solid #aaa}body a.medium-grey,body button.medium-grey .nu-icon,body h1.medium-grey,body h2.medium-grey,body h3.medium-grey,body i.medium-grey,body label.medium-grey,body p.medium-grey,body span.medium-grey{color:#aaa}body div.grey{background-color:#7e7e7e}body button.grey{background-color:#fff;color:#868686;border:1px solid #7e7e7e}body a.grey,body button.grey .nu-icon,body h1.grey,body h2.grey,body h3.grey,body i.grey,body label.grey,body p.grey,body span.grey{color:#7e7e7e}body div.blueish-grey{background-color:#f3f5fa}body button.blueish-grey{background-color:#fff;color:#fefeff;border:1px solid #f3f5fa}body a.blueish-grey,body button.blueish-grey .nu-icon,body h1.blueish-grey,body h2.blueish-grey,body h3.blueish-grey,body i.blueish-grey,body label.blueish-grey,body p.blueish-grey,body span.blueish-grey{color:#f3f5fa}body div.light-nv-blue{background-color:#627281}body button.light-nv-blue{background-color:#fff;color:#697a8a;border:1px solid #627281}body a.light-nv-blue,body button.light-nv-blue .nu-icon,body h1.light-nv-blue,body h2.light-nv-blue,body h3.light-nv-blue,body i.light-nv-blue,body label.light-nv-blue,body p.light-nv-blue,body span.light-nv-blue{color:#627281}body div.navy-blue{background-color:#415a71}body button.navy-blue{background-color:#fff;color:#47627b;border:1px solid #415a71}body a.navy-blue,body button.navy-blue .nu-icon,body h1.navy-blue,body h2.navy-blue,body h3.navy-blue,body i.navy-blue,body label.navy-blue,body p.navy-blue,body span.navy-blue{color:#415a71}body div.primary-blue{background-color:#0c5e96}body button.primary-blue{background-color:#fff;color:#0d67a4;border:1px solid #0c5e96}body a.primary-blue,body button.primary-blue .nu-icon,body h1.primary-blue,body h2.primary-blue,body h3.primary-blue,body i.primary-blue,body label.primary-blue,body p.primary-blue,body span.primary-blue{color:#0c5e96}body div.navy-blue-off{background-color:#414b61}body button.navy-blue-off{background-color:#fff;color:#47526a;border:1px solid #414b61}body a.navy-blue-off,body button.navy-blue-off .nu-icon,body h1.navy-blue-off,body h2.navy-blue-off,body h3.navy-blue-off,body i.navy-blue-off,body label.navy-blue-off,body p.navy-blue-off,body span.navy-blue-off{color:#414b61}body button.white,body div.white{background-color:#fff}body button.white{color:#fff;border:1px solid #fff}body a.white,body button.white .nu-icon,body h1.white,body h2.white,body h3.white,body i.white,body label.white,body p.white,body span.white{color:#fff}body div.beige{background-color:#f9f8f7}body button.beige{background-color:#fff;color:#fff;border:1px solid #f9f8f7}body a.beige,body button.beige .nu-icon,body h1.beige,body h2.beige,body h3.beige,body i.beige,body label.beige,body p.beige,body span.beige{color:#f9f8f7}body div.orange{background-color:#f6aa00}body button.orange{background-color:#fff;color:#ffb206;border:1px solid #f6aa00}body a.orange,body button.orange .nu-icon,body h1.orange,body h2.orange,body h3.orange,body i.orange,body label.orange,body p.orange,body span.orange{color:#f6aa00}body div.light-orange{background-color:#f5ab1c}body button.light-orange{background-color:#fff;color:#f6b02b;border:1px solid #f5ab1c}body a.light-orange,body button.light-orange .nu-icon,body h1.light-orange,body h2.light-orange,body h3.light-orange,body i.light-orange,body label.light-orange,body p.light-orange,body span.light-orange{color:#f5ab1c}body div.dark-orange{background-color:#fab638}body button.dark-orange{background-color:#fff;color:#fabb47;border:1px solid #fab638}body a.dark-orange,body button.dark-orange .nu-icon,body h1.dark-orange,body h2.dark-orange,body h3.dark-orange,body i.dark-orange,body label.dark-orange,body p.dark-orange,body span.dark-orange{color:#fab638}body div.crimson{background-color:#f36c67}body button.crimson{background-color:#fff;color:#f47a75;border:1px solid #f36c67}body a.crimson,body button.crimson .nu-icon,body h1.crimson,body h2.crimson,body h3.crimson,body i.crimson,body label.crimson,body p.crimson,body span.crimson{color:#f36c67}body div.black{background-color:#686868}body button.black{background-color:#fff;color:#707070;border:1px solid #686868}body a.black,body button.black .nu-icon,body h1.black,body h2.black,body h3.black,body i.black,body label.black,body p.black,body span.black{color:#686868}body div.green{background-color:#61a15e}body button.green{background-color:#fff;color:#6aa768;border:1px solid #61a15e}body a.green,body button.green .nu-icon,body h1.green,body h2.green,body h3.green,body i.green,body label.green,body p.green,body span.green{color:#61a15e}body div.yellow{background-color:#ffc648}body button.yellow{background-color:#fff;color:#ffcb57;border:1px solid #ffc648}body a.yellow,body button.yellow .nu-icon,body h1.yellow,body h2.yellow,body h3.yellow,body i.yellow,body label.yellow,body p.yellow,body span.yellow{color:#ffc648}body div.purple{background-color:#5d3eaa}body button.purple{background-color:#fff;color:#6342b5;border:1px solid #5d3eaa}body a.purple,body button.purple .nu-icon,body h1.purple,body h2.purple,body h3.purple,body i.purple,body label.purple,body p.purple,body span.purple{color:#5d3eaa}body div.light-red{background-color:#f05252}body button.light-red{background-color:#fff;color:#f16060;border:1px solid #f05252}body a.light-red,body button.light-red .nu-icon,body h1.light-red,body h2.light-red,body h3.light-red,body i.light-red,body label.light-red,body p.light-red,body span.light-red{color:#f05252}body div.peachy-white{background-color:#fae8e5}body button.peachy-white{background-color:#fff;color:#fcf3f2;border:1px solid #fae8e5}body a.peachy-white,body button.peachy-white .nu-icon,body h1.peachy-white,body h2.peachy-white,body h3.peachy-white,body i.peachy-white,body label.peachy-white,body p.peachy-white,body span.peachy-white{color:#fae8e5}body div.charade{background-color:#3d4242}body button.charade{background-color:#eff0f0;color:#444a4a;border:1px solid #3d4242}body a.charade,body button.charade .nu-icon,body h1.charade,body h2.charade,body h3.charade,body i.charade,body label.charade,body p.charade,body span.charade{color:#3d4242}body div.light-green{background-color:#dcf2ee}body button.light-green{background-color:#fff;color:#e7f6f3;border:1px solid #dcf2ee}body a.light-green,body button.light-green .nu-icon,body h1.light-green,body h2.light-green,body h3.light-green,body i.light-green,body label.light-green,body p.light-green,body span.light-green{color:#dcf2ee}body div.dark-grey{background-color:#14282e}body button.dark-grey{background-color:#bfdbe3;color:#193139;border:1px solid #14282e}body a.dark-grey,body button.dark-grey .nu-icon,body h1.dark-grey,body h2.dark-grey,body h3.dark-grey,body i.dark-grey,body label.dark-grey,body p.dark-grey,body span.dark-grey{color:#14282e}body div.dark-red{background-color:#d92626}body button.dark-red{background-color:#fff;color:#db3333;border:1px solid #d92626}body a.dark-red,body button.dark-red .nu-icon,body h1.dark-red,body h2.dark-red,body h3.dark-red,body i.dark-red,body label.dark-red,body p.dark-red,body span.dark-red{color:#d92626}body div.mlight-grey{background-color:#caccce}body button.mlight-grey{background-color:#fff;color:#d2d4d5;border:1px solid #caccce}body a.mlight-grey,body button.mlight-grey .nu-icon,body h1.mlight-grey,body h2.mlight-grey,body h3.mlight-grey,body i.mlight-grey,body label.mlight-grey,body p.mlight-grey,body span.mlight-grey{color:#caccce}body div.mint-cream{background-color:#f4fcfa}body button.mint-cream{background-color:#fff;color:#fff;border:1px solid #f4fcfa}body a.mint-cream,body button.mint-cream .nu-icon,body h1.mint-cream,body h2.mint-cream,body h3.mint-cream,body i.mint-cream,body label.mint-cream,body p.mint-cream,body span.mint-cream{color:#f4fcfa}body div.medium-dark-grey{background-color:#697274}body button.medium-dark-grey{background-color:#fff;color:#707a7c;border:1px solid #697274}body a.medium-dark-grey,body button.medium-dark-grey .nu-icon,body h1.medium-dark-grey,body h2.medium-dark-grey,body h3.medium-dark-grey,body i.medium-dark-grey,body label.medium-dark-grey,body p.medium-dark-grey,body span.medium-dark-grey{color:#697274}body div.muted-blue{background-color:#88a1aa}body button.muted-blue{background-color:#fff;color:#91a8b0;border:1px solid #88a1aa}body a.muted-blue,body button.muted-blue .nu-icon,body h1.muted-blue,body h2.muted-blue,body h3.muted-blue,body i.muted-blue,body label.muted-blue,body p.muted-blue,body span.muted-blue{color:#88a1aa}body div.grey-lightest{background-color:#fafafc}body button.grey-lightest{background-color:#fff;color:#fff;border:1px solid #fafafc}body a.grey-lightest,body button.grey-lightest .nu-icon,body h1.grey-lightest,body h2.grey-lightest,body h3.grey-lightest,body i.grey-lightest,body label.grey-lightest,body p.grey-lightest,body span.grey-lightest{color:#fafafc}body div.ne-red{background-color:#f05151}body button.ne-red{background-color:#fff;color:#f15f5f;border:1px solid #f05151}body a.ne-red,body button.ne-red .nu-icon,body h1.ne-red,body h2.ne-red,body h3.ne-red,body i.ne-red,body label.ne-red,body p.ne-red,body span.ne-red{color:#f05151}body div.ne-grey{background-color:#a0a0a0}body button.ne-grey{background-color:#fff;color:#a8a8a8;border:1px solid #a0a0a0}body a.ne-grey,body button.ne-grey .nu-icon,body h1.ne-grey,body h2.ne-grey,body h3.ne-grey,body i.ne-grey,body label.ne-grey,body p.ne-grey,body span.ne-grey{color:#a0a0a0}body div.ne-blue{background-color:#06263d}body button.ne-blue{background-color:#acd8f7;color:#072f4b;border:1px solid #06263d}body a.ne-blue,body button.ne-blue .nu-icon,body h1.ne-blue,body h2.ne-blue,body h3.ne-blue,body i.ne-blue,body label.ne-blue,body p.ne-blue,body span.ne-blue{color:#06263d}h1{font-size:14px;margin:0}h1,h2,h3,h4{font-weight:400;font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}label{font-size:13px}a{cursor:pointer;text-decoration:none}a:hover,a:hover .nu-icon{color:#627281}p{line-height:20px}a,div[contenteditable=true],h1,h2,h3,h4,input,label,p,span,textarea{-webkit-user-select:text;-moz-user-select:text;user-select:text}a.beige:hover,a.beige:hover .nu-icon,a.black:hover,a.black:hover .nu-icon,a.blueish-grey:hover,a.blueish-grey:hover .nu-icon,a.charade:hover,a.charade:hover .nu-icon,a.crimson:hover,a.crimson:hover .nu-icon,a.dark-blue:hover,a.dark-blue:hover .nu-icon,a.dark-grey:hover,a.dark-grey:hover .nu-icon,a.dark-orange:hover,a.dark-orange:hover .nu-icon,a.dark-red:hover,a.dark-red:hover .nu-icon,a.green:hover,a.green:hover .nu-icon,a.grey-lightest:hover,a.grey-lightest:hover .nu-icon,a.grey:hover,a.grey:hover .nu-icon,a.light-green:hover,a.light-green:hover .nu-icon,a.light-grey:hover,a.light-grey:hover .nu-icon,a.light-nv-blue:hover,a.light-nv-blue:hover .nu-icon,a.light-orange:hover,a.light-orange:hover .nu-icon,a.light-purple:hover,a.light-purple:hover .nu-icon,a.light-red:hover,a.light-red:hover .nu-icon,a.medium-dark-grey:hover,a.medium-dark-grey:hover .nu-icon,a.medium-grey:hover,a.medium-grey:hover .nu-icon,a.mint-cream:hover,a.mint-cream:hover .nu-icon,a.mlight-grey:hover,a.mlight-grey:hover .nu-icon,a.muted-blue:hover,a.muted-blue:hover .nu-icon,a.navy-blue-off:hover,a.navy-blue-off:hover .nu-icon,a.navy-blue:hover,a.navy-blue:hover .nu-icon,a.ne-blue:hover,a.ne-blue:hover .nu-icon,a.ne-grey:hover,a.ne-grey:hover .nu-icon,a.ne-red:hover,a.ne-red:hover .nu-icon,a.orange:hover,a.orange:hover .nu-icon,a.peachy-white:hover,a.peachy-white:hover .nu-icon,a.primary-blue:hover,a.primary-blue:hover .nu-icon,a.primary:hover,a.primary:hover .nu-icon,a.purple:hover,a.purple:hover .nu-icon,a.secondary:hover,a.secondary:hover .nu-icon,a.white:hover,a.white:hover .nu-icon,a.xlight-grey:hover,a.xlight-grey:hover .nu-icon,a.xmedium-grey:hover,a.xmedium-grey:hover .nu-icon,a.yellow:hover,a.yellow:hover .nu-icon{color:#627281}#facebook-jssdk-iframe{display:none}.nu-overlay-blur,router-outlet.nu-overlay-blur:first-of-type+*{filter:blur(5px);transform:translateZ(0)}.nu-text-primary{font-size:14px}.nu-text-xsmall{font-size:12px}.nu-text-small{font-size:13px}.nu-text-medium{font-size:16px}.nu-text-bold{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.has-shadow{box-shadow:0 2px 2px #c3c3de}.left-sidebar-panel{height:100vh;width:264px;box-sizing:border-box;padding-left:.5rem;padding-right:.5rem;padding-bottom:.5rem}.left-sidebar-panel.expanded,.left-sidebar-panel.fullscreen{width:100%;background-color:#fff;z-index:4}.left-sidebar-panel.closed{transform:translateX(-215px);width:0}.left-sidebar-header-container{width:calc(264px - 16px)}.left-sidebar-panel-container{width:calc(264px - 16px);padding-top:1.375rem}.left-sidebar-add-btn{margin:1rem 0}.left-sidebar-heading{font-family:Inter,Arial,sans-serif,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Noto Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1rem;font-weight:500;line-height:1.5rem;padding-bottom:.875rem;color:#354b53}.col-menu-scrollbar{height:calc(100vh - calc(calc(108px + 8px) + calc(22px + 24px + 14px)))}.nu-beta-tag{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.cformat-container{width:calc(264px - 16px)}.cformat-container-add-rule-btn{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;display:flex;align-items:center}.cformat-container-add-rule-btn .nu-icon{margin-left:-.5rem}.cformat-menu-scrollbar{height:calc(calc(100vh - calc(calc(108px + 8px) + calc(22px + 24px + 14px))) - calc(36px + 14px + 24px))}.cformat-rule-action-conatinar::ng-deep .mat-select-value-text{color:#354b53}.cformat-new-rule-container{padding-right:.5rem}.cformat-new-rule-container .form-control{line-height:1.25rem;margin-top:.5rem;padding:.5rem;border:.5px solid #64767d;height:36px;border-radius:.25rem;width:100%;color:#354b53}.cformat-new-rule-container .form-control:hover{border:.5px solid #08436b}.cformat-new-rule-container .cformat-new-rule-target-selection{margin-bottom:1rem}.cformat-new-rule-container .cformat-new-rule-condition-container{margin-bottom:2rem}.cformat-new-rule-container .cformat-new-rule-condition-container .cformat-new-rule-condition-item{margin-bottom:1rem}.cformat-new-rule-container .cformat-new-rule-condition-container .cformat-new-rule-condition-item .cformat-new-rule-condition-item-combinator{margin-right:.5rem;display:flex;flex-direction:row;align-items:flex-start}.cformat-new-rule-container .cformat-new-rule-condition-container .cformat-new-rule-condition-item .cformat-new-rule-condition-item-combinator button{padding:.25rem;border-radius:.25rem}.cformat-new-rule-container .cformat-new-rule-condition-container .cformat-new-rule-condition-item .cformat-new-rule-condition-item-combinator buttonactive{background:rgba(12,94,150,.2)}.cformat-buttons-container{margin-top:2rem;margin-bottom:2rem;display:flex;flex-direction:row}.cformat-buttons-container button{margin-right:1rem;cursor:pointer;width:75px}.cformat-rule-item-container{padding:0;display:flex;flex-direction:row;align-items:center;width:100%}.cformat-rule-item-container .rule-options-dd{margin-right:.5rem;max-width:40px}.cformat-rule-item-container p.disabled{color:#88a1aa}.mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#0c5e96!important}.cformat-rules-rule-icon-container{border:.5px solid rgba(202,204,206,.8);margin-right:.5rem;display:flex;align-items:center;justify-content:center;background:hsla(0,0%,100%,.2);box-sizing:border-box;border-radius:.25rem;width:24px;height:24px}.cformat-rules-rule-icon-container .nu-icon{width:16px;height:16px;color:#caccce}.cformat-rules-rule-icon-container-active{border:.5px solid #0c5e96;background:#f1f8fd}.cformat-rules-rule-icon-container-active .nu-icon{color:#08436b}.cformat-rules-rule-option-item{padding:.375rem;height:28px;border-radius:6px}@media only screen and (max-height:736px){.cformat-rules-rule-option-item{height:auto;padding:unset;font-size:.75rem}}.cformat-rule-rule-option-separator{opacity:.6;border:1px solid #d5e8f4;margin-top:0;position:absolute;width:600px;height:0}.cformat-style-value-input{margin-top:.5rem;display:block}.form-control-select-option{margin:.25rem;border-radius:.25rem}.form-control-select-option:hover{background:#d5e8f4!important}.form-control-select-option.mat-active{background:rgba(12,94,150,.2)!important}.mat-select-search-inner{width:239px!important}.mat-form-field-underline{display:none}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#354b53}.mat-select-placeholder,.text-input{color:#354b53}.text-input,.text-input-multilined{border:.5px solid #64767d}input.text-input{color:#354b53}input.text-input:hover{border:.5px solid #08436b}.rule-header{margin-left:.5rem;margin-right:.5rem;justify-content:space-between;flex-direction:row;display:flex;align-items:baseline}.message-card{padding-bottom:1.25rem}'],encapsulation:2,changeDetection:0}),e}()},gGM1:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("NNJu"),s=n("X0jn"),c=n("Jzy8"),l=n("ROBh"),u=n("GoAz"),d=n("ZTXN"),p=n("TLy2"),h=n("xtkq"),f=n("cJ9h"),m=n("0B/R"),g=n("YtkY"),b=n("c7W3"),v=n("QoSw"),_=n("nWGD"),y=n("aYRE"),O=n("3Rty"),x=n("s2Ay"),E=n("/ege"),k=n("2kYt"),C=n("uIWG"),w=n("kMe2"),S=n("pYIu"),I=n("TdEb"),T=n("6Qp7"),A=n("F1CX"),P=n("pVzg"),M=n("x+xc"),D=["container"],j=["styles"];function R(e,t){if(1&e&&(i.mc(0,"div",6),i.mc(1,"span",7),i.fd(2,"Task Summary"),i.lc(),i.mc(3,"span",8),i.fd(4,"\xa0"),i.lc(),i.mc(5,"span",9),i.fd(6),i.zc(7,"async"),i.lc(),i.mc(8,"span",10),i.fd(9),i.lc(),i.mc(10,"span",11),i.fd(11,"\xa0"),i.lc(),i.lc()),2&e){var n=i.yc().ngLet,r=i.yc();i.Sb(6),i.gd(i.Ac(7,2,r.getTaskSpan())),i.Sb(3),i.gd(r.getTotalEstimate(n))}}function L(e,t){if(1&e){var n=i.nc();i.mc(0,"date-picker-uic-view",24),i.uc("change",(function(e){i.Qc(n);var t=i.yc().$implicit;return i.yc(2).onDataItemChange(t.dueDate,e)})),i.lc()}if(2&e){var r=i.yc().$implicit;i.Dc("placeHolderHTML","Due")("data",r.dueDate)}}var N=function(){return{min:0}};function B(e,t){if(1&e){var n=i.nc();i.mc(0,"div"),i.mc(1,"button",25),i.uc("click",(function(){i.Qc(n);var e=i.yc().$implicit;return e.estimateEditMode=1,e.estimateFocusSub.next(!0)})),i.zc(2,"safeHTML"),i.lc(),i.mc(3,"number-input-uic",26,27),i.uc("change",(function(e){i.Qc(n);var t=i.yc().$implicit;return i.yc(2).onDataItemChange(t.estimatePts,e)}))("blur",(function(){return i.Qc(n),i.yc().$implicit.estimateEditMode=0})),i.lc(),i.lc()}if(2&e){var r=i.yc().$implicit,a=i.yc(2);i.Sb(1),i.Dc("hidden",r.estimateEditMode)("innerHTML",i.Ac(2,6,a.getTaskEstimateValue(r.estimatePts)),i.Rc),i.Sb(2),i.Dc("hidden",!r.estimateEditMode)("attrs",i.Hc(8,N))("setFocus",r.estimateFocusSub)("data",r.estimatePts)}}function U(e,t){if(1&e&&(i.xc(),i.wc(),i.mc(0,"simple-dropdown-item",28),i.uc("mousedown",(function(){return t.$implicit.subject.next(!0)})),i.mc(1,"span",29),i.fd(2),i.lc(),i.lc()),2&e){var n=t.$implicit;i.Ec("id",n.id),i.Dc("item",n),i.Sb(2),i.gd(n.label)}}var F=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0,multiselectable:!1}};function q(e,t){if(1&e){var n=i.nc();i.mc(0,"div",12),i.mc(1,"editable-label",13),i.uc("changedText",(function(e){i.Qc(n);var r=t.$implicit;return i.yc(2).changeRoleLabel(r.role,e)})),i.lc(),i.mc(2,"people-picker-uic",14),i.uc("change",(function(e){i.Qc(n);var r=t.$implicit;return i.yc(2).onDataItemChange(r.role,e)})),i.lc(),i.dd(3,L,1,2,"date-picker-uic-view",15),i.dd(4,B,5,9,"div",16),i.mc(5,"abs-dropdown",17,18),i.mc(7,"simple-dropdown-button",19),i.mc(8,"button",20),i.xc(),i.mc(9,"svg",21),i.hc(10,"use",22),i.lc(),i.lc(),i.lc(),i.dd(11,U,3,3,"simple-dropdown-item",23),i.lc(),i.lc()}if(2&e){var r=t.$implicit,a=i.yc(2);i.Sb(1),i.Dc("value",r.role.label)("focus",!0)("selectAll",!0)("readonly",!1),i.Sb(1),i.Dc("displayLabel",!1)("data",r.role),i.Sb(1),i.Dc("ngIf",r.dueDate),i.Sb(1),i.Dc("ngIf",r.estimatePts),i.Sb(1),i.Dc("settings",i.Hc(11,F)),i.Sb(2),i.Dc("items",a.getMoreOptions(r.role.id)),i.Sb(4),i.Dc("ngForOf",a.getMoreOptions(r.role.id))}}function W(e,t){if(1&e){var n=i.nc();i.mc(0,"div",30),i.mc(1,"button",31),i.uc("click",(function(){return i.Qc(n),i.yc(2).addRole()})),i.xc(),i.mc(2,"svg",32),i.hc(3,"use",33),i.lc(),i.wc(),i.mc(4,"span"),i.fd(5,"Add Role"),i.lc(),i.lc(),i.lc()}}function H(e,t){if(1&e&&(i.mc(0,"div",1),i.dd(1,R,12,4,"div",2),i.mc(2,"div",3),i.dd(3,q,12,12,"div",4),i.lc(),i.dd(4,W,6,0,"div",5),i.lc()),2&e){var n=t.ngLet;i.Sb(1),i.Dc("ngIf",n.length>1),i.Sb(2),i.Dc("ngForOf",n),i.Sb(1),i.Dc("ngIf",n.length>0)}}var K=function(e){function t(t,n,r,i,a,o,s,u,d){var p=e.call(this,t,n)||this;return p.componentFactoryResolver=t,p.injector=n,p.tl=r,p.ll=i,p.state=a,p.translate=o,p.taskManager=s,p.commandSvc=u,p.taskSummaryService=d,p.taskSummary={tasks:Object(l.a)([])},p.taskStatus=[{label:"TASK_PANEL.STATUS.NOW",id:c.M.Active},{label:"TASK_PANEL.STATUS.NEXT",id:c.M.Next},{label:"TASK_PANEL.STATUS.SKIP",id:c.M.Optional},{label:"TASK_PANEL.STATUS.BLOCKED",id:c.M.Blocked},{label:"TASK_PANEL.STATUS.LATER",id:c.M.Later}],p.tiptapDocParent=document.querySelector("tiptap-documents-manager"),p}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){var e=this;this.ll.forDiagram(this.diagramId,!1).getShapeOnce(this.shapeId).subscribe((function(t){t.entityId&&e.taskManager.fetchTasksForEntity(t.entityId)})),this.taskSummary.tasks=this.dataItems.pipe(Object(p.a)((function(t){return Object(u.a)(Object.values(t||{}).filter((function(e){return e.roleBound}))).pipe(Object(h.b)((function(e){return e.systemType===s.x.Role?e.id:e.roleId})),Object(f.a)((function(e){return e.pipe(Object(m.a)())})),Object(g.a)((function(t){var n=t.find((function(e){return e.systemType===s.x.Role})),r=t.find((function(e){return e.systemType===s.x.DueDate})),i=t.find((function(e){return e.systemType===s.x.EstimatePts}));return{task:Object(l.a)(null),isAssignee:n.value.people.map((function(e){return e.id})).includes(e.state.get("CurrentUser")),role:n,dueDate:r,estimatePts:i,estimateEditMode:0,estimateFocusSub:new d.a}})),Object(m.a)())})))},t.prototype.getTotalEstimate=function(e){return e.map((function(e){var t;return null===(t=e.estimatePts)||void 0===t?void 0:t.value})).filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)+" Pts"},t.prototype.getTaskEstimateValue=function(e){return"number"!=typeof e.value?'<svg class="nu-icon nu-ic-plus task-item-icon"><use xlink:href="./assets/icons/symbol-defs.svg#nu-ic-bpmn-event-timer"></use></svg>\n            <span>Est</span>':e.value+" Pts"},t.prototype.getTaskSpan=function(){return this.dataItems.pipe(Object(g.a)((function(e){var t=Object.values(e),n=t.filter((function(e){return e.systemType===s.x.StartDate})).map((function(e){return e.value})),i=t.filter((function(e){return e.systemType===s.x.DueDate})).map((function(e){return e.value}));if(n.length>0&&i.length>0){var a=new Date(Math.min.apply(Math,Object(r.j)(n))),o=new Date(Math.max.apply(Math,Object(r.j)(i))),c={month:"short",day:"numeric"};return a.toLocaleDateString(void 0,c)+" -> "+o.toLocaleDateString(void 0,c)}return""})))},t.prototype.onDataItemChange=function(e,t){var n=e.key||e.id;this.onChange({id:n,data:Object.assign({},e,{value:t})})},t.prototype.getTaskStatus=function(e){var t;return{status:t=e.isInactive()?c.M.Blocked:e.isCompleted()?c.M.Completed:e.status,label:this.getLabelForStatus(t)}},t.prototype.updateTaskStatus=function(e,t){this.taskManager.updateTask(e.id,t,s.x.Status)},t.prototype.changeRoleLabel=function(e,t){var n,i,a,o,s=this.dataItems.value,c=Object.values(s).filter((function(t){return t.roleId===e.id})),l=((n={})[e.key||e.id]={label:t},n);try{for(var u=Object(r.k)(c),d=u.next();!d.done;d=u.next()){var p=d.value;l[p.key||p.id]={label:t}}}catch(h){i={error:h}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}this.commandSvc.dispatch(b.a.changeShapeDataItems,this.diagramId,((o={})[this.shapeId]=l,o))},t.prototype.getMoreOptions=function(e){var t=this;return[{label:this.translate.instant("SHAPE_DATA.DATA_ITEMS_OPTIONS.REMOVE"),subject:{next:function(){t.removeRole(e)}}}]},t.prototype.addRole=function(){this.taskSummaryService.addRole(this.diagramId,this.shapeId)},t.prototype.removeRole=function(e){var t,n,i,a,o=this.dataItems.value,s=Object.values(o).filter((function(t){return t.roleId===e})),c=((t={})[e]=void 0,t);try{for(var l=Object(r.k)(s),u=l.next();!u.done;u=l.next()){c[u.value.id]=void 0}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}this.commandSvc.dispatch(b.a.changeShapeDataItems,this.diagramId,((a={})[this.shapeId]=c,a))},t.prototype.getLabelForStatus=function(e){var t;switch(e){case c.M.Active:t="TASK_PANEL.STATUS.NOW";break;case c.M.Next:t="TASK_PANEL.STATUS.NEXT";break;case c.M.Optional:t="TASK_PANEL.STATUS.SKIP";break;case c.M.Blocked:t="TASK_PANEL.STATUS.BLOCKED";break;case c.M.Later:t="TASK_PANEL.STATUS.LATER";break;case c.M.Completed:t="TASK_PANEL.STATUS.COMPLETED";break;default:t="TASK_PANEL.STATUS.LATER"}return this.translate.instant(t)},t.\u0275fac=function(e){return new(e||t)(i.gc(i.m),i.gc(i.C),i.gc(_.a),i.gc(v.a),i.gc(a.Hb),i.gc(x.e),i.gc(y.a),i.gc(a.B),i.gc(O.a))},t.\u0275cmp=i.ac({type:t,selectors:[["task-summary-view"]],viewQuery:function(e,t){var n;(1&e&&(i.kd(D,!0,i.r),i.kd(j,!0,i.r)),2&e)&&(i.Mc(n=i.vc())&&(t.container=n.first),i.Mc(n=i.vc())&&(t.styles=n.first))},inputs:{diagramId:"diagramId",shapeId:"shapeId",dataItems:"dataItems",onChange:"onChange"},features:[i.Pb],decls:2,vars:3,consts:[["class","task-summary",4,"ngLet"],[1,"task-summary"],["class","summary-heading",4,"ngIf"],[1,"task-list"],["class","task-item",4,"ngFor","ngForOf"],["class","add-task",4,"ngIf"],[1,"summary-heading"],[1,"role-name"],[1,"assignees"],[1,"due-date"],[1,"estimate"],[1,"actions"],[1,"task-item"],[3,"value","focus","selectAll","readonly","changedText"],[3,"displayLabel","data","change"],[3,"placeHolderHTML","data","change",4,"ngIf"],[4,"ngIf"],["direction","top","alignment","right",1,"more-options",3,"settings"],["dropdown",""],["ddbutton","",3,"items"],[1,"btn-small","nu-btn-icon"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["dditem","",3,"id","item","mousedown",4,"ngFor","ngForOf"],[3,"placeHolderHTML","data","change"],[1,"btn-small","btn-link","task-est",3,"hidden","innerHTML","click"],[3,"hidden","attrs","setFocus","data","change","blur"],["inputEstimate",""],["dditem","",3,"id","item","mousedown"],[1,"body"],[1,"add-task"],[1,"btn-small","btn-link","add-task",3,"click"],[1,"nu-icon","nu-ic-plus"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"]],template:function(e,t){1&e&&(i.dd(0,H,5,3,"div",0),i.zc(1,"async")),2&e&&i.Dc("ngLet",i.Ac(1,1,t.taskSummary.tasks))},directives:[E.a,k.t,k.s,C.a,w.a,S.a,I.a,T.a,A.a,P.a],pipes:[k.b,M.a],styles:[".summary-heading[_ngcontent-%COMP%]{margin-bottom:1.25rem;display:flex;flex-direction:row;justify-content:space-between}.summary-heading[_ngcontent-%COMP%]   .role-name[_ngcontent-%COMP%]{width:112px}.summary-heading[_ngcontent-%COMP%]   .assignees[_ngcontent-%COMP%]{width:156px}.summary-heading[_ngcontent-%COMP%]   .estimate[_ngcontent-%COMP%]{width:64px}.summary-heading[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]{width:136px}.summary-heading[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{width:42px}.task-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.task-item[_ngcontent-%COMP%] > .more-options[_ngcontent-%COMP%]{visibility:hidden}.task-item[_ngcontent-%COMP%]:hover > .more-options[_ngcontent-%COMP%]{visibility:visible}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]   editable-label[_ngcontent-%COMP%]{width:100px;max-width:120px;color:#88a1aa}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]   people-picker-uic[_ngcontent-%COMP%]{max-width:180px}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]   people-picker-uic[_ngcontent-%COMP%]     .mat-chip-list-wrapper{border:0}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]   people-picker-uic[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{margin-top:-3px}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]   date-picker-uic-view[_ngcontent-%COMP%]{max-width:96px}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]   date-picker-uic-view[_ngcontent-%COMP%]     .mat-form-field-wrapper{border:0}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]   number-input-uic[_ngcontent-%COMP%]     input.text-input{border:0;max-width:64px;margin-top:0}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]     svg.task-item-icon{width:20px;height:20px}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]     button.btn-link{font-size:14px}.task-list[_ngcontent-%COMP%]   div.task-item[_ngcontent-%COMP%]   abs-dropdown[_ngcontent-%COMP%]     button{position:relative;padding-left:0;top:-.625rem}.mat-chip-list-wrapper[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]{margin:.25rem}.task-est[_ngcontent-%COMP%]{padding-top:.125rem;padding-bottom:.625rem}.add-task[_ngcontent-%COMP%]{padding-left:0;font-size:.875rem}"],changeDetection:0}),t}(o.k)},"h/AH":function(e,t,n){e.exports=function(){"use strict";function e(e){for(var t,n=e.length,r=5381,i=52711;n--;)r=33*r^(t=e.charCodeAt(n)),i=33*i^t;return 4096*(r>>>0)+(i>>>0)}var t=function(e,t){return e.reduce((function(e,n){var r="[object "+n+"]";return t?e[r]=n:e[n]=r,e}),{})},n=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},r=["Array","Arguments","Object","RegExp","Symbol","Map","Set","Date","Error","Event","Generator","Promise","WeakMap","WeakSet","DocumentFragment","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","ArrayBuffer","DataView","DocumentFragment","Window","String","Number","Boolean","Function","Undefined","GeneratorFunction","BigInt","Null"],i=t(r,!1),a=t(r,!0),o=n([i.Generator,i.Promise,i.WeakMap,i.WeakSet]),s=n([i.Map,i.Set]),c=n([i.Date,i.RegExp]),l=n(["bigint","boolean","function","number","string","undefined"]),u=n([i.Arguments,i.Array]),d=n([i.RegExp,i.Symbol]),p=n([i.Float32Array,i.Float64Array,i.Int8Array,i.Int16Array,i.Int32Array,i.Uint8Array,i.Uint8ClampedArray,i.Uint16Array,i.Uint32Array]),h="undefined"!=typeof Buffer&&"function"==typeof Buffer.from,f="function"==typeof Uint16Array;function m(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function g(e){return Buffer.from(e).toString("utf8")}function b(e){return""}var v=h?g:f?m:b,_=/\[object ([HTML|SVG](.*)Element)\]/,y=Object.prototype.toString,O=Object.keys;function x(e){return{bubbles:e.bubbles,cancelBubble:e.cancelBubble,cancelable:e.cancelable,composed:e.composed,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isTrusted:e.isTrusted,returnValue:e.returnValue,target:e.target,type:e.type}}function E(e,t){return e>t}function k(e,t){return e[0]>t[0]}function C(e,t){for(var n,r,i=0;i<e.length;++i){for(r=e[i],n=i-1;~n&&t(e[n],r);--n)e[n+1]=e[n];e[n+1]=r}return e}function w(e,t,n){var r=[];e.forEach((function(e,i){r.push([D(i,t,n),D(e,t,n)])})),C(r,k);for(var i,a=0;a<r.length;++a)i=r[a],r[a]="["+i[0]+","+i[1]+"]";return"Map|["+r.join(",")+"]"}function S(e,t,n){var r=[];return e.forEach((function(e){r.push(D(e,t,n))})),C(r,E),"Set|["+r.join(",")+"]"}function I(e){for(var t,n=C(O(e),E),r={},i=0;i<n.length;++i)r[t=n[i]]=e[t];return r}function T(e){for(var t=e.children,n=[],r=0;r<t.length;++r)n.push(t[r].outerHTML);return n.join(",")}function A(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n+1;return 0}function P(e,t,n,r){if(!r){var c=typeof e;if(l[c])return c+"|"+e;if(null===e)return e+"|"+e}var h=r||y.call(e);return u[h]?e:h===i.Object?I(e):d[h]?a[h]+"|"+e.toString():s[h]?e instanceof Map?w(e,t,n):S(e,t,n):h===i.Date?a[h]+"|"+e.getTime():h===i.Error?a[h]+"|"+e.stack:h===i.Event?x(e):o[h]?a[h]+"|NOT_ENUMERABLE":_.test(h)?h.slice(8,-1)+"|"+e.outerHTML:h===i.DocumentFragment?a[h]+"|"+T(e):p[h]?a[h]+"|"+e.join(","):h===i.ArrayBuffer?a[h]+"|"+v(e):h===i.DataView?a[h]+"|"+v(e.buffer):e}function M(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),function(n,r){if("object"==typeof r)if(e.length){var a=A(e,this);0===a?e.push(this):(e.splice(a),t.splice(a)),t.push(n);var o=A(e,r);if(0!==o)return"[~"+(t.slice(0,o).join(".")||".")+"]";e.push(r)}else e[0]=r,t[0]=n;return n&&this[n]instanceof Date?P(this[n],e,t,i.Date):P(r,e,t)}}function D(e,t,n){if(!e||"object"!=typeof e)return P(e,t,n);var r=y.call(e);return c[r]?P(e,t,n,r):JSON.stringify(e,M(t,n))}function j(t){return e(D(t))}function R(e,t){return j(e)===j(t)}function L(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(!R(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!1;return!0}function N(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(R(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!0;return!1}function B(e,t){return j(e)!==j(t)}return R.all=L,R.any=N,R.not=B,j.is=R,j}()},hQOw:function(e,t,n){"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:r.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:r.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return o("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(a).forEach((function(e){delete a[e]}))};var r=n("ZeiE"),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("UImk")),a=Object.create(null);function o(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==a[e]&&(a[e]=!0,i.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},hSRu:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("YtkY"),i=n("C05f"),a=n("6Oco"),o=n("ZTXN"),s=n("NNJu"),c=n("/AMt"),l=n("EM62"),u=function(){function e(){this._data=new i.a(null),this.change=new o.a}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data.value},set:function(e){this._data.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropdownType",{get:function(){var e=Object(c.a)(this.data.value).find((function(e){return e.selected}));return e?e.buttonIcon?"icon":"text":this.props.icon?"icon":"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultItems",{get:function(){return this._data.pipe(Object(r.a)((function(e){return e.value.filter((function(e){return!e.custom}))})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customItems",{get:function(){return this._data.pipe(Object(r.a)((function(e){return e.value.filter((function(e){return e.custom}))})))},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.data=e},e.prototype.setProperties=function(e){this.props=e},e.prototype.ngAfterViewInit=function(){var e=this;this.sub=this.absDropdown.changed.subscribe((function(t){var n=Object(c.a)(e.data.value).find((function(e){return e.id===t[0]}));e.change.next(n)}))},e.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},e.prototype.select=function(e){},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=l.bc({type:e,viewQuery:function(e,t){var n;(1&e&&l.kd(s.b,!0),2&e)&&(l.Mc(n=l.vc())&&(t.absDropdown=n.first))}}),e}()},i9EC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConferenceCommands=t.ConferenceEvents=void 0,function(e){e.conferenceConnectionSuccess="creately:conference:connnectionSuccess",e.conferenceStarted="creately:conference:started",e.conferenceError="creately:conference:error",e.conferenceDisconected="creately:conference:disconnected",e.conferenceUserListChanged="creately:conference:userListChanged"}(t.ConferenceEvents||(t.ConferenceEvents={})),function(e){e.conferenceStart="creately:conference:start",e.conferenceStop="creately:conference:stop",e.conferenceMuteAudio="creately:conference:muteAudio",e.conferenceMuteVideo="creately:conference:muteVideo",e.conferenceRequestFocus="creately:conference:requestFocus"}(t.ConferenceCommands||(t.ConferenceCommands={}))},iRGy:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("5xGT"),i=n("X0jn"),a=n("nsO7"),o=n("6Oco"),s=n("EM62"),c=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"GluepointsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set||n.$unset)return this.shapeChange(e,n,t),Object(o.b)()},e.prototype.displaceDefaultGluePoints=function(t,n){if(n.gluepoints[e.gpBottomId]&&t.y<0&&"fixed-end"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x)(r=n.gluepoints[e.gpBottomId]).yType=t.yType,r.y=-1*(t.height+2*i.y);else if(n.gluepoints[e.gpTopId]&&t.y<0&&"fixed-start"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x){(r=n.gluepoints[e.gpTopId]).yType=t.yType,r.y=-1*(t.height+2*i.y)}if(n.gluepoints[e.gpLeftId]&&t.x<0&&"fixed-start"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y)(r=n.gluepoints[e.gpLeftId]).xType=t.xType,r.x=-1*(t.width+2*i.y);else if(n.gluepoints[e.gpRightId]&&t.x<0&&"fixed-end"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y){var r;(r=n.gluepoints[e.gpRightId]).xType=t.xType,r.x=-1*(t.width+2*i.y)}},e.prototype.displaceDefaultStickyGluePoints=function(t,n){if(n.stickyGluePoints[e.gpBottomId]&&t.y<0&&"fixed-end"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x)(r=n.stickyGluePoints[e.gpBottomId].slice()).map((function(e){e.yType=t.yType,e.y=-1*(t.height+2*i.y)})),n.stickyGluePoints[e.gpBottomId]=r;else if(n.stickyGluePoints[e.gpTopId]&&t.y<0&&"fixed-start"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x){(r=n.stickyGluePoints[e.gpTopId].slice()).map((function(e){e.yType=t.yType,e.y=-1*(t.height+2*i.y)})),n.stickyGluePoints[e.gpTopId]=r}if(n.stickyGluePoints[e.gpLeftId]&&t.x<0&&"fixed-start"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y)(r=n.stickyGluePoints[e.gpLeftId].slice()).map((function(e){e.xType=t.xType,e.x=-1*(t.width+2*i.y)})),n.stickyGluePoints[e.gpLeftId]=r;else if(n.stickyGluePoints[e.gpRightId]&&t.x<0&&"fixed-end"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y){var r;(r=n.stickyGluePoints[e.gpRightId].slice()).map((function(e){e.xType=t.xType,e.x=-1*(t.width+2*i.y)})),n.stickyGluePoints[e.gpRightId]=r}},e.prototype.shapeChange=function(t,n,i){var o=this,s=new Set,c=function(n){e.regexTexts.lastIndex=0;var c=e.regexTexts.exec(n);if(!c)return"continue";var u=c[1],d=t.shapes[u];if(d.isConnector())return"continue";s.has(u)||(l.resetAllDefaultGluePoints(d),i===r.A.EXECUTE&&l.resetAllDefaultStickyGluePoints(d),d.hasAnyText&&!Object(a.isEmpty)(d.gluepoints)&&Object(a.forEach)(d.texts,(function(e,t){var n=d.texts[t];n.plainText&&(o.displaceDefaultGluePoints(n,d),i===r.A.EXECUTE&&o.displaceDefaultStickyGluePoints(n,d))}))),s.add(u)},l=this;for(var u in n.$set||n.$unset)c(u)},e.prototype.resetAllDefaultGluePoints=function(t){var n=t.gluepoints[e.gpBottomId];n&&(n.yType&&"relative"!==n.yType&&(n.yType="relative"),1!==n.y&&(n.y=1));var r=t.gluepoints[e.gpTopId];r&&(r.yType&&"relative"!==r.yType&&(r.yType="relative"),0!==r.y&&(r.y=0));var i=t.gluepoints[e.gpLeftId];i&&(i.xType&&"relative"!==i.xType&&(i.xType="relative"),0!==i.x&&(i.x=0));var a=t.gluepoints[e.gpRightId];a&&(a.xType&&"relative"!==a.xType&&(a.xType="relative"),1!==a.x&&(a.x=1))},e.prototype.resetAllDefaultStickyGluePoints=function(t){if(t.stickyGluePoints[e.gpBottomId]){var n=t.stickyGluePoints[e.gpBottomId].slice();n.map((function(e){e.yType&&"relative"!==e.yType&&(e.yType="relative"),1!==e.y&&(e.y=1)})),t.stickyGluePoints[e.gpBottomId]=n}if(t.stickyGluePoints[e.gpTopId]){var r=t.stickyGluePoints[e.gpTopId].slice();r.map((function(e){e.yType&&"relative"!==e.yType&&(e.yType="relative"),0!==e.y&&(e.y=0)})),t.stickyGluePoints[e.gpTopId]=r}if(t.stickyGluePoints[e.gpLeftId]){var i=t.stickyGluePoints[e.gpLeftId].slice();i.map((function(e){e.xType&&"relative"!==e.xType&&(e.xType="relative"),0!==e.x&&(e.x=0)})),t.stickyGluePoints[e.gpLeftId]=i}if(t.stickyGluePoints[e.gpRightId]){var a=t.stickyGluePoints[e.gpRightId].slice();a.map((function(e){e.xType&&"relative"!==e.xType&&(e.xType="relative"),1!==e.x&&(e.x=1)})),t.stickyGluePoints[e.gpRightId]=a}},e.gpBottomId="BRZfYLOPiRa",e.gpLeftId="pbnadF9Wirq",e.gpRightId="P9d4172UDLb",e.gpTopId="0FUuJlNPewl",e.regexTexts=/shapes\.([^\.]+)\.texts/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.cc({token:e,factory:e.\u0275fac}),e}()},iTOv:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=function(){function e(t){(0,i.default)(this,e),t(this._resolve.bind(this),this._reject.bind(this))}return(0,a.default)(e,[{key:"catch",value:function(e){if(this.error)try{this._resolve(e(this.error))}catch(t){this._reject(t)}return this}},{key:"then",value:function(e,t){if(!this.error)try{this._resolve(e(this.value))}catch(n){this._reject(n)}return t&&this.catch(t),this}},{key:"_reject",value:function(e){this.value=void 0,this.error=e}},{key:"_resolve",value:function(t){t instanceof e?t.error?this._reject(t.error):this._resolve(t.value):(this.value=t,this.error=void 0)}}]),e}();o.all=function(e){return new o((function(t){t(e.map((function(e){for(;e instanceof o;){if(e.error)throw Error(e.error);e=e.value}return e})))}))},o.resolve=function(e){return new o((function(t){return t(e)}))},o.reject=function(e){return new o((function(t,n){return n(e)}))},e.exports=o},iV8b:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("EM62"),i=n("s2Ay"),a=function(){function e(e){this.translate=e,this.documentStatusMap={none:{label:"NO_STATUS",id:"none",bgColor:"transparent",textColor:"black",selected:!1},draft:{label:"DRAFT",id:"draft",bgColor:"#F8FAFC",textColor:"#677489",selected:!1},"in-progress":{label:"IN_PROGRESS",id:"in-progress",bgColor:"#F0F6FE",textColor:"#4E80EE",selected:!1},"in-review":{label:"IN_REVIEW",id:"in-review",bgColor:"#FEFBED",textColor:"#E9A23B",selected:!1},approved:{label:"APPROVED",id:"approved",bgColor:"#F2FDF5",textColor:"#55B5A6",selected:!1},final:{label:"FINAL",id:"final",bgColor:"#F9F5FE",textColor:"#9D59EF",selected:!1},archived:{label:"ARCHIVED",id:"archived",bgColor:"rgba(19, 129, 205, 0.07)",textColor:"#354B53",selected:!1}}}return e.prototype.getDocumentStatus=function(e){var t=this.documentStatusMap[e]||this.documentStatusMap.none;return{id:t.id,label:this.translate.instant("LABELS.DOCUMENT_STATUS."+t.label),bgColor:t.bgColor,textColor:t.textColor}},e.prototype.getAllStatuses=function(){var e=this;return Object.values(this.documentStatusMap).map((function(t){return{id:t.id,label:e.translate.instant("LABELS.DOCUMENT_STATUS."+t.label),bgColor:t.bgColor,textColor:t.textColor}}))},e.\u0275fac=function(t){return new(t||e)(r.qc(i.e))},e.\u0275prov=r.cc({token:e,factory:e.\u0275fac}),e}()},iesc:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("NNJu"),s=n("ZTXN"),c=n("6Oco"),l=n("g6G6"),u=n("GoAz"),d=n("KTx3"),p=n("ROBh"),h=n("YtkY"),f=n("3lSR"),m=n("8j5Y"),g=n("TLy2"),b=n("xVbo"),v=n("vRBZ"),_=["sidePanel"],y=["itemContainer"],O=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.componentFactoryResolver=t,i.stateSvc=n,i.injector=r,i.indicatorHeight=48,i.panelWidth=320,i.buttonContainerWidth=0,i.items=new Array,i.resetOperations(),i.clickSubscriptions={},i.panelActivated=new s.a,i.subs=[],i.subs.push(i.listenToOpenRightSidebarState().subscribe()),i.subs.push(i.listenToDiagramChange().subscribe()),i}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"itemIds",{get:function(){return this.items.map((function(e){return e.id}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSelected",{get:function(){return void 0!==this.activeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this.activeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){var e=this;return this.items.findIndex((function(t){return t.id===e.activeId}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){var e=this,t=this.items.find((function(t){return t.id===e.activeId}));if(t)return t.panel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemContainerHeight",{get:function(){return this.itemContainer.element.nativeElement.getBoundingClientRect().height},enumerable:!1,configurable:!0}),t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.add=function(e,t,n){var r=this.createPanel(e,n),i=this.createButton(r.instance),a=this.createItem(r.instance.id,i,r);return void 0===t&&(t=this.items.length+Object.keys(this.operations.add).length),this.operations.add[t]=a,this},t.prototype.updatePanelFeatures=function(e){var t=this.items.find((function(t){return t.id===e.id}));t||(t=Object.values(this.operations.add).find((function(t){return t.id===e.id}))),t&&t.panel.instance.features&&t.panel.instance.features.next(e.features)},t.prototype.removeById=function(e){return this.operations.remove.push(e),this},t.prototype.removeByIndex=function(e){return this.removeById(this.items[e].id),this},t.prototype.addSpace=function(e,t){return this},t.prototype.removeSpace=function(e){return this},t.prototype.apply=function(e){var t=this,n=[];n.push.apply(n,Object(r.j)(this.insertItems())),n.push.apply(n,Object(r.j)(this.removeItems()));var i=Object(c.b)();return e&&this.isSelected&&this.selectedId!==e&&(this.panelActivated.next({id:e,data:"default"}),i=this.open(e)),Object(l.a)(Object(u.a)(n).pipe(Object(h.a)((function(e){return e.start()})),Object(f.a)()),i).pipe(Object(m.a)({complete:function(){t.clearItems(),t.resetOperations()}}))},t.prototype.createPanel=function(e,t){var n=this.makeComponent(e);return this.setInputs(n.instance,t),n},t.prototype.findIndex=function(e){},t.prototype.open=function(e){var t=0;return void 0!==e&&(t=this.items.findIndex((function(t){return t.id===e}))),t<0?Object(c.b)():(this.stateSvc.set("RightSidebarPanel",o.r.Opening),this.stateSvc.set("RightSidebarPanel",this.items[t].id),this.openByIndex(t))},t.prototype.openByIndex=function(e){var t=this;if(this.selectedIndex===e)return Object(c.b)();if(e>=this.items.length)return this.close();var n=this.items[e].panel;if(n.instance.onActive(),this.isSelected){var r=this.selected,i=e<this.selectedIndex;return this.insertPanel(n,i),Object(l.a)(this.slideOutPanel(r,!i),this.slideInPanel(n,!i)).pipe(Object(m.a)({complete:function(){t.detachPanel(r)}}),Object(m.a)({complete:function(){r.instance.onInactive()}}),Object(g.a)((function(){return t.switchBetweenSidePanels(r.instance,n.instance).start()})))}return this.insertPanel(n),this.toggleSidePanel(!1,n.instance.width).start()},t.prototype.close=function(){var e=this;return this.activeId?(this.stateSvc.set("RightSidebarPanel",o.r.Closing),Object(l.a)(this.toggleSidePanel(!0).start()).pipe(Object(m.a)({complete:function(){e.selected.instance.onInactive(),e.detachPanel(e.selected),e.activeId=void 0,e.stateSvc.set("RightSidebarPanel",o.r.None)}}))):Object(c.b)()},t.prototype.setButtonIndicator=function(e,t){var n=this.items.findIndex((function(t){return t.id===e}));n>-1&&this.items[n].button.instance.setIndicator(t)},t.prototype.resetOperations=function(){this.operations={add:{},space:{},remove:[]}},t.prototype.insertItems=function(){var e=[],t=this.operations.add;for(var n in t)t.hasOwnProperty(n)&&e.push.apply(e,Object(r.j)(this.insertItemAt(t[n],Number(n))));return e},t.prototype.removeItems=function(){var e=this,t=[];return this.operations.remove.forEach((function(n){return t.push.apply(t,Object(r.j)(e.removeItemById(n)))})),t},t.prototype.createButton=function(e){var t={id:e.id,icon:e.icon,tooltip:e.tooltip},n=this.makeComponent(v.a);return this.setInputs(n.instance,t),this.listenToButtonClick(n),n},t.prototype.createItem=function(e,t,n){return{id:e,button:t,panel:n}},t.prototype.listenToButtonClick=function(e){var t=this,n=Object(d.a)(e.location.nativeElement,"click").subscribe((function(){return t.clickHandler(e.instance)}));this.clickSubscriptions[e.instance.id]=n},t.prototype.clickHandler=function(e){this.selectedId===e.id?this.close().subscribe():(this.panelActivated.next({id:e.id,data:"sidebarButton"}),this.open(e.id).subscribe())},t.prototype.insertItemAt=function(e,t){return this.items.splice(t,0,e),[e.button.instance.toggleZoom()]},t.prototype.insertSpaceAt=function(e,t){},t.prototype.insertPanel=function(e,t){void 0===t&&(t=!1),!0===t?this.insert(this.itemContainer,e,0):this.insert(this.itemContainer,e),this.activeId=e.instance.id},t.prototype.slideOutPanel=function(e,t){void 0===t&&(t=!1);var n=this.itemContainerHeight;return!0===t&&(n*=-1),this.slidePanel(0,n,e.location.nativeElement)},t.prototype.slideInPanel=function(e,t){void 0===t&&(t=!1);var n=this.itemContainerHeight;return!1===t&&(n*=-1),this.slidePanel(n,0,e.location.nativeElement)},t.prototype.removeItemById=function(e){return[this.items.find((function(t){return t.id===e})).button.instance.toggleZoom(!0)]},t.prototype.removePanel=function(e){e.location.nativeElement.removeAttribute("style"),this.remove(this.itemContainer,e)},t.prototype.detachPanel=function(e){e.location.nativeElement.removeAttribute("style"),this.detachComponent(this.itemContainer,e)},t.prototype.clearItems=function(){var e=this;this.operations.remove.forEach((function(t){var n=e.items.find((function(e){return e.id===t}));n.panel.instance.disableAutoOpen&&e.panelActivated.next({id:t,data:"remove"}),e.removePanel(n.panel);var r=e.items.findIndex((function(e){return e.id===t}));e.items.splice(r,1)}))},t.prototype.slidePanel=function(e,t,n){return Object(p.a)(n)},t.prototype.toggleSidePanel=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=this.panelWidth);var n={width:this.buttonContainerWidth+"px"},r={width:Number(t+this.buttonContainerWidth)+"px"},i=n,a=r;!0===e&&(i=r,a=n);var s=new o.e({from:i,to:a,transitionProperty:"width",duration:300,easing:"ease-in-out"});return s.element=this.sidePanel.nativeElement,s},t.prototype.switchBetweenSidePanels=function(e,t){var n={width:Number((e.width||this.panelWidth)+this.buttonContainerWidth)+"px"},r={width:Number((t.width||this.panelWidth)+this.buttonContainerWidth)+"px"},i=new o.e({from:n,to:r,transitionProperty:"width",duration:300,easing:"ease-in-out"});return i.element=this.sidePanel.nativeElement,i},t.prototype.listenToOpenRightSidebarState=function(){var e=this;return this.stateSvc.changes("OpenRightSidebar").pipe(Object(g.a)((function(t){return t!==o.r.None?("shapePanel"!==t&&"shapeData"!==t&&"diagramcomments"!==t&&e.stateSvc.set("Selected",[]),e.open(t)):e.close()})))},t.prototype.listenToDiagramChange=function(){var e=this;return this.stateSvc.changes("CurrentDiagram").pipe(Object(b.a)((function(e){return!!e})),Object(m.a)((function(){return e.stateSvc.set("OpenRightSidebar",o.r.None)})))},t.\u0275fac=function(e){return new(e||t)(i.gc(i.m),i.gc(a.Hb),i.gc(i.C))},t.\u0275cmp=i.ac({type:t,selectors:[["sidebar"]],viewQuery:function(e,t){var n;(1&e&&(i.kd(_,!0),i.kd(y,!0,i.hb)),2&e)&&(i.Mc(n=i.vc())&&(t.sidePanel=n.first),i.Mc(n=i.vc())&&(t.itemContainer=n.first))},features:[i.Pb],decls:5,vars:0,consts:[[1,"sidebar","fx-pointer-events-auto","fx-span-height-100vh","white"],["sidePanel",""],[1,"sidebar-container"],["itemContainer",""]],template:function(e,t){1&e&&(i.mc(0,"div",0,1),i.mc(2,"div",2),i.hc(3,"div",null,3),i.lc(),i.lc())},styles:[".sidebar[_ngcontent-%COMP%]{background:rgba(255,0,0,0);pointer-events:none;position:relative;float:right;will-change:width;z-index:2}.sidebar-buttons[_ngcontent-%COMP%], .sidebar-buttons-container[_ngcontent-%COMP%]{pointer-events:none!important}.sidebar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}.sidebar-container[_ngcontent-%COMP%]{box-shadow:0 2px 2px rgba(0,0,0,.15),0 1px 12px rgba(0,0,0,.15);height:inherit;width:100%;float:right;overflow:hidden;position:absolute;top:0;background-color:#fff}.sidebar-buttons[_ngcontent-%COMP%]{height:inherit;width:50px;border-right:1px solid #caccce;display:inline-block;background-color:rgba(255,0,0,0)}.sidebar-buttons[_ngcontent-%COMP%]   .fx-icon[_ngcontent-%COMP%]{height:33px;display:block}.sidebar-container[_ngcontent-%COMP%]    >*{position:absolute;height:100%;width:100%}.sidebar-container[_ngcontent-%COMP%]     .ps, .sidebar-container[_ngcontent-%COMP%]     .ps-content{height:100%}.sidebar-buttons-container[_ngcontent-%COMP%]{height:inherit;display:flex;flex-direction:column;justify-content:center}.sidebar-buttons-container-inner[_ngcontent-%COMP%]{box-shadow:0 1px 2px rgba(0,0,0,.1),0 1px 1px rgba(0,0,0,.05);border:.5px solid #caccce;position:relative;background:#fff;box-sizing:border-box;border-radius:5px 0 0 5px;border-right:0}.sidebar-btn-indicator[_ngcontent-%COMP%]{opacity:0;background-color:#f2c14b;width:2px;height:30px;position:absolute;z-index:1;top:0}.sidebar-buttons-container[_ngcontent-%COMP%]     sidebar-button{margin-right:.25rem;padding-top:.25rem;padding-bottom:.25rem;display:block}.sidebar-buttons-container[_ngcontent-%COMP%]     sidebar-button button{will-change:transform}"],changeDetection:0}),t}(o.k)},ioBB:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("5xGT"),i=n("EM62"),a=function(){function t(){this.workers={}}return Object.defineProperty(t.prototype,"isWebWorkerSupported",{get:function(){return"undefined"!=typeof Worker},enumerable:!1,configurable:!0}),t.prototype.register=function(t,n){this.fetch(t)||(this.isWebWorkerSupported?this.workers[t]=new Worker(e,void 0):r.cb.warning("This browser does not support web workers"))},t.prototype.fetch=function(e){return this.workers[e]},t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.cc({token:t,factory:t.\u0275fac}),t}()}).call(this,n("eJth"))},ipv5:function(e,t,n){var r=n("oFOz"),i=n("/J21"),a=n("a+rc"),o=n("sfKy"),s=n("Gf1k");function c(e){return/^[01]{1,10}$/.test(e)}t.BESSELI=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:s.besseli(e,t)},t.BESSELJ=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:s.besselj(e,t)},t.BESSELK=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:s.besselk(e,t)},t.BESSELY=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:s.bessely(e,t)},t.BIN2DEC=function(e){if(!c(e))return r.num;var t=parseInt(e,2),n=e.toString();return 10===n.length&&"1"===n.substring(0,1)?parseInt(n.substring(1),2)-512:t},t.BIN2HEX=function(e,t){if(!c(e))return r.num;var n=e.toString();if(10===n.length&&"1"===n.substring(0,1))return(0xfffffffe00+parseInt(n.substring(1),2)).toString(16);var i=parseInt(e,2).toString(16);return void 0===t?i:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=i.length?a.REPT("0",t-i.length)+i:r.num},t.BIN2OCT=function(e,t){if(!c(e))return r.num;var n=e.toString();if(10===n.length&&"1"===n.substring(0,1))return(1073741312+parseInt(n.substring(1),2)).toString(8);var i=parseInt(e,2).toString(8);return void 0===t?i:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=i.length?a.REPT("0",t-i.length)+i:r.num},t.BITAND=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?r.num:e&t},t.BITLSHIFT=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||Math.floor(e)!==e||e>0xffffffffffff||Math.abs(t)>53?r.num:t>=0?e<<t:e>>-t},t.BITOR=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?r.num:e|t},t.BITRSHIFT=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||Math.floor(e)!==e||e>0xffffffffffff||Math.abs(t)>53?r.num:t>=0?e>>t:e<<-t},t.BITXOR=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?r.num:e^t},t.COMPLEX=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t))return e;if("i"!==(n=void 0===n?"i":n)&&"j"!==n)return r.value;if(0===e&&0===t)return 0;if(0===e)return 1===t?n:t.toString()+n;if(0===t)return e.toString();var i=t>0?"+":"";return e.toString()+i+(1===t?n:t.toString()+n)},t.CONVERT=function(e,t,n){if((e=o.parseNumber(e))instanceof Error)return e;for(var i,a=[["a.u. of action","?",null,"action",!1,!1,105457168181818e-48],["a.u. of charge","e",null,"electric_charge",!1,!1,160217653141414e-33],["a.u. of energy","Eh",null,"energy",!1,!1,435974417757576e-32],["a.u. of length","a?",null,"length",!1,!1,529177210818182e-25],["a.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["a.u. of time","?/Eh",null,"time",!1,!1,241888432650516e-31],["admiralty knot","admkn",null,"speed",!1,!0,.514773333],["ampere","A",null,"electric_current",!0,!1,1],["ampere per meter","A/m",null,"magnetic_field_intensity",!0,!1,1],["\xe5ngstr\xf6m","\xc5",["ang"],"length",!1,!0,1e-10],["are","ar",null,"area",!1,!0,100],["astronomical unit","ua",null,"length",!1,!1,149597870691667e-25],["bar","bar",null,"pressure",!1,!1,1e5],["barn","b",null,"area",!1,!1,1e-28],["becquerel","Bq",null,"radioactivity",!0,!1,1],["bit","bit",["b"],"information",!1,!0,1],["btu","BTU",["btu"],"energy",!1,!0,1055.05585262],["byte","byte",null,"information",!1,!0,8],["candela","cd",null,"luminous_intensity",!0,!1,1],["candela per square metre","cd/m?",null,"luminance",!0,!1,1],["coulomb","C",null,"electric_charge",!0,!1,1],["cubic \xe5ngstr\xf6m","ang3",["ang^3"],"volume",!1,!0,1e-30],["cubic foot","ft3",["ft^3"],"volume",!1,!0,.028316846592],["cubic inch","in3",["in^3"],"volume",!1,!0,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",!1,!0,846786664623715e-61],["cubic metre","m?",null,"volume",!0,!0,1],["cubic mile","mi3",["mi^3"],"volume",!1,!0,4168181825.44058],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",!1,!0,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",!1,!0,7.58660370370369e-8],["cubic yard","yd3",["yd^3"],"volume",!1,!0,.764554857984],["cup","cup",null,"volume",!1,!0,.0002365882365],["dalton","Da",["u"],"mass",!1,!1,166053886282828e-41],["day","d",["day"],"time",!1,!0,86400],["degree","\xb0",null,"angle",!1,!1,.0174532925199433],["degrees Rankine","Rank",null,"temperature",!1,!0,.555555555555556],["dyne","dyn",["dy"],"force",!1,!0,1e-5],["electronvolt","eV",["ev"],"energy",!1,!0,1.60217656514141],["ell","ell",null,"length",!1,!0,1.143],["erg","erg",["e"],"energy",!1,!0,1e-7],["farad","F",null,"electric_capacitance",!0,!1,1],["fluid ounce","oz",null,"volume",!1,!0,295735295625e-16],["foot","ft",null,"length",!1,!0,.3048],["foot-pound","flb",null,"energy",!1,!0,1.3558179483314],["gal","Gal",null,"acceleration",!1,!1,.01],["gallon","gal",null,"volume",!1,!0,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",!1,!0,1],["grain","grain",null,"mass",!1,!0,647989e-10],["gram","g",null,"mass",!1,!0,.001],["gray","Gy",null,"absorbed_dose",!0,!1,1],["gross registered ton","GRT",["regton"],"volume",!1,!0,2.8316846592],["hectare","ha",null,"area",!1,!0,1e4],["henry","H",null,"inductance",!0,!1,1],["hertz","Hz",null,"frequency",!0,!1,1],["horsepower","HP",["h"],"power",!1,!0,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",!1,!0,2684519.538],["hour","h",["hr"],"time",!1,!0,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",!1,!0,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",!1,!0,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",!1,!0,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",!1,!0,1016.046909],["inch","in",null,"length",!1,!0,.0254],["international acre","uk_acre",null,"area",!1,!0,4046.8564224],["IT calorie","cal",null,"energy",!1,!0,4.1868],["joule","J",null,"energy",!0,!0,1],["katal","kat",null,"catalytic_activity",!0,!1,1],["kelvin","K",["kel"],"temperature",!0,!0,1],["kilogram","kg",null,"mass",!0,!0,1],["knot","kn",null,"speed",!1,!0,.514444444444444],["light-year","ly",null,"length",!1,!0,9460730472580800],["litre","L",["l","lt"],"volume",!1,!0,.001],["lumen","lm",null,"luminous_flux",!0,!1,1],["lux","lx",null,"illuminance",!0,!1,1],["maxwell","Mx",null,"magnetic_flux",!1,!1,1e-18],["measurement ton","MTON",null,"volume",!1,!0,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",!1,!0,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",!0,!0,1],["meter per second squared","m?s??",null,"acceleration",!0,!1,1],["parsec","pc",["parsec"],"length",!1,!0,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",!0,!1,1],["metre","m",null,"length",!0,!0,1],["miles per hour","mph",null,"speed",!1,!0,.44704],["millimetre of mercury","mmHg",null,"pressure",!1,!1,133.322],["minute","?",null,"angle",!1,!1,.000290888208665722],["minute","min",["mn"],"time",!1,!0,60],["modern teaspoon","tspm",null,"volume",!1,!0,5e-6],["mole","mol",null,"amount_of_substance",!0,!1,1],["morgen","Morgen",null,"area",!1,!0,2500],["n.u. of action","?",null,"action",!1,!1,105457168181818e-48],["n.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["n.u. of speed","c?",null,"speed",!1,!1,299792458],["n.u. of time","?/(me?c??)",null,"time",!1,!1,128808866778687e-35],["nautical mile","M",["Nmi"],"length",!1,!0,1852],["newton","N",null,"force",!0,!0,1],["\u0153rsted","Oe ",null,"magnetic_field_intensity",!1,!1,79.5774715459477],["ohm","\u03a9",null,"electric_resistance",!0,!1,1],["ounce mass","ozm",null,"mass",!1,!0,.028349523125],["pascal","Pa",null,"pressure",!0,!1,1],["pascal second","Pa?s",null,"dynamic_viscosity",!0,!1,1],["pferdest\xe4rke","PS",null,"power",!1,!0,735.49875],["phot","ph",null,"illuminance",!1,!1,1e-4],["pica (1/6 inch)","pica",null,"length",!1,!0,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",!1,!0,.00423333333333333],["poise","P",null,"dynamic_viscosity",!1,!1,.1],["pond","pond",null,"force",!1,!0,.00980665],["pound force","lbf",null,"force",!1,!0,4.4482216152605],["pound mass","lbm",null,"mass",!1,!0,.45359237],["quart","qt",null,"volume",!1,!0,.000946352946],["radian","rad",null,"angle",!0,!1,1],["second","?",null,"angle",!1,!1,484813681109536e-20],["second","s",["sec"],"time",!0,!0,1],["short hundredweight","cwt",["shweight"],"mass",!1,!0,45.359237],["siemens","S",null,"electrical_conductance",!0,!1,1],["sievert","Sv",null,"equivalent_dose",!0,!1,1],["slug","sg",null,"mass",!1,!0,14.59390294],["square \xe5ngstr\xf6m","ang2",["ang^2"],"area",!1,!0,1e-20],["square foot","ft2",["ft^2"],"area",!1,!0,.09290304],["square inch","in2",["in^2"],"area",!1,!0,64516e-8],["square light-year","ly2",["ly^2"],"area",!1,!0,895054210748189e17],["square meter","m?",null,"area",!0,!0,1],["square mile","mi2",["mi^2"],"area",!1,!0,2589988.110336],["square nautical mile","Nmi2",["Nmi^2"],"area",!1,!0,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",!1,!0,1792111111111e-17],["square yard","yd2",["yd^2"],"area",!1,!0,.83612736],["statute mile","mi",null,"length",!1,!0,1609.344],["steradian","sr",null,"solid_angle",!0,!1,1],["stilb","sb",null,"luminance",!1,!1,1e-4],["stokes","St",null,"kinematic_viscosity",!1,!1,1e-4],["stone","stone",null,"mass",!1,!0,6.35029318],["tablespoon","tbs",null,"volume",!1,!0,147868e-10],["teaspoon","tsp",null,"volume",!1,!0,492892e-11],["tesla","T",null,"magnetic_flux_density",!0,!0,1],["thermodynamic calorie","c",null,"energy",!1,!0,4.184],["ton","ton",null,"mass",!1,!0,907.18474],["tonne","t",null,"mass",!1,!1,1e3],["U.K. pint","uk_pt",null,"volume",!1,!0,.00056826125],["U.S. bushel","bushel",null,"volume",!1,!0,.03523907],["U.S. oil barrel","barrel",null,"volume",!1,!0,.158987295],["U.S. pint","pt",["us_pt"],"volume",!1,!0,.000473176473],["U.S. survey mile","survey_mi",null,"length",!1,!0,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",!1,!0,4046.87261],["volt","V",null,"voltage",!0,!1,1],["watt","W",null,"power",!0,!0,1],["watt-hour","Wh",["wh"],"energy",!1,!0,3600],["weber","Wb",null,"magnetic_flux",!0,!1,1],["yard","yd",null,"length",!1,!0,.9144],["year","yr",null,"time",!1,!0,31557600]],s={Yi:["yobi",80,12089258196146292e8,"Yi","yotta"],Zi:["zebi",70,11805916207174113e5,"Zi","zetta"],Ei:["exbi",60,0x1000000000000000,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]},c={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]},l=null,u=null,d=t,p=n,h=1,f=1,m=0;m<a.length;m++)i=null===a[m][2]?[]:a[m][2],(a[m][1]===d||i.indexOf(d)>=0)&&(l=a[m]),(a[m][1]===p||i.indexOf(p)>=0)&&(u=a[m]);if(null===l){var g=s[t.substring(0,2)],b=c[t.substring(0,1)];"da"===t.substring(0,2)&&(b=["dekao",10,"da"]),g?(h=g[2],d=t.substring(2)):b&&(h=b[1],d=t.substring(b[2].length));for(var v=0;v<a.length;v++)i=null===a[v][2]?[]:a[v][2],(a[v][1]===d||i.indexOf(d)>=0)&&(l=a[v])}if(null===u){var _=s[n.substring(0,2)],y=c[n.substring(0,1)];"da"===n.substring(0,2)&&(y=["dekao",10,"da"]),_?(f=_[2],p=n.substring(2)):y&&(f=y[1],p=n.substring(y[2].length));for(var O=0;O<a.length;O++)i=null===a[O][2]?[]:a[O][2],(a[O][1]===p||i.indexOf(p)>=0)&&(u=a[O])}return null===l||null===u||l[3]!==u[3]?r.na:e*l[6]*h/(u[6]*f)},t.DEC2BIN=function(e,t){if((e=o.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,3}$/.test(e)||e<-512||e>511)return r.num;if(e<0)return"1"+a.REPT("0",9-(512+e).toString(2).length)+(512+e).toString(2);var n=parseInt(e,10).toString(2);return void 0===t?n:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=n.length?a.REPT("0",t-n.length)+n:r.num},t.DEC2HEX=function(e,t){if((e=o.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,12}$/.test(e)||e<-549755813888||e>549755813887)return r.num;if(e<0)return(1099511627776+e).toString(16);var n=parseInt(e,10).toString(16);return void 0===t?n:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=n.length?a.REPT("0",t-n.length)+n:r.num},t.DEC2OCT=function(e,t){if((e=o.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,9}$/.test(e)||e<-536870912||e>536870911)return r.num;if(e<0)return(1073741824+e).toString(8);var n=parseInt(e,10).toString(8);return void 0===t?n:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=n.length?a.REPT("0",t-n.length)+n:r.num},t.DELTA=function(e,t){return t=void 0===t?0:t,e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e===t?1:0},t.ERF=function(e,t){return t=void 0===t?0:t,e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:i.erf(e)},t.ERF.PRECISE=function(){throw new Error("ERF.PRECISE is not implemented")},t.ERFC=function(e){return isNaN(e)?r.value:i.erfc(e)},t.ERFC.PRECISE=function(){throw new Error("ERFC.PRECISE is not implemented")},t.GESTEP=function(e,t){return t=t||0,e=o.parseNumber(e),o.anyIsError(t,e)?e:e>=t?1:0},t.HEX2BIN=function(e,t){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return r.num;var n=10===e.length&&"f"===e.substring(0,1).toLowerCase(),i=n?parseInt(e,16)-1099511627776:parseInt(e,16);if(i<-512||i>511)return r.num;if(n)return"1"+a.REPT("0",9-(512+i).toString(2).length)+(512+i).toString(2);var o=i.toString(2);return void 0===t?o:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=o.length?a.REPT("0",t-o.length)+o:r.num},t.HEX2DEC=function(e){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return r.num;var t=parseInt(e,16);return t>=549755813888?t-1099511627776:t},t.HEX2OCT=function(e,t){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return r.num;var n=parseInt(e,16);if(n>536870911&&n<0xffe0000000)return r.num;if(n>=0xffe0000000)return(n-0xffc0000000).toString(8);var i=n.toString(8);return void 0===t?i:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=i.length?a.REPT("0",t-i.length)+i:r.num},t.IMABS=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:Math.sqrt(Math.pow(n,2)+Math.pow(i,2))},t.IMAGINARY=function(e){if(void 0===e||!0===e||!1===e)return r.value;if(0===e||"0"===e)return 0;if(["i","j"].indexOf(e)>=0)return 1;var t=(e=(e+="").replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));var i=e.substring(e.length-1,e.length),a="i"===i||"j"===i;return t>=0||n>=0?a?t>=0?isNaN(e.substring(0,t))||isNaN(e.substring(t+1,e.length-1))?r.num:Number(e.substring(t+1,e.length-1)):isNaN(e.substring(0,n))||isNaN(e.substring(n+1,e.length-1))?r.num:-Number(e.substring(n+1,e.length-1)):r.num:a?isNaN(e.substring(0,e.length-1))?r.num:e.substring(0,e.length-1):isNaN(e)?r.num:0},t.IMARGUMENT=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:0===n&&0===i?r.div0:0===n&&i>0?Math.PI/2:0===n&&i<0?-Math.PI/2:0===i&&n>0?0:0===i&&n<0?-Math.PI:n>0?Math.atan(i/n):n<0&&i>=0?Math.atan(i/n)+Math.PI:Math.atan(i/n)-Math.PI},t.IMCONJUGATE=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",0!==i?t.COMPLEX(n,-i,a):e},t.IMCOS=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.cos(n)*(Math.exp(i)+Math.exp(-i))/2,-Math.sin(n)*(Math.exp(i)-Math.exp(-i))/2,a)},t.IMCOSH=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.cos(i)*(Math.exp(n)+Math.exp(-n))/2,Math.sin(i)*(Math.exp(n)-Math.exp(-n))/2,a)},t.IMCOT=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:t.IMDIV(t.IMCOS(e),t.IMSIN(e))},t.IMDIV=function(e,n){var i=t.IMREAL(e),a=t.IMAGINARY(e),s=t.IMREAL(n),c=t.IMAGINARY(n);if(o.anyIsError(i,a,s,c))return r.value;var l=e.substring(e.length-1),u=n.substring(n.length-1),d="i";if(("j"===l||"j"===u)&&(d="j"),0===s&&0===c)return r.num;var p=s*s+c*c;return t.COMPLEX((i*s+a*c)/p,(a*s-i*c)/p,d)},t.IMEXP=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);a="i"===a||"j"===a?a:"i";var s=Math.exp(n);return t.COMPLEX(s*Math.cos(i),s*Math.sin(i),a)},t.IMLN=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.log(Math.sqrt(n*n+i*i)),Math.atan(i/n),a)},t.IMLOG10=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.log(Math.sqrt(n*n+i*i))/Math.log(10),Math.atan(i/n)/Math.log(10),a)},t.IMLOG2=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.log(Math.sqrt(n*n+i*i))/Math.log(2),Math.atan(i/n)/Math.log(2),a)},t.IMPOWER=function(e,n){n=o.parseNumber(n);var i=t.IMREAL(e),a=t.IMAGINARY(e);if(o.anyIsError(n,i,a))return r.value;var s=e.substring(e.length-1);s="i"===s||"j"===s?s:"i";var c=Math.pow(t.IMABS(e),n),l=t.IMARGUMENT(e);return t.COMPLEX(c*Math.cos(n*l),c*Math.sin(n*l),s)},t.IMPRODUCT=function(){var e=arguments[0];if(!arguments.length)return r.value;for(var n=1;n<arguments.length;n++){var i=t.IMREAL(e),a=t.IMAGINARY(e),s=t.IMREAL(arguments[n]),c=t.IMAGINARY(arguments[n]);if(o.anyIsError(i,a,s,c))return r.value;e=t.COMPLEX(i*s-a*c,i*c+a*s)}return e},t.IMREAL=function(e){if(void 0===e||!0===e||!1===e)return r.value;if(0===e||"0"===e)return 0;if(["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(e)>=0)return 0;var t=(e+="").indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));var i=e.substring(e.length-1,e.length),a="i"===i||"j"===i;return t>=0||n>=0?a?t>=0?isNaN(e.substring(0,t))||isNaN(e.substring(t+1,e.length-1))?r.num:Number(e.substring(0,t)):isNaN(e.substring(0,n))||isNaN(e.substring(n+1,e.length-1))?r.num:Number(e.substring(0,n)):r.num:a?isNaN(e.substring(0,e.length-1))?r.num:0:isNaN(e)?r.num:e},t.IMSEC=function(e){if(!0===e||!1===e)return r.value;var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:t.IMDIV("1",t.IMCOS(e))},t.IMSECH=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:t.IMDIV("1",t.IMCOSH(e))},t.IMSIN=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.sin(n)*(Math.exp(i)+Math.exp(-i))/2,Math.cos(n)*(Math.exp(i)-Math.exp(-i))/2,a)},t.IMSINH=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.cos(i)*(Math.exp(n)-Math.exp(-n))/2,Math.sin(i)*(Math.exp(n)+Math.exp(-n))/2,a)},t.IMSQRT=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);a="i"===a||"j"===a?a:"i";var s=Math.sqrt(t.IMABS(e)),c=t.IMARGUMENT(e);return t.COMPLEX(s*Math.cos(c/2),s*Math.sin(c/2),a)},t.IMCSC=function(e){if(!0===e||!1===e)return r.value;var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.num:t.IMDIV("1",t.IMSIN(e))},t.IMCSCH=function(e){if(!0===e||!1===e)return r.value;var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.num:t.IMDIV("1",t.IMSINH(e))},t.IMSUB=function(e,t){var n=this.IMREAL(e),i=this.IMAGINARY(e),a=this.IMREAL(t),s=this.IMAGINARY(t);if(o.anyIsError(n,i,a,s))return r.value;var c=e.substring(e.length-1),l=t.substring(t.length-1),u="i";return("j"===c||"j"===l)&&(u="j"),this.COMPLEX(n-a,i-s,u)},t.IMSUM=function(){if(!arguments.length)return r.value;for(var e=o.flatten(arguments),t=e[0],n=1;n<e.length;n++){var i=this.IMREAL(t),a=this.IMAGINARY(t),s=this.IMREAL(e[n]),c=this.IMAGINARY(e[n]);if(o.anyIsError(i,a,s,c))return r.value;t=this.COMPLEX(i+s,a+c)}return t},t.IMTAN=function(e){if(!0===e||!1===e)return r.value;var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:this.IMDIV(this.IMSIN(e),this.IMCOS(e))},t.OCT2BIN=function(e,t){if(!/^[0-7]{1,10}$/.test(e))return r.num;var n=10===e.length&&"7"===e.substring(0,1),i=n?parseInt(e,8)-1073741824:parseInt(e,8);if(i<-512||i>511)return r.num;if(n)return"1"+a.REPT("0",9-(512+i).toString(2).length)+(512+i).toString(2);var o=i.toString(2);return void 0===t?o:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=o.length?a.REPT("0",t-o.length)+o:r.num},t.OCT2DEC=function(e){if(!/^[0-7]{1,10}$/.test(e))return r.num;var t=parseInt(e,8);return t>=536870912?t-1073741824:t},t.OCT2HEX=function(e,t){if(!/^[0-7]{1,10}$/.test(e))return r.num;var n=parseInt(e,8);if(n>=536870912)return"ff"+(n+3221225472).toString(16);var i=n.toString(16);return void 0===t?i:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=i.length?a.REPT("0",t-i.length)+i:r.num}},"iy5+":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return E}));var r,i=n("D57K"),a=n("5xGT"),o=n("nsO7"),s=n("ROBh"),c=n("6Oco"),l=n("HM3f"),u=n("TLy2"),d=n("YtkY"),p=n("8j5Y"),h=n("J+dc"),f=n("mWib"),m=n("Ohay"),g=n("QoSw"),b=n("iesc"),v=n("oyCe"),_=n("wkcE"),y=n("Jzy8"),O=n("EM62"),x=["sb"];!function(e){e.ENABLED="enabled",e.DISABLED="disabled"}(r||(r={}));var E=function(){function e(e,t,n){this.ll=e,this.collabLocator=t,this.state=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.subs=[],this.subs.push(this.state.changes("InterfaceControlState").pipe(Object(u.a)((function(t){return"edit"===t?e.selectionChanged():Object(s.a)([{id:"diagraminfo",features:[]}])})),Object(u.a)((function(t){return e.getPanelsBasedOnRole().pipe(Object(d.a)((function(e){return t.concat(e)})))}))).pipe(Object(p.a)((function(t){var n=t.map((function(e){return e.id}));e.removePanels(n),e.addPanels(t),e.updatePanels(t),e.sideBar.apply()}))).subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getPanelsBasedOnRole=function(){var e=this;return this.state.changes("CurrentUser").pipe(Object(u.a)((function(t){if(t){var n=e.state.get("CurrentDiagram");if(n)return e.collabLocator.getCollabsSortedIgnoringOnline(n).pipe(Object(u.a)((function(t){var n=t.find((function(t){return t.id===e.state.get("CurrentUser")}));return e.getPrivacyLevel().pipe(Object(d.a)((function(e){return e&&e.level>=3||void 0!==n&&n.roleSortOrderWithoutOnline<y.E.UNREG_EDITOR?!!n&&n.isRegistered&&[y.g.OWNER,y.g.EDITOR].includes(n.role)?[{id:"diagramcomments",features:[]},{id:"historyPanel",features:[{featureId:"RESTORE",data:{enabled:!0}}]}]:[{id:"diagramcomments",features:[]}]:[]})))})))}return Object(s.a)([])})))},e.prototype.getPrivacyLevel=function(){return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(h.a)(1),Object(d.a)((function(e){return e.privacy})))},e.prototype.selectionChanged=function(){var e=this;return this.state.changes("Selected").pipe(Object(f.a)(100),Object(u.a)((function(t){if(!t||!t.length)return e.getPanelsForDiagram();var n=t.slice();return 1===n.length?e.getPanelsForSingleShape(n[0]):e.getPanelsForMultiShape(n)})))},e.prototype.getPanelsForDiagram=function(){return this.state.get("CurrentDiagram")?this.ll.forCurrentObserver(!1).pipe(Object(u.a)((function(e){return e.getDiagramOnce().pipe(Object(d.a)((function(e){return e.getSidebarPanels()})))}))):Object(c.b)()},e.prototype.getPanelsForSingleShape=function(e){return this.locator.getShapeModel(e).pipe(Object(d.a)((function(e){return e.getSidebarPanels()})),Object(m.a)(o.isEqual))},e.prototype.getPanelsForMultiShape=function(e){var t=this,n=e.map((function(e){return t.locator.getShapeModel(e)}));return l.b.apply(void 0,Object(i.j)(n)).pipe(Object(f.a)(100),Object(d.a)((function(e){return v.a.sameType(e)?e.map((function(e){return e.getSidebarPanelsForSameType()})):e.map((function(e){return e.getSidebarPanelsForMultiTypes()}))})),Object(m.a)(o.isEqual),Object(d.a)((function(e){var n={},r=e.map((function(e){return e.map((function(e){return n[e.id]=e,e.id}))})),i=t.getLeastPanels(r).map((function(e){return n[e.id]=e,e.id})),a=r.reduce((function(e,t){return Object(o.intersection)(e,t)}));return Object(o.union)(a,i).map((function(e){return n[e]}))})))},e.prototype.getLeastPanels=function(e){var t=this;return o.union.apply(void 0,Object(i.j)(e)).filter((function(e){var n=t.getPanelType(e);return!!n&&"atLeastOne"===n.openForContextAware})).map((function(e){return{id:e,features:{}}}))},e.prototype.removePanels=function(e){var t=this;this.sideBar.itemIds.filter((function(t){return-1===e.indexOf(t)})).forEach((function(e){return t.sideBar.removeById(e)}))},e.prototype.addPanels=function(e){var t=this;e.forEach((function(e,n){if(-1===t.sideBar.itemIds.indexOf(e.id)){var r=t.getPanelType(e.id);r&&t.sideBar.add(r,n)}}))},e.prototype.updatePanels=function(e){var t=this;e.forEach((function(e,n){t.sideBar.updatePanelFeatures(e)}))},e.prototype.getPanelType=function(e){return this.state.get("AvailableSideBarPanels")[e]},e.\u0275fac=function(t){return new(t||e)(O.gc(g.a),O.gc(_.a),O.gc(a.Hb))},e.\u0275cmp=O.ac({type:e,selectors:[["sidebar-container"]],viewQuery:function(e,t){var n;(1&e&&O.Xc(x,!0),2&e)&&(O.Mc(n=O.vc())&&(t.sideBar=n.first))},decls:2,vars:0,consts:[["sb",""]],template:function(e,t){1&e&&O.hc(0,"sidebar",null,0)},directives:[b.a],styles:["floating-toolbar[_ngcontent-%COMP%]{z-index:3;pointer-events:auto}"],changeDetection:0}),e}()},"izw+":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("QoSw"),i=n("nsO7"),a=n("wx9+"),o=n("8a+/"),s=n("YtkY"),c=n("5xGT"),l=n("ROBh"),u=n("EM62"),d=n("s2Ay"),p=function(){function e(e,t,n,r,i){this.state=e,this.ll=t,this.shapeBoundsLocator=n,this.viewport=r,this.translate=i}return e.prototype.getFeatureData=function(e,t){return Object(l.a)(t)},e.prototype.transformProperties=function(e,t){var n=this,r=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){var a=Object(i.values)(e.shapes).filter((function(e){return!e.isConnector()&&r.includes(e.id)})).every((function(e){return e.isContainer}));return t.label=a?n.translate.instant("COMMANDS.UNDO_CONTAINERIZING"):n.translate.instant("COMMANDS.CONTAINERIZE"),t})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){return!!t.find((function(t){return e.shapes[t].isContainerable}))})))},e.prototype.getApplyData=function(e,t){var n=this,r=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){var t=r.map((function(t){return e.shapes[t]})),i=t.filter((function(e){return!e.isConnector()&&e.isContainerable&&!e.isContainer})),a={containerData:{},childrenData:{}};return i.length?n.containerize(e,i,a):n.decontainerize(t,a),a})))},e.prototype.containerize=function(e,t,n){var r=this;t.forEach((function(t){var i=t.bounds;r.shapeBoundsLocator.searchShapes(i.left,i.right,i.top,i.bottom,[t.id],!0).filter((function(n){return!!(n.zIndex>=t.zIndex)&&(e.shapes[n.id].containerId||null)===(e.shapes[t.id].containerId||null)})).forEach((function(e){n.childrenData[e.id]={action:"enter",containerId:t.id}})),n.containerData[t.id]={isContainer:!0}}))},e.prototype.decontainerize=function(e,t){Object(i.values)(e).filter((function(e){return!e.isConnector()&&e.isContainerable&&e.isContainer})).forEach((function(e){for(var n in e.children)t.childrenData[n]={action:"leave",containerId:e.id};t.containerData[e.id]={isContainer:!1}}))},e.\u0275fac=function(t){return new(t||e)(u.qc(c.Hb),u.qc(r.a),u.qc(o.a),u.qc(a.a),u.qc(d.e))},e.\u0275prov=u.cc({token:e,factory:e.\u0275fac}),e}()},j0Im:function(e,t,n){var r=n("sfKy"),i=n("oFOz");t.UNIQUE=function(){for(var e=[],t=0;t<arguments.length;++t){for(var n=!1,r=arguments[t],i=0;i<e.length&&!(n=e[i]===r);++i);n||e.push(r)}return e},t.FLATTEN=r.flatten,t.ARGS2ARRAY=function(){return Array.prototype.slice.call(arguments,0)},t.REFERENCE=function(e,t){if(!arguments.length)return i.error;try{for(var n=t.split("."),r=e,a=0;a<n.length;++a){var o=n[a];if("]"===o[o.length-1]){var s=o.indexOf("["),c=o.substring(s+1,o.length-1);r=r[o.substring(0,s)][c]}else r=r[o]}return r}catch(i){}},t.JOIN=function(e,t){return e.join(t)},t.NUMBERS=function(){var e=r.flatten(arguments);return e.filter((function(e){return"number"==typeof e}))}},j1Bk:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("EM62"),i=n("2kYt"),a=n("s2Ay");function o(e,t){if(1&e&&(r.mc(0,"span",7),r.xc(),r.mc(1,"svg",8),r.hc(2,"use"),r.lc(),r.lc()),2&e){var n=r.yc(2);r.Sb(2),r.Tb("href",n.subTextIconHref,null,"xlink")}}function s(e,t){if(1&e&&(r.mc(0,"label",5),r.dd(1,o,3,1,"span",6),r.fd(2),r.lc()),2&e){var n=r.yc();r.Sb(1),r.Dc("ngIf",n.subTextIcon),r.Sb(1),r.hd(" ",n.subText," ")}}var c=function(){function e(){this.icon="generic",this.reverse=!1}return Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/common/panels/diagram-type-icons/"+this.icon+".svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subTextIconHref",{get:function(){return"./assets/icons/symbol-defs.svg#"+this.subTextIcon},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.ac({type:e,selectors:[["panel-icon-header"]],inputs:{icon:"icon",reverse:"reverse",mainText:"mainText",subText:"subText",subTextIcon:"subTextIcon"},decls:6,vars:4,consts:[[1,"panel-item"],[1,"panel-icon-header","fx-center-vertical"],[1,"panel-icon-header-text"],["class","sub body","translate","",4,"ngIf"],["translate","",1,"main","title","title--semibold"],["translate","",1,"sub","body"],["class","lock-icon",4,"ngIf"],[1,"lock-icon"],[1,"nu-icon","nu-icon-xsmall"]],template:function(e,t){1&e&&(r.mc(0,"div",0),r.mc(1,"div",1),r.mc(2,"div",2),r.dd(3,s,3,2,"label",3),r.mc(4,"h1",4),r.fd(5),r.lc(),r.lc(),r.lc(),r.lc()),2&e&&(r.Sb(2),r.Yb("reverse",t.reverse),r.Sb(1),r.Dc("ngIf",t.subText),r.Sb(2),r.gd(t.mainText))},directives:[i.t,a.a],styles:[".panel-icon-header[_ngcontent-%COMP%]{padding-top:.875rem}.panel-icon-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:.875rem;width:32px;margin-top:-5px;pointer-events:none}.panel-icon-header-text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.panel-icon-header-text[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{margin-bottom:.25rem;margin-top:-.5rem;text-align:left;order:1;color:#354b53}.panel-icon-header-text[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{color:#88a1aa;order:2}.panel-icon-header-text[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-top}.panel-icon-header-text.reverse[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{order:2}.panel-icon-header-text.reverse[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{margin-bottom:.25rem;order:1}"],changeDetection:0}),e}()},"k/7B":function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n("QoSw"),i=n("diDk"),a=(n("unyx"),n("NNJu")),o=n("ZTXN"),s=n("C05f"),c=n("ROBh"),l=n("P4Xx"),u=n("TLy2"),d=n("8j5Y"),p=n("YtkY"),h=n("Ohay"),f=n("EM62"),m=n("2kYt"),g=n("pYIu"),b=n("XwbL"),v=n("uXwy"),_=["dbSelector"];function y(e,t){if(1&e&&f.hc(0,"sidebar-list-dropdown-item",5),2&e){var n=t.$implicit;f.Dc("item",n)}}var O=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}};function x(e,t){if(1&e&&(f.mc(0,"abs-dropdown",1,2),f.hc(2,"sidebar-dropdown-button",3),f.dd(3,y,1,1,"sidebar-list-dropdown-item",4),f.lc()),2&e){var n=t.ngIf,r=f.yc();f.Dc("settings",f.Hc(5,O))("autoPosition",!1),f.Sb(2),f.Dc("items",n)("placeholderText",r.placeholderText),f.Sb(1),f.Dc("ngForOf",n)}}var E=function(){function e(e,t){var n=this;this.ll=e,this.ell=t,this.dbChanged=new o.a,this.subs=[],this.databases=[],this._selectedDb=new s.a(null),this.databaseOptions=this.ll.forCurrentObserver(!1).pipe(Object(u.a)((function(e){return e.getDiagramEData().pipe(Object(u.a)((function(e){if(!e)return Object(c.a)([]);var t=e.map((function(e){return n.ell.getEData(e).pipe(Object(u.a)((function(e){return e.getEDataModelOnce()})))}));return Object(l.a)(t)})))})),Object(d.a)((function(e){return n.databases=e})),Object(u.a)((function(e){return n._selectedDb.pipe(Object(p.a)((function(t){return e.map((function(e){return{id:e.id,label:e.name,buttonLabel:e.name,selected:!!t&&t.id===e.id}}))})))})))}return e.prototype.ngOnChanges=function(e){this._selectedDb.next(e.selectedDb.currentValue)},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.dbSelector.changed.pipe(Object(h.a)((function(e,t){return e.length===t.length&&e[0]===t[0]}))).subscribe((function(t){e.dbChanged.next(e.databases.find((function(e){return e.id===t[0]})))})))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.\u0275fac=function(t){return new(t||e)(f.gc(r.a),f.gc(i.a))},e.\u0275cmp=f.ac({type:e,selectors:[["custom-database-selector"]],viewQuery:function(e,t){var n;(1&e&&f.kd(_,!0,a.b),2&e)&&(f.Mc(n=f.vc())&&(t.dbSelector=n.first))},inputs:{selectedDb:"selectedDb",placeholderText:"placeholderText"},outputs:{dbChanged:"dbChanged"},features:[f.Qb],decls:2,vars:3,consts:[["class","dropdown-item",3,"settings","autoPosition",4,"ngIf"],[1,"dropdown-item",3,"settings","autoPosition"],["dbSelector",""],["ddbutton","",3,"items","placeholderText"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){1&e&&(f.dd(0,x,4,6,"abs-dropdown",0),f.zc(1,"async")),2&e&&f.Dc("ngIf",f.Ac(1,1,t.databaseOptions))},directives:[m.t,g.a,b.a,m.s,v.a],pipes:[m.b],encapsulation:2,changeDetection:0}),e}()},k0Sg:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("nsO7"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("YtkY"),c=n("QoSw"),l=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this,i=this.featureList.getFeature(e);return t.params={readOnly:i.data.readOnly,isDiffColor:!1,type:i.data.type},"lineStyle"===i.data.style?(t.data.forEach((function(e){e.buttonIcon=n.getDrawableIcon(e.value,60,20),e.itemIcon=n.getDrawableIcon(e.value,50,20),e.selected=Object(r.isEqual)(t.value,e.value)})),Object(o.a)({value:t.data})):"fillColor"===i.data.style||"lineColor"===i.data.style?this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){return n.getColorMismatch(e,t,i.data.style)}))):Object(o.a)(t)},e.prototype.getApplyData=function(e,t){var n=this.featureList.getFeature(e);"lineThickness"===n.data.style&&(t.value=parseInt(t.value,10));var r={};return r[n.data.style]=t.value,"colorFill"===e&&(r.fillStyle="solid"),Object(o.a)({style:r})},e.prototype.getColorMismatch=function(e,t,n){var r=this.state.get("Selected"),i=[],a=!1;r.forEach((function(t){var r=e.getShape(t);switch(n){case"fillColor":i.push(r.style.fillColor);break;case"lineColor":i.push(r.style.lineColor)}}));for(var o=1;o<i.length;o++)if(i[o-1]!==i[o]){a=!0;break}return a&&(t.params.isDiffColor=!0),t},e.prototype.getDrawableIcon=function(e,t,n){return{type:"canvas",value:function(r,i){r.setStrokeDash(e),r.beginStroke("navy-blue"),r.moveTo(0,n/2),r.lineTo(t,n/2),r.endStroke()},width:t,height:n}},e.\u0275fac=function(t){return new(t||e)(l.qc(c.a),l.qc(a.Hb),l.qc(i.a))},e.\u0275prov=l.cc({token:e,factory:e.\u0275fac}),e}()},kRQx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("h/AH"),o=(r=a)&&r.__esModule?r:{default:r};var s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t;var i={cache:!0};if(void 0===r&&(r=i),"function"!=typeof n?(this.value=n,this.type=this.constructor.CONSTANT):(this.calculationMethod=n,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(r.priority||1,10),this.options=Object.assign({},i,r),this.cacheKeyMethod=this.defaultCacheKeys,this}return i(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(e,t){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(e,t)}},{key:"defaultCacheKeys",value:function(e,t){return{params:t,id:e}}},{key:"getCacheKey",value:function(t){if(!0===this.options.cache){var n=this.cacheKeyMethod(this.id,t);return e.hashFromObject(n)}}}],[{key:"hashFromObject",value:function(e){return(0,o.default)(e)}}]),e}();s.CONSTANT="CONSTANT",s.DYNAMIC="DYNAMIC",t.default=s},kWt5:function(e,t,n){},kgBD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserCommands=void 0,function(e){e.userSetToken="user:setToken"}(t.UserCommands||(t.UserCommands={}))},ktVY:function(e,t,n){var r=n("oFOz"),i=n("sfKy");t.MATCH=function(e,t,n){if(!e&&!t)return r.na;if(2===arguments.length&&(n=1),!(t instanceof Array))return r.na;if(t=i.flatten(t),-1!==n&&0!==n&&1!==n)return r.na;for(var a,o,s=0;s<t.length;s++)if(1===n){if(t[s]===e)return s+1;t[s]<e&&(o?t[s]>o&&(a=s+1,o=t[s]):(a=s+1,o=t[s]))}else if(0===n){if("string"==typeof e){if(e=e.replace(/\?/g,"."),t[s].toLowerCase().match(e.toLowerCase()))return s+1}else if(t[s]===e)return s+1}else if(-1===n){if(t[s]===e)return s+1;t[s]>e&&(o?t[s]<o&&(a=s+1,o=t[s]):(a=s+1,o=t[s]))}return a||r.na},t.VLOOKUP=function(e,t,n,i){if(!t||!n)return r.na;i=!(0===i||!1===i);for(var a=r.na,o="number"==typeof e,s=!1,c=0;c<t.length;c++){var l=t[c];if(l[0]===e){a=n<l.length+1?l[n-1]:r.ref;break}!s&&(o&&i&&l[0]<=e||i&&"string"==typeof l[0]&&l[0].localeCompare(e)<0)&&(a=n<l.length+1?l[n-1]:r.ref),o&&l[0]>e&&(s=!0)}return a},t.HLOOKUP=function(e,n,r,a){return t.VLOOKUP(e,i.transpose(n),r,a)},t.LOOKUP=function(e,t,n){t=i.flatten(t),n=i.flatten(n);for(var a="number"==typeof e,o=r.na,s=0;s<t.length;s++){if(t[s]===e)return n[s];if(a&&t[s]<=e||"string"==typeof t[s]&&t[s].localeCompare(e)<0)o=n[s];else if(a&&t[s]>e)return o}return o},t.INDEX=function(e,t,n){var a=i.anyError(e,t,n);if(a)return a;if(!Array.isArray(e))return r.value;var o=e.length>0&&!Array.isArray(e[0]);return o&&!n?(n=t,t=1):(n=n||1,t=t||1),n<0||t<0?r.value:o&&1===t&&n<=e.length?e[n-1]:t<=e.length&&n<=e[t-1].length?e[t-1][n-1]:r.ref}},lCA4:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t="undefined"!=typeof global?global:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default},lP4r:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("6Oco"),a=n("EM62"),o=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeCodeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t,n,a=e.__sakota__.getChanges(),o=this.modifiedShapes(a);try{for(var s=Object(r.k)(o),c=s.next();!c.done;c=s.next()){var l=c.value;this.processShape(e,l)}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.a},e.prototype.processShape=function(e,t){var n=e.shapes[t],r=n.__sakota__.getChanges(),i=r.$set&&!!r.$set.defId;if(n&&n.dataChange&&!i&&n.dataChange(n,e),n&&n.containerId){var a=e.shapes[n.containerId];a&&a.childChange&&a.childChange(a,n)}},e.prototype.modifiedShapes=function(t){var n,i,a=[];try{for(var o=Object(r.k)(["$set","$unset"]),s=o.next();!s.done;s=o.next()){var c=s.value;if(t[c])for(var l in t[c]){e.regexShape.lastIndex=0;var u=e.regexShape.exec(l);if(u){var d=u[1];-1===a.indexOf(d)&&a.push(d)}}}}catch(p){n={error:p}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},e.regexShape=/shapes\.([^\.]+)\./g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.cc({token:e,factory:e.\u0275fac}),e}()},lu3Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("nsO7"),i=n("EM62"),a=function(){function e(){}return e.prototype.addCursors=function(e){this.cursors?this.cursors=Object(r.merge)(this.cursors,e):this.cursors=e},e.prototype.getCursorCSS=function(e){var t,n;if(e.tail){var r=this.getCompactCursor(this.getCursor(e.cursor||"normal"),this.getTail(e.tail));t=r.content,n=r.origin}else{if(!e.cursor||e.tail)throw new Error("At least one of cursor or tail should be defined to generate the cursor CSS.");t=this.getCursor(e.cursor),n=this.getSvgData(t).origin}return("url('data:image/svg+xml;utf8,"+t+"') "+n.x+" "+n.y+", auto").replace(/\n|\r/g,"")},e.prototype.getCursorIcon=function(e){return"url("+this.getCursor(e.cursor)+"), auto"},e.prototype.getCursor=function(e){if(this.cursors.cursors[e])return this.cursors.cursors[e];throw new Error(e+" cursor is not found in the cursors ICursorMap")},e.prototype.getTail=function(e){if(this.cursors.tails[e])return this.cursors.tails[e];throw new Error(e+" cursor tail is not found in the cursors ICursorMap")},e.prototype.getCompactCursor=function(e,t){var n=this.getSvgData(e),r=this.getSvgData(t);return{content:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+(n.width+r.width)+'" height="'+(n.height+r.height)+'" ><g>'+n.content+'</g><g transform="translate('+n.width+" "+n.height+')">'+r.content+"</g></svg>",origin:n.origin}},e.prototype.getSvgData=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelector("svg");return{content:n.innerHTML,width:Number(n.getAttribute("width")),height:Number(n.getAttribute("height")),origin:{x:Number(n.getAttribute("data-ox")||0),y:Number(n.getAttribute("data-oy")||0)}}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.cc({token:e,factory:e.\u0275fac}),e}()},"mG+b":function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(t>=s.LAST_COMPATIBLE_COMPILER_REVISION&&t<=s.COMPILER_REVISION)return;if(t<s.LAST_COMPATIBLE_COMPILER_REVISION){var r=s.REVISION_CHANGES[n],i=s.REVISION_CHANGES[t];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new o.default("No environment passed to template");if(!e||!e.main)throw new o.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var r={strict:function(e,t,n){if(!e||!(t in e))throw new o.default('"'+t+'" not defined in '+e,{loc:n});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||u.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++){if(null!=(e[i]&&r.lookupProperty(e[i],t)))return e[i][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:function(n,r,a){a.hash&&(r=i.extend({},r,a.hash),a.ids&&(a.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,a);var s=i.extend({},a,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),c=t.VM.invokePartial.call(this,n,r,s);if(null==c&&t.compile&&(a.partials[a.name]=t.compile(n,e.compilerOptions,t),c=a.partials[a.name](r,s)),null!=c){if(a.indent){for(var l=c.split("\n"),u=0,d=l.length;u<d&&(l[u]||u+1!==d);u++)l[u]=a.indent+l[u];c=l.join("\n")}return c}throw new o.default("The partial "+a.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var a=this.programs[e],o=this.fn(e);return t||i||r||n?a=d(this,e,o,t,n,r,i):a||(a=this.programs[e]=d(this,e,o)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=i.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function a(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;a._setup(n),!n.partial&&e.useData&&(i=h(t,i));var o=void 0,s=e.useBlockParams?[]:void 0;function c(t){return""+e.main(r,t,r.helpers,r.partials,i,s,o)}return e.useDepths&&(o=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(c=f(e.main,c,r,n.depths||[],i,s))(t,n)}return a.isTop=!0,a._setup=function(a){if(a.partial)r.protoAccessControl=a.protoAccessControl,r.helpers=a.helpers,r.partials=a.partials,r.decorators=a.decorators,r.hooks=a.hooks;else{var o=i.extend({},t.helpers,a.helpers);!function(e,t){Object.keys(e).forEach((function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return l.wrapHelper(e,(function(e){return i.extend({lookupProperty:n},e)}))}(r,t)}))}(o,r),r.helpers=o,e.usePartial&&(r.partials=r.mergeIfNeeded(a.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=i.extend({},t.decorators,a.decorators)),r.hooks={},r.protoAccessControl=u.createProtoAccessControl(a);var s=a.allowCallsToHelperMissing||n;c.moveHelperToHooks(r,"helperMissing",s),c.moveHelperToHooks(r,"blockHelperMissing",s)}},a._child=function(t,n,i,a){if(e.useBlockParams&&!i)throw new o.default("must pass block params");if(e.useDepths&&!a)throw new o.default("must pass parent depths");return d(r,t,e[t],n,0,i,a)},a},t.wrapProgram=d,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var a=void 0;n.fn&&n.fn!==p&&function(){n.data=s.createFrame(n.data);var e=n.fn;a=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=i.extend({},n.partials,e.partials))}();void 0===e&&a&&(e=a);if(void 0===e)throw new o.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=p;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("XVEb")),a=n("0KrK"),o=(r=a)&&r.__esModule?r:{default:r},s=n("T9/7"),c=n("svB4"),l=n("ML8A"),u=n("hQOw");function d(e,t,n,r,i,a,o){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(s=[t].concat(o)),n(e,t,e.helpers,e.partials,i.data||r,a&&[i.blockParams].concat(a),s)}return(s=f(n,s,e,o,r,a)).program=t,s.depth=o?o.length:0,s.blockParams=i||0,s}function p(){return""}function h(e,t){return t&&"root"in t||((t=t?s.createFrame(t):{}).root=e),t}function f(e,t,n,r,a,o){if(e.decorator){var s={};t=e.decorator(t,s,n,r&&r[0],a,o,r),i.extend(t,s)}return t}},mbvX:function(module,exports,__webpack_require__){var factory;window,factory=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./assets/icons/align-center.svg":function assetsIconsAlignCenterSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/align-center.svg?')},"./assets/icons/align-justify.svg":function assetsIconsAlignJustifySvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/align-justify.svg?')},"./assets/icons/align-left.svg":function assetsIconsAlignLeftSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/align-left.svg?')},"./assets/icons/align-right.svg":function assetsIconsAlignRightSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/align-right.svg?')},"./assets/icons/background.svg":function assetsIconsBackgroundSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <g class=\\"ql-fill ql-color-label\\"> <polygon points=\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points=\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points=\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points=\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points=\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points=\\"12 6.868 12 6 11.62 6 12 6.868\\"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points=\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points=\\"5.5 13 9 5 12.5 13\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/background.svg?')},"./assets/icons/blockquote.svg":function assetsIconsBlockquoteSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <rect class=\\"ql-fill ql-stroke\\" height=3 width=3 x=4 y=5></rect> <rect class=\\"ql-fill ql-stroke\\" height=3 width=3 x=11 y=5></rect> <path class=\\"ql-even ql-fill ql-stroke\\" d=M7,8c0,4.031-3,5-3,5></path> <path class=\\"ql-even ql-fill ql-stroke\\" d=M14,8c0,4.031-3,5-3,5></path> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/blockquote.svg?')},"./assets/icons/bold.svg":function assetsIconsBoldSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/bold.svg?')},"./assets/icons/clean.svg":function assetsIconsCleanSvg(module,exports){eval('// Module\nvar code = "<svg class=\\"\\" viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/clean.svg?')},"./assets/icons/code.svg":function assetsIconsCodeSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <polyline class=\\"ql-even ql-stroke\\" points=\\"5 7 3 9 5 11\\"></polyline> <polyline class=\\"ql-even ql-stroke\\" points=\\"13 7 15 9 13 11\\"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/code.svg?')},"./assets/icons/color.svg":function assetsIconsColorSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=\\"ql-color-label ql-stroke ql-transparent\\" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points=\\"5.5 11 9 3 12.5 11\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/color.svg?')},"./assets/icons/direction-ltr.svg":function assetsIconsDirectionLtrSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <polygon class=\\"ql-stroke ql-fill\\" points=\\"3 11 5 9 3 7 3 11\\"></polygon> <line class=\\"ql-stroke ql-fill\\" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/direction-ltr.svg?')},"./assets/icons/direction-rtl.svg":function assetsIconsDirectionRtlSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <polygon class=\\"ql-stroke ql-fill\\" points=\\"15 12 13 10 15 8 15 12\\"></polygon> <line class=\\"ql-stroke ql-fill\\" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/direction-rtl.svg?')},"./assets/icons/dropdown.svg":function assetsIconsDropdownSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <polygon class=ql-stroke points=\\"7 11 9 13 11 11 7 11\\"></polygon> <polygon class=ql-stroke points=\\"7 7 9 5 11 7 7 7\\"></polygon> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/dropdown.svg?')},"./assets/icons/formula.svg":function assetsIconsFormulaSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/formula.svg?')},"./assets/icons/header-2.svg":function assetsIconsHeader2Svg(module,exports){eval('// Module\nvar code = "<svg viewBox=\\"0 0 18 18\\"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/header-2.svg?')},"./assets/icons/header.svg":function assetsIconsHeaderSvg(module,exports){eval('// Module\nvar code = "<svg viewBox=\\"0 0 18 18\\"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/header.svg?')},"./assets/icons/image.svg":function assetsIconsImageSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class=\\"ql-even ql-fill\\" points=\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\"></polyline> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/image.svg?')},"./assets/icons/indent.svg":function assetsIconsIndentSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=\\"ql-fill ql-stroke\\" points=\\"3 7 3 11 5 9 3 7\\"></polyline> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/indent.svg?')},"./assets/icons/italic.svg":function assetsIconsItalicSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/italic.svg?')},"./assets/icons/link.svg":function assetsIconsLinkSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class=\\"ql-even ql-stroke\\" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class=\\"ql-even ql-stroke\\" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/link.svg?')},"./assets/icons/list-bullet.svg":function assetsIconsListBulletSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/list-bullet.svg?')},"./assets/icons/list-check.svg":function assetsIconsListCheckSvg(module,exports){eval('// Module\nvar code = "<svg class=\\"\\" viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points=\\"3 4 4 5 6 3\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points=\\"3 14 4 15 6 13\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\"3 9 4 10 6 8\\"></polyline> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/list-check.svg?')},"./assets/icons/list-ordered.svg":function assetsIconsListOrderedSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class=\\"ql-stroke ql-thin\\" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class=\\"ql-stroke ql-thin\\" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class=\\"ql-stroke ql-thin\\" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/list-ordered.svg?')},"./assets/icons/outdent.svg":function assetsIconsOutdentSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\"5 7 5 11 3 9 5 7\\"></polyline> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/outdent.svg?')},"./assets/icons/strike.svg":function assetsIconsStrikeSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <line class=\\"ql-stroke ql-thin\\" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/strike.svg?')},"./assets/icons/subscript.svg":function assetsIconsSubscriptSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/subscript.svg?')},"./assets/icons/superscript.svg":function assetsIconsSuperscriptSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/superscript.svg?')},"./assets/icons/table.svg":function assetsIconsTableSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=2 width=3 x=5 y=5></rect> <rect class=ql-fill height=2 width=4 x=9 y=5></rect> <g class=\\"ql-fill ql-transparent\\"> <rect height=2 width=3 x=5 y=8></rect> <rect height=2 width=4 x=9 y=8></rect> <rect height=2 width=3 x=5 y=11></rect> <rect height=2 width=4 x=9 y=11></rect> </g> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/table.svg?')},"./assets/icons/underline.svg":function assetsIconsUnderlineSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/underline.svg?')},"./assets/icons/video.svg":function assetsIconsVideoSvg(module,exports){eval('// Module\nvar code = "<svg viewbox=\\"0 0 18 18\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>";\n// Exports\nmodule.exports = code;\n\n//# sourceURL=webpack://Quill/./assets/icons/video.svg?')},"./blots/block.js":function blotsBlockJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "blockDelta", function() { return blockDelta; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bubbleFormats", function() { return bubbleFormats; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BlockEmbed", function() { return BlockEmbed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Block; });\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! quill-delta */ "./node_modules/quill-delta/dist/Delta.js");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _break__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./break */ "./blots/break.js");\n/* harmony import */ var _inline__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./inline */ "./blots/inline.js");\n/* harmony import */ var _text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./text */ "./blots/text.js");\n/* harmony import */ var _cursor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cursor */ "./blots/cursor.js");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\nconst NEWLINE_LENGTH = 1;\nconst TEXT_FORMAT_NODES = [\'SPAN\', \'STRONG\', \'B\', \'EM\', \'I\', \'SUB\', \'SUP\', \'S\', \'STRIKE\', \'U\'];\n\nclass Block extends _creately_parchment__WEBPACK_IMPORTED_MODULE_1__["BlockBlot"] {\n  constructor(scroll, domNode) {\n    super(scroll, domNode);\n    this.cache = {};\n  }\n\n  delta() {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n\n    return this.cache.delta;\n  }\n\n  deleteAt(index, length) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index, length, name, value) {\n    if (length <= 0) return;\n\n    if (this.scroll.query(name, _creately_parchment__WEBPACK_IMPORTED_MODULE_1__["Scope"].BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(index, Math.min(length, this.length() - index - 1), name, value);\n    }\n\n    this.cache = {};\n  }\n\n  insertAt(index, value, def) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n\n    if (value.length === 0) return;\n    const lines = value.split(\'\\n\');\n    const text = lines.shift();\n\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n\n      this.cache = {};\n    }\n\n    let block = this;\n    lines.reduce((lineIndex, line) => {\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot, ref) {\n    const {\n      head\n    } = this.children;\n    super.insertBefore(blot, ref);\n\n    if (head instanceof _break__WEBPACK_IMPORTED_MODULE_2__["default"]) {\n      head.remove();\n    }\n\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n\n    return this.cache.length;\n  }\n\n  moveChildren(target, ref) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    /**\r\n     * FIXME\r\n     * This is a tempory change to fix following \r\n     * 1. Can\'t add multuple new lines without losing the format.\r\n     * 2. When setting content, the new lines are always formatless.\r\n     * 3. Deleting a line should not result in clearing it\'s formats. => Fixed in parchment as permenent\r\n     * 4. Cursor height / line height should be consistent unless user change formatting.\r\n     * \r\n     * In super method default blot ("BR") is appended if this blot is empty.\r\n     * Since this "Block" class is extended by some other classes\r\n     * this.domNode.nodeName === "P" is checked here but \r\n     * a sperate child class should be added for "P" block and do this change\r\n     */\n\n    try {\n      if (this.domNode.innerText === \'\' && this.children.length !== 0) {\n        const leafBlot = getDescendentsOfLeafBlot(this)[0];\n        const lastElementBlot = leafBlot.parent;\n\n        if (leafBlot instanceof _text__WEBPACK_IMPORTED_MODULE_4__["default"]) {\n          leafBlot.remove();\n          const child = this.scroll.create(_break__WEBPACK_IMPORTED_MODULE_2__["default"].blotName);\n          lastElementBlot.appendChild(child);\n        }\n      }\n\n      if (this.isFormatlessEmptyP(this.domNode)) {\n        let formatNode;\n\n        if (this.prev && !this.isFormatlessEmptyP(this.prev.domNode)) {\n          formatNode = this.prev.children.tail.domNode.cloneNode(true);\n        } else if (this.next && !this.isFormatlessEmptyP(this.next.domNode)) {\n          formatNode = this.next.children.head.domNode.cloneNode(true);\n        }\n\n        if (formatNode && formatNode.nodeType === Node.ELEMENT_NODE) {\n          this.children.head.domNode.remove();\n          this.removeChild(this.children.head);\n          this.retainFormats(formatNode);\n          const newBr = document.createElement(\'BR\');\n          const dn = this.getDeepestNode(formatNode);\n          dn.appendChild(newBr);\n          const formatBlot = this.scroll.create(formatNode);\n          this.appendChild(formatBlot);\n        }\n      }\n\n      if (!this.isFormatlessEmptyP(this.domNode) && this.prev && this.isFormatlessEmptyP(this.prev.domNode)) {\n        const formatNode = this.children.head.domNode.cloneNode(true);\n        this.applyToAllEmptyPrevs(this.prev, formatNode);\n      }\n    } catch (error) {}\n\n    this.cache = {};\n  }\n\n  isFormatlessEmptyP(node) {\n    return node.nodeName === "P" && node.innerHTML === "<br>";\n  }\n\n  applyToAllEmptyPrevs(prev, formatNode) {\n    if (prev && this.isFormatlessEmptyP(prev.domNode)) {\n      if (formatNode.nodeType === Node.ELEMENT_NODE) {\n        prev.children.head.domNode.remove();\n        prev.removeChild(prev.children.head);\n        this.retainFormats(formatNode);\n        const newBr = document.createElement(\'BR\');\n        const dn = prev.getDeepestNode(formatNode);\n        dn.appendChild(newBr);\n        const formatBlot = prev.scroll.create(formatNode);\n        prev.appendChild(formatBlot);\n      }\n\n      this.applyToAllEmptyPrevs(prev.prev, formatNode);\n    }\n  }\n  /**\r\n   * Retains the style nodes specified in TEXT_FORMAT_NODES\r\n   * and removes all other nodes for the given element\r\n   */\n\n\n  retainFormats(element) {\n    const nodes = element.childNodes;\n\n    for (let i = 0; i < nodes.length; i += 1) {\n      const node = nodes[i];\n      const isCursorSpan = node.nodeName === "SPAN" && node.classList.contains(_cursor__WEBPACK_IMPORTED_MODULE_5__["default"].className);\n\n      if (isCursorSpan || node.nodeType === Node.TEXT_NODE || !TEXT_FORMAT_NODES.includes(node.nodeName)) {\n        node.parentNode.removeChild(node);\n        i -= 1;\n      } else if (node.nodeType === Node.ELEMENT_NODE) {\n        this.retainFormats(node);\n      }\n    }\n  }\n\n  getDeepestNode(node) {\n    if (node.firstChild) {\n      return this.getDeepestNode(node.firstChild);\n    }\n\n    return node;\n  }\n\n  path(index) {\n    return super.path(index, true);\n  }\n\n  removeChild(child) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index, force = false) {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n\n}\n\nBlock.blotName = \'block\';\nBlock.tagName = \'P\';\nBlock.defaultChild = _break__WEBPACK_IMPORTED_MODULE_2__["default"];\nBlock.allowedChildren = [_break__WEBPACK_IMPORTED_MODULE_2__["default"], _inline__WEBPACK_IMPORTED_MODULE_3__["default"], _creately_parchment__WEBPACK_IMPORTED_MODULE_1__["EmbedBlot"], _text__WEBPACK_IMPORTED_MODULE_4__["default"]];\n\nclass BlockEmbed extends _creately_parchment__WEBPACK_IMPORTED_MODULE_1__["EmbedBlot"] {\n  attach() {\n    super.attach();\n    this.attributes = new _creately_parchment__WEBPACK_IMPORTED_MODULE_1__["AttributorStore"](this.domNode);\n  }\n\n  delta() {\n    return new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().insert(this.value(), _objectSpread({}, this.formats(), {}, this.attributes.values()));\n  }\n\n  format(name, value) {\n    const attribute = this.scroll.query(name, _creately_parchment__WEBPACK_IMPORTED_MODULE_1__["Scope"].BLOCK_ATTRIBUTE);\n\n    if (attribute != null) {\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    this.format(name, value);\n  }\n\n  insertAt(index, value, def) {\n    if (typeof value === \'string\' && value.endsWith(\'\\n\')) {\n      const block = this.scroll.create(Block.blotName);\n      this.parent.insertBefore(block, index === 0 ? this : this.next);\n      block.insertAt(0, value.slice(0, -1));\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n\n}\n\nBlockEmbed.scope = _creately_parchment__WEBPACK_IMPORTED_MODULE_1__["Scope"].BLOCK_BLOT; // It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot, filter = true) {\n  return getDescendentsOfLeafBlot(blot).reduce((delta, leaf) => {\n    if (leaf.length() === 0) {\n      return delta;\n    }\n\n    return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n  }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a()).insert(\'\\n\', bubbleFormats(blot));\n}\n\nfunction bubbleFormats(blot, formats = {}, filter = true) {\n  if (blot == null) return formats;\n\n  if (typeof blot.formats === \'function\') {\n    formats = _objectSpread({}, formats, {}, blot.formats());\n\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats[\'code-token\'];\n    }\n  }\n\n  if (blot.parent == null || blot.parent.statics.blotName === \'scroll\' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n\n  return bubbleFormats(blot.parent, formats, filter);\n}\n\nfunction getDescendentsOfLeafBlot(blot) {\n  if (!blot) {\n    return;\n  }\n\n  return blot.descendants(_creately_parchment__WEBPACK_IMPORTED_MODULE_1__["LeafBlot"]);\n}\n\n\n\n//# sourceURL=webpack://Quill/./blots/block.js?')},"./blots/break.js":function blotsBreakJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass Break extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"EmbedBlot\"] {\n  static value() {\n    return undefined;\n  }\n\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n\n}\n\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n/* harmony default export */ __webpack_exports__[\"default\"] = (Break);\n\n//# sourceURL=webpack://Quill/./blots/break.js?")},"./blots/container.js":function blotsContainerJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass Container extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["ContainerBlot"] {}\n\n/* harmony default export */ __webpack_exports__["default"] = (Container);\n\n//# sourceURL=webpack://Quill/./blots/container.js?')},"./blots/cursor.js":function blotsCursorJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _text__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./text */ \"./blots/text.js\");\n\n\n\nclass Cursor extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"EmbedBlot\"] {\n  static value() {\n    return undefined;\n  }\n\n  constructor(scroll, domNode, selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name, value) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n\n    let target = this;\n    let index = 0;\n\n    while (target != null && target.statics.scope !== _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"Scope\"].BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n\n  index(node, offset) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this.savedLength;\n  }\n\n  position() {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    this.parent = null;\n  }\n\n  restore() {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange(); // Link format will insert text outside of anchor tag\n\n    while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n      this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n    }\n\n    const prevTextBlot = this.prev instanceof _text__WEBPACK_IMPORTED_MODULE_1__[\"default\"] ? this.prev : null;\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\n    const nextTextBlot = this.next instanceof _text__WEBPACK_IMPORTED_MODULE_1__[\"default\"] ? this.next : null;\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\n    const {\n      textNode\n    } = this; // take text from inside this blot and reset it\n\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\n    textNode.data = Cursor.CONTENTS; // proactively merge TextBlots around cursor so that optimization\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\n    // the user typed something.\n\n    let mergedTextBlot;\n\n    if (prevTextBlot) {\n      mergedTextBlot = prevTextBlot;\n\n      if (newText || nextTextBlot) {\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\n\n        if (nextTextBlot) {\n          nextTextBlot.remove();\n        }\n      }\n    } else if (nextTextBlot) {\n      mergedTextBlot = nextTextBlot;\n      nextTextBlot.insertAt(0, newText);\n    } else {\n      const newTextNode = document.createTextNode(newText);\n      mergedTextBlot = this.scroll.create(newTextNode);\n      this.parent.insertBefore(mergedTextBlot, this);\n    }\n\n    this.remove();\n\n    if (range) {\n      // calculate selection to restore\n      const remapOffset = (node, offset) => {\n        if (prevTextBlot && node === prevTextBlot.domNode) {\n          return offset;\n        }\n\n        if (node === textNode) {\n          return prevTextLength + offset - 1;\n        }\n\n        if (nextTextBlot && node === nextTextBlot.domNode) {\n          return prevTextLength + newText.length + offset;\n        }\n\n        return null;\n      };\n\n      const start = remapOffset(range.start.node, range.start.offset);\n      const end = remapOffset(range.end.node, range.end.offset);\n\n      if (start !== null && end !== null) {\n        return {\n          startNode: mergedTextBlot.domNode,\n          startOffset: start,\n          endNode: mergedTextBlot.domNode,\n          endOffset: end\n        };\n      }\n    }\n\n    return null;\n  }\n\n  update(mutations, context) {\n    if (mutations.some(mutation => {\n      return mutation.type === 'characterData' && mutation.target === this.textNode;\n    })) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  value() {\n    return '';\n  }\n\n}\n\nCursor.blotName = 'cursor';\nCursor.className = 'ql-cursor';\nCursor.tagName = 'span';\nCursor.CONTENTS = '\\uFEFF'; // Zero width no break space\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Cursor);\n\n//# sourceURL=webpack://Quill/./blots/cursor.js?")},"./blots/embed.js":function blotsEmbedJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _text__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./text */ "./blots/text.js");\n\n\nconst GUARD_TEXT = \'\\uFEFF\';\n\nclass Embed extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["EmbedBlot"] {\n  constructor(scroll, node) {\n    super(scroll, node);\n    this.contentNode = document.createElement(\'span\');\n    this.contentNode.setAttribute(\'contenteditable\', false);\n    Array.from(this.domNode.childNodes).forEach(childNode => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node, offset) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node) {\n    let range;\n    let textNode;\n    const text = node.data.split(GUARD_TEXT).join(\'\');\n\n    if (node === this.leftGuard) {\n      if (this.prev instanceof _text__WEBPACK_IMPORTED_MODULE_1__["default"]) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof _text__WEBPACK_IMPORTED_MODULE_1__["default"]) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    }\n\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations, context) {\n    mutations.forEach(mutation => {\n      if (mutation.type === \'characterData\' && (mutation.target === this.leftGuard || mutation.target === this.rightGuard)) {\n        const range = this.restore(mutation.target);\n        if (range) context.range = range;\n      }\n    });\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["default"] = (Embed);\n\n//# sourceURL=webpack://Quill/./blots/embed.js?')},"./blots/inline.js":function blotsInlineJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _break__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./break */ \"./blots/break.js\");\n/* harmony import */ var _text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./text */ \"./blots/text.js\");\n\n\n\n\nclass Inline extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"InlineBlot\"] {\n  static compare(self, other) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n\n    if (self === other) {\n      return 0;\n    }\n\n    if (self < other) {\n      return -1;\n    }\n\n    return 1;\n  }\n\n  formatAt(index, length, name, value) {\n    if (Inline.compare(this.statics.blotName, name) < 0 && this.scroll.query(name, _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"Scope\"].BLOT)) {\n      const blot = this.isolate(index, length);\n\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n\n    if (this.parent instanceof Inline && Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n\n}\n\nInline.allowedChildren = [Inline, _break__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"EmbedBlot\"], _text__WEBPACK_IMPORTED_MODULE_2__[\"default\"]]; // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n\nInline.order = ['cursor', 'inline', // Must be lower\n'link', // Chrome wants <a> to be lower\n'underline', 'strike', 'italic', 'bold', 'script', 'code' // Must be higher\n];\n/* harmony default export */ __webpack_exports__[\"default\"] = (Inline);\n\n//# sourceURL=webpack://Quill/./blots/inline.js?")},"./blots/scroll.js":function blotsScrollJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/emitter */ "./core/emitter.js");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./block */ "./blots/block.js");\n/* harmony import */ var _break__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./break */ "./blots/break.js");\n/* harmony import */ var _container__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./container */ "./blots/container.js");\n\n\n\n\n\n\nfunction isLine(blot) {\n  return blot instanceof _block__WEBPACK_IMPORTED_MODULE_2__["default"] || blot instanceof _block__WEBPACK_IMPORTED_MODULE_2__["BlockEmbed"];\n}\n\nclass Scroll extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["ScrollBlot"] {\n  constructor(registry, domNode, {\n    emitter\n  }) {\n    super(registry, domNode);\n    this.emitter = emitter;\n    this.batch = false;\n    this.optimize();\n    this.enable();\n    this.domNode.addEventListener(\'dragstart\', e => this.handleDragStart(e));\n  }\n\n  batchStart() {\n    if (!Array.isArray(this.batch)) {\n      this.batch = [];\n    }\n  }\n\n  batchEnd() {\n    const mutations = this.batch;\n    this.batch = false;\n    this.update(mutations);\n  }\n\n  emitMount(blot) {\n    this.emitter.emit(_core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].events.SCROLL_BLOT_MOUNT, blot);\n  }\n\n  emitUnmount(blot) {\n    this.emitter.emit(_core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n\n  deleteAt(index, length) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof _block__WEBPACK_IMPORTED_MODULE_2__["BlockEmbed"] || last instanceof _block__WEBPACK_IMPORTED_MODULE_2__["BlockEmbed"]) {\n        this.optimize();\n        return;\n      }\n\n      const ref = last.children.head instanceof _break__WEBPACK_IMPORTED_MODULE_3__["default"] ? null : last.children.head;\n      first.moveChildren(last, ref);\n      first.remove();\n    }\n\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute(\'contenteditable\', enabled);\n  }\n\n  formatAt(index, length, format, value) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  handleDragStart(event) {\n    event.preventDefault();\n  }\n\n  insertAt(index, value, def) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n\n        if (def == null && value.endsWith(\'\\n\')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n\n    this.optimize();\n  }\n\n  insertBefore(blot, ref) {\n    if (blot.statics.scope === _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].INLINE_BLOT) {\n      const wrapper = this.scroll.create(this.statics.defaultChild.blotName);\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n\n  isEnabled() {\n    return this.domNode.getAttribute(\'contenteditable\') === \'true\';\n  }\n\n  leaf(index) {\n    return this.path(index).pop() || [null, -1];\n  }\n\n  line(index) {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE) {\n    const getLines = (blot, blotIndex, blotLength) => {\n      let lines = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(blotIndex, blotLength, (child, childIndex, childLength) => {\n        if (isLine(child)) {\n          lines.push(child);\n        } else if (child instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["ContainerBlot"]) {\n          lines = lines.concat(getLines(child, childIndex, lengthLeft));\n        }\n\n        lengthLeft -= childLength;\n      });\n      return lines;\n    };\n\n    return getLines(this, index, length);\n  }\n\n  optimize(mutations = [], context = {}) {\n    if (this.batch) return;\n    super.optimize(mutations, context);\n\n    if (mutations.length > 0) {\n      this.emitter.emit(_core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index) {\n    return super.path(index).slice(1); // Exclude self\n  }\n\n  remove() {// Never remove self\n  }\n\n  update(mutations) {\n    if (this.batch) {\n      if (Array.isArray(mutations)) {\n        this.batch = this.batch.concat(mutations);\n      }\n\n      return;\n    }\n\n    let source = _core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER;\n\n    if (typeof mutations === \'string\') {\n      source = mutations;\n    }\n\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n\n    if (mutations.length > 0) {\n      this.emitter.emit(_core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n\n    super.update(mutations.concat([])); // pass copy\n\n    if (mutations.length > 0) {\n      this.emitter.emit(_core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n\n}\n\nScroll.blotName = \'scroll\';\nScroll.className = \'ql-editor\';\nScroll.tagName = \'DIV\';\nScroll.defaultChild = _block__WEBPACK_IMPORTED_MODULE_2__["default"];\nScroll.allowedChildren = [_block__WEBPACK_IMPORTED_MODULE_2__["default"], _block__WEBPACK_IMPORTED_MODULE_2__["BlockEmbed"], _container__WEBPACK_IMPORTED_MODULE_4__["default"]];\n/* harmony default export */ __webpack_exports__["default"] = (Scroll);\n\n//# sourceURL=webpack://Quill/./blots/scroll.js?')},"./blots/text.js":function blotsTextJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Text; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"escapeText\", function() { return escapeText; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass Text extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"TextBlot\"] {}\n\nfunction escapeText(text) {\n  return text.replace(/[&<>\"']/g, s => {\n    // https://lodash.com/docs#escape\n    const entityMap = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    };\n    return entityMap[s];\n  });\n}\n\n\n\n//# sourceURL=webpack://Quill/./blots/text.js?")},"./core.js":function coreJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/quill */ "./core/quill.js");\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blots/block */ "./blots/block.js");\n/* harmony import */ var _blots_break__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blots/break */ "./blots/break.js");\n/* harmony import */ var _blots_container__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./blots/container */ "./blots/container.js");\n/* harmony import */ var _blots_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./blots/cursor */ "./blots/cursor.js");\n/* harmony import */ var _blots_embed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./blots/embed */ "./blots/embed.js");\n/* harmony import */ var _blots_inline__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./blots/inline */ "./blots/inline.js");\n/* harmony import */ var _blots_scroll__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./blots/scroll */ "./blots/scroll.js");\n/* harmony import */ var _blots_text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./blots/text */ "./blots/text.js");\n/* harmony import */ var _modules_clipboard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./modules/clipboard */ "./modules/clipboard.js");\n/* harmony import */ var _modules_history__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modules/history */ "./modules/history.js");\n/* harmony import */ var _modules_keyboard__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./modules/keyboard */ "./modules/keyboard.js");\n/* harmony import */ var _modules_uploader__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./modules/uploader */ "./modules/uploader.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\n_core_quill__WEBPACK_IMPORTED_MODULE_0__["default"].register({\n  \'blots/block\': _blots_block__WEBPACK_IMPORTED_MODULE_1__["default"],\n  \'blots/block/embed\': _blots_block__WEBPACK_IMPORTED_MODULE_1__["BlockEmbed"],\n  \'blots/break\': _blots_break__WEBPACK_IMPORTED_MODULE_2__["default"],\n  \'blots/container\': _blots_container__WEBPACK_IMPORTED_MODULE_3__["default"],\n  \'blots/cursor\': _blots_cursor__WEBPACK_IMPORTED_MODULE_4__["default"],\n  \'blots/embed\': _blots_embed__WEBPACK_IMPORTED_MODULE_5__["default"],\n  \'blots/inline\': _blots_inline__WEBPACK_IMPORTED_MODULE_6__["default"],\n  \'blots/scroll\': _blots_scroll__WEBPACK_IMPORTED_MODULE_7__["default"],\n  \'blots/text\': _blots_text__WEBPACK_IMPORTED_MODULE_8__["default"],\n  \'modules/clipboard\': _modules_clipboard__WEBPACK_IMPORTED_MODULE_9__["default"],\n  \'modules/history\': _modules_history__WEBPACK_IMPORTED_MODULE_10__["default"],\n  \'modules/keyboard\': _modules_keyboard__WEBPACK_IMPORTED_MODULE_11__["default"],\n  \'modules/uploader\': _modules_uploader__WEBPACK_IMPORTED_MODULE_12__["default"]\n});\n/* harmony default export */ __webpack_exports__["default"] = (_core_quill__WEBPACK_IMPORTED_MODULE_0__["default"]);\n\n//# sourceURL=webpack://Quill/./core.js?')},"./core/editor.js":function coreEditorJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.clonedeep */ "./node_modules/lodash.clonedeep/index.js");\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash.isequal */ "./node_modules/lodash.isequal/index.js");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isequal__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.merge */ "./node_modules/lodash.merge/index.js");\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! quill-delta */ "./node_modules/quill-delta/dist/Delta.js");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./selection */ "./core/selection.js");\n/* harmony import */ var _blots_cursor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../blots/cursor */ "./blots/cursor.js");\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../blots/block */ "./blots/block.js");\n/* harmony import */ var _blots_break__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../blots/break */ "./blots/break.js");\n/* harmony import */ var _blots_text__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../blots/text */ "./blots/text.js");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\nconst ASCII = /^[ -~]*$/;\n\nclass Editor {\n  constructor(scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta) {\n    let consumeNextNewline = false;\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    normalizedDelta.reduce((index, op) => {\n      const length = op.retain || op.delete || op.insert.length || 1;\n      let attributes = op.attributes || {};\n\n      if (op.insert != null) {\n        if (typeof op.insert === \'string\') {\n          let text = op.insert;\n\n          if (text.endsWith(\'\\n\') && consumeNextNewline) {\n            consumeNextNewline = false;\n            text = text.slice(0, -1);\n          }\n\n          if ((index >= scrollLength || this.scroll.descendant(_blots_block__WEBPACK_IMPORTED_MODULE_7__["BlockEmbed"], index)[0]) && !text.endsWith(\'\\n\')) {\n            consumeNextNewline = true;\n          }\n\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = lodash_merge__WEBPACK_IMPORTED_MODULE_2___default()({}, Object(_blots_block__WEBPACK_IMPORTED_MODULE_7__["bubbleFormats"])(line));\n\n          if (line instanceof _blots_block__WEBPACK_IMPORTED_MODULE_7__["default"]) {\n            const [leaf] = line.descendant(_creately_parchment__WEBPACK_IMPORTED_MODULE_4__["LeafBlot"], offset);\n            formats = lodash_merge__WEBPACK_IMPORTED_MODULE_2___default()(formats, Object(_blots_block__WEBPACK_IMPORTED_MODULE_7__["bubbleFormats"])(leaf));\n          }\n\n          attributes = quill_delta__WEBPACK_IMPORTED_MODULE_3__["AttributeMap"].diff(formats, attributes) || {};\n        } else if (typeof op.insert === \'object\') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n\n          if (key == null) return index;\n          this.scroll.insertAt(index, key, op.insert[key]);\n        }\n\n        scrollLength += length;\n      }\n\n      Object.keys(attributes).forEach(name => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      return index + length;\n    }, 0);\n    normalizedDelta.reduce((index, op) => {\n      if (typeof op.delete === \'number\') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n\n      return index + (op.retain || op.insert.length || 1);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n\n  deleteText(index, length) {\n    this.scroll.deleteAt(index, length);\n    return this.update(new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().retain(index).delete(length));\n  }\n\n  formatLine(index, length, formats = {}) {\n    this.scroll.update();\n    Object.keys(formats).forEach(format => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach(line => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().retain(index).retain(length, lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0___default()(formats));\n    return this.update(delta);\n  }\n\n  formatText(index, length, formats = {}) {\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().retain(index).retain(length, lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0___default()(formats));\n    return this.update(delta);\n  }\n\n  getContents(index, length) {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta() {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a());\n  }\n\n  getFormat(index, length = 0) {\n    let lines = [];\n    let leaves = [];\n\n    if (length === 0) {\n      this.scroll.path(index).forEach(path => {\n        const [blot] = path;\n\n        if (blot instanceof _blots_block__WEBPACK_IMPORTED_MODULE_7__["default"]) {\n          lines.push(blot);\n        } else if (blot instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_4__["LeafBlot"]) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(_creately_parchment__WEBPACK_IMPORTED_MODULE_4__["LeafBlot"], index, length);\n    }\n\n    [lines, leaves] = [lines, leaves].map(blots => {\n      if (blots.length === 0) return {};\n      let formats = Object(_blots_block__WEBPACK_IMPORTED_MODULE_7__["bubbleFormats"])(blots.shift());\n\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(Object(_blots_block__WEBPACK_IMPORTED_MODULE_7__["bubbleFormats"])(blot), formats);\n      }\n\n      return formats;\n    });\n    return _objectSpread({}, lines, {}, leaves);\n  }\n\n  getHTML(index, length) {\n    const [line, lineOffset] = this.scroll.line(index);\n\n    if (line.length() >= lineOffset + length) {\n      return convertHTML(line, lineOffset, length, true);\n    }\n\n    return convertHTML(this.scroll, index, length, true);\n  }\n\n  getText(index, length) {\n    return this.getContents(index, length).filter(op => typeof op.insert === \'string\').map(op => op.insert).join(\'\');\n  }\n\n  insertEmbed(index, embed, value) {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().retain(index).insert({\n      [embed]: value\n    }));\n  }\n\n  insertText(index, text, formats = {}) {\n    text = text.replace(/\\r\\n/g, \'\\n\').replace(/\\r/g, \'\\n\');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().retain(index).insert(text, lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0___default()(formats)));\n  }\n\n  isBlank() {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const block = this.scroll.children.head;\n    if (block.statics.blotName !== _blots_block__WEBPACK_IMPORTED_MODULE_7__["default"].blotName) return false;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof _blots_break__WEBPACK_IMPORTED_MODULE_8__["default"];\n  }\n\n  removeFormat(index, length) {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a();\n\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line.delta().slice(offset, offset + suffixLength - 1).insert(\'\\n\');\n    }\n\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().insert(text).concat(suffix));\n    const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(change, mutations = [], selectionInfo = undefined) {\n    const oldDelta = this.delta;\n\n    if (mutations.length === 1 && mutations[0].type === \'characterData\' && mutations[0].target.data.match(ASCII) && this.scroll.find(mutations[0].target)) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target);\n      const formats = Object(_blots_block__WEBPACK_IMPORTED_MODULE_7__["bubbleFormats"])(textBlot);\n      const index = textBlot.offset(this.scroll);\n      const oldValue = mutations[0].oldValue.replace(_blots_cursor__WEBPACK_IMPORTED_MODULE_6__["default"].CONTENTS, \'\');\n      const oldText = new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().insert(oldValue);\n      const newText = new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().insert(textBlot.value());\n      const relativeSelectionInfo = selectionInfo && {\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\n        newRange: shiftRange(selectionInfo.newRange, -index)\n      };\n      const diffDelta = new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a().retain(index).concat(oldText.diff(newText, relativeSelectionInfo));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n\n        return delta.push(op);\n      }, new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n\n      if (!change || !lodash_isequal__WEBPACK_IMPORTED_MODULE_1___default()(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, selectionInfo);\n      }\n    }\n\n    return change;\n  }\n\n}\n\nfunction convertListHTML(items, lastIndent, types) {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n\n    if (lastIndent <= 0) {\n      return "</li></".concat(endTag, ">");\n    }\n\n    return "</li></".concat(endTag, ">").concat(convertListHTML([], lastIndent - 1, types));\n  }\n\n  const [{\n    child,\n    offset,\n    length,\n    indent,\n    type\n  }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n\n  if (indent > lastIndent) {\n    types.push(type);\n\n    if (indent === lastIndent + 1) {\n      return "<".concat(tag, "><li").concat(attribute, ">").concat(convertHTML(child, offset, length)).concat(convertListHTML(rest, indent, types));\n    }\n\n    return "<".concat(tag, "><li>").concat(convertListHTML(items, lastIndent + 1, types));\n  }\n\n  const previousType = types[types.length - 1];\n\n  if (indent === lastIndent && type === previousType) {\n    return "</li><li".concat(attribute, ">").concat(convertHTML(child, offset, length)).concat(convertListHTML(rest, indent, types));\n  }\n\n  const [endTag] = getListType(types.pop());\n  return "</li></".concat(endTag, ">").concat(convertListHTML(items, lastIndent - 1, types));\n}\n\nfunction convertHTML(blot, index, length, isRoot = false) {\n  if (typeof blot.html === \'function\') {\n    return blot.html(index, length);\n  }\n\n  if (blot instanceof _blots_text__WEBPACK_IMPORTED_MODULE_9__["default"]) {\n    return Object(_blots_text__WEBPACK_IMPORTED_MODULE_9__["escapeText"])(blot.value().slice(index, index + length));\n  }\n\n  if (blot.children) {\n    // TODO fix API\n    if (blot.statics.blotName === \'list-container\') {\n      const items = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats = child.formats();\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n\n    const parts = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n\n    if (isRoot || blot.statics.blotName === \'list\') {\n      return parts.join(\'\');\n    }\n\n    const {\n      outerHTML,\n      innerHTML\n    } = blot.domNode;\n    const [start, end] = outerHTML.split(">".concat(innerHTML, "<")); // TODO cleanup\n\n    if (start === \'<table\') {\n      return "<table style=\\"border: 1px solid #000;\\">".concat(parts.join(\'\'), "<").concat(end);\n    }\n\n    return "".concat(start, ">").concat(parts.join(\'\'), "<").concat(end);\n  }\n\n  return blot.domNode.outerHTML;\n}\n\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce((merged, name) => {\n    if (formats[name] == null) return merged;\n\n    if (combined[name] === formats[name]) {\n      merged[name] = combined[name];\n    } else if (Array.isArray(combined[name])) {\n      if (combined[name].indexOf(formats[name]) < 0) {\n        merged[name] = combined[name].concat([formats[name]]);\n      }\n    } else {\n      merged[name] = [combined[name], formats[name]];\n    }\n\n    return merged;\n  }, {});\n}\n\nfunction getListType(type) {\n  const tag = type === \'ordered\' ? \'ol\' : \'ul\';\n\n  switch (type) {\n    case \'checked\':\n      return [tag, \' data-list="checked"\'];\n\n    case \'unchecked\':\n      return [tag, \' data-list="unchecked"\'];\n\n    default:\n      return [tag, \'\'];\n  }\n}\n\nfunction normalizeDelta(delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === \'string\') {\n      const text = op.insert.replace(/\\r\\n/g, \'\\n\').replace(/\\r/g, \'\\n\');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n\n    return normalizedDelta.push(op);\n  }, new quill_delta__WEBPACK_IMPORTED_MODULE_3___default.a());\n}\n\nfunction shiftRange({\n  index,\n  length\n}, amount) {\n  return new _selection__WEBPACK_IMPORTED_MODULE_5__["Range"](index + amount, length);\n}\n\n/* harmony default export */ __webpack_exports__["default"] = (Editor);\n\n//# sourceURL=webpack://Quill/./core/editor.js?')},"./core/emitter.js":function coreEmitterJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! eventemitter3 */ \"./node_modules/eventemitter3/index.js\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(eventemitter3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _instances__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./instances */ \"./core/instances.js\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger */ \"./core/logger.js\");\n\n\n\nconst debug = Object(_logger__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\nEVENTS.forEach(eventName => {\n  document.addEventListener(eventName, (...args) => {\n    Array.from(document.querySelectorAll('.ql-container')).forEach(node => {\n      const quill = _instances__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(node);\n\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\n\nclass Emitter extends eventemitter3__WEBPACK_IMPORTED_MODULE_0___default.a {\n  constructor() {\n    super();\n    this.listeners = {};\n    this.on('error', debug.error);\n  }\n\n  emit(...args) {\n    debug.log.call(debug, ...args);\n    super.emit(...args);\n  }\n\n  handleDOM(event, ...args) {\n    (this.listeners[event.type] || []).forEach(({\n      node,\n      handler\n    }) => {\n      if (event.target === node || node.contains(event.target)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName, node, handler) {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n\n    this.listeners[eventName].push({\n      node,\n      handler\n    });\n  }\n\n}\n\nEmitter.events = {\n  EDITOR_CHANGE: 'editor-change',\n  SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n  SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n  SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n  SCROLL_OPTIMIZE: 'scroll-optimize',\n  SCROLL_UPDATE: 'scroll-update',\n  SELECTION_CHANGE: 'selection-change',\n  TEXT_CHANGE: 'text-change'\n};\nEmitter.sources = {\n  API: 'api',\n  SILENT: 'silent',\n  USER: 'user'\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Emitter);\n\n//# sourceURL=webpack://Quill/./core/emitter.js?")},"./core/instances.js":function coreInstancesJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (new WeakMap());\n\n//# sourceURL=webpack://Quill/./core/instances.js?')},"./core/logger.js":function coreLoggerJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\nconst levels = ['error', 'warn', 'log', 'info'];\nlet level = 'warn';\n\nfunction debug(method, ...args) {\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\n    console[method](...args); // eslint-disable-line no-console\n  }\n}\n\nfunction namespace(ns) {\n  return levels.reduce((logger, method) => {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\n\nnamespace.level = newLevel => {\n  level = newLevel;\n};\n\ndebug.level = namespace.level;\n/* harmony default export */ __webpack_exports__[\"default\"] = (namespace);\n\n//# sourceURL=webpack://Quill/./core/logger.js?")},"./core/module.js":function coreModuleJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\nclass Module {\n  constructor(quill, options = {}) {\n    this.quill = quill;\n    this.options = options;\n  }\n\n}\n\nModule.DEFAULTS = {};\n/* harmony default export */ __webpack_exports__["default"] = (Module);\n\n//# sourceURL=webpack://Quill/./core/module.js?')},"./core/quill.js":function coreQuillJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalRegistry", function() { return globalRegistry; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "expandConfig", function() { return expandConfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "overload", function() { return overload; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Quill; });\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! quill-delta */ "./node_modules/quill-delta/dist/Delta.js");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash.clonedeep */ "./node_modules/lodash.clonedeep/index.js");\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.merge */ "./node_modules/lodash.merge/index.js");\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _editor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./editor */ "./core/editor.js");\n/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./emitter */ "./core/emitter.js");\n/* harmony import */ var _module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./module */ "./core/module.js");\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./selection */ "./core/selection.js");\n/* harmony import */ var _instances__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./instances */ "./core/instances.js");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./logger */ "./core/logger.js");\n/* harmony import */ var _theme__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./theme */ "./core/theme.js");\n\n\n\n\n\n\n\n\n\n\n\nconst debug = Object(_logger__WEBPACK_IMPORTED_MODULE_9__["default"])(\'quill\');\nconst globalRegistry = new _creately_parchment__WEBPACK_IMPORTED_MODULE_3__["Registry"]();\n_creately_parchment__WEBPACK_IMPORTED_MODULE_3__["ParentBlot"].uiClass = \'ql-ui\';\n\nclass Quill {\n  static debug(limit) {\n    if (limit === true) {\n      limit = \'log\';\n    }\n\n    _logger__WEBPACK_IMPORTED_MODULE_9__["default"].level(limit);\n  }\n\n  static find(node) {\n    return _instances__WEBPACK_IMPORTED_MODULE_8__["default"].get(node) || globalRegistry.find(node);\n  }\n\n  static import(name) {\n    if (this.imports[name] == null) {\n      debug.error("Cannot import ".concat(name, ". Are you sure it was registered?"));\n    }\n\n    return this.imports[name];\n  }\n\n  static register(path, target, overwrite = false) {\n    if (typeof path !== \'string\') {\n      const name = path.attrName || path.blotName;\n\n      if (typeof name === \'string\') {\n        // register(Blot | Attributor, overwrite)\n        this.register("formats/".concat(name), path, target);\n      } else {\n        Object.keys(path).forEach(key => {\n          this.register(key, path[key], target);\n        });\n      }\n    } else {\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn("Overwriting ".concat(path, " with"), target);\n      }\n\n      this.imports[path] = target;\n\n      if ((path.startsWith(\'blots/\') || path.startsWith(\'formats/\')) && target.blotName !== \'abstract\') {\n        globalRegistry.register(target);\n      }\n\n      if (typeof target.register === \'function\') {\n        target.register(globalRegistry);\n      }\n    }\n  }\n\n  constructor(container, options = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n\n    if (this.container == null) {\n      return debug.error(\'Invalid Quill container\', container);\n    }\n\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add(\'ql-container\');\n    this.container.innerHTML = \'\';\n    _instances__WEBPACK_IMPORTED_MODULE_8__["default"].set(this.container, this);\n    this.root = this.addContainer(\'ql-editor\');\n    this.root.classList.add(\'ql-blank\');\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\n    this.emitter = new _emitter__WEBPACK_IMPORTED_MODULE_5__["default"]();\n    const ScrollBlot = this.options.registry.query(_creately_parchment__WEBPACK_IMPORTED_MODULE_3__["ScrollBlot"].blotName);\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter\n    });\n    this.editor = new _editor__WEBPACK_IMPORTED_MODULE_4__["default"](this.scroll);\n    this.selection = new _selection__WEBPACK_IMPORTED_MODULE_7__["default"](this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n\n    this.keyboard = this.theme.addModule(\'keyboard\');\n    this.clipboard = this.theme.addModule(\'clipboard\');\n    this.history = this.theme.addModule(\'history\');\n    this.uploader = this.theme.addModule(\'uploader\');\n    this.theme.init();\n    this.emitter.on(_emitter__WEBPACK_IMPORTED_MODULE_5__["default"].events.EDITOR_CHANGE, type => {\n      if (type === _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].events.TEXT_CHANGE) {\n        this.root.classList.toggle(\'ql-blank\', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(_emitter__WEBPACK_IMPORTED_MODULE_5__["default"].events.SCROLL_UPDATE, (source, mutations) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo = oldRange && newRange ? {\n        oldRange,\n        newRange\n      } : undefined;\n      modify.call(this, () => this.editor.update(null, mutations, selectionInfo), source);\n    });\n    const contents = this.clipboard.convert({\n      html: "".concat(html, "<p><br></p>"),\n      text: \'\\n\'\n    });\n    this.setContents(contents);\n    this.history.clear();\n\n    if (this.options.placeholder) {\n      this.root.setAttribute(\'data-placeholder\', this.options.placeholder);\n    }\n\n    if (this.options.readOnly) {\n      this.disable();\n    }\n\n    this.allowReadOnlyEdits = false;\n  }\n\n  addContainer(container, refNode = null) {\n    if (typeof container === \'string\') {\n      const className = container;\n      container = document.createElement(\'div\');\n      container.classList.add(className);\n    }\n\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(index, length, source) {\n    [index, length,, source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.deleteText(index, length);\n    }, source, index, -1 * length);\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  editReadOnly(modifier) {\n    this.allowReadOnlyEdits = true;\n    const value = modifier();\n    this.allowReadOnlyEdits = false;\n    return value;\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle(\'ql-disabled\', !enabled);\n  }\n\n  focus() {\n    const {\n      scrollTop\n    } = this.scrollingContainer;\n    this.selection.focus();\n    this.scrollingContainer.scrollTop = scrollTop;\n    this.scrollIntoView();\n  }\n\n  format(name, value, source = _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.API) {\n    return modify.call(this, () => {\n      const range = this.getSelection(true);\n      let change = new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a();\n      if (range == null) return change;\n\n      if (this.scroll.query(name, _creately_parchment__WEBPACK_IMPORTED_MODULE_3__["Scope"].BLOCK)) {\n        change = this.editor.formatLine(range.index, range.length, {\n          [name]: value\n        });\n      } else if (range.length === 0) {\n        this.selection.format(name, value);\n        return change;\n      } else {\n        change = this.editor.formatText(range.index, range.length, {\n          [name]: value\n        });\n      }\n\n      this.setSelection(range, _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.SILENT);\n      return change;\n    }, source);\n  }\n\n  formatLine(index, length, name, value, source) {\n    let formats; // eslint-disable-next-line prefer-const\n\n    [index, length, formats, source] = overload(index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatLine(index, length, formats);\n    }, source, index, 0);\n  }\n\n  formatText(index, length, name, value, source) {\n    let formats; // eslint-disable-next-line prefer-const\n\n    [index, length, formats, source] = overload(index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatText(index, length, formats);\n    }, source, index, 0);\n  }\n\n  getBounds(index, length = 0) {\n    let bounds;\n\n    if (typeof index === \'number\') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index = this.getSelection(true), length = 0) {\n    if (typeof index === \'number\') {\n      return this.editor.getFormat(index, length);\n    }\n\n    return this.editor.getFormat(index.index, index.length);\n  }\n\n  getIndex(blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index) {\n    return this.scroll.line(index);\n  }\n\n  getLines(index = 0, length = Number.MAX_VALUE) {\n    if (typeof index !== \'number\') {\n      return this.scroll.lines(index.index, index.length);\n    }\n\n    return this.scroll.lines(index, length);\n  }\n\n  getModule(name) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus = false) {\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n\n    return this.selection.getRange()[0];\n  }\n\n  getSemanticHTML(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n\n  getText(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(index, embed, value, source = Quill.sources.API) {\n    return modify.call(this, () => {\n      return this.editor.insertEmbed(index, embed, value);\n    }, source, index);\n  }\n\n  insertText(index, text, name, value, source) {\n    let formats; // eslint-disable-next-line prefer-const\n\n    [index,, formats, source] = overload(index, 0, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.insertText(index, text, formats);\n    }, source, index, text.length);\n  }\n\n  isEnabled() {\n    return this.scroll.isEnabled();\n  }\n\n  off(...args) {\n    return this.emitter.off(...args);\n  }\n\n  on(...args) {\n    return this.emitter.on(...args);\n  }\n\n  once(...args) {\n    return this.emitter.once(...args);\n  }\n\n  removeFormat(index, length, source) {\n    [index, length,, source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.removeFormat(index, length);\n    }, source, index);\n  }\n\n  scrollIntoView() {\n    this.selection.scrollIntoView(this.scrollingContainer);\n  }\n\n  setContents(delta, source = _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.API) {\n    return modify.call(this, () => {\n      delta = new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a(delta);\n      const length = this.getLength();\n      const deleted = this.editor.deleteText(0, length);\n      const applied = this.editor.applyDelta(delta);\n      const lastOp = applied.ops[applied.ops.length - 1];\n\n      if (lastOp != null && typeof lastOp.insert === \'string\' && lastOp.insert[lastOp.insert.length - 1] === \'\\n\') {\n        this.editor.deleteText(this.getLength() - 1, 1);\n        applied.delete(1);\n      }\n\n      return deleted.compose(applied);\n    }, source);\n  }\n\n  setSelection(index, length, source) {\n    if (index == null) {\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      if (index instanceof _selection__WEBPACK_IMPORTED_MODULE_7__["Range"]) {\n        const lines = this.scroll.lines();\n        let currIndex = 0;\n\n        for (let i = 0; i < lines.length; i++) {\n          if (currIndex === index.index && lines[i].length() === index.length) {\n            index.length = index.length - 1;\n            break;\n          }\n\n          currIndex = currIndex + lines[i].length();\n        }\n      }\n\n      [index, length,, source] = overload(index, length, source);\n      this.selection.setRange(new _selection__WEBPACK_IMPORTED_MODULE_7__["Range"](Math.max(0, index), length), source);\n\n      if (source !== _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.SILENT) {\n        this.selection.scrollIntoView(this.scrollingContainer);\n      }\n    }\n  }\n\n  setText(text, source = _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.API) {\n    const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source = _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.USER) {\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n\n    this.selection.update(source); // TODO this is usually undefined\n\n    return change;\n  }\n\n  updateContents(delta, source = _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.API) {\n    return modify.call(this, () => {\n      delta = new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a(delta);\n      return this.editor.applyDelta(delta, source);\n    }, source, true);\n  }\n\n}\n\nQuill.DEFAULTS = {\n  bounds: null,\n  modules: {},\n  placeholder: \'\',\n  readOnly: false,\n  registry: globalRegistry,\n  scrollingContainer: null,\n  theme: \'default\'\n};\nQuill.events = _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].events;\nQuill.sources = _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources; // eslint-disable-next-line no-undef\n\nQuill.version =  false ? undefined : "1.3.5";\nQuill.imports = {\n  delta: quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a,\n  parchment: _creately_parchment__WEBPACK_IMPORTED_MODULE_3__,\n  \'core/module\': _module__WEBPACK_IMPORTED_MODULE_6__["default"],\n  \'core/theme\': _theme__WEBPACK_IMPORTED_MODULE_10__["default"]\n};\n\nfunction expandConfig(container, userConfig) {\n  userConfig = lodash_merge__WEBPACK_IMPORTED_MODULE_2___default()({\n    container,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true,\n      uploader: true\n    }\n  }, userConfig);\n\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\n    userConfig.theme = _theme__WEBPACK_IMPORTED_MODULE_10__["default"];\n  } else {\n    userConfig.theme = Quill.import("themes/".concat(userConfig.theme));\n\n    if (userConfig.theme == null) {\n      throw new Error("Invalid theme ".concat(userConfig.theme, ". Did you register it?"));\n    }\n  }\n\n  const themeConfig = lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1___default()(userConfig.theme.DEFAULTS);\n  [themeConfig, userConfig].forEach(config => {\n    config.modules = config.modules || {};\n    Object.keys(config.modules).forEach(module => {\n      if (config.modules[module] === true) {\n        config.modules[module] = {};\n      }\n    });\n  });\n  const moduleNames = Object.keys(themeConfig.modules).concat(Object.keys(userConfig.modules));\n  const moduleConfig = moduleNames.reduce((config, name) => {\n    const moduleClass = Quill.import("modules/".concat(name));\n\n    if (moduleClass == null) {\n      debug.error("Cannot load ".concat(name, " module. Are you sure you registered it?"));\n    } else {\n      config[name] = moduleClass.DEFAULTS || {};\n    }\n\n    return config;\n  }, {}); // Special case toolbar shorthand\n\n  if (userConfig.modules != null && userConfig.modules.toolbar && userConfig.modules.toolbar.constructor !== Object) {\n    userConfig.modules.toolbar = {\n      container: userConfig.modules.toolbar\n    };\n  }\n\n  userConfig = lodash_merge__WEBPACK_IMPORTED_MODULE_2___default()({}, Quill.DEFAULTS, {\n    modules: moduleConfig\n  }, themeConfig, userConfig);\n  [\'bounds\', \'container\', \'scrollingContainer\'].forEach(key => {\n    if (typeof userConfig[key] === \'string\') {\n      userConfig[key] = document.querySelector(userConfig[key]);\n    }\n  });\n  userConfig.modules = Object.keys(userConfig.modules).reduce((config, name) => {\n    if (userConfig.modules[name]) {\n      config[name] = userConfig.modules[name];\n    }\n\n    return config;\n  }, {});\n  return userConfig;\n} // Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\n\n\nfunction modify(modifier, source, index, shift) {\n  if (!this.isEnabled() && source === _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.USER && !this.allowReadOnlyEdits) {\n    return new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a();\n  }\n\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      range = shiftRange(range, index, shift, source);\n    }\n\n    this.setSelection(range, _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.SILENT);\n  }\n\n  if (change.length() > 0) {\n    const args = [_emitter__WEBPACK_IMPORTED_MODULE_5__["default"].events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(_emitter__WEBPACK_IMPORTED_MODULE_5__["default"].events.EDITOR_CHANGE, ...args);\n\n    if (source !== _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n\n  return change;\n}\n\nfunction overload(index, length, name, value, source) {\n  let formats = {};\n\n  if (typeof index.index === \'number\' && typeof index.length === \'number\') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== \'number\') {\n      source = value;\n      value = name;\n      name = length;\n      length = index.length; // eslint-disable-line prefer-destructuring\n\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      length = index.length; // eslint-disable-line prefer-destructuring\n\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== \'number\') {\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  } // Handle format being object, two format name/value strings or excluded\n\n\n  if (typeof name === \'object\') {\n    formats = name;\n    source = value;\n  } else if (typeof name === \'string\') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      source = name;\n    }\n  } // Handle optional source\n\n\n  source = source || _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.API;\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range, index, length, source) {\n  if (range == null) return null;\n  let start;\n  let end;\n\n  if (index instanceof quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a) {\n    [start, end] = [range.index, range.index + range.length].map(pos => index.transformPosition(pos, source !== _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.USER));\n  } else {\n    [start, end] = [range.index, range.index + range.length].map(pos => {\n      if (pos < index || pos === index && source === _emitter__WEBPACK_IMPORTED_MODULE_5__["default"].sources.USER) return pos;\n\n      if (length >= 0) {\n        return pos + length;\n      }\n\n      return Math.max(index, pos + length);\n    });\n  }\n\n  return new _selection__WEBPACK_IMPORTED_MODULE_7__["Range"](start, end - start);\n}\n\n\n\n//# sourceURL=webpack://Quill/./core/quill.js?')},"./core/selection.js":function coreSelectionJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Range", function() { return Range; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Selection; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash.clonedeep */ "./node_modules/lodash.clonedeep/index.js");\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.isequal */ "./node_modules/lodash.isequal/index.js");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isequal__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./emitter */ "./core/emitter.js");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logger */ "./core/logger.js");\n\n\n\n\n\nconst debug = Object(_logger__WEBPACK_IMPORTED_MODULE_4__["default"])(\'quill:selection\');\n\nclass Range {\n  constructor(index, length = 0) {\n    this.index = index;\n    this.length = length;\n  }\n\n}\n\nclass Selection {\n  constructor(scroll, emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    this.cursor = this.scroll.create(\'cursor\', this); // savedRange is last non-null range\n\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.lastNative = null;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM(\'selectionchange\', document, () => {\n      if (!this.mouseDown && !this.composing) {\n        setTimeout(this.update.bind(this, _emitter__WEBPACK_IMPORTED_MODULE_3__["default"].sources.USER), 1);\n      }\n    });\n    this.emitter.on(_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n\n      this.emitter.once(_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].events.SCROLL_UPDATE, () => {\n        try {\n          if (this.root.contains(native.start.node) && this.root.contains(native.end.node)) {\n            this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n          }\n\n          this.update(_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].sources.SILENT);\n        } catch (ignored) {// ignore\n        }\n      });\n    });\n    this.emitter.on(_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const {\n          startNode,\n          startOffset,\n          endNode,\n          endOffset\n        } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].sources.SILENT);\n      }\n    });\n    this.update(_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].sources.SILENT);\n  }\n\n  handleComposition() {\n    this.root.addEventListener(\'compositionstart\', () => {\n      this.composing = true;\n      this.scroll.batchStart();\n    });\n    this.root.addEventListener(\'compositionend\', () => {\n      this.scroll.batchEnd();\n      this.composing = false;\n\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM(\'mousedown\', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM(\'mouseup\', document.body, () => {\n      this.mouseDown = false;\n      this.update(_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus();\n    this.setRange(this.savedRange);\n  }\n\n  format(format, value) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (nativeRange == null || !nativeRange.native.collapsed || this.scroll.query(format, _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].BLOCK)) return;\n\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return; // TODO Give blot ability to not split\n\n      if (blot instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["LeafBlot"]) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n\n      this.cursor.attach();\n    }\n\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index, length = 0) {\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n\n    let side = \'left\';\n    let rect;\n\n    if (node instanceof Text) {\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = \'right\';\n      }\n\n      rect = range.getBoundingClientRect();\n    } else {\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = \'right\';\n    }\n\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0\n    };\n  }\n\n  getNativeRange() {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info(\'getNativeRange\', range);\n    return range;\n  }\n\n  getRange() {\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus() {\n    return document.activeElement === this.root || contains(this.root, document.activeElement);\n  }\n\n  normalizedToRange(range) {\n    const positions = [[range.start.node, range.start.offset]];\n\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n\n    const indexes = positions.map(position => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      const index = blot.offset(this.scroll);\n\n      if (offset === 0) {\n        return index;\n      }\n\n      if (blot instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["LeafBlot"]) {\n        return index + blot.index(node, offset);\n      }\n\n      return index + blot.length();\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n\n  normalizeNative(nativeRange) {\n    if (!contains(this.root, nativeRange.startContainer) || !nativeRange.collapsed && !contains(this.root, nativeRange.endContainer)) {\n      return null;\n    }\n\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset\n      },\n      end: {\n        node: nativeRange.endContainer,\n        offset: nativeRange.endOffset\n      },\n      native: nativeRange\n    };\n    [range.start, range.end].forEach(position => {\n      let {\n        node,\n        offset\n      } = position;\n\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          node = node.lastChild;\n\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range) {\n    const indexes = range.collapsed ? [range.index] : [range.index, range.index + range.length];\n    const args = [];\n    const scrollLength = this.scroll.length();\n    indexes.forEach((index, i) => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      const [node, offset] = leaf.position(leafOffset, i !== 0);\n      args.push(node, offset);\n    });\n\n    if (args.length < 2) {\n      return args.concat(args);\n    }\n\n    return args;\n  }\n\n  scrollIntoView(scrollingContainer) {\n    const range = this.lastRange;\n    if (range == null) return;\n    const bounds = this.getBounds(range.index, range.length);\n    if (bounds == null) return;\n    const limit = this.scroll.length() - 1;\n    const [first] = this.scroll.line(Math.min(range.index, limit));\n    let last = first;\n\n    if (range.length > 0) {\n      [last] = this.scroll.line(Math.min(range.index + range.length, limit));\n    }\n\n    if (first == null || last == null) return;\n    const scrollBounds = scrollingContainer.getBoundingClientRect();\n\n    if (bounds.top < scrollBounds.top) {\n      scrollingContainer.scrollTop -= scrollBounds.top - bounds.top;\n    } else if (bounds.bottom > scrollBounds.bottom) {\n      scrollingContainer.scrollTop += bounds.bottom - scrollBounds.bottom;\n    }\n  }\n\n  setNativeRange(startNode, startOffset, endNode = startNode, endOffset = startOffset, force = false) {\n    debug.info(\'setNativeRange\', startNode, startOffset, endNode, endOffset);\n\n    if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null || endNode.parentNode == null)) {\n      return;\n    }\n\n    const selection = document.getSelection();\n    if (selection == null) return;\n\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus();\n      const {\n        native\n      } = this.getNativeRange() || {};\n\n      if (native == null || force || startNode !== native.startContainer || startOffset !== native.startOffset || endNode !== native.endContainer || endOffset !== native.endOffset) {\n        if (startNode.tagName === \'BR\') {\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(startNode);\n          startNode = startNode.parentNode;\n        }\n\n        if (endNode.tagName === \'BR\') {\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(endNode);\n          endNode = endNode.parentNode;\n        }\n\n        const range = document.createRange();\n        range.setStart(startNode, startOffset);\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n\n  setRange(range, force = false, source = _emitter__WEBPACK_IMPORTED_MODULE_3__["default"].sources.API) {\n    if (typeof force === \'string\') {\n      source = force;\n      force = false;\n    }\n\n    debug.info(\'setRange\', range);\n\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n\n    this.update(source);\n  }\n\n  update(source = _emitter__WEBPACK_IMPORTED_MODULE_3__["default"].sources.USER) {\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    this.lastNative = nativeRange;\n\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n\n    if (!lodash_isequal__WEBPACK_IMPORTED_MODULE_2___default()(oldRange, this.lastRange)) {\n      if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n        const range = this.cursor.restore();\n\n        if (range) {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }\n      }\n\n      const args = [_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].events.SELECTION_CHANGE, lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1___default()(this.lastRange), lodash_clonedeep__WEBPACK_IMPORTED_MODULE_1___default()(oldRange), source];\n      this.emitter.emit(_emitter__WEBPACK_IMPORTED_MODULE_3__["default"].events.EDITOR_CHANGE, ...args);\n\n      if (source !== _emitter__WEBPACK_IMPORTED_MODULE_3__["default"].sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n\n}\n\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n\n  return parent.contains(descendant);\n}\n\n\n\n//# sourceURL=webpack://Quill/./core/selection.js?')},"./core/theme.js":function coreThemeJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\nclass Theme {\n  constructor(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.modules = {};\n  }\n\n  init() {\n    Object.keys(this.options.modules).forEach(name => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name) {\n    const ModuleClass = this.quill.constructor.import("modules/".concat(name));\n    this.modules[name] = new ModuleClass(this.quill, this.options.modules[name] || {});\n    return this.modules[name];\n  }\n\n}\n\nTheme.DEFAULTS = {\n  modules: {}\n};\nTheme.themes = {\n  default: Theme\n};\n/* harmony default export */ __webpack_exports__["default"] = (Theme);\n\n//# sourceURL=webpack://Quill/./core/theme.js?')},"./formats/align.js":function formatsAlignJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlignAttribute\", function() { return AlignAttribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlignClass\", function() { return AlignClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlignStyle\", function() { return AlignStyle; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\nconst config = {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"Scope\"].BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\nconst AlignAttribute = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"Attributor\"]('align', 'align', config);\nconst AlignClass = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"ClassAttributor\"]('align', 'ql-align', config);\nconst AlignStyle = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"StyleAttributor\"]('align', 'text-align', config);\n\n\n//# sourceURL=webpack://Quill/./formats/align.js?")},"./formats/background.js":function formatsBackgroundJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BackgroundClass", function() { return BackgroundClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BackgroundStyle", function() { return BackgroundStyle; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color */ "./formats/color.js");\n\n\nconst BackgroundClass = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["ClassAttributor"](\'background\', \'ql-bg\', {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].INLINE\n});\nconst BackgroundStyle = new _color__WEBPACK_IMPORTED_MODULE_1__["ColorAttributor"](\'background\', \'background-color\', {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].INLINE\n});\n\n\n//# sourceURL=webpack://Quill/./formats/background.js?')},"./formats/blockquote.js":function formatsBlockquoteJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/block */ "./blots/block.js");\n\n\nclass Blockquote extends _blots_block__WEBPACK_IMPORTED_MODULE_0__["default"] {}\n\nBlockquote.blotName = \'blockquote\';\nBlockquote.tagName = \'blockquote\';\n/* harmony default export */ __webpack_exports__["default"] = (Blockquote);\n\n//# sourceURL=webpack://Quill/./formats/blockquote.js?')},"./formats/bold.js":function formatsBoldJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blots_inline__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/inline */ \"./blots/inline.js\");\n\n\nclass Bold extends _blots_inline__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  static create() {\n    return super.create();\n  }\n\n  static formats() {\n    return true;\n  }\n\n  optimize(context) {\n    super.optimize(context);\n\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n\n}\n\nBold.blotName = 'bold';\nBold.tagName = ['STRONG', 'B'];\n/* harmony default export */ __webpack_exports__[\"default\"] = (Bold);\n\n//# sourceURL=webpack://Quill/./formats/bold.js?")},"./formats/code.js":function formatsCodeJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Code", function() { return Code; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CodeBlockContainer", function() { return CodeBlockContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CodeBlock; });\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/block */ "./blots/block.js");\n/* harmony import */ var _blots_break__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blots/break */ "./blots/break.js");\n/* harmony import */ var _blots_cursor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../blots/cursor */ "./blots/cursor.js");\n/* harmony import */ var _blots_inline__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../blots/inline */ "./blots/inline.js");\n/* harmony import */ var _blots_text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../blots/text */ "./blots/text.js");\n/* harmony import */ var _blots_container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../blots/container */ "./blots/container.js");\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/quill */ "./core/quill.js");\n\n\n\n\n\n\n\n\nclass CodeBlockContainer extends _blots_container__WEBPACK_IMPORTED_MODULE_5__["default"] {\n  static create(value) {\n    const domNode = super.create(value);\n    domNode.setAttribute(\'spellcheck\', false);\n    return domNode;\n  }\n\n  code(index, length) {\n    const text = this.children.map(child => child.length() <= 1 ? \'\' : child.domNode.innerText).join(\'\\n\').slice(index, index + length);\n    return Object(_blots_text__WEBPACK_IMPORTED_MODULE_4__["escapeText"])(text);\n  }\n\n  html(index, length) {\n    // `\\n`s are needed in order to support empty lines at the beginning and the end.\n    // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n    return "<pre>\\n".concat(this.code(index, length), "\\n</pre>");\n  }\n\n}\n\nclass CodeBlock extends _blots_block__WEBPACK_IMPORTED_MODULE_0__["default"] {\n  static register() {\n    _core_quill__WEBPACK_IMPORTED_MODULE_6__["default"].register(CodeBlockContainer);\n  }\n\n}\n\nclass Code extends _blots_inline__WEBPACK_IMPORTED_MODULE_3__["default"] {}\n\nCode.blotName = \'code\';\nCode.tagName = \'CODE\';\nCodeBlock.blotName = \'code-block\';\nCodeBlock.className = \'ql-code-block\';\nCodeBlock.tagName = \'DIV\';\nCodeBlockContainer.blotName = \'code-block-container\';\nCodeBlockContainer.className = \'ql-code-block-container\';\nCodeBlockContainer.tagName = \'DIV\';\nCodeBlockContainer.allowedChildren = [CodeBlock];\nCodeBlock.allowedChildren = [_blots_text__WEBPACK_IMPORTED_MODULE_4__["default"], _blots_break__WEBPACK_IMPORTED_MODULE_1__["default"], _blots_cursor__WEBPACK_IMPORTED_MODULE_2__["default"]];\nCodeBlock.requiredContainer = CodeBlockContainer;\nCodeBlock.TAB = \'  \';\n\n\n//# sourceURL=webpack://Quill/./formats/code.js?')},"./formats/color.js":function formatsColorJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColorAttributor", function() { return ColorAttributor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColorClass", function() { return ColorClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColorStyle", function() { return ColorStyle; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass ColorAttributor extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["StyleAttributor"] {\n  value(domNode) {\n    let value = super.value(domNode);\n    if (!value.startsWith(\'rgb(\')) return value;\n    value = value.replace(/^[^\\d]+/, \'\').replace(/[^\\d]+$/, \'\');\n    const hex = value.split(\',\').map(component => "00".concat(parseInt(component, 10).toString(16)).slice(-2)).join(\'\');\n    return "#".concat(hex);\n  }\n\n}\n\nconst ColorClass = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["ClassAttributor"](\'color\', \'ql-color\', {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].INLINE\n});\nconst ColorStyle = new ColorAttributor(\'color\', \'color\', {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].INLINE\n});\n\n\n//# sourceURL=webpack://Quill/./formats/color.js?')},"./formats/direction.js":function formatsDirectionJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DirectionAttribute", function() { return DirectionAttribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DirectionClass", function() { return DirectionClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DirectionStyle", function() { return DirectionStyle; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\nconst config = {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].BLOCK,\n  whitelist: [\'rtl\']\n};\nconst DirectionAttribute = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Attributor"](\'direction\', \'dir\', config);\nconst DirectionClass = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["ClassAttributor"](\'direction\', \'ql-direction\', config);\nconst DirectionStyle = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["StyleAttributor"](\'direction\', \'direction\', config);\n\n\n//# sourceURL=webpack://Quill/./formats/direction.js?')},"./formats/font.js":function formatsFontJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FontStyle\", function() { return FontStyle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FontClass\", function() { return FontClass; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\nconst config = {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"Scope\"].INLINE,\n  whitelist: ['serif', 'monospace']\n};\nconst FontClass = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"ClassAttributor\"]('font', 'ql-font', config);\n\nclass FontStyleAttributor extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"StyleAttributor\"] {\n  value(node) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n\n}\n\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\n\n//# sourceURL=webpack://Quill/./formats/font.js?")},"./formats/formula.js":function formatsFormulaJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blots_embed__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/embed */ \"./blots/embed.js\");\n\n\nclass Formula extends _blots_embed__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  static create(value) {\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n\n    const node = super.create(value);\n\n    if (typeof value === 'string') {\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00'\n      });\n      node.setAttribute('data-value', value);\n    }\n\n    return node;\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('data-value');\n  }\n\n  html() {\n    const {\n      formula\n    } = this.value();\n    return \"<span>\".concat(formula, \"</span>\");\n  }\n\n}\n\nFormula.blotName = 'formula';\nFormula.className = 'ql-formula';\nFormula.tagName = 'SPAN';\n/* harmony default export */ __webpack_exports__[\"default\"] = (Formula);\n\n//# sourceURL=webpack://Quill/./formats/formula.js?")},"./formats/header.js":function formatsHeaderJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/block */ \"./blots/block.js\");\n\n\nclass Header extends _blots_block__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  static formats(domNode) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n\n}\n\nHeader.blotName = 'header';\nHeader.tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n/* harmony default export */ __webpack_exports__[\"default\"] = (Header);\n\n//# sourceURL=webpack://Quill/./formats/header.js?")},"./formats/image.js":function formatsImageJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _link__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./link */ \"./formats/link.js\");\n\n\nconst ATTRIBUTES = ['alt', 'height', 'width'];\n\nclass Image extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"EmbedBlot\"] {\n  static create(value) {\n    const node = super.create(value);\n\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n\n    return node;\n  }\n\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n\n      return formats;\n    }, {});\n  }\n\n  static match(url) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n\n  static register() {\n    if (/Firefox/i.test(navigator.userAgent)) {\n      setTimeout(() => {\n        // Disable image resizing in Firefox\n        document.execCommand('enableObjectResizing', false, false);\n      }, 1);\n    }\n  }\n\n  static sanitize(url) {\n    return Object(_link__WEBPACK_IMPORTED_MODULE_1__[\"sanitize\"])(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n\n}\n\nImage.blotName = 'image';\nImage.tagName = 'IMG';\n/* harmony default export */ __webpack_exports__[\"default\"] = (Image);\n\n//# sourceURL=webpack://Quill/./formats/image.js?")},"./formats/indent.js":function formatsIndentJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass IndentAttributor extends _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"ClassAttributor\"] {\n  add(node, value) {\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      value = value === '+1' ? indent + 1 : indent - 1;\n    }\n\n    if (value === 0) {\n      this.remove(node);\n      return true;\n    }\n\n    return super.add(node, value);\n  }\n\n  canAdd(node, value) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n\n  value(node) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n\n}\n\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"Scope\"].BLOCK,\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8]\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (IndentClass);\n\n//# sourceURL=webpack://Quill/./formats/indent.js?")},"./formats/italic.js":function formatsItalicJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _bold__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bold */ \"./formats/bold.js\");\n\n\nclass Italic extends _bold__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {}\n\nItalic.blotName = 'italic';\nItalic.tagName = ['EM', 'I'];\n/* harmony default export */ __webpack_exports__[\"default\"] = (Italic);\n\n//# sourceURL=webpack://Quill/./formats/italic.js?")},"./formats/link.js":function formatsLinkJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Link; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sanitize\", function() { return sanitize; });\n/* harmony import */ var _blots_inline__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/inline */ \"./blots/inline.js\");\n\n\nclass Link extends _blots_inline__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('rel', 'noopener noreferrer');\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n\n  static formats(domNode) {\n    return domNode.getAttribute('href');\n  }\n\n  static sanitize(url) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n\n}\n\nLink.blotName = 'link';\nLink.tagName = 'A';\nLink.SANITIZED_URL = 'about:blank';\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel'];\n\nfunction sanitize(url, protocols) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\n\n\n//# sourceURL=webpack://Quill/./formats/link.js?")},"./formats/list.js":function formatsListJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ListContainer\", function() { return ListContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ListItem; });\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/block */ \"./blots/block.js\");\n/* harmony import */ var _blots_container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blots/container */ \"./blots/container.js\");\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/quill */ \"./core/quill.js\");\n\n\n\n\nclass ListContainer extends _blots_container__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {}\n\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\n\nclass ListItem extends _blots_block__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  static create(value) {\n    const node = super.create();\n    node.setAttribute('data-list', value);\n    return node;\n  }\n\n  static formats(domNode) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n\n  static register() {\n    _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].register(ListContainer);\n  }\n\n  constructor(scroll, domNode) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n\n    const listEventHandler = e => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n}\n\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\n\n\n//# sourceURL=webpack://Quill/./formats/list.js?")},"./formats/script.js":function formatsScriptJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blots_inline__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/inline */ \"./blots/inline.js\");\n\n\nclass Script extends _blots_inline__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  static create(value) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    }\n\n    if (value === 'sub') {\n      return document.createElement('sub');\n    }\n\n    return super.create(value);\n  }\n\n  static formats(domNode) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n\n}\n\nScript.blotName = 'script';\nScript.tagName = ['SUB', 'SUP'];\n/* harmony default export */ __webpack_exports__[\"default\"] = (Script);\n\n//# sourceURL=webpack://Quill/./formats/script.js?")},"./formats/size.js":function formatsSizeJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SizeClass\", function() { return SizeClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SizeStyle\", function() { return SizeStyle; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n\nconst SizeClass = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"ClassAttributor\"]('size', 'ql-size', {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"Scope\"].INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nconst SizeStyle = new _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"StyleAttributor\"]('size', 'font-size', {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_0__[\"Scope\"].INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\n\n\n//# sourceURL=webpack://Quill/./formats/size.js?")},"./formats/strike.js":function formatsStrikeJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _bold__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bold */ \"./formats/bold.js\");\n\n\nclass Strike extends _bold__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {}\n\nStrike.blotName = 'strike';\nStrike.tagName = ['S', 'STRIKE'];\n/* harmony default export */ __webpack_exports__[\"default\"] = (Strike);\n\n//# sourceURL=webpack://Quill/./formats/strike.js?")},"./formats/table.js":function formatsTableJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TableCell\", function() { return TableCell; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TableRow\", function() { return TableRow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TableBody\", function() { return TableBody; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TableContainer\", function() { return TableContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tableId\", function() { return tableId; });\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/block */ \"./blots/block.js\");\n/* harmony import */ var _blots_container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blots/container */ \"./blots/container.js\");\n\n\n\nclass TableCell extends _blots_block__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  static create(value) {\n    const node = super.create();\n\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n\n    return node;\n  }\n\n  static formats(domNode) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n\n    return undefined;\n  }\n\n  cellOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n\n    return -1;\n  }\n\n  format(name, value) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  row() {\n    return this.parent;\n  }\n\n  rowOffset() {\n    if (this.row()) {\n      return this.row().rowOffset();\n    }\n\n    return -1;\n  }\n\n  table() {\n    return this.row() && this.row().table();\n  }\n\n}\n\nTableCell.blotName = 'table';\nTableCell.tagName = 'TD';\n\nclass TableRow extends _blots_container__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  checkMerge() {\n    if (super.checkMerge() && this.next.children.head != null) {\n      const thisHead = this.children.head.formats();\n      const thisTail = this.children.tail.formats();\n      const nextHead = this.next.children.head.formats();\n      const nextTail = this.next.children.tail.formats();\n      return thisHead.table === thisTail.table && thisHead.table === nextHead.table && thisHead.table === nextTail.table;\n    }\n\n    return false;\n  }\n\n  optimize(...args) {\n    super.optimize(...args);\n    this.children.forEach(child => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n\n        if (next) {\n          next.optimize();\n        } // We might be able to merge with prev now\n\n\n        if (this.prev) {\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n\n  rowOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n\n    return -1;\n  }\n\n  table() {\n    return this.parent && this.parent.parent;\n  }\n\n}\n\nTableRow.blotName = 'table-row';\nTableRow.tagName = 'TR';\n\nclass TableBody extends _blots_container__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {}\n\nTableBody.blotName = 'table-body';\nTableBody.tagName = 'TBODY';\n\nclass TableContainer extends _blots_container__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach(row => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n\n  cells(column) {\n    return this.rows().map(row => row.children.at(column));\n  }\n\n  deleteColumn(index) {\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const cell = row.children.at(index);\n\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n\n  insertColumn(index) {\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const ref = row.children.at(index);\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n\n  insertRow(index) {\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName);\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n\n  rows() {\n    const body = this.children.head;\n    if (body == null) return [];\n    return body.children.map(row => row);\n  }\n\n}\n\nTableContainer.blotName = 'table-container';\nTableContainer.tagName = 'TABLE';\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\n\nfunction tableId() {\n  const id = Math.random().toString(36).slice(2, 6);\n  return \"row-\".concat(id);\n}\n\n\n\n//# sourceURL=webpack://Quill/./formats/table.js?")},"./formats/underline.js":function formatsUnderlineJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blots_inline__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/inline */ "./blots/inline.js");\n\n\nclass Underline extends _blots_inline__WEBPACK_IMPORTED_MODULE_0__["default"] {}\n\nUnderline.blotName = \'underline\';\nUnderline.tagName = \'U\';\n/* harmony default export */ __webpack_exports__["default"] = (Underline);\n\n//# sourceURL=webpack://Quill/./formats/underline.js?')},"./formats/video.js":function formatsVideoJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blots/block */ \"./blots/block.js\");\n/* harmony import */ var _link__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./link */ \"./formats/link.js\");\n\n\nconst ATTRIBUTES = ['height', 'width'];\n\nclass Video extends _blots_block__WEBPACK_IMPORTED_MODULE_0__[\"BlockEmbed\"] {\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', true);\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n\n      return formats;\n    }, {});\n  }\n\n  static sanitize(url) {\n    return _link__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sanitize(url); // eslint-disable-line import/no-named-as-default-member\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  html() {\n    const {\n      video\n    } = this.value();\n    return \"<a href=\\\"\".concat(video, \"\\\">\").concat(video, \"</a>\");\n  }\n\n}\n\nVideo.blotName = 'video';\nVideo.className = 'ql-video';\nVideo.tagName = 'IFRAME';\n/* harmony default export */ __webpack_exports__[\"default\"] = (Video);\n\n//# sourceURL=webpack://Quill/./formats/video.js?")},"./modules/clipboard.js":function modulesClipboardJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Clipboard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"matchAttributor\", function() { return matchAttributor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"matchBlot\", function() { return matchBlot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"matchNewline\", function() { return matchNewline; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"matchText\", function() { return matchText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"traverse\", function() { return traverse; });\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! quill-delta */ \"./node_modules/quill-delta/dist/Delta.js\");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../blots/block */ \"./blots/block.js\");\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/quill */ \"./core/quill.js\");\n/* harmony import */ var _core_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/logger */ \"./core/logger.js\");\n/* harmony import */ var _core_module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/module */ \"./core/module.js\");\n/* harmony import */ var _formats_align__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../formats/align */ \"./formats/align.js\");\n/* harmony import */ var _formats_background__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../formats/background */ \"./formats/background.js\");\n/* harmony import */ var _formats_code__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../formats/code */ \"./formats/code.js\");\n/* harmony import */ var _formats_color__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../formats/color */ \"./formats/color.js\");\n/* harmony import */ var _formats_direction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../formats/direction */ \"./formats/direction.js\");\n/* harmony import */ var _formats_font__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../formats/font */ \"./formats/font.js\");\n/* harmony import */ var _formats_size__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../formats/size */ \"./formats/size.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst debug = Object(_core_logger__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('quill:clipboard');\nconst CLIPBOARD_CONFIG = [[Node.TEXT_NODE, matchText], [Node.TEXT_NODE, matchNewline], ['br', matchBreak], [Node.ELEMENT_NODE, matchNewline], [Node.ELEMENT_NODE, matchBlot], [Node.ELEMENT_NODE, matchAttributor], [Node.ELEMENT_NODE, matchStyles], ['li', matchIndent], ['ol, ul', matchList], ['pre', matchCodeBlock], ['tr', matchTable], ['b', matchAlias.bind(matchAlias, 'bold')], ['i', matchAlias.bind(matchAlias, 'italic')], ['strike', matchAlias.bind(matchAlias, 'strike')], ['style', matchIgnore]];\nconst ATTRIBUTE_ATTRIBUTORS = [_formats_align__WEBPACK_IMPORTED_MODULE_6__[\"AlignAttribute\"], _formats_direction__WEBPACK_IMPORTED_MODULE_10__[\"DirectionAttribute\"]].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\nconst STYLE_ATTRIBUTORS = [_formats_align__WEBPACK_IMPORTED_MODULE_6__[\"AlignStyle\"], _formats_background__WEBPACK_IMPORTED_MODULE_7__[\"BackgroundStyle\"], _formats_color__WEBPACK_IMPORTED_MODULE_9__[\"ColorStyle\"], _formats_direction__WEBPACK_IMPORTED_MODULE_10__[\"DirectionStyle\"], _formats_font__WEBPACK_IMPORTED_MODULE_11__[\"FontStyle\"], _formats_size__WEBPACK_IMPORTED_MODULE_12__[\"SizeStyle\"]].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nclass Clipboard extends _core_module__WEBPACK_IMPORTED_MODULE_5__[\"default\"] {\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', e => this.onCaptureCopy(e, false));\n    this.quill.root.addEventListener('cut', e => this.onCaptureCopy(e, true));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    this.modifyDeltaOnPaste;\n    CLIPBOARD_CONFIG.concat(this.options.matchers).forEach(([selector, matcher]) => {\n      this.addMatcher(selector, matcher);\n    });\n  }\n\n  addMatcher(selector, matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert({\n    html,\n    text\n  }, formats = {}) {\n    if (formats[_formats_code__WEBPACK_IMPORTED_MODULE_8__[\"default\"].blotName]) {\n      return new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().insert(text, {\n        [_formats_code__WEBPACK_IMPORTED_MODULE_8__[\"default\"].blotName]: formats[_formats_code__WEBPACK_IMPORTED_MODULE_8__[\"default\"].blotName]\n      });\n    }\n\n    if (!html) {\n      return new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().insert(text || '');\n    } // FIXME\n    // When pasted from google docs, there are b tags with font-weight normal\n    // i.e. <b style=\"font-weight:normal\"> replacing those b tags with span\n\n\n    var el = document.createElement('div');\n    el.innerHTML = html;\n    el.querySelectorAll('b').forEach(el => {\n      if (el.style.fontWeight === 'normal') {\n        const newSpan = document.createElement('span');\n        newSpan.innerHTML = el.innerHTML;\n        newSpan.setAttribute('style', el.getAttribute('style')); // To preserve other styles\n\n        el.parentElement.replaceChild(newSpan, el);\n      }\n    });\n    html = el.innerHTML;\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    const container = doc.body;\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(container, nodeMatches);\n    const delta = traverse(this.quill.scroll, container, elementMatchers, textMatchers, nodeMatches); // Remove trailing newline\n\n    if (deltaEndsWith(delta, '\\n') && (delta.ops[delta.ops.length - 1].attributes == null || formats.table)) {\n      return delta.compose(new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().retain(delta.length() - 1).delete(1));\n    }\n\n    return delta;\n  }\n\n  dangerouslyPasteHTML(index, html, source = _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.API) {\n    if (typeof index === 'string') {\n      const delta = this.convert({\n        html: index,\n        text: ''\n      });\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.SILENT);\n    } else {\n      const paste = this.convert({\n        html,\n        text: ''\n      });\n      this.quill.updateContents(new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().retain(index).concat(paste), source);\n      this.quill.setSelection(index + paste.length(), _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.SILENT);\n    }\n  }\n\n  onCaptureCopy(e, isCut = false) {\n    if (e.defaultPrevented) return;\n    e.preventDefault();\n    const [range] = this.quill.selection.getRange();\n    if (range == null) return;\n    const {\n      html,\n      text\n    } = this.onCopy(range, isCut);\n    e.clipboardData.setData('text/plain', text);\n    e.clipboardData.setData('text/html', html);\n\n    if (isCut) {\n      this.quill.deleteText(range, _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.USER);\n    }\n  }\n\n  onCapturePaste(e) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    e.preventDefault();\n    const range = this.quill.getSelection(true);\n    if (range == null) return;\n    const html = e.clipboardData.getData('text/html');\n    const text = e.clipboardData.getData('text/plain');\n    const files = Array.from(e.clipboardData.files || []);\n\n    if (!html && files.length > 0) {\n      this.quill.uploader.upload(range, files);\n    } else {\n      this.onPaste(range, {\n        html,\n        text\n      });\n    }\n  }\n\n  onCopy(range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    return {\n      html,\n      text\n    };\n  }\n\n  onPaste(range, {\n    text,\n    html\n  }) {\n    const formats = this.quill.getFormat(range.index);\n    const pastedDelta = this.convert({\n      text,\n      html\n    }, formats);\n    debug.log('onPaste', pastedDelta, {\n      text,\n      html\n    });\n    let delta = new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().retain(range.index).delete(range.length).concat(pastedDelta);\n\n    if (this.modifyDeltaOnPaste) {\n      delta = this.modifyDeltaOnPaste(delta);\n    }\n\n    this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.USER); // range.length contributes to delta.length()\n\n    this.quill.setSelection(delta.length() - range.length, _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.SILENT);\n    this.quill.scrollIntoView();\n  }\n\n  prepareMatching(container, nodeMatches) {\n    const elementMatchers = [];\n    const textMatchers = [];\n    this.matchers.forEach(pair => {\n      const [selector, matcher] = pair;\n\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach(node => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n\n}\n\nClipboard.DEFAULTS = {\n  matchers: []\n};\n\nfunction applyFormat(delta, format, value) {\n  if (typeof format === 'object') {\n    return Object.keys(format).reduce((newDelta, key) => {\n      return applyFormat(newDelta, key, format[key]);\n    }, delta);\n  }\n\n  return delta.reduce((newDelta, op) => {\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n\n    const formats = value ? {\n      [format]: value\n    } : {};\n    return newDelta.insert(op.insert, _objectSpread({}, formats, {}, op.attributes));\n  }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a());\n}\n\nfunction deltaEndsWith(delta, text) {\n  let endText = '';\n\n  for (let i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node) {\n  if (node.childNodes.length === 0) return false; // Exclude embed blocks\n\n  return ['address', 'article', 'blockquote', 'canvas', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'iframe', 'li', 'main', 'nav', 'ol', 'output', 'p', 'pre', 'section', 'table', 'td', 'tr', 'ul', 'video'].includes(node.tagName.toLowerCase());\n}\n\nconst preNodes = new WeakMap();\n\nfunction isPre(node) {\n  if (node == null) return false;\n\n  if (!preNodes.has(node)) {\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n\n  return preNodes.get(node);\n}\n\nfunction traverse(scroll, node, elementMatchers, textMatchers, nodeMatches) {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a());\n  }\n\n  if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(scroll, childNode, elementMatchers, textMatchers, nodeMatches);\n\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n      }\n\n      return delta.concat(childrenDelta);\n    }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a());\n  }\n\n  return new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a();\n}\n\nfunction matchAlias(format, node, delta) {\n  return applyFormat(delta, format, true);\n}\n\nfunction matchAttributor(node, delta, scroll) {\n  const attributes = _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"Attributor\"].keys(node);\n  const classes = _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"ClassAttributor\"].keys(node);\n  const styles = _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"StyleAttributor\"].keys(node);\n  const formats = {};\n  attributes.concat(classes).concat(styles).forEach(name => {\n    let attr = scroll.query(name, _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"Scope\"].ATTRIBUTE);\n\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n\n    attr = STYLE_ATTRIBUTORS[name];\n\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n\n  if (Object.keys(formats).length > 0) {\n    return applyFormat(delta, formats);\n  }\n\n  return delta;\n}\n\nfunction matchBlot(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n\n  if (match.prototype instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"EmbedBlot\"]) {\n    const embed = {};\n    const value = match.value(node);\n\n    if (value != null) {\n      embed[match.blotName] = value;\n      return new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().insert(embed, match.formats(node, scroll));\n    }\n  } else {\n    if (match.prototype instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"BlockBlot\"] && !deltaEndsWith(delta, '\\n')) {\n      delta.insert('\\n');\n    }\n\n    if (typeof match.formats === 'function') {\n      return applyFormat(delta, match.blotName, match.formats(node, scroll));\n    }\n  }\n\n  return delta;\n}\n\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n\n  return delta;\n}\n\nfunction matchCodeBlock(node, delta, scroll) {\n  const match = scroll.query('code-block');\n  const language = match ? match.formats(node, scroll) : true;\n  return applyFormat(delta, 'code-block', language);\n}\n\nfunction matchIgnore() {\n  return new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a();\n}\n\nfunction matchIndent(node, delta, scroll) {\n  const match = scroll.query(node);\n\n  if (match == null || match.blotName !== 'list' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n\n  let indent = -1;\n  let parent = node.parentNode;\n\n  while (parent != null) {\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  if (indent <= 0) return delta;\n  return delta.reduce((composed, op) => {\n    if (op.attributes && op.attributes.list) {\n      return composed.push(op);\n    }\n\n    return composed.insert(op.insert, _objectSpread({\n      indent\n    }, op.attributes || {}));\n  }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a());\n}\n\nfunction matchList(node, delta) {\n  const list = node.tagName === 'OL' ? 'ordered' : 'bullet';\n  return applyFormat(delta, 'list', list);\n}\n\nfunction matchNewline(node, delta, scroll) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node)) {\n      return delta.insert('\\n');\n    }\n\n    if (delta.length() > 0 && node.nextSibling) {\n      let {\n        nextSibling\n      } = node;\n\n      while (nextSibling != null) {\n        if (isLine(nextSibling)) {\n          return delta.insert('\\n');\n        }\n\n        const match = scroll.query(nextSibling);\n\n        if (match && match.prototype instanceof _blots_block__WEBPACK_IMPORTED_MODULE_2__[\"BlockEmbed\"]) {\n          return delta.insert('\\n');\n        }\n\n        nextSibling = nextSibling.firstChild;\n      }\n    }\n  }\n\n  return delta;\n}\n\nfunction matchStyles(node, delta) {\n  const formats = {};\n  const style = node.style || {};\n\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n\n  if (style.textDecoration === 'underline') {\n    formats.underline = true;\n  }\n\n  if (style.textDecoration === 'line-through') {\n    formats.strike = true;\n  }\n\n  if (style.fontWeight.startsWith('bold') || parseInt(style.fontWeight, 10) >= 700) {\n    formats.bold = true;\n  }\n\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().insert('\\t').concat(delta);\n  }\n\n  return delta;\n}\n\nfunction matchTable(node, delta) {\n  const table = node.parentNode.tagName === 'TABLE' ? node.parentNode : node.parentNode.parentNode;\n  const rows = Array.from(table.querySelectorAll('tr'));\n  const row = rows.indexOf(node) + 1;\n  return applyFormat(delta, 'table', row);\n}\n\nfunction matchText(node, delta) {\n  let text = node.data; // Word represents empty line with <o:p>&nbsp;</o:p>\n\n  if (node.parentNode.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n\n  if (text.trim().length === 0 && text.includes('\\n')) {\n    return delta;\n  }\n\n  if (!isPre(node)) {\n    const replacer = (collapse, match) => {\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n\n      return replaced.length < 1 && collapse ? ' ' : replaced;\n    };\n\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n\n    if (node.previousSibling == null && isLine(node.parentNode) || node.previousSibling != null && isLine(node.previousSibling)) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n\n    if (node.nextSibling == null && isLine(node.parentNode) || node.nextSibling != null && isLine(node.nextSibling)) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n\n  return delta.insert(text);\n}\n\n\n\n//# sourceURL=webpack://Quill/./modules/clipboard.js?")},"./modules/history.js":function modulesHistoryJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return History; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLastChangeIndex", function() { return getLastChangeIndex; });\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @creately/parchment */ "./node_modules/@creately/parchment/dist/parchment.js");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/quill */ "./core/quill.js");\n/* harmony import */ var _core_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/module */ "./core/module.js");\n\n\n\n\nclass History extends _core_module__WEBPACK_IMPORTED_MODULE_2__["default"] {\n  constructor(quill, options) {\n    super(quill, options);\n    this.lastRecorded = 0;\n    this.ignoreChange = false;\n    this.clear();\n    this.quill.on(_core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].events.EDITOR_CHANGE, (eventName, delta, oldDelta, source) => {\n      if (eventName !== _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].events.TEXT_CHANGE || this.ignoreChange) return;\n\n      if (!this.options.userOnly || source === _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER) {\n        this.record(delta, oldDelta);\n      } else {\n        this.transform(delta);\n      }\n    });\n    this.quill.keyboard.addBinding({\n      key: \'z\',\n      shortKey: true\n    }, this.undo.bind(this));\n    this.quill.keyboard.addBinding({\n      key: \'z\',\n      shortKey: true,\n      shiftKey: true\n    }, this.redo.bind(this));\n\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding({\n        key: \'y\',\n        shortKey: true\n      }, this.redo.bind(this));\n    }\n  }\n\n  change(source, dest) {\n    if (this.stack[source].length === 0) return;\n    const delta = this.stack[source].pop();\n    const base = this.quill.getContents();\n    const inverseDelta = delta.invert(base);\n    this.stack[dest].push(inverseDelta);\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER);\n    this.ignoreChange = false;\n    const index = getLastChangeIndex(this.quill.scroll, delta);\n    this.quill.setSelection(index);\n  }\n\n  clear() {\n    this.stack = {\n      undo: [],\n      redo: []\n    };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta, oldDelta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = changeDelta.invert(oldDelta);\n    const timestamp = Date.now();\n\n    if (this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n      const delta = this.stack.undo.pop();\n      undoDelta = undoDelta.compose(delta);\n    } else {\n      this.lastRecorded = timestamp;\n    }\n\n    if (undoDelta.length() === 0) return;\n    this.stack.undo.push(undoDelta);\n\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change(\'redo\', \'undo\');\n  }\n\n  transform(delta) {\n    transformStack(this.stack.undo, delta);\n    transformStack(this.stack.redo, delta);\n  }\n\n  undo() {\n    this.change(\'undo\', \'redo\');\n  }\n\n}\n\nHistory.DEFAULTS = {\n  delay: 1000,\n  maxStack: 100,\n  userOnly: false\n};\n\nfunction transformStack(stack, delta) {\n  let remoteDelta = delta;\n\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\n    const oldDelta = stack[i];\n    stack[i] = remoteDelta.transform(oldDelta, true);\n    remoteDelta = oldDelta.transform(remoteDelta);\n\n    if (stack[i].length() === 0) {\n      stack.splice(i, 1);\n    }\n  }\n}\n\nfunction endsWithNewlineChange(scroll, delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === \'string\' && lastOp.insert.endsWith(\'\\n\');\n  }\n\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(attr => {\n      return scroll.query(attr, _creately_parchment__WEBPACK_IMPORTED_MODULE_0__["Scope"].BLOCK) != null;\n    });\n  }\n\n  return false;\n}\n\nfunction getLastChangeIndex(scroll, delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n\n  return changeIndex;\n}\n\n\n\n//# sourceURL=webpack://Quill/./modules/history.js?')},"./modules/keyboard.js":function modulesKeyboardJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Keyboard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SHORTKEY\", function() { return SHORTKEY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"normalize\", function() { return normalize; });\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.clonedeep */ \"./node_modules/lodash.clonedeep/index.js\");\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash.isequal */ \"./node_modules/lodash.isequal/index.js\");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isequal__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! quill-delta */ \"./node_modules/quill-delta/dist/Delta.js\");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/quill */ \"./core/quill.js\");\n/* harmony import */ var _core_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/logger */ \"./core/logger.js\");\n/* harmony import */ var _core_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/module */ \"./core/module.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\nconst debug = Object(_core_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"])('quill:keyboard');\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nclass Keyboard extends _core_module__WEBPACK_IMPORTED_MODULE_6__[\"default\"] {\n  static match(evt, binding) {\n    if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(key => {\n      return !!binding[key] !== evt[key] && binding[key] !== null;\n    })) {\n      return false;\n    }\n\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.bindings = {};\n    this.disabledShortcuts = [];\n    Object.keys(this.options.bindings).forEach(name => {\n      if (this.options.bindings[name]) {\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({\n      key: 'Enter',\n      shiftKey: null\n    }, this.handleEnter);\n    this.addBinding({\n      key: 'Enter',\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null\n    }, () => {});\n\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding({\n        key: 'Backspace'\n      }, {\n        collapsed: true\n      }, this.handleBackspace);\n      this.addBinding({\n        key: 'Delete'\n      }, {\n        collapsed: true\n      }, this.handleDelete);\n    } else {\n      this.addBinding({\n        key: 'Backspace'\n      }, {\n        collapsed: true,\n        prefix: /^.?$/\n      }, this.handleBackspace);\n      this.addBinding({\n        key: 'Delete'\n      }, {\n        collapsed: true,\n        suffix: /^.?$/\n      }, this.handleDelete);\n    }\n\n    this.addBinding({\n      key: 'Backspace'\n    }, {\n      collapsed: false\n    }, this.handleDeleteRange);\n    this.addBinding({\n      key: 'Delete'\n    }, {\n      collapsed: false\n    }, this.handleDeleteRange);\n    this.addBinding({\n      key: 'Backspace',\n      altKey: null,\n      ctrlKey: null,\n      metaKey: null,\n      shiftKey: null\n    }, {\n      collapsed: true,\n      offset: 0\n    }, this.handleBackspace);\n    this.listen();\n  }\n\n  addBinding(keyBinding, context = {}, handler = {}) {\n    const binding = normalize(keyBinding);\n\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n\n    if (typeof context === 'function') {\n      context = {\n        handler: context\n      };\n    }\n\n    if (typeof handler === 'function') {\n      handler = {\n        handler\n      };\n    }\n\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach(key => {\n      const singleBinding = _objectSpread({}, binding, {\n        key\n      }, context, {}, handler);\n\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', evt => {\n      if (this.disabledShortcuts.length) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const sc of this.disabledShortcuts) {\n          const noMatch = Object.keys(sc).find(key => evt[key] !== sc[key]);\n          if (!noMatch) return;\n        }\n      }\n\n      if (evt.defaultPrevented || evt.isComposing) return;\n      const bindings = (this.bindings[evt.key] || []).concat(this.bindings[evt.which] || []);\n      const matches = bindings.filter(binding => Keyboard.match(evt, binding));\n      if (matches.length === 0) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] = range.length === 0 ? [leafStart, offsetStart] : this.quill.getLeaf(range.index + range.length);\n      const prefixText = leafStart instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_3__[\"TextBlot\"] ? leafStart.value().slice(0, offsetStart) : '';\n      const suffixText = leafEnd instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_3__[\"TextBlot\"] ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt\n      };\n      const prevented = matches.some(binding => {\n        if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) {\n          return false;\n        }\n\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every(name => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (!Object.keys(binding.format).every(name => {\n            if (binding.format[name] === true) return curContext.format[name] != null;\n            if (binding.format[name] === false) return curContext.format[name] == null;\n            return lodash_isequal__WEBPACK_IMPORTED_MODULE_1___default()(binding.format[name], curContext.format[name]);\n          })) {\n            return false;\n          }\n        }\n\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n\n  handleBackspace(range, context) {\n    // Check for astral symbols\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index - length).delete(length);\n\n    if (context.offset === 0) {\n      // Always deleting newline here, length always 1\n      const [prev] = this.quill.getLine(range.index - 1);\n\n      if (prev) {\n        const isPrevLineEmpty = prev.statics.blotName === 'block' && prev.length() <= 1;\n\n        if (!isPrevLineEmpty) {\n          const curFormats = line.formats();\n          const prevFormats = this.quill.getFormat(range.index - 1, 1);\n          formats = quill_delta__WEBPACK_IMPORTED_MODULE_2__[\"AttributeMap\"].diff(curFormats, prevFormats) || {};\n\n          if (Object.keys(formats).length > 0) {\n            // line.length() - 1 targets \\n in line, another -1 for newline being deleted\n            const formatDelta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index + line.length() - 2).retain(1, formats);\n            delta = delta.compose(formatDelta);\n          }\n        }\n      }\n    }\n\n    this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n    this.quill.focus();\n  }\n\n  handleDelete(range, context) {\n    // Check for astral symbols\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n    if (range.index >= this.quill.getLength() - length) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index).delete(length);\n\n    if (context.offset >= line.length() - 1) {\n      const [next] = this.quill.getLine(range.index + 1);\n\n      if (next) {\n        const curFormats = line.formats();\n        const nextFormats = this.quill.getFormat(range.index, 1);\n        formats = quill_delta__WEBPACK_IMPORTED_MODULE_2__[\"AttributeMap\"].diff(curFormats, nextFormats) || {};\n\n        if (Object.keys(formats).length > 0) {\n          delta = delta.retain(next.length() - 1).retain(1, formats);\n        }\n      }\n    }\n\n    this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n    this.quill.focus();\n  }\n\n  handleDeleteRange(range) {\n    const lines = this.quill.getLines(range);\n    let formats = {};\n\n    if (lines.length > 1) {\n      const firstFormats = lines[0].formats();\n      const lastFormats = lines[lines.length - 1].formats();\n      formats = quill_delta__WEBPACK_IMPORTED_MODULE_2__[\"AttributeMap\"].diff(lastFormats, firstFormats) || {};\n    }\n\n    this.quill.deleteText(range, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n\n    if (Object.keys(formats).length > 0) {\n      this.quill.formatLine(range.index, 1, formats, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n    }\n\n    this.quill.setSelection(range.index, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n    this.quill.focus();\n  }\n\n  handleEnter(range, context) {\n    const lineFormats = Object.keys(context.format).reduce((formats, format) => {\n      if (this.quill.scroll.query(format, _creately_parchment__WEBPACK_IMPORTED_MODULE_3__[\"Scope\"].BLOCK) && !Array.isArray(context.format[format])) {\n        formats[format] = context.format[format];\n      }\n\n      return formats;\n    }, {});\n    const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index).delete(range.length).insert('\\n', lineFormats);\n    this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n    this.quill.setSelection(range.index + 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n    this.quill.focus();\n    Object.keys(context.format).forEach(name => {\n      if (lineFormats[name] != null) return;\n      if (Array.isArray(context.format[name])) return;\n      if (name === 'code' || name === 'link') return;\n      this.quill.format(name, context.format[name], _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n    });\n  }\n\n}\n\nKeyboard.DEFAULTS = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        return false;\n      }\n\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        return false;\n      }\n\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        }\n      }\n\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n      }\n\n    },\n    tab: {\n      key: 'Tab',\n\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index).delete(range.length).insert('\\t');\n        this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n        return false;\n      }\n\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n\n      handler() {\n        this.quill.format('blockquote', false, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n      }\n\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n\n      handler(range, context) {\n        const formats = {\n          list: false\n        };\n\n        if (context.format.indent) {\n          formats.indent = false;\n        }\n\n        this.quill.formatLine(range.index, range.length, formats, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n      }\n\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: {\n        list: 'checked'\n      },\n\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n\n        const formats = _objectSpread({}, line.formats(), {\n          list: 'checked'\n        });\n\n        const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index).insert('\\n', formats).retain(line.length() - offset - 1).retain(1, {\n          list: 'unchecked'\n        });\n        this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        this.quill.setSelection(range.index + 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index).insert('\\n', context.format).retain(line.length() - offset - 1).retain(1, {\n          header: null\n        });\n        this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        this.quill.setSelection(range.index + 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n\n      handler() {}\n\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n\n      handler() {}\n\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n\n      handler(range) {\n        const module = this.quill.getModule('table');\n\n        if (module) {\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n\n          if (shift < 0) {\n            const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(index).insert('\\n');\n            this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n            this.quill.setSelection(range.index + 1, range.length, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(index).insert('\\n');\n            this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n            this.quill.setSelection(index, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n          }\n        }\n      }\n\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n\n      handler(range, context) {\n        const {\n          event,\n          line: cell\n        } = context;\n        const offset = cell.offset(this.quill.scroll);\n\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        }\n      }\n\n    },\n    'list autofill': {\n      key: ' ',\n      shiftKey: null,\n      collapsed: true,\n      format: {\n        list: false,\n        'code-block': false,\n        blockquote: false,\n        header: false,\n        table: false\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const {\n          length\n        } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n\n          case '[x]':\n            value = 'checked';\n            break;\n\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n\n          default:\n            value = 'ordered';\n        }\n\n        this.quill.insertText(range.index, ' ', _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        this.quill.history.cutoff();\n        const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index - offset).delete(length + 1).retain(line.length() - 2 - offset).retain(1, {\n          list: value\n        });\n        this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n        return false;\n      }\n\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n\n        while (cur != null && cur.length() <= 1 && cur.formats()['code-block']) {\n          cur = cur.prev;\n          numLines -= 1; // Requisite prev lines are empty\n\n          if (numLines <= 0) {\n            const delta = new quill_delta__WEBPACK_IMPORTED_MODULE_2___default.a().retain(range.index + line.length() - offset - 2).retain(1, {\n              'code-block': null\n            }).delete(1);\n            this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n            this.quill.setSelection(range.index - 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n            return false;\n          }\n        }\n\n        return true;\n      }\n\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true)\n  }\n};\n\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: {\n      'code-block': true\n    },\n\n    handler(range) {\n      const CodeBlock = this.quill.scroll.query('code-block');\n      const lines = range.length === 0 ? this.quill.getLines(range.index, 1) : this.quill.getLines(range);\n      let {\n        index,\n        length\n      } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, CodeBlock.TAB);\n\n          if (i === 0) {\n            index += CodeBlock.TAB.length;\n          } else {\n            length += CodeBlock.TAB.length;\n          }\n        } else if (line.domNode.textContent.startsWith(CodeBlock.TAB)) {\n          line.deleteAt(0, CodeBlock.TAB.length);\n\n          if (i === 0) {\n            index -= CodeBlock.TAB.length;\n          } else {\n            length -= CodeBlock.TAB.length;\n          }\n        }\n      });\n      this.quill.update(_core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n      this.quill.setSelection(index, length, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.SILENT);\n    }\n\n  };\n}\n\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n\n    handler(range) {\n      let {\n        index\n      } = range;\n\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_3__[\"EmbedBlot\"])) return true;\n\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(range.index - 1, range.length + 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        } else {\n          this.quill.setSelection(range.index - 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(range.index, range.length + 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n      } else {\n        this.quill.setSelection(range.index + range.length + 1, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n      }\n\n      return false;\n    }\n\n  };\n}\n\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0],\n    shortKey: true,\n\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n    }\n\n  };\n}\n\nfunction makeTableArrowHandler(up) {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n\n          while (cur.prev != null) {\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n\n          const index = targetCell.offset(this.quill.scroll) + Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n        }\n      } else {\n        const targetLine = cell.table()[key];\n\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(targetLine.offset(this.quill.scroll) + targetLine.length() - 1, 0, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n          } else {\n            this.quill.setSelection(targetLine.offset(this.quill.scroll), 0, _core_quill__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sources.USER);\n          }\n        }\n      }\n\n      return false;\n    }\n\n  };\n}\n\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = {\n      key: binding\n    };\n  } else if (typeof binding === 'object') {\n    binding = lodash_clonedeep__WEBPACK_IMPORTED_MODULE_0___default()(binding);\n  } else {\n    return null;\n  }\n\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n\n  return binding;\n}\n\nfunction tableSide(table, row, cell, offset) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n\n    return cell.prev == null ? -1 : 1;\n  }\n\n  if (row.prev == null) {\n    return -1;\n  }\n\n  if (row.next == null) {\n    return 1;\n  }\n\n  return null;\n}\n\n\n\n//# sourceURL=webpack://Quill/./modules/keyboard.js?")},"./modules/syntax.js":function modulesSyntaxJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CodeBlock\", function() { return SyntaxCodeBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CodeToken\", function() { return CodeToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Syntax; });\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! quill-delta */ \"./node_modules/quill-delta/dist/Delta.js\");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _blots_inline__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../blots/inline */ \"./blots/inline.js\");\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/quill */ \"./core/quill.js\");\n/* harmony import */ var _core_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/module */ \"./core/module.js\");\n/* harmony import */ var _blots_block__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../blots/block */ \"./blots/block.js\");\n/* harmony import */ var _blots_break__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../blots/break */ \"./blots/break.js\");\n/* harmony import */ var _blots_cursor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../blots/cursor */ \"./blots/cursor.js\");\n/* harmony import */ var _blots_text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../blots/text */ \"./blots/text.js\");\n/* harmony import */ var _formats_code__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../formats/code */ \"./formats/code.js\");\n/* harmony import */ var _clipboard__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./clipboard */ \"./modules/clipboard.js\");\n\n\n\n\n\n\n\n\n\n\n\nconst TokenAttributor = new _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"ClassAttributor\"]('code-token', 'hljs', {\n  scope: _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"Scope\"].INLINE\n});\n\nclass CodeToken extends _blots_inline__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n  static formats(node, scroll) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(_formats_code__WEBPACK_IMPORTED_MODULE_9__[\"default\"].className)) {\n        return super.formats(node, scroll);\n      }\n\n      node = node.parentNode;\n    }\n\n    return undefined;\n  }\n\n  constructor(scroll, domNode, value) {\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n\n  format(format, value) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n\n  optimize(...args) {\n    super.optimize(...args);\n\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n\n}\n\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\n\nclass SyntaxCodeBlock extends _formats_code__WEBPACK_IMPORTED_MODULE_9__[\"default\"] {\n  static create(value) {\n    const domNode = super.create(value);\n\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n\n    return domNode;\n  }\n\n  static formats(domNode) {\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n\n  static register() {} // Syntax module will register\n\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  replaceWith(name, value) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n\n}\n\nclass SyntaxCodeBlockContainer extends _formats_code__WEBPACK_IMPORTED_MODULE_9__[\"CodeBlockContainer\"] {\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    this.scroll.emitMount(this);\n  }\n\n  format(name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach(child => {\n        child.format(name, value);\n      });\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n\n    super.formatAt(index, length, name, value);\n  }\n\n  highlight(highlight, forced = false) {\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(node => node !== this.uiNode);\n    const text = \"\".concat(nodes.map(node => node.textContent).join('\\n'), \"\\n\");\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          return delta.concat(Object(_blots_block__WEBPACK_IMPORTED_MODULE_5__[\"blockDelta\"])(child, false));\n        }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, {\n          retain,\n          attributes\n        }) => {\n          // Should be all retains\n          if (!retain) return index;\n\n          if (attributes) {\n            Object.keys(attributes).forEach(format => {\n              if ([SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)) {\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n\n          return index + retain;\n        }, 0);\n      }\n\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n\n  html(index, length) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock ? SyntaxCodeBlock.formats(codeBlock.domNode) : 'plain';\n    return \"<pre data-language=\\\"\".concat(language, \"\\\">\\n\").concat(this.code(index, length), \"\\n</pre>\");\n  }\n\n  optimize(context) {\n    super.optimize(context);\n\n    if (this.parent != null && this.children.head != null && this.uiNode != null) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n\n      if (language !== this.uiNode.value) {\n        this.uiNode.value = language;\n      }\n    }\n  }\n\n}\n\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, _blots_cursor__WEBPACK_IMPORTED_MODULE_7__[\"default\"], _blots_text__WEBPACK_IMPORTED_MODULE_8__[\"default\"], _blots_break__WEBPACK_IMPORTED_MODULE_6__[\"default\"]];\n\nclass Syntax extends _core_module__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  static register() {\n    _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].register(CodeToken, true);\n    _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].register(SyntaxCodeBlock, true);\n    _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].register(SyntaxCodeBlockContainer, true);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n\n    if (this.options.hljs == null) {\n      throw new Error('Syntax module requires highlight.js. Please include the library on the page before Quill.');\n    }\n\n    this.languages = this.options.languages.reduce((memo, {\n      key\n    }) => {\n      memo[key] = true;\n      return memo;\n    }, {});\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n\n  initListener() {\n    this.quill.on(_core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].events.SCROLL_BLOT_MOUNT, blot => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      this.options.languages.forEach(({\n        key,\n        label\n      }) => {\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n\n        this.highlight(blot, true);\n      });\n\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n\n  initTimer() {\n    let timer = null;\n    this.quill.on(_core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].events.SCROLL_OPTIMIZE, () => {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n\n  highlight(blot = null, force = false) {\n    if (this.quill.selection.composing) return;\n    this.quill.update(_core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.USER);\n    const range = this.quill.getSelection();\n    const blots = blot == null ? this.quill.scroll.descendants(SyntaxCodeBlockContainer) : [blot];\n    blots.forEach(container => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(_core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.SILENT);\n\n    if (range != null) {\n      this.quill.setSelection(range, _core_quill__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sources.SILENT);\n    }\n  }\n\n  highlightBlot(text, language = 'plain') {\n    language = this.languages[language] ? language : 'plain';\n\n    if (language === 'plain') {\n      return Object(_blots_text__WEBPACK_IMPORTED_MODULE_8__[\"escapeText\"])(text).split('\\n').reduce((delta, line, i) => {\n        if (i !== 0) {\n          delta.insert('\\n', {\n            [_formats_code__WEBPACK_IMPORTED_MODULE_9__[\"default\"].blotName]: language\n          });\n        }\n\n        return delta.insert(line);\n      }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a());\n    }\n\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(_formats_code__WEBPACK_IMPORTED_MODULE_9__[\"default\"].className);\n    container.innerHTML = this.options.hljs.highlight(language, text).value;\n    return Object(_clipboard__WEBPACK_IMPORTED_MODULE_10__[\"traverse\"])(this.quill.scroll, container, [(node, delta) => {\n      const value = TokenAttributor.value(node);\n\n      if (value) {\n        return delta.compose(new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().retain(delta.length(), {\n          [CodeToken.blotName]: value\n        }));\n      }\n\n      return delta;\n    }], [(node, delta) => {\n      return node.data.split('\\n').reduce((memo, nodeText, i) => {\n        if (i !== 0) memo.insert('\\n', {\n          [_formats_code__WEBPACK_IMPORTED_MODULE_9__[\"default\"].blotName]: language\n        });\n        return memo.insert(nodeText);\n      }, delta);\n    }], new WeakMap());\n  }\n\n}\n\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [{\n    key: 'plain',\n    label: 'Plain'\n  }, {\n    key: 'bash',\n    label: 'Bash'\n  }, {\n    key: 'cpp',\n    label: 'C++'\n  }, {\n    key: 'cs',\n    label: 'C#'\n  }, {\n    key: 'css',\n    label: 'CSS'\n  }, {\n    key: 'diff',\n    label: 'Diff'\n  }, {\n    key: 'xml',\n    label: 'HTML/XML'\n  }, {\n    key: 'java',\n    label: 'Java'\n  }, {\n    key: 'javascript',\n    label: 'Javascript'\n  }, {\n    key: 'markdown',\n    label: 'Markdown'\n  }, {\n    key: 'php',\n    label: 'PHP'\n  }, {\n    key: 'python',\n    label: 'Python'\n  }, {\n    key: 'ruby',\n    label: 'Ruby'\n  }, {\n    key: 'sql',\n    label: 'SQL'\n  }]\n};\n\n\n//# sourceURL=webpack://Quill/./modules/syntax.js?")},"./modules/table.js":function modulesTableJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! quill-delta */ "./node_modules/quill-delta/dist/Delta.js");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/quill */ "./core/quill.js");\n/* harmony import */ var _core_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/module */ "./core/module.js");\n/* harmony import */ var _formats_table__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../formats/table */ "./formats/table.js");\n\n\n\n\n\nclass Table extends _core_module__WEBPACK_IMPORTED_MODULE_2__["default"] {\n  static register() {\n    _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].register(_formats_table__WEBPACK_IMPORTED_MODULE_3__["TableCell"]);\n    _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].register(_formats_table__WEBPACK_IMPORTED_MODULE_3__["TableRow"]);\n    _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].register(_formats_table__WEBPACK_IMPORTED_MODULE_3__["TableBody"]);\n    _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].register(_formats_table__WEBPACK_IMPORTED_MODULE_3__["TableContainer"]);\n  }\n\n  constructor(...args) {\n    super(...args);\n    this.listenBalanceCells();\n  }\n\n  balanceTables() {\n    this.quill.scroll.descendants(_formats_table__WEBPACK_IMPORTED_MODULE_3__["TableContainer"]).forEach(table => {\n      table.balanceCells();\n    });\n  }\n\n  deleteColumn() {\n    const [table,, cell] = this.getTable();\n    if (cell == null) return;\n    table.deleteColumn(cell.cellOffset());\n    this.quill.update(_core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER);\n  }\n\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(_core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER);\n  }\n\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    const offset = table.offset();\n    table.remove();\n    this.quill.update(_core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER);\n    this.quill.setSelection(offset, _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.SILENT);\n  }\n\n  getTable(range = this.quill.getSelection()) {\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n\n    if (cell == null || cell.statics.blotName !== _formats_table__WEBPACK_IMPORTED_MODULE_3__["TableCell"].blotName) {\n      return [null, null, null, -1];\n    }\n\n    const row = cell.parent;\n    const table = row.parent.parent;\n    return [table, row, cell, offset];\n  }\n\n  insertColumn(offset) {\n    const range = this.quill.getSelection();\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = cell.cellOffset();\n    table.insertColumn(column + offset);\n    this.quill.update(_core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER);\n    let shift = row.rowOffset();\n\n    if (offset === 0) {\n      shift += 1;\n    }\n\n    this.quill.setSelection(range.index + shift, range.length, _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.SILENT);\n  }\n\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n\n  insertRow(offset) {\n    const range = this.quill.getSelection();\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.rowOffset();\n    table.insertRow(index + offset);\n    this.quill.update(_core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER);\n\n    if (offset > 0) {\n      this.quill.setSelection(range, _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.SILENT);\n    } else {\n      this.quill.setSelection(range.index + row.children.length, range.length, _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.SILENT);\n    }\n  }\n\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n\n  insertTable(rows, columns) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce(memo => {\n      const text = new Array(columns).fill(\'\\n\').join(\'\');\n      return memo.insert(text, {\n        table: Object(_formats_table__WEBPACK_IMPORTED_MODULE_3__["tableId"])()\n      });\n    }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().retain(range.index));\n    this.quill.updateContents(delta, _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER);\n    this.quill.setSelection(range.index, _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.SILENT);\n    this.balanceTables();\n  }\n\n  listenBalanceCells() {\n    this.quill.on(_core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].events.SCROLL_OPTIMIZE, mutations => {\n      mutations.some(mutation => {\n        if ([\'TD\', \'TR\', \'TBODY\', \'TABLE\'].includes(mutation.target.tagName)) {\n          this.quill.once(_core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].events.TEXT_CHANGE, (delta, old, source) => {\n            if (source !== _core_quill__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER) return;\n            this.balanceTables();\n          });\n          return true;\n        }\n\n        return false;\n      });\n    });\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["default"] = (Table);\n\n//# sourceURL=webpack://Quill/./modules/table.js?')},"./modules/toolbar.js":function modulesToolbarJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Toolbar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addControls\", function() { return addControls; });\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! quill-delta */ \"./node_modules/quill-delta/dist/Delta.js\");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @creately/parchment */ \"./node_modules/@creately/parchment/dist/parchment.js\");\n/* harmony import */ var _creately_parchment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_creately_parchment__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _core_quill__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/quill */ \"./core/quill.js\");\n/* harmony import */ var _core_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/logger */ \"./core/logger.js\");\n/* harmony import */ var _core_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/module */ \"./core/module.js\");\n\n\n\n\n\nconst debug = Object(_core_logger__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('quill:toolbar');\n\nclass Toolbar extends _core_module__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  constructor(quill, options) {\n    super(quill, options);\n\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      addControls(container, this.options.container);\n      quill.container.parentNode.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n\n    if (!(this.container instanceof HTMLElement)) {\n      return debug.error('Container required for toolbar', this.options);\n    }\n\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    Object.keys(this.options.handlers).forEach(format => {\n      this.addHandler(format, this.options.handlers[format]);\n    });\n    Array.from(this.container.querySelectorAll('button, select')).forEach(input => {\n      this.attach(input);\n    });\n    this.quill.on(_core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].events.EDITOR_CHANGE, (type, range) => {\n      if (type === _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].events.SELECTION_CHANGE) {\n        this.update(range);\n      }\n    });\n    this.quill.on(_core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].events.SCROLL_OPTIMIZE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n\n      this.update(range);\n    });\n  }\n\n  addHandler(format, handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input) {\n    let format = Array.from(input.classList).find(className => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n\n    if (this.handlers[format] == null && this.quill.scroll.query(format) == null) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, e => {\n      let value;\n\n      if (input.tagName === 'SELECT') {\n        if (input.selectedIndex < 0) return;\n        const selected = input.options[input.selectedIndex];\n\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          value = input.value || !input.hasAttribute('value');\n        }\n\n        e.preventDefault();\n      }\n\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (this.quill.scroll.query(format).prototype instanceof _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"EmbedBlot\"]) {\n        value = prompt(\"Enter \".concat(format)); // eslint-disable-line no-alert\n\n        if (!value) return;\n        this.quill.updateContents(new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().retain(range.index).delete(range.length).insert({\n          [format]: value\n        }), _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n      } else {\n        this.quill.format(format, value, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n      }\n\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n\n  update(range) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach(pair => {\n      const [format, input] = pair;\n\n      if (input.tagName === 'SELECT') {\n        let option;\n\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n\n          option = input.querySelector(\"option[value=\\\"\".concat(value, \"\\\"]\"));\n        }\n\n        if (option == null) {\n          input.value = ''; // TODO make configurable?\n\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const isActive = formats[format] === input.getAttribute('value') || formats[format] != null && formats[format].toString() === input.getAttribute('value') || formats[format] == null && !input.getAttribute('value');\n        input.classList.toggle('ql-active', isActive);\n      } else {\n        input.classList.toggle('ql-active', formats[format] != null);\n      }\n    });\n  }\n\n}\n\nToolbar.DEFAULTS = {};\n\nfunction addButton(container, format, value) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(\"ql-\".concat(format));\n\n  if (value != null) {\n    input.value = value;\n  }\n\n  container.appendChild(input);\n}\n\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    groups = [groups];\n  }\n\n  groups.forEach(controls => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(control => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(container, format, values) {\n  const input = document.createElement('select');\n  input.classList.add(\"ql-\".concat(format));\n  values.forEach(value => {\n    const option = document.createElement('option');\n\n    if (value !== false) {\n      option.setAttribute('value', value);\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach(name => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, _creately_parchment__WEBPACK_IMPORTED_MODULE_1__[\"Scope\"].INLINE) != null) {\n            this.quill.format(name, false, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n      }\n    },\n\n    direction(value) {\n      const {\n        align\n      } = this.quill.getFormat();\n\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n      }\n\n      this.quill.format('direction', value, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n    },\n\n    indent(value) {\n      const range = this.quill.getSelection();\n      const formats = this.quill.getFormat(range);\n      const indent = parseInt(formats.indent || 0, 10);\n\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n      }\n    },\n\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n\n      this.quill.format('link', value, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n    },\n\n    list(value) {\n      const range = this.quill.getSelection();\n      const formats = this.quill.getFormat(range);\n\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, _core_quill__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sources.USER);\n      }\n    }\n\n  }\n};\n\n\n//# sourceURL=webpack://Quill/./modules/toolbar.js?")},"./modules/uploader.js":function modulesUploaderJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! quill-delta */ "./node_modules/quill-delta/dist/Delta.js");\n/* harmony import */ var quill_delta__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(quill_delta__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/emitter */ "./core/emitter.js");\n/* harmony import */ var _core_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/module */ "./core/module.js");\n\n\n\n\nclass Uploader extends _core_module__WEBPACK_IMPORTED_MODULE_2__["default"] {\n  constructor(quill, options) {\n    super(quill, options);\n    quill.root.addEventListener(\'drop\', e => {\n      e.preventDefault();\n      let native;\n\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n      } else if (document.caretPositionFromPoint) {\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      } else {\n        return;\n      }\n\n      const normalized = quill.selection.normalizeNative(native);\n      const range = quill.selection.normalizedToRange(normalized);\n      this.upload(range, e.dataTransfer.files);\n    });\n  }\n\n  upload(range, files) {\n    const uploads = [];\n    Array.from(files).forEach(file => {\n      if (file && this.options.mimetypes.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n\n    if (uploads.length > 0) {\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n\n}\n\nUploader.DEFAULTS = {\n  mimetypes: [\'image/png\', \'image/jpeg\'],\n\n  handler(range, files) {\n    const promises = files.map(file => {\n      return new Promise(resolve => {\n        const reader = new FileReader();\n\n        reader.onload = e => {\n          resolve(e.target.result);\n        };\n\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then(images => {\n      const update = images.reduce((delta, image) => {\n        return delta.insert({\n          image\n        });\n      }, new quill_delta__WEBPACK_IMPORTED_MODULE_0___default.a().retain(range.index).delete(range.length));\n      this.quill.updateContents(update, _core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER);\n      this.quill.setSelection(range.index + images.length, _core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].sources.SILENT);\n    });\n  }\n\n};\n/* harmony default export */ __webpack_exports__["default"] = (Uploader);\n\n//# sourceURL=webpack://Quill/./modules/uploader.js?')},"./node_modules/@creately/parchment/dist/parchment.js":function node_modulesCreatelyParchmentDistParchmentJs(module,exports,__webpack_require__){eval('!function(t,e){ true?module.exports=e():undefined}(window,(function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){t.exports=s(1)},function(t,e,s){"use strict";var i;s.r(e),s.d(e,"ParentBlot",(function(){return u})),s.d(e,"ContainerBlot",(function(){return p})),s.d(e,"LeafBlot",(function(){return N})),s.d(e,"EmbedBlot",(function(){return L})),s.d(e,"ScrollBlot",(function(){return I})),s.d(e,"BlockBlot",(function(){return C})),s.d(e,"InlineBlot",(function(){return T})),s.d(e,"TextBlot",(function(){return _})),s.d(e,"Attributor",(function(){return b})),s.d(e,"ClassAttributor",(function(){return y})),s.d(e,"StyleAttributor",(function(){return A})),s.d(e,"AttributorStore",(function(){return x})),s.d(e,"Registry",(function(){return a})),s.d(e,"Scope",(function(){return r})),function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(i||(i={}));var r=i;var n=class{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let s=e();for(;s&&t>0;)t-=1,s=e();return s}contains(t){const e=this.iterator();let s=e();for(;s;){if(s===t)return!0;s=e()}return!1}indexOf(t){const e=this.iterator();let s=e(),i=0;for(;s;){if(s===t)return i;i+=1,s=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,s=this.head;for(;null!=s;){if(s===t)return e;e+=s.length(),s=s.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const s=this.iterator();let i=s();for(;i;){const r=i.length();if(t<r||e&&t===r&&(null==i.next||0!==i.next.length()))return[i,t];t-=r,i=s()}return[null,0]}forEach(t){const e=this.iterator();let s=e();for(;s;)t(s),s=e()}forEachAt(t,e,s){if(e<=0)return;const[i,r]=this.find(t,!0);let n=t-r;const o=this.iterator(i);let a=o();for(;a&&n<t+e;){const i=a.length();t>n?s(a,t-n,Math.min(e,n+i-t)):s(a,0,Math.min(i,t+e-n)),n+=i,a=o()}}map(t){return this.reduce((e,s)=>(e.push(t(s)),e),[])}reduce(t,e){const s=this.iterator();let i=s();for(;i;)e=t(e,i),i=s();return e}};class o extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}class a{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){return null==t?null:this.blots.has(t)?this.blots.get(t)||null:e?this.find(t.parentNode,e):null}create(t,e,s){const i=this.query(e);if(null==i)throw new o(`Unable to create ${e} blot`);const r=i,n=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(s),l=new r(t,n,s);return a.blots.set(l.domNode,l),l}find(t,e=!1){return a.find(t,e)}query(t,e=r.ANY){let s;if("string"==typeof t)s=this.types[t]||this.attributes[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)s=this.types.text;else if("number"==typeof t)t&r.LEVEL&r.BLOCK?s=this.types.block:t&r.LEVEL&r.INLINE&&(s=this.types.inline);else if(t instanceof HTMLElement){(t.getAttribute("class")||"").split(/\\s+/).some(t=>(s=this.classes[t],!!s)),s=s||this.tags[t.tagName]}return null==s?null:e&r.LEVEL&s.scope&&e&r.TYPE&s.scope?s:null}register(...t){if(t.length>1)return t.map(t=>this.register(t));const e=t[0];if("string"!=typeof e.blotName&&"string"!=typeof e.attrName)throw new o("Invalid definition");if("abstract"===e.blotName)throw new o("Cannot register abstract class");if(this.types[e.blotName||e.attrName]=e,"string"==typeof e.keyName)this.attributes[e.keyName]=e;else if(null!=e.className&&(this.classes[e.className]=e),null!=e.tagName){Array.isArray(e.tagName)?e.tagName=e.tagName.map(t=>t.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(t=>{null!=this.tags[t]&&null!=e.className||(this.tags[t]=e)})}return e}}a.blots=new WeakMap;class l{constructor(t,e){this.scroll=t,this.domNode=e,a.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new o("Blot definition missing tagName");let e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t,10).toString()===t&&(t=parseInt(t,10))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),a.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,s,i){const n=this.isolate(t,e);if(null!=this.scroll.query(s,r.BLOT)&&i)n.wrap(s,i);else if(null!=this.scroll.query(s,r.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);n.wrap(t),t.format(s,i)}}insertAt(t,e,s){const i=null==s?this.scroll.create("text",e):this.scroll.create(e,s),r=this.split(t);this.parent.insertBefore(i,r||void 0)}isolate(t,e){const s=this.split(t);if(null==s)throw new Error("Attempt to isolate at end");return s.split(e),s}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const s="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const s="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(s,this.next||void 0),"function"!=typeof s.appendChild)throw new o(`Cannot wrap ${t}`);return s.appendChild(this),s}}l.blotName="abstract";var h=l;function c(t,e){let s=e.find(t);if(null==s)try{s=e.create(t)}catch(i){s=e.create(r.INLINE),Array.from(t.childNodes).forEach(t=>{s.domNode.appendChild(t)}),t.parentNode&&t.parentNode.replaceChild(s.domNode,t),s.attach()}return s}class d extends h{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,d.uiClass&&this.uiNode.classList.add(d.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new n,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=c(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof o)return;throw t}})}deleteAt(t,e,s=!1){if(0===t&&e===this.length()&&!s)return this.remove();this.children.forEachAt(t,e,(t,e,s)=>{t.deleteAt(e,s)})}descendant(t,e=0){const[s,i]=this.children.find(e);return null==t.blotName&&t(s)||null!=t.blotName&&s instanceof t?[s,i]:s instanceof d?s.descendant(t,i):[null,-1]}descendants(t,e=0,s=Number.MAX_VALUE){let i=[],r=s;return this.children.forEachAt(e,s,(e,s,n)=>{(null==t.blotName&&t(e)||null!=t.blotName&&e instanceof t)&&i.push(e),e instanceof d&&(i=i.concat(e.descendants(t,s,r))),r-=n}),i}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{if(t)return;this.statics.allowedChildren.some(t=>e instanceof t)||(e.statics.scope===r.BLOCK_BLOT?(null!=e.next&&this.splitAfter(e),null!=e.prev&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof d?e.unwrap():e.remove())})}formatAt(t,e,s,i){this.children.forEachAt(t,e,(t,e,r)=>{t.formatAt(e,r,s,i)})}insertAt(t,e,s){const[i,r]=this.children.find(t);if(i)i.insertAt(r,e,s);else{const t=null==s?this.scroll.create("text",e):this.scroll.create(e,s);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let s=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(s=e.domNode),this.domNode.parentNode===t.domNode&&this.domNode.nextSibling===s||this.domNode.insertBefore(t.domNode,s),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(s=>{t.insertBefore(s,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(t,e=!1){const[s,i]=this.children.find(t,e),r=[[this,t]];return s instanceof d?r.concat(s.path(i,e)):(null!=s&&r.push([s,i]),r)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const s="string"==typeof t?this.scroll.create(t,e):t;return s instanceof d&&this.moveChildren(s),super.replaceWith(s)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(t,this.length(),(t,i,r)=>{const n=t.split(i,e);null!=n&&s.appendChild(n)}),s}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const s=[],i=[];t.forEach(t=>{t.target===this.domNode&&"childList"===t.type&&(s.push(...t.addedNodes),i.push(...t.removedNodes))}),i.forEach(t=>{if(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==this.domNode||e.detach())}),s.filter(t=>t.parentNode===this.domNode||t===this.uiNode).sort((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const s=c(t,this.scroll);s.next===e&&null!=s.next||(null!=s.parent&&s.parent.removeChild(this),this.insertBefore(s,e||void 0))}),this.enforceAllowedChildren()}}d.uiClass="";var u=d;class m extends u{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,s,i){super.formatAt(t,e,s,i),this.enforceAllowedChildren()}insertAt(t,e,s){super.insertAt(t,e,s),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}}m.blotName="container",m.scope=r.BLOCK_BLOT;var p=m;class f extends h{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}}f.scope=r.INLINE_BLOT;var N=f;class b{constructor(t,e,s={}){this.attrName=t,this.keyName=e;const i=r.TYPE&r.ATTRIBUTE;this.scope=null!=s.scope?s.scope&r.LEVEL|i:r.ATTRIBUTE,null!=s.whitelist&&(this.whitelist=s.whitelist)}static keys(t){return Array.from(t.attributes).map(t=>t.name)}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["\']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}function g(t,e){return(t.getAttribute("class")||"").split(/\\s+/).filter(t=>0===t.indexOf(`${e}-`))}var y=class extends b{static keys(t){return(t.getAttribute("class")||"").split(/\\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){g(t,this.keyName).forEach(e=>{t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(g(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}};function v(t){const e=t.split("-"),s=e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("");return e[0]+s}var A=class extends b{static keys(t){return(t.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(t,e){return!!this.canAdd(t,e)&&(t.style[v(this.keyName)]=e,!0)}remove(t){t.style[v(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[v(this.keyName)];return this.canAdd(t,e)?e:""}};var x=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=a.find(this.domNode);if(null==t)return;const e=b.keys(this.domNode),s=y.keys(this.domNode),i=A.keys(this.domNode);e.concat(s).concat(i).forEach(e=>{const s=t.scroll.query(e,r.ATTRIBUTE);s instanceof b&&(this.attributes[s.attrName]=s)})}copy(t){Object.keys(this.attributes).forEach(e=>{const s=this.attributes[e].value(this.domNode);t.format(e,s)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}};class E extends u{constructor(t,e){super(t,e),this.attributes=new x(this.domNode)}static formats(t,e){const s=e.query(E.blotName);if(null==s||t.tagName!==s.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)}deleteAt(t,e){const s=0===this.parent.children.indexOf(this)&&1===this.parent.children.length;super.deleteAt(t,e,s)}format(t,e){if(t!==this.statics.blotName||e){const s=this.scroll.query(t,r.INLINE);if(null==s)return;s instanceof b?this.attributes.attribute(s,e):!e||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e)}else this.children.forEach(t=>{t instanceof E||(t=t.wrap(E.blotName,!0)),this.attributes.copy(t)}),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){if(null!=this.formats()[s]||this.scroll.query(s,r.ATTRIBUTE)){const r=this.isolate(t,e);r instanceof E&&r.format(s,i)}else super.formatAt(t,e,s,i)}optimize(t){super.optimize(t);const e=this.formats();if(0===Object.keys(e).length)return this.unwrap();const s=this.next;s instanceof E&&s.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}(e,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(t,e){const s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(t=>t.target===this.domNode&&"attributes"===t.type)&&this.attributes.build()}wrap(t,e){const s=super.wrap(t,e);return s instanceof E&&this.attributes.move(s),s}}E.allowedChildren=[E,N],E.blotName="inline",E.scope=r.INLINE_BLOT,E.tagName="SPAN";var T=E;class B extends u{constructor(t,e){super(t,e),this.attributes=new x(this.domNode)}static formats(t,e){const s=e.query(B.blotName);if(null==s||t.tagName!==s.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)}format(t,e){const s=this.scroll.query(t,r.BLOCK);null!=s&&(s instanceof b?this.attributes.attribute(s,e):t!==this.statics.blotName||e?!e||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e):this.replaceWith(B.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){null!=this.scroll.query(s,r.BLOCK)?this.format(s,i):super.formatAt(t,e,s,i)}insertAt(t,e,s){if(null==s||null!=this.scroll.query(e,r.INLINE))super.insertAt(t,e,s);else{const i=this.split(t);if(null==i)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,s);i.parent.insertBefore(t,i)}}}replaceWith(t,e){const s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(t=>t.target===this.domNode&&"attributes"===t.type)&&this.attributes.build()}}B.blotName="block",B.scope=r.BLOCK_BLOT,B.tagName="P",B.allowedChildren=[T,B,N];var C=B;var L=class extends N{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,s,i){0===t&&e===this.length()?this.format(s,i):super.formatAt(t,e,s,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}};const O={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0};class w extends u{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(t=>{this.update(t)}),this.observer.observe(this.domNode,O),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){return this.registry.find(t,e)}query(t,e=r.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(t=>{t.remove()}):super.deleteAt(t,e)}formatAt(t,e,s,i){this.update(),super.formatAt(t,e,s,i)}insertAt(t,e,s){this.update(),super.insertAt(t,e,s)}optimize(t=[],e={}){super.optimize(e);const s=e.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const r=(t,e=!0)=>{null!=t&&t!==this&&null!=t.domNode.parentNode&&(s.has(t.domNode)||s.set(t.domNode,[]),e&&r(t.parent))},n=t=>{s.has(t.domNode)&&(t instanceof u&&t.children.forEach(n),s.delete(t.domNode),t.optimize(e))};let o=t;for(let e=0;o.length>0;e+=1){if(e>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(r(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach(t=>{const e=this.find(t,!1);r(e,!1),e instanceof u&&e.children.forEach(t=>{r(t,!1)})})):"attributes"===t.type&&r(e.prev)),r(e))}),this.children.forEach(n),o=Array.from(this.observer.takeRecords()),i=o.slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const s=new WeakMap;t.map(t=>{const e=a.find(t.target,!0);return null==e?null:s.has(e.domNode)?(s.get(e.domNode).push(t),null):(s.set(e.domNode,[t]),e)}).forEach(t=>{null!=t&&t!==this&&s.has(t.domNode)&&t.update(s.get(t.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(t,e)}}w.blotName="scroll",w.defaultChild=C,w.allowedChildren=[C,p],w.scope=r.BLOCK_BLOT,w.tagName="DIV";var I=w;class k extends N{constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}static create(t){return document.createTextNode(t)}static value(t){return t.data}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,s){null==s?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,s)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),0!==this.text.length&&this.next instanceof k&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(t,e){t.some(t=>"characterData"===t.type&&t.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}}k.blotName="text",k.scope=r.INLINE_BLOT;var _=k}])}));\n//# sourceMappingURL=parchment.js.map\n\n//# sourceURL=webpack://Quill/./node_modules/@creately/parchment/dist/parchment.js?')},"./node_modules/eventemitter3/index.js":function node_modulesEventemitter3IndexJs(module,exports,__webpack_require__){"use strict";eval("\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif (true) {\n  module.exports = EventEmitter;\n}\n\n\n//# sourceURL=webpack://Quill/./node_modules/eventemitter3/index.js?")},"./node_modules/fast-diff/diff.js":function node_modulesFastDiffDiffJs(module,exports){eval("/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)]\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 !== 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length && y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length && y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) === text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i), shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i), shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(\n          j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a, best_longtext_b,\n        best_shorttext_a, best_shorttext_b, best_common\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (previous_equality >= 0 && ends_with_pair_start(diffs[previous_equality][1])) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(0, -1);\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL, text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete], [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n        diffs[pointer - 1][1].length) === diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(0, diffs[pointer][1].length -\n            diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n};\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xD800 && charCode <= 0xDBFF;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xDC00 && charCode <= 0xDFFF;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after]\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange = typeof cursor_pos === 'number' ?\n    { index: cursor_pos, length: 0 } : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === 'number' ?\n    null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n\n//# sourceURL=webpack://Quill/./node_modules/fast-diff/diff.js?")},"./node_modules/lodash.clonedeep/index.js":function node_modulesLodashClonedeepIndexJs(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(global, module) {/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports =  true && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Quill/./node_modules/lodash.clonedeep/index.js?")},"./node_modules/lodash.isequal/index.js":function node_modulesLodashIsequalIndexJs(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(global, module) {/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports =  true && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Quill/./node_modules/lodash.isequal/index.js?")},"./node_modules/lodash.merge/index.js":function node_modulesLodashMergeIndexJs(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(global, module) {/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports =  true && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeMax = Math.max,\n    nativeNow = Date.now;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = merge;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Quill/./node_modules/lodash.merge/index.js?")},"./node_modules/quill-delta/dist/AttributeMap.js":function node_modulesQuillDeltaDistAttributeMapJs(module,exports,__webpack_require__){"use strict";eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_clonedeep_1 = __importDefault(__webpack_require__(/*! lodash.clonedeep */ \"./node_modules/lodash.clonedeep/index.js\"));\nvar lodash_isequal_1 = __importDefault(__webpack_require__(/*! lodash.isequal */ \"./node_modules/lodash.isequal/index.js\"));\nvar AttributeMap;\n(function (AttributeMap) {\n    function compose(a, b, keepNull) {\n        if (a === void 0) { a = {}; }\n        if (b === void 0) { b = {}; }\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        var attributes = lodash_clonedeep_1.default(b);\n        if (!keepNull) {\n            attributes = Object.keys(attributes).reduce(function (copy, key) {\n                if (attributes[key] != null) {\n                    copy[key] = attributes[key];\n                }\n                return copy;\n            }, {});\n        }\n        for (var key in a) {\n            if (a[key] !== undefined && b[key] === undefined) {\n                attributes[key] = a[key];\n            }\n        }\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.compose = compose;\n    function diff(a, b) {\n        if (a === void 0) { a = {}; }\n        if (b === void 0) { b = {}; }\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        var attributes = Object.keys(a)\n            .concat(Object.keys(b))\n            .reduce(function (attrs, key) {\n            if (!lodash_isequal_1.default(a[key], b[key])) {\n                attrs[key] = b[key] === undefined ? null : b[key];\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.diff = diff;\n    function invert(attr, base) {\n        if (attr === void 0) { attr = {}; }\n        if (base === void 0) { base = {}; }\n        attr = attr || {};\n        var baseInverted = Object.keys(base).reduce(function (memo, key) {\n            if (base[key] !== attr[key] && attr[key] !== undefined) {\n                memo[key] = base[key];\n            }\n            return memo;\n        }, {});\n        return Object.keys(attr).reduce(function (memo, key) {\n            if (attr[key] !== base[key] && base[key] === undefined) {\n                memo[key] = null;\n            }\n            return memo;\n        }, baseInverted);\n    }\n    AttributeMap.invert = invert;\n    function transform(a, b, priority) {\n        if (priority === void 0) { priority = false; }\n        if (typeof a !== 'object') {\n            return b;\n        }\n        if (typeof b !== 'object') {\n            return undefined;\n        }\n        if (!priority) {\n            return b; // b simply overwrites us without priority\n        }\n        var attributes = Object.keys(b).reduce(function (attrs, key) {\n            if (a[key] === undefined) {\n                attrs[key] = b[key]; // null is a valid value\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;\n//# sourceMappingURL=AttributeMap.js.map\n\n//# sourceURL=webpack://Quill/./node_modules/quill-delta/dist/AttributeMap.js?")},"./node_modules/quill-delta/dist/Delta.js":function node_modulesQuillDeltaDistDeltaJs(module,exports,__webpack_require__){"use strict";eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar fast_diff_1 = __importDefault(__webpack_require__(/*! fast-diff */ \"./node_modules/fast-diff/diff.js\"));\nvar lodash_clonedeep_1 = __importDefault(__webpack_require__(/*! lodash.clonedeep */ \"./node_modules/lodash.clonedeep/index.js\"));\nvar lodash_isequal_1 = __importDefault(__webpack_require__(/*! lodash.isequal */ \"./node_modules/lodash.isequal/index.js\"));\nvar AttributeMap_1 = __importDefault(__webpack_require__(/*! ./AttributeMap */ \"./node_modules/quill-delta/dist/AttributeMap.js\"));\nvar Op_1 = __importDefault(__webpack_require__(/*! ./Op */ \"./node_modules/quill-delta/dist/Op.js\"));\nvar NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\nvar Delta = /** @class */ (function () {\n    function Delta(ops) {\n        // Assume we are given a well formed ops\n        if (Array.isArray(ops)) {\n            this.ops = ops;\n        }\n        else if (ops != null && Array.isArray(ops.ops)) {\n            this.ops = ops.ops;\n        }\n        else {\n            this.ops = [];\n        }\n    }\n    Delta.prototype.insert = function (arg, attributes) {\n        var newOp = {};\n        if (typeof arg === 'string' && arg.length === 0) {\n            return this;\n        }\n        newOp.insert = arg;\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    };\n    Delta.prototype.delete = function (length) {\n        if (length <= 0) {\n            return this;\n        }\n        return this.push({ delete: length });\n    };\n    Delta.prototype.retain = function (length, attributes) {\n        if (length <= 0) {\n            return this;\n        }\n        var newOp = { retain: length };\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    };\n    Delta.prototype.push = function (newOp) {\n        var index = this.ops.length;\n        var lastOp = this.ops[index - 1];\n        newOp = lodash_clonedeep_1.default(newOp);\n        if (typeof lastOp === 'object') {\n            if (typeof newOp.delete === 'number' &&\n                typeof lastOp.delete === 'number') {\n                this.ops[index - 1] = { delete: lastOp.delete + newOp.delete };\n                return this;\n            }\n            // Since it does not matter if we insert before or after deleting at the same index,\n            // always prefer to insert first\n            if (typeof lastOp.delete === 'number' && newOp.insert != null) {\n                index -= 1;\n                lastOp = this.ops[index - 1];\n                if (typeof lastOp !== 'object') {\n                    this.ops.unshift(newOp);\n                    return this;\n                }\n            }\n            if (lodash_isequal_1.default(newOp.attributes, lastOp.attributes)) {\n                if (typeof newOp.insert === 'string' &&\n                    typeof lastOp.insert === 'string') {\n                    this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n                else if (typeof newOp.retain === 'number' &&\n                    typeof lastOp.retain === 'number') {\n                    this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n            }\n        }\n        if (index === this.ops.length) {\n            this.ops.push(newOp);\n        }\n        else {\n            this.ops.splice(index, 0, newOp);\n        }\n        return this;\n    };\n    Delta.prototype.chop = function () {\n        var lastOp = this.ops[this.ops.length - 1];\n        if (lastOp && lastOp.retain && !lastOp.attributes) {\n            this.ops.pop();\n        }\n        return this;\n    };\n    Delta.prototype.filter = function (predicate) {\n        return this.ops.filter(predicate);\n    };\n    Delta.prototype.forEach = function (predicate) {\n        this.ops.forEach(predicate);\n    };\n    Delta.prototype.map = function (predicate) {\n        return this.ops.map(predicate);\n    };\n    Delta.prototype.partition = function (predicate) {\n        var passed = [];\n        var failed = [];\n        this.forEach(function (op) {\n            var target = predicate(op) ? passed : failed;\n            target.push(op);\n        });\n        return [passed, failed];\n    };\n    Delta.prototype.reduce = function (predicate, initialValue) {\n        return this.ops.reduce(predicate, initialValue);\n    };\n    Delta.prototype.changeLength = function () {\n        return this.reduce(function (length, elem) {\n            if (elem.insert) {\n                return length + Op_1.default.length(elem);\n            }\n            else if (elem.delete) {\n                return length - elem.delete;\n            }\n            return length;\n        }, 0);\n    };\n    Delta.prototype.length = function () {\n        return this.reduce(function (length, elem) {\n            return length + Op_1.default.length(elem);\n        }, 0);\n    };\n    Delta.prototype.slice = function (start, end) {\n        if (start === void 0) { start = 0; }\n        if (end === void 0) { end = Infinity; }\n        var ops = [];\n        var iter = Op_1.default.iterator(this.ops);\n        var index = 0;\n        while (index < end && iter.hasNext()) {\n            var nextOp = void 0;\n            if (index < start) {\n                nextOp = iter.next(start - index);\n            }\n            else {\n                nextOp = iter.next(end - index);\n                ops.push(nextOp);\n            }\n            index += Op_1.default.length(nextOp);\n        }\n        return new Delta(ops);\n    };\n    Delta.prototype.compose = function (other) {\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        var ops = [];\n        var firstOther = otherIter.peek();\n        if (firstOther != null &&\n            typeof firstOther.retain === 'number' &&\n            firstOther.attributes == null) {\n            var firstLeft = firstOther.retain;\n            while (thisIter.peekType() === 'insert' &&\n                thisIter.peekLength() <= firstLeft) {\n                firstLeft -= thisIter.peekLength();\n                ops.push(thisIter.next());\n            }\n            if (firstOther.retain - firstLeft > 0) {\n                otherIter.next(firstOther.retain - firstLeft);\n            }\n        }\n        var delta = new Delta(ops);\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else if (thisIter.peekType() === 'delete') {\n                delta.push(thisIter.next());\n            }\n            else {\n                var length_1 = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                var thisOp = thisIter.next(length_1);\n                var otherOp = otherIter.next(length_1);\n                if (typeof otherOp.retain === 'number') {\n                    var newOp = {};\n                    if (typeof thisOp.retain === 'number') {\n                        newOp.retain = length_1;\n                    }\n                    else {\n                        newOp.insert = thisOp.insert;\n                    }\n                    // Preserve null when composing with a retain, otherwise remove it for inserts\n                    var attributes = AttributeMap_1.default.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n                    if (attributes) {\n                        newOp.attributes = attributes;\n                    }\n                    delta.push(newOp);\n                    // Optimization if rest of other is just retain\n                    if (!otherIter.hasNext() &&\n                        lodash_isequal_1.default(delta.ops[delta.ops.length - 1], newOp)) {\n                        var rest = new Delta(thisIter.rest());\n                        return delta.concat(rest).chop();\n                    }\n                    // Other op should be delete, we could be an insert or retain\n                    // Insert + delete cancels out\n                }\n                else if (typeof otherOp.delete === 'number' &&\n                    typeof thisOp.retain === 'number') {\n                    delta.push(otherOp);\n                }\n            }\n        }\n        return delta.chop();\n    };\n    Delta.prototype.concat = function (other) {\n        var delta = new Delta(this.ops.slice());\n        if (other.ops.length > 0) {\n            delta.push(other.ops[0]);\n            delta.ops = delta.ops.concat(other.ops.slice(1));\n        }\n        return delta;\n    };\n    Delta.prototype.diff = function (other, cursor) {\n        if (this.ops === other.ops) {\n            return new Delta();\n        }\n        var strings = [this, other].map(function (delta) {\n            return delta\n                .map(function (op) {\n                if (op.insert != null) {\n                    return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n                }\n                var prep = delta === other ? 'on' : 'with';\n                throw new Error('diff() called ' + prep + ' non-document');\n            })\n                .join('');\n        });\n        var retDelta = new Delta();\n        var diffResult = fast_diff_1.default(strings[0], strings[1], cursor);\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        diffResult.forEach(function (component) {\n            var length = component[1].length;\n            while (length > 0) {\n                var opLength = 0;\n                switch (component[0]) {\n                    case fast_diff_1.default.INSERT:\n                        opLength = Math.min(otherIter.peekLength(), length);\n                        retDelta.push(otherIter.next(opLength));\n                        break;\n                    case fast_diff_1.default.DELETE:\n                        opLength = Math.min(length, thisIter.peekLength());\n                        thisIter.next(opLength);\n                        retDelta.delete(opLength);\n                        break;\n                    case fast_diff_1.default.EQUAL:\n                        opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n                        var thisOp = thisIter.next(opLength);\n                        var otherOp = otherIter.next(opLength);\n                        if (lodash_isequal_1.default(thisOp.insert, otherOp.insert)) {\n                            retDelta.retain(opLength, AttributeMap_1.default.diff(thisOp.attributes, otherOp.attributes));\n                        }\n                        else {\n                            retDelta.push(otherOp).delete(opLength);\n                        }\n                        break;\n                }\n                length -= opLength;\n            }\n        });\n        return retDelta.chop();\n    };\n    Delta.prototype.eachLine = function (predicate, newline) {\n        if (newline === void 0) { newline = '\\n'; }\n        var iter = Op_1.default.iterator(this.ops);\n        var line = new Delta();\n        var i = 0;\n        while (iter.hasNext()) {\n            if (iter.peekType() !== 'insert') {\n                return;\n            }\n            var thisOp = iter.peek();\n            var start = Op_1.default.length(thisOp) - iter.peekLength();\n            var index = typeof thisOp.insert === 'string'\n                ? thisOp.insert.indexOf(newline, start) - start\n                : -1;\n            if (index < 0) {\n                line.push(iter.next());\n            }\n            else if (index > 0) {\n                line.push(iter.next(index));\n            }\n            else {\n                if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n                    return;\n                }\n                i += 1;\n                line = new Delta();\n            }\n        }\n        if (line.length() > 0) {\n            predicate(line, {}, i);\n        }\n    };\n    Delta.prototype.invert = function (base) {\n        var inverted = new Delta();\n        this.reduce(function (baseIndex, op) {\n            if (op.insert) {\n                inverted.delete(Op_1.default.length(op));\n            }\n            else if (op.retain && op.attributes == null) {\n                inverted.retain(op.retain);\n                return baseIndex + op.retain;\n            }\n            else if (op.delete || (op.retain && op.attributes)) {\n                var length_2 = (op.delete || op.retain);\n                var slice = base.slice(baseIndex, baseIndex + length_2);\n                slice.forEach(function (baseOp) {\n                    if (op.delete) {\n                        inverted.push(baseOp);\n                    }\n                    else if (op.retain && op.attributes) {\n                        inverted.retain(Op_1.default.length(baseOp), AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                    }\n                });\n                return baseIndex + length_2;\n            }\n            return baseIndex;\n        }, 0);\n        return inverted.chop();\n    };\n    Delta.prototype.transform = function (arg, priority) {\n        if (priority === void 0) { priority = false; }\n        priority = !!priority;\n        if (typeof arg === 'number') {\n            return this.transformPosition(arg, priority);\n        }\n        var other = arg;\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        var delta = new Delta();\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (thisIter.peekType() === 'insert' &&\n                (priority || otherIter.peekType() !== 'insert')) {\n                delta.retain(Op_1.default.length(thisIter.next()));\n            }\n            else if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else {\n                var length_3 = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                var thisOp = thisIter.next(length_3);\n                var otherOp = otherIter.next(length_3);\n                if (thisOp.delete) {\n                    // Our delete either makes their delete redundant or removes their retain\n                    continue;\n                }\n                else if (otherOp.delete) {\n                    delta.push(otherOp);\n                }\n                else {\n                    // We retain either their retain or insert\n                    delta.retain(length_3, AttributeMap_1.default.transform(thisOp.attributes, otherOp.attributes, priority));\n                }\n            }\n        }\n        return delta.chop();\n    };\n    Delta.prototype.transformPosition = function (index, priority) {\n        if (priority === void 0) { priority = false; }\n        priority = !!priority;\n        var thisIter = Op_1.default.iterator(this.ops);\n        var offset = 0;\n        while (thisIter.hasNext() && offset <= index) {\n            var length_4 = thisIter.peekLength();\n            var nextType = thisIter.peekType();\n            thisIter.next();\n            if (nextType === 'delete') {\n                index -= Math.min(length_4, index - offset);\n                continue;\n            }\n            else if (nextType === 'insert' && (offset < index || !priority)) {\n                index += length_4;\n            }\n            offset += length_4;\n        }\n        return index;\n    };\n    Delta.Op = Op_1.default;\n    Delta.AttributeMap = AttributeMap_1.default;\n    return Delta;\n}());\nmodule.exports = Delta;\n//# sourceMappingURL=Delta.js.map\n\n//# sourceURL=webpack://Quill/./node_modules/quill-delta/dist/Delta.js?")},"./node_modules/quill-delta/dist/Iterator.js":function node_modulesQuillDeltaDistIteratorJs(module,exports,__webpack_require__){"use strict";eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Op_1 = __importDefault(__webpack_require__(/*! ./Op */ \"./node_modules/quill-delta/dist/Op.js\"));\nvar Iterator = /** @class */ (function () {\n    function Iterator(ops) {\n        this.ops = ops;\n        this.index = 0;\n        this.offset = 0;\n    }\n    Iterator.prototype.hasNext = function () {\n        return this.peekLength() < Infinity;\n    };\n    Iterator.prototype.next = function (length) {\n        if (!length) {\n            length = Infinity;\n        }\n        var nextOp = this.ops[this.index];\n        if (nextOp) {\n            var offset = this.offset;\n            var opLength = Op_1.default.length(nextOp);\n            if (length >= opLength - offset) {\n                length = opLength - offset;\n                this.index += 1;\n                this.offset = 0;\n            }\n            else {\n                this.offset += length;\n            }\n            if (typeof nextOp.delete === 'number') {\n                return { delete: length };\n            }\n            else {\n                var retOp = {};\n                if (nextOp.attributes) {\n                    retOp.attributes = nextOp.attributes;\n                }\n                if (typeof nextOp.retain === 'number') {\n                    retOp.retain = length;\n                }\n                else if (typeof nextOp.insert === 'string') {\n                    retOp.insert = nextOp.insert.substr(offset, length);\n                }\n                else {\n                    // offset should === 0, length should === 1\n                    retOp.insert = nextOp.insert;\n                }\n                return retOp;\n            }\n        }\n        else {\n            return { retain: Infinity };\n        }\n    };\n    Iterator.prototype.peek = function () {\n        return this.ops[this.index];\n    };\n    Iterator.prototype.peekLength = function () {\n        if (this.ops[this.index]) {\n            // Should never return 0 if our index is being managed correctly\n            return Op_1.default.length(this.ops[this.index]) - this.offset;\n        }\n        else {\n            return Infinity;\n        }\n    };\n    Iterator.prototype.peekType = function () {\n        if (this.ops[this.index]) {\n            if (typeof this.ops[this.index].delete === 'number') {\n                return 'delete';\n            }\n            else if (typeof this.ops[this.index].retain === 'number') {\n                return 'retain';\n            }\n            else {\n                return 'insert';\n            }\n        }\n        return 'retain';\n    };\n    Iterator.prototype.rest = function () {\n        if (!this.hasNext()) {\n            return [];\n        }\n        else if (this.offset === 0) {\n            return this.ops.slice(this.index);\n        }\n        else {\n            var offset = this.offset;\n            var index = this.index;\n            var next = this.next();\n            var rest = this.ops.slice(this.index);\n            this.offset = offset;\n            this.index = index;\n            return [next].concat(rest);\n        }\n    };\n    return Iterator;\n}());\nexports.default = Iterator;\n//# sourceMappingURL=Iterator.js.map\n\n//# sourceURL=webpack://Quill/./node_modules/quill-delta/dist/Iterator.js?")},"./node_modules/quill-delta/dist/Op.js":function node_modulesQuillDeltaDistOpJs(module,exports,__webpack_require__){"use strict";eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Iterator_1 = __importDefault(__webpack_require__(/*! ./Iterator */ \"./node_modules/quill-delta/dist/Iterator.js\"));\nvar Op;\n(function (Op) {\n    function iterator(ops) {\n        return new Iterator_1.default(ops);\n    }\n    Op.iterator = iterator;\n    function length(op) {\n        if (typeof op.delete === 'number') {\n            return op.delete;\n        }\n        else if (typeof op.retain === 'number') {\n            return op.retain;\n        }\n        else {\n            return typeof op.insert === 'string' ? op.insert.length : 1;\n        }\n    }\n    Op.length = length;\n})(Op || (Op = {}));\nexports.default = Op;\n//# sourceMappingURL=Op.js.map\n\n//# sourceURL=webpack://Quill/./node_modules/quill-delta/dist/Op.js?")},"./node_modules/webpack/buildin/global.js":function node_modulesWebpackBuildinGlobalJs(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function("return this")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack://Quill/(webpack)/buildin/global.js?')},"./node_modules/webpack/buildin/module.js":function node_modulesWebpackBuildinModuleJs(module,exports){eval('module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, "loaded", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, "id", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n//# sourceURL=webpack://Quill/(webpack)/buildin/module.js?')},"./quill.js":function quillJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ "./core.js");\n/* harmony import */ var _formats_align__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./formats/align */ "./formats/align.js");\n/* harmony import */ var _formats_direction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./formats/direction */ "./formats/direction.js");\n/* harmony import */ var _formats_indent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./formats/indent */ "./formats/indent.js");\n/* harmony import */ var _formats_blockquote__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./formats/blockquote */ "./formats/blockquote.js");\n/* harmony import */ var _formats_header__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./formats/header */ "./formats/header.js");\n/* harmony import */ var _formats_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./formats/list */ "./formats/list.js");\n/* harmony import */ var _formats_background__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./formats/background */ "./formats/background.js");\n/* harmony import */ var _formats_color__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./formats/color */ "./formats/color.js");\n/* harmony import */ var _formats_font__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./formats/font */ "./formats/font.js");\n/* harmony import */ var _formats_size__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./formats/size */ "./formats/size.js");\n/* harmony import */ var _formats_bold__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./formats/bold */ "./formats/bold.js");\n/* harmony import */ var _formats_italic__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./formats/italic */ "./formats/italic.js");\n/* harmony import */ var _formats_link__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./formats/link */ "./formats/link.js");\n/* harmony import */ var _formats_script__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./formats/script */ "./formats/script.js");\n/* harmony import */ var _formats_strike__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./formats/strike */ "./formats/strike.js");\n/* harmony import */ var _formats_underline__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./formats/underline */ "./formats/underline.js");\n/* harmony import */ var _formats_formula__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./formats/formula */ "./formats/formula.js");\n/* harmony import */ var _formats_image__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./formats/image */ "./formats/image.js");\n/* harmony import */ var _formats_video__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./formats/video */ "./formats/video.js");\n/* harmony import */ var _formats_code__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./formats/code */ "./formats/code.js");\n/* harmony import */ var _modules_syntax__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./modules/syntax */ "./modules/syntax.js");\n/* harmony import */ var _modules_table__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./modules/table */ "./modules/table.js");\n/* harmony import */ var _modules_toolbar__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./modules/toolbar */ "./modules/toolbar.js");\n/* harmony import */ var _ui_icons__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./ui/icons */ "./ui/icons.js");\n/* harmony import */ var _ui_picker__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./ui/picker */ "./ui/picker.js");\n/* harmony import */ var _ui_color_picker__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ui/color-picker */ "./ui/color-picker.js");\n/* harmony import */ var _ui_icon_picker__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./ui/icon-picker */ "./ui/icon-picker.js");\n/* harmony import */ var _ui_tooltip__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./ui/tooltip */ "./ui/tooltip.js");\n/* harmony import */ var _themes_bubble__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./themes/bubble */ "./themes/bubble.js");\n/* harmony import */ var _themes_snow__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./themes/snow */ "./themes/snow.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n_core__WEBPACK_IMPORTED_MODULE_0__["default"].register({\n  \'attributors/attribute/direction\': _formats_direction__WEBPACK_IMPORTED_MODULE_2__["DirectionAttribute"],\n  \'attributors/class/align\': _formats_align__WEBPACK_IMPORTED_MODULE_1__["AlignClass"],\n  \'attributors/class/background\': _formats_background__WEBPACK_IMPORTED_MODULE_7__["BackgroundClass"],\n  \'attributors/class/color\': _formats_color__WEBPACK_IMPORTED_MODULE_8__["ColorClass"],\n  \'attributors/class/direction\': _formats_direction__WEBPACK_IMPORTED_MODULE_2__["DirectionClass"],\n  \'attributors/class/font\': _formats_font__WEBPACK_IMPORTED_MODULE_9__["FontClass"],\n  \'attributors/class/size\': _formats_size__WEBPACK_IMPORTED_MODULE_10__["SizeClass"],\n  \'attributors/style/align\': _formats_align__WEBPACK_IMPORTED_MODULE_1__["AlignStyle"],\n  \'attributors/style/background\': _formats_background__WEBPACK_IMPORTED_MODULE_7__["BackgroundStyle"],\n  \'attributors/style/color\': _formats_color__WEBPACK_IMPORTED_MODULE_8__["ColorStyle"],\n  \'attributors/style/direction\': _formats_direction__WEBPACK_IMPORTED_MODULE_2__["DirectionStyle"],\n  \'attributors/style/font\': _formats_font__WEBPACK_IMPORTED_MODULE_9__["FontStyle"],\n  \'attributors/style/size\': _formats_size__WEBPACK_IMPORTED_MODULE_10__["SizeStyle"]\n}, true);\n_core__WEBPACK_IMPORTED_MODULE_0__["default"].register({\n  \'formats/align\': _formats_align__WEBPACK_IMPORTED_MODULE_1__["AlignClass"],\n  \'formats/direction\': _formats_direction__WEBPACK_IMPORTED_MODULE_2__["DirectionClass"],\n  \'formats/indent\': _formats_indent__WEBPACK_IMPORTED_MODULE_3__["default"],\n  \'formats/background\': _formats_background__WEBPACK_IMPORTED_MODULE_7__["BackgroundStyle"],\n  \'formats/color\': _formats_color__WEBPACK_IMPORTED_MODULE_8__["ColorStyle"],\n  \'formats/font\': _formats_font__WEBPACK_IMPORTED_MODULE_9__["FontClass"],\n  \'formats/size\': _formats_size__WEBPACK_IMPORTED_MODULE_10__["SizeClass"],\n  \'formats/blockquote\': _formats_blockquote__WEBPACK_IMPORTED_MODULE_4__["default"],\n  \'formats/code-block\': _formats_code__WEBPACK_IMPORTED_MODULE_20__["default"],\n  \'formats/header\': _formats_header__WEBPACK_IMPORTED_MODULE_5__["default"],\n  \'formats/list\': _formats_list__WEBPACK_IMPORTED_MODULE_6__["default"],\n  \'formats/bold\': _formats_bold__WEBPACK_IMPORTED_MODULE_11__["default"],\n  \'formats/code\': _formats_code__WEBPACK_IMPORTED_MODULE_20__["Code"],\n  \'formats/italic\': _formats_italic__WEBPACK_IMPORTED_MODULE_12__["default"],\n  \'formats/link\': _formats_link__WEBPACK_IMPORTED_MODULE_13__["default"],\n  \'formats/script\': _formats_script__WEBPACK_IMPORTED_MODULE_14__["default"],\n  \'formats/strike\': _formats_strike__WEBPACK_IMPORTED_MODULE_15__["default"],\n  \'formats/underline\': _formats_underline__WEBPACK_IMPORTED_MODULE_16__["default"],\n  \'formats/formula\': _formats_formula__WEBPACK_IMPORTED_MODULE_17__["default"],\n  \'formats/image\': _formats_image__WEBPACK_IMPORTED_MODULE_18__["default"],\n  \'formats/video\': _formats_video__WEBPACK_IMPORTED_MODULE_19__["default"],\n  \'modules/syntax\': _modules_syntax__WEBPACK_IMPORTED_MODULE_21__["default"],\n  \'modules/table\': _modules_table__WEBPACK_IMPORTED_MODULE_22__["default"],\n  \'modules/toolbar\': _modules_toolbar__WEBPACK_IMPORTED_MODULE_23__["default"],\n  \'themes/bubble\': _themes_bubble__WEBPACK_IMPORTED_MODULE_29__["default"],\n  \'themes/snow\': _themes_snow__WEBPACK_IMPORTED_MODULE_30__["default"],\n  \'ui/icons\': _ui_icons__WEBPACK_IMPORTED_MODULE_24__["default"],\n  \'ui/picker\': _ui_picker__WEBPACK_IMPORTED_MODULE_25__["default"],\n  \'ui/icon-picker\': _ui_icon_picker__WEBPACK_IMPORTED_MODULE_27__["default"],\n  \'ui/color-picker\': _ui_color_picker__WEBPACK_IMPORTED_MODULE_26__["default"],\n  \'ui/tooltip\': _ui_tooltip__WEBPACK_IMPORTED_MODULE_28__["default"]\n}, true);\n/* harmony default export */ __webpack_exports__["default"] = (_core__WEBPACK_IMPORTED_MODULE_0__["default"]);\n\n//# sourceURL=webpack://Quill/./quill.js?')},"./themes/base.js":function themesBaseJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BaseTooltip\", function() { return BaseTooltip; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BaseTheme; });\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.merge */ \"./node_modules/lodash.merge/index.js\");\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/emitter */ \"./core/emitter.js\");\n/* harmony import */ var _core_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/theme */ \"./core/theme.js\");\n/* harmony import */ var _ui_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/color-picker */ \"./ui/color-picker.js\");\n/* harmony import */ var _ui_icon_picker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/icon-picker */ \"./ui/icon-picker.js\");\n/* harmony import */ var _ui_picker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/picker */ \"./ui/picker.js\");\n/* harmony import */ var _ui_tooltip__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/tooltip */ \"./ui/tooltip.js\");\n\n\n\n\n\n\n\nconst ALIGNS = [false, 'center', 'right', 'justify'];\nconst COLORS = ['#000000', '#e60000', '#ff9900', '#ffff00', '#008a00', '#0066cc', '#9933ff', '#ffffff', '#facccc', '#ffebcc', '#ffffcc', '#cce8cc', '#cce0f5', '#ebd6ff', '#bbbbbb', '#f06666', '#ffc266', '#ffff66', '#66b966', '#66a3e0', '#c285ff', '#888888', '#a10000', '#b26b00', '#b2b200', '#006100', '#0047b2', '#6b24b2', '#444444', '#5c0000', '#663d00', '#666600', '#003700', '#002966', '#3d1466'];\nconst FONTS = [false, 'serif', 'monospace'];\nconst HEADERS = ['1', '2', '3', false];\nconst SIZES = ['small', false, 'large', 'huge'];\n\nclass BaseTheme extends _core_theme__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n  constructor(quill, options) {\n    super(quill, options);\n\n    const listener = e => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n\n      if (this.tooltip != null && !this.tooltip.root.contains(e.target) && document.activeElement !== this.tooltip.textbox && !this.quill.hasFocus()) {\n        this.tooltip.hide();\n      }\n\n      if (this.pickers != null) {\n        this.pickers.forEach(picker => {\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n\n  addModule(name) {\n    const module = super.addModule(name);\n\n    if (name === 'toolbar') {\n      this.extendToolbar(module);\n    }\n\n    return module;\n  }\n\n  buildButtons(buttons, icons) {\n    Array.from(buttons).forEach(button => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach(name => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n\n        if (name === 'direction') {\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          button.innerHTML = icons[name];\n        } else {\n          const value = button.value || '';\n\n          if (value != null && icons[name][value]) {\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n\n  buildPickers(selects, icons) {\n    this.pickers = Array.from(selects).map(select => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n\n        return new _ui_icon_picker__WEBPACK_IMPORTED_MODULE_4__[\"default\"](select, icons.align);\n      }\n\n      if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\n        const format = select.classList.contains('ql-background') ? 'background' : 'color';\n\n        if (select.querySelector('option') == null) {\n          fillSelect(select, COLORS, format === 'background' ? '#ffffff' : '#000000');\n        }\n\n        return new _ui_color_picker__WEBPACK_IMPORTED_MODULE_3__[\"default\"](select, icons[format]);\n      }\n\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n\n      return new _ui_picker__WEBPACK_IMPORTED_MODULE_5__[\"default\"](select);\n    });\n\n    const update = () => {\n      this.pickers.forEach(picker => {\n        picker.update();\n      });\n    };\n\n    this.quill.on(_core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].events.EDITOR_CHANGE, update);\n  }\n\n}\n\nBaseTheme.DEFAULTS = lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()({}, _core_theme__WEBPACK_IMPORTED_MODULE_2__[\"default\"].DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n\n        image() {\n          let fileInput = this.container.querySelector('input.ql-image[type=file]');\n\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute('accept', this.quill.uploader.options.mimetypes.join(', '));\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n\n          fileInput.click();\n        },\n\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        }\n\n      }\n    }\n  }\n});\n\nclass BaseTooltip extends _ui_tooltip__WEBPACK_IMPORTED_MODULE_6__[\"default\"] {\n  constructor(quill, boundsContainer) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n\n  listen() {\n    this.textbox.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n\n  cancel() {\n    this.hide();\n  }\n\n  edit(mode = 'link', preview = null) {\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n\n    this.position(this.quill.getBounds(this.quill.selection.savedRange));\n    this.textbox.select();\n    this.textbox.setAttribute('placeholder', this.textbox.getAttribute(\"data-\".concat(mode)) || '');\n    this.root.setAttribute('data-mode', mode);\n  }\n\n  restoreFocus() {\n    const {\n      scrollTop\n    } = this.quill.scrollingContainer;\n    this.quill.focus();\n    this.quill.scrollingContainer.scrollTop = scrollTop;\n  }\n\n  save() {\n    let {\n      value\n    } = this.textbox;\n\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link':\n        {\n          const {\n            scrollTop\n          } = this.quill.root;\n\n          if (this.linkRange) {\n            this.quill.formatText(this.linkRange, 'link', value, _core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sources.USER);\n            delete this.linkRange;\n          } else {\n            this.restoreFocus();\n            this.quill.format('link', value, _core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sources.USER);\n          }\n\n          this.quill.root.scrollTop = scrollTop;\n          break;\n        }\n\n      case 'video':\n        {\n          value = extractVideoUrl(value);\n        }\n      // eslint-disable-next-line no-fallthrough\n\n      case 'formula':\n        {\n          if (!value) break;\n          const range = this.quill.getSelection(true);\n\n          if (range != null) {\n            const index = range.index + range.length;\n            this.quill.insertEmbed(index, this.root.getAttribute('data-mode'), value, _core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sources.USER);\n\n            if (this.root.getAttribute('data-mode') === 'formula') {\n              this.quill.insertText(index + 1, ' ', _core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sources.USER);\n            }\n\n            this.quill.setSelection(index + 2, _core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sources.USER);\n          }\n\n          break;\n        }\n\n      default:\n    }\n\n    this.textbox.value = '';\n    this.hide();\n  }\n\n}\n\nfunction extractVideoUrl(url) {\n  let match = url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/) || url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n\n  if (match) {\n    return \"\".concat(match[1] || 'https', \"://www.youtube.com/embed/\").concat(match[2], \"?showinfo=0\");\n  } // eslint-disable-next-line no-cond-assign\n\n\n  if (match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/)) {\n    return \"\".concat(match[1] || 'https', \"://player.vimeo.com/video/\").concat(match[2], \"/\");\n  }\n\n  return url;\n}\n\nfunction fillSelect(select, values, defaultValue = false) {\n  values.forEach(value => {\n    const option = document.createElement('option');\n\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', value);\n    }\n\n    select.appendChild(option);\n  });\n}\n\n\n\n//# sourceURL=webpack://Quill/./themes/base.js?")},"./themes/bubble.js":function themesBubbleJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BubbleTooltip", function() { return BubbleTooltip; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BubbleTheme; });\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.merge */ "./node_modules/lodash.merge/index.js");\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/emitter */ "./core/emitter.js");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base */ "./themes/base.js");\n/* harmony import */ var _core_selection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/selection */ "./core/selection.js");\n/* harmony import */ var _ui_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/icons */ "./ui/icons.js");\n\n\n\n\n\nconst TOOLBAR_CONFIG = [[\'bold\', \'italic\', \'link\'], [{\n  header: 1\n}, {\n  header: 2\n}, \'blockquote\']];\n\nclass BubbleTooltip extends _base__WEBPACK_IMPORTED_MODULE_2__["BaseTooltip"] {\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.quill.on(_core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].events.EDITOR_CHANGE, (type, range, oldRange, source) => {\n      if (type !== _core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].events.SELECTION_CHANGE) return;\n\n      if (range != null && range.length > 0 && source === _core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].sources.USER) {\n        this.show(); // Lock our width so we will expand beyond our offsetParent boundaries\n\n        this.root.style.left = \'0px\';\n        this.root.style.width = \'\';\n        this.root.style.width = "".concat(this.root.offsetWidth, "px");\n        const lines = this.quill.getLines(range.index, range.length);\n\n        if (lines.length === 1) {\n          this.position(this.quill.getBounds(range));\n        } else {\n          const lastLine = lines[lines.length - 1];\n          const index = this.quill.getIndex(lastLine);\n          const length = Math.min(lastLine.length() - 1, range.index + range.length - index);\n          const indexBounds = this.quill.getBounds(new _core_selection__WEBPACK_IMPORTED_MODULE_3__["Range"](index, length));\n          this.position(indexBounds);\n        }\n      } else if (document.activeElement !== this.textbox && this.quill.hasFocus()) {\n        this.hide();\n      }\n    });\n  }\n\n  listen() {\n    super.listen();\n    this.root.querySelector(\'.ql-close\').addEventListener(\'click\', () => {\n      this.root.classList.remove(\'ql-editing\');\n    });\n    this.quill.on(_core_emitter__WEBPACK_IMPORTED_MODULE_1__["default"].events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains(\'ql-hidden\')) return;\n        const range = this.quill.getSelection();\n\n        if (range != null) {\n          this.position(this.quill.getBounds(range));\n        }\n      }, 1);\n    });\n  }\n\n  cancel() {\n    this.show();\n  }\n\n  position(reference) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector(\'.ql-tooltip-arrow\');\n    arrow.style.marginLeft = \'\';\n\n    if (shift !== 0) {\n      arrow.style.marginLeft = "".concat(-1 * shift - arrow.offsetWidth / 2, "px");\n    }\n\n    return shift;\n  }\n\n}\n\nBubbleTooltip.TEMPLATE = [\'<span class="ql-tooltip-arrow"></span>\', \'<div class="ql-tooltip-editor">\', \'<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">\', \'<a class="ql-close"></a>\', \'</div>\'].join(\'\');\n\nclass BubbleTheme extends _base__WEBPACK_IMPORTED_MODULE_2__["default"] {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n\n    super(quill, options);\n    this.quill.container.classList.add(\'ql-bubble\');\n  }\n\n  extendToolbar(toolbar) {\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    this.tooltip.root.appendChild(toolbar.container);\n    this.buildButtons(toolbar.container.querySelectorAll(\'button\'), _ui_icons__WEBPACK_IMPORTED_MODULE_4__["default"]);\n    this.buildPickers(toolbar.container.querySelectorAll(\'select\'), _ui_icons__WEBPACK_IMPORTED_MODULE_4__["default"]);\n  }\n\n}\n\nBubbleTheme.DEFAULTS = lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()({}, _base__WEBPACK_IMPORTED_MODULE_2__["default"].DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (!value) {\n            this.quill.format(\'link\', false);\n          } else {\n            this.quill.theme.tooltip.edit();\n          }\n        }\n\n      }\n    }\n  }\n});\n\n\n//# sourceURL=webpack://Quill/./themes/bubble.js?')},"./themes/snow.js":function themesSnowJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.merge */ \"./node_modules/lodash.merge/index.js\");\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/emitter */ \"./core/emitter.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base */ \"./themes/base.js\");\n/* harmony import */ var _formats_link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../formats/link */ \"./formats/link.js\");\n/* harmony import */ var _core_selection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/selection */ \"./core/selection.js\");\n/* harmony import */ var _ui_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/icons */ \"./ui/icons.js\");\n\n\n\n\n\n\nconst TOOLBAR_CONFIG = [[{\n  header: ['1', '2', '3', false]\n}], ['bold', 'italic', 'underline', 'link'], [{\n  list: 'ordered'\n}, {\n  list: 'bullet'\n}], ['clean']];\n\nclass SnowTooltip extends _base__WEBPACK_IMPORTED_MODULE_2__[\"BaseTooltip\"] {\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.preview = this.root.querySelector('a.ql-preview');\n  }\n\n  listen() {\n    super.listen();\n    this.root.querySelector('a.ql-action').addEventListener('click', event => {\n      if (this.root.classList.contains('ql-editing')) {\n        this.save();\n      } else {\n        this.edit('link', this.preview.textContent);\n      }\n\n      event.preventDefault();\n    });\n    this.root.querySelector('a.ql-remove').addEventListener('click', event => {\n      if (this.linkRange != null) {\n        const range = this.linkRange;\n        this.restoreFocus();\n        this.quill.formatText(range, 'link', false, _core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sources.USER);\n        delete this.linkRange;\n      }\n\n      event.preventDefault();\n      this.hide();\n    });\n    this.quill.on(_core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].events.SELECTION_CHANGE, (range, oldRange, source) => {\n      if (range == null) return;\n\n      if (range.length === 0 && source === _core_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sources.USER) {\n        const [link, offset] = this.quill.scroll.descendant(_formats_link__WEBPACK_IMPORTED_MODULE_3__[\"default\"], range.index);\n\n        if (link != null) {\n          this.linkRange = new _core_selection__WEBPACK_IMPORTED_MODULE_4__[\"Range\"](range.index - offset, link.length());\n          const preview = _formats_link__WEBPACK_IMPORTED_MODULE_3__[\"default\"].formats(link.domNode);\n          this.preview.textContent = preview;\n          this.preview.setAttribute('href', preview);\n          this.show();\n          this.position(this.quill.getBounds(this.linkRange));\n          return;\n        }\n      } else {\n        delete this.linkRange;\n      }\n\n      this.hide();\n    });\n  }\n\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n\n}\n\nSnowTooltip.TEMPLATE = ['<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-action\"></a>', '<a class=\"ql-remove\"></a>'].join('');\n\nclass SnowTheme extends _base__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n\n  extendToolbar(toolbar) {\n    toolbar.container.classList.add('ql-snow');\n    this.buildButtons(toolbar.container.querySelectorAll('button'), _ui_icons__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n    this.buildPickers(toolbar.container.querySelectorAll('select'), _ui_icons__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n    this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n\n    if (toolbar.container.querySelector('.ql-link')) {\n      this.quill.keyboard.addBinding({\n        key: 'k',\n        shortKey: true\n      }, (range, context) => {\n        toolbar.handlers.link.call(toolbar, !context.format.link);\n      });\n    }\n  }\n\n}\n\nSnowTheme.DEFAULTS = lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()({}, _base__WEBPACK_IMPORTED_MODULE_2__[\"default\"].DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n\n            if (/^\\S+@\\S+\\.\\S+$/.test(preview) && preview.indexOf('mailto:') !== 0) {\n              preview = \"mailto:\".concat(preview);\n            }\n\n            const {\n              tooltip\n            } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false);\n          }\n        }\n\n      }\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (SnowTheme);\n\n//# sourceURL=webpack://Quill/./themes/snow.js?")},"./ui/color-picker.js":function uiColorPickerJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _picker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./picker */ \"./ui/picker.js\");\n\n\nclass ColorPicker extends _picker__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(select, label) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).slice(0, 7).forEach(item => {\n      item.classList.add('ql-primary');\n    });\n  }\n\n  buildItem(option) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n\n  selectItem(item, trigger) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ColorPicker);\n\n//# sourceURL=webpack://Quill/./ui/color-picker.js?")},"./ui/icon-picker.js":function uiIconPickerJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _picker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./picker */ \"./ui/picker.js\");\n\n\nclass IconPicker extends _picker__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(select, icons) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(item => {\n      item.innerHTML = icons[item.getAttribute('data-value') || ''];\n    });\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n\n  selectItem(target, trigger) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    if (this.label.innerHTML === item.innerHTML) return;\n    this.label.innerHTML = item.innerHTML;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (IconPicker);\n\n//# sourceURL=webpack://Quill/./ui/icon-picker.js?")},"./ui/icons.js":function uiIconsJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _assets_icons_align_left_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets/icons/align-left.svg */ "./assets/icons/align-left.svg");\n/* harmony import */ var _assets_icons_align_left_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_align_left_svg__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _assets_icons_align_center_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/icons/align-center.svg */ "./assets/icons/align-center.svg");\n/* harmony import */ var _assets_icons_align_center_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_align_center_svg__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _assets_icons_align_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../assets/icons/align-right.svg */ "./assets/icons/align-right.svg");\n/* harmony import */ var _assets_icons_align_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_align_right_svg__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _assets_icons_align_justify_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../assets/icons/align-justify.svg */ "./assets/icons/align-justify.svg");\n/* harmony import */ var _assets_icons_align_justify_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_align_justify_svg__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _assets_icons_background_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../assets/icons/background.svg */ "./assets/icons/background.svg");\n/* harmony import */ var _assets_icons_background_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_background_svg__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _assets_icons_blockquote_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../assets/icons/blockquote.svg */ "./assets/icons/blockquote.svg");\n/* harmony import */ var _assets_icons_blockquote_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_blockquote_svg__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _assets_icons_bold_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../assets/icons/bold.svg */ "./assets/icons/bold.svg");\n/* harmony import */ var _assets_icons_bold_svg__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_bold_svg__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _assets_icons_clean_svg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../assets/icons/clean.svg */ "./assets/icons/clean.svg");\n/* harmony import */ var _assets_icons_clean_svg__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_clean_svg__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _assets_icons_code_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../assets/icons/code.svg */ "./assets/icons/code.svg");\n/* harmony import */ var _assets_icons_code_svg__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_code_svg__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _assets_icons_color_svg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../assets/icons/color.svg */ "./assets/icons/color.svg");\n/* harmony import */ var _assets_icons_color_svg__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_color_svg__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _assets_icons_direction_ltr_svg__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../assets/icons/direction-ltr.svg */ "./assets/icons/direction-ltr.svg");\n/* harmony import */ var _assets_icons_direction_ltr_svg__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_direction_ltr_svg__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _assets_icons_direction_rtl_svg__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../assets/icons/direction-rtl.svg */ "./assets/icons/direction-rtl.svg");\n/* harmony import */ var _assets_icons_direction_rtl_svg__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_direction_rtl_svg__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _assets_icons_formula_svg__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../assets/icons/formula.svg */ "./assets/icons/formula.svg");\n/* harmony import */ var _assets_icons_formula_svg__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_formula_svg__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _assets_icons_header_svg__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../assets/icons/header.svg */ "./assets/icons/header.svg");\n/* harmony import */ var _assets_icons_header_svg__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_header_svg__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _assets_icons_header_2_svg__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../assets/icons/header-2.svg */ "./assets/icons/header-2.svg");\n/* harmony import */ var _assets_icons_header_2_svg__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_header_2_svg__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _assets_icons_italic_svg__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../assets/icons/italic.svg */ "./assets/icons/italic.svg");\n/* harmony import */ var _assets_icons_italic_svg__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_italic_svg__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _assets_icons_image_svg__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../assets/icons/image.svg */ "./assets/icons/image.svg");\n/* harmony import */ var _assets_icons_image_svg__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_image_svg__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _assets_icons_indent_svg__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../assets/icons/indent.svg */ "./assets/icons/indent.svg");\n/* harmony import */ var _assets_icons_indent_svg__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_indent_svg__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _assets_icons_outdent_svg__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../assets/icons/outdent.svg */ "./assets/icons/outdent.svg");\n/* harmony import */ var _assets_icons_outdent_svg__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_outdent_svg__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _assets_icons_link_svg__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../assets/icons/link.svg */ "./assets/icons/link.svg");\n/* harmony import */ var _assets_icons_link_svg__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_link_svg__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _assets_icons_list_bullet_svg__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../assets/icons/list-bullet.svg */ "./assets/icons/list-bullet.svg");\n/* harmony import */ var _assets_icons_list_bullet_svg__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_list_bullet_svg__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var _assets_icons_list_check_svg__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../assets/icons/list-check.svg */ "./assets/icons/list-check.svg");\n/* harmony import */ var _assets_icons_list_check_svg__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_list_check_svg__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var _assets_icons_list_ordered_svg__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../assets/icons/list-ordered.svg */ "./assets/icons/list-ordered.svg");\n/* harmony import */ var _assets_icons_list_ordered_svg__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_list_ordered_svg__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var _assets_icons_subscript_svg__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../assets/icons/subscript.svg */ "./assets/icons/subscript.svg");\n/* harmony import */ var _assets_icons_subscript_svg__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_subscript_svg__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var _assets_icons_superscript_svg__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../assets/icons/superscript.svg */ "./assets/icons/superscript.svg");\n/* harmony import */ var _assets_icons_superscript_svg__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_superscript_svg__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _assets_icons_strike_svg__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../assets/icons/strike.svg */ "./assets/icons/strike.svg");\n/* harmony import */ var _assets_icons_strike_svg__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_strike_svg__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var _assets_icons_table_svg__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../assets/icons/table.svg */ "./assets/icons/table.svg");\n/* harmony import */ var _assets_icons_table_svg__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_table_svg__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var _assets_icons_underline_svg__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../assets/icons/underline.svg */ "./assets/icons/underline.svg");\n/* harmony import */ var _assets_icons_underline_svg__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_underline_svg__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony import */ var _assets_icons_video_svg__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../assets/icons/video.svg */ "./assets/icons/video.svg");\n/* harmony import */ var _assets_icons_video_svg__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_video_svg__WEBPACK_IMPORTED_MODULE_28__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__["default"] = ({\n  align: {\n    \'\': _assets_icons_align_left_svg__WEBPACK_IMPORTED_MODULE_0___default.a,\n    center: _assets_icons_align_center_svg__WEBPACK_IMPORTED_MODULE_1___default.a,\n    right: _assets_icons_align_right_svg__WEBPACK_IMPORTED_MODULE_2___default.a,\n    justify: _assets_icons_align_justify_svg__WEBPACK_IMPORTED_MODULE_3___default.a\n  },\n  background: _assets_icons_background_svg__WEBPACK_IMPORTED_MODULE_4___default.a,\n  blockquote: _assets_icons_blockquote_svg__WEBPACK_IMPORTED_MODULE_5___default.a,\n  bold: _assets_icons_bold_svg__WEBPACK_IMPORTED_MODULE_6___default.a,\n  clean: _assets_icons_clean_svg__WEBPACK_IMPORTED_MODULE_7___default.a,\n  code: _assets_icons_code_svg__WEBPACK_IMPORTED_MODULE_8___default.a,\n  \'code-block\': _assets_icons_code_svg__WEBPACK_IMPORTED_MODULE_8___default.a,\n  color: _assets_icons_color_svg__WEBPACK_IMPORTED_MODULE_9___default.a,\n  direction: {\n    \'\': _assets_icons_direction_ltr_svg__WEBPACK_IMPORTED_MODULE_10___default.a,\n    rtl: _assets_icons_direction_rtl_svg__WEBPACK_IMPORTED_MODULE_11___default.a\n  },\n  formula: _assets_icons_formula_svg__WEBPACK_IMPORTED_MODULE_12___default.a,\n  header: {\n    \'1\': _assets_icons_header_svg__WEBPACK_IMPORTED_MODULE_13___default.a,\n    \'2\': _assets_icons_header_2_svg__WEBPACK_IMPORTED_MODULE_14___default.a\n  },\n  italic: _assets_icons_italic_svg__WEBPACK_IMPORTED_MODULE_15___default.a,\n  image: _assets_icons_image_svg__WEBPACK_IMPORTED_MODULE_16___default.a,\n  indent: {\n    \'+1\': _assets_icons_indent_svg__WEBPACK_IMPORTED_MODULE_17___default.a,\n    \'-1\': _assets_icons_outdent_svg__WEBPACK_IMPORTED_MODULE_18___default.a\n  },\n  link: _assets_icons_link_svg__WEBPACK_IMPORTED_MODULE_19___default.a,\n  list: {\n    bullet: _assets_icons_list_bullet_svg__WEBPACK_IMPORTED_MODULE_20___default.a,\n    check: _assets_icons_list_check_svg__WEBPACK_IMPORTED_MODULE_21___default.a,\n    ordered: _assets_icons_list_ordered_svg__WEBPACK_IMPORTED_MODULE_22___default.a\n  },\n  script: {\n    sub: _assets_icons_subscript_svg__WEBPACK_IMPORTED_MODULE_23___default.a,\n    super: _assets_icons_superscript_svg__WEBPACK_IMPORTED_MODULE_24___default.a\n  },\n  strike: _assets_icons_strike_svg__WEBPACK_IMPORTED_MODULE_25___default.a,\n  table: _assets_icons_table_svg__WEBPACK_IMPORTED_MODULE_26___default.a,\n  underline: _assets_icons_underline_svg__WEBPACK_IMPORTED_MODULE_27___default.a,\n  video: _assets_icons_video_svg__WEBPACK_IMPORTED_MODULE_28___default.a\n});\n\n//# sourceURL=webpack://Quill/./ui/icons.js?')},"./ui/picker.js":function uiPickerJs(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _assets_icons_dropdown_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets/icons/dropdown.svg */ \"./assets/icons/dropdown.svg\");\n/* harmony import */ var _assets_icons_dropdown_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_assets_icons_dropdown_svg__WEBPACK_IMPORTED_MODULE_0__);\n\nlet optionsCounter = 0;\n\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(attribute, !(element.getAttribute(attribute) === 'true'));\n}\n\nclass Picker {\n  constructor(select) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    this.select.parentNode.insertBefore(this.container, this.select);\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded'); // Toggle aria-expanded and aria-hidden to make the picker accessible\n\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n\n  buildItem(option) {\n    const item = document.createElement('span');\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n\n    if (option.hasAttribute('value')) {\n      item.setAttribute('data-value', option.getAttribute('value'));\n    }\n\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n\n        default:\n      }\n    });\n    return item;\n  }\n\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = _assets_icons_dropdown_svg__WEBPACK_IMPORTED_MODULE_0___default.a;\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options'); // Don't want screen readers to read this until options are visible\n\n    options.setAttribute('aria-hidden', 'true');\n    options.tabIndex = '-1'; // Need a unique id for aria-controls\n\n    options.id = \"ql-picker-options-\".concat(optionsCounter);\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n    this.options = options;\n    Array.from(this.select.options).forEach(option => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n\n  buildPicker() {\n    Array.from(this.select.attributes).forEach(item => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close(); // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n\n    setTimeout(() => this.label.focus(), 1);\n  }\n\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n\n  selectItem(item, trigger = false) {\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(item);\n\n    if (item.hasAttribute('data-value')) {\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n\n    if (item.hasAttribute('data-label')) {\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n\n  update() {\n    let option;\n\n    if (this.select.selectedIndex > -1) {\n      const item = this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n      option = this.select.options[this.select.selectedIndex];\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n\n    const isActive = option != null && option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Picker);\n\n//# sourceURL=webpack://Quill/./ui/picker.js?")},"./ui/tooltip.js":function uiTooltipJs(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\nclass Tooltip {\n  constructor(quill, boundsContainer) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer(\'ql-tooltip\');\n    this.root.innerHTML = this.constructor.TEMPLATE;\n\n    if (this.quill.root === this.quill.scrollingContainer) {\n      this.quill.root.addEventListener(\'scroll\', () => {\n        this.root.style.marginTop = "".concat(-1 * this.quill.root.scrollTop, "px");\n      });\n    }\n\n    this.hide();\n  }\n\n  hide() {\n    this.root.classList.add(\'ql-hidden\');\n  }\n\n  position(reference) {\n    const left = reference.left + reference.width / 2 - this.root.offsetWidth / 2; // root.scrollTop should be 0 if scrollContainer !== root\n\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = "".concat(left, "px");\n    this.root.style.top = "".concat(top, "px");\n    this.root.classList.remove(\'ql-flip\');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = "".concat(left + shift, "px");\n    }\n\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = "".concat(left + shift, "px");\n    }\n\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = "".concat(top - verticalShift, "px");\n      this.root.classList.add(\'ql-flip\');\n    }\n\n    return shift;\n  }\n\n  show() {\n    this.root.classList.remove(\'ql-editing\');\n    this.root.classList.remove(\'ql-hidden\');\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["default"] = (Tooltip);\n\n//# sourceURL=webpack://Quill/./ui/tooltip.js?')},0:function _(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! ./quill.js */"./quill.js");\n\n\n//# sourceURL=webpack://Quill/multi_./quill.js?')}}).default},module.exports=factory()},myrl:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("TQyE"),i=(n("Cupj"),n("EM62")),a=n("ZTXN"),o=n("C05f"),s=n("6Oco"),c=n("nsO7"),l=["singleColorPickerSection"],u=function(){function e(e,t){this.resolver=e,this.injector=t,this.currentColorPickerComponents={},this.currentDataItemIds=[],this.componentRefreshRequired=!1,this.colorPickerSubscriptions=[],this._change=new a.a,this.valueSource=new o.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){var t=e.map((function(e){return e.id}));this.currentDataItemIds.length>0?Object(c.isEqual)(this.currentDataItemIds.sort(),t.sort())?this.componentRefreshRequired=!1:(this.componentRefreshRequired=!0,this.currentDataItemIds=t):(this.currentDataItemIds=t,this.componentRefreshRequired=!0),this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){var e=this;this.componentRefreshRequired?(this.currentColorPickerComponents={},this.colorPickerSubscriptions.forEach((function(e){e.unsubscribe()})),this.colorPickerSubscriptions=[],this.singleColorPickerSection.clear(),this._data.forEach((function(t){var n=e.getColorPicker(t);n.instance.apply(),n.changeDetectorRef.markForCheck();var r=n.instance.change.subscribe((function(n){e._change.next({item:t,change:n})}));e.colorPickerSubscriptions.push(r)}))):this._data.forEach((function(t){e.getColorPicker(t).instance.apply()}))},e.prototype.applyAnimated=function(){return this.apply(),Object(s.b)()},e.prototype.createColorPicker=function(e){var t=this.resolver.resolveComponentFactory(r.a);return this.singleColorPickerSection.createComponent(t)},e.prototype.getColorPicker=function(e){this.currentColorPickerComponents[e.id]||(this.currentColorPickerComponents[e.id]=this.createColorPicker(e.id));var t=this.currentColorPickerComponents[e.id];t.instance.setProperties({label:e.label});var n={value:e.style.fillColor?e.style.fillColor:e.style.lineColor,params:void 0};return e.id.includes("diff")&&(n.params={isDiffColor:!0}),t.instance.setData(n),t},e.\u0275fac=function(t){return new(t||e)(i.gc(i.m),i.gc(i.C))},e.\u0275cmp=i.ac({type:e,selectors:[["sidebar-style"]],viewQuery:function(e,t){var n;(1&e&&i.Xc(l,!0,i.hb),2&e)&&(i.Mc(n=i.vc())&&(t.singleColorPickerSection=n.first))},decls:2,vars:0,consts:[["singleColorPickerSection",""]],template:function(e,t){1&e&&i.hc(0,"div",null,0)},encapsulation:2,changeDetection:0}),e}()},nT0V:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));var r=n("hX56"),i=n("3+4Q"),a=n("qMyy"),o=n("5xGT"),s=n("TLy2"),c=n("J+dc"),l=n("YtkY"),u=n("8j5Y"),d=n("xVbo"),p=n("4y1S"),h=n("NNJu"),f=n("C05f"),m=n("ZTXN"),g=n("8lHc"),b=n("KTx3"),v=n("X0jn"),_=n("EM62"),y=n("2kYt"),O=n("rwb9"),x=n("pYIu"),E=n("TdEb"),k=n("pVzg"),C=n("s2Ay"),w=n("Wrqg"),S=["textInput"];function I(e,t){if(1&e&&_.hc(0,"user-image",19),2&e){var n=_.yc();_.Dc("hasImage",n.commenter.hasImage)("imagePath",n.commenter.image)("userColor",n.commenter.displayColor)("userInitials",n.commenter.initial)("userRegistered",n.commenter.isRegistered)("userOnlineStatus",!0)}}function T(e,t){if(1&e&&_.hc(0,"user-image",20),2&e){var n=_.yc();_.Dc("hasImage",n.threadCommentor.hasImage)("imagePath",n.threadCommentor.image)("userColor",n.threadCommentor.displayColor)("userInitials",n.threadCommentor.initial)("userRegistered",n.threadCommentor.isRegistered)("userOnlineStatus",!0)}}function A(e,t){1&e&&_.hc(0,"div",21)}function P(e,t){if(1&e&&(_.mc(0,"span",22),_.fd(1),_.lc()),2&e){var n=_.yc();_.Sb(1),_.gd(n.commenter.fullName)}}function M(e,t){if(1&e&&(_.xc(),_.wc(),_.mc(0,"simple-dropdown-item",30),_.uc("click",(function(){return t.$implicit.onClick()})),_.mc(1,"span",31),_.fd(2),_.lc(),_.lc()),2&e){var n=t.$implicit;_.Sb(2),_.gd(n.label)}}var D=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0,multiselectable:!1}};function j(e,t){if(1&e&&(_.mc(0,"div",23),_.mc(1,"abs-dropdown",24,25),_.mc(3,"simple-dropdown-button",26),_.mc(4,"a"),_.xc(),_.mc(5,"svg",27),_.hc(6,"use",28),_.lc(),_.lc(),_.lc(),_.dd(7,M,3,1,"simple-dropdown-item",29),_.zc(8,"async"),_.lc(),_.lc()),2&e){var n=_.yc();_.Sb(1),_.Dc("settings",_.Hc(4,D)),_.Sb(6),_.Dc("ngForOf",_.Ac(8,2,n.moreOpts))}}var R=function(e){return{threadCount:e}};function L(e,t){if(1&e&&(_.mc(0,"label",32),_.xc(),_.mc(1,"svg",33),_.hc(2,"use",34),_.lc(),_.wc(),_.hc(3,"span",35),_.lc()),2&e){var n=_.yc();_.Sb(3),_.Dc("translate","COMMENTS.LABELS.NUM_REPLIES")("translateParams",_.Ic(2,R,n.threadCount))}}var N=function(e){return{userName:e}};function B(e,t){if(1&e&&(_.mc(0,"div"),_.mc(1,"label",36),_.fd(2,"COMMENTS.LABELS.RESOLVED_BY"),_.lc(),_.lc()),2&e){var n=_.yc();_.Sb(1),_.Dc("translate","COMMENTS.LABELS.RESOLVED_BY")("translateParams",_.Ic(2,N,n.resolvedCommentor.fullName))}}function U(e,t){if(1&e&&(_.mc(0,"p",37),_.fd(1),_.lc()),2&e){var n=_.yc();_.Yb("resolved-text",n.resolvedCommentor),_.Sb(1),_.gd(n.comment.comment)}}function F(e,t){1&e&&(_.mc(0,"label",38),_.mc(1,"i",31),_.fd(2,"COMMENTS.LABELS.DELETED_COMMENT"),_.lc(),_.lc())}function q(e,t){1&e&&(_.mc(0,"label",39),_.fd(1,"COMMENTS.LABELS.EDITED"),_.lc())}var W=function(){return["Enter"]};function H(e,t){if(1&e){var n=_.nc();_.mc(0,"div",40),_.mc(1,"text-input",41,42),_.uc("submit",(function(e){return _.Qc(n),_.yc().updateComment(e)})),_.zc(3,"translate"),_.lc(),_.lc()}if(2&e){var r=_.yc();_.Sb(1),_.Ec("placeholder",_.Ac(3,6,"PLACEHOLDERS.EDIT_COMMENT")),_.Dc("value",r.comment.comment)("clearOnSubmit",!0)("submitOnCode",_.Hc(8,W))("autoFocus",!0)("multiLined",!0)}}function K(e,t){if(1&e){var n=_.nc();_.mc(0,"a",46),_.uc("click",(function(e){return _.Qc(n),_.yc(2).replyClicked.next(e)})),_.fd(1,"Reply"),_.lc()}}function z(e,t){if(1&e){var n=_.nc();_.mc(0,"div",43),_.mc(1,"a",44),_.uc("click",(function(){return _.Qc(n),_.yc().toggleEditCommentMode(!0)})),_.fd(2,"COMMENTS.LABELS.EDIT"),_.lc(),_.mc(3,"a",44),_.uc("click",(function(){return _.Qc(n),_.yc().deleteComment()})),_.fd(4,"COMMENTS.LABELS.DELETE"),_.lc(),_.dd(5,K,2,0,"a",45),_.lc()}if(2&e){var r=_.yc();_.Sb(5),_.Dc("ngIf",r.showReplayControl)}}function V(e,t){if(1&e){var n=_.nc();_.mc(0,"a",46),_.uc("click",(function(e){return _.Qc(n),_.yc(2).replyClicked.next(e)})),_.fd(1,"Reply"),_.lc()}}function G(e,t){if(1&e){var n=_.nc();_.mc(0,"div",43),_.mc(1,"a",44),_.uc("click",(function(){return _.Qc(n),_.yc().updateComment()})),_.fd(2,"COMMENTS.LABELS.UPDATE"),_.lc(),_.mc(3,"a",44),_.uc("click",(function(){return _.Qc(n),_.yc().toggleEditCommentMode(!1)})),_.fd(4,"COMMENTS.LABELS.CANCEL"),_.lc(),_.dd(5,V,2,0,"a",45),_.lc()}if(2&e){var r=_.yc();_.Sb(5),_.Dc("ngIf",r.showReplayControl)}}var Y=function(){function e(e,t,n,r){var i=this;this.datastore=e,this.commandService=t,this.state=n,this.userLocator=r,this.threadCount=1,this.showControls=!1,this.showReplayControl=!1,this.isEditMode=new f.a(!1),this.commentTime=new f.a(""),this.moreOpts=new f.a([]),this.replyClicked=new m.a,this.itemClicked=new m.a,this.timeRefreshInterval=6e4,this.subs=[],this.subs.push(this.getCancelEditInteraction().subscribe((function(){return i.isEditMode.next(!1)}))),this.setMoreOpts()}return Object.defineProperty(e.prototype,"isNew",{get:function(){return this.comment.isNew(this.state.get("CurrentUser"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDeleted",{get:function(){return this.comment.isDeleted()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEdited",{get:function(){return this.comment.isEdited()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableBasicControls",{get:function(){return this.showControls&&this.commenter&&this.commenter.id===this.state.get("CurrentUser")&&!this.isDeleted&&!this.isEditMode.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableEditControls",{get:function(){return this.showControls&&this.commenter&&this.commenter.id===this.state.get("CurrentUser")&&this.isEditMode.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showResolveButton",{get:function(){return!this.comment.parentId&&!this.comment.resolved},enumerable:!1,configurable:!0}),e.prototype.setMoreOpts=function(){var e=this;this.moreOpts.next([{label:"COMMENTS.LABELS.RESOLVE_THREAD",onClick:function(){return e.resolveComment()}}])},e.prototype.ngOnInit=function(){var e=this,t=this.state.get("CurrentDiagram");this.subs.push(Object(g.a)(0,this.timeRefreshInterval).pipe(Object(s.a)((function(){return e.datastore.findOne(i.a,{diagramId:t,id:e.comment.id}).pipe(Object(c.a)(1),Object(l.a)((function(t){return e.commentTime.next(t.getTime())})))}))).subscribe())},e.prototype.deleteComment=function(){o.Jb.track("canvas.comment.existing.delete"),this.commandService.dispatch(a.a.deleteComment,{commentId:this.comment.id})},e.prototype.updateComment=function(e){this.isEditMode.next(!1),e||(e=this.textInput.text),e&&0!==e.trim().length?this.commandService.dispatch(a.a.editComment,{commentId:this.comment.id,diagramId:this.comment.diagramId,comment:e}):this.isEditMode.next(!1)},e.prototype.resolveComment=function(){var e=this;o.Jb.track("canvas.comment.resolve-thread.click"),this.userLocator.getUserData().pipe(Object(c.a)(1),Object(u.a)((function(t){e.commandService.dispatch(a.a.resolveComment,{commentId:e.comment.id,userId:t.id})}))).subscribe()},e.prototype.toggleEditCommentMode=function(e){this.isEditMode.next(e),e&&o.Jb.track("right.comment.existing.edit")},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getCancelEditInteraction=function(){var e=this;return Object(b.a)(window,"keydown").pipe(Object(d.a)((function(t){return t.keyCode===v.k.Escape&&e.isEditMode.value})))},e.\u0275fac=function(t){return new(t||e)(_.gc(r.b),_.gc(o.B),_.gc(o.Hb),_.gc(p.x))},e.\u0275cmp=_.ac({type:e,selectors:[["comment-thread-item"]],viewQuery:function(e,t){var n;(1&e&&_.kd(S,!0,h.s),2&e)&&(_.Mc(n=_.vc())&&(t.textInput=n.first))},inputs:{comment:"comment",commenter:"commenter",resolvedCommentor:"resolvedCommentor",threadCommentor:"threadCommentor",threadCount:"threadCount",showControls:"showControls",showReplayControl:"showReplayControl"},outputs:{replyClicked:"replyClicked",itemClicked:"itemClicked"},decls:25,vars:24,consts:[[1,"cti"],[1,"cti-header","fx-center-vertical",3,"click"],[1,"cti-user-img"],["class","cti-last-user-img","imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],["class","cti-prev-user-img","imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],["class","cti-new-comment-indicator",4,"ngIf"],[1,"cti-header-info","fx-flex-expand"],["class","commenter-user body",4,"ngIf"],["class","temp-resolve-menu",4,"ngIf"],[1,"cti-header-info-lbls"],["class","cti-header-count caption caption--sm",4,"ngIf"],[1,"cti-header-time","caption","caption--sm"],[1,"cti-content","fx-margin-top-5","fx-margin-bottom-5",3,"click"],[4,"ngIf"],["class","body cti-content-text",3,"resolved-text",4,"ngIf"],["class","caption caption--sm",4,"ngIf"],["class","caption caption--sm","translate","",4,"ngIf"],["class","cti-edit-comment",4,"ngIf"],["class","cti-buttons caption",4,"ngIf"],["imageSize","small",1,"cti-last-user-img",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"],["imageSize","small",1,"cti-prev-user-img",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"],[1,"cti-new-comment-indicator"],[1,"commenter-user","body"],[1,"temp-resolve-menu"],["direction","top","alignment","right",3,"settings"],["dropdown",""],["ddbutton",""],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["dditem","",3,"click",4,"ngFor","ngForOf"],["dditem","",3,"click"],["translate",""],[1,"cti-header-count","caption","caption--sm"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-enter"],[3,"translate","translateParams"],[1,"caption",3,"translate","translateParams"],[1,"body","cti-content-text"],[1,"caption","caption--sm"],["translate","",1,"caption","caption--sm"],[1,"cti-edit-comment"],[3,"placeholder","value","clearOnSubmit","submitOnCode","autoFocus","multiLined","submit"],["textInput",""],[1,"cti-buttons","caption"],["translate","",1,"primary",3,"click"],["class","primary",3,"click",4,"ngIf"],[1,"primary",3,"click"]],template:function(e,t){1&e&&(_.mc(0,"div",0),_.mc(1,"div",1),_.uc("click",(function(e){return t.itemClicked.next(e)})),_.mc(2,"div",2),_.dd(3,I,1,6,"user-image",3),_.dd(4,T,1,6,"user-image",4),_.dd(5,A,1,0,"div",5),_.lc(),_.mc(6,"div",6),_.mc(7,"div"),_.dd(8,P,2,1,"span",7),_.dd(9,j,9,5,"div",8),_.lc(),_.mc(10,"div",9),_.dd(11,L,4,4,"label",10),_.mc(12,"label",11),_.fd(13),_.zc(14,"async"),_.lc(),_.lc(),_.lc(),_.lc(),_.mc(15,"div",12),_.uc("click",(function(e){return t.itemClicked.next(e)})),_.dd(16,B,3,4,"div",13),_.dd(17,U,2,3,"p",14),_.zc(18,"async"),_.dd(19,F,3,0,"label",15),_.dd(20,q,2,0,"label",16),_.lc(),_.dd(21,H,4,9,"div",17),_.zc(22,"async"),_.dd(23,z,6,1,"div",18),_.dd(24,G,6,1,"div",18),_.lc()),2&e&&(_.Yb("new-comment",t.isNew),_.Sb(1),_.Yb("has-prev-user",t.threadCommentor),_.Sb(2),_.Dc("ngIf",t.commenter),_.Sb(1),_.Dc("ngIf",t.threadCommentor),_.Sb(1),_.Dc("ngIf",t.isNew),_.Sb(3),_.Dc("ngIf",t.commenter),_.Sb(1),_.Dc("ngIf",t.showResolveButton),_.Sb(2),_.Dc("ngIf",t.threadCount>1),_.Sb(2),_.gd(_.Ac(14,18,t.commentTime)),_.Sb(3),_.Dc("ngIf",t.resolvedCommentor),_.Sb(1),_.Dc("ngIf",!_.Ac(18,20,t.isEditMode)&&!t.isDeleted),_.Sb(2),_.Dc("ngIf",t.isDeleted),_.Sb(1),_.Dc("ngIf",t.isEdited&&!t.isDeleted),_.Sb(1),_.Dc("ngIf",_.Ac(22,22,t.isEditMode)),_.Sb(2),_.Dc("ngIf",t.enableBasicControls),_.Sb(1),_.Dc("ngIf",t.enableEditControls))},directives:[y.t,O.a,x.a,E.a,y.s,k.a,C.a,w.a],pipes:[y.b,C.d],styles:[".nu-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.cti[_ngcontent-%COMP%]{position:relative;padding:.75rem .5rem}.cti[_ngcontent-%COMP%]  label{color:#88a1aa}.new-comment[_ngcontent-%COMP%]{background:#fafafc!important;border-radius:6px}.cti-user-img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:.625rem;position:relative;margin-left:0}.cti-user-img[_ngcontent-%COMP%]   user-image[_ngcontent-%COMP%]{position:absolute}.cti-last-user-img[_ngcontent-%COMP%]{z-index:1;display:inline-block}.cti-prev-user-img[_ngcontent-%COMP%]{display:none;right:-15px}.cti-header.has-prev-user[_ngcontent-%COMP%]   .cti-prev-user-img[_ngcontent-%COMP%]{display:inline-block}.cti-header.has-prev-user[_ngcontent-%COMP%]   .cti-header-info[_ngcontent-%COMP%]{padding-left:.625rem}.commenter-user[_ngcontent-%COMP%]{color:#354b53!important}.cti-header-info-lbls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1rem}.cti-header-info-lbls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-of-type{margin-left:0}.cti-header-info-lbls[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{height:12px;width:12px}.cti-buttons[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-right:.625rem}.cti-header-count[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{vertical-align:middle}.cti-new-comment-indicator[_ngcontent-%COMP%]{width:8px;height:8px;background-color:#dd524c;position:absolute;z-index:3;border-radius:100%}.cti-content-commenter-name[_ngcontent-%COMP%], .cti-content-text[_ngcontent-%COMP%]{word-wrap:break-word}.cti-content-text[_ngcontent-%COMP%]{color:#354b53;white-space:pre-line}.resolved-text[_ngcontent-%COMP%]{color:#88a1aa}.temp-resolve-menu[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.temp-resolve-menu[_ngcontent-%COMP%]   .menu-content[_ngcontent-%COMP%]{display:none;position:absolute;z-index:inherit;top:25px;right:0;width:128px;border:1px solid rgba(149,168,175,.5);padding:1rem;border-radius:4px;background:#fff}.temp-resolve-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]{display:inline-block}.cti-edit-comment[_ngcontent-%COMP%]{margin-bottom:.25rem}"],changeDetection:0}),e}()},nwI5:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n("D57K"),i=n("5xGT"),a=n("NNJu"),o=n("X0jn"),s=n("KOB3"),c=n.n(s),l=n("C05f"),u=n("g6G6"),d=n("ROBh"),p=n("47ST"),h=n("YtkY"),f=n("wqq/"),m=n("8j5Y"),g=n("TLy2"),b=n("J+dc"),v=n("4e/d"),_=n("xYNC"),y=n("Fuvo"),O=(n("unyx"),n("EM62")),x=n("s2Ay"),E=n("k/7B"),k=n("r7/9"),C=n("2kYt"),w=n("crdX"),S=n("pYIu"),I=n("XwbL"),T=n("uXwy"),A=n("/ege"),P=["window"],M=["windowInner"],D=["mappingsSelector"],j=["mappingsContainer"];function R(e,t){if(1&e&&O.hc(0,"sidebar-list-dropdown-item",38),2&e){var n=t.$implicit;O.Dc("item",n)}}var L=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!1}};function N(e,t){if(1&e&&(O.mc(0,"abs-dropdown",34,35),O.hc(2,"sidebar-dropdown-button",36),O.dd(3,R,1,1,"sidebar-list-dropdown-item",37),O.lc()),2&e){var n=t.ngIf;O.Dc("settings",O.Hc(4,L))("autoPosition",!1),O.Sb(2),O.Dc("items",n),O.Sb(1),O.Dc("ngForOf",n)}}function B(e,t){if(1&e&&(O.mc(0,"tr"),O.mc(1,"td",31),O.fd(2),O.lc(),O.mc(3,"td",31),O.fd(4),O.lc(),O.mc(5,"td",32),O.dd(6,N,4,5,"abs-dropdown",33),O.zc(7,"async"),O.lc(),O.lc()),2&e){var n=t.$implicit,r=t.index,i=O.yc(2);O.Sb(2),O.gd(n),O.Sb(2),O.gd(i.sampleValues[r]),O.Sb(2),O.Dc("ngIf",O.Ac(7,3,i.getMappingOptions(r)))}}function U(e,t){if(1&e&&(O.mc(0,"table",41),O.mc(1,"thead"),O.mc(2,"tr"),O.mc(3,"th",42),O.fd(4,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_ROW"),O.lc(),O.mc(5,"th",42),O.fd(6,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_CSV_FIELD"),O.lc(),O.mc(7,"th",42),O.fd(8,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_VALUE"),O.lc(),O.mc(9,"th",42),O.fd(10,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_PARSED_VALUE"),O.lc(),O.mc(11,"th",42),O.fd(12,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_ERROR"),O.lc(),O.lc(),O.lc(),O.mc(13,"tbody"),O.mc(14,"tr"),O.mc(15,"td"),O.fd(16),O.lc(),O.mc(17,"td"),O.fd(18),O.lc(),O.mc(19,"td"),O.fd(20),O.lc(),O.mc(21,"td"),O.fd(22),O.lc(),O.mc(23,"td"),O.fd(24),O.lc(),O.lc(),O.lc(),O.lc()),2&e){var n=t.ngLet,r=O.yc(3);O.Sb(16),O.gd(n[0].rowIndex+1),O.Sb(2),O.gd(r.csvFields[n[0].columnIndex]),O.Sb(2),O.gd(n[0].value),O.Sb(2),O.gd(r.displayParsedValue(n[0].parsedValue)),O.Sb(2),O.gd(n[0].error.message)}}function F(e,t){if(1&e&&(O.mc(0,"div",39),O.mc(1,"span",9),O.fd(2," CSV_DATA_IMPORT.MAPPINGS_ERROR.MESSAGE "),O.lc(),O.dd(3,U,25,5,"table",40),O.zc(4,"async"),O.lc()),2&e){var n=O.yc(2);O.Sb(3),O.Dc("ngLet",O.Ac(4,1,n.mappingErrors))}}function q(e,t){if(1&e){var n=O.nc();O.mc(0,"div"),O.mc(1,"table",23),O.mc(2,"thead"),O.mc(3,"tr"),O.mc(4,"th",24),O.fd(5,"CSV_DATA_IMPORT.MAPPINGS.COLUMN"),O.lc(),O.mc(6,"th",24),O.fd(7,"CSV_DATA_IMPORT.MAPPINGS.SAMPLE_VALUE"),O.lc(),O.mc(8,"th",25),O.fd(9,"CSV_DATA_IMPORT.MAPPINGS.DATA_ITEM"),O.lc(),O.lc(),O.lc(),O.lc(),O.mc(10,"perfect-scrollbar",26,27),O.zc(12,"async"),O.mc(13,"table",15),O.mc(14,"tbody"),O.dd(15,B,8,5,"tr",28),O.lc(),O.lc(),O.lc(),O.dd(16,F,5,3,"div",29),O.zc(17,"async"),O.mc(18,"input",30),O.uc("click",(function(){O.Qc(n);var e=O.yc();return e.ignoreErrors.next(!e.ignoreErrors.value)})),O.zc(19,"async"),O.lc(),O.mc(20,"label"),O.fd(21,"Ignore Errors"),O.lc(),O.lc()}if(2&e){var r=O.yc();O.Sb(10),O.Yb("has-errors",O.Ac(12,5,r.hasMappingErrors)),O.Sb(5),O.Dc("ngForOf",r.csvFields),O.Sb(1),O.Dc("ngIf",O.Ac(17,7,r.hasMappingErrors)),O.Sb(2),O.Dc("checked",O.Ac(19,9,r.ignoreErrors))}}function W(e,t){if(1&e){var n=O.nc();O.mc(0,"div",43),O.mc(1,"button",44),O.uc("click",(function(){return O.Qc(n),O.yc().importCSVData()})),O.zc(2,"async"),O.fd(3,"CSV_DATA_IMPORT.IMPORT_BUTTON"),O.lc(),O.lc()}if(2&e){var r=O.yc();O.Sb(1),O.Dc("disabled",!1===O.Ac(2,1,r.canImport))}}var H=function(){function e(e,t,n,r){var i;this.modalController=e,this.csvDataImporter=t,this.translate=n,this.notifierController=r,this.selectedDb=new l.a(null),this.selectedEntityType=new l.a(null),this.csvFileSelected=new l.a(!1),this.ignoreErrors=new l.a(!1),this.importing=new l.a(!1),this.hasMappingErrors=new l.a(!1),this.mappingErrors=new l.a([]),this.canImport=new l.a(!1),this.subs=[],this.selectedMappings=[],this.csvData=[],this.dataTypes=((i={})[o.c.NUMBER]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.NUMBER.LABEL"),i[o.c.STRING]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.STRING.LABEL"),i[o.c.STRING_HTML]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.STRING_HTML.LABEL"),i[o.c.BINARY]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.CHECKBOX.LABEL"),i[o.c.OPTION_LIST]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.SINGLE_SELECT_COMBO.LABEL"),i[o.c.TAGS]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.TAGS.LABEL"),i[o.c.DATE]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.DATE.LABEL"),i),this.appendedDropdowns=[]}return e.prototype.ngOnInit=function(){var e=this;this.importingInto&&this.selectedDb.next(this.importingInto),this.dataItemOptions=this.selectedEntityType.pipe(Object(h.a)((function(t){if(t){var n=Object.values(t.dataItems);return[{id:"__IGNORE__",label:e.translate.instant("CSV_DATA_IMPORT.LABELS.IGNORE"),buttonLabel:e.translate.instant("CSV_DATA_IMPORT.LABELS.IGNORE"),selected:!0}].concat(n.filter((function(t){return e.dataTypes[t.type]&&(t.label||t.primaryTextBound)})).map((function(t){var n=t.primaryTextBound?e.translate.instant("CSV_DATA_IMPORT.LABELS.PRIMARY_TEXT"):t.label+" ("+e.dataTypes[t.type]+")";return{id:t.id,label:n,buttonLabel:n,selected:!1}})))}return[]})),Object(f.a)(1))},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.selectedDb.subscribe((function(){return e.selectedEntityType.next(null)})),this.selectedEntityType.subscribe((function(){return e.selectedMappings.forEach((function(t,n){return e.selectedMappings[n]="__IGNORE__"}))})),this.mappingsSelector.changes.pipe(Object(m.a)((function(){e.mappingsSelector.map((function(t){e.appendMappingsSelectorToBody(t)}))})),Object(g.a)((function(){return u.a.apply(void 0,Object(r.j)(e.mappingsSelector.map((function(t,n){return t.changed.pipe(Object(m.a)((function(t){var i=Object(r.h)(t,1)[0];e.selectedMappings[n]=i,e.canImport.next(e.selectedMappings.filter((function(e){return"__IGNORE__"!==e})).length>0)})))}))))}))).subscribe(),this.listenToScroll())},e.prototype.onFileChange=function(e){var t=e.target;if(t.files&&t.files.length){var n=t.files[0];this.readCsvFile(n)}},e.prototype.dropHandler=function(e){var t;e.preventDefault();var n=[];if(e.dataTransfer.items){for(var r=0;r<e.dataTransfer.items.length;r++)if("file"===e.dataTransfer.items[r].kind){var i=e.dataTransfer.items[r].getAsFile();n.push(i)}}else for(r=0;r<e.dataTransfer.files.length;r++)n.push(e.dataTransfer.files[r]);"csv"===(null===(t=n[0])||void 0===t?void 0:t.name.split(".").pop())&&this.readCsvFile(n[0])},e.prototype.dragOverHandler=function(e){e.preventDefault()},e.prototype.getMappingOptions=function(e){var t=this;return this.dataItemOptions.pipe(Object(h.a)((function(n){var i=t.selectedMappings[e];return n.map((function(e){return Object(r.a)(Object(r.a)({},e),{selected:e.id===i})}))})))},e.prototype.importCSVData=function(){var e=this;try{var t=this.ignoreErrors.value,n={mappings:[],eDefId:this.selectedEntityType.value.id,ignoreMappingErrors:t};this.selectedMappings.forEach((function(e,t){"__IGNORE__"!==e&&n.mappings.push({csvIndex:t,dataItemId:e})})),this.importing.next(!0),this.hasMappingErrors.next(!1),this.selectedDb.pipe(Object(b.a)(1),Object(m.a)((function(){return e.canImport.next(!1)})),Object(g.a)((function(t){return e.csvDataImporter.importData(t,e.csvData,n)})),Object(v.a)((function(e){return e instanceof y.a?Object(d.a)({entities:[],errors:e.errors}):Object(p.a)(e)})),Object(m.a)((function(n){var r=n.entities,i=n.errors;e.importing.next(!1),0===i.length||t&&r.length>0?(e.closeWindow.next(!0),e.showImportSuccessNotification(r.length),i.length>0&&e.showImportErrorsNotification()):(e.hasMappingErrors.next(!0),e.mappingErrors.next(i))}))).subscribe()}catch(r){}},e.prototype.displayParsedValue=function(e){return void 0===e?"undefined":Number.isNaN(e)||e instanceof Date?e.toString():JSON.stringify(e)},e.prototype.ngOnDestroy=function(){for(this.removeAppendedDropdowns();this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.readCsvFile=function(e){var t=this,n=new FileReader;n.readAsText(e),n.onload=function(){var e;t.csvData=c.a.parse(n.result,{skipEmptyLines:!0}).data,e=Object(r.h)(t.csvData,2),t.csvFields=e[0],t.sampleValues=e[1],t.selectedMappings=new Array(t.csvFields.length),t.selectedMappings.fill("__IGNORE__"),t.csvFileSelected.next(!0),t.showSidebar.next(!1)}},e.prototype.showImportSuccessNotification=function(e){var t={inputs:{description:this.translate.instant("CSV_DATA_IMPORT.NOTIFICATION.SUCCESS",{rowCount:e}),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("CSV_DATA_IMPORT",i.i,i.ib.Success,t)},e.prototype.showImportErrorsNotification=function(){var e={inputs:{description:this.translate.instant("CSV_DATA_IMPORT.NOTIFICATION.ERROR"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("CSV_DATA_IMPORT_ERROR",i.i,i.ib.Warning,e)},e.prototype.appendMappingsSelectorToBody=function(e){var t=this;e.dropdownContainer.addEventListener("click",(function(){t.removeAppendedDropdowns();var n=window.document.createElement("div");n.append(e.innerContainer),n.style.position="absolute";var r=n.getElementsByTagName("ul").item(0);r.style.width=e.dropdownContainer.offsetWidth+"px",r.style.maxWidth=e.dropdownContainer.offsetWidth+"px",t.appendedDropdowns.push(n),window.document.body.append(n);var i=function(e){var t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}}(e.dropdownContainer),a=i.top,o=i.left,s=t.perfectScroll.first.directiveRef.position(!0).y,c=0;"start"!==s&&"end"!==s&&(c=s),n.getBoundingClientRect().bottom>window.innerHeight?n.style.bottom=e.dropdownContainer.offsetHeight-35+c+"px":n.style.top=a+33-c+"px",n.style.left=o+"px"}))},e.prototype.removeAppendedDropdowns=function(){this.appendedDropdowns.forEach((function(e){e.remove()})),this.appendedDropdowns=[]},e.prototype.listenToScroll=function(){var e=this;return this.perfectScroll.changes.subscribe((function(){e.perfectScroll.first.psScrollY.pipe(Object(m.a)((function(t){e.removeAppendedDropdowns()}))).subscribe()}))},e.\u0275fac=function(t){return new(t||e)(O.gc(i.fb),O.gc(_.a),O.gc(x.e),O.gc(i.jb))},e.\u0275cmp=O.ac({type:e,selectors:[["csv-data-import-panel"]],viewQuery:function(e,t){var n;(1&e&&(O.kd(P,!0),O.kd(M,!0),O.kd(D,!0,a.b),O.kd(j,!0)),2&e)&&(O.Mc(n=O.vc())&&(t.container=n.first),O.Mc(n=O.vc())&&(t.containerInner=n.first),O.Mc(n=O.vc())&&(t.mappingsSelector=n),O.Mc(n=O.vc())&&(t.perfectScroll=n))},inputs:{importingInto:"importingInto",showSidebar:"showSidebar",closeWindow:"closeWindow"},decls:54,vars:36,consts:[[1,"csv-data-import-panel"],[1,"vertical-container","drop-zone",3,"drop","dragover"],["translate","",1,"nu2-heading-5"],["translate","",1,"nu2-body-small","fx-margin-bottom-15"],[1,"info-container","fx-margin-bottom-15"],[1,"info-heading"],["translate","",1,"nu2-heading-6","fx-margin-bottom-15"],["src","./assets/images/data-import/data-source.svg"],[1,"nu2-body-small"],["translate",""],[3,"innerHTML"],[1,"horizontal-container"],["translate","",1,"btn-small","btn-primary",3,"click"],["type","file","accept",".csv",1,"fx-hidden",3,"multiple","change"],["file",""],[2,"width","100%"],[2,"width","60%"],["translate","",1,"grey"],[2,"width","40%"],[3,"selectedDb","placeholderText","dbChanged"],[3,"selectedDb","selectedType","placeholderText","typeChanged"],[4,"ngIf"],["class","modal-window-footer",4,"ngIf"],[2,"width","100%","margin-top","20px"],["align","left","translate","",2,"width","30%"],["align","left","translate","",2,"width","40%"],[1,"mappings-container"],["mappingsContainer",""],[4,"ngFor","ngForOf"],["style","margin-top: 10px",4,"ngIf"],["type","checkbox",2,"margin","5px 10px",3,"checked","click"],["align","left",2,"width","30%"],["align","left",2,"width","40%"],["class","dropdown-item",3,"settings","autoPosition",4,"ngIf"],[1,"dropdown-item",3,"settings","autoPosition"],["mappingsSelector",""],["ddbutton","",3,"items"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"],[2,"margin-top","10px"],["style","width: 100%; margin-top: 10px;",4,"ngLet"],[2,"width","100%","margin-top","10px"],["align","left","translate",""],[1,"modal-window-footer"],["translate","",1,"btn-primary",3,"disabled","click"]],template:function(e,t){if(1&e){var n=O.nc();O.mc(0,"div",0),O.mc(1,"div",1),O.uc("drop",(function(e){return t.dropHandler(e)}))("dragover",(function(e){return t.dragOverHandler(e)})),O.zc(2,"async"),O.mc(3,"h1",2),O.fd(4,"CSV_DATA_IMPORT.HEADING.TITLE"),O.lc(),O.mc(5,"span",3),O.fd(6,"CSV_DATA_IMPORT.HEADING.SUB_TITLE"),O.lc(),O.mc(7,"div",4),O.mc(8,"div",5),O.mc(9,"h1",6),O.fd(10,"CSV_DATA_IMPORT.INFO.TITLE"),O.lc(),O.hc(11,"img",7),O.lc(),O.mc(12,"ul",8),O.mc(13,"li"),O.mc(14,"span",9),O.fd(15,"CSV_DATA_IMPORT.INFO.LIST_ITEM_1"),O.lc(),O.lc(),O.mc(16,"li"),O.hc(17,"span",10),O.zc(18,"translate"),O.lc(),O.mc(19,"li"),O.mc(20,"span",9),O.fd(21,"CSV_DATA_IMPORT.INFO.LIST_ITEM_3"),O.lc(),O.lc(),O.lc(),O.lc(),O.mc(22,"div",11),O.fd(23),O.zc(24,"translate"),O.mc(25,"button",12),O.uc("click",(function(){return O.Qc(n),O.Nc(28).click()})),O.fd(26," CSV_DATA_IMPORT.SELECT_CSV_FILE "),O.lc(),O.mc(27,"input",13,14),O.uc("change",(function(e){return t.onFileChange(e)})),O.lc(),O.lc(),O.lc(),O.mc(29,"div"),O.zc(30,"async"),O.mc(31,"table",15),O.mc(32,"tbody"),O.mc(33,"tr"),O.mc(34,"td",16),O.mc(35,"label",17),O.fd(36,"CSV_DATA_IMPORT.SELECT_DATABASE"),O.lc(),O.lc(),O.mc(37,"td",18),O.mc(38,"custom-database-selector",19),O.uc("dbChanged",(function(e){return t.selectedDb.next(e)})),O.zc(39,"async"),O.zc(40,"translate"),O.lc(),O.lc(),O.lc(),O.mc(41,"tr"),O.mc(42,"td"),O.mc(43,"label",17),O.fd(44,"CSV_DATA_IMPORT.SELECT_ENTITY_TYPE"),O.lc(),O.lc(),O.mc(45,"td"),O.mc(46,"entity-type-selector",20),O.uc("typeChanged",(function(e){return t.selectedEntityType.next(e)})),O.zc(47,"async"),O.zc(48,"async"),O.zc(49,"translate"),O.lc(),O.lc(),O.lc(),O.lc(),O.lc(),O.dd(50,q,22,11,"div",21),O.zc(51,"async"),O.lc(),O.dd(52,W,4,3,"div",22),O.zc(53,"async"),O.lc()}2&e&&(O.Sb(1),O.Yb("fx-hidden",O.Ac(2,14,t.csvFileSelected)),O.Sb(16),O.Dc("innerHTML",O.Ac(18,16,"CSV_DATA_IMPORT.INFO.LIST_ITEM_2"),O.Rc),O.Sb(6),O.hd(" ",O.Ac(24,18,"CSV_DATA_IMPORT.DROP_CSV_FILE")," "),O.Sb(4),O.Dc("multiple",!1),O.Sb(2),O.Yb("fx-hidden",0==O.Ac(30,20,t.csvFileSelected)),O.Sb(9),O.Dc("selectedDb",O.Ac(39,22,t.selectedDb))("placeholderText",O.Ac(40,24,"SHAPE_DATA.DATA_ITEMS.ENTITY_LOOKUP.DB_PLACEHOLDER")),O.Sb(8),O.Dc("selectedDb",O.Ac(47,26,t.selectedDb))("selectedType",O.Ac(48,28,t.selectedEntityType))("placeholderText",O.Ac(49,30,"SHAPE_DATA.DATA_ITEMS.ENTITY_LOOKUP.TYPE_PLACEHOLDER")),O.Sb(4),O.Dc("ngIf",O.Ac(51,32,t.selectedEntityType)),O.Sb(2),O.Dc("ngIf",O.Ac(53,34,t.selectedEntityType)))},directives:[x.a,E.a,k.a,C.t,w.b,C.s,S.a,I.a,T.a,A.a],pipes:[C.b,x.d],styles:[".csv-data-import-panel[_ngcontent-%COMP%]{height:100%}  .mappings-container{height:350px}  .mappings-container.has-errors{height:280px}  h1{margin-bottom:.5rem}.info-container[_ngcontent-%COMP%]{padding:1.25rem;background:linear-gradient(0deg,rgba(12,94,150,.05),rgba(12,94,150,.05)),hsla(0,0%,100%,.65);width:100%}.info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:.625rem;list-style-position:outside}.info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.vertical-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.horizontal-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;color:#899092}.modal-window-footer[_ngcontent-%COMP%]{padding:0 1.25rem;display:flex;justify-content:flex-end}.modal-window-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{padding:.375rem .625rem}.info-heading[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;justify-content:space-between}"],changeDetection:0}),e}()},nyhH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=String(t),!t)throw new Error("Missing operator name");if("function"!=typeof n)throw new Error("Missing operator callback");this.cb=n,this.factValueValidator=r,this.factValueValidator||(this.factValueValidator=function(){return!0})}return r(e,[{key:"evaluate",value:function(e,t){return this.factValueValidator(e)&&this.cb(e,t)}}]),e}();t.default=i},o5Kk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n("fX4D")),a=o(n("43qC"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Condition: constructor options required");var n=e.booleanOperator(t);if(Object.assign(this,t),n){var r=t[n];if(!Array.isArray(r))throw new Error('"'+n+'" must be an array');this.operator=n,this.priority=parseInt(t.priority,10)||1,this[n]=r.map((function(t){return new e(t)}))}else{if(!Object.prototype.hasOwnProperty.call(t,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(t,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(t,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(t,"priority")&&(t.priority=parseInt(t.priority,10))}}return r(e,[{key:"toJSON",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n={};this.priority&&(n.priority=this.priority);var r=e.booleanOperator(this);return r?n[r]=this[r].map((function(e){return e.toJSON(t)})):(n.operator=this.operator,n.value=this.value,n.fact=this.fact,void 0!==this.factResult&&(n.factResult=this.factResult),void 0!==this.result&&(n.result=this.result),this.params&&(n.params=this.params),this.path&&(n.path=this.path)),t?JSON.stringify(n):n}},{key:"_getValue",value:function(e){var t=this.value;return(0,a.default)(t)&&Object.prototype.hasOwnProperty.call(t,"fact")?e.factValue(t.fact,t.params,t.path):Promise.resolve(t)}},{key:"evaluate",value:function(e,t){var n=this;if(!e)return Promise.reject(new Error("almanac required"));if(!t)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var r=t.get(this.operator);return r?this._getValue(e).then((function(t){return e.factValue(n.fact,n.params,n.path).then((function(e){var a=r.evaluate(e,t);return(0,i.default)("condition::evaluate <"+JSON.stringify(e)+" "+n.operator+" "+JSON.stringify(t)+"?> ("+a+")"),{result:a,leftHandSideValue:e,rightHandSideValue:t,operator:n.operator}}))})):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==e.booleanOperator(this)}}],[{key:"booleanOperator",value:function(e){return Object.prototype.hasOwnProperty.call(e,"any")?"any":Object.prototype.hasOwnProperty.call(e,"all")?"all":void 0}}]),e}();t.default=s},o9on:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("5xGT"),a=n("4y1S"),o=n("6Oco"),s=n("EM62"),c=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["INeutrinoRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return i.m.get("REST_API_BASE_URL")+"/"+i.m.get("MESSAGE_PROTOCOL_VERSION")+"/1/user/get-projects"},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.auth=this.auth.token},t.prototype.execute=function(){return o.a},t.prototype.executeResult=function(e){return this.data.callBack(e.result),!0},t.\u0275fac=function(e){return new(e||t)(s.qc(a.a))},t.\u0275prov=s.cc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(i.v)(),Object(r.g)("design:paramtypes",[a.a])],t)}(i.f);Object.defineProperty(c,"name",{value:"GetClassicProjects"});var l=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["INeutrinoRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return i.m.get("REST_API_BASE_URL")+"/"+i.m.get("MESSAGE_PROTOCOL_VERSION")+"/1/user/migrate-classic-projects"},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.auth=this.auth.token},t.prototype.execute=function(){return o.a},t.\u0275fac=function(e){return new(e||t)(s.qc(a.a))},t.\u0275prov=s.cc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(i.v)(),Object(r.g)("design:paramtypes",[a.a])],t)}(i.f);Object.defineProperty(l,"name",{value:"ImportClassicProjects"});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.registerGetClassicProjects=function(e){e.map(t.getClassicProjects).add(c)},t.registerImportClassicProjects=function(e){e.map(t.importClassicProjects).add(l)},t.getClassicProjects=new t("GetClassicProjects"),t.importClassicProjects=new t("ImportClassicProjects"),t}(i.y)},oFOz:function(e,t){t.nil=new Error("#NULL!"),t.div0=new Error("#DIV/0!"),t.value=new Error("#VALUE!"),t.ref=new Error("#REF!"),t.name=new Error("#NAME?"),t.num=new Error("#NUM!"),t.na=new Error("#N/A"),t.error=new Error("#ERROR!"),t.data=new Error("#GETTING_DATA")},oK6n:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("ROBh"),a=n("cOhl"),o=n("J+dc"),s=n("YtkY"),c=n("5xGT"),l=n("QoSw"),u=n("EM62"),d=function(){function e(e,t,n){this.styleLoader=e,this.state=t,this.ll=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.getFeatureData=function(e,t){var n=this.state.get("Selected"),i=this.styleLoader.getPalattes();return this.locator.getDiagramOnce().pipe(Object(o.a)(1),Object(s.a)((function(e){var t,a,o,s,c,l={palettes:[]},u=!0,d=0;try{for(var p=Object(r.k)(n),h=p.next();!h.done;h=p.next()){var f=h.value,m=e.shapes[f];m.style&&(m.style.themeIndex&&(0===d?d=m.style.themeIndex:d!==m.style.themeIndex&&(d=-1)),m.style.themeId&&(o?o!==m.style.themeId&&(o="base"):o=m.style.themeId),m.style.linePreset&&(s?s!==m.style.linePreset&&(s="multi"):s=m.style.linePreset),m.style.fillPreset&&(c?c!==m.style.fillPreset&&(c="multi"):c=m.style.fillPreset)),m.isConnector()||(u=!1)}}catch(g){t={error:g}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(t)throw t.error}}return u?(l.palettes.push({id:"base",title:"BASE",icon:"fill-solid",palette:i.find((function(e){return"lines-metro"===e.name}))}),l.palettes.push({id:"technic",title:"TEC",icon:"fill-line",palette:i.find((function(e){return"lines-technic"===e.name}))}),l.palettes.push({id:"opulant",title:"GLAM",icon:"fill-dotted",palette:i.find((function(e){return"lines-opulant"===e.name}))}),l.palettes.push({id:"apex",title:"PEX",icon:"fill-solid",palette:i.find((function(e){return"lines-apex"===e.name}))})):(l.palettes.push({id:"base",title:"BASE",icon:"fill-solid",palette:i.find((function(e){return"base"===e.name}))}),l.palettes.push({id:"technic",title:"TEC",icon:"fill-line",palette:i.find((function(e){return"technic"===e.name}))}),l.palettes.push({id:"opulant",title:"GLAM",icon:"fill-dotted",palette:i.find((function(e){return"opulant"===e.name}))}),l.palettes.push({id:"apex",title:"PEX",icon:"fill-solid",palette:i.find((function(e){return"apex"===e.name}))})),l.themeId=o,l.themeIndex=d,c&&"mixed"!==c&&(l.fillPreset=c),s&&"mixed"!==s&&(l.linePreset=s),l.isConnector=u,l})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.locator.getDiagramOnce().pipe(Object(s.a)((function(e){var n,i;try{for(var a=Object(r.k)(t),o=a.next();!o.done;o=a.next()){var s=o.value,c=e.shapes[s];if(c&&(c.isConnector()||c.isStyleEnabledShape()))return!0}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1})))},e.prototype.getApplyData=function(e,t){return t&&t.isThemeSwitch?Object(i.a)({isThemeSwitch:!0,currPaletteId:t.currPaletteId,newPaletteId:t.newPaletteId}):t&&t.isLineStyle?Object(i.a)({isLineStyle:!0,lineStyleId:t.style}):t&&t.isFillStyle?Object(i.a)({isFillStyle:!0,fillStyleId:t.style}):Object(i.a)({style:t,format:{"*":{indexStart:0,styles:{color:t.textColor}}}})},e.\u0275fac=function(t){return new(t||e)(u.qc(a.a),u.qc(c.Hb),u.qc(l.a))},e.\u0275prov=u.cc({token:e,factory:e.\u0275fac}),e}()},okSW:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("nsO7"),a=n("NNJu"),o=n("QoSw"),s=n("5xGT"),c=n("EM62"),l=n("pWGo"),u=n("2aGL"),d=["linksContainer"],p=["shapesContainer"],h=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.ll=r,o.commandService=i,o.state=a,o.subs=[],o.linkItems={},o}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"linkItemIds",{get:function(){return Object.keys(this.linkItems)},enumerable:!1,configurable:!0}),t.prototype.onTabUpdate=function(){this.manage()},t.prototype.ngAfterViewInit=function(){this.manage()},t.prototype.manage=function(){this.links||(this.links={}),this.manageLinks(Object(i.cloneDeep)(this.links)),this.addShapeSection(this.shapes)},t.prototype.ngOnDestroy=function(){this.clearSubs()},t.prototype.addLinkItem=function(e){var t=this.makeComponent(l.a);t.instance.connectors=e.items,t.instance.eDataId=this.eDataId,t.instance.entityId=this.entityId,this.linkItems[e.id]={item:t,container:this.linksContainer},this.insert(this.linksContainer,t),t.changeDetectorRef.detectChanges()},t.prototype.clearSubs=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.addShapeSection=function(e){if(!this.shapeSectionItem&&this.shapesContainer){var t=this.makeComponent(u.a);this.shapeSectionItem=t,this.insert(this.shapesContainer,this.shapeSectionItem)}this.shapeSectionItem&&(this.shapeSectionItem.instance.shapes=e,this.shapeSectionItem.changeDetectorRef.detectChanges())},t.prototype.manageLinks=function(e){var t=this,n={};Object(i.values)(e).forEach((function(e){Object.keys(e.connectors).forEach((function(t){var r=Object.keys(e.connectors[t]).map((function(n){var r=e.connectors[t][n];return r.id=n,r}));n[t]||(n[t]=[]),r.forEach((function(r){r.docId=t,r.link=e,n[t].push(r)}))}))}));var r=[],a=[];for(var o in n){var s=n[o];this.linkItemIds.includes(o)?a.push({id:o,items:s}):r.push({id:o,items:s})}this.linkItemIds.filter((function(e){return!Object.keys(n).includes(e)})).forEach((function(e){return t.removeLinkItem(e)})),a.forEach((function(e,n){return t.updateLinkItem(e)})),r.forEach((function(e,n){return t.addLinkItem(e)}))},t.prototype.updateLinkItem=function(e){var t=this.linkItems[e.id].item;t.instance.connectors=e.items,t.instance.eDataId=this.eDataId,t.instance.entityId=this.entityId,t.changeDetectorRef.detectChanges()},t.prototype.removeLinkItem=function(e){if(this.linkItems[e]){var t=this.linkItems[e].item,n=this.linkItems[e].container;t&&n&&(this.remove(n,t),delete this.linkItems[e])}},t.\u0275fac=function(e){return new(e||t)(c.gc(c.m),c.gc(c.C),c.gc(o.a),c.gc(s.B),c.gc(s.Hb))},t.\u0275cmp=c.ac({type:t,selectors:[["links-renderer"]],viewQuery:function(e,t){var n;(1&e&&(c.kd(d,!0,c.hb),c.kd(p,!0,c.hb)),2&e)&&(c.Mc(n=c.vc())&&(t.linksContainer=n.first),c.Mc(n=c.vc())&&(t.shapesContainer=n.first))},inputs:{eDataId:"eDataId",entityId:"entityId",links:"links",shapes:"shapes"},features:[c.Pb],decls:10,vars:0,consts:[[1,"links-renderer-section"],[1,"body","body--bold"],["shapesContainer",""],["linksContainer",""]],template:function(e,t){1&e&&(c.mc(0,"div",0),c.mc(1,"h4",1),c.fd(2,"Shape Occurrences"),c.lc(),c.hc(3,"div",null,2),c.lc(),c.mc(5,"div",0),c.mc(6,"h4",1),c.fd(7,"Connections"),c.lc(),c.hc(8,"div",null,3),c.lc())},styles:["h4[_ngcontent-%COMP%]{color:#04263d}.links-renderer-shape-item-doc[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-bottom:.25rem}.links-renderer-section[_ngcontent-%COMP%]{margin-bottom:2.5rem}.links-renderer-section[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.links-renderer-section[_ngcontent-%COMP%]  .links-renderer-item-doc-name{color:#354b53;margin-bottom:.25rem}.links-renderer-section[_ngcontent-%COMP%]  .panel-content{margin-left:.75rem;border-left:1px solid #caccce;padding-left:1rem;padding-right:1rem}.links-renderer-section[_ngcontent-%COMP%]  .col{padding-left:0;padding-right:0}.links-renderer-section[_ngcontent-%COMP%]  .row{padding:.625rem 0}.links-renderer-item-connections[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:1.5rem}.links-renderer-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1.25rem}"],changeDetection:0}),t}(a.k)},pJBp:function(e,t,n){var r=n("oFOz"),i=n("Pj1F"),a=n("sfKy");function o(e){return e&&e.getTime&&!isNaN(e.getTime())}function s(e){return e instanceof Date?e:new Date(e)}t.ACCRINT=function(e,t,n,a,c,l,u){return e=s(e),t=s(t),n=s(n),o(e)&&o(t)&&o(n)?a<=0||c<=0||-1===[1,2,4].indexOf(l)||-1===[0,1,2,3,4].indexOf(u)||n<=e?r.num:(u=u||0,(c=c||0)*a*i.YEARFRAC(e,n,u)):r.value},t.ACCRINTM=function(){throw new Error("ACCRINTM is not implemented")},t.AMORDEGRC=function(){throw new Error("AMORDEGRC is not implemented")},t.AMORLINC=function(){throw new Error("AMORLINC is not implemented")},t.COUPDAYBS=function(){throw new Error("COUPDAYBS is not implemented")},t.COUPDAYS=function(){throw new Error("COUPDAYS is not implemented")},t.COUPDAYSNC=function(){throw new Error("COUPDAYSNC is not implemented")},t.COUPNCD=function(){throw new Error("COUPNCD is not implemented")},t.COUPNUM=function(){throw new Error("COUPNUM is not implemented")},t.COUPPCD=function(){throw new Error("COUPPCD is not implemented")},t.CUMIPMT=function(e,n,i,o,s,c){if(e=a.parseNumber(e),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,n,i))return r.value;if(e<=0||n<=0||i<=0)return r.num;if(o<1||s<1||o>s)return r.num;if(0!==c&&1!==c)return r.num;var l=t.PMT(e,n,i,0,c),u=0;1===o&&(0===c&&(u=-i),o++);for(var d=o;d<=s;d++)u+=1===c?t.FV(e,d-2,l,i,1)-l:t.FV(e,d-1,l,i,0);return u*=e},t.CUMPRINC=function(e,n,i,o,s,c){if(e=a.parseNumber(e),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,n,i))return r.value;if(e<=0||n<=0||i<=0)return r.num;if(o<1||s<1||o>s)return r.num;if(0!==c&&1!==c)return r.num;var l=t.PMT(e,n,i,0,c),u=0;1===o&&(u=0===c?l+i*e:l,o++);for(var d=o;d<=s;d++)u+=c>0?l-(t.FV(e,d-2,l,i,1)-l)*e:l-t.FV(e,d-1,l,i,0)*e;return u},t.DB=function(e,t,n,i,o){if(o=void 0===o?12:o,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;if(e<0||t<0||n<0||i<0)return r.num;if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(o))return r.num;if(i>n)return r.num;if(t>=e)return 0;for(var s=(1-Math.pow(t/e,1/n)).toFixed(3),c=e*s*o/12,l=c,u=0,d=i===n?n-1:i,p=2;p<=d;p++)l+=u=(e-l)*s;return 1===i?c:i===n?(e-l)*s:u},t.DDB=function(e,t,n,i,o){if(o=void 0===o?2:o,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;if(e<0||t<0||n<0||i<0||o<=0)return r.num;if(i>n)return r.num;if(t>=e)return 0;for(var s=0,c=0,l=1;l<=i;l++)s+=c=Math.min(o/n*(e-s),e-t-s);return c},t.DISC=function(){throw new Error("DISC is not implemented")},t.DOLLARDE=function(e,t){if(e=a.parseNumber(e),t=a.parseNumber(t),a.anyIsError(e,t))return r.value;if(t<0)return r.num;if(t>=0&&t<1)return r.div0;t=parseInt(t,10);var n=parseInt(e,10);n+=e%1*Math.pow(10,Math.ceil(Math.log(t)/Math.LN10))/t;var i=Math.pow(10,Math.ceil(Math.log(t)/Math.LN2)+1);return n=Math.round(n*i)/i},t.DOLLARFR=function(e,t){if(e=a.parseNumber(e),t=a.parseNumber(t),a.anyIsError(e,t))return r.value;if(t<0)return r.num;if(t>=0&&t<1)return r.div0;t=parseInt(t,10);var n=parseInt(e,10);return n+=e%1*Math.pow(10,-Math.ceil(Math.log(t)/Math.LN10))*t},t.DURATION=function(){throw new Error("DURATION is not implemented")},t.EFFECT=function(e,t){return e=a.parseNumber(e),t=a.parseNumber(t),a.anyIsError(e,t)?r.value:e<=0||t<1?r.num:(t=parseInt(t,10),Math.pow(1+e/t,t)-1)},t.FV=function(e,t,n,i,o){if(i=i||0,o=o||0,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;var s;if(0===e)s=i+n*t;else{var c=Math.pow(1+e,t);s=1===o?i*c+n*(1+e)*(c-1)/e:i*c+n*(c-1)/e}return-s},t.FVSCHEDULE=function(e,t){if(e=a.parseNumber(e),t=a.parseNumberArray(a.flatten(t)),a.anyIsError(e,t))return r.value;for(var n=t.length,i=e,o=0;o<n;o++)i*=1+t[o];return i},t.INTRATE=function(){throw new Error("INTRATE is not implemented")},t.IPMT=function(e,n,i,o,s,c){if(s=s||0,c=c||0,e=a.parseNumber(e),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),s=a.parseNumber(s),c=a.parseNumber(c),a.anyIsError(e,n,i,o,s,c))return r.value;var l=t.PMT(e,i,o,s,c);return(1===n?1===c?0:-o:1===c?t.FV(e,n-2,l,o,1)-l:t.FV(e,n-1,l,o,0))*e},t.IRR=function(e,t){if(t=t||0,e=a.parseNumberArray(a.flatten(e)),t=a.parseNumber(t),a.anyIsError(e,t))return r.value;for(var n=function(e,t,n){for(var r=n+1,i=e[0],a=1;a<e.length;a++)i+=e[a]/Math.pow(r,(t[a]-t[0])/365);return i},i=function(e,t,n){for(var r=n+1,i=0,a=1;a<e.length;a++){var o=(t[a]-t[0])/365;i-=o*e[a]/Math.pow(r,o+1)}return i},o=[],s=!1,c=!1,l=0;l<e.length;l++)o[l]=0===l?0:o[l-1]+365,e[l]>0&&(s=!0),e[l]<0&&(c=!0);if(!s||!c)return r.num;var u,d,p,h=t=void 0===t?.1:t,f=!0;do{u=h-(p=n(e,o,h))/i(e,o,h),d=Math.abs(u-h),h=u,f=d>1e-10&&Math.abs(p)>1e-10}while(f);return h},t.ISPMT=function(e,t,n,i){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,t,n,i)?r.value:i*e*(t/n-1)},t.MDURATION=function(){throw new Error("MDURATION is not implemented")},t.MIRR=function(e,n,i){if(e=a.parseNumberArray(a.flatten(e)),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,n,i))return r.value;for(var o=e.length,s=[],c=[],l=0;l<o;l++)e[l]<0?s.push(e[l]):c.push(e[l]);var u=-t.NPV(i,c)*Math.pow(1+i,o-1),d=t.NPV(n,s)*(1+n);return Math.pow(u/d,1/(o-1))-1},t.NOMINAL=function(e,t){return e=a.parseNumber(e),t=a.parseNumber(t),a.anyIsError(e,t)?r.value:e<=0||t<1?r.num:(t=parseInt(t,10),(Math.pow(e+1,1/t)-1)*t)},t.NPER=function(e,t,n,i,o){if(o=void 0===o?0:o,i=void 0===i?0:i,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;if(0===e)return-(n+i)/t;var s=t*(1+e*o)-i*e,c=n*e+t*(1+e*o);return Math.log(s/c)/Math.log(1+e)},t.NPV=function(){var e=a.parseNumberArray(a.flatten(arguments));if(e instanceof Error)return e;for(var t=e[0],n=0,r=1;r<e.length;r++)n+=e[r]/Math.pow(1+t,r);return n},t.ODDFPRICE=function(){throw new Error("ODDFPRICE is not implemented")},t.ODDFYIELD=function(){throw new Error("ODDFYIELD is not implemented")},t.ODDLPRICE=function(){throw new Error("ODDLPRICE is not implemented")},t.ODDLYIELD=function(){throw new Error("ODDLYIELD is not implemented")},t.PDURATION=function(e,t,n){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:e<=0?r.num:(Math.log(n)-Math.log(t))/Math.log(1+e)},t.PMT=function(e,t,n,i,o){if(i=i||0,o=o||0,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;var s;if(0===e)s=(n+i)/t;else{var c=Math.pow(1+e,t);s=1===o?(i*e/(c-1)+n*e/(1-1/c))/(1+e):i*e/(c-1)+n*e/(1-1/c)}return-s},t.PPMT=function(e,n,i,o,s,c){return s=s||0,c=c||0,e=a.parseNumber(e),i=a.parseNumber(i),o=a.parseNumber(o),s=a.parseNumber(s),c=a.parseNumber(c),a.anyIsError(e,i,o,s,c)?r.value:t.PMT(e,i,o,s,c)-t.IPMT(e,n,i,o,s,c)},t.PRICE=function(){throw new Error("PRICE is not implemented")},t.PRICEDISC=function(){throw new Error("PRICEDISC is not implemented")},t.PRICEMAT=function(){throw new Error("PRICEMAT is not implemented")},t.PV=function(e,t,n,i,o){return i=i||0,o=o||0,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o)?r.value:0===e?-n*t-i:((1-Math.pow(1+e,t))/e*n*(1+e*o)-i)/Math.pow(1+e,t)},t.RATE=function(e,t,n,i,o,s){if(s=void 0===s?.01:s,i=void 0===i?0:i,o=void 0===o?0:o,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),s=a.parseNumber(s),a.anyIsError(e,t,n,i,o,s))return r.value;var c=1e-10,l=s;o=o?1:0;for(var u=0;u<20;u++){if(l<=-1)return r.num;var d,p,h;if(d=Math.abs(l)<c?n*(1+e*l)+t*(1+l*o)*e+i:n*(p=Math.pow(1+l,e))+t*(1/l+o)*(p-1)+i,Math.abs(d)<c)return l;if(Math.abs(l)<c)h=n*e+t*o*e;else{p=Math.pow(1+l,e);var f=e*Math.pow(1+l,e-1);h=n*f+t*(1/l+o)*f+t*(-1/(l*l))*(p-1)}l-=d/h}return l},t.RECEIVED=function(){throw new Error("RECEIVED is not implemented")},t.RRI=function(e,t,n){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:0===e||0===t?r.num:Math.pow(n/t,1/e)-1},t.SLN=function(e,t,n){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:0===n?r.num:(e-t)/n},t.SYD=function(e,t,n,i){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,t,n,i)?r.value:0===n||i<1||i>n?r.num:(e-t)*(n-(i=parseInt(i,10))+1)*2/(n*(n+1))},t.TBILLEQ=function(e,t,n){return e=a.parseDate(e),t=a.parseDate(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:n<=0||e>t||t-e>31536e6?r.num:365*n/(360-n*i.DAYS360(e,t,!1))},t.TBILLPRICE=function(e,t,n){return e=a.parseDate(e),t=a.parseDate(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:n<=0||e>t||t-e>31536e6?r.num:100*(1-n*i.DAYS360(e,t,!1)/360)},t.TBILLYIELD=function(e,t,n){return e=a.parseDate(e),t=a.parseDate(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:n<=0||e>t||t-e>31536e6?r.num:360*(100-n)/(n*i.DAYS360(e,t,!1))},t.VDB=function(){throw new Error("VDB is not implemented")},t.XIRR=function(e,t,n){if(e=a.parseNumberArray(a.flatten(e)),t=a.parseDateArray(a.flatten(t)),n=a.parseNumber(n),a.anyIsError(e,t,n))return r.value;for(var o=function(e,t,n){for(var r=n+1,a=e[0],o=1;o<e.length;o++)a+=e[o]/Math.pow(r,i.DAYS(t[o],t[0])/365);return a},s=function(e,t,n){for(var r=n+1,a=0,o=1;o<e.length;o++){var s=i.DAYS(t[o],t[0])/365;a-=s*e[o]/Math.pow(r,s+1)}return a},c=!1,l=!1,u=0;u<e.length;u++)e[u]>0&&(c=!0),e[u]<0&&(l=!0);if(!c||!l)return r.num;var d,p,h,f=n=n||.1,m=!0;do{d=f-(h=o(e,t,f))/s(e,t,f),p=Math.abs(d-f),f=d,m=p>1e-10&&Math.abs(h)>1e-10}while(m);return f},t.XNPV=function(e,t,n){if(e=a.parseNumber(e),t=a.parseNumberArray(a.flatten(t)),n=a.parseDateArray(a.flatten(n)),a.anyIsError(e,t,n))return r.value;for(var o=0,s=0;s<t.length;s++)o+=t[s]/Math.pow(1+e,i.DAYS(n[s],n[0])/365);return o},t.YIELD=function(){throw new Error("YIELD is not implemented")},t.YIELDDISC=function(){throw new Error("YIELDDISC is not implemented")},t.YIELDMAT=function(){throw new Error("YIELDMAT is not implemented")}},pTJA:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n("5xGT"),i=n("nsO7"),a=n("I4UX"),o=n("diDk"),s=n("QoSw"),c=n("xVbo"),l=n("TLy2"),u=n("J+dc"),d=n("B8NW"),p=n("YtkY"),h=n("jIqt"),f=n("7SLS"),m=n("nIj0"),g=n("C05f"),b=n("ROBh"),v=n("HM3f"),_=n("X0jn"),y=n("xnGY"),O=n("B5wR"),x=n("EM62"),E=n("pYIu"),k=n("TdEb"),C=n("pVzg"),w=n("29Wa"),S=n("Cd2c"),I=n("ulve"),T=n("2kYt"),A=n("mFH5");function P(e,t){if(1&e&&(x.mc(0,"mat-option",30),x.fd(1),x.lc()),2&e){var n=t.$implicit;x.Dc("value",n),x.Sb(1),x.hd(" ",n.name," ")}}function M(e,t){if(1&e&&(x.mc(0,"mat-option",30),x.fd(1),x.lc()),2&e){var n=t.$implicit;x.Dc("value",n),x.Sb(1),x.hd(" ",n.name," ")}}var D=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}},j=function(){function e(e,t,n,r){var a=this;this.ll=e,this.ell=t,this.eDataManage=n,this.state=r,this.dbControl=new m.h,this.defControl=new m.h,this.subs=[],this.edataModels=[],this.isDefValid=new g.a(!1),this.isDBValid=new g.a(!1),this.editData=new g.a(!1),this.syncType=this.state.changes("Selected").pipe(Object(c.a)((function(e){return 1===e.length})),Object(l.a)((function(e){return a.ll.forCurrentObserver(!1).pipe(Object(u.a)(1),Object(l.a)((function(t){return t.getDiagramModel().pipe(Object(d.a)((function(t){return!!t.shapes[e[0]]})),Object(p.a)((function(t){return{diagram:t,model:t.shapes[e[0]]}})))})))})),Object(l.a)((function(e){var t=e.diagram,n=e.model,r=n.entityDefId;return n.eDataId&&r?a.ell.getEData(n.eDataId).pipe(Object(l.a)((function(e){return e.getEDataModel()})),Object(p.a)((function(e){var o=e.getEntityDef(r),s=e.customEntityDefs[r],c={};o?(a.editData.next(!!s),c=o.dataItems||{},s&&(c=Object.assign({},c,s.dataItems))):a.editData.next(!1);var l=!1;if(o&&Object.keys(c).length>0){var u=Object(i.values)(n.getDataItems(t)||{}).filter((function(e){return e.isPublic&&!e.primaryTextBound}));u.length>0?a.editData.next(!!s):a.editData.next(!1),l=u.some((function(e){return!c[e.id]||a.isDataItemDefChanged(e,c[e.id])}))}return l}))):(a.editData.next(!1),Object(b.a)(!1))})))}return e.prototype.displayFn=function(e){return e&&e.name?e.name:""},e.prototype.displayDef=function(e){return e&&e.name?e.name:""},e.prototype._filter=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return!!e.isCustom&&(e.name||"").toLowerCase().includes(n)}))},e.prototype._filterDefs=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return(e.name||"").toLowerCase().includes(n)}))},e.prototype.ngAfterViewInit=function(){var e=this;this.filteredOptions=this.dbControl.valueChanges.pipe(Object(h.a)(""),Object(l.a)((function(t){return e.ll.forCurrentObserver(!1).pipe(Object(l.a)((function(t){return t.getDiagramEData().pipe(Object(l.a)((function(t){if(!t)return Object(b.a)([]);var n=[];return t.forEach((function(t){var r=e.ell.getEData(t).pipe(Object(l.a)((function(e){return e.getEDataModel()})),Object(u.a)(1));n.push(r)})),Object(v.b)(n)})))})),Object(p.a)((function(e){return{eDataModels:e,value:t}})))})),Object(p.a)((function(t){var n="string"==typeof t.value?t.value:t.value.name;return e.edataModels=t.eDataModels,n?e._filter(t.eDataModels,n):t.eDataModels.filter((function(e){return e&&!!e.isCustom})).slice()}))),this.filteredDefs=this.defControl.valueChanges.pipe(Object(h.a)(""),Object(p.a)((function(t){if(e.selectedDatabase){var n=t&&t.name?t.name:t,r=Object(i.toArray)(e.selectedDatabase.customEntityDefs).map((function(e){return{id:e.id,name:e.name}}));return n&&"string"==typeof n?e._filterDefs(r,n):r}return[]}))),this.hideCreater()},e.prototype.showCreater=function(){document.querySelector(".entity-type-manage-add-new").style.display="block",document.querySelector(".entity-type-manage-add-new-name").style.display="block"},e.prototype.hideCreater=function(){this.selectedDatabase=void 0;var e=document.querySelector(".entity-type-manage-add-new");document.querySelector(".entity-type-manage-add-new-db input").value="",this.selectedDef=void 0;var t=document.querySelector(".entity-type-manage-add-new-name");document.querySelector(".entity-type-manage-add-new-name input").value="",e.style.display="none",t.style.display="none",this.isDBValid.next(!1),this.isDefValid.next(!1)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.handleSaveClick=function(){var e,t=this,n=this.state.get("Selected"),i=document.querySelector(".entity-type-manage-add-new-name input").value,a=Object(b.a)({});if(i||this.selectedDef){if(this.selectedDatabase)e=this.selectedDatabase.id;else{var o=document.querySelector(".entity-type-manage-add-new-db input").value.trim();if(!o)return;var s=this.edataModels.find((function(e){return e.name===o}));s?e=s.id:(e=r.rb.eDataId(),a=this.eDataManage.createCustomDB(e,o).pipe(Object(l.a)((function(e){return e.status})),Object(c.a)((function(e){return e.subStatus===y.f.started})),Object(u.a)(1)))}this.selectedDef?this.eDataManage.bindNewEntityToShape(e,n[0],this.selectedDef.id).pipe(Object(u.a)(1)).subscribe():a.pipe(Object(l.a)((function(){return t.eDataManage.createType(e,i).pipe(Object(l.a)((function(e){return O.a.instance.customEntityDefUpdated(e).pipe(Object(f.a)(e))})),Object(l.a)((function(r){return t.eDataManage.bindNewEntityToShape(e,n[0],r)})))}))).subscribe(),this.hideCreater()}},e.prototype.isDataItemDefChanged=function(e,t){return!![_.c.OPTION_LIST,_.c.FORMULA].includes(e.type)&&!Object(i.isEqual)(e.options,t.options)},e.\u0275fac=function(t){return new(t||e)(x.gc(s.a),x.gc(o.a),x.gc(a.a),x.gc(r.Hb))},e.\u0275cmp=x.ac({type:e,selectors:[["entity-type-manage"]],decls:60,vars:25,consts:[[1,"entity-type-manage-container","fx-center-vertical"],["alignment","right",3,"settings"],["dd",""],["ddbutton",""],[1,"btn-small"],[1,"settings-icon","btn-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["dditem","",3,"hidden","click"],[1,"fx-center-vertical"],[1,"dropdown-item-icon"],[1,""],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-refresh"],[1,"dropdown-item-text","body"],["dditem","",1,"new-data",3,"click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-database-small"],["dditem","",1,"edit-data",3,"hidden","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-pencil"],[1,"entity-type-manage-add-new"],["typeCreator",""],[1,"entity-type-manage-add-new-db"],[1,"body","grey"],["type","text","matInput","",1,"text-input",3,"formControl","matAutocomplete","change","keyup"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"entity-type-manage-add-new-name"],["autoDef","matAutocomplete"],[1,"entity-type-manage-add-new-btns"],[1,"btn-small","btn-secondary","fx-margin-right-5",3,"click"],[1,"btn-small","btn-secondary",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(x.mc(0,"div",0),x.mc(1,"abs-dropdown",1,2),x.mc(3,"simple-dropdown-button",3),x.mc(4,"button",4),x.xc(),x.mc(5,"svg",5),x.hc(6,"use",6),x.lc(),x.lc(),x.lc(),x.wc(),x.mc(7,"simple-dropdown-item",7),x.uc("click",(function(){return t.eDataManage.updateType().subscribe()})),x.zc(8,"async"),x.mc(9,"div",8),x.mc(10,"div",9),x.xc(),x.mc(11,"svg",10),x.hc(12,"use",11),x.lc(),x.lc(),x.wc(),x.mc(13,"div",12),x.mc(14,"span"),x.fd(15,"Sync changes to Type"),x.lc(),x.lc(),x.lc(),x.lc(),x.mc(16,"simple-dropdown-item",13),x.uc("click",(function(){return t.showCreater()})),x.mc(17,"div",8),x.mc(18,"div",9),x.xc(),x.mc(19,"svg",10),x.hc(20,"use",14),x.lc(),x.lc(),x.wc(),x.mc(21,"div",12),x.mc(22,"span"),x.fd(23,"Save as a new Entity Type"),x.lc(),x.lc(),x.lc(),x.lc(),x.mc(24,"simple-dropdown-item",15),x.uc("click",(function(){return t.eDataManage.makeTypeEditable(!0).subscribe()})),x.zc(25,"async"),x.mc(26,"div",8),x.mc(27,"div",9),x.xc(),x.mc(28,"svg",10),x.hc(29,"use",16),x.lc(),x.lc(),x.wc(),x.mc(30,"div",12),x.mc(31,"span"),x.fd(32,"Edit Entity Type"),x.lc(),x.lc(),x.lc(),x.lc(),x.lc(),x.lc(),x.mc(33,"div",17,18),x.mc(35,"div",19),x.mc(36,"label",20),x.fd(37,"Create / Choose Database"),x.lc(),x.mc(38,"mat-form-field",10),x.mc(39,"input",21),x.uc("change",(function(){return t.selectedDatabase=void 0}))("keyup",(function(e){return t.isDBValid.next(!!e.target.value.trim())})),x.lc(),x.mc(40,"mat-autocomplete",22,23),x.uc("optionSelected",(function(e){return t.selectedDatabase=e.option.value,t.isDBValid.next(!!e.option.value)})),x.dd(42,P,2,2,"mat-option",24),x.zc(43,"async"),x.lc(),x.lc(),x.lc(),x.mc(44,"div",25),x.mc(45,"label",20),x.fd(46,"Create / Choose Item Type"),x.lc(),x.mc(47,"mat-form-field",10),x.mc(48,"input",21),x.uc("change",(function(){return t.selectedDef=void 0}))("keyup",(function(e){return t.isDefValid.next(!!e.target.value.trim())})),x.lc(),x.mc(49,"mat-autocomplete",22,26),x.uc("optionSelected",(function(e){return t.selectedDef=e.option.value,t.isDefValid.next(!!e.option.value)})),x.dd(51,M,2,2,"mat-option",24),x.zc(52,"async"),x.lc(),x.lc(),x.lc(),x.mc(53,"div",27),x.mc(54,"button",28),x.uc("click",(function(){return t.handleSaveClick()})),x.zc(55,"async"),x.zc(56,"async"),x.fd(57,"Save"),x.lc(),x.mc(58,"button",29),x.uc("click",(function(){return t.hideCreater()})),x.fd(59,"Cancel"),x.lc(),x.lc(),x.lc()),2&e){var n=x.Nc(41),r=x.Nc(50);x.Sb(1),x.Dc("settings",x.Hc(24,D)),x.Sb(6),x.Dc("hidden",!x.Ac(8,12,t.syncType)),x.Sb(17),x.Dc("hidden",!x.Ac(25,14,t.editData)),x.Sb(15),x.Dc("formControl",t.dbControl)("matAutocomplete",n),x.Sb(1),x.Dc("displayWith",t.displayFn),x.Sb(2),x.Dc("ngForOf",x.Ac(43,16,t.filteredOptions)),x.Sb(6),x.Dc("formControl",t.defControl)("matAutocomplete",r),x.Sb(1),x.Dc("displayWith",t.displayDef),x.Sb(2),x.Dc("ngForOf",x.Ac(52,18,t.filteredDefs)),x.Sb(3),x.Tb("disabled",x.Ac(55,20,t.isDefValid)&&x.Ac(56,22,t.isDBValid)?null:"")}},directives:[E.a,k.a,C.a,w.c,S.b,m.d,I.d,m.s,m.i,I.a,T.s,A.k],pipes:[T.b],styles:["[_nghost-%COMP%]  .dropdown-item-icon{width:20px;height:15px;float:left}[_nghost-%COMP%]  .dropdown-item-icon svg{width:20px;height:20px}[_nghost-%COMP%]  .dropdown-item-text{margin-left:.5rem}[_nghost-%COMP%]  .mat-form-field-infix{padding:.25rem 0}[_nghost-%COMP%]  .mat-input-element{padding:.5rem;border:1px solid rgba(149,168,175,.5)}[_nghost-%COMP%]  .btn-small{background-color:#fff}.settings-icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-top:.125rem}.entity-type-manage-add-new[_ngcontent-%COMP%]{position:absolute;z-index:10;padding:.625rem;box-shadow:0 0 2px #95a8af;margin-top:.625rem;width:260px;background:#fff;right:.25rem;top:1.5rem;border-radius:6px}.entity-type-manage-add-new-name[_ngcontent-%COMP%]{margin-bottom:1rem}.entity-type-manage-add-new-btns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:.5rem}.entity-type-manage-add-new-btns[_ngcontent-%COMP%]{margin-bottom:.625rem}.entity-type-manage-add-new-db[_ngcontent-%COMP%]{margin-bottom:1.25rem}"],changeDetection:0}),e}()},pWGo:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("D57K"),i=n("NNJu"),a=n("5xGT"),o=n("X0jn"),s=n("0jHB"),c=n("YtkY"),l=n("J+dc"),u=n("diDk"),d=n("W9bu"),p=n("QoSw"),h=n("Xpu5"),f=n("EM62"),m=n("lQIu"),g=n("2kYt");function b(e,t){1&e&&(f.kc(0),f.fd(1,"s"),f.jc())}function v(e,t){if(1&e){var n=f.nc();f.mc(0,"div",16),f.mc(1,"a",17),f.uc("click",(function(){f.Qc(n);var e=f.yc(2);return e.resolveChanges(e.linkData.id)})),f.fd(2),f.dd(3,b,2,0,"ng-container",18),f.lc(),f.lc()}if(2&e){var r=f.yc(2);f.Sb(2),f.hd(" Resolve ",r.linkData.refChangeCount," change"),f.Sb(1),f.Dc("ngIf",r.linkData.refChangeCount>1)}}function _(e,t){if(1&e){var n=f.nc();f.mc(0,"div"),f.mc(1,"div",4),f.mc(2,"div",5),f.mc(3,"div",6),f.mc(4,"div",7),f.mc(5,"a",8),f.uc("click",(function(){f.Qc(n);var e=t.$implicit;return f.yc().navigateToItem(e.diagId,e.connId)})),f.fd(6),f.zc(7,"async"),f.lc(),f.lc(),f.dd(8,v,4,2,"div",9),f.lc(),f.mc(9,"div",10),f.mc(10,"div",11),f.xc(),f.mc(11,"svg",12),f.hc(12,"use",13),f.lc(),f.lc(),f.lc(),f.wc(),f.mc(13,"div",6),f.mc(14,"div",14),f.uc("click",(function(){f.Qc(n);var e=t.$implicit;return f.yc().navigateToItem(e.diagId,e.shapeId)})),f.mc(15,"a"),f.fd(16),f.lc(),f.mc(17,"a",15),f.fd(18),f.zc(19,"async"),f.lc(),f.lc(),f.lc(),f.lc(),f.lc(),f.lc()}if(2&e){var r=t.$implicit,i=f.yc();f.Sb(6),f.gd(f.Ac(7,4,r.cType)),f.Sb(2),f.Dc("ngIf",i.linkData.refChangeCount>0),f.Sb(8),f.gd(r.entityName),f.Sb(2),f.hd(" ",f.Ac(19,6,i.getEntityShapeType(r,i.linkData)),"")}}var y=function(e){function t(t,n,r,i,a,o,s,c){var l=e.call(this,t,n)||this;return l.componentFactoryResolver=t,l.injector=n,l.defLocator=r,l.ell=i,l.ll=a,l.linkSvc=o,l.state=s,l.commandService=c,l.connectors=[],l.subs=[],l}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"linkData",{get:function(){var e=this,t={conns:[]};return this.connectors.forEach((function(n,r){if(t.docId=n.docId,t.conns.push({cType:e.defName(n.defId),diagId:n.docId,diagName:e.diagName(n.docId),connId:n.id,shapeId:n.shapeId,shapeDefName:e.defName(n.shapeDefId),entityName:n.link.identifier}),0===r){var i=n.link;t.id=i.id,t.entityType=e.entityType(i),t.refChangeCount=0,i.type===o.f.REFERENCE&&i.refChanges&&(t.refChangeCount=i.refChanges.length),t.diagName=e.diagName(n.docId)}})),t.count=t.conns.length,t},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.apply=function(){this.itemRef.instance.apply()},t.prototype.navigateToItem=function(e,t){this.state.get("CurrentDiagram")!==e?this.linkSvc.navigateToDiagram(e,["s",t]).subscribe():this.linkSvc.navigateToShape(t)},t.prototype.getPlural=function(e,t){return t>1?e+"s":e},t.prototype.getEntityShapeType=function(e,t){return t.entityType?t.entityType:e.shapeDefName},t.prototype.resolveChanges=function(e){this.commandService.dispatch(h.a.updateEDateRefChanges,this.eDataId,{entityIds:[this.entityId],linkId:e,markResolved:!0})},t.prototype.defName=function(e){return this.defLocator.getDefinition(e).pipe(Object(c.a)((function(e){return e.name})))},t.prototype.diagName=function(e){return this.ll.forDiagram(e,!1).getDiagramName().pipe(Object(l.a)(1))},t.prototype.entityType=function(e){if(e.eDataId&&e.entityId)return this.ell.getEntityOnce(e.eDataId,e.entityId).pipe(Object(c.a)((function(e){return e.getDefName()})))},t.\u0275fac=function(e){return new(e||t)(f.gc(f.m),f.gc(f.C),f.gc(s.a),f.gc(u.a),f.gc(p.a),f.gc(d.a),f.gc(a.Hb),f.gc(a.B))},t.\u0275cmp=f.ac({type:t,selectors:[["link-info-item"]],inputs:{connectors:"connectors",eDataId:"eDataId",entityId:"entityId"},outputs:{change:"change",removed:"removed"},features:[f.Pb],decls:6,vars:6,consts:[[1,"links-renderer-item","links-renderer-item-connections"],[1,"links-renderer-item-doc-name","body"],[3,"heading"],[4,"ngFor","ngForOf"],[1,"container"],[1,"row"],[1,"col","my-auto"],[1,"links-renderer-item-ctype","default-font-color","caption"],[3,"click"],["class","links-renderer-item-changes",4,"ngIf"],[1,"col-2","my-auto"],[1,"links-renderer-item-arrow"],[1,"nu-icon","nu-icon-small"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-arrow-right"],[1,"links-renderer-item-entity","default-font-color","caption",3,"click"],[1,"links-renderer-item-shape-type"],[1,"links-renderer-item-changes"],[1,"primary","caption",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(f.mc(0,"div",0),f.mc(1,"div",1),f.fd(2),f.zc(3,"async"),f.lc(),f.mc(4,"collapsable-panel-item",2),f.dd(5,_,20,8,"div",3),f.lc(),f.lc()),2&e&&(f.Sb(2),f.gd(f.Ac(3,4,t.linkData.diagName)),f.Sb(2),f.Gc("heading","",t.linkData.count," ",t.getPlural("Connection",t.linkData.count),""),f.Sb(1),f.Dc("ngForOf",t.linkData.conns))},directives:[m.b,g.s,g.t],pipes:[g.b],styles:[".links-renderer-item[_ngcontent-%COMP%]  .panel-section{margin-bottom:15px}.links-renderer-item-connections[_ngcontent-%COMP%]{align-items:center}.default-font-color[_ngcontent-%COMP%]{color:#354b53}.links-renderer-item-entity[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t}(i.k)},pi4j:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("D57K"),i=n("ZtqW"),a=n("nsO7"),o=n("6Oco"),s=n("X0jn"),c=n("EM62"),l=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ConnectionChangeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(!Object(a.isEmpty)(n)&&"Preview"!==t){for(var r in n.$set){if((c=/shapes\.([^\.]+)$/g).lastIndex=0,l=c.exec(r)){var i=e.shapes[l[1]];i.type===s.t.Connector||i.connectorIds||(i.connectorIds=[]),i.type===s.t.Connector&&this.updateShapeConnectorIds(e,i)}if((c=/shapes\.([^\.]+)\.path/g).lastIndex=0,l=c.exec(r))(u=e.shapes[l[1]]).type===s.t.Connector&&this.updateShapeConnectorIds(e,u)}for(var r in n.$unset){var c,l,u;if((c=/shapes\.([^\.]+)$/g).lastIndex=0,l=c.exec(r))(u=e.__sakota__.getTarget().shapes[l[1]]).type===s.t.Connector&&this.removeShapeConnectorIds(e,u)}}return o.a},e.prototype.updateShapeConnectorIds=function(e,t){var n=t.__sakota__?t.__sakota__.getTarget():null;["headId","tailId"].forEach((function(o){var s=Object(a.get)(t,"path."+o),c=Object(a.get)(t,"path."+s+".shapeId");if(n){var l=Object(a.get)(n,"path."+s+".shapeId");if(l!==c){var u=e.shapes[l];u&&u.connectorIds&&(u.connectorIds=u.connectorIds.filter((function(e){return e!==t.id})))}}var d=e.shapes[c];d&&!d.connectorIds?d.connectorIds=i.a.getConnectedConnectors(e,d.id).map((function(e){return e.connector.id})):d&&!d.connectorIds.includes(t.id)&&(d.connectorIds=Object(r.j)(d.connectorIds,[t.id]))}))},e.prototype.removeShapeConnectorIds=function(e,t){var n=Object(a.get)(t,"path.headId"),r=Object(a.get)(t,"path.tailId");[Object(a.get)(t,"path."+n+".shapeId"),Object(a.get)(t,"path."+r+".shapeId")].filter((function(e){return!!e})).forEach((function(n){var r=e.shapes[n];r&&r.connectorIds&&(r.connectorIds=r.connectorIds.filter((function(e){return e!==t.id})))}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.cc({token:e,factory:e.\u0275fac}),e}()},ppab:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=n("xfVB"),s=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Promise;(0,i.default)(this,e),this._grammar=t,this._context=n||{},this._relContext=r||this._context,this.Promise=a}return(0,a.default)(e,[{key:"eval",value:function(e){var t=this;return this.Promise.resolve().then((function(){return o[e.type].call(t,e)}))}},{key:"evalArray",value:function(e){var t=this;return this.Promise.all(e.map((function(e){return t.eval(e)})))}},{key:"evalMap",value:function(e){var t=this,n=Object.keys(e),r={},i=n.map((function(n){return t.eval(e[n])}));return this.Promise.all(i).then((function(e){return e.forEach((function(e,t){r[n[t]]=e})),r}))}},{key:"_filterRelative",value:function(t,n){var r=this,i=[];return Array.isArray(t)||(t=void 0===t?[]:[t]),t.forEach((function(t){var a=new e(r._grammar,r._context,t,r.Promise);i.push(a.eval(n))})),this.Promise.all(i).then((function(e){var n=[];return e.forEach((function(e,r){e&&n.push(t[r])})),n}))}},{key:"_filterStatic",value:function(e,t){return this.eval(t).then((function(t){return"boolean"==typeof t?t?e:void 0:e[t]}))}}]),e}();e.exports=s},"pt/I":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("g6G6"),a=n("KTx3"),o=n("8j5Y"),s=n("cJ9h"),c=n("TLy2"),l=n("kuMc"),u=n("xVbo"),d=n("LLEj"),p=n("O6K7"),h=n("5xGT"),f=n("EM62"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:"comment",tail:null,type:"cur",viewingArea:"app"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,r){var a=this,s=e.prototype.initialize.call(this,t,n,r),c=this.getStagePressUp(this.gridCanvas).pipe(Object(o.a)((function(e){return a.addComment(e)}))),l=this.getClickOnShape().pipe(Object(o.a)((function(e){return a.addComment(e)})));return Object(i.a)(s,c,l)},t.prototype.getClickOnShape=function(){var e=this;return this.getShapes().pipe(Object(s.a)((function(t){return Object(a.a)(t,"mousedown").pipe(Object(c.a)((function(){return Object(a.a)(t,"pressup").pipe(Object(l.a)(Object(a.a)(t,"pressmove")))})),Object(l.a)(Object(a.a)(e.diagramCanvas,"childRemoved").pipe(Object(u.a)((function(e){return e.child===t})))))})))},t.prototype.addComment=function(e){h.Jb.track("canvas.comment.add.canvas.click");var t=new p.a(p.b.CreateComment,e);this.interactionCanvas.dispatchEvent(t)},t.\u0275fac=function(e){return g(e||t)},t.\u0275prov=f.cc({token:t,factory:t.\u0275fac}),t}(d.a),g=f.oc(m)},qlkn:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("5xGT"),a=n("fqe/"),o=n("HsO4"),s=n("8j5Y"),c=n("CsoK"),l=n("iT4G"),u=n("EM62"),d=function(){function e(e,t){this.auth=e,this.postMessage=t}return Object.defineProperty(e.prototype,"httpUrl",{get:function(){return i.m.get("CYCLR_API_COMMANDS_URL")},enumerable:!1,configurable:!0}),e.prototype.fetchPost=function(e){return void 0===e&&(e={}),Object(r.c)(this,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(n){switch(n.label){case 0:return[4,fetch(""+this.httpUrl,{method:"POST",headers:{"Content-Type":"application/json","creately-gravity-token":this.auth.token},body:JSON.stringify(e)})];case 1:if((t=n.sent()).status>=400&&t.status<600)throw new Error("Internal server error");return[2,t.json()]}}))}))},e.prototype.isAuthenticated=function(e){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(t){return[2,this.fetchPost({dataSource:e,method:"isAuthenticated"})]}))}))},e.prototype.authenticate=function(e,t){void 0===t&&(t=300);var n,r=[i.m.get("CYCLR_AUTH_DOMAIN")];return Object(o.a)(this.fetchPost({dataSource:e,method:"getOAuthUrl",params:{target:window.location.href}})).pipe(Object(s.a)((function(e){return n=window.open(e.toString())})),Object(c.a)(this.postMessage.recvCyclerEvents(r)),Object(s.a)((function(){return n.close()})),Object(l.a)(1e3*t))},e.\u0275fac=function(t){return new(t||e)(u.qc(a.a),u.qc(i.ob))},e.\u0275prov=u.cc({token:e,factory:e.\u0275fac}),e}()},qonV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("5xGT"),a=n("nsO7"),o=n("EM62"),s=function(){function e(e,t){this.state=e,this.postMessage=t,this._fetch=window.fetch.bind(window),this._document=window.document,this.frames={}}return e.prototype.initialize=function(){this.state.initialize("EnabledPlugins",[]),this.manifests={},this.identifiers={},this.prepareContainerElement()},e.prototype.load=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t,n;return Object(r.f)(this,(function(r){switch(r.label){case 0:if(!this.isAllowedPlugin(e))throw new Error("Plugin error: please add "+e+" to the whitelist");return this.frames[e]?[2]:[4,this.loadPluginManifest(e)];case 1:return t=r.sent(),this.manifests[e]=t,this.identifiers[e]||(n=this.getRandomIdentifier(),this.identifiers[e]=n),[4,this.loadPluginMainIframe(t)];case 2:return r.sent(),this.state.set("EnabledPlugins",this.state.get("EnabledPlugins").concat([t])),[2]}}))}))},e.prototype.unload=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t,n;return Object(r.f)(this,(function(r){return i.cb.debug("Unload plugin",e),(t=this.manifests[e])&&(delete this.frames[e],n=Object(a.remove)(this.state.get("EnabledPlugins"),(function(e){return e.url===t._url})),this.state.set("EnabledPlugins",n)),[2]}))}))},e.prototype.burrowMainIframe=function(e){return this.frames[e]},e.prototype.returnMainIframe=function(e,t){this.container.appendChild(t)},e.prototype.recieveMessages=function(e){if(!this.manifests[e])throw new Error("Plugin error: invalid message subscription request for "+e);var t=this.getHostFromUrl(e);return this.postMessage.recv([t],this.identifiers[e])},e.prototype.sendMessage=function(e,t,n){var r=this.frames[n];r&&this.postMessage.sendToWindow(e,t,r.contentWindow)},e.prototype.prepareContainerElement=function(){this._document.getElementById(e.CONTAINER_ELEMENT_ID)||(this.container=document.createElement("div"),this.container.id=e.CONTAINER_ELEMENT_ID,this._document.body.appendChild(this.container))},e.prototype.isAllowedPlugin=function(e){return!0},e.prototype.loadPluginManifest=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(n){switch(n.label){case 0:return[4,this.fetchPluginManifestFromCache(e)];case 1:return(t=n.sent())?[3,5]:[4,this.fetchPluginManifestFromSource(e)];case 2:return t=n.sent(),[4,this.checkPluginManifest(e,t)];case 3:return n.sent(),[4,this.cachePluginManifest(e,t)];case 4:n.sent(),n.label=5;case 5:return[2,t]}}))}))},e.prototype.fetchPluginManifestFromCache=function(e){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(t){return[2,this.manifests[e]]}))}))},e.prototype.fetchPluginManifestFromSource=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(n){switch(n.label){case 0:return[4,this._fetch(e)];case 1:return[4,n.sent().json()];case 2:return(t=n.sent())._url=e,[2,t]}}))}))},e.prototype.checkPluginManifest=function(e,t){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(e){return[2]}))}))},e.prototype.cachePluginManifest=function(e,t){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(e){return[2]}))}))},e.prototype.loadPluginMainIframe=function(e){var t=this;return new Promise((function(n,r){var a=document.createElement("iframe");a.setAttribute("allow","camera; microphone"),a.onload=function(r){t.sendMessage(i.pb.pluginInit,{id:t.identifiers[e._url]},e._url),n()},a.src=e.main,t.container.appendChild(a),t.frames[e._url]=a}))},e.prototype.getHostFromUrl=function(e){var t=e.match(/^https?\:\/\/[^\/?#]+/i);if(t&&t.length>-1)return t[0]},e.prototype.getRandomIdentifier=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},e.CONTAINER_ELEMENT_ID="creately-plugin-container",e.\u0275fac=function(t){return new(t||e)(o.qc(i.Hb),o.qc(i.ob))},e.\u0275prov=o.cc({token:e,factory:e.\u0275fac}),e}()},"r7/9":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("D57K"),i=(n("unyx"),n("NNJu")),a=n("ZTXN"),o=n("C05f"),s=n("HM3f"),c=n("YtkY"),l=n("EM62"),u=n("2kYt"),d=n("pYIu"),p=n("XwbL"),h=n("uXwy"),f=["typeSelector"];function m(e,t){if(1&e&&l.hc(0,"sidebar-list-dropdown-item",5),2&e){var n=t.$implicit;l.Dc("item",n)}}var g=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}};function b(e,t){if(1&e&&(l.mc(0,"abs-dropdown",1,2),l.hc(2,"sidebar-dropdown-button",3),l.dd(3,m,1,1,"sidebar-list-dropdown-item",4),l.lc()),2&e){var n=t.ngIf,r=l.yc();l.Dc("settings",l.Hc(5,g))("autoPosition",!1),l.Sb(2),l.Dc("items",n)("placeholderText",r.placeholderText),l.Sb(1),l.Dc("ngForOf",n)}}var v=function(){function e(){this.typeChanged=new a.a,this.subs=[],this.dbSelected=new o.a(null),this._selectedType=new o.a(null),this.entityTypeOptions=Object(s.b)([this.dbSelected,this._selectedType]).pipe(Object(c.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return n?(n.isCustom?n.getActiveCustomEntityDefs():Object.values(n.getDefinition().entityDefs)).map((function(e){return{id:e.id,label:e.grouping?e.grouping:e.name,buttonLabel:e.grouping?e.grouping:e.name,selected:!!i&&i.id===e.id}})):[]})))}return e.prototype.ngOnChanges=function(e){e.selectedDb&&(this.dbSelected.next(e.selectedDb.currentValue),e.selectedDb.firstChange||this._selectedType.next(null)),e.selectedType&&this._selectedType.next(e.selectedType.currentValue)},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.entityTypeSelector.changed.subscribe((function(t){e.typeChanged.next(e.selectedDb.isCustom?e.selectedDb.getActiveCustomEntityDefs().find((function(e){return e.id===t[0]})):e.selectedDb.getEntityDef(t[0]))})))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.ac({type:e,selectors:[["entity-type-selector"]],viewQuery:function(e,t){var n;(1&e&&l.kd(f,!0,i.b),2&e)&&(l.Mc(n=l.vc())&&(t.entityTypeSelector=n.first))},inputs:{selectedDb:"selectedDb",selectedType:"selectedType",placeholderText:"placeholderText"},outputs:{typeChanged:"typeChanged"},features:[l.Qb],decls:2,vars:3,consts:[["class","dropdown-item",3,"settings","autoPosition",4,"ngIf"],[1,"dropdown-item",3,"settings","autoPosition"],["typeSelector",""],["ddbutton","",3,"items","placeholderText"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){1&e&&(l.dd(0,b,4,6,"abs-dropdown",0),l.zc(1,"async")),2&e&&l.Dc("ngIf",l.Ac(1,1,t.entityTypeOptions))},directives:[u.t,d.a,p.a,u.s,h.a],pipes:[u.b],encapsulation:2,changeDetection:0}),e}()},rgVC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n("kRQx")),o=n("It4u"),s=u(n("fX4D")),c=n("GR9c"),l=u(n("43qC"));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){return(0,c.JSONPath)({path:t,json:e,wrap:!1})}var h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var o in d(this,e),this.factMap=new Map(t),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(i.allowUndefinedFacts),this.pathResolver=i.pathResolver||p,this.events={success:[],failure:[]},this.ruleResults=[],n){var c=void 0;c=n[o]instanceof a.default?n[o]:new a.default(o,n[o]),this._addConstantFact(c),(0,s.default)("almanac::constructor initialized runtime fact:"+c.id+" with "+c.value+"<"+r(c.value)+">")}}return i(e,[{key:"addEvent",value:function(e,t){if(!t)throw new Error('outcome required: "success" | "failure"]');this.events[t].push(e)}},{key:"getEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?this.events[e]:this.events.success.concat(this.events.failure)}},{key:"addResult",value:function(e){this.ruleResults.push(e)}},{key:"getResults",value:function(){return this.ruleResults}},{key:"_getFact",value:function(e){return this.factMap.get(e)}},{key:"_addConstantFact",value:function(e){this.factMap.set(e.id,e),this._setFactValue(e,{},e.value)}},{key:"_setFactValue",value:function(e,t,n){var r=e.getCacheKey(t),i=Promise.resolve(n);return r&&this.factResultsCache.set(r,i),i}},{key:"addRuntimeFact",value:function(e,t){(0,s.default)("almanac::addRuntimeFact id:"+e);var n=new a.default(e,t);return this._addConstantFact(n)}},{key:"factValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=void 0,c=this._getFact(e);if(void 0===c)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new o.UndefinedFactError("Undefined fact: "+e));if(c.isConstant())a=Promise.resolve(c.calculate(n,this));else{var u=c.getCacheKey(n),d=u&&this.factResultsCache.get(u);d?(a=Promise.resolve(d),(0,s.default)("almanac::factValue cache hit for fact:"+e)):((0,s.default)("almanac::factValue cache miss for fact:"+e+"; calculating"),a=this._setFactValue(c,n,c.calculate(n,this)))}return i?((0,s.default)("condition::evaluate extracting object property "+i),a.then((function(e){if((0,l.default)(e)){var n=t.pathResolver(e,i);return(0,s.default)("condition::evaluate extracting object property "+i+", received: "+JSON.stringify(n)),n}return(0,s.default)("condition::evaluate could not compute object path("+i+") of non-object: "+e+" <"+(void 0===e?"undefined":r(e))+">; continuing with "+e),e}))):a}}]),e}();t.default=h},s9Xn:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("D57K"),i=n("hSRu"),a=n("YtkY"),o=n("/AMt"),s=n("EM62"),c=n("pYIu"),l=n("tG6W"),u=n("2kYt"),d=n("LA+B");function p(e,t){if(1&e&&s.hc(0,"toolbar-grid-dropdown-item",6),2&e){var n=t.$implicit;s.Dc("item",n)}}function h(e,t){1&e&&s.hc(0,"div",7)}function f(e,t){if(1&e&&s.hc(0,"toolbar-grid-dropdown-item",6),2&e){var n=t.$implicit;s.Dc("item",n)}}function m(e,t){if(1&e&&(s.mc(0,"div",8),s.dd(1,f,1,1,"toolbar-grid-dropdown-item",3),s.lc()),2&e){var n=t.$implicit;s.Sb(1),s.Dc("ngForOf",n)}}var g=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnClickOutside:!0,closeOnBlur:!1}},b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"defaultItems",{get:function(){return this._data.pipe(Object(a.a)((function(e){var t=[];return e.value.forEach((function(e){return t.push(e.filter((function(e){return e&&!e.custom})))})),t})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customItems",{get:function(){return this._data.pipe(Object(a.a)((function(e){var t=[];return e.value.forEach((function(e){return t.push(e.filter((function(e){return e&&e.custom})))})),Object(o.a)(t)})))},enumerable:!1,configurable:!0}),t.prototype.setData=function(e){e.value&&e.value[0]&&!Array.isArray(e.value[0])&&(e.value=[e.value]),this.data=e},t.\u0275fac=function(e){return v(e||t)},t.\u0275cmp=s.ac({type:t,selectors:[["toolbar-grid-dropdown"]],features:[s.Pb],decls:10,vars:15,consts:[[1,"toolbar-grid-dropdown-container",3,"settings"],["dd",""],["ddbutton","",3,"items","props"],["dditem","",3,"item",4,"ngFor","ngForOf"],["dditem","","class","separator",4,"ngIf"],["dditem","","class","toolbar-grid-row-container",4,"ngFor","ngForOf"],["dditem","",3,"item"],["dditem","",1,"separator"],["dditem","",1,"toolbar-grid-row-container"]],template:function(e,t){if(1&e&&(s.mc(0,"abs-dropdown",0,1),s.hc(2,"toolbar-dropdown-button",2),s.zc(3,"async"),s.dd(4,p,1,1,"toolbar-grid-dropdown-item",3),s.zc(5,"async"),s.dd(6,h,1,0,"div",4),s.zc(7,"async"),s.dd(8,m,2,1,"div",5),s.zc(9,"async"),s.lc()),2&e){var n,r;s.Dc("settings",s.Hc(14,g)),s.Sb(2),s.Dc("items",null==(n=s.Ac(3,6,t._data))?null:n.value[0])("props",t.props),s.Sb(2),s.Dc("ngForOf",s.Ac(5,8,t.customItems)),s.Sb(2),s.Dc("ngIf",(null==(r=s.Ac(7,10,t.customItems))?null:r.length)>0),s.Sb(2),s.Dc("ngForOf",s.Ac(9,12,t.defaultItems))}},directives:[c.a,l.a,u.s,u.t,d.a],pipes:[u.b],styles:[".nu-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.separator[_ngcontent-%COMP%]{margin:.25rem 0 .5rem;height:1px;width:100%;background:#f1f4fa}.toolbar-grid-dropdown-container[_ngcontent-%COMP%]{display:inline-block;width:35px}.toolbar-grid-dropdown-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{max-width:262px}.toolbar-grid-row-container[_ngcontent-%COMP%]:not(:last-child){margin-bottom:.125rem;display:flex}toolbar-grid-dropdown-item[_ngcontent-%COMP%]{display:inline-grid}toolbar-grid-dropdown-item[_ngcontent-%COMP%]:not(:last-child){margin-right:.25rem}"],changeDetection:0}),t}(i.a),v=s.oc(b)},sKtG:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("hSRu"),a=n("EM62"),o=n("pYIu"),s=n("Gjo4"),c=n("2kYt"),l=n("Mb5J");function u(e,t){if(1&e&&a.hc(0,"toolbar-list-dropdown-item",7),2&e){var n=t.$implicit;a.Dc("item",n)}}function d(e,t){if(1&e&&a.hc(0,"toolbar-list-dropdown-item",8),2&e){var n=t.$implicit;a.Dc("item",n)}}var p=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnClickOutside:!0,closeOnBlur:!1}},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=a.ac({type:t,selectors:[["toolbar-input-list-dropdown"]],features:[a.Pb],decls:11,vars:14,consts:[[1,"ftb-item","ftb-item-text"],[3,"settings"],["dd",""],["ddbutton","",3,"validation","items","inputChanged"],["class","fx-margin-bottom-10 custom-option","dditem","",3,"item",4,"ngFor","ngForOf"],["dditem",""],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10","custom-option",3,"item"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.mc(0,"div",0),a.mc(1,"abs-dropdown",1,2),a.mc(3,"toolbar-dropdown-input",3),a.uc("inputChanged",(function(e){return t.change.next(e)})),a.zc(4,"async"),a.zc(5,"async"),a.lc(),a.dd(6,u,1,1,"toolbar-list-dropdown-item",4),a.zc(7,"async"),a.hc(8,"hr",5),a.dd(9,d,1,1,"toolbar-list-dropdown-item",6),a.zc(10,"async"),a.lc(),a.lc()),2&e){var n,r;a.Sb(1),a.Dc("settings",a.Hc(13,p)),a.Sb(2),a.Dc("validation",null==(n=a.Ac(4,5,t._data))?null:n.validation)("items",null==(r=a.Ac(5,7,t._data))?null:r.value),a.Sb(3),a.Dc("ngForOf",a.Ac(7,9,t.customItems)),a.Sb(3),a.Dc("ngForOf",a.Ac(10,11,t.defaultItems))}},directives:[o.a,s.a,c.s,l.a],pipes:[c.b],styles:[".custom-option[_ngcontent-%COMP%]  li:last-child{border-bottom:1px solid #dcdcdc}abs-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:50px}toolbar-list-dropdown-item[_ngcontent-%COMP%]  .body{line-height:1}"],changeDetection:0}),t}(i.a),f=a.oc(h)},sfKy:function(e,t,n){var r=n("oFOz");t.flattenShallow=function(e){return e&&e.reduce?e.reduce((function(e,t){var n=Array.isArray(e),r=Array.isArray(t);return n&&r?e.concat(t):n?(e.push(t),e):r?[e].concat(t):[e,t]})):e},t.isFlat=function(e){if(!e)return!1;for(var t=0;t<e.length;++t)if(Array.isArray(e[t]))return!1;return!0},t.flatten=function(){for(var e=t.argsToArray.apply(null,arguments);!t.isFlat(e);)e=t.flattenShallow(e);return e},t.argsToArray=function(e){var n=[];return t.arrayEach(e,(function(e){n.push(e)})),n},t.numbers=function(){var e=this.flatten.apply(null,arguments);return e.filter((function(e){return"number"==typeof e}))},t.cleanFloat=function(e){var t=1e14;return Math.round(e*t)/t},t.parseBool=function(e){if("boolean"==typeof e)return e;if(e instanceof Error)return e;if("number"==typeof e)return 0!==e;if("string"==typeof e){var t=e.toUpperCase();if("TRUE"===t)return!0;if("FALSE"===t)return!1}return e instanceof Date&&!isNaN(e)||r.value},t.parseNumber=function(e){return e instanceof Error?e:null==e||""===e?0:("boolean"==typeof e&&(e=+e),isNaN(e)?r.value:parseFloat(e))},t.parseString=function(e){return e instanceof Error?e:null==e?"":e.toString()},t.parseNumberArray=function(e){var n,i;if(!e||0===(n=e.length))return r.value;for(;n--;){if(e[n]instanceof Error)return e[n];if((i=t.parseNumber(e[n]))instanceof Error)return i;e[n]=i}return e},t.parseMatrix=function(e){var n;if(!e||0===e.length)return r.value;for(var i=0;i<e.length;i++)if(n=t.parseNumberArray(e[i]),e[i]=n,n instanceof Error)return n;return e},t.parseDate=function(e){if(!isNaN(e)){if(e instanceof Date)return new Date(e);var t=parseFloat(e);return t<0||t>=2958466?r.num:function(e){e<60&&(e+=1);var t=Math.floor(e-25569),n=new Date(86400*t*1e3),r=e-Math.floor(e)+1e-7,i=Math.floor(86400*r),a=i%60;i-=a;var o=Math.floor(i/3600),s=Math.floor(i/60)%60,c=n.getDate(),l=n.getMonth();e>=60&&e<61&&(c=29,l=1);return new Date(n.getFullYear(),l,c,o,s,a)}(t)}return"string"!=typeof e||(e=new Date(e),isNaN(e))?r.value:e},t.parseDateArray=function(e){for(var t,n=e.length;n--;){if((t=this.parseDate(e[n]))===r.value)return t;e[n]=t}return e},t.anyError=function(){for(var e=0;e<arguments.length;e++)if(arguments[e]instanceof Error)return arguments[e]},t.isDefined=function(e){return null!=e},t.anyIsError=function(){for(var e=arguments.length;e--;)if(arguments[e]instanceof Error)return!0;return!1},t.anyIsString=function(){for(var e=arguments.length;e--;)if("string"==typeof arguments[e])return!0;return!1},t.arrayValuesToNumbers=function(e){for(var t,n=e.length;n--;)if("number"!=typeof(t=e[n]))if(!0!==t)if(!1!==t){if("string"==typeof t){var r=this.parseNumber(t);r instanceof Error?e[n]=0:e[n]=r}}else e[n]=0;else e[n]=1;return e},t.rest=function(e,t){return t=t||1,e&&"function"==typeof e.slice?e.slice(t):e},t.initial=function(e,t){return t=t||1,e&&"function"==typeof e.slice?e.slice(0,e.length-t):e},t.arrayEach=function(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e},t.transpose=function(e){return e?e[0].map((function(t,n){return e.map((function(e){return e[n]}))})):r.value}},svB4:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),a.default(e),o.default(e),s.default(e),c.default(e),l.default(e),u.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var i=r(n("tH/t")),a=r(n("dnLt")),o=r(n("LDpk")),s=r(n("FeJI")),c=r(n("PKsm")),l=r(n("d+30")),u=r(n("UaQO"))},tG6W:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("EM62"),a=n("NNJu"),o=n("jHi0"),s=n("2kYt"),c=n("g5Ym");function l(e,t){if(1&e&&(i.mc(0,"div",4),i.hc(1,"static-image",5),i.xc(),i.mc(2,"svg",6),i.hc(3,"use",7),i.lc(),i.lc()),2&e){var n=i.yc();i.Sb(1),i.Dc("enableHover",!0)("type",n.buttonIcon.type)("value",n.buttonIcon.value)("width",n.buttonIcon.width||35)("height",n.buttonIcon.height||20)}}function u(e,t){if(1&e&&(i.mc(0,"div",8),i.mc(1,"span",9),i.fd(2),i.lc(),i.xc(),i.mc(3,"svg",10),i.hc(4,"use",7),i.lc(),i.lc()),2&e){var n=i.yc();i.Sb(2),i.hd(" ",n.buttonLabel," ")}}var d=function(e){function t(t){return e.call(this,t)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"tooltipValue",{get:function(){return this.props?this.props.tooltip:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonIcon",{get:function(){return this.item?this.item.buttonIcon:{type:"svg",value:this.props?this.props.icon:void 0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonLabel",{get:function(){return this.item?this.item.buttonLabel:this.props.label?this.props.label:void 0},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(i.gc(i.r))},t.\u0275cmp=i.ac({type:t,selectors:[["toolbar-dropdown-button"]],inputs:{props:"props"},features:[i.Rb([{provide:a.i,useExisting:Object(i.lb)((function(){return t}))}]),i.Pb],decls:5,vars:4,consts:[["tooltip","","placement","top",1,"toolbar-dd-button-container",3,"deactivated"],["class","toolbar-dd-button-icon btn-icon",4,"ngIf"],["class","toolbar-dd-button-text nu-dropdown-container btn-list-item",4,"ngIf"],[1,"tooltip-content"],[1,"toolbar-dd-button-icon","btn-icon"],[3,"enableHover","type","value","width","height"],[1,"nu-icon","toolbar-dd-button-arrow"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-fill"],[1,"toolbar-dd-button-text","nu-dropdown-container","btn-list-item"],[1,"toolbar-dd-button-text-inner","fx-ellipsis","body"],[1,"nu-icon-small","nu-dropdown-arrow"]],template:function(e,t){1&e&&(i.mc(0,"a",0),i.dd(1,l,4,5,"div",1),i.dd(2,u,5,1,"div",2),i.mc(3,"span",3),i.fd(4),i.lc(),i.lc()),2&e&&(i.Dc("deactivated",!t.tooltipValue),i.Sb(1),i.Dc("ngIf",t.buttonIcon),i.Sb(1),i.Dc("ngIf",!t.buttonIcon),i.Sb(2),i.gd(t.tooltipValue))},directives:[o.a,s.t,c.a],styles:[".toolbar-dd-button-icon[_ngcontent-%COMP%]{display:inline-block;width:100%;position:relative}.toolbar-dd-button-icon[_ngcontent-%COMP%]  .static-image-container{height:35px;width:35px}.toolbar-dd-button-icon[_ngcontent-%COMP%]  .nu-icon{margin-left:-.25rem;margin-top:-.25rem;color:#354b53}.toolbar-dd-button-icon[_ngcontent-%COMP%]:hover  svg{color:#08436b}.toolbar-dd-button-text[_ngcontent-%COMP%]{min-width:55px}.toolbar-dd-button-text[_ngcontent-%COMP%]   .nu-dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(90deg) translate(6px,2px);fill:#caccce}.toolbar-dd-button-container[_ngcontent-%COMP%]{display:inline-block}.toolbar-dd-button-container[_ngcontent-%COMP%]   .nu-dropdown-container[_ngcontent-%COMP%]{height:32px}.toolbar-dd-button-text-inner[_ngcontent-%COMP%]{padding:.5rem 1.5rem .5rem .625rem;border-radius:.25rem;height:32px;display:flex;align-items:center;color:#354b53}.toolbar-dd-button-arrow[_ngcontent-%COMP%]{position:absolute;right:.125rem;bottom:-.5rem;width:10px;transform:rotate(45deg)}"],changeDetection:0}),t}(a.i)},"tH/t":function(e,t,n){"use strict";t.__esModule=!0;var r=n("XVEb");t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var i=n.inverse,a=n.fn;if(!0===t)return a(this);if(!1===t||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var o=r.createFrame(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(t,n)}))},e.exports=t.default},tLVu:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("Q9lH"),a=n("c7W3"),o=n("NNJu"),s=n("5xGT"),c=n("EM62"),l=n("s2Ay"),u=["richTextArea"],d=function(e){function t(t,n,r,i,a){var o=e.call(this,n,r)||this;return o.translate=t,o.componentFactoryResolver=n,o.injector=r,o.commandService=i,o.state=a,o.textStyles={color:"#7E7E7E"},o.subs=[],o}return Object(r.e)(t,e),t.prototype.onTabUpdate=function(){this.clearSubs(),this.manage()},t.prototype.ngAfterViewInit=function(){this.manage()},t.prototype.manage=function(){var e=this;this.richTextEditorUIC||this.createTextArea();var t=[],n=[];this.shapeAttachments.forEach((function(e){e&&e.type.includes("image")?t.push(e):e&&n.push(e)})),setTimeout((function(){e.insertData(t,n)}),300)},t.prototype.ngOnDestroy=function(){this.clearSubs()},t.prototype.insertData=function(e,t){var n=this;this.richTextEditorUIC.quill.enable(!0),this.richTextEditorUIC.quill.setText("");var r=0;if(t.length>0){var i=this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.FILES_SECTION_TITLE");this.richTextEditorUIC.quill.insertText(r,i,this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(r,"\n",this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.setSelection({index:r,length:0},"api"),t.forEach((function(e){return n.richTextEditorUIC.insertToEditor(e)})),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(r,"\n",this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength()}if(e.length>0){i=this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.IMAGES_SECTION_TITLE");this.richTextEditorUIC.quill.insertText(r,i,this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(r,"\n",this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.setSelection({index:r,length:0},"api"),e.forEach((function(e){return n.richTextEditorUIC.insertToEditor(e,!0)}))}this.richTextEditorUIC.quill.enable(!1)},t.prototype.removeAttachment=function(e){var t,n=this.state.get("Selected")[0];this.commandService.dispatch(a.a.changeAttachments,((t={})[e.id]={action:"remove",shapeId:n},t))},t.prototype.createTextArea=function(){var e=this,t=this.makeComponent(i.a);this.item=t,this.richTextEditorUIC=t.instance,this.richTextEditorUIC.enableUploadOptions=!1,this.richTextEditorUIC.blotOptionCallbacks={remove:function(t){return e.removeAttachment(t)}},this.insert(this.richTextArea,t),t.changeDetectorRef.detectChanges()},t.prototype.clearSubs=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(c.gc(l.e),c.gc(c.m),c.gc(c.C),c.gc(s.B),c.gc(s.Hb))},t.\u0275cmp=c.ac({type:t,selectors:[["attachments-renderer"]],viewQuery:function(e,t){var n;(1&e&&c.kd(u,!0,c.hb),2&e)&&(c.Mc(n=c.vc())&&(t.richTextArea=n.first))},inputs:{shapeAttachments:"shapeAttachments"},features:[c.Pb],decls:2,vars:0,consts:[["richTextArea",""]],template:function(e,t){1&e&&c.hc(0,"div",null,0)},styles:["[_nghost-%COMP%]  .ql-editor{min-height:500px}"],changeDetection:0}),t}(o.k)},tfzy:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=/^-?(?:(?:[0-9]*\.[0-9]+)|[0-9]+)$/,s=/^[a-zA-Z\u0430-\u044f\u0410-\u042f_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][a-zA-Z\u0430-\u044f\u0410-\u042f0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*$/,c=/\\\\/,l=/^\s*$/,u=["'(?:(?:\\\\')|[^'])*'",'"(?:(?:\\\\")|[^"])*"',"\\s+","\\btrue\\b","\\bfalse\\b"],d=["[a-zA-Z\u0430-\u044f\u0410-\u042f_\xc0-\xd6\xd8-\xf6\xf8-\xff\\$][a-zA-Z0-9\u0430-\u044f\u0410-\u042f_\xc0-\xd6\xd8-\xf6\xf8-\xff\\$]*","(?:(?:[0-9]*\\.[0-9]+)|[0-9]+)"],p=["binaryOp","unaryOp","openParen","openBracket","question","colon"],h=function(){function e(t){(0,i.default)(this,e),this._grammar=t}return(0,a.default)(e,[{key:"getElements",value:function(e){var t=this._getSplitRegex();return e.split(t).filter((function(e){return e}))}},{key:"getTokens",value:function(e){for(var t=[],n=!1,r=0;r<e.length;r++)this._isWhitespace(e[r])?t.length&&(t[t.length-1].raw+=e[r]):"-"===e[r]&&this._isNegative(t)?n=!0:(n&&(e[r]="-"+e[r],n=!1),t.push(this._createToken(e[r])));return n&&t.push(this._createToken("-")),t}},{key:"tokenize",value:function(e){var t=this.getElements(e);return this.getTokens(t)}},{key:"_createToken",value:function(e){var t={type:"literal",value:e,raw:e};if('"'===e[0]||"'"===e[0])t.value=this._unquote(e);else if(e.match(o))t.value=parseFloat(e);else if("true"===e||"false"===e)t.value="true"===e;else if(this._grammar.elements[e])t.type=this._grammar.elements[e].type;else{if(!e.match(s))throw new Error("Invalid expression token: ".concat(e));t.type="identifier"}return t}},{key:"_escapeRegExp",value:function(e){return(e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).match(s)&&(e="\\b"+e+"\\b"),e}},{key:"_getSplitRegex",value:function(){var e=this;if(!this._splitRegex){var t=Object.keys(this._grammar.elements).sort((function(e,t){return t.length-e.length})).map((function(t){return e._escapeRegExp(t)}),this);this._splitRegex=new RegExp("("+[u.join("|"),t.join("|"),d.join("|")].join("|")+")")}return this._splitRegex}},{key:"_isNegative",value:function(e){return!e.length||p.some((function(t){return t===e[e.length-1].type}))}},{key:"_isWhitespace",value:function(e){return!!e.match(l)}},{key:"_unquote",value:function(e){var t=e[0],n=new RegExp("\\\\"+t,"g");return e.substr(1,e.length-2).replace(n,t).replace(c,"\\")}}]),e}();e.exports=h},tqrN:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("D57K"),i=n("nsO7"),a=n("wx9+"),o=n("5xGT"),s=n("YtkY"),c=n("Ohay"),l=n("TLy2"),u=n("J+dc"),d=n("mWib"),p=n("QoSw"),h=n("HM3f"),f=n("ROBh"),m=n("g6G6"),g=n("EM62"),b=function(){function e(e,t,n){this.state=e,this.viewport=t,this.ll=n,this.debounce=100,this.rtree=new o.qb}return e.prototype.initialize=function(){var e=this;return Object(h.b)(this.state.changes("SnapToGuides"),this.state.changes("ShowGuides")).pipe(Object(s.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return n||i})),Object(c.a)(),Object(l.a)((function(t){return t?e.ll.forCurrentObserver(!1).pipe(Object(l.a)((function(e){return e.getDiagramOnce()})),Object(l.a)((function(t){return e.manageNodes(t)}))):(e.rtree.clear(),Object(f.a)({}))})))},e.prototype.search=function(e,t,n,r,i){var a=this;void 0===i&&(i=.5);try{return this.rtree.search(e-i,t+i,n-i,r+i).filter((function(e){return!a.state.get("Selected").includes(e.shapeId)})).map((function(e){for(var t in e)"number"==typeof e[t]&&(e[t]=parseFloat(e[t].toFixed(5)));return e}))}catch(o){return[]}},e.prototype.manageNodes=function(e){var t=this;return Object(m.a)(this.getPanZoomChanges(this.debounce).pipe(Object(l.a)((function(){return t.viewport.getShapeModels().pipe(Object(u.a)(1),Object(s.a)((function(n){return t.rtree.clear(),t.rtree.load(Object(i.flatten)(Object(i.values)(n).filter((function(e){return!t.state.get("Selected").includes(e.id)})).map((function(t){return t.getAlignmentNodes(e)}))))})))}))),this.ll.forCurrent(!1).getDiagramChanges().pipe(Object(l.a)((function(){return t.viewport.getShapeModels().pipe(Object(u.a)(1),Object(s.a)((function(n){return t.rtree.clear(),t.rtree.load(Object(i.flatten)(Object(i.values)(n).filter((function(e){return!t.state.get("Selected").includes(e)})).map((function(t){return t.getAlignmentNodes(e)}))))})))}))))},e.prototype.getPanZoomChanges=function(e){return Object(m.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(d.a)(e))},e.\u0275fac=function(t){return new(t||e)(g.qc(o.Hb),g.qc(a.a),g.qc(p.a))},e.\u0275prov=g.cc({token:e,factory:e.\u0275fac}),e}()},u7ZA:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=n("YtkY"),a=n("TLy2"),o=n("J+dc"),s=n("xVbo"),c=n("5xGT"),l=n("ROBh"),u=n("SBw3"),d=n("xcrX"),p=n("QoSw"),h=n("EM62"),f=function(){function e(e,t,n,r){this.state=e,this.ll=t,this.libraryLoader=n,this.featureList=r}return e.prototype.getFeatureData=function(e,t){return this.getSwitchData(e).pipe(Object(i.a)((function(t){return{id:e,value:t.value}})))},e.prototype.transformProperties=function(e,t){var n=this.state.get("Selected");return t.icon="",t.updateToolbarIcon=!0,1!==n.length?Object(l.a)(t):this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(n[0])})),Object(a.a)((function(e){return e&&e.switchable&&(t.icon=e.switchable.shapeIcon),Object(l.a)(t)})),Object(o.a)(1))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return 1!==t.length?Object(l.a)(!1):this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(t[0])})),Object(a.a)((function(e){return Object(l.a)(!!e.switchable)})),Object(o.a)(1))},e.prototype.getApplyData=function(e,t){return this.getSwitchData(e).pipe(Object(i.a)((function(e){return Object(r.a)(Object(r.a)({},e),{id:t.id})})))},e.prototype.getSwitchDefaults=function(e){return e?this.libraryLoader.getLibrary(e).pipe(Object(i.a)((function(e){return e.switchDefaults?e.switchDefaults:{shapes:[],defaultPreferences:{}}}))):Object(l.a)({shapes:[],defaultPreferences:{}})},e.prototype.getSwitchData=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(t.state.get("Selected")[0])})),Object(s.a)((function(e){return!!e&&!!e.switchable})),Object(a.a)((function(e){var n=Object(r.a)({},e.switchable);return e.data&&e.data.switchShape&&(n=Object(r.a)(Object(r.a)({},e.data.switchShape),e.switchable)),t.getSwitchDefaults(n.defaultLibrary).pipe(Object(i.a)((function(t){return[e,n,t]})))})),Object(o.a)(1),Object(i.a)((function(e){var t=e[0],n=e[1],r=e[2],i=n.shapes?n.shapes:[],a=n.value?n.value:[];n.defaultLibrary?(r.shapes.forEach((function(e){e.defId===t.defId||i.find((function(t){return t.defId===e.defId}))||(i.push(e),a.push(e.data))})),n.defaultPreferences=r.defaultPreferences,n.shapes=i,n.value=a):n.defaultPreferences={};for(var o=[],s=0;s<n.value.length;s+=3)o.push([n.value[s],n.value[s+1],n.value[s+2]]);return n.value=o,n})),Object(o.a)(1))},e.\u0275fac=function(t){return new(t||e)(h.qc(c.Hb),h.qc(p.a),h.qc(d.a),h.qc(u.a))},e.\u0275prov=h.cc({token:e,factory:e.\u0275fac}),e}()},"u80+":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D57K"),i=n("5xGT"),a=n("YtkY"),o=n("Ohay"),s=n("TLy2"),c=n("hX56"),l=n("nsO7"),u=n("4y1S"),d=n("HM3f"),p=n("6Oco"),h=n("Jzy8"),f=n("nWGD"),m=n("EM62"),g=function(){function e(e,t,n,r){this.locator=e,this.state=t,this.dataStore=n,this.userLocator=r}return e.prototype.getCollabs=function(e){var t=this;return this.locator.getTask(e).pipe(Object(a.a)((function(e){return e.roles||[]})),Object(o.a)(l.isEqual),Object(s.a)((function(e){var n=e.map((function(e){return t.userLocator.getUserInfo(e.userId).pipe(Object(a.a)((function(t){return Object.assign(new h.c(e.userId),t)})))}));return n.length>0?d.b.apply(void 0,Object(r.j)(n)):Object(p.b)()})),Object(a.a)((function(e){return t.sortCollabs(e)})))},e.prototype.sortCollabs=function(e){return e.slice().sort((function(e,t){return e.roleSortOrderWithoutOnline-t.roleSortOrderWithoutOnline}))},e.\u0275fac=function(t){return new(t||e)(m.qc(f.a),m.qc(i.Hb),m.qc(c.b),m.qc(u.x))},e.\u0275prov=m.cc({token:e,factory:e.\u0275fac}),e}()},ujvC:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("SBw3"),i=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(i.a)({value:t.data,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){return Object(i.a)({styles:{size:t.value},takeFocus:t.takeFocus,stateContext:t.stateContext})},e.\u0275fac=function(t){return new(t||e)(a.qc(r.a))},e.\u0275prov=a.cc({token:e,factory:e.\u0275fac}),e}()},umwn:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return S}));var r,i=n("D57K"),a=n("5xGT"),o=n("C05f"),s=n("ZTXN"),c=n("EM62"),l=n("/ege"),u=n("2kYt"),d=n("s2Ay"),p=n("nwI5"),h=n("bL7E"),f=["window"],m=["windowInner"];function g(e,t){1&e&&(c.mc(0,"h1",12),c.fd(1,"DATA_IMPORT.IMPORT_DATABASE"),c.lc())}function b(e,t){1&e&&(c.mc(0,"h1",12),c.fd(1,"CSV_DATA_IMPORT.HEADING.CONNECT_TO_DATA_SOURCE"),c.lc())}function v(e,t){if(1&e){var n=c.nc();c.mc(0,"li",19),c.uc("click",(function(){c.Qc(n);var e=t.$implicit;return c.yc(3).selectedImportOption.next(e.id)})),c.xc(),c.mc(1,"svg",20),c.hc(2,"use"),c.lc(),c.wc(),c.mc(3,"span",21),c.fd(4),c.lc(),c.lc()}if(2&e){var r=t.$implicit,i=c.yc().ngLet;c.Yb("active",r.id===i),c.Sb(2),c.Tb("href","./assets/icons/symbol-defs.svg#nu-ic-"+r.icon,null,"xlink"),c.Sb(2),c.gd(r.label)}}function _(e,t){if(1&e&&c.hc(0,"csv-data-import-panel",22),2&e){var n=c.yc(3);c.Dc("importingInto",n.importingInto)("showSidebar",n.sidebarVisible)("closeWindow",n.closeWindowObs)}}function y(e,t){if(1&e&&c.hc(0,"google-sheets-data-import-window",22),2&e){var n=c.yc(3);c.Dc("importingInto",n.importingInto)("showSidebar",n.sidebarVisible)("closeWindow",n.closeWindowObs)}}function O(e,t){1&e&&(c.mc(0,"div",25),c.mc(1,"div",26),c.mc(2,"h1",27),c.fd(3,"LABELS.COMING_SOON_EX"),c.lc(),c.hc(4,"img",28),c.lc(),c.mc(5,"ul",29),c.mc(6,"li"),c.mc(7,"span",30),c.fd(8,"AZURE_DEVOPS_IMPORT.INFO.LIST_ITEM_1"),c.lc(),c.lc(),c.mc(9,"li"),c.mc(10,"span",30),c.fd(11,"AZURE_DEVOPS_IMPORT.INFO.LIST_ITEM_2"),c.lc(),c.lc(),c.mc(12,"li"),c.mc(13,"span",30),c.fd(14,"AZURE_DEVOPS_IMPORT.INFO.LIST_ITEM_3"),c.lc(),c.lc(),c.lc(),c.lc())}function x(e,t){1&e&&(c.mc(0,"div",25),c.mc(1,"div",26),c.mc(2,"h1",27),c.fd(3,"LABELS.COMING_SOON_EX"),c.lc(),c.hc(4,"img",28),c.lc(),c.mc(5,"ul",29),c.mc(6,"li"),c.mc(7,"span",30),c.fd(8,"JIRA_IMPORT.INFO.LIST_ITEM_1"),c.lc(),c.lc(),c.mc(9,"li"),c.mc(10,"span",30),c.fd(11,"JIRA_IMPORT.INFO.LIST_ITEM_2"),c.lc(),c.lc(),c.mc(12,"li"),c.mc(13,"span",30),c.fd(14,"JIRA_IMPORT.INFO.LIST_ITEM_3"),c.lc(),c.lc(),c.lc(),c.lc())}function E(e,t){1&e&&(c.mc(0,"div",25),c.mc(1,"div",26),c.mc(2,"h1",27),c.fd(3,"LABELS.COMING_SOON_EX"),c.lc(),c.hc(4,"img",28),c.lc(),c.mc(5,"ul",29),c.mc(6,"li"),c.mc(7,"span",30),c.fd(8,"GITHUB_IMPORT.INFO.LIST_ITEM_1"),c.lc(),c.lc(),c.mc(9,"li"),c.mc(10,"span",30),c.fd(11,"GITHUB_IMPORT.INFO.LIST_ITEM_2"),c.lc(),c.lc(),c.mc(12,"li"),c.mc(13,"span",30),c.fd(14,"GITHUB_IMPORT.INFO.LIST_ITEM_3"),c.lc(),c.lc(),c.lc(),c.lc())}function k(e,t){if(1&e&&(c.mc(0,"div",23),c.dd(1,O,15,0,"div",24),c.dd(2,x,15,0,"div",24),c.dd(3,E,15,0,"div",24),c.lc()),2&e){var n=c.yc().ngLet;c.Sb(1),c.Dc("ngIf","azure_devops"===n),c.Sb(1),c.Dc("ngIf","jira"===n),c.Sb(1),c.Dc("ngIf","github"===n)}}function C(e,t){if(1&e&&(c.mc(0,"div",13),c.mc(1,"div",14),c.zc(2,"async"),c.mc(3,"ul"),c.dd(4,v,5,4,"li",15),c.lc(),c.lc(),c.mc(5,"div",16),c.dd(6,_,1,3,"csv-data-import-panel",17),c.dd(7,y,1,3,"google-sheets-data-import-window",17),c.dd(8,k,4,3,"div",18),c.lc(),c.lc()),2&e){var n=t.ngLet,r=c.yc(2);c.Sb(1),c.Yb("fx-hidden",!1===c.Ac(2,6,r.sidebarVisible)),c.Sb(3),c.Dc("ngForOf",r.dataImportOptions),c.Sb(2),c.Dc("ngIf","csv"===n),c.Sb(1),c.Dc("ngIf","google_sheets"===n),c.Sb(1),c.Dc("ngIf","csv"!==n&&"google_sheets"!==n)}}function w(e,t){if(1&e){var n=c.nc();c.mc(0,"div",3,4),c.zc(2,"async"),c.mc(3,"div",5),c.dd(4,g,2,0,"h1",6),c.dd(5,b,2,0,"h1",6),c.mc(6,"button",7),c.uc("click",(function(){return c.Qc(n),c.yc().closeWindow()})),c.xc(),c.mc(7,"svg",8),c.hc(8,"use",9),c.lc(),c.lc(),c.lc(),c.wc(),c.mc(9,"div",10),c.dd(10,C,9,8,"div",11),c.zc(11,"async"),c.lc(),c.lc()}if(2&e){var r=t.ngLet,i=c.yc();c.Yb("mappings-step",!1===c.Ac(2,5,i.sidebarVisible)),c.Sb(4),c.Dc("ngIf","jira"===r||"github"===r||"azure_devops"===r),c.Sb(1),c.Dc("ngIf","csv"===r||"google_sheets"===r),c.Sb(5),c.Dc("ngLet",c.Ac(11,7,i.selectedImportOption))}}!function(e){e.CSV="csv",e.GOOGLE_SHEETS="google_sheets",e.GITHUB="github",e.JIRA="jira",e.AZURE_DEVOPS="azure_devops"}(r||(r={}));var S=function(e){function t(t){var n=e.call(this)||this;return n.modalController=t,n.dataImportOptions=[{id:r.CSV,label:"Import CSV",icon:"csv"},{id:r.GITHUB,label:"Github",icon:"github"},{id:r.JIRA,label:"Jira",icon:"jira"},{id:r.AZURE_DEVOPS,label:"Azure DevOps",icon:"azure"},{id:r.GOOGLE_SHEETS,label:"Google Sheets",icon:"gsheets"}],n.selectedImportOption=new o.a(r.CSV),n.sidebarVisible=new o.a(!0),n.closeWindowObs=new s.a,n.subs=[],n}return Object(i.e)(t,e),t.prototype.ngOnInit=function(){var e=this;this.selectedImportOption.next(this.dataImportOption),this.subs.push(this.closeWindowObs.subscribe((function(){return e.closeWindow()})))},t.prototype.ngAfterViewInit=function(){},t.prototype.closeWindow=function(){var e=this;this.container&&this.containerInner&&this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}})},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(c.gc(a.fb))},t.\u0275cmp=c.ac({type:t,selectors:[["data-import-window"]],viewQuery:function(e,t){var n;(1&e&&(c.kd(f,!0),c.kd(m,!0)),2&e)&&(c.Mc(n=c.vc())&&(t.container=n.first),c.Mc(n=c.vc())&&(t.containerInner=n.first))},features:[c.Pb],decls:4,vars:3,consts:[[1,"fx-cover","fx-center-all","modal-window-container"],["window",""],["class","modal-window-inner",3,"mappings-step",4,"ngLet"],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["class","nu2-caption-large-bold","translate","",4,"ngIf"],[1,"nu-btn-small","nu-btn-icon","modal-window-close-btn",3,"click"],[1,"nu-icon","nu-icon-large","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"modal-window-content"],["class","horizontal-container full-height",4,"ngLet"],["translate","",1,"nu2-caption-large-bold"],[1,"horizontal-container","full-height"],[1,"left-sidebar","full-height"],[3,"active","click",4,"ngFor","ngForOf"],[1,"content-panel","full-height"],["class","full-height",3,"importingInto","showSidebar","closeWindow",4,"ngIf"],["class","coming-soon-container",4,"ngIf"],[3,"click"],[1,"nu-icon","nu-icon-med"],[1,"nu2-caption-3"],[1,"full-height",3,"importingInto","showSidebar","closeWindow"],[1,"coming-soon-container"],["class","info-container fx-margin-bottom-25",4,"ngIf"],[1,"info-container","fx-margin-bottom-25"],[1,"info-heading"],["translate","",1,"nu2-heading-6","fx-margin-bottom-15"],["src","./assets/images/data-import/data-source.svg"],[1,"nu2-body-small"],["translate",""]],template:function(e,t){1&e&&(c.mc(0,"div",0,1),c.dd(2,w,12,9,"div",2),c.zc(3,"async"),c.lc()),2&e&&(c.Sb(2),c.Dc("ngLet",c.Ac(3,1,t.selectedImportOption)))},directives:[l.a,u.t,d.a,u.s,p.a,h.a],pipes:[u.b],styles:[".modal-window-inner[_ngcontent-%COMP%]{padding:0;width:632px;height:484px}.modal-window-inner.mappings-step[_ngcontent-%COMP%]{height:auto;min-height:600px}.modal-window-inner.mappings-step[_ngcontent-%COMP%]   .modal-window-content[_ngcontent-%COMP%]{margin-bottom:.875rem}.modal-window-content[_ngcontent-%COMP%]{padding:0}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;align-content:flex-start;align-items:flex-start}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{padding:1.25rem;background:linear-gradient(0deg,rgba(12,94,150,.05),rgba(12,94,150,.05)),hsla(0,0%,100%,.65);width:100%}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:.625rem;list-style-position:outside}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:1rem}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{word-spacing:.25rem}  .modal-window-content{padding-left:1.25rem;padding-right:1.25rem;height:calc(100% - 98px)}  .modal-window-content button.btn-secondary{padding:.375rem .625rem}  .mappings-container{height:350px}  .mappings-container.has-errors{height:280px}  .container-heading h1{color:#04263d}  .container-heading span{color:rgba(20,40,46,.8)}.modal-window-heading[_ngcontent-%COMP%]{padding-top:1.75rem;padding-bottom:2.25rem;padding-left:.625rem;color:#435358;display:flex;flex-direction:row;align-items:center;align-content:center;justify-content:space-between}.modal-window-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.vertical-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:linear-gradient(0deg,rgba(12,94,150,.05),rgba(12,94,150,.05)),hsla(0,0%,100%,.65);justify-content:center;height:100%}.horizontal-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.modal-window-footer[_ngcontent-%COMP%]{padding:0 1.25rem;display:flex;justify-content:flex-end}.modal-window-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{padding:.375rem .625rem}.modal-window-inner[_ngcontent-%COMP%]  .abs-dropdown-inner, .modal-window-inner[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:100%;max-width:100%}.content-panel[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;width:100%;height:100%;border-left:1px solid rgba(42,82,94,.05)}.full-height[_ngcontent-%COMP%]{height:100%}.left-sidebar[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:160px;list-style-type:none}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.625rem;display:flex;flex-direction:row;width:100%;align-content:center;justify-content:flex-start;align-items:center}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:linear-gradient(0deg,rgba(12,94,150,.05),rgba(12,94,150,.05)),hsla(0,0%,100%,.65)}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:rgba(12,94,150,.2)}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#04263d}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:.875rem;color:#435358}.info-heading[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;justify-content:space-between}"],changeDetection:0}),t}(a.mb)},vRBZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("NNJu"),i=n("C05f"),a=n("EM62"),o=n("jHi0"),s=n("s2Ay"),c=n("2kYt");function l(e,t){1&e&&a.hc(0,"div",4)}var u=function(){function e(e){this.element=e,this.height=33,this.marginBottom=15,this.showIndicator=new i.a(!1)}return Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this.icon},enumerable:!1,configurable:!0}),e.prototype.setIndicator=function(e){this.showIndicator.next(e)},e.prototype.toggleZoom=function(e){void 0===e&&(e=!1);var t={transform:"scale(0,0)"},n={transform:"scale(1,1)"},i=t,a=n;!0===e&&(i=n,a=t);var o=new r.e({from:i,to:a,transitionProperty:"transform",duration:300,easing:"ease-in-out"});return o.element=this.element.nativeElement.firstElementChild,o},e.\u0275fac=function(t){return new(t||e)(a.gc(a.r))},e.\u0275cmp=a.ac({type:e,selectors:[["sidebar-button"]],decls:7,vars:9,consts:[["tooltip","","placement","left"],[1,"nu-icon","light-nv-blue"],["translate","",1,"tooltip-content"],["class","cti-new-comment-indicator",4,"ngIf"],[1,"cti-new-comment-indicator"]],template:function(e,t){1&e&&(a.mc(0,"button",0),a.xc(),a.mc(1,"svg",1),a.hc(2,"use"),a.lc(),a.wc(),a.mc(3,"span",2),a.fd(4),a.lc(),a.dd(5,l,1,0,"div",3),a.zc(6,"async"),a.lc()),2&e&&(a.Wb("sidebar-button nu-btn-med nu-btn-icon nu-ic-",t.icon,""),a.Tb("data-testid",t.id+"-button"),a.Sb(2),a.Tb("href",t.iconHref,null,"xlink"),a.Sb(2),a.gd(t.tooltip),a.Sb(1),a.Dc("ngIf",a.Ac(6,7,t.showIndicator)))},directives:[o.a,s.a,c.t],pipes:[c.b],styles:[".nu-ic-properties[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:2px}.cti-new-comment-indicator[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#f36c67;position:absolute;right:8px;top:7px;border-radius:100%;outline:2px solid #fff}"],changeDetection:0}),e}()},vdZD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("NNJu"),a=n("EM62"),o=n("/g0E"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.isSelected=!1,n}return Object(r.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.gc(a.r))},t.\u0275cmp=a.ac({type:t,selectors:[["toolbar-shape-style-dropdown-item"]],inputs:{isSelected:"isSelected"},features:[a.Rb([{provide:i.j,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:3,vars:3,consts:[["tabindex","-1",1,"tss-dd-item-container","abs-dropdown-item","fx-center-all"],["dditem","",1,"style-tile-container"],["svgType","circle",3,"data"]],template:function(e,t){1&e&&(a.mc(0,"li",0),a.mc(1,"div",1),a.hc(2,"styling-tile",2),a.lc(),a.lc()),2&e&&(a.Sb(2),a.Yb("selected",t.isSelected),a.Dc("data",t.item))},directives:[o.a],styles:[".tss-dd-item-container[_ngcontent-%COMP%]  .selected .style-tile-wrapper svg .inner{stroke:#fff!important;stroke-width:1px!important}.tss-dd-item-container[_ngcontent-%COMP%]  .selected .style-tile-wrapper svg .outline{stroke-width:2px!important}"],changeDetection:0}),t}(i.j)},vz8n:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("i9EC"),t),i(n("fxI9"),t),i(n("Aq/p"),t),i(n("kgBD"),t),i(n("QuwQ"),t)},wOpJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("nsO7"),a=n("5xGT"),o=n("h1tj"),s=n("C0rp"),c=function(e){function t(t){var n=e.call(this)||this;return n._doc=s.document(t),n}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"text",{set:function(e){this._text=e},enumerable:!1,configurable:!0}),t.prototype.setDefaultStyles=function(e){this._doc.setDefaultStyles(e)},t.prototype.draw=function(t,n){if(void 0===n&&(n=!1),!this._text||!this._text.length)return!0;if(e.prototype.draw.call(this,t,n))return!0;if(this._text&&this._text[0]&&this._text[0].backgroundColor){var r=this._doc.frame.actualWidth()+5,i=this._doc.frame.actualHeight()+2.5,a=this.getBounds().x-2.5,o=this.getBounds().y;t.beginPath(),t.moveTo(a+5,o),t.arcTo(a+r,o,a+r,o+i,5),t.arcTo(a+r,o+i,a,o+i,5),t.arcTo(a,o+i,a,o,5),t.arcTo(a,o,a+r,o,5),t.closePath(),t.fillStyle=this._text[0].backgroundColor,t.fill()}return this._doc.load(this._text),this._doc.width(this.lineWidth),this._doc.draw(t),!0},t.prototype.getBounds=function(){return new o.Rectangle(0,0,this._doc.frame.actualWidth(),this._doc.frame.actualHeight())},t}(o.DisplayObject),l=n("X0jn"),u=n("xzff"),d=function(e){function t(t){var n=e.call(this,l.b)||this;return n.cachedBounds=null,n.name=t.id,n.hitArea=new o.Shape,n.update(t),n}return Object(r.e)(t,e),t.prototype.getCursor=function(e){return e.includes("editor")&&e.includes("normal")&&e.includes("selected")?{cursor:"text",tail:null,type:"css"}:{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t.prototype.updateHitArea=function(e,t){var n=a.ub.from(t),r=this.hitArea;r.graphics.clear(),r.graphics.beginFill("#000"),e.hitArea?r.graphics.drawRect(0,0,e.hitArea.width,e.hitArea.height):e.editable&&r.graphics.drawRect(n.x,n.y,this.lineWidth,n.height),r.graphics.endFill()},t.prototype.updateViewCache=function(e,n){if(this.cachedBounds&&(this.cachedBounds.width===this.lineWidth&&this.cachedBounds.height===e.height?(a.gb.hasChanges(n,"texts."+e.id+".content")||a.gb.hasChanges(n,"texts."+e.id+".handlebars"))&&this.updateCache():(this.uncache(),this.cachedBounds=null)),!this.cachedBounds){if(!this.hasRenderableText(e.content))return;if(!this.lineWidth||!e.height)return void a.cb.warning("TextView: Found text model without width/height",e);this.cache(-t.CACHE_PADDING,-t.CACHE_PADDING,this.lineWidth+2*t.CACHE_PADDING,e.height+2*t.CACHE_PADDING,t.CACHE_DENSITY),this.cachedBounds={width:this.lineWidth,height:e.height}}},t.prototype.update=function(e,t){if(this.hasRenderableText(e.content)){if(Object(i.isEmpty)(e.handlebars))this.text=e.content;else{var n=JSON.parse(e.handlebars),a=e.content.map((function(e){var t=e.text.replace(/\{\{/g,"{{["),i=t=t.replace(/\}\}/g,"]}}"),a=i;try{a=u.compile(i)(n)}catch(o){}return Object(r.a)(Object(r.a)({},e),{text:a})}));this.text=a}this.lineWidth=e.width}else this.hasRenderableText(e.placeholder)?(this.text=e.placeholder,this.lineWidth=e.width):(this.text=[],this.lineWidth=0)},t.prototype.destroy=function(){this.parent?this.parent.removeChild(this):a.cb.error("TextView.destroy called but this.parent was null.")},t.prototype.getTextBounds=function(e,t){void 0===t&&(t=1e4);var n=document.createElement("canvas"),r=new c(l.b);return r.text=e,r.lineWidth=t,r.draw(n.getContext("2d")),r.getBounds()},t.prototype.hasRenderableText=function(e){var t,n;if(e&&e.length)try{for(var i=Object(r.k)(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(o&&o.text&&o.text.trim().length>0)return!0}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1},t.CACHE_PADDING=10,t.CACHE_DENSITY=2,t}(c)},wf7V:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("ROBh"),i=n("nsO7"),a=n("EM62"),o=function(){function e(){}return e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,itemIcon:{type:"image",value:e.icon},buttonIcon:{type:"image",value:e.icon},value:e.id,shapeId:t.shapeId}})),a=Object(i.uniqBy)(n,(function(e){return e.id}));return a.find((function(e){return e.id===t.selected})).selected=!0,Object(r.a)({value:a})},e.prototype.getApplyData=function(e,t){var n={changes:{}};return n.changes[t.shapeId]={entryClass:t.value},Object(r.a)(n)},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.cc({token:e,factory:e.\u0275fac}),e}()},wk5G:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r,i=n("D57K"),a=n("h1tj");!function(e){e.interactionStart="interaction-start",e.interaction="interaction",e.interactionImmediate="interaction-immediate",e.interactionEnd="interaction-end",e.interactionCancel="interaction-cancel"}(r||(r={}));var o=function(e){function t(t,n,r,i,a){var o=e.call(this,t,!0,!0)||this;return o.type=t,o.handle=r,o.targetOver=i,o.relatedEvent=a,o.interactionName=n,o}return Object(i.e)(t,e),t}(a.Event)},wuOO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("SBw3"),i=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(i.a)({value:t.data,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){var n,r=this.featureList.getFeature(e);return Object(i.a)({styles:{font:t.value},takeFocus:t.takeFocus,stateContext:null===(n=r.data)||void 0===n?void 0:n.stateContext})},e.\u0275fac=function(t){return new(t||e)(a.qc(r.a))},e.\u0275prov=a.cc({token:e,factory:e.\u0275fac}),e}()},x77O:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("D57K"),i=n("gZOS"),a=n("5xGT"),o=n("X0jn"),s=n("19Zn"),c=n("nsO7"),l=n("ROBh"),u=n("HM3f"),d=n("P4Xx"),p=n("TLy2"),h=n("YtkY"),f=n("J+dc"),m=n("8j5Y"),g=n("uo+j"),b=n("6YKU"),v=n("Ei0d"),_=n("5vYS"),y=n("diDk"),O=n("PC6z"),x=n("+1jB"),E=n("EM62"),k=function(){function e(e,t,n){this.modelChangeUtils=e,this.state=t,this.ell=n}return e.prototype.buildChanges=function(t,n){var i=this;return!t.eData||Object(c.isEmpty)(t.eData)?Object(l.a)([]):this.getAllChangeModels(t.eData).pipe(Object(p.a)((function(a){var o=t.__sakota__.getChanges(),c=Object(s.L)(o),d=[];return c.diagram&&i.edataDefsChanged(o,t,a),c.shapes&&Object.keys(c.shapes).forEach((function(e){var s=t.shapes[e],l=c.shapes[e];s instanceof _.a?d.push.apply(d,Object(r.j)(i.updateConnectorLink(t,a,s,l,!0))):void 0===s&&n.shapes[e]instanceof _.a||o&&o.$set&&o.$set["shapes."+e]||i.shapeChanged(s,t,a,l,n.shapes[e])})),e.buildEDataChanges(a),d.length>0?Object(u.b)(d).pipe(Object(h.a)((function(){return a}))):Object(l.a)(a)})))},e.buildEDataChanges=function(e){var t,n,i={};try{for(var a=Object(r.k)(e),o=a.next();!o.done;o=a.next()){var s=o.value;i[s.id]=s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this.updateLinkedEData(e),this.updateFormulaRefs(i),this.updateFormulas(i)},e.prototype.edataDefsChanged=function(t,n,r){var i,a,o,s;if(t.$set){var l,u={},d=/dataDefs\.([^\.]+)\.([^\.]+)\./,p=/dataDefs\.([^\.]+)\.([^\.]+)/,h=/dataDefs\.([^\.]+)/;for(var f in t.$set){var m,g=d.exec(f);if(g){if((m=n.getEdataByDataSetId(g[1]))&&!Object(c.isEmpty)(m)){var b=m[l=Object.keys(m)[0]],v=n.dataDefs[g[1]][g[2]];u[b]?Object.assign(u[b],((i={})[g[2]]=v,i)):u[b]=((a={})[g[2]]=v,a)}}else if(g=p.exec(f)){if((m=n.getEdataByDataSetId(g[1]))&&!Object(c.isEmpty)(m)){var b=m[l=Object.keys(m)[0]];v=n.dataDefs[g[1]][g[2]];u[b]?Object.assign(u[b],((o={})[g[2]]=v,o)):u[b]=((s={})[g[2]]=v,s)}}else if(g=h.exec(f))if((m=n.getEdataByDataSetId(g[1]))&&!Object(c.isEmpty)(m))u[b=m[l=Object.keys(m)[0]]]=t.$set[f]}if(!Object(c.isEmpty)(u)){var _=r.find((function(e){return e.id===l}));_&&(this.modelChangeUtils.updateEdataDefs(_,u),e.updateFormulaFields(u,_,r))}}},e.updateFormulaFields=function(e,t,n){var i=function(i){var s=t.entities[i],l=Object.values(e[i]).filter((function(e){return e.type===o.c.FORMULA})),u=t.getEntityDataItems(i,!1),d=t.__sakota__.getTarget().getEntityDataItems(i,!1),p={};for(var h in u)p[u[h].label]||(p[u[h].label]=h);l.forEach((function(e){for(var t,i,l,h=e.options.expression,f=d&&d[e.id]?d[e.id].options.parsedExpression:null,m=h,g=!0,b=/{{([^{}]+)}}/g,_=[],y=[],O=[];null!==(l=b.exec(h));)O.push(l[0]);if(O=Object(c.uniq)(O)){var x=void 0,E=function(t){var i=t.slice(2,t.length-2).trim();if(i.includes("->")||i.includes(".")){var c=void 0;c=i.includes("->")?i.split("->").map((function(e){return e.trim()})):i.split(".").map((function(e){return e.trim()}));var l=Object(r.h)(c,2),d=l[0],h=l[1],f=p[d],b=u[f];if(b.type!==o.c.LOOKUP)if(b.type===o.c.TAGS){["name","color"].includes(h)?(x="data['"+f+"']|TAGS('"+h+"')",i.includes(".")&&(x+="[0]"),y.push((function(){return s.addRefField(f,e.id)})),_.push(f)):g=!1}else g=!1;else{var v=b.options,O=v.eDataId,E=v.eDefId,k=n.find((function(e){return e.id===O})),C=k.getEntityDef(E).dataItems,w=Object.keys(C).find((function(e){return C[e].label===h}));if(w){var S=C[w];y.push((function(){return s.addLookupRefField(f,w,k,e.id)})),_.push(f+"_"+w),i.includes("->")?(x="refData['"+f+"']['"+w+"'].value",S.type===o.c.DATE&&(x+="|DATE_ARRAY"),S.type===o.c.BINARY&&(x+="|BOOL_ARRAY")):(x="refData['"+f+"']['"+w+"'].value[0]",S.type===o.c.DATE&&(x+="|DATE"),S.type===o.c.BINARY&&(x="!!"+x))}else g=!1}}else{var I=p[i];if(I){S=u[I];y.push((function(){return s.addRefField(I,e.id)})),_.push(I),x=S.type===o.c.DATE?"data['"+I+"']|DATE":"data['"+I+"']",S.type===o.c.BINARY&&(x="!!"+x)}else g=!1}if(!g)return a.cb.error("Could not resolve "+t),"break";m=m.replace(new RegExp(t,"g"),x)};try{for(var k=(t=void 0,Object(r.k)(O)),C=k.next();!C.done;C=k.next()){if("break"===E(T=C.value))break}}catch(P){t={error:P}}finally{try{C&&!C.done&&(i=k.return)&&i.call(k)}finally{if(t)throw t.error}}}if(g)if(m!==f){if(f){for(var w=[],S=/data\['([a-zA-Z0-9]+)'\]/g,I=/refData\['([a-zA-Z0-9]+)'\]\['([a-zA-Z0-9]+)'\]/g,T=void 0;null!==(T=S.exec(f));)w.push(T[1]);for(;null!==(T=I.exec(f));)w.push(T[1]+"_"+T[2]);var A=Object(c.difference)(Object(c.uniq)(w),_);A.length>0&&A.forEach((function(t){if(t.includes("_")){var i=Object(r.h)(t.split("_"),2),a=i[0],o=i[1],c=u[a].options.eDataId,l=n.find((function(e){return e.id===c}));s.removeLookupRefField(a,o,e.id,l)}else s.removeRefField(t,e.id)}))}y.forEach((function(e){return e()}));try{e.options.parsedExpression=m,s.data[e.id]=v.a.evaluate(m,s)}catch(M){a.cb.error("Could not parse the expression",{expression:h,parsedExpression:m,error:M}),g=!1}}else e.options.parsedExpression=m}))};for(var s in e)i(s)},e.prototype.getAllChangeModels=function(e){var t=this,n=e.map((function(e){return t.ell.getEData(e).pipe(Object(p.a)((function(e){return e.getEDataModelOnce().pipe(Object(h.a)((function(e){return i.Sakota.create(e)})))})),Object(f.a)(1))}));return Object(u.b)(n)},e.prototype.shapeChanged=function(e,t,n,r,i){if((e||i).eDataId){if(r.$set&&Object.keys(r.$set).filter((function(e){return/data/.test(e)})).length<1)return;if((r.$set&&r.$set.containerId||r.$unset&&r.$unset.containerId)&&(this.shapeContainerChanged(e,t,n,r),Object.keys(r.$set).filter((function(e){return/data/.test(e)})).length<1))return;var a=!0;r.$unset&&!0===r.$unset&&(a=!1);var o=function(o){var c=n.find((function(e){return e.id===o}));c&&a&&e?(s.modelChangeUtils.updateEntityData(c,{entityId:e.eData[o],shape:e,diagram:t}),s.shapeLookupFieldChanged(e,t,n,r,i)):c&&(s.shapeLookupFieldChanged(e,t,n,r,i),s.modelChangeUtils.addShapeToEntity(c,{entityId:i.eData[o],shapeId:i.id,shapeDefId:i.defId,diagramId:t.id,isDelete:!0}))},s=this;for(var c in(e||i).eData)o(c)}if(e&&e.eDataRef){var l=function(r){var i=n.find((function(e){return e.id===r}));if(i){var a=e.eDataRef[r];u.modelChangeUtils.updateEDateRefChanges(i,{entityIds:a,sourceDiagId:t.id,sourceShapeId:e.id})}},u=this;for(var d in e.eDataRef)l(d)}},e.prototype.shapeContainerChanged=function(e,t,n,r){var i,a=!1;if(r.$set&&r.$set.containerId&&!r.$set.id?(i=r.$set.containerId,a=!0):r.$unset&&r.$unset.containerId&&(i=e.containerOld,a=!1),i){var o=t.shapes[i];this.updateContainerLink(o,n,e,a)}},e.prototype.shapeLookupFieldChanged=function(e,t,n,i,a){var c=this,l={};n.forEach((function(e){l[e.id]=e}));var u=this.getLookupLinkChanges(t,e,i,a,l),d=u.toAdd,p=u.toRemove;if(0!==d.length||0!==p.length){var h=e||a,f=h.eDataId,m=h.entityId,g=Object.values(h.getDataItems(t)).filter((function(e){return e.type===o.c.LOOKUP&&!0===e.isTypeBound})),b={},v={};g.length>0&&(g.forEach((function(e){var n=e.id.split("").reverse().join("");h.getDataItems(t)[n]&&h.getDataItems(t)[n].type===o.c.LOOKUP?(v[e.id]=n,h.getDataItems(t)[n].options.isMirrorField?b[e.id]=e.id:b[e.id]=n):(v[e.id]=e.id,b[e.id]=e.id)})),d.forEach((function(e){var t=e.dataItemId,n=e.eDataId,i=e.entityId;if(v.hasOwnProperty(t)){var a=l[n].entities[i],o=v[t];if(a&&a.data[o]){var s=l[n].getDataItemDef(o,i).options.allowMultiple;a.data[o]=s?Object(r.j)(a.data[o],[m]):[m]}}})),p.forEach((function(e){var t=e.dataItemId,n=e.eDataId,r=e.entityId;if(v.hasOwnProperty(t)){var i=l[n].entities[r],a=v[t],o=e.fEntityId||m;i&&i.data[a]&&(i.data[a]=i.data[a].filter((function(e){return e!==o})))}}))),d.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId,a=t.getLookupConnector(b[n]||n,h.id,i,r);a&&(e.connectorId=a.id)})),d.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId,a=e.connectorId;c.modelChangeUtils.updateEntityLinks(l[r],{diagramId:t.id,fromEntityId:i,toEDataId:f,toEntityId:m,type:o.f.LOOKUP,isSet:!0,handshake:v[n]||n,shapeId:h.id,identifier:c.getIdentifier(h),connectorId:a,connectorDefId:s.s.defId,shapeDefId:h.defId})})),d.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId,a=e.connectorId;c.modelChangeUtils.updateEntityLinks(l[f],{diagramId:t.id,fromEntityId:m,toEDataId:r,toEntityId:i,type:o.f.LOOKUP,isSet:!0,handshake:n,shapeId:h.id,identifier:l[r].entities[i].getPrimaryText(),connectorId:a,connectorDefId:s.s.defId,shapeDefId:h.defId})})),p.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId;l[r].entities[i]&&c.modelChangeUtils.updateEntityLinks(l[r],{diagramId:t.id,fromEntityId:i,toEDataId:e.fEdataId||f,toEntityId:e.fEntityId||m,type:o.f.LOOKUP,isSet:!1,handshake:v[n]||n,shapeId:e.shapeId||h.id})})),p.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId;l[e.fEdataId||f].entities[e.fEntityId||m]&&c.modelChangeUtils.updateEntityLinks(l[e.fEdataId||f],{diagramId:t.id,fromEntityId:e.fEntityId||m,toEDataId:r,toEntityId:i,type:o.f.LOOKUP,isSet:!1,handshake:n,shapeId:e.shapeId||h.id})}))}},e.prototype.getLookupLinkChanges=function(e,t,n,i,a){var s,l,u,d,p=[],h=[];if(n.$set&&Object.keys(n.$set).filter((function(e){return/data/.test(e)})).length>0){var f=/data\.([^\.]+)\.value/,m=/data\.([^\.]+)$/,g=function(n){var r=f.exec(n);if(r){var i=r[1],s=t.getDataItems(e)[i];if(s&&s.type===o.c.LOOKUP){var l=t.data[i].value,u=a[t.eDataId].entities[t.entityId].__sakota__.getTarget().data[i],d=Object(c.difference)(l,u);if(d.length>0){var g=s.options,b=g.eDataId,v=g.eDefId;if(g.isMirrorField){var _=t.eDataId===b&&t.entityDefId===v?i.split("").reverse().join(""):i,y=a[b].getEntityDef(v).dataItems[_];y.options.allowMultiple||d.forEach((function(e){var t,n=a[b].entities[e];1===(null===(t=n.data[_])||void 0===t?void 0:t.length)&&h.push({dataItemId:_,eDataId:y.options.eDataId,entityId:n.data[_][0],fEdataId:b,fEntityId:e,shapeId:Object.keys(Object.values(n.shapes)[0]||{})[0]})}))}}d.forEach((function(e){p.push({dataItemId:i,eDataId:s.options.eDataId,entityId:e})})),Object(c.difference)(u,l).forEach((function(e){h.push({dataItemId:i,eDataId:s.options.eDataId,entityId:e})}))}}if(r=m.exec(n)){var O=r[1],x=t.getDataItems(e)[O];if(x&&x.type===o.c.LOOKUP&&!x.options.isMirrorField)(l=t.data[O].value)&&l.length&&l.forEach((function(e){p.push({dataItemId:O,eDataId:x.options.eDataId,entityId:e})}))}};try{for(var b=Object(r.k)(Object.keys(n.$set)),v=b.next();!v.done;v=b.next()){g(v.value)}}catch(x){s={error:x}}finally{try{v&&!v.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}}if(n.$unset&&Object.keys(n.$unset).filter((function(e){return/data/.test(e)})).length>0){m=/data\.([^\.]+)$/;var _=function(t){var n=m.exec(t);if(n){var r=n[1],a=i.getDataItems(e)[r];if(a&&a.type===o.c.LOOKUP){var s=a.value;s&&s.length>0&&s.forEach((function(e){h.push({dataItemId:r,eDataId:a.options.eDataId,entityId:e})}))}}};try{for(var y=Object(r.k)(Object.keys(n.$unset)),O=y.next();!O.done;O=y.next()){_(O.value)}}catch(E){u={error:E}}finally{try{O&&!O.done&&(d=y.return)&&d.call(y)}finally{if(u)throw u.error}}}return{toAdd:p,toRemove:h}},e.updateFormulas=function(e){var t,n,i,a,o=Object.values(e),s={};try{for(var c=Object(r.k)(o),l=c.next();!l.done;l=c.next()){var u=l.value,d=u.__sakota__.getChanges();if(d.$set){var p=Object.keys(d.$set).filter((function(e){return/entities\.([^\.]+)\.data\.([^\.]+)/.test(e)})),h={};try{for(var f=(i=void 0,Object(r.k)(p)),m=f.next();!m.done;m=f.next()){var g=m.value.split("."),v=g[1],_=g[3];h[v]||(h[v]=[]),h[v].push(_)}}catch(y){i={error:y}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}s[u.id]=h}}}catch(O){t={error:O}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}try{this._updateFormulas(e,s)}catch(x){if(x instanceof RangeError)throw new b.b(b.a);throw x}},e._updateFormulas=function(e,t){var n,i,s,l,u={},d={};for(var p in t){var h=e[p];u[p]={};var f=t[p],m=function(t){var n,i,a=h.entities[t],s=h.getEntityDataItems(t,!1),l=f[t],m=[];a.refData&&(l.forEach((function(t){if(a.refData[t])if(s[t].type===o.c.LOOKUP){var n=s[t].options.eDataId,r=e[n];for(var i in a.updateLookupRefField(t,r),a.refData[t])m=m.concat(a.refData[t][i].refFields)}else m=m.concat(a.refData[t].refFields)})),u[p][t]=Object(c.uniq)(m));var g=a.getMatchingLinks(o.f.LOOKUP).filter((function(e){return e.refFields})),b=function(e){var n=Object(c.intersection)(e.refFields,l);if(n.length>0){var r={};n.forEach((function(e){r[e]=a.data[e]})),d[e.eDataId]||(d[e.eDataId]={}),d[e.eDataId][e.entityId]||(d[e.eDataId][e.entityId]=[]),d[e.eDataId][e.entityId].push({lookupId:e.handshake,senderId:t,values:r})}};try{for(var v=(n=void 0,Object(r.k)(g)),_=v.next();!_.done;_=v.next()){b(_.value)}}catch(y){n={error:y}}finally{try{_&&!_.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}};for(var g in f)m(g)}for(var p in d)for(var g in d[p]){var b=void 0;u[p]||(u[p]={}),b=u[p][g]?u[p][g]:[];var _=e[p].entities[g],y=_.data,O=_.refData,x=e[p].getEntityDataItems(g),E=d[p][g];try{for(var k=(n=void 0,Object(r.k)(E)),C=k.next();!C.done;C=k.next()){var w=C.value,S=w.lookupId.split("").reverse().join(""),I=x[S];(null==I?void 0:I.isTypeBound)&&I.type===o.c.LOOKUP&&x[w.lookupId].isTypeBound&&(w.lookupId=S);var T=y[w.lookupId].indexOf(w.senderId);for(var A in w.values){var P=O[w.lookupId][A].value.slice();P[T]=w.values[A],O[w.lookupId][A].value=P,b=b.concat(O[w.lookupId][A].refFields)}}}catch(F){n={error:F}}finally{try{C&&!C.done&&(i=k.return)&&i.call(k)}finally{if(n)throw n.error}}u[p][g]=Object(c.uniq)(b)}var M=!1;for(var p in u)if(e[p])for(var g in u[p]){var D=e[p].entities[g],j=e[p].getEntityDataItems(g),R=u[p][g];R.length>0&&(M=!0);try{for(var L=(s=void 0,Object(r.k)(R)),N=L.next();!N.done;N=L.next()){var B=N.value,U=j[B].options.parsedExpression;try{D.data[B]=v.a.evaluate(U,D)}catch(q){q instanceof RangeError||a.cb.error("Error occurred while updating the formula field",q)}}}catch(W){s={error:W}}finally{try{N&&!N.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}}M&&this._updateFormulas(e,u)},e.updateFormulaRefs=function(e){var t,n,i,a,s,c,l,u=Object.values(e);try{for(var d=Object(r.k)(u),p=d.next();!p.done;p=d.next()){var h=p.value,f=h.__sakota__.getChanges();if(f.$unset){var m=Object.keys(f.$unset).filter((function(e){return/^entities\.([^\.]+)\.data\.([^\.]+)$/.test(e)})),g={};try{for(var b=(i=void 0,Object(r.k)(m)),v=b.next();!v.done;v=b.next()){var _=v.value.split("."),y=_[1],O=_[3];g[y]||(g[y]=[]),g[y].push(O)}}catch(P){i={error:P}}finally{try{v&&!v.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}for(var y in g){var x=h.entities[y],E=h.getEntityDataItems(y,!1);try{for(var k=(s=void 0,Object(r.k)(g[y])),C=k.next();!C.done;C=k.next()){if((null===(l=E[O=C.value])||void 0===l?void 0:l.type)===o.c.FORMULA){for(var w=/data\['([a-zA-Z0-9]+)'\]/g,S=/refData\['([a-zA-Z0-9]+)'\]\['([a-zA-Z0-9]+)'\]/g,I=E[O].options.parsedExpression,T=void 0;null!==(T=w.exec(I));)x.removeRefField(T[1],O);for(;null!==(T=S.exec(I));){var A=e[E[T[1]].options.eDataId];x.removeLookupRefField(T[1],T[2],O,A)}}}}catch(M){s={error:M}}finally{try{C&&!C.done&&(c=k.return)&&c.call(k)}finally{if(s)throw s.error}}}}}}catch(D){t={error:D}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}},e.updateLinkedEData=function(e){var t,n;try{for(var i=Object(r.k)(e),a=i.next();!a.done;a=i.next()){var o=a.value,s=o.__sakota__.getChanges();if(s&&!Object(c.isEmpty)(s)){var l=Object(O.b)(s);for(var u in l.entities){var d=o.entities[u],p=l.entities[u];if(!0!==p.$unset)this.updateLinkedEntities(o,d,p);else{var h=o.__sakota__.getTarget().entities[u];this.handleEntityRemove(h,e)}}}}}catch(f){t={error:f}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.handleEntityRemove=function(e,t){this.cleanLookupFields(e,t)},e.cleanLookupFields=function(e,t){(e.links?Object.values(e.links):[]).filter((function(e){return e.type===o.f.LOOKUP})).forEach((function(n){var r=n.eDataId,i=n.entityId,a=n.handshake,s=t.find((function(e){return e.id===r}));if(s&&s.entities[i]){var c=s.entities[i];if(c.eDefId===e.eDefId){var l=a.split("").reverse().join("");e.data[l]&&(a=l)}if(c.data[a]){var u=c.data[a].slice();u.splice(u.indexOf(e.id),1),c.data[a]=u}c.getMatchingLinks(o.f.LOOKUP,a).filter((function(t){return t.entityId===e.id})).forEach((function(e){delete c.links[e.id]}))}}))},e.prototype.updateContainerLink=function(e,t,n,r){if(e.eData&&n.eData){var i=function(i){var s=n.eData[i],c=function(c){var l=e.eData[c],u=t.find((function(e){return e.id===c}));u&&a.modelChangeUtils.updateEntityLinks(u,{fromEntityId:l,toEDataId:i,toEntityId:s,type:o.f.CHILD,isSet:r,handshake:n.containerHandshake,shapeId:e.id,identifier:a.getIdentifier(e)});var d=t.find((function(e){return e.id===i}));d&&a.modelChangeUtils.updateEntityLinks(d,{fromEntityId:s,toEDataId:c,toEntityId:l,type:o.f.PARENT,isSet:r,handshake:n.containerHandshake,shapeId:n.id,identifier:a.getIdentifier(n)})};for(var l in e.eData)c(l)},a=this;for(var s in n.eData)i(s)}},e.prototype.getIdentifier=function(e){if(e.primaryTextModel&&e.primaryTextModel.plainText)return e.primaryTextModel.plainText},e.prototype.updateConnectorLink=function(e,t,n,r,i,c,l,u){var d=this;void 0===u&&(u=!1);var p=[];if(!u&&r.$set&&0===Object.keys(r.$set).filter((function(e){return/defId/.test(e)})).length)return p;if(c||(n&&n.getFromEndpoint(e)&&n.getFromEndpoint(e).shape?c=n.getFromEndpoint(e).shape:a.cb.error("malformed link update request",n.id)),l||(n&&n.getToEndpoint(e)&&n.getToEndpoint(e).shape?l=n.getToEndpoint(e).shape:a.cb.error("malformed link update request",n.id)),n.handshake&&!0!==r.$unset||(i=!1),c&&l&&c.eData&&l.eData){n.defId===s.s.defId&&this.updateLookupConnectionConnector(n,t,e);var h=function(r){var a=c.eData[r],s=function(s){var u=l.eData[s],h=g.getMatchingHandshake(r,a,s,u,n.handshake).pipe(Object(f.a)(1),Object(m.a)((function(c){var p=t.find((function(e){return e.id===r}));p&&d.modelChangeUtils.updateEntityLinks(p,{diagramId:e.id,fromEntityId:a,toEDataId:s,toEntityId:u,type:o.f.CONNECTOR_BI,isSet:i,handshake:c,connectorId:n.id,connectorDefId:n.defId,shapeId:l.id,identifier:d.getIdentifier(l)})}))),b=g.getMatchingHandshake(r,a,s,u,n.handshake).pipe(Object(f.a)(1),Object(m.a)((function(l){var p=t.find((function(e){return e.id===s}));p&&d.modelChangeUtils.updateEntityLinks(p,{diagramId:e.id,fromEntityId:u,toEDataId:r,toEntityId:a,type:o.f.CONNECTOR_BI,isSet:i,handshake:l,connectorId:n.id,connectorDefId:n.defId,shapeId:c.id,identifier:d.getIdentifier(c)})})));p.push(h),p.push(b)};for(var u in l.eData)s(u)},g=this;for(var b in c.eData)h(b)}else{var v=c.eData?c:l;if(!v||!v.eData)return p;var _=c.eData?l:c;if(!_)return p;var y=function(r){var a=v.eData[r],c=O.getIdentifier(_);O.modelChangeUtils.addEDataRefToShape(e,{shapeId:_.id,eDataId:r,entityId:a,isSet:i});var l=t.find((function(e){return e.id===r}));l&&O.modelChangeUtils.updateEntityLinks(l,{diagramId:e.id,fromEntityId:a,type:o.f.REFERENCE,isSet:i,handshake:s.o.handshake[0],connectorId:n.id,connectorDefId:n.defId,shapeId:_.id,shapeDefId:_.defId,identifier:c})},O=this;for(var b in v.eData)y(b)}return p},e.prototype.updateLookupConnectionConnector=function(e,t,n){var r,i,a,s,c=n.id,l=e.getFromEndpoint(n).shape,u=e.getToEndpoint(n).shape,d=t.find((function(e){return e.id===l.eDataId})).entities[l.entityId],p=d.getLinkId(o.f.LOOKUP,e.handshake[0],u.eDataId,u.entityId,c,l.id);if(p){var h=d.links[p];h.connectors||(h.connectors={}),h.connectors=((r={})[c]=((i={})[e.id]={shapeId:l.id,shapeDefId:l.defId,defId:e.defId},i),r);var f=t.find((function(e){return e.id===u.eDataId})).entities[u.entityId],m=f.getLinkId(o.f.LOOKUP,e.handshake[0],l.eDataId,l.entityId,c,u.id);if(!m)return;var g=f.links[m];g.connectors||(g.connectors={}),g.connectors=((a={})[c]=((s={})[e.id]={shapeId:u.id,shapeDefId:u.defId,defId:e.defId},s),a)}},e.prototype.getMatchingHandshake=function(e,t,n,r,i){return Object(d.a)({fromEntity:this.ell.getEntityOnce(e,t),toEntity:this.ell.getEntityOnce(n,r)}).pipe(Object(p.a)((function(e){if(e.fromEntity&&e.toEntity&&i){var t=e.fromEntity.getDef().ports,n=e.toEntity.getDef().ports;if(t&&n)for(var r=Object.keys(t),a=Object.keys(n),o=0;o<i.length;o++)if(r.indexOf(i[o])>-1&&a.indexOf(i[o])>-1)return Object(l.a)(i[o])}return Object(l.a)(void 0)})))},e.updateLinkedEntities=function(e,t,n){var r=this;if(t.links&&n.$set){var i=Object.keys(n.$set).filter((function(e){return/data/.test(e)})),a=Object.keys(n.$set).filter((function(e){return/links/.test(e)}));if(i.length){var o=t.getDef(),s={};i.forEach((function(i){var a=i.replace("data.","");s[a]=n.$set[i],a===o.linkIdDataItem&&r.updateLinkIdentifier(e,t)}));var c=new Map;for(var l in o.dataItems)o.dataItems[l].sendTo&&c.set(l,o.dataItems[l]);c.size>0&&this.sendDataItemUpdates(e,t,s,c)}else if(a.length){this.sendLinkIdentifier(e,t,n);var u=t.getDef(),d=[];for(var l in u.dataItems)u.dataItems[l].sendTo&&d.push({id:l,def:u.dataItems[l].sendTo});d.length>0&&d.forEach((function(n){var r=t.getMatchingLinks(n.def[0].type,n.def[0].handshake);if(r.length>0){var i=t.data[n.id];if(!i){var a=u.dataItems[n.id].default;i=g.a.replaceHandlebars(a,t.data)}r.forEach((function(t){x.a.instance.syncLinkedEData(e,{entityId:t.entityId,dataItemId:n.def[0].target,dataItem:i})}))}}))}}},e.updateLinkIdentifier=function(e,t){var n=t.getLinkIdDataValue();if(n)for(var r in t.links){var i=t.links[r];i.type!==o.f.LOOKUP&&x.a.instance.updateEntityLinkValue(e,{entityId:i.entityId,sourceEDataId:e.id,sourceEntityId:t.id,type:i.type,handshake:i.handshake,identifier:n})}},e.sendDataItemUpdates=function(e,t,n,r){var i=[];for(var a in n)r.has(a)&&i.push({id:a,def:r.get(a).sendTo});i.length>0&&i.forEach((function(r){t.getMatchingLinks(r.def[0].type,r.def[0].handshake).forEach((function(t){x.a.instance.syncLinkedEData(e,{entityId:t.entityId,dataItemId:r.def[0].target,dataItem:n[r.id]})}))}))},e.sendLinkIdentifier=function(e,t,n){var r=t.getLinkIdDataValue();if(r){var i,a=Object.keys(n.$set).filter((function(e){return/links/.test(e)}));if(a.length>0)for(var s in a)if(i=n.$set[a[s]]){var c=Object.keys(i),l=void 0;i.eDataId&&i.entityId?l=i:c.length>0&&i[c[0]].eDataId&&i[c[0]].entityId&&(l=i[c[0]]),l&&l.type!==o.f.LOOKUP&&x.a.instance.updateEntityLinkValue(e,{entityId:l.entityId,sourceEDataId:e.id,sourceEntityId:t.id,type:l.type,handshake:l.handshake,identifier:r})}}},e.\u0275fac=function(t){return new(t||e)(E.qc(x.a),E.qc(a.Hb),E.qc(y.a))},e.\u0275prov=E.cc({token:e,factory:e.\u0275fac}),e}()},"xEF+":function(e,t,n){"use strict";t.argVal=function(e){e&&this._cursor.args.push(e)},t.arrayStart=function(){this._placeAtCursor({type:"ArrayLiteral",value:[]})},t.arrayVal=function(e){e&&this._cursor.value.push(e)},t.binaryOp=function(e){for(var t=this._grammar.elements[e.value].precedence||0,n=this._cursor._parent;n&&n.operator&&this._grammar.elements[n.operator].precedence>=t;)this._cursor=n,n=n._parent;var r={type:"BinaryExpression",operator:e.value,left:this._cursor};this._setParent(this._cursor,r),this._cursor=n,this._placeAtCursor(r)},t.dot=function(){this._nextIdentEncapsulate=this._cursor&&"UnaryExpression"!==this._cursor.type&&("BinaryExpression"!==this._cursor.type||"BinaryExpression"===this._cursor.type&&this._cursor.right),this._nextIdentRelative=!this._cursor||this._cursor&&!this._nextIdentEncapsulate,this._nextIdentRelative&&(this._relative=!0)},t.filter=function(e){this._placeBeforeCursor({type:"FilterExpression",expr:e,relative:this._subParser.isRelative(),subject:this._cursor})},t.functionCall=function(){this._placeBeforeCursor({type:"FunctionCall",name:this._cursor.value,args:[],pool:"functions"})},t.identifier=function(e){var t={type:"Identifier",value:e.value};this._nextIdentEncapsulate?(t.from=this._cursor,this._placeBeforeCursor(t),this._nextIdentEncapsulate=!1):(this._nextIdentRelative&&(t.relative=!0,this._nextIdentRelative=!1),this._placeAtCursor(t))},t.literal=function(e){this._placeAtCursor({type:"Literal",value:e.value})},t.objKey=function(e){this._curObjKey=e.value},t.objStart=function(){this._placeAtCursor({type:"ObjectLiteral",value:{}})},t.objVal=function(e){this._cursor.value[this._curObjKey]=e},t.subExpression=function(e){this._placeAtCursor(e)},t.ternaryEnd=function(e){this._cursor.alternate=e},t.ternaryMid=function(e){this._cursor.consequent=e},t.ternaryStart=function(){this._tree={type:"ConditionalExpression",test:this._tree},this._cursor=this._tree},t.transform=function(e){this._placeBeforeCursor({type:"FunctionCall",name:e.value,args:[this._cursor],pool:"transforms"})},t.unaryOp=function(e){this._placeAtCursor({type:"UnaryExpression",operator:e.value})}},xYNC:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("D57K"),i=n("5xGT"),a=n("X0jn"),o=n("19Zn"),s=n("nsO7"),c=n("47ST"),l=n("i9xl"),u=n("qZtG"),d=n("TaSY"),p=n("8j5Y"),h=n("7SLS"),f=n("nKku"),m=n("Xpu5"),g=n("B5wR"),b=n("/jjY"),v=n("Fuvo"),_=n("EM62"),y=function(){function e(e){this.commandSvc=e,this.batchSize=1e3}return e.prototype.importData=function(e,t,n){var a=this,o=n.eDefId,f=n.ignoreMappingErrors;if(!e.customEntityDefs.hasOwnProperty(o)){var g="Custom entity definition not found. defId: '"+o+"'";return Object(c.a)(new v.a(g))}var b,_,y=e.customEntityDefs[o];try{var O=this.getEntities(y,t,n);b=O.entities,_=O.errors}catch(E){return Object(c.a)(E)}if(!f&&_.length>0)return i.cb.warning("aborting the import. validation errors: ",_),Object(c.a)(new v.a("mappings error",_));if(0===b.length)return i.cb.warning("aborting the import. no data to import"),Object(c.a)(new v.a("no data to import",_));i.cb.info("Importing entities...");var x=Object(s.chunk)(b,this.batchSize).map((function(t){return Object(l.a)((function(){return a.commandSvc.dispatch(m.a.importEntities,e.id,{entities:t,entityDef:y})}))}));return u.a.apply(void 0,Object(r.j)(x)).pipe(Object(d.a)(),Object(p.a)((function(){return i.cb.info("Finished importing entities")})),Object(h.a)({entities:b,errors:_}))},e.prototype.getEntities=function(e,t,n){var s,c,l=Object(r.h)(t),u=l[0],d=l.slice(1),p=n.mappings,h=n.eDefId,m=n.ignoreMappingErrors,v={};try{for(var _=Object(r.k)(p),y=_.next();!y.done;y=_.next()){var O=y.value,x=O.csvIndex,E=O.dataItemId;if(x<0||x>=u.length)throw new Error("invalid csv column. column index: "+x);if(!e.dataItems[E])throw new Error("Data item with id '"+E+"' not found");var k=e.dataItems[E],C=k.type,w=k.options;v[E]={csvIndex:x,parse:f.a.getParser(e.dataItems[E].type),validator:o.j.instance.create(Object(r.a)(Object(r.a)({},e.dataItems[E]),{validationRules:{},typeParams:C===a.c.OPTION_LIST?{options:w}:{}}))}}}catch(R){s={error:R}}finally{try{y&&!y.done&&(c=_.return)&&c.call(_)}finally{if(s)throw s.error}}for(var S=[],I=[],T=0;T<d.length;T++){var A=d[T],P=new b.a(i.rb.entityId(),h);for(var M in P.defId=g.a.customEdataDefId,P.data={},P.shapes={},e.dataItems)P.data[M]=e.dataItems[M].default;var D=null,j=!0;for(var E in v){if(v[E].parse?P.data[E]=v[E].parse(A[v[E].csvIndex]):P.data[E]=A[v[E].csvIndex],D=v[E].validator.validate(P.data[E])){if(I.push({rowIndex:T,columnIndex:v[E].csvIndex,parsedValue:P.data[E],value:A[v[E].csvIndex],error:D}),!m)return{entities:S,errors:I};delete P.data[E]}else j=!1}j||S.push(P)}return{entities:S,errors:I}},e.\u0275fac=function(t){return new(t||e)(_.qc(i.B))},e.\u0275prov=_.cc({token:e,factory:e.\u0275fac}),e}()},xeB5:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("5xGT"),i=n("X0jn"),a=n("Jzy8"),o=n("4y1S"),s=n("nsO7"),c=n("HsO4"),l=n("J+dc"),u=n("TLy2"),d=n("8j5Y"),p=n("YtkY"),h=n("xVbo"),f=n("TaSY"),m=n("P1E4"),g=n("c7W3"),b=n("7+LA"),v=n("ej19"),_=n("EM62"),y=n("sEIs"),O=n("s2Ay"),x=function(){function e(e,t,n,r,i,a,o,s,c,l,u,d){this.commandService=e,this.projectLocator=t,this.state=n,this.router=r,this.dialogBoxController=i,this.diagramInfoLocator=a,this.notifierController=o,this.translate=s,this.random=c,this.planPermManager=l,this.modalController=u,this.eDataSyncSvc=d}return Object.defineProperty(e.prototype,"isUserSignedIn",{get:function(){return window.gravity.client.hasValidSession()},enumerable:!1,configurable:!0}),e.prototype.deleteProject=function(e,t){var n=this;return void 0===t&&(t=!0),this.projectLocator.getProject(e).pipe(Object(l.a)(1),Object(u.a)((function(r){return n.projectLocator.hasNotOwnedDocuments(e).pipe(Object(u.a)((function(i){var a=new Promise((function(a,o){var s=n.getProjectDeleteDialogData(i,e,r.name,t,a,o);n.dialogBoxController.showDialog(s)}));return Object(c.a)(a)})))})))},e.prototype.renameProject=function(e,t){this.commandService.dispatch(a.u.renameProject,e,{name:t})},e.prototype.showMoveDiagramDialog=function(e,t,n){this.modalController.show(v.a,{inputs:{diagramIds:[e],name:t,sourceProjectId:n}})},e.prototype.moveDiagrams=function(e,t,n){var r=this;return this.projectLocator.getProject(n).pipe(Object(l.a)(1),Object(d.a)((function(i){if(i.numberOfCollabs()>0){var a=r.getDiagramMoveDialogData(e,t,n);r.dialogBoxController.showDialog(a)}else r.dispatchMoveDiagrams(e,t,n)})))},e.prototype.renameDiagram=function(e,t){this.commandService.dispatch(g.a.renameDiagram,e,{name:t})},e.prototype.showDiagramDeleteConfimationDialog=function(e,t){var n=this;this.diagramInfoLocator.getDiagram(e).pipe(Object(l.a)(1),Object(d.a)((function(e){var r=n.getDeleteConfimationDialogData(e,t);n.dialogBoxController.showDialog(r)}))).subscribe()},e.prototype.deleteDiagram=function(e,t,n){var r=this;return this.diagramInfoLocator.getDiagram(e).pipe(Object(l.a)(1),Object(u.a)((function(i){var o=n||r.getNextAvailDiagram(e),s=i.project,c=r.state.get("ProjectDiagrams"),l=c[s];l&&(l=l.filter((function(e){return e.id!==i.id})),c[s]=l,r.state.set("ProjectDiagrams",c));var u=r.state.get("RecentDiagrams");return u=u.filter((function(e){return e.id!==i.id})),r.state.set("RecentDiagrams",u),r.state.get("CurrentDiagram")===i.id&&(t?r.router.navigate(["../",o,"edit"]):(r.state.set("SelectedLeftPanel","dashboard"),r.router.navigateByUrl("/start/dashboard"))),r.commandService.dispatch(a.u.deleteDiagram,e,{})})))},e.prototype.duplicateDiagram=function(e){var t=this;this.isUserSignedIn?this.diagramInfoLocator.getDiagram(e).pipe(Object(l.a)(1),Object(d.a)((function(n){var i=t.random.diagramId();r.cb.debug("Creating diagram from template. Diagram id : "+e+" Template id "+n.id),t.dispatchCreateCommand({id:i,project:n.project,templateId:n.id,type:"duplicate"})}))).subscribe():this.showUpgradeDialog(i.r.DIAGRAM_DUPLICATE,o.s.CreateWorkspace)},e.prototype.dispatchDeleteProject=function(e,t){var n=this;(t?this.getPrevProjectId(e).pipe(Object(u.a)((function(t){return n.commandService.dispatch(a.u.deleteProject,e,{}).pipe(Object(d.a)({complete:function(){return n.state.set("FolderPanelSelectedProject",t)}}))}))):this.commandService.dispatch(a.u.deleteProject,e,{})).subscribe({complete:function(){return n.onDeleteProjectComplete()},error:function(){return n.onDeleteProjectError()}})},e.prototype.onDeleteProjectComplete=function(){},e.prototype.onDeleteProjectError=function(){},e.prototype.getPrevProjectId=function(e){return this.projectLocator.getProjects().pipe(Object(l.a)(1),Object(p.a)((function(t){var n=t.map((function(e){return e.id})),r=n.findIndex((function(t){return t===e}));return r>1?n[r-1]:"home"})))},e.prototype.dispatchMoveDiagrams=function(e,t,n){var r=this;this.commandService.dispatch(a.u.moveDiagram,e,{diagramIds:t,sourceProjectId:n}).subscribe({complete:function(){return r.onMoveDocumentComplete()},error:function(){return r.onMoveDocumentError()}})},e.prototype.onMoveDocumentComplete=function(){var e={inputs:{heading:this.translate.instant("NOTIFICATIONS.DIAGRAM_MOVE.SUCCESS.HEADING"),description:this.translate.instant("NOTIFICATIONS.DIAGRAM_MOVE.SUCCESS.BODY"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("DIAGRAM_MOVED_SUCCESS",r.i,r.ib.Success,e)},e.prototype.onMoveDocumentError=function(){var e={inputs:{heading:this.translate.instant("NOTIFICATIONS.DIAGRAM_MOVE.FAILED.HEADING"),description:this.translate.instant("NOTIFICATIONS.DIAGRAM_MOVE.FAILED.BODY"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("DIAGRAM_MOVED_FAILED",r.i,r.ib.Error,e)},e.prototype.dispatchCreateCommand=function(e){var t,n=this;if(this.planPermManager.check([i.r.DIAGRAM_CREATE]))t=m.a.createDiagram;else if(this.planPermManager.check([i.r.DIAGRAM_CREATE_PRIVATE]))t=m.a.createDiagramPrivate;else if(this.planPermManager.check([i.r.DIAGRAM_CREATE_TEAM]))t=m.a.createDiagramTeam;else{if(!this.planPermManager.check([i.r.DIAGRAM_CREATE_PUBLIC]))return void this.showUpgradeDialog(i.r.DIAGRAM_CREATE_PUBLIC,o.s.CreateWorkspace);t=m.a.createDiagramPublic}var a=e.project;r.cb.debug("Creating diagram with id : "+e.id),this.commandService.dispatch(t,a,e).subscribe({error:function(e){n.handleDiagramPermissionError(e)},complete:function(){n.gotoEditor(e.id)}})},e.prototype.showUpgradeDialog=function(e,t,n,r){void 0===n&&(n=function(){}),void 0===r&&(r=!1);var i={id:e,iframeType:t,buttons:[{type:"action",clickHandler:n,visibility:r?"enable":"disabled"},{type:"upgrade",clickHandler:function(){}}],integrationContext:{embedded:this.state.get("ApplicationIsEmbedded"),environment:this.state.get("PluginApp")}};this.modalController.show(o.t,{inputs:{dialogData:i}})},e.prototype.gotoEditor=function(e){var t=this,n={inputs:{heading:this.translate.instant("NOTIFICATIONS.DIAGRAM_DUPLICATE.SUCCESS.HEADING"),description:this.translate.instant("NOTIFICATIONS.DIAGRAM_DUPLICATE.SUCCESS.BODY"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("DIAGRAM_DUPLICATE_SUCCESS",r.i,r.ib.Success,n),this.router.navigate(["../",e,"edit"]),this.state.changes("DiagramLoaded").pipe(Object(h.a)((function(t){return t===e})),Object(l.a)(1),Object(d.a)((function(){t.eDataSyncSvc.syncDiagramToEData(e)}))).subscribe()},e.prototype.handleDiagramPermissionError=function(e){1615===e.code&&this.showUpgradeDialog(i.r.DIAGRAM_CREATE,o.s.CreateWorkspace),1611===e.code&&this.showUpgradeDialog(i.r.DIAGRAM_CREATE_PUBLIC,o.s.CreateWorkspace),1612===e.code&&this.showUpgradeDialog(i.r.DIAGRAM_CREATE_PRIVATE,o.s.CreateWorkspace),1623===e.code&&this.showUpgradeDialog(i.r.DIAGRAM_CREATE_TEAM,o.s.CreateWorkspace)},e.prototype.getNextAvailDiagram=function(e){var t=this.state.get("FolderPanelSelectedTab");if("diagrams"===t){var n=this.state.get("FolderPanelSelectedProject");n===a.C.SHARED_HOME&&(n=a.C.HOME);var r=this.state.get("ProjectDiagrams")[n],i=Object(s.clone)(r);if(i&&i.length>1)return i.reverse(),this.findNextAvailDiagram(i,e)}else if("recent"===t){var o=this.state.get("RecentDiagrams");if(o&&o.length>1)return this.findNextAvailDiagram(o,e)}return""},e.prototype.findNextAvailDiagram=function(e,t){var n=e.findIndex((function(e){return e.id===t})),r=e[n+1];return r?r.id:e[0].id},e.prototype.getProjectDeleteDialogData=function(e,t,n,r,i,a){var o=this;return{id:"DialogProjectDelete",heading:"DIALOG_BOX.DELETE_PROJECT.HEADING",description:e?"DIALOG_BOX.DELETE_PROJECT.DESCRIPTION_OTHER_COLLABS":"DIALOG_BOX.DELETE_PROJECT.DESCRIPTION",descriptionParams:{projectName:n},type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.DELETE_PROJECT",clickHandler:function(){o.dispatchDeleteProject(t,r),i()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){return a()}}]}},e.prototype.getDiagramMoveDialogData=function(e,t,n){var r=this;return{id:"DocumentMove",heading:"DIALOG_BOX.MOVE_DIAGRAM.HEADING",description:"DIALOG_BOX.MOVE_DIAGRAM.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"DIALOG_BOX.MOVE_DIAGRAM.BUTTONS.MOVE",clickHandler:function(){return r.dispatchMoveDiagrams(e,t,n)}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){}}]}},e.prototype.getDeleteConfimationDialogData=function(e,t){var n=this;return{id:"delete-diagram-confirmation",heading:"DIALOG_BOX.DELETE_DIAGRAM.HEADING",description:"DIALOG_BOX.DELETE_DIAGRAM.DESCRIPTION",descriptionParams:{diagramName:e.name},type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.DELETE_DIAGRAM",clickHandler:function(){n.deleteDiagram(e.id,t).pipe(Object(f.a)(),Object(d.a)((function(){return n.eDataSyncSvc.syncDiagramToEData(e,!0)}))).subscribe()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){r.Jb.track("dialog.diagramdelete.cancel.click",{value1Type:"diagramId",value1:e.id})}}]}},e.\u0275fac=function(t){return new(t||e)(_.qc(r.B),_.qc(a.v),_.qc(r.Hb),_.qc(y.d),_.qc(r.M),_.qc(a.i),_.qc(r.jb),_.qc(O.e),_.qc(r.rb),_.qc(o.l),_.qc(r.fb),_.qc(b.a))},e.\u0275prov=_.cc({token:e,factory:e.\u0275fac}),e}()},xfVB:function(e,t,n){"use strict";var r=n("IGGJ")(n("RhWx")),i={functions:"Jexl Function",transforms:"Transform"};t.ArrayLiteral=function(e){return this.evalArray(e.value)},t.BinaryExpression=function(e){var t=this,n=this._grammar.elements[e.operator];if(n.evalOnDemand){var r=function(e){return{eval:function(){return t.eval(e)}}};return n.evalOnDemand(r(e.left),r(e.right))}return this.Promise.all([this.eval(e.left),this.eval(e.right)]).then((function(e){return n.eval(e[0],e[1])}))},t.ConditionalExpression=function(e){var t=this;return this.eval(e.test).then((function(n){return n?e.consequent?t.eval(e.consequent):n:t.eval(e.alternate)}))},t.FilterExpression=function(e){var t=this;return this.eval(e.subject).then((function(n){return e.relative?t._filterRelative(n,e.expr):t._filterStatic(n,e.expr)}))},t.Identifier=function(e){return e.from?this.eval(e.from).then((function(t){if(null!=t)return Array.isArray(t)&&(t=t[0]),t[e.value]})):e.relative?this._relContext[e.value]:this._context[e.value]},t.Literal=function(e){return e.value},t.ObjectLiteral=function(e){return this.evalMap(e.value)},t.FunctionCall=function(e){var t=i[e.pool];if(!t)throw new Error("Corrupt AST: Pool '".concat(e.pool,"' not found"));var n=this._grammar[e.pool][e.name];if(!n)throw new Error("".concat(t," ").concat(e.name," is not defined."));return this.evalArray(e.args||[]).then((function(e){return n.apply(void 0,(0,r.default)(e))}))},t.UnaryExpression=function(e){var t=this;return this.eval(e.right).then((function(n){return t._grammar.elements[e.operator].eval(n)}))}},xpZS:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("nsO7"),i=n("6Oco"),a=n("C0rp"),o=n("X0jn"),s=n("m/OR"),c=n("5xGT"),l=n("EM62"),u=function(){function e(e){this.state=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextBoundsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=e.__sakota__.getChanges();if(t.$set)return this.shapeScaleXChange(e,t),Object(i.b)()},e.prototype.getTextBounds=function(e,t){return void 0===t&&(t=1e4),a.bounds(e,t,o.b)},e.prototype.shapeScaleXChange=function(t,n){var i=function(n){e.regexScaleX.lastIndex=0;var i=e.regexScaleX.exec(n);if(!i)return"continue";var c=i[1],l=t.shapes[c];if(!l.texts||!a.isBasic(l))return"continue";Object(r.forEach)(l.texts,(function(e,n){var r=l.texts[n];if(!r||!r.isInside())return!1;var i=Math.abs(l.defaultBounds.width*l.scaleX),a=r.hitArea?r.hitArea.width-2*o.y:i-2*o.y;if(s.a.isEditorInitialized(t.id,l.id,r.id)){var c=void 0;c=r.wordWrap||l.autoResizeWidth?s.a.getTextBounds(t.id,l.id,r.id,a):s.a.getTextBounds(t.id,l.id,r.id),r.width=c.width,r.height=c.height}}))},a=this;for(var c in n.$set)i(c)},e.prototype.isBasic=function(e){return Object.keys(e.texts).length<=1},e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.\u0275fac=function(t){return new(t||e)(l.qc(c.Hb))},e.\u0275prov=l.cc({token:e,factory:e.\u0275fac}),e}()},xzff:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(n("INYq")),a=r(n("QSAZ")),o=n("33n6"),s=n("MtdZ"),c=r(n("ZcxV")),l=r(n("V4YE")),u=r(n("lCA4")),d=i.default.create;function p(){var e=d();return e.compile=function(t,n){return s.compile(t,n,e)},e.precompile=function(t,n){return s.precompile(t,n,e)},e.AST=a.default,e.Compiler=s.Compiler,e.JavaScriptCompiler=c.default,e.Parser=o.parser,e.parse=o.parse,e.parseWithoutProcessing=o.parseWithoutProcessing,e}var h=p();h.create=p,u.default(h),h.Visitor=l.default,h.default=h,t.default=h,e.exports=t.default},y0dT:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n("Cupj");var r=n("ZTXN"),i=n("C05f"),a=n("ROBh"),o=n("X0jn"),s=n("19Zn"),c=n("EM62"),l=n("2kYt"),u=n("Wrqg"),d=n("jHi0");function p(e,t){if(1&e&&(c.xc(),c.mc(0,"svg",4),c.hc(1,"use"),c.lc()),2&e){var n=c.yc();c.Sb(1),c.Tb("href",n.iconHref,null,"xlink")}}var h=function(e){return{content:e}},f=function(){return["Tab","Enter"]};function m(e,t){if(1&e){var n=c.nc();c.mc(0,"div",5),c.mc(1,"text-input",6),c.uc("submit",(function(e){return c.Qc(n),c.yc().handleSubmit(e,0)})),c.lc(),c.mc(2,"text-input",6),c.uc("submit",(function(e){return c.Qc(n),c.yc().handleSubmit(e,1)})),c.lc(),c.mc(3,"text-input",6),c.uc("submit",(function(e){return c.Qc(n),c.yc().handleSubmit(e,2)})),c.lc(),c.mc(4,"text-input",6),c.uc("submit",(function(e){return c.Qc(n),c.yc().handleSubmit(e,3)})),c.lc(),c.lc()}if(2&e){var r=t.ngIf,i=c.yc();c.Sb(1),c.Dc("value",r[0])("type",i.number)("tooltip",c.Ic(24,h,i._data.typeParams.tooltips[0]))("invalidInput",i.invalidInput[0])("submitOnCode",c.Hc(26,f))("submitOnBlur",!0),c.Sb(1),c.Dc("value",r[1])("type",i.number)("tooltip",c.Ic(27,h,i._data.typeParams.tooltips[1]))("invalidInput",i.invalidInput[1])("submitOnCode",c.Hc(29,f))("submitOnBlur",!0),c.Sb(1),c.Dc("value",r[2])("type",i.number)("tooltip",c.Ic(30,h,i._data.typeParams.tooltips[2]))("invalidInput",i.invalidInput[2])("submitOnCode",c.Hc(32,f))("submitOnBlur",!0),c.Sb(1),c.Dc("value",r[3])("type",i.number)("tooltip",c.Ic(33,h,i._data.typeParams.tooltips[3]))("invalidInput",i.invalidInput[3])("submitOnCode",c.Hc(35,f))("submitOnBlur",!0)}}var g=function(){function e(){this.invalidInput=new Array(4).fill(!1),this._change=new r.a,this.valueSource=new i.a([]),this.dataSource=new i.a([])}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this._data.icon},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.invalidInput.fill(!1),this._data=e,this.dataSource.next(e.value),this.dataItem||(this.dataItem=s.j.instance.create({type:o.c.NUMBER,validationRules:e.validationRules}))},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this.valueSource.next(this._data.value)},e.prototype.applyAnimated=function(){return this.apply(),Object(a.a)({})},e.prototype.handleSubmit=function(e,t){if(isNaN(e)||this.dataItem&&null!==this.dataItem.validate(e))this.invalidInput[t]=!0;else{var n=this._data.value;n[t]=+e,this._change.next({value:n})}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.ac({type:e,selectors:[["sidebar-multi-input"]],decls:7,vars:5,consts:[[1,"fx-margin-bottom-10"],[1,"sidebar-multi-input-label"],["class","nu-icon nu-icon-med",4,"ngIf"],["class","sidebar-multi-input-controls",4,"ngIf"],[1,"nu-icon","nu-icon-med"],[1,"sidebar-multi-input-controls"],[3,"value","type","tooltip","invalidInput","submitOnCode","submitOnBlur","submit"]],template:function(e,t){1&e&&(c.mc(0,"div",0),c.mc(1,"div",1),c.dd(2,p,2,1,"svg",2),c.mc(3,"label"),c.fd(4),c.lc(),c.lc(),c.dd(5,m,5,36,"div",3),c.zc(6,"async"),c.lc()),2&e&&(c.Sb(2),c.Dc("ngIf",t._data.icon),c.Sb(2),c.gd(t._data.label),c.Sb(1),c.Dc("ngIf",c.Ac(6,3,t.dataSource)))},directives:[l.t,u.a,d.a],pipes:[l.b],styles:[".sidebar-multi-input-label[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar-multi-input-label[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.sidebar-multi-input-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.sidebar-multi-input-controls[_ngcontent-%COMP%]   text-input[_ngcontent-%COMP%]{flex:1;margin-right:2px}"],changeDetection:0}),e}()},yhNa:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("Cupj");var r=n("ZTXN"),i=n("C05f"),a=n("6Oco"),o=n("EM62"),s=n("Wrqg"),c=n("2kYt"),l=function(){return["Tab","Enter"]},u=function(){function e(){this._change=new r.a,this.valueSource=new i.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this.valueSource.next(this._data.value)},e.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.ac({type:e,selectors:[["sidebar-input"]],decls:2,vars:12,consts:[[3,"inline","multiLined","placeholder","type","label","readonly","value","submitOnCode","submitOnBlur","submit"]],template:function(e,t){1&e&&(o.mc(0,"text-input",0),o.uc("submit",(function(e){return t._change.next({value:e})})),o.zc(1,"async"),o.lc()),2&e&&(o.Dc("inline","left"===t._props.labelPosition)("multiLined",!1)("type","number")("label",t._props.label)("readonly",t._data.params.readOnly)("value",o.Ac(1,9,t.valueSource))("submitOnCode",o.Hc(11,l))("submitOnBlur",!0),o.Tb("data-testid",t.id))},directives:[s.a],pipes:[c.b],encapsulation:2,changeDetection:0}),e}()},z3tU:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("ROBh"),i=n("5xGT"),a=n("YtkY"),o=n("8j5Y"),s=n("EM62"),c=function(){function e(e){this.loader=e}return Object.defineProperty(e.prototype,"definitionSummaryKey",{get:function(){return i.m.get("RESOURCE_LOCATION")+i.m.get("SHAPE_RESOURCE_BASE")+"def-sum.json"},enumerable:!1,configurable:!0}),e.prototype.getDefinitions=function(e){var t=this;return this.loadingObservable?this.loadingObservable.pipe(Object(a.a)((function(){return t.findMany(e)}))):Object(r.a)(this.findMany(e))},e.prototype.getDefinition=function(e){var t=this;return this.loadingObservable?this.loadingObservable.pipe(Object(a.a)((function(){return t.findOne(e)}))):Object(r.a)(this.findOne(e))},e.prototype.load=function(){var e=this;return this.loadingObservable=this.loader.forceLoad(this.definitionSummaryKey).pipe(Object(a.a)((function(t){return e.loadedDefinitionSummery=t.defs}))),this.loadingObservable.pipe(Object(o.a)({complete:function(){return e.loadingObservable=void 0}}))},e.prototype.findMany=function(e){var t=this;return e.map((function(e){return t.loadedDefinitionSummery.find((function(n){return t.getFullyQualifiedDefId(n)===e}))})).filter((function(e){return!!e}))},e.prototype.findOne=function(e){var t=this;return this.loadedDefinitionSummery.find((function(n){return e===t.getFullyQualifiedDefId(n)}))},e.prototype.getFullyQualifiedDefId=function(e){return e.defId+"."+e.version},e.\u0275fac=function(t){return new(t||e)(s.qc(i.xb))},e.\u0275prov=s.cc({token:e,factory:e.\u0275fac}),e}()},zFpY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("ROBh"),i=n("EM62"),a=function(){function e(){}return e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,buttonLabel:e.label,value:{defId:e.defId,version:e.version,handshake:e.handshake},shapeId:t.shapeId}})),i=n.find((function(e){return e.id===t.selected}));return i?i.selected=!0:n[0].selected=!0,Object(r.a)({value:n})},e.prototype.getApplyData=function(e,t){var n;return Object(r.a)({changes:(n={},n[t.shapeId]=t.value,n),updateDefinitions:!0,updateConnections:!0})},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.cc({token:e,factory:e.\u0275fac}),e}()},zsv6:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("YtkY"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this;void 0===t&&(t={});var i=this.featureList.getFeature(e),a=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(r.a)((function(r){if(t.params={readOnly:i.data.readOnly},"selectionAngle"===e&&1===a.length){var o=r.getShape(a[0]).angle;return t.value=Math.round(o),t}return t.value=n.getUIData(e,r),t})))},e.prototype.getApplyData=function(e,t){return Object(o.a)({})},e.prototype.getUIData=function(e,t){var n=this.state.get("Selected"),r=t.getShape(n[0]);if(!r)return"-";if(r.isConnector()){var i=r;if("connectorStartX"===e){var a=i.path[i.path.headId];return this.roundValue(a.x)}if("connectorStartY"===e){a=i.path[i.path.headId];return this.roundValue(a.y)}if("connectorEndX"===e){var o=i.path[i.path.tailId];return this.roundValue(o.x)}if("connectorEndY"===e){o=i.path[i.path.tailId];return this.roundValue(o.y)}}else{var s=t.getBounds(n);if("selectionPositionX"===e)return this.roundValue(s.x);if("selectionPositionY"===e)return this.roundValue(s.y);if("selectionWidth"===e)return this.roundValue(s.width);if("selectionHeight"===e)return this.roundValue(s.height)}},e.prototype.roundValue=function(e){return""+Math.round(e)},e.\u0275fac=function(t){return new(t||e)(c.qc(s.a),c.qc(a.Hb),c.qc(i.a))},e.\u0275prov=c.cc({token:e,factory:e.\u0275fac}),e}()}}]);
//# sourceMappingURL=6.6f29df83d71249a57e24.js.map